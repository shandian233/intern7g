var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function __(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}();!function(){return function r(t,e,i){function o(n,s){if(!e[n]){if(!t[n]){var u="function"==typeof require&&require;if(!s&&u)return u(n,!0);if(a)return a(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var f=e[n]={exports:{}};t[n][0].call(f.exports,function(e){return o(t[n][1][e]||e)},f,f.exports,r,t,e,i)}return e[n].exports}for(var a="function"==typeof require&&require,n=0;n<i.length;n++)o(i[n]);return o}}()({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function GameConfig(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GameConfig)}return a(GameConfig,null,[{key:"init",value:function(){Laya.ClassUtils.regClass}}]),GameConfig}();i.default=n,n.width=1280,n.height=720,n.scaleMode="fixedheight",n.screenMode="none",n.alignV="top",n.alignH="left",n.startScene="test/TestScene.scene",n.sceneRoot="",n.debug=!1,n.stat=!1,n.physicsDebug=!1,n.exportSceneToJson=!0,n.init()},{}],2:[function(t,e,i){"use strict";var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("./GameConfig")),s=(_interopRequireDefault(t("./engtst/mgm/GmPlay")),_interopRequireDefault(t("./ui/XOLE")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}new(function(){function Main(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Main),window.Laya3D?Laya3D.init(n.default.width,n.default.height):Laya.init(n.default.width,n.default.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=n.default.scaleMode,Laya.stage.screenMode=n.default.screenMode,Laya.stage.alignV=n.default.alignV,Laya.stage.alignH=n.default.alignH,Laya.stage.frameRate="fast",Laya.URL.exportSceneToJson=n.default.exportSceneToJson,(n.default.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),n.default.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),n.default.stat&&Laya.Stat.show(0,50),Laya.alertGlobalError=!0,s.default.gi().Init()}return a(Main,[{key:"onVersionLoaded",value:function(){}},{key:"onConfigLoaded",value:function(){}}]),Main}())},{"./GameConfig":1,"./engtst/mgm/GmPlay":65,"./ui/XOLE":316}],3:[function(t,e,i){},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function GameData(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GameData)};i.default=a,a.GV=2,a.bGm=!1,a.bFromSD=!0,a.sSDTo="url/7gol/",a.sDSURL="www.honglajiao-qiguo.cn",a.sLGURL="www.hlj-qiguo.cn",a.sUpdateSeverList=["http://www.honglajiao-qiguo.cn:7999/7gol/","http://www.honglajiao-qiguo.cn:7998/7gol/","http://www.hlj-qiguo.cn:7999/7gol/","http://www.hlj-qiguo.cn:7998/7gol/","http://www.honglajiao-qiguo.cn:7999/7gol_test/","http://192.168.1.102:7998/7gol_test/"],a.sUpdateClientList=["http://www.honglajiao-qiguo.cn:7999/clients/","http://www.honglajiao-qiguo.cn:7998/clients/","http://www.hlj-qiguo.cn:7999/clients/","http://www.hlj-qiguo.cn:7998/clients/","http://www.honglajiao-qiguo.cn:7999/clients/"],a.APKVersion=83,a.bAutoGetInForDebug=!1,a.iUpgradeExp=[50,82,118,162,223,309,437,625,900,1299,1865,2655,3737,5190,7108,9602,12797,16839,21892,28143,35800,45097,56291,69673,85554,104286,126244,151847,181542,215822,255210,300282,351648,409973,475959,550369,634007,727740,832483,949217,1078972,1222853,1382018,1557702,1751196,1963878,2197181,2452633,2731820,3036427,3368205,3729006,4120752,4545473,5005273,5502370,6039058,6617754,7240952,7911277,8631436,9404270,10232709,11119824,12068777,13082876,14165527,15320290,16550824,17860949,38753380,44123118,50086102,56692039,63993533,72046195,80908733,90643061,101314396,112991366,125746113,139654396,154795703,171253353,189114611,208470792,229417375,252054113,276485149,302819125,331075927,361085709,392955657,426797546,462727854,500867876,541343848,584287057,629618890,677400453,727767957,780862910,836699467,895022208,955969897],a.iUpgradeMoney=[50,82,118,162,223,309,437,625,900,1299,1865,2655,3737,5190,7108,9602,12797,16839,21892,28143,35800,45097,56291,69673,85554,104286,126244,151847,181542,215822,255210,300282,351648,409973,475959,550369,634007,727740,832483,949217,1078972,1222853,1382018,1557702,1751196,1963878,2197181,2452633,2731820,3036427,3368205,3729006,4120752,4545473,5005273,5502370,6039058,6617754,7240952,7911277,8631436,9404270,10232709,11119824,12068777,13082876,14165527,15320290,16550824,17860949,38753380,39648336,40642166,41743155,42960070,44302180,45779269,47401657,49180212,51126373,53252164,55570211,58093762,60836703,63813579,67039609,70530706,74303495,78375334,82764330,87473797,92475427,97787085,103427399,109415783,115772453,122518448,129675649,137230954,145194547,153589131,162438289,171744381,181464837,191622785],a.sZhenName=["普通阵","天罡阵","八卦阵","疾风阵","飞龙阵","聚星阵"],a.sWXK=["火","金","土","水","木"],a.sWuXing=["金","木","水","火","土"],a.sWXS=["土","水","金","木","火"],a._sWXK=["木","土","火","金","水"],a._sWXS=["水","火","木","土","金"],a.sWeek=["日","一","二","三","四","五","六","日","八","九","十"],a.sBigNum=["零","一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十"],a.iBaseAttAdd=[[10,10,10,10,10],[12,5,11,12,10],[12,11,11,8,8]],a.iMasterids=[75,5,6,7,21,22,23,24,25,26],a.sSchools=["无","剑侠居","茅蓬坞","庐医崖","武安阁","溶洞","鬼谷","封神台","仙人洞","神女峰"],a.iSchoolMapIds=[0,5,6,7,10,8,9,11,12,13],a.iSchoolSkillId=[[1,2,3,4,5,12],[1,2,3,4,5,12],[14,15,16,17,18,19],[27,28,29,30,31,32],[40,41,42,43,44,45],[53,54,55,56,57,58],[66,67,68,69,70,71],[79,80,81,82,83,84],[92,93,94,95,96,97],[105,106,107,108,109,110]],a.iGovSkillId=[118,119,120,121,122,123,124,125],a.iGovXiuId=[126,127,128,129,130,131,197,198,199,200],a.EXTCOLOR="#c00ff00",a.VOICETIMEOUT=300},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function GmConfig(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GmConfig)};i.default=a,a.SCRW=800,a.SCRH=480,a.OFFX=0,a.OFFY=0,a.REALW=1024,a.REALH=768,a.SYSW=2048,a.SYSH=1440,a.bDebug=!1,a.bBigUI=!1,a.BUW=960,a.BUH=540},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function SortAnima(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SortAnima)};i.default=a,a.WeapFlag=function(t){var e,i;if(null==a._WEAPSORT)for(a._WEAPSORT=new Int32Array(512),e=0;e<3;e++)for(i=0;i<10;i++)a._WEAPSORT[a._WEAPID[e][i]]=i;return a._WEAPSORT[t]},a._WEAPSORT=null,a._WEAPID=[[9,47,48,49,50,51,52,248,290,291],[1,53,54,55,56,57,58,249,292,293],[10,59,60,61,62,63,64,250,294,295]],a._CHANGECOLOR=[["头发","衣服","裙子","鞋子"],["头发","上身","下身"],["头发","衣服","手腕","鞋子","尾巴"],["头发","上身","下身","肩甲"],["头发","袖子","裙子","鞋子"],["头发","衣服","盔甲","头饰","披风"]],a._CHANGECOLORCOST=[[10,8,8,4],[10,10,10],[8,8,4,4,6],[6,10,6,8],[8,6,12,4],[6,6,10,4,4]],a._ANIMASORT_MOUNT=[[[[["前","人前","后","人后","武器"],["武器","人右","身体","人左"],["武器","人右","身体","人左","左翅膀"],["武器","人右","身体","人左","左翅膀"],["后","人","武器","前"],["人左","身体","人右","右翅膀","武器"],["人左","身体","人右","右翅膀","武器"],["人左","身体","人右","武器"]],[["前","人前","后","人后","武器"],["武器","人右","身体","人左"],["武器","人右","身体","人左","左翅膀"],["武器","人右","身体","人左","左翅膀"],["后","人","武器","前"],["人左","身体","人右","右翅膀","武器"],["人左","身体","人右","右翅膀","武器"],["人左","身体","人右","武器"]]],[[["前","人前","后","人后","武器","飘带"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]],[["前","人前","后","人后","武器","飘带"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]]],[[["前","人前","后","人后","武器","飘带"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]],[["前","人前","后","人后","武器","飘带"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]]]],[[[["前","人前","后","人后","武器"],["武器","人右","身体","人左"],["武器","人右","身体","人左"],["武器","人右","身体","人左"],["后","人","武器","前"],["人左","身体","人右","武器"],["人左","身体","人右","武器"],["人左","身体","人右","武器"]],[["前","人前","后","人后","武器"],["武器","人右","身体","人左"],["武器","人右","身体","人左"],["武器","人右","身体","人左"],["后","人","武器","前"],["人左","身体","人右","武器"],["人左","身体","人右","武器"],["人左","身体","人右","武器"]]],[[["前","人前","后","人后","武器","飘带"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]],[["前","人前","后","人后","武器","飘带"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]]],[[["前","人前","后","人后","武器","飘带"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]],[["前","人前","后","人后","武器","飘带"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]]]],[[[["前","人前","后","人后","武器"],["武器","人右","身体","人左"],["武器","人右","身体","人左"],["武器","人右","身体","人左"],["后","人","武器","前"],["人左","身体","人右","武器"],["人左","身体","人右","武器"],["人左","身体","人右","武器"]],[["前","人前","后","人后","武器"],["武器","人右","身体","人左"],["武器","人右","身体","人左"],["武器","人右","身体","人左"],["后","人","武器","前"],["人左","身体","人右","武器"],["人左","身体","人右","武器"],["人左","身体","人右","武器"]]],[[["前","人前","后","人后","武器"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]],[["前","人前","后","人后","武器"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]]],[[["前","人前","后","人后","武器"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]],[["前","人前","后","人后","武器"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["武器","右翅膀","人右","身体","人左","左翅膀"],["后","人","武器","前"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"],["左翅膀","人左","身体","人右","右翅膀","武器"]]]]],a._ANIMASORT=[[[["人物","武器"],["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[[],["人物","武器"],[],[],[],["武器","人物"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]]],[[["人物","武器"],["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[[],["人物","武器"],[],[],[],["武器","人物"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]]],[[["人物","武器"],["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[[],["人物","武器"],[],[],[],["武器","人物"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]]],[[["人物","武器"],["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[[],["人物","武器"],[],[],[],["武器","人物"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]]],[[["人物","武器"],["人物","武器"],["武器","人物"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[["人物","武器"],["人物","武器"],["人物","武器"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[[],["人物","武器"],[],[],[],["武器","人物"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]]],[[["人物","武器"],["人物","武器"],["武器","人物"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[["人物","武器"],["人物","武器"],["人物","武器"],["武器","人物"],["武器","人物"],["人物","武器"],["人物","武器"],["人物","武器"]],[[],["人物","武器"],[],[],[],["武器","人物"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]],[[],["武器","人物"],[],[],[],["人物","武器"],[],[]]]]},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function XDefine(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XDefine)};i.default=a,a.RECORDFILENAME="record.dat",a.PRIVATECHATRECORD="chatrecord.dat",a.bInRect=function(t,e,i,a,n,s){return!(t<=i)&&(!(e<=a)&&(!(t>=i+n)&&!(e>=a+s)))},a.bInLX=function(t,e,i,a,n,s){return!(t<i-n/2)&&(!(t>i+n/2)&&(!(e<a-s/2)&&(!(e>a+s/2)&&!((t=i>t?i-t:t-i)+(e=(e=a>e?a-e:e-a)*n/s)>n/2))))},a.bOnRect=function(t,e,i,a,n,s){return!(t<i)&&(!(e<a)&&(!(t>i+n)&&!(e>a+s)))},a.llength=function(t,e,i,a){return parseInt(Math.sqrt((t-i)*(t-i)+(e-a)*(e-a)))},a.CalcRate=function(t,e,i){return parseInt(1*t*i/e)},a.PI=3.1415926,a.GetAngleXY=function(t,e,i,n){var s,r,o;return r=e-n,0==(s=t-i)&&(s=1e-7),o=Math.atan(r/s),s<0&&(o+=a.PI),parseInt(180*o/a.PI)},a.GetAngleXY_ext=function(t,e,i,n){var s,r,o;return r=e-n,0==(s=t-i)&&(s=1e-7),o=Math.atan(r/s),s<0&&(o+=a.PI),o},a.ShowFM=function(){},a.getFileMD5=function(t){return""},a.SecondToTime=function(t){var e,i="";return 0==(e=t/3600)?i+="00":e<10?i=i+"0"+e:i+=e,i+=":",0==(e=t/60%60)?i+="00":e<10?i=i+"0"+e:i+=e,i+=":",0==(e=t%60)?i+="00":e<10?i=i+"0"+e:i+=e,i},a.HEX_DIGITS=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],a.toHexString=function(t){for(var e="",i=0;i<t.length;i++)e+=HEX_DIGITS[(240&t[i])>>4],e+=HEX_DIGITS[15&t[i]];return e},a.grnd=function(t,e){return t>=e?t:Math.floor(Math.random()*(e-t+1))+t},a.GetRand=function(t,e){return t>=e?t:Math.floor(Math.random()*(e-t+1))+t},a.get_ms=function(){return Date.now()},a._debuglist=null,a.sop=function(t){null==a._debuglist&&(a._debuglist=new Array(20));for(var e=20;e>0;e--)a._debuglist[e]=a._debuglist[e-1];a._debuglist[0]=t,console.log(t)},a.arraycopy=function(t,e,i,a,n){for(var s=0;s<n;s++)i[a+s]=t[e+s]},a.BASE_URL="http://syno10c898ec20dc.qicp.vip:5050/7g/"},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function BaseClass(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BaseClass),this.iStatType=0}return a(BaseClass,[{key:"Draw",value:function(){}},{key:"ProcTouch",value:function(t,e,i){return!1}},{key:"CallBack",value:function(t,e){}}]),BaseClass}();i.default=n},{}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../config/XDefine")),s=_interopRequireDefault(t("./gbk"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(){function PackageTools(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PackageTools),null==t&&(t=4194304),this.bLoadSuccess=!1,this.MAXDATALENGTH=t,this.databuf=new ArrayBuffer(this.MAXDATALENGTH),this.pdataview=new DataView(this.databuf),this.iLength=0,this.b64c=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/","="],this._BASE64CODE=new ArrayBuffer(65),this._BASE64DECODE=new ArrayBuffer(256);for(var e=0;e<65;e++)this._BASE64CODE[e]=this.b64c[e].charCodeAt(0),this._BASE64DECODE[this._BASE64CODE[e]]=e;this.obd=new ArrayBuffer(65536)}return a(PackageTools,[{key:"SetDataAndOffset",value:function(t,e,i){for(var a=0;a<i;a++)this.databuf[a]=t[a];this.iLength=i,this.iOffset=e}},{key:"xordata",value:function(t){for(var e=0;e<t;e++)this.databuf[e]=255^this.databuf[e]}},{key:"SetData",value:function(t,e){for(var i=0;i<e;i++)this.databuf[i]=t[i];this.iLength=e,this.iOffset=0}},{key:"GetData2",value:function(t){this.iLength=t.length;for(var e=0;e<this.iLength;e++)this.databuf[e]=t.charCodeAt(e),this.databuf[e]=255&this.databuf[e];this.iOffset=0}},{key:"GetData3",value:function(t){var e,i=new Laya.Byte;i.clear(),i.writeArrayBuffer(t),i.pos=0;for(var a=0;a<i.length;a++)(e=i.getByte())<0&&(e+=256),this.databuf[a]=255&e;this.iOffset=0,this.iLength=i.length}},{key:"GetData",value:function(t){null!=t?(n.default.sop("load success "+this.load_fn),this.GetData3(t),this.iOffset=0,this.bLoadSuccess=!0,null!=this._plsbackcallfunc&&this._plsbackcallfunc()):n.default.sop("load failed "+this.load_fn)}},{key:"GetProc",value:function(t){n.default.sop("Loading Proc : "+t)}},{key:"InitDataFromURL",value:function(t,e){this._plsbackcallfunc=e,this.bLoadSuccess=!1,this.load_fn=t,Ld(t,Laya.Handler.create(this,this.GetData),Laya.Handler.create(this,this.GetProc),Laya.Loader.BUFFER)}},{key:"InitDataFromFile",value:function(t,e){this._plsbackcallfunc=e,this.bLoadSuccess=!1,this.load_fn=t,Ld(n.default.BASE_URL+t,Laya.Handler.create(this,this.GetData),Laya.Handler.create(this,this.GetProc),Laya.Loader.BUFFER)}},{key:"JS_DataFromLocal",value:function(t){var e=localStorage.getItem(t);if(null==e)return!1;this.iLength=e.length,this.iOffset=0;for(var i=0;i<this.iLength;i++)this.databuf[i]=e.charCodeAt(i),this.databuf[i]=255&this.databuf[i];return this.Decode_base64(),!0}},{key:"JS_DataToLocal",value:function(t){this.Encode_base64(),localStorage.setItem(t,this.obs)}},{key:"Encode_base64",value:function(){var t,e,i=(this.iLength-this.iLength%3)/3;this.iLength%3!=0&&i++,i*=4,e=0;var a=this.obd;for(t=0;t<a.length;t++)a[t]=0;for(t=0;t<this.iLength;t++)switch(t%3){case 0:a[e]=this.databuf[t]>>2,a[++e]=(3&this.databuf[t])<<4;break;case 1:a[e]=a[e]|this.databuf[t]>>4,a[++e]=(15&this.databuf[t])<<2;break;case 2:a[e]=a[e]|this.databuf[t]>>6,a[++e]=63&this.databuf[t],e++}for(this.obs="",t=0;t<i;t++)t>e?(this.databuf[t]=64,this.obs+=this.b64c[64]):a[t]<64?(this.databuf[t]=this._BASE64CODE[a[t]],this.obs+=this.b64c[a[t]]):printf("error");this.iLength=i}},{key:"Decode_base64",value:function(){if(this.iLength%4==0){var t,e=0,i=0;for(t=0;t<this.iLength;t++){if(this.databuf[t]===this._BASE64CODE[64])return void(this.iLength=e);switch(i=this._BASE64DECODE[this.databuf[t]],t%4){case 0:this.databuf[e]=i<<2;break;case 1:this.databuf[e]|=i>>4,e++,this.databuf[e]=(15&i)<<4;break;case 2:this.databuf[e]|=i>>2,e++,this.databuf[e]=(3&i)<<6;break;case 3:this.databuf[e]|=i,e++}}for(this.iLength=e,t=0;t<e;t++)this.databuf[t]=255&this.databuf[t]}}},{key:"_GetNextString",value:function(){if(this.obs="",this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress&&this.databuf[this.iOffset++]!==PackageTools.PTDT_STRING)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;if(this.obi=this.databuf[this.iOffset++],(this.obi<0||this.obi>256)&&(this.obi=0),this.obi>0){for(var t=new Uint8Array(this.obi),e=0;e<this.obi;e++)t[e]=this.databuf[this.iOffset+e];this.obs=s.default.gb2312a_to_utf8(t)}return this.iOffset+=this.obi,this.obi}},{key:"DataToString",value:function(){return this.obs}},{key:"str2UTF8",value:function(t){var e,i,a=new Array;e=t.length;for(var n=0;n<e;n++)(i=t.charCodeAt(n))>=65536&&i<=1114111?(a.push(i>>18&7|240),a.push(i>>12&63|128),a.push(i>>6&63|128),a.push(63&i|128)):i>=2048&&i<=65535?(a.push(i>>12&15|224),a.push(i>>6&63|128),a.push(63&i|128)):i>=128&&i<=2047?(a.push(i>>6&31|192),a.push(63&i|128)):a.push(255&i);return a}},{key:"unicode_to_utf8",value:function(t,e){t<0&&(t=256+t),e<0&&(e=256+e);var i=t<<8|e,a="";return a+=i<128?String.fromCharCode(i):i<2048?String.fromCharCode(192+(i>>6),128+(63&i)):i<65536?String.fromCharCode(224+(i>>12),128+(i>>6&63),128+(63&i)):String.fromCharCode(240+(i>>18),128+(i>>12&63),128+(i>>6&63),128+(63&i))}},{key:"StringToBuffer",value:function(t,e){for(var i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return i}},{key:"BufferToString",value:function(t,e){for(var i=new Int8Array(e),a=0;a<e;a++)i[a]=t[a];return this.byteToString(i)}},{key:"byteToString",value:function(t){var e,i,a,n,s,r;for(e="",a=t.length,i=0;i<a;)switch((n=t[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(n);break;case 12:case 13:s=t[i++],e+=String.fromCharCode((31&n)<<6|63&s);break;case 14:s=t[i++],r=t[i++],e+=String.fromCharCode((15&n)<<12|(63&s)<<6|(63&r)<<0)}return e}},{key:"InsertString",value:function(t){var e=s.default.utf8_to_gb2312a(t);if(this.iOffset<0||this.iOffset+e.length+2>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var i=this.iOffset;this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_STRING),this.databuf[this.iOffset++]=e.length;for(var a=0;a<e.length;a++)this.databuf[this.iOffset++]=e[a];return this.iOffset-i}},{key:"GetNextString",value:function(){return this._GetNextString(),this.obs}},{key:"InsertInt",value:function(t){if(this.iOffset<0||this.iOffset+5>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var e=this.iOffset;return this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_INT),this.databuf[this.iOffset++]=t>>24&255,this.databuf[this.iOffset++]=t>>16&255,this.databuf[this.iOffset++]=t>>8&255,this.databuf[this.iOffset++]=255&t,this.iOffset-e}},{key:"GetNextInt",value:function(){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress){if(this.databuf[this.iOffset]!=PackageTools.PTDT_INT)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;this.iOffset++}return this.obi=this.databuf[this.iOffset]<<24|this.databuf[this.iOffset+1]<<16|this.databuf[this.iOffset+2]<<8|this.databuf[this.iOffset+3],this.obi>=2147483648&&(this.obi=this.obi-4294967296),this.iOffset+=4,this.obi}},{key:"InsertByte",value:function(t){if(this.iOffset<0||this.iOffset+2>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var e=this.iOffset;return this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_BYTE),this.databuf[this.iOffset++]=255&t,this.iOffset-e}},{key:"GetNextByte",value:function(){if(this.iOffset<0||this.iOffset+2>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,-1;if(!this.bCompress){if(this.databuf[this.iOffset]!=PackageTools.PTDT_BYTE)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,-1;this.iOffset++}return this.obi=this.databuf[this.iOffset],this.obi>=128&&(this.obi=this.obi-256),this.iOffset++,this.obi}},{key:"InsertShort",value:function(t){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var e=this.iOffset;return this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_SHORT),this.databuf[this.iOffset++]=t>>8&255,this.databuf[this.iOffset++]=255&t,this.iOffset-e}},{key:"GetNextShort",value:function(){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress){if(this.databuf[this.iOffset]!=PackageTools.PTDT_SHORT)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;this.iOffset++}return this.obi=this.databuf[this.iOffset]<<8|this.databuf[this.iOffset+1],this.obi>=32768&&(this.obi=this.obi-65536),this.iOffset+=2,this.obi}},{key:"InsertData",value:function(t,e){if(this.iOffset<0||this.iOffset+e+2>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var i=this.iOffset;this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_DATA),this.databuf[this.iOffset++]=e>>8&255,this.databuf[this.iOffset++]=255&e;for(var a=0;a<e;a++)this.databuf[this.iOffset++]=t[a];return this.iOffset-i}},{key:"GetNextData",value:function(){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress&&this.databuf[this.iOffset++]!=PackageTools.PTDT_DATA)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;this.obi=this.databuf[this.iOffset]<<8|this.databuf[this.iOffset+1],this.iOffset+=2;for(var t=new Uint8Array(this.obi),e=0;e<this.obi;e++)this.obd[e]=this.databuf[this.iOffset+e],t[e]=this.databuf[this.iOffset+e];return this.obs=s.default.gb2312a_to_utf8(t),this.iOffset+=this.obi,this.obi}},{key:"InsertFloat",value:function(t){if(this.iOffset<0||this.iOffset+5>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var e=this.iOffset;this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_FLOAT),this.pdataview.setFloat32(0,t,!0);for(var i=0;i<4;i++)this.databuf[this.iOffset++]=this.pdataview.getInt8(i);return this.iOffset-e}},{key:"GetNextFloat",value:function(){if(this.iOffset<0||this.iOffset+5>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress&&this.databuf[this.iOffset++]!=PackageTools.PTDT_FLOAT)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;for(var t=0;t<4;t++)this.pdataview.setInt8(t,this.databuf[this.iOffset+t]);return this.obf=this.pdataview.getFloat32(0,!0),this.iOffset+=4,this.obf}},{key:"InsertLong",value:function(t){if(this.iOffset<0||this.iOffset+5>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var e,i=this.iOffset;this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_LONG);for(var a=0;a<8;a++)e=t%256,this.databuf[this.iOffset+7-a]=e,t-=e,t/=256;return this.iOffset+=8,this.iOffset-i}},{key:"GetNextLong",value:function(){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress){if(this.databuf[this.iOffset]!=PackageTools.PTDT_LONG)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;this.iOffset++}this.obi=0;var t,e=1;for(t=0;t<8;t++)this.obi+=this.databuf[this.iOffset+7-t]*e,e*=256;return this.iOffset+=8,this.obi}}]),PackageTools}();i.default=r,r.PTEID_NON=0,r.PTEID_OUTOFMEMORY=1,r.PTEID_TYPEMISMATCH=2,r.PTDT_BYTE=1,r.PTDT_SHORT=2,r.PTDT_INT=3,r.PTDT_STRING=4,r.PTDT_DATA=5,r.PTDT_FLOAT=6,r.PTDT_LONG=7,r.pls=null,r.gi=function(){return null==r.pls&&(r.pls=new r),r.pls}},{"../config/XDefine":7,"./gbk":24}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../config/GmConfig")),s=_interopRequireDefault(t("../config/XDefine")),r=_interopRequireDefault(t("../engtst/mgm/GmPlay")),o=_interopRequireDefault(t("../engtst/mgm/gameing/fast/SystemOperate")),u=_interopRequireDefault(t("./_TOUCHMANAGE"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(){function TouchManager(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,TouchManager),this.procstack=new u.default(TouchManager.MAXTOUCHPROC),this.procing=new u.default,this.ISHENGPING=!1,t=0;t<TouchManager.MAXTOUCH;t++)TouchManager.ths[t]=new u.default,TouchManager.ths[t].iTouchStat=TouchManager.TOUCH_NONE;for(t=0;t<TouchManager.MAXTOUCHPROC;t++)this.procstack[t]=new u.default;this.iTouchCount=0,this.iProcPoint=0,this.iProcEnd=0,TouchManager.iFingerId=-1}return a(TouchManager,[{key:"clear",value:function(){var t;for(t=0;t<TouchManager.MAXTOUCH;t++)TouchManager.ths[t].iTouchStat=TouchManager.TOUCH_NONE;this.iTouchCount=0,this.iProcPoint=0,this.iProcEnd=0,TouchManager.iFingerId=-1}},{key:"pushtouch",value:function(t){return this.iProcEnd<this.iProcPoint+TouchManager.MAXTOUCHPROC?(this.procstack[this.iProcEnd%TouchManager.MAXTOUCHPROC].copyfrom(TouchManager.ths[t]),this.iProcEnd++,!0):(r.default.sop("Not Enuphy touch"),!1)}},{key:"poptouch",value:function(){return this.iProcPoint<this.iProcEnd&&(this.procing.copyfrom(this.procstack[this.iProcPoint%TouchManager.MAXTOUCHPROC]),TouchManager.iFingerId=this.procing.iTid,this.iProcPoint++,!0)}},{key:"touch_count",value:function(){return this.iTouchCount}},{key:"calcxy",value:function(t,e){this.ISHENGPING?(t=t*n.default.SCRH/n.default.REALW,e=e*n.default.SCRW/n.default.REALH,this.cy=t,this.cx=e):(this.cx=(t-n.default.OFFX)*o.default.BASEW/n.default.REALW,this.cy=(e-n.default.OFFY)*o.default.BASEH/n.default.REALH)}},{key:"touch_down",value:function(t,e,i){TouchManager.ths[t].iTouchStat==TouchManager.TOUCH_NONE&&(this.calcxy(e,i),this.iLastDownX=this.cx,this.iLastDownY=this.cy,TouchManager.ths[t].iTouchStat=TouchManager.TOUCH_DOWN,TouchManager.ths[t].iTid=t,TouchManager.ths[t].iX=this.cx,TouchManager.ths[t].iY=this.cy,TouchManager.ths[t].iPX=this.cx,TouchManager.ths[t].iPY=this.cy,TouchManager.ths[t].iSourceX=e,TouchManager.ths[t].iSourceY=i,this.pushtouch(t),this.iTouchCount++)}},{key:"touch_up",value:function(t,e,i){TouchManager.ths[t].iTouchStat!=TouchManager.TOUCH_NONE&&(this.calcxy(e,i),TouchManager.ths[t].iTouchStat=TouchManager.TOUCH_UP,TouchManager.ths[t].iX=this.cx,TouchManager.ths[t].iY=this.cy,TouchManager.ths[t].iSourceX=e,TouchManager.ths[t].iSourceY=i,this.pushtouch(t),TouchManager.ths[t].iTouchStat=TouchManager.TOUCH_NONE,this.iTouchCount--)}},{key:"touch_move",value:function(t,e){var i,a,n=99999,r=-1;for(this.calcxy(t,e),i=0;i<TouchManager.MAXTOUCH;i++)if(TouchManager.ths[i].iTouchStat!=TouchManager.TOUCH_NONE){if(0==(a=s.default.llength(this.cx,this.cy,TouchManager.ths[i].iX,TouchManager.ths[i].iY)))return;-1==r?(r=i,n=a):a<n&&(r=i,n=a)}-1!=r&&(TouchManager.ths[r].iTouchStat=TouchManager.TOUCH_MOVE,TouchManager.ths[r].iPX=TouchManager.ths[r].iX,TouchManager.ths[r].iPY=TouchManager.ths[r].iY,TouchManager.ths[r].iX=this.cx,TouchManager.ths[r].iY=this.cy,TouchManager.ths[r].iSourceX=t,TouchManager.ths[r].iSourceY=e,this.pushtouch(r))}}]),TouchManager}();i.default=l,l.TOUCH_NONE=0,l.TOUCH_DOWN=1,l.TOUCH_MOVE=2,l.TOUCH_UP=3,l.MAXTOUCHPROC=64,l.MAXTOUCH=64,l.ths=new Array(l.MAXTOUCH),l.iFingerId,l.tm=null,l.gi=function(){return null==l.tm&&(l.tm=new l),l.tm},l.FingerLocker=function(t){return-1==t?-1:l.ths[t].iTouchStat==l.TOUCH_NONE?-1:t},l._swapx=function(t){return t*(800+o.default.iScreenLS*(o.default.MAXW-800)/400)/o.default.BASEW},l._swapy=function(t){return t*(0==o.default.iSameRate?(800+o.default.iScreenLS*(o.default.MAXW-800)/400)*n.default.SYSH/n.default.SYSW:480+o.default.iScreenLS*(o.default.MAXH-480)/400)/o.default.BASEH}},{"../config/GmConfig":5,"../config/XDefine":7,"../engtst/mgm/GmPlay":65,"../engtst/mgm/gameing/fast/SystemOperate":124,"./_TOUCHMANAGE":12}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("../config/XDefine");(a=s)&&a.__esModule;function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function _OneFinger(){_classCallCheck(this,_OneFinger),this.iFingerId=_OneFinger.FREEFINGER,this.m_TouchStack=new Array(_OneFinger.MAXTOUCHSTACK);for(var t=0;t<_OneFinger.MAXTOUCHSTACK;t++)this.m_TouchStack[t]=new Object;this.iStackPoint=-1,this.iProcPoint=-1}return n(_OneFinger,[{key:"Push",value:function(t,e,i){this.iStackPoint++;var a=this.iStackPoint%_OneFinger.MAXTOUCHSTACK;this.m_TouchStack[a].type=t,this.m_TouchStack[a].x=e,this.m_TouchStack[a].y=i}},{key:"Pop",value:function(){if(this.iProcPoint>=this.iStackPoint)return null;this.iProcPoint++;var t=this.iProcPoint%_OneFinger.MAXTOUCHSTACK;return this.m_TouchStack[t].type==o.TYPE_UP&&(this.iFingerId=_OneFinger.FREEFINGER),this.m_TouchStack[t]}},{key:"TouchDown",value:function(t,e,i){this.iFingerId=t,this.Push(o.TYPE_DOWN,e,i)}},{key:"TouchMove",value:function(t,e){this.Push(o.TYPE_MOVE,t,e)}},{key:"TouchUp",value:function(t,e){this.Push(o.TYPE_UP,t,e)}}]),_OneFinger}();r.FREEFINGER=-1,r.MAXTOUCHSTACK=16;var o=function(){function XTouchManager(){_classCallCheck(this,XTouchManager)}return n(XTouchManager,[{key:"Init",value:function(){this.fingers=new Array(XTouchManager.MAXFINGERCOUNT);for(var t=0;t<XTouchManager.MAXFINGERCOUNT;t++)this.fingers[t]=new r}},{key:"FindSinger",value:function(t){for(var e=0;e<XTouchManager.MAXFINGERCOUNT;e++)if(this.fingers[e].iFingerId==t)return this.fingers[e];return null}},{key:"_test",value:function(){for(var t=0,e=0;e<XTouchManager.MAXFINGERCOUNT;e++)this.fingers[e].iFingerId==r.FREEFINGER&&t++;return t+","+this.fingers[0].iProcPoint+","+this.fingers[0].iStackPoint}},{key:"TouchDown",value:function(t,e,i){var a=this.FindSinger(r.FREEFINGER);null!=a&&a.TouchDown(t,e,i),XTouchManager.TOUCH_STAT=1}},{key:"TouchMove",value:function(t,e,i){var a=this.FindSinger(t);null!=a&&a.TouchMove(e,i),3!=XTouchManager.TOUCH_STAT&&(XTouchManager.TOUCH_STAT=2)}},{key:"TouchUp",value:function(t,e,i){var a=this.FindSinger(t);null!=a&&a.TouchUp(e,i),XTouchManager.TOUCH_STAT=3}},{key:"PopTouch",value:function(){var t;for(t=0;t<XTouchManager.MAXFINGERCOUNT;t++){var e=this.fingers[t].Pop();if(null!=e)return e}return null}}]),XTouchManager}();i.default=o,o.TOUCH_STAT=3,o.MAXFINGERCOUNT=8,o.TYPE_DOWN=1,o.TYPE_MOVE=2,o.TYPE_UP=3,o.TOUCH_DOWN=1,o.TOUCH_MOVE=2,o.TOUCH_UP=3,o.ptouch=null,o.gi=function(){return null==o.ptouch&&(o.ptouch=new o),o.ptouch}},{"../config/XDefine":7}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function _TOUCHMANAGE(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_TOUCHMANAGE),this.iTouchStat=0}return a(_TOUCHMANAGE,[{key:"copyfrom",value:function(t){this.iTid=t.iTid,this.iTouchStat=t.iTouchStat,this.iPX=t.iPX,this.iPY=t.iPY,this.iX=t.iX,this.iY=t.iY,this.iSourceX=t.iSourceX,this.iSourceY=t.iSourceY}}]),_TOUCHMANAGE}();i.default=n},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../engtst/mgm/GmPlay")),s=_interopRequireDefault(t("../graphics/M3DFast")),r=_interopRequireDefault(t("../graphics/AnimaAction")),o=_interopRequireDefault(t("../../config/XDefine"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(){function XAdjust(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XAdjust),this.pani=t,this.iPos=0,this.bInited=!1,this.bLock=!1}return a(XAdjust,[{key:"InitAdjust",value:function(t){this.pani.InitAnimaWithName(t,n.default.aaa),this.aa_line=new r.default,this.aa_btn=new r.default,n.default.aaa.iFrame=0,this.aa_line.copyfrom(n.default.aaa),n.default.aaa.iFrame=1,this.aa_btn.copyfrom(n.default.aaa),this.bInited=!0}},{key:"SetPos",value:function(t,e,i){this.iMin=t,this.iMax=e,this.iPos=i}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"Draw",value:function(){var t=this.iH,e=this.iX-t/2+(this.iPos-this.iMin)*this.iW/(this.iMax-this.iMin);this.bInited?(t=48,e=this.iX-t/2+(this.iPos-this.iMin)*this.iW/(this.iMax-this.iMin),this.aa_line.DrawEx(this.iX,this.iY+this.iH/2,101,1*this.iW/387,1,0,0,0),this.aa_btn.Draw(e,this.iY+this.iH/2)):(t=this.iH,e=iX-t/2+(this.iPos-this.iMin)*this.iW/(this.iMax-this.iMin),s.default.gi().DrawLine(this.iX,this.iY+this.iH/2,this.iX+this.iW,this.iY+this.iH/2,4294967295),s.default.gi().FillRect_2D(e,this.iY,e+t,this.iY+t,4294967295),s.default.gi().DrawTextEx((this.iX-40+e)/2,this.iY+t/2,""+this.iPos,4278255360,20,101,1,1,0,-2,-2))}},{key:"ProcTouch",value:function(t,e,i){return 3==t&&this.bLock?(this.bLock=!1,!0):o.default.bInRect(e,i,this.iX-this.iH/2,this.iY,this.iW+this.iH,this.iH)&&1==t?(this.iPos=(e-this.iX)*(this.iMax-this.iMin)/this.iW+this.iMin,this.iPos<this.iMin&&(this.iPos=this.iMin),this.iPos>this.iMax&&(this.iPos=this.iMax),this.bLock=!0,!0):!(!this.bLock||2!=t)&&(this.iPos=(e-this.iX)*(this.iMax-this.iMin)/this.iW+this.iMin,this.iPos<this.iMin&&(this.iPos=this.iMin),this.iPos>this.iMax&&(this.iPos=this.iMax),!0)}}]),XAdjust}();i.default=u},{"../../config/XDefine":7,"../../engtst/mgm/GmPlay":65,"../graphics/AnimaAction":25,"../graphics/M3DFast":28}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../engine/TouchManager")),s=_interopRequireDefault(t("../../engine/graphics/AnimaAction")),r=_interopRequireDefault(t("../../engine/graphics/M3DFast")),o=(_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),u=_interopRequireDefault(t("../../zero/Interface/PublicInterface"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(){function XButton(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XButton),this.pani=t,this.pm3f=r.default.gi(),this.bSingleButton=!1,this.bCheckByRect=!1,this.bCheckByRect1=!1,this.ReleaseButton(),this.sName="",this.iNameColor=4294967295,this.Move(0,0,100,100),this.iFingerLocker=-1,this.iNameSize=-1}return a(XButton,[{key:"SetCheckRect",value:function(t,e,i,a){this.bCheckByRect1=!0,this.iCheckX=t,this.iCheckY=e,this.iCheckW=i,this.iCheckH=a}},{key:"InitButton",value:function(t){null!=this.pani&&(this.pani.InitAnimaWithName(t,o.default.aaa),o.default.aaa.iFrame=0,this.SetAnimaNormal(o.default.aaa,!1),o.default.aaa.iFrame=1,this.SetAnimaMouseon(o.default.aaa,!1),this.SetAnimaMousedown(o.default.aaa,!1),o.default.aaa.iFrame=0,this.SetAnimaDisable(o.default.aaa,!1))}},{key:"ReleaseButton",value:function(){this.aa_normal=null,this.act_normal=!1,this.aa_mouseon=null,this.act_mouseon=!1,this.aa_mousedown=null,this.act_mousedown=!1,this.bMouseIn=!1,this.bMouseDown=!1,this.bVisible=!0,this.bDisable=!1,this.iX=0,this.iY=0}},{key:"SetAnimaNormal",value:function(t,e){null==this.aa_normal&&(this.aa_normal=new s.default),this.aa_normal.copyfrom(t),this.act_normal=e}},{key:"SetAnimaMouseon",value:function(t,e){null==this.aa_mouseon&&(this.aa_mouseon=new s.default),this.aa_mouseon.copyfrom(t),this.act_mouseon=e}},{key:"SetAnimaMousedown",value:function(t,e){null==this.aa_mousedown&&(this.aa_mousedown=new s.default),this.aa_mousedown.copyfrom(t),this.act_mousedown=e}},{key:"SetAnimaDisable",value:function(t,e){null==this.aa_disable&&(this.aa_disable=new s.default),this.aa_disable.copyfrom(t),this.act_disable=e}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"ProcTouch",value:function(t,e,i){if(-1!=this.iFingerLocker&&this.iFingerLocker!=n.default.iFingerId)return!1;if(!this.bVisible)return!1;if(this.bDisable)return!1;if(3==t&&(this.iFingerLocker=-1),!this.bMoveIn(e,i))return this.iFingerLocker=-1,this.bMouseDown=!1,!1;switch(t){case 1:this.iFingerLocker=n.default.iFingerId,this.bMouseDown=!0;break;case 2:break;case 3:this.bMouseDown&&(this.bMouseDown=!1,this.bChecked=!0),this.iFingerLocker=-1}return!0}},{key:"bCheck",value:function(){return!!this.bChecked&&(this.bChecked=!1,!0)}},{key:"bMoveIn",value:function(t,e){return this.bMouseIn=!1,this.bCheckByRect1?t>=this.iCheckX&&t<=this.iCheckX+this.iCheckW&&e>=this.iCheckY&&e<=this.iCheckY+this.iCheckH?this.bMouseIn=!0:this.bMouseIn=!1:this.bSingleButton||this.bCheckByRect?t>=this.iX&&t<=this.iX+this.iW&&e>=this.iY&&e<=this.iY+this.iH?this.bMouseIn=!0:this.bMouseIn=!1:this.pani.bInAnima(this.aa_normal,this.iX,this.iY,t,e)?this.bMouseIn=!0:this.bMouseIn=!1,this.bMouseIn}},{key:"Draw",value:function(){if(null!=this.pani&&this.bVisible){for(;u.default.gi().bInBound(this.iX,this.iY,this.iW,this.iH);)this.iX--;var t,e;if(this.bDisable?this.bSingleButton?this.pm3f.FillRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,3238002687):this.pani.DrawAnima_aa(this.iX,this.iY,this.aa_disable):this.bMouseIn?this.bMouseDown?this.bSingleButton?(this.pm3f.FillRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,2164260863),this.pm3f.DrawRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,4294967295)):this.pani.DrawAnima_aa(this.iX,this.iY,this.aa_mousedown):this.bSingleButton?(this.pm3f.FillRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,1090519039),this.pm3f.DrawRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,4294967295)):this.pani.DrawAnima_aa(this.iX,this.iY,this.aa_normal):this.bSingleButton?this.pm3f.FillRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,553648127):this.pani.DrawAnima_aa(this.iX,this.iY,this.aa_normal),this.bMouseDown?(t=2,e=2):(t=0,e=-2),this.bSingleButton||this.sName.length>0){var i=this.iNameColor;this.bDisable&&(i=4286611584),this.iNameSize>0?this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,this.sName,i,this.iNameSize,101,1,1,0,-2,-2):this.iH<=30?this.pm3f.DrawTextEx(this.iX+this.iW/2+t,this.iY+this.iH/2+e,this.sName,i,20,101,1,1,0,-2,-2):this.iH<=40?this.pm3f.DrawTextEx(this.iX+this.iW/2+t,this.iY+this.iH/2+e,this.sName,i,28,101,1,1,0,-2,-2):this.pm3f.DrawTextEx(this.iX+this.iW/2+t,this.iY+this.iH/2+e,this.sName,i,30,101,1,1,0,-2,-2)}}}}]),XButton}();i.default=l},{"../../engine/TouchManager":10,"../../engine/graphics/AnimaAction":25,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65,"../../zero/Interface/PublicInterface":318}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../engine/TouchManager")),s=_interopRequireDefault(t("../../engine/graphics/AnimaAction")),r=_interopRequireDefault(t("../../engine/graphics/M3DFast")),o=(_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),u=_interopRequireDefault(t("../../zero/Interface/PublicInterface"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(){function XButtonEx1(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XButtonEx1),this.pani=t,this.pm3f=r.default.gi(),this.bSingleButton=!1,this.bCheckByRect=!1,this.ReleaseButton(),this.sName="",this.iNameColor=4294967295,this.Move(0,0,100,100),this.iFingerLocker=-1,this.iAnimaStat=0,this.fScale=1,this.iNameSize=30}return a(XButtonEx1,[{key:"InitButton",value:function(t){this.pani.InitAnimaWithName(t,o.default.aaa),o.default.aaa.iFrame=0,this.SetAnimaNormal(o.default.aaa,!1),o.default.aaa.iFrame=1,this.SetAnimaMouseon(o.default.aaa,!1),this.SetAnimaMousedown(o.default.aaa,!1),o.default.aaa.iFrame=0,this.SetAnimaDisable(o.default.aaa,!1)}},{key:"ReleaseButton",value:function(){this.aa_normal=null,this.act_normal=!1,this.aa_mouseon=null,this.act_mouseon=!1,this.aa_mousedown=null,this.act_mousedown=!1,this.bMouseIn=!1,this.bMouseDown=!1,this.bVisible=!0,this.bDisable=!1,this.iX=0,this.iY=0}},{key:"SetAnimaNormal",value:function(t,e){null==this.aa_normal&&(this.aa_normal=new s.default),this.aa_normal.copyfrom(t),this.act_normal=e}},{key:"SetAnimaMouseon",value:function(t,e){null==this.aa_mouseon&&(this.aa_mouseon=new s.default),this.aa_mouseon.copyfrom(t),this.act_mouseon=e}},{key:"SetAnimaMousedown",value:function(t,e){null==this.aa_mousedown&&(this.aa_mousedown=new s.default),this.aa_mousedown.copyfrom(t),this.act_mousedown=e}},{key:"SetAnimaDisable",value:function(t,e){null==this.aa_disable&&(this.aa_disable=new s.default),this.aa_disable.copyfrom(t),this.act_disable=e}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"ProcTouch",value:function(t,e,i){if(-1!=this.iFingerLocker&&this.iFingerLocker!=n.default.iFingerId)return!1;if(!this.bVisible)return!1;if(this.bDisable)return!1;if(3==t&&(this.iFingerLocker=-1),!this.bMoveIn(e,i))return this.iFingerLocker=-1,this.bMouseDown=!1,0==this.iAnimaStat&&1!=this.fScale&&(this.iAnimaStat=11),!1;switch(t){case 1:this.iFingerLocker=n.default.iFingerId,this.bMouseDown=!0,this.iAnimaStat=1;break;case 2:break;case 3:this.bMouseDown&&(this.bMouseDown=!1,this.bChecked=!0,this.iAnimaStat=11),this.iFingerLocker=-1}return!0}},{key:"bCheck",value:function(){return!!this.bChecked&&(this.bChecked=!1,!0)}},{key:"bMoveIn",value:function(t,e){return this.bMouseIn=!1,this.bSingleButton||this.bCheckByRect?t>=this.iX&&t<=this.iX+this.iW&&e>=this.iY&&e<=this.iY+this.iH?this.bMouseIn=!0:this.bMouseIn=!1:this.pani.bInAnima(this.aa_normal,this.iX,this.iY,t,e)?this.bMouseIn=!0:this.bMouseIn=!1,this.bMouseIn}},{key:"Draw",value:function(){for(;u.default.gi().bInBound(this.iX,this.iY,this.iW,this.iH);)this.iX--;switch(this.iAnimaStat){case 0:break;case 1:this.fScale+=.2,this.fScale>1.3&&(this.iAnimaStat=2);break;case 2:this.fScale-=.2,this.iAnimaStat=0;break;case 11:this.fScale-=.2,this.fScale<1&&(this.iAnimaStat=12);break;case 12:this.fScale=1,this.iAnimaStat=0}if(this.bVisible&&(this.bDisable?this.bSingleButton?this.pm3f.FillRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,3238002687):this.pani.DrawAnima_aa(this.iX,this.iY,this.aa_disable):this.bMouseDown?this.pani.DrawAnimaEx(this.iX-(this.fScale-1)*this.iW/2,this.iY-(this.fScale-1)*this.iH/2,this.aa_mousedown,101,this.fScale,this.fScale,0,0,0):this.pani.DrawAnimaEx(this.iX-(this.fScale-1)*this.iW/2,this.iY-(this.fScale-1)*this.iH/2,this.aa_normal,101,this.fScale,this.fScale,0,0,0),this.bSingleButton||this.sName.length>0)){this.iNameColor;this.bDisable&&4286611584,this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+this.iH/2,this.sName,4284539104,this.iNameSize,101,this.fScale,this.fScale,0,-2,-2,2,4278190080)}}}]),XButtonEx1}();i.default=l},{"../../engine/TouchManager":10,"../../engine/graphics/AnimaAction":25,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65,"../../zero/Interface/PublicInterface":318}],16:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../engine/TouchManager")),s=_interopRequireDefault(t("../../engine/graphics/AnimaAction")),r=(_interopRequireDefault(t("../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),o=_interopRequireDefault(t("../../zero/Interface/PublicInterface"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(){function XButtonEx2(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XButtonEx2),this.pani=t,this.pm3f=this.pani.pm3f,this.bSingleButton=!1,this.bCheckByRect=!1,this.bCheckByRect1=!1,this.ReleaseButton(),this.sName="",this.iNameColor=4294962304,this.Move(0,0,100,100),this.iFingerLocker=-1,this.iAnimaStat=0,this.fScale=1,this.iNameSize=30,this.bChecked=!1,this.exts=new Int32Array(3)}return a(XButtonEx2,[{key:"InitButton",value:function(t){this.sAnimaName=t,this.pani.InitAnimaWithName(t,r.default.aaa),r.default.aaa.iFrame=0,this.SetAnimaNormal(r.default.aaa,!1),r.default.aaa.iFrame=1,this.SetAnimaMouseon(r.default.aaa,!1),this.SetAnimaMousedown(r.default.aaa,!1),r.default.aaa.iFrame=2,this.SetAnimaDisable(r.default.aaa,!1)}},{key:"ReleaseButton",value:function(){this.aa_normal=null,this.act_normal=!1,this.aa_mouseon=null,this.act_mouseon=!1,this.aa_mousedown=null,this.act_mousedown=!1,this.aa_disable=null,this.bMouseIn=!1,this.bMouseDown=!1,this.bVisible=!0,this.bDisable=!1,this.iX=0,this.iY=0}},{key:"SetAnimaNormal",value:function(t,e){null==this.aa_normal&&(this.aa_normal=new s.default),this.aa_normal.copyfrom(t),this.act_normal=e}},{key:"SetAnimaMouseon",value:function(t,e){null==this.aa_mouseon&&(this.aa_mouseon=new s.default),this.aa_mouseon.copyfrom(t),this.act_mouseon=e}},{key:"SetAnimaMousedown",value:function(t,e){null==this.aa_mousedown&&(this.aa_mousedown=new s.default),this.aa_mousedown.copyfrom(t),this.act_mousedown=e}},{key:"SetAnimaDisable",value:function(t,e){null==this.aa_disable&&(this.aa_disable=new s.default),this.aa_disable.copyfrom(t),this.act_disable=e}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"setdown",value:function(){this.bMouseDown=!0,this.bMouseIn=!0}},{key:"ProcTouch",value:function(t,e,i){if(-1!=this.iFingerLocker&&this.iFingerLocker!=n.default.iFingerId)return!1;if(!this.bVisible)return!1;if(this.bDisable)return this.bMoveIn(e,i);if(3==t&&(this.iFingerLocker=-1),!this.bMoveIn(e,i))return this.iFingerLocker=-1,this.bMouseDown=!1,0==this.iAnimaStat&&1!=this.fScale&&(this.iAnimaStat=11),!1;switch(t){case 1:this.iFingerLocker=n.default.iFingerId,this.bMouseDown=!0,this.iAnimaStat=1;break;case 2:break;case 3:this.bMouseDown&&(this.bMouseDown=!1,this.bChecked=!0,this.iAnimaStat=11),this.iFingerLocker=-1}return!0}},{key:"bCheck",value:function(){return!!this.bChecked&&(this.bChecked=!1,!0)}},{key:"bMoveIn",value:function(t,e){return this.bMouseIn=!1,this.bCheckByRect1?t>=this.iCheckX&&t<=this.iCheckX+this.iCheckW&&e>=this.iCheckY&&e<=this.iCheckY+this.iCheckH?this.bMouseIn=!0:this.bMouseIn=!1:this.bSingleButton||this.bCheckByRect?t>=this.iX&&t<=this.iX+this.iW&&e>=this.iY&&e<=this.iY+this.iH?this.bMouseIn=!0:this.bMouseIn=!1:this.pani.bInAnima(this.aa_normal,this.iX,this.iY,t,e)?this.bMouseIn=!0:this.bMouseIn=!1,this.bMouseIn}},{key:"SetNormal",value:function(){this.bMouseDown=!1,this.iAnimaStat=0,this.fScale=1}},{key:"Draw",value:function(){for(;o.default.gi().bInBound(this.iX,this.iY,this.iW,this.iH);)this.iX--;switch(this.iAnimaStat){case 0:break;case 1:this.fScale-=.1,this.fScale<.8&&(this.iAnimaStat=2);break;case 2:this.fScale+=.1,this.iAnimaStat=0;break;case 11:this.fScale+=.1,this.fScale>1&&(this.iAnimaStat=12);break;case 12:this.fScale=1,this.iAnimaStat=0}this.bVisible&&(this.bDisable?this.bSingleButton?this.pm3f.FillRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,3238002687):this.pani.DrawAnima_aa(this.iX,this.iY,this.aa_disable):this.bMouseDown?this.pani.DrawAnimaEx(this.iX-(this.fScale-1)*this.iW/2,this.iY-(this.fScale-1)*this.iH/2,this.aa_mousedown,101,this.fScale,this.fScale,0,0,0):this.pani.DrawAnimaEx(this.iX-(this.fScale-1)*this.iW/2,this.iY-(this.fScale-1)*this.iH/2,this.aa_normal,101,this.fScale,this.fScale,0,0,0),this.DrawText(0,0))}},{key:"DrawText",value:function(t,e){if(this.bSingleButton||this.sName.length>0){var i=this.iNameColor;this.bDisable&&(i=4286611584),this.pm3f.DrawText_2(this.iX+this.iW/2+t,this.iY+this.iH/2+e,this.sName,i,this.fScale*this.iNameSize,101,1,1,0,-2,-2,4,4278199373)}}},{key:"SetCheckRect",value:function(t,e,i,a){this.bCheckByRect1=!0,this.iCheckX=t,this.iCheckY=e,this.iCheckW=i,this.iCheckH=a}}]),XButtonEx2}();i.default=u},{"../../engine/TouchManager":10,"../../engine/graphics/AnimaAction":25,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65,"../../zero/Interface/PublicInterface":318}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../config/XDefine")),s=_interopRequireDefault(t("../../engine/TouchManager")),r=_interopRequireDefault(t("../../engine/graphics/AnimaAction")),o=(_interopRequireDefault(t("../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(){function XCheckBox(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XCheckBox),this.pani=t,this.pm3f=t.pm3f,this.bTrue=!1,this.sDetail="",this.bInited=!1}return a(XCheckBox,[{key:"InitBox",value:function(t){this.pani.InitAnimaWithName(t,o.default.aaa),this.aa_true=new r.default,this.aa_false=new r.default,o.default.aaa.iFrame=0,this.aa_true.copyfrom(o.default.aaa),o.default.aaa.iFrame=1,this.aa_false.copyfrom(o.default.aaa),this.bInited=!0}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"Draw",value:function(){this.bInited?this.bTrue?this.pani.DrawAnima_aa(this.iX,this.iY,this.aa_true):this.pani.DrawAnima_aa(this.iX,this.iY,this.aa_false):(this.pm3f.DrawRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,4294967295),this.bTrue&&this.pm3f.FillRect_2D(this.iX+2,this.iY+2,this.iX+this.iW-4,this.iY+this.iH-4,4294967295)),this.pm3f.DrawTextEx(this.iX+this.iW+3,this.iY+(this.iH-30)/2,this.sDetail,4278206039,30,101,1,1,0,0,0)}},{key:"ProcTouch",value:function(t,e,i){if(this.bInited){if(this.pani.bInAnima(this.aa_true,this.iX,this.iY,e,i))return t==s.default.TOUCH_UP&&(this.bTrue=!this.bTrue),!0}else if(n.default.bInRect(e,i,this.iX,this.iY,this.iW+30*this.sDetail.length,this.iH))return t==s.default.TOUCH_UP&&(this.bTrue=!this.bTrue),!0;return!1}}]),XCheckBox}();i.default=u},{"../../config/XDefine":7,"../../engine/TouchManager":10,"../../engine/graphics/AnimaAction":25,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../config/XDefine"))),s=_interopRequireDefault(t("../../engine/TouchManager"));_interopRequireDefault(t("../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../engine/graphics/XAnima"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function XInput(t){_classCallCheck(this,XInput),this.pani=t,this.pm3f=t.pm3f,this.bMouseDown=!1,this.sDetail="",this.sBackPrompt="",this.bDetailChanged=!1,this.bFinished=!1,this.bHideText=!1,this.iTextSize=30,this.iBackSize=30,this.bNumber=!1,this.iMaxNumber=2147483647,this.iLength=64,this.iTextColor=4294967295,this.bShowing=!1}return a(XInput,[{key:"onscr",value:function(){this.ph=XInput.GetFreeHandle(this),this.ph.handle.focus||(this.ph.handle.pos(this.iX,this.iY),this.ph.handle.width=this.iW,this.ph.handle.height=this.iH),this.ph.iLife=3}},{key:"Draw",value:function(){this.bShowing=!0,this.bMouseDown&&this.pm3f.FillRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,1090519039),this.pm3f.DrawRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,4294967295),this.DrawText()}},{key:"DrawText",value:function(){this.bShowing=!0,this.bHideText||(this.pm3f.SetViewClip(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH),this.sDetail.length<=0?this.sBackPrompt.length>0&&this.pm3f.DrawTextEx(this.iX+5,this.iY+this.iH/2,this.sBackPrompt,805306368,this.iBackSize,101,1,1,0,0,-2):this.pm3f.DrawTextEx(this.iX+5,this.iY+this.iH/2,this.sDetail,this.iTextColor,this.iTextSize,101,1,1,0,0,-2),this.pm3f.NoClip())}},{key:"OpenInput",value:function(){this.bDetailChanged=!1,this.bFinished=!1,this.bMouseDown=!1,this.ph=XInput.GetFreeHandle(this),this.ph.handle.text=this.sDetail,n.default.sop("OpenInput")}},{key:"bChanged",value:function(){return!!this.bDetailChanged&&(this.bDetailChanged=!1,!0)}},{key:"ProcTouch",value:function(t,e,i){if(!n.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))return this.bMouseDown=!1,!1;switch(t){case s.default.TOUCH_DOWN:this.bMouseDown=!0;break;case s.default.TOUCH_UP:this.OpenInput()}return!0}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}}]),XInput}();i.default=r,r.init_handle=function(){var t=new Laya.TextInput(this.sDetail);return t.width=200,t.height=50,t.pos(0,-50),t.maxChars=64,t.color="#ffffff",t.bgColor="#303030",t.fontSize=22,t.alpha=.01,t.textField.alpha=.01,Laya.stage.addChild(t),t},r.input_handle=null,r.lock_x=null,r.move_handle=function(t,e,i,a){r.input_handle.width=i,r.input_handle.height=a,r.input_handle.pos(t,e)};var o=function(){function InputHandle(){_classCallCheck(this,InputHandle),this.bUseing=!1,this.handle=r.init_handle(),this.iLife=3,this.pinput=null}return a(InputHandle,[{key:"Logic",value:function(){this.iLife>0?(this.iLife--,this.pinput.sDetail=this.handle.text):(this.bUseing=!1,this.iLife=3,this.handle.pos(-5,-5),this.handle.width=1,this.handle.height=1,this.handle.text="")}},{key:"Logic2",value:function(){this.handle.focus&&(this.handle.pos(-5,-5),this.handle.width=1,this.handle.height=1)}}]),InputHandle}();o.pp=new Array,r.make_handle=function(){for(var t=0;t<10;t++)o.pp[t]=new o},r.GetFreeHandle=function(t){for(var e=0;e<o.pp.length;e++)if(o.pp[e].bUseing&&o.pp[e].pinput==t)return o.pp[e];for(e=0;e<o.pp.length;e++)if(0==o.pp[e].bUseing)return o.pp[e].bUseing=!0,o.pp[e].pinput=t,o.pp[e].handle.text="",o.pp[e];return o.pp[e]=new o,o.pp[e].bUseing=!0,o.pp[e].pinput=t,o.pp[e].handle.text="",o.pp[e]},r.HandleLogic=function(){for(var t=0;t<o.pp.length;t++)o.pp[t].bUseing&&o.pp[t].Logic()},r.HandleLogic2=function(){for(var t=0;t<o.pp.length;t++)o.pp[t].bUseing&&o.pp[t].Logic2()}},{"../../config/XDefine":7,"../../engine/TouchManager":10,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../zero/Interface/PublicInterface":318}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../config/XDefine")),s=(_interopRequireDefault(t("../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../engine/TouchManager")),_interopRequireDefault(t("../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../engine/graphics/M3DFast"))),r=(_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),o=_interopRequireDefault(t("../../engtst/mgm/frame/DrawMode")),u=_interopRequireDefault(t("./XButtonEx2"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(){function XInputNumber(t){var e;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XInputNumber),this.pani=t,this.pm3f=s.default.gi(),this.bChanged=!1,this.bFinished=!1,this.iNumber=0,this.iMinNumber=0,this.iMaxNumber=2147483647,this.bShow=!1,this.btn_num=new Array(12),e=0;e<12;e++)this.btn_num[e]=new u.default(r.default.xani_nui3),3==e?this.btn_num[e].InitButton("键盘按钮_退格"):11==e?this.btn_num[e].InitButton("键盘按钮_确定"):this.btn_num[e].InitButton("键盘按钮");this.btn_num[0].sName="1",this.btn_num[1].sName="2",this.btn_num[2].sName="3",this.btn_num[4].sName="4",this.btn_num[5].sName="5",this.btn_num[6].sName="6",this.btn_num[7].sName="0",this.btn_num[8].sName="7",this.btn_num[9].sName="8",this.btn_num[10].sName="9",this.aa_frame=null}return a(XInputNumber,[{key:"MinMax",value:function(t,e){this.iMinNumber=t,this.iMaxNumber=e}},{key:"Draw",value:function(){var t;if(o.default.new_numberframe(this.iX,this.iY,this.iW,""+this.iNumber),this.bShow)for(this.DrawBack(),t=0;t<12;t++)this.btn_num[t].Move(this.iFx+10+t%4*74,this.iFy+10+74*parseInt(t/4),64,64),this.btn_num[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.bShow){if(n.default.bInRect(e,i,this.iFx,this.iFy,this.iFw,this.iFh))for(a=0;a<12;a++)this.btn_num[a].ProcTouch(t,e,i)&&this.btn_num[a].bCheck()&&(0==a||1==a||2==a?this.iNumber=10*this.iNumber+(a+1):3==a?this.iNumber=parseInt(this.iNumber/10):4==a||5==a||6==a?this.iNumber=10*this.iNumber+a:7==a?this.iNumber=10*this.iNumber:8==a||9==a||10==a?this.iNumber=10*this.iNumber+(a-1):11==a&&(this.bShow=!1),this.iNumber<this.iMinNumber&&(this.iNumber=this.iMinNumber),this.iNumber>this.iMaxNumber&&(this.iNumber=this.iMaxNumber));else 3==t&&(this.iNumber<this.iMinNumber&&(this.iNumber=this.iMinNumber),this.bShow=!1);return!0}return!!n.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)&&(1==t&&(this.bMouseDown=!0),3==t&&this.bMouseDown&&(this.bMouseDown=!1,this.bShow=!0,this.iNumber=0),!0)}},{key:"DrawBack",value:function(){null==this.aa_frame&&(this.aa_frame=r.default.xani_nui3.InitAnimaWithName("键盘框",null)),this.aa_frame.iFrame=0,this.aa_frame.Draw(this.iFx,this.iFy),this.aa_frame.iFrame=1,this.aa_frame.DrawEx(this.iFx+10,this.iFy,101,1*(this.iFw-20)/20,1,0,0,0),this.aa_frame.iFrame=2,this.aa_frame.Draw(this.iFx+this.iFw,this.iFy),this.aa_frame.iFrame=3,this.aa_frame.DrawEx(this.iFx+this.iFw,this.iFy+10,101,1,1*(this.iFh-20)/20,0,0,0),this.aa_frame.iFrame=4,this.aa_frame.Draw(this.iFx+this.iFw,this.iFy+this.iFh),this.aa_frame.iFrame=5,this.aa_frame.DrawEx(this.iFx+10,this.iFy+this.iFh,101,1*(this.iFw-20)/20,1,0,0,0),this.aa_frame.iFrame=6,this.aa_frame.Draw(this.iFx,this.iFy+this.iFh),this.aa_frame.iFrame=7,this.aa_frame.DrawEx(this.iFx,this.iFy+10,101,1,1*(this.iFh-20)/20,0,0,0),this.aa_frame.iFrame=8,this.aa_frame.DrawEx(this.iFx+10,this.iFy+10,101,1*(this.iFw-20)/20,1*(this.iFh-20)/20,0,0,0),this.aa_frame.iFrame=9,this.aa_frame.Draw(this.iPx,this.iPy)}},{key:"Move",value:function(t,e,i){this.iX=t,this.iY=e,this.iW=i,this.iH=50,this._numframe(this.iX+this.iW/2,this.iY-15)}},{key:"_numframe",value:function(t,e){this.iPx=t,this.iPy=e,this.iFw=306,this.iFh=232,this.iFx=this.iPx-this.iFw/2,this.iFy=this.iPy-this.iFh}}]),XInputNumber}();i.default=l},{"../../config/XDefine":7,"../../engine/TouchManager":10,"../../engine/graphics/AnimaAction":25,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/frame/DrawMode":72,"../../zero/Interface/PublicInterface":318,"./XButtonEx2":16}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../config/GameData")),_interopRequireDefault(t("../../engine/PackageTools"))),s=(_interopRequireDefault(t("../../engtst/mgm/GmPlay")),_interopRequireDefault(t("./E_DATA"))),r=_interopRequireDefault(t("./E_ITEM")),o=_interopRequireDefault(t("./E_VALUE")),u=_interopRequireDefault(t("../../config/XDefine"));_interopRequireDefault(t("../../ui/XOLE"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(){function DataEngine(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,DataEngine),i&&this.GetData(this,u.default.BASE_URL+"res/datapackage/"+e,0),this.bLoadSuccess=!1}return a(DataEngine,[{key:"GetData",value:function(t,e,i,a){if(null==a)return i>0&&u.default.sop("retry "+i+","+e),void Laya.loader.load(e,Laya.Handler.create(t,t.GetData,[t,e,i+1]),null,Laya.Loader.BUFFER);var s=n.default.gi();s.GetData3(a),t._LoadData(s),this.bLoadSuccess=!0}}]),a(DataEngine,[{key:"_LoadData",value:function(t){var e,i,a;for(this.iValueIndex=new Int32Array(DataEngine.MAXVALUEINDEX),e=0;e<DataEngine.MAXVALUEINDEX;e++)this.iValueIndex[e]=-1;for(t.GetNextByte(),this.iDataCount=t.GetNextInt(),this.datas=new Array(this.iDataCount),e=0;e<this.iDataCount;e++)for(this.datas[e]=new s.default,this.datas[e].iDid=t.GetNextInt(),this.iValueIndex[this.datas[e].iDid]=e,this.datas[e].iItemCount=t.GetNextInt(),this.datas[e].items=new Array(this.datas[e].iItemCount),i=0;i<this.datas[e].iItemCount;i++)for(this.datas[e].items[i]=new r.default,this.datas[e].items[i].iItemId=t.GetNextInt(),this.datas[e].items[i].iType=t.GetNextInt(),this.datas[e].items[i].iValueCount=t.GetNextInt(),this.datas[e].items[i].values=new Array(this.datas[e].items[i].iValueCount),a=0;a<this.datas[e].items[i].iValueCount;a++)this.datas[e].items[i].values[a]=new o.default,this.datas[e].items[i].values[a].iVid=t.GetNextInt(),this.datas[e].items[i].values[a].sValue=t.GetNextString()}},{key:"fdata",value:function(t){if(t>=DataEngine.MAXVALUEINDEX)return null;var e=this.iValueIndex[t];return-1==e?null:this.datas[e]}},{key:"intValue",value:function(t,e,i){return parseInt(this.strValue(t,e,i))}},{key:"strValue",value:function(t,e,i){var a,n,s,r;if(t<0||t>=DataEngine.MAXVALUEINDEX)return this.sResult="-1",this.sResult;if(r=0,-1!=(a=this.iValueIndex[t])&&this.datas[a].iDid==t)for(n=0;n<this.datas[a].iItemCount;n++)for(s=0;s<this.datas[a].items[n].iValueCount;s++)if(this.datas[a].items[n].values[s].iVid==i){if(r>=e)return this.sResult=this.datas[a].items[n].values[s].sValue,this.sResult.length<=0&&(this.sResult="-1"),this.sResult;r++;break}return"-1"}}]),DataEngine}();i.default=l,l.MAXVALUEINDEX=1024},{"../../config/GameData":4,"../../config/XDefine":7,"../../engine/PackageTools":9,"../../engtst/mgm/GmPlay":65,"../../ui/XOLE":316,"./E_DATA":21,"./E_ITEM":22,"./E_VALUE":23}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function E_DATA(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,E_DATA)}return a(E_DATA,[{key:"E_DATA",value:function(){}},{key:"fitem",value:function(t){var e;for(e=0;e<this.iItemCount;e++)if(this.items[e].iItemId==t)return this.items[e];return null}},{key:"intValue",value:function(t){return parseInt(this.strValue(t))}},{key:"strValue",value:function(t){var e,i;for(e=0;e<this.iItemCount;e++)for(i=0;i<this.items[e].iValueCount;i++)if(this.items[e].values[i].iVid==t)return this.items[e].values[i].sValue;return"-1"}}]),E_DATA}();i.default=n},{}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function E_ITEM(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,E_ITEM)}return a(E_ITEM,[{key:"intValue",value:function(t){return parseInt(this.strValue(t))}},{key:"strValue",value:function(t){var e;for(e=0;e<this.iValueCount;e++)if(this.values[e].iVid==t)return this.values[e].sValue;return"-1"}}]),E_ITEM}();i.default=n},{}],23:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function E_VALUE(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,E_VALUE),this.sValue=""}},{}],24:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function GU(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GU)};i.default=a,a.U2Ghash={},a.G2Uhash={},a.zipData="4e:020405060f12171f20212326292e2f313335373c40414244464a5155575a5b6263646567686a6b6c6d6e6f727475767778797a7b7c7d7f808182838485878a#909697999c9d9ea3aaafb0b1b4b6b7b8b9bcbdbec8cccfd0d2dadbdce0e2e6e7e9edeeeff1f4f8f9fafcfe,4f:00020304050607080b0c12131415161c1d212328292c2d2e31333537393b3e3f40414244454748494a4b4c525456616266686a6b6d6e7172757778797a7d8081828586878a8c8e909293959698999a9c9e9fa1a2a4abadb0b1b2b3b4b6b7b8b9babbbcbdbec0c1c2c6c7c8c9cbcccdd2d3d4d5d6d9dbe0e2e4e5e7ebecf0f2f4f5f6f7f9fbfcfdff,50:000102030405060708090a#0b0e1011131516171b1d1e20222324272b2f303132333435363738393b3d3f404142444546494a4b4d5051525354565758595b5d5e5f6061626364666768696a6b6d6e6f70717273747578797a7c7d818283848687898a8b8c8e8f909192939495969798999a9b9c9d9e9fa0a1a2a4a6aaabadaeafb0b1b3b4b5b6b7b8b9bcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdced0d1d2d3d4d5d7d8d9dbdcdddedfe0e1e2e3e4e5e8e9eaebeff0f1f2f4f6f7f8f9fafcfdfeff,51:00010203040508#090a0c0d0e0f1011131415161718191a1b1c1d1e1f2022232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e42474a4c4e4f5052535758595b5d5e5f606163646667696a6f727a7e7f838486878a8b8e8f90919394989a9d9e9fa1a3a6a7a8a9aaadaeb4b8b9babebfc1c2c3c5c8cacdced0d2d3d4d5d6d7d8d9dadcdedfe2e3e5e6e7e8e9eaeceef1f2f4f7fe,52:0405090b0c0f101314151c1e1f2122232526272a2c2f313234353c3e4445464748494b4e4f5253555758#595a5b5d5f6062636466686b6c6d6e7071737475767778797a7b7c7e808384858687898a8b8c8d8e8f91929495969798999a9ca4a5a6a7aeafb0b4b5b6b7b8b9babbbcbdc0c1c2c4c5c6c8cacccdcecfd1d3d4d5d7d9dadbdcdddee0e1e2e3e5e6e7e8e9eaebecedeeeff1f2f3f4f5f6f7f8fbfcfd,53:0102030407090a0b0c0e11121314181b1c1e1f2224252728292b2c2d2f3031323334353637383c3d404244464b4c4d505458595b5d65686a6c6d7276797b7c7d7e80818387888a8e8f#90919293949697999b9c9ea0a1a4a7aaabacadafb0b1b2b3b4b5b7b8b9babcbdbec0c3c4c5c6c7cecfd0d2d3d5dadcdddee1e2e7f4fafeff,54:000205070b1418191a1c2224252a303336373a3d3f4142444547494c4d4e4f515a5d5e5f6061636567696a6b6c6d6e6f7074797a7e7f8183858788898a8d919397989c9e9fa0a1a2a5aeb0b2b5b6b7b9babcbec3c5cacbd6d8dbe0e1e2e3e4ebeceff0f1f4f5f6f7f8f9fbfe,55:0002030405080a0b0c0d0e121315161718191a1c1d1e1f212526#28292b2d3234353638393a3b3d40424547484b4c4d4e4f515253545758595a5b5d5e5f60626368696b6f7071727374797a7d7f85868c8d8e9092939596979a9b9ea0a1a2a3a4a5a6a8a9aaabacadaeafb0b2b4b6b8babcbfc0c1c2c3c6c7c8cacbcecfd0d5d7d8d9dadbdee0e2e7e9edeef0f1f4f6f8f9fafbfcff,56:0203040506070a0b0d1011121314151617191a1c1d202122252628292a2b2e2f30333537383a3c3d3e404142434445464748494a4b4f5051525355565a5b5d5e5f6061#636566676d6e6f70727374757778797a7d7e7f80818283848788898a8b8c8d9091929495969798999a9b9c9d9e9fa0a1a2a4a5a6a7a8a9aaabacadaeb0b1b2b3b4b5b6b8b9babbbdbebfc0c1c2c3c4c5c6c7c8c9cbcccdcecfd0d1d2d3d5d6d8d9dce3e5e6e7e8e9eaeceeeff2f3f6f7f8fbfc,57:00010205070b0c0d0e0f101112131415161718191a1b1d1e202122242526272b313234353637383c3d3f414344454648494b52535455565859626365676c6e707172747578797a7d7e7f80#818788898a8d8e8f90919495969798999a9c9d9e9fa5a8aaacafb0b1b3b5b6b7b9babbbcbdbebfc0c1c4c5c6c7c8c9cacccdd0d1d3d6d7dbdcdee1e2e3e5e6e7e8e9eaebeceef0f1f2f3f5f6f7fbfcfeff,58:0103040508090a0c0e0f101213141617181a1b1c1d1f222325262728292b2c2d2e2f31323334363738393a3b3c3d3e3f4041424345464748494a4b4e4f505253555657595a5b5c5d5f6061626364666768696a6d6e6f707172737475767778797a7b7c7d7f82848687888a8b8c#8d8e8f909194959697989b9c9da0a1a2a3a4a5a6a7aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbdbebfc0c2c3c4c6c7c8c9cacbcccdcecfd0d2d3d4d6d7d8d9dadbdcdddedfe0e1e2e3e5e6e7e8e9eaedeff1f2f4f5f7f8fafbfcfdfeff,59:000103050608090a0b0c0e1011121317181b1d1e2021222326282c30323335363b3d3e3f404345464a4c4d505253595b5c5d5e5f616364666768696a6b6c6d6e6f70717275777a7b7c7e7f8085898b8c8e8f90919495989a9b9c9d9fa0a1a2a6#a7acadb0b1b3b4b5b6b7b8babcbdbfc0c1c2c3c4c5c7c8c9cccdcecfd5d6d9dbdedfe0e1e2e4e6e7e9eaebedeeeff0f1f2f3f4f5f6f7f8fafcfdfe,5a:00020a0b0d0e0f101214151617191a1b1d1e2122242627282a2b2c2d2e2f3033353738393a3b3d3e3f414243444547484b4c4d4e4f5051525354565758595b5c5d5e5f60616364656668696b6c6d6e6f7071727378797b7c7d7e808182838485868788898a8b8c8d8e8f9091939495969798999c9d9e9fa0a1a2a3a4a5a6a7a8a9abac#adaeafb0b1b4b6b7b9babbbcbdbfc0c3c4c5c6c7c8cacbcdcecfd0d1d3d5d7d9dadbdddedfe2e4e5e7e8eaecedeeeff0f2f3f4f5f6f7f8f9fafbfcfdfeff,5b:0001020304050607080a0b0c0d0e0f10111213141518191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303133353638393a3b3c3d3e3f4142434445464748494a4b4c4d4e4f52565e606167686b6d6e6f7274767778797b7c7e7f82868a8d8e90919294969fa7a8a9acadaeafb1b2b7babbbcc0c1c3c8c9cacbcdcecf#d1d4d5d6d7d8d9dadbdce0e2e3e6e7e9eaebecedeff1f2f3f4f5f6f7fdfe,5c:0002030507080b0c0d0e10121317191b1e1f2021232628292a2b2d2e2f303233353637434446474c4d5253545657585a5b5c5d5f62646768696a6b6c6d70727374757677787b7c7d7e808384858687898a8b8e8f9293959d9e9fa0a1a4a5a6a7a8aaaeafb0b2b4b6b9babbbcbec0c2c3c5c6c7c8c9cacccdcecfd0d1d3d4d5d6d7d8dadbdcdddedfe0e2e3e7e9ebeceeeff1f2f3f4f5f6f7f8f9fafcfdfeff,5d:00#01040508090a0b0c0d0f10111213151718191a1c1d1f2021222325282a2b2c2f3031323335363738393a3b3c3f4041424344454648494d4e4f5051525354555657595a5c5e5f6061626364656667686a6d6e7071727375767778797a7b7c7d7e7f8081838485868788898a8b8c8d8e8f9091929394959697989a9b9c9e9fa0a1a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b8b9babbbcbdbebfc0c1c2c3c4c6c7c8c9cacbcccecfd0d1d2d3d4d5d6d7d8d9dadcdfe0e3e4eaeced#f0f5f6f8f9fafbfcff,5e:000407090a0b0d0e1213171e1f20212223242528292a2b2c2f303233343536393a3e3f404143464748494a4b4d4e4f50515253565758595a5c5d5f60636465666768696a6b6c6d6e6f70717577797e8182838588898c8d8e92989b9da1a2a3a4a8a9aaabacaeafb0b1b2b4babbbcbdbfc0c1c2c3c4c5c6c7c8cbcccdcecfd0d4d5d7d8d9dadcdddedfe0e1e2e3e4e5e6e7e9ebecedeeeff0f1f2f3f5f8f9fbfcfd,5f:050607090c0d0e10121416191a1c1d1e21222324#282b2c2e30323334353637383b3d3e3f4142434445464748494a4b4c4d4e4f5154595a5b5c5e5f60636567686b6e6f72747576787a7d7e7f83868d8e8f919394969a9b9d9e9fa0a2a3a4a5a6a7a9abacafb0b1b2b3b4b6b8b9babbbebfc0c1c2c7c8cacbced3d4d5dadbdcdedfe2e3e5e6e8e9eceff0f2f3f4f6f7f9fafc,60:0708090b0c10111317181a1e1f2223242c2d2e3031323334363738393a3d3e404445464748494a4c4e4f5153545657585b5c5e5f606165666e71727475777e80#8182858687888a8b8e8f909193959798999c9ea1a2a4a5a7a9aaaeb0b3b5b6b7b9babdbebfc0c1c2c3c4c7c8c9cccdcecfd0d2d3d4d6d7d9dbdee1e2e3e4e5eaf1f2f5f7f8fbfcfdfeff,61:02030405070a0b0c1011121314161718191b1c1d1e21222528292a2c2d2e2f303132333435363738393a3b3c3d3e4041424344454647494b4d4f50525354565758595a5b5c5e5f606163646566696a6b6c6d6e6f717273747678797a7b7c7d7e7f808182838485868788898a8c8d8f9091929395#969798999a9b9c9e9fa0a1a2a3a4a5a6aaabadaeafb0b1b2b3b4b5b6b8b9babbbcbdbfc0c1c3c4c5c6c7c9cccdcecfd0d3d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e7e8e9eaebecedeeeff0f1f2f3f4f6f7f8f9fafbfcfdfe,62:00010203040507091314191c1d1e2023262728292b2d2f303132353638393a3b3c424445464a4f50555657595a5c5d5e5f6061626465687172747577787a7b7d818283858687888b8c8d8e8f9094999c9d9ea3a6a7a9aaadaeafb0b2b3b4b6b7b8babec0c1#c3cbcfd1d5dddee0e1e4eaebf0f2f5f8f9fafb,63:00030405060a0b0c0d0f10121314151718191c2627292c2d2e30313334353637383b3c3e3f40414447484a51525354565758595a5b5c5d60646566686a6b6c6f707273747578797c7d7e7f81838485868b8d9193949597999a9b9c9d9e9fa1a4a6abafb1b2b5b6b9bbbdbfc0c1c2c3c5c7c8cacbccd1d3d4d5d7d8d9dadbdcdddfe2e4e5e6e7e8ebeceeeff0f1f3f5f7f9fafbfcfe,64:0304060708090a0d0e111215161718191a1d1f222324#252728292b2e2f3031323335363738393b3c3e404243494b4c4d4e4f505153555657595a5b5c5d5f60616263646566686a6b6c6e6f70717273747576777b7c7d7e7f8081838688898a8b8c8d8e8f90939497989a9b9c9d9fa0a1a2a3a5a6a7a8aaabafb1b2b3b4b6b9bbbdbebfc1c3c4c6c7c8c9cacbcccfd1d3d4d5d6d9dadbdcdddfe0e1e3e5e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,65:01020304050607080a0b0c0d0e0f10111314151617191a1b1c1d1e1f2021#222324262728292a2c2d30313233373a3c3d404142434446474a4b4d4e5052535457585a5c5f606164656768696a6d6e6f7173757678797a7b7c7d7e7f8081828384858688898a8d8e8f92949596989a9d9ea0a2a3a6a8aaacaeb1b2b3b4b5b6b7b8babbbebfc0c2c7c8c9cacdd0d1d3d4d5d8d9dadbdcdddedfe1e3e4eaebf2f3f4f5f8f9fbfcfdfeff,66:0104050708090b0d1011121617181a1b1c1e2122232426292a2b2c2e3032333738393a3b3d3f40424445464748494a4d4e505158#595b5c5d5e6062636567696a6b6c6d7172737578797b7c7d7f808183858688898a8b8d8e8f909293949598999a9b9c9e9fa0a1a2a3a4a5a6a9aaabacadafb0b1b2b3b5b6b7b8babbbcbdbfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8dadedfe0e1e2e3e4e5e7e8eaebecedeeeff1f5f6f8fafbfd,67:010203040506070c0e0f1112131618191a1c1e20212223242527292e303233363738393b3c3e3f414445474a4b4d5254555758595a5b5d62636466676b6c6e717476#78797a7b7d8082838586888a8c8d8e8f9192939496999b9fa0a1a4a6a9acaeb1b2b4b9babbbcbdbebfc0c2c5c6c7c8c9cacbcccdced5d6d7dbdfe1e3e4e6e7e8eaebedeef2f5f6f7f8f9fafbfcfe,68:01020304060d1012141518191a1b1c1e1f20222324252627282b2c2d2e2f30313435363a3b3f474b4d4f52565758595a5b5c5d5e5f6a6c6d6e6f707172737578797a7b7c7d7e7f8082848788898a8b8c8d8e90919294959698999a9b9c9d9e9fa0a1a3a4a5a9aaabacaeb1b2b4b6b7b8#b9babbbcbdbebfc1c3c4c5c6c7c8cacccecfd0d1d3d4d6d7d9dbdcdddedfe1e2e4e5e6e7e8e9eaebecedeff2f3f4f6f7f8fbfdfeff,69:00020304060708090a0c0f11131415161718191a1b1c1d1e21222325262728292a2b2c2e2f313233353637383a3b3c3e4041434445464748494a4b4c4d4e4f50515253555658595b5c5f616264656768696a6c6d6f7072737475767a7b7d7e7f8183858a8b8c8e8f909192939697999a9d9e9fa0a1a2a3a4a5a6a9aaacaeafb0b2b3b5b6b8b9babcbd#bebfc0c2c3c4c5c6c7c8c9cbcdcfd1d2d3d5d6d7d8d9dadcdddee1e2e3e4e5e6e7e8e9eaebeceeeff0f1f3f4f5f6f7f8f9fafbfcfe,6a:000102030405060708090b0c0d0e0f10111213141516191a1b1c1d1e20222324252627292b2c2d2e30323334363738393a3b3c3f40414243454648494a4b4c4d4e4f515253545556575a5c5d5e5f60626364666768696a6b6c6d6e6f70727374757677787a7b7d7e7f81828385868788898a8b8c8d8f929394959698999a9b9c9d9e9fa1a2a3a4a5a6#a7a8aaadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,6b:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f252628292a2b2c2d2e2f303133343536383b3c3d3f4041424445484a4b4d4e4f5051525354555657585a5b5c5d5e5f606168696b6c6d6e6f7071727374757677787a7d7e7f808588#8c8e8f909194959798999c9d9e9fa0a2a3a4a5a6a7a8a9abacadaeafb0b1b2b6b8b9babbbcbdbec0c3c4c6c7c8c9caccced0d1d8dadcdddedfe0e2e3e4e5e6e7e8e9ecedeef0f1f2f4f6f7f8fafbfcfeff,6c:000102030408090a0b0c0e12171c1d1e2023252b2c2d31333637393a3b3c3e3f434445484b4c4d4e4f5152535658595a62636566676b6c6d6e6f71737577787a7b7c7f8084878a8b8d8e9192959697989a9c9d9ea0a2a8acafb0b4b5b6b7bac0c1c2c3c6c7c8cbcdcecfd1d2d8#d9dadcdddfe4e6e7e9ecedf2f4f9ff,6d:000203050608090a0d0f101113141516181c1d1f20212223242628292c2d2f30343637383a3f404244494c50555657585b5d5f6162646567686b6c6d707172737576797a7b7d7e7f8081838486878a8b8d8f9092969798999a9ca2a5acadb0b1b3b4b6b7b9babbbcbdbec1c2c3c8c9cacdcecfd0d2d3d4d5d7dadbdcdfe2e3e5e7e8e9eaedeff0f2f4f5f6f8fafdfeff,6e:0001020304060708090b0f12131518191b1c1e1f222627282a2c2e30313335#3637393b3c3d3e3f40414245464748494a4b4c4f5051525557595a5c5d5e606162636465666768696a6c6d6f707172737475767778797a7b7c7d8081828487888a8b8c8d8e91929394959697999a9b9d9ea0a1a3a4a6a8a9abacadaeb0b3b5b8b9bcbebfc0c3c4c5c6c8c9cacccdced0d2d6d8d9dbdcdde3e7eaebecedeeeff0f1f2f3f5f6f7f8fafbfcfdfeff,6f:000103040507080a0b0c0d0e101112161718191a1b1c1d1e1f212223252627282c2e303234353738393a3b3c3d3f404142#43444548494a4c4e4f5051525354555657595a5b5d5f60616364656768696a6b6c6f707173757677797b7d7e7f808182838586878a8b8f909192939495969798999a9b9d9e9fa0a2a3a4a5a6a8a9aaabacadaeafb0b1b2b4b5b7b8babbbcbdbebfc1c3c4c5c6c7c8cacbcccdcecfd0d3d4d5d6d7d8d9dadbdcdddfe2e3e4e5e6e7e8e9eaebecedf0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,70:000102030405060708090a0b0c0d0e0f1012131415161718191c1d1e1f2021222425262728292a#2b2c2d2e2f30313233343637383a3b3c3d3e3f404142434445464748494a4b4d4e505152535455565758595a5b5c5d5f606162636465666768696a6e7172737477797a7b7d818283848687888b8c8d8f90919397989a9b9e9fa0a1a2a3a4a5a6a7a8a9aab0b2b4b5b6babebfc4c5c6c7c9cbcccdcecfd0d1d2d3d4d5d6d7dadcdddee0e1e2e3e5eaeef0f1f2f3f4f5f6f8fafbfcfeff,71:0001020304050607080b0c0d0e0f111214171b1c1d1e1f2021222324252728292a2b2c2d2e323334#353738393a3b3c3d3e3f4041424344464748494b4d4f505152535455565758595a5b5d5f6061626365696a6b6c6d6f707174757677797b7c7e7f8081828385868788898b8c8d8e909192939596979a9b9c9d9ea1a2a3a4a5a6a7a9aaabadaeafb0b1b2b4b6b7b8babbbcbdbebfc0c1c2c4c5c6c7c8c9cacbcccdcfd0d1d2d3d6d7d8d9dadbdcdddedfe1e2e3e4e6e8e9eaebecedeff0f1f2f3f4f5f6f7f8fafbfcfdfeff,72:0001020304050708090a0b0c0d0e0f101112131415161718191a#1b1c1e1f2021222324252627292b2d2e2f3233343a3c3e40414243444546494a4b4e4f505153545557585a5c5e60636465686a6b6c6d707173747677787b7c7d828385868788898c8e9091939495969798999a9b9c9d9ea0a1a2a3a4a5a6a7a8a9aaabaeb1b2b3b5babbbcbdbebfc0c5c6c7c9cacbcccfd1d3d4d5d6d8dadb#95$,30:000102,00b702:c9c7,00a830:0305,2014ff5e20:162618191c1d,30:141508090a0b0c0d0e0f16171011,00:b1d7f7,22:362728110f2a2908371aa52520,231222:992b2e614c483d1d606e6f64651e3534,26:4240,00b020:3233,2103ff0400a4ff:e0e1,203000a7211626:0605,25:cbcfcec7c6a1a0b3b2,203b21:92909193,30:13#95$,21:70717273747576777879#4$,24:88898a8b8c8d8e8f909192939495969798999a9b7475767778797a7b7c7d7e7f808182838485868760616263646566676869##,32:20212223242526272829##,21:606162636465666768696a6b#97$,ff:010203e505060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5de3#95$,30:4142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a7b7c7d7e7f808182838485868788898a8b8c8d8e8f90919293#106$a1a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6#103$,03:9192939495969798999a9b9c9d9e9fa0a1a3a4a5a6a7a8a9#6$b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c3c4c5c6c7c8c9#5$,fe:3536393a3f403d3e41424344##3b3c373831#3334#104$,04:10111213141501161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f#13$30313233343551363738393a3b3c3d3e3f404142434445464748494a4b4c4d4e4f#11$,02:cacbd9,20:13152535,21:050996979899,22:151f23526667bf,25:505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f7071727381828384858687#88898a8b8c8d8e8f939495bcbde2e3e4e5,2609229530:121d1e#9$,010100e101ce00e0011300e9011b00e8012b00ed01d000ec014d00f301d200f2016b00fa01d400f901:d6d8dadc,00:fcea,0251e7c701:4448,e7c802:61#2$,31:05060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f20212223242526272829#19$,30:212223242526272829,32a333:8e8f9c9d9ea1c4ced1d2d5,fe30ff:e2e4#,212132:31#,20:10#1$,30:fc9b9cfdfe069d9e,fe:494a4b4c4d4e4f50515254555657595a5b5c5d5e5f6061#626364656668696a6b,e7:e7e8e9eaebecedeeeff0f1f2f3,30:07#11$,25:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445464748494a4b#13$,72:dcdddfe2e3e4e5e6e7eaebf5f6f9fdfeff,73:00020405060708090b0c0d0f1011121418191a1f2023242627282d2f30323335363a3b3c3d404142434445464748#494a4b4c4e4f515354555658595a5b5c5d5e5f6162636465666768696a6b6e7071#92$72737475767778797a7b7c7d7f808182838586888a8c8d8f90929394959798999a9c9d9ea0a1a3a4a5a6a7a8aaacadb1b4b5b6b8b9bcbdbebfc1c3c4c5c6c7#cbccced2d3d4d5d6d7d8dadbdcdddfe1e2e3e4e6e8eaebeceeeff0f1f3f4f5f6f7#92$f8f9fafbfcfdfeff,74:0001020407080b0c0d0e1112131415161718191c1d1e1f2021232427292b2d2f31323738393a3b3d3e3f4042434445464748494a4b4c4d#4e4f505152535456585d606162636465666768696a6b6c6e6f717273747578797a#92$7b7c7d7f8284858688898a8c8d8f9192939495969798999a9b9d9fa0a1a2a3a4a5a6aaabacadaeafb0b1b2b3b4b5b6b7b8b9bbbcbdbebfc0c1c2c3c4c5c6c7#c8c9cacbcccdcecfd0d1d3d4d5d6d7d8d9dadbdddfe1e5e7e8e9eaebecedf0f1f2#92$f3f5f8f9fafbfcfdfe,75:0001020305060708090a0b0c0e1012141516171b1d1e202122232426272a2e3436393c3d3f414243444647494a4d5051525355565758#5d5e5f60616263646768696b6c6d6e6f7071737576777a7b7c7d7e808182848587#92$88898a8c8d8e909395989b9c9ea2a6a7a8a9aaadb6b7babbbfc0c1c6cbcccecfd0d1d3d7d9dadcdddfe0e1e5e9ecedeeeff2f3f5f6f7f8fafbfdfe,76:02040607#08090b0d0e0f11121314161a1c1d1e212327282c2e2f31323637393a3b3d414244#92$45464748494a4b4e4f50515253555758595a5b5d5f6061626465666768696a6c6d6e7071727374757677797a7c7f80818385898a8c8d8f9092949597989a9b#9c9d9e9fa0a1a2a3a5a6a7a8a9aaabacadafb0b3b5b6b7b8b9babbbcbdbec0c1c3,554a963f57c3632854ce550954c076:914c,853c77ee827e788d72319698978d6c285b894ffa630966975cb880fa684880ae660276ce51f9655671ac7ff1888450b2596561ca6fb382ad634c625253ed54277b06516b75a45df462d48dcb9776628a8019575d97387f627238767d67cf767e64464f708d2562dc7a17659173ed642c6273822c9881677f724862:6ecc,4f3474e3534a529e7eca90a65e2e6886699c81807ed168d278c5868c9551508d8c2482de80de53058912526576:c4c7c9cbccd3d5d9dadcdddee0e1e2e3e4e6e7e8e9eaebecedf0f3f5f6f7fafbfdff,77:00020305060a0c0e0f1011121314151617181b1c1d1e21232425272a2b#2c2e3031323334393b3d3e3f4244454648494a4b4c4d4e4f52535455565758595c,858496f94fdd582199715b9d62:b1a5,66b48c799c8d7206676f789160b253:5117,8f8880cc8d1d94a1500d72c8590760eb711988ab595482ef672c7b285d297ef7752d6cf58e668ff8903c9f3b6bd491197b145f7c78a784d6853d6b:d5d9d6,5e:0187,75f995ed655d5f:0ac5,8f9f58c181c2907f965b97ad8fb97f168d2c62414fbf53:d85e,8f:a8a9ab,904d68075f6a819888689cd6618b522b762a5f6c658c6fd26ee85bbe644851:75b0,67c44e1979c9997c70b377:5d5e5f606467696a6d6e6f7071727374757677787a7b7c818283868788898a8b8f90939495969798999a9b9c9d9ea1a3a4a6a8abadaeafb1b2b4b6b7b8b9ba#bcbec0c1c2c3c4c5c6c7c8c9cacbcccecfd0d1d2d3d4d5d6d8d9dadddedfe0e1e4,75c55e7673bb83e064ad62e894b56ce2535a52c3640f94c27b944f2f5e1b823681:168a,6e246cca9a736355535c54fa886557e04e0d5e036b657c3f90e8601664e6731c88c16750624d8d22776c8e2991c75f6983dc8521991053c286956b8b60:ede8,707f82:cd31,4ed36ca785cf64cd7cd969fd66f9834953957b564fa7518c6d4b5c428e6d63d253c983:2c36,67e578b4643d5bdf5c945dee8be762c667f48c7a640063ba8749998b8c177f2094f24ea7961098a4660c731677:e6e8eaeff0f1f2f4f5f7f9fafbfc,78:0304050607080a0b0e0f101315191b1e20212224282a2b2e2f31323335363d3f414243444648494a4b4d4f51535458595a#5b5c5e5f606162636465666768696f7071727374757678797a7b7d7e7f80818283,573a5c1d5e38957f507f80a05382655e7545553150218d856284949e671d56326f6e5de2543570928f66626f64a463a35f7b6f8890f481e38fb05c1866685ff16c8996488d81886c649179f057ce6a59621054484e587a0b60e96f848bda627f901e9a8b79e4540375f4630153196c608fdf5f1b9a70803b9f7f4f885c3a8d647fc565a570bd51:45b2,866b5d075ba062bd916c75748e0c7a2061017b794ec77ef877854e1181ed521d51fa6a7153a88e87950496cf6ec19664695a78:848586888a8b8f9092949596999d9ea0a2a4a6a8a9aaabacadaeafb5b6b7b8babbbcbdbfc0c2c3c4c6c7c8cccdcecfd1d2d3d6d7d8dadbdcdddedfe0e1e2e3#e4e5e6e7e9eaebedeeeff0f1f3f5f6f8f9fbfcfdfeff,79:00020304060708090a0b0c,784050a877d7641089e6590463e35ddd7a7f693d4f20823955984e3275ae7a975e:628a,95ef521b5439708a6376952457826625693f918755076df37eaf882262337ef075b5832878c196cc8f9e614874f78bcd6b64523a8d506b21806a847156f153064e:ce1b,51d17c97918b7c074fc38e7f7be17a9c64675d1450ac810676017cb96dec7fe067515b:58f8,78cb64:ae13,63:aa2b,9519642d8fbe7b5476296253592754466b7950a362345e266b864ee38d37888b5f85902e79:0d0e0f1011121415161718191a1b1c1d1f2021222325262728292a2b2c2d2e2f3031323335363738393d3f42434445474a4b4c4d4e4f505152545558596163#6466696a6b6c6e70717273747576797b7c7d7e7f8283868788898b8c8d8e909192,6020803d62c54e39535590f863b880c665e66c2e4f4660ee6de18bde5f3986cb5f536321515a83616863520063638e4850125c9b79775bfc52307a3b60bc905376d75f:b797,76848e6c706f767b7b4977aa51f3909358244f4e6ef48fea654c7b1b72c46da47fdf5ae162b55e95573084827b2c5e1d5f1f90127f1498a063826ec7789870b95178975b57ab75354f4375385e9760e659606dc06bbf788953fc96d551cb52016389540a94938c038dcc7239789f87768fed8c0d53e079:939495969798999b9c9d9e9fa0a1a2a3a4a5a6a8a9aaabacadaeafb0b1b2b4b5b6b7b8bcbfc2c4c5c7c8cacccecfd0d3d4d6d7d9dadbdcdddee0e1e2e5e8ea#eceef1f2f3f4f5f6f7f9fafcfeff,7a:0104050708090a0c0f10111213151618191b1c,4e0176ef53ee948998769f0e952d5b9a8ba24e:221c,51ac846361c252a8680b4f97606b51bb6d1e515c6296659796618c46901775d890fd77636bd272:8aec,8bfb583577798d4c675c9540809a5ea66e2159927aef77ed953b6bb565ad7f0e58065151961f5bf958a954288e726566987f56e4949d76fe9041638754c659:1a3a,579b8eb267358dfa8235524160f0581586fe5ce89e454fc4989d8bb95a2560765384627c904f9102997f6069800c513f80335c1499756d314e8c7a:1d1f21222425262728292a2b2c2d2e2f303132343536383a3e4041424344454748494a4b4c4d4e4f50525354555658595a5b5c5d5e5f606162636465666768#696a6b6c6d6e6f717273757b7c7d7e828587898a8b8c8e8f909394999a9b9ea1a2,8d3053d17f5a7b4f4f104e4f96006cd573d085e95e06756a7ffb6a0a77fe94927e4151e170e653cd8fd483038d2972af996d6cdb574a82b365b980aa623f963259a84eff8bbf7eba653e83f2975e556198de80a5532a8bfd542080ba5e9f6cb88d3982ac915a54296c1b52067eb7575f711a6c7e7c89594b4efd5fff61247caa4e305c0167ab87025cf0950b98ce75af70fd902251af7f1d8bbd594951e44f5b5426592b657780a45b7562:76c2,8f905e456c1f7b264f:0fd8,670d7a:a3a4a7a9aaabaeafb0b1b2b4b5b6b7b8b9babbbcbdbec0c1c2c3c4c5c6c7c8c9cacccdcecfd0d1d2d3d4d5d7d8dadbdcdde1e2e4e7e8e9eaebeceef0f1f2f3#f4f5f6f7f8fbfcfe,7b:0001020507090c0d0e1012131617181a1c1d1f21222327292d,6d:6eaa,798f88b15f17752b629a8f854fef91dc65a781:2f51,5e9c81508d74526f89868d4b590d50854ed8961c723681798d1f5bcc8ba3964459877f1a549056:760e,8be565396982949976d66e895e72751867:46d1,7aff809d8d76611f79c665628d635188521a94a27f38809b7eb25c976e2f67607bd9768b9ad8818f7f947cd5641e95507a3f54:4ae5,6b4c640162089e3d80f3759952729769845b683c86e496:0194,94ec4e2a54047ed968398ddf801566f45e9a7fb97b:2f303234353637393b3d3f404142434446484a4d4e535557595c5e5f61636465666768696a6b6c6d6f70737476787a7c7d7f81828384868788898a8b8c8e8f#9192939698999a9b9e9fa0a3a4a5aeafb0b2b3b5b6b7b9babbbcbdbebfc0c2c3c4,57c2803f68975de5653b529f606d9f9a4f9b8eac516c5bab5f135de96c5e62f18d21517194a952fe6c9f82df72d757a267848d2d591f8f9c83c754957b8d4f306cbd5b6459d19f1353e486ca9aa88c3780a16545987e56fa96c7522e74dc52505be1630289024e5662d0602a68fa51735b9851a089c27ba199867f5060ef704c8d2f51495e7f901b747089c4572d78455f529f9f95fa8f689b3c8be17678684267dc8d:ea35,523d8f8a6eda68cd950590ed56fd679c88f98fc754c87b:c5c8c9cacbcdcecfd0d2d4d5d6d7d8dbdcdedfe0e2e3e4e7e8e9ebecedeff0f2f3f4f5f6f8f9fafbfdff,7c:0001020304050608090a0d0e101112131415171819#1a1b1c1d1e20212223242528292b2c2d2e2f3031323334353637393a3b3c3d3e42,9ab85b696d776c264ea55bb39a87916361a890af97e9542b6db55bd251fd558a7f:55f0,64bc634d65f161be608d710a6c:5749,592f676d822a58d5568e8c6a6beb90dd597d801753f76d695475559d83:77cf,683879be548c4f55540876d28c8996026cb36db88d6b89109e648d3a563f9ed175d55f8872e0606854fc4ea86a2a886160528f7054c470d886799e3f6d2a5b8f5f187ea255894faf7334543c539a501954:0e7c,4e4e5ffd745a58f6846b80e1877472d07cca6e567c:434445464748494a4b4c4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f70717275767778797a7e7f8081828384858687#888a8b8c8d8e8f90939496999a9ba0a1a3a6a7a8a9abacadafb0b4b5b6b7b8babb,5f27864e552c62a44e926caa623782b154d7534e733e6ed1753b521253168bdd69d05f8a60006dee574f6b2273af68538fd87f13636260a3552475ea8c6271156da35ba65e7b8352614c9ec478fa87577c27768751f060f6714c66435e4c604d8c0e707063258f895fbd606286d456de6bc160946167534960e066668d3f79fd4f1a70e96c478b:b3f2,7ed88364660f5a5a9b426d:51f7,8c416d3b4f19706b83b7621660d1970d8d27797851fb57:3efa,673a75787a3d79ef7b957c:bfc0c2c3c4c6c9cbcecfd0d1d2d3d4d8dadbdddee1e2e3e4e5e6e7e9eaebecedeef0f1f2f3f4f5f6f7f9fafcfdfeff,7d:000102030405060708090b0c0d0e0f10#1112131415161718191a1b1c1d1e1f212324252628292a2c2d2e30313233343536,808c99658ff96fc08ba59e2159ec7ee97f095409678168d88f917c4d96c653ca602575be6c7253735ac97ea7632451e0810a5df184df628051805b634f0e796d524260b86d4e5b:c4c2,8b:a1b0,65e25fcc964559937e:e7aa,560967b759394f735bb652a0835a988a8d3e753294be50477a3c4ef767b69a7e5ac16b7c76d1575a5c167b3a95f4714e517c80a9827059787f04832768c067ec78:b177,62e363617b804fed526a51cf835069db92748d:f531,89c1952e7bad4ef67d:3738393a3b3c3d3e3f404142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6f70717273747576#78797a7b7c7d7e7f808182838485868788898a8b8c8d8e8f909192939495969798,506582305251996f6e:1085,6da75efa50f559dc5c066d466c5f7586848b686859568bb253209171964d854969127901712680f64ea490ca6d479a845a0756bc640594f077eb4fa5811a72e189d2997a7f347ede527f655991758f:7f83,53eb7a9663:eda5,768679f888579636622a52ab8282685467706377776b7aed6d017ed389e359d0621285c982a5754c501f4ecb75a58beb5c4a5dfe7b4b65a491d14eca6d25895f7d2795264ec58c288fdb9773664b79818fd170ec6d787d:999a9b9c9d9e9fa0a1a2a3a4a5a7a8a9aaabacadafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9#dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fa,5c3d52b283465162830e775b66769cb84eac60ca7c:beb3,7ecf4e958b66666f988897595883656c955c5f8475c997567a:dfde,51c070af7a9863ea7a767ea0739697ed4e4570784e5d915253a965:51e7,81fc8205548e5c31759a97a062d872d975bd5c459a7983ca5c40548077e94e3e6cae805a62d2636e5de851778ddd8e1e952f4ff153e560e770ac526763509e435a1f5026773753777ee26485652b628963985014723589c951b38bc07edd574783cc94a7519b541b5cfb7d:fbfcfdfeff,7e:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f30313233343536373839#3a3c3d3e3f40424344454648494a4b4c4d4e4f505152535455565758595a5b5c5d,4fca7ae36d5a90e19a8f55805496536154af5f0063e9697751ef6168520a582a52d8574e780d770b5eb761777ce062:5b97,4ea27095800362f770e49760577782db67ef68f578d5989779d158f354b353ef6e34514b523b5ba28bfe80af554357a660735751542d7a7a60505b5463a762a053e362635bc767af54ed7a9f82e691775e9388e4593857ae630e8de880ef57577b774fa95feb5bbd6b3e53217b5072c2684677:ff36,65f751b54e8f76d45cbf7aa58475594e9b4150807e:5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a7b7c7d7e7f8081838485868788898a8b8c8d8e8f909192939495969798999a9c9d9e#aeb4bbbcd6e4ecf9,7f:0a101e37393b3c3d3e3f404143464748494a4b4c4d4e4f5253,998861276e8357646606634656f062:ec69,5ed39614578362c955878721814a8fa3556683b167658d5684dd5a6a680f62e67bee961151706f9c8c3063fd89c861d27f0670c26ee57405699472fc5eca90ce67176d6a635e52b3726280014f6c59e5916a70d96d9d52d24e5096f7956d857e78ca7d2f5121579264c2808b7c7b6cea68f1695e51b7539868a872819ece7bf172f879bb6f137406674e91cc9ca4793c83:8954,540f68174e3d538952b1783e5386522950884f:8bd0,7f:56595b5c5d5e6063646566676b6c6d6f7073757677787a7b7c7d7f8082838485868788898b8d8f9091929395969798999b9ca0a2a3a5a6a8a9aaabacadaeb1#b3b4b5b6b7babbbec0c2c3c4c6c7c8c9cbcdcfd0d1d2d3d6d7d9dadbdcdddee2e3,75e27acb7c926ca596b6529b748354e94fe9805483b28fde95705ec9601c6d9f5e18655b813894fe604b70bc7ec37cae51c968817cb1826f4e248f8691cf667e4eae8c0564a9804a50da759771ce5be58fbd6f664e86648295635ed66599521788c270c852a3730e7433679778f797164e3490bb9cde6dcb51db8d41541d62ce73b283f196f69f8494c34f367f9a51cc707596755cad988653e64ee46e9c740969b4786b998f7559521876246d4167f3516d9f99804b54997b3c7abf7f:e4e7e8eaebecedeff2f4f5f6f7f8f9fafdfeff,80:020708090a0e0f11131a1b1d1e1f2123242b2c2d2e2f303234393a3c3e404144454748494e4f505153555657#595b5c5d5e5f6061626364656667686b6c6d6e6f7072737475767778797a7b7c7d,9686578462e29647697c5a0464027bd36f0f964b82a6536298855e90708963b35364864f9c819e93788c97328d:ef42,9e7f6f5e79845f559646622e9a74541594dd4fa365c55c:6561,7f1586516c2f5f8b73876ee47eff5ce6631b5b6a6ee653754e7163a0756562a18f6e4f264ed16ca67eb68bba841d87ba7f57903b95237ba99aa188f8843d6d1b9a867edc59889ebb739b780186829a:6c82,561b541757cb4e709ea653568fc881097792999286ee6ee1851366fc61626f2b80:7e818285888a8d8e8f909192949597999ea3a6a7a8acb0b3b5b6b8b9bbc5c7c8c9cacbcfd0d1d2d3d4d5d8dfe0e2e3e6eef5f7f9fbfeff,81:000103040507080b#0c1517191b1c1d1f202122232425262728292a2b2d2e3033343537393a3b3c3d3f,8c298292832b76f26c135fd983bd732b8305951a6bdb77db94c6536f830251925e3d8c8c8d384e4873ab679a68859176970971646ca177095a9295416bcf7f8e66275bd059b95a9a95:e8f7,4eec84:0c99,6aac76df9530731b68a65b5f772f919a97617cdc8ff78c1c5f257c7379d889c56ccc871c5bc65e4268c977207ef551:954d,52c95a297f05976282d763cf778485d079d26e3a5e9959998511706d6c1162bf76bf654f60af95fd660e879f9e2394ed54:0d7d,8c2c647881:40414243444547494d4e4f525657585b5c5d5e5f6162636466686a6b6c6f727375767778818384858687898b8c8d8e90929394959697999a9e9fa0a1a2a4a5#a7a9abacadaeafb0b1b2b4b5b6b7b8b9bcbdbebfc4c5c7c8c9cbcdcecfd0d1d2d3,647986116a21819c78e864699b5462b9672b83ab58a89ed86cab6f205bde964c8c0b725f67d062c772614ea959c66bcd589366ae5e5552df6155672876ee776672677a4662ff54:ea50,94a090a35a1c7eb36c164e435976801059485357753796be56ca63208111607c95f96dd65462998151855ae980fd59ae9713502a6ce55c3c62df4f60533f817b90066eba852b62c85e7478be64b5637b5ff55a18917f9e1f5c3f634f80425b7d556e95:4a4d,6d8560a867e072de51dd5b8181:d4d5d6d7d8d9dadbdcdddedfe0e1e2e4e5e6e8e9ebeeeff0f1f2f5f6f7f8f9fafdff,82:030708090a0b0e0f111315161718191a1d2024252627292e323a3c3d3f#404142434546484a4c4d4e5051525354555657595b5c5d5e606162636465666769,62e76cde725b626d94ae7ebd81136d53519c5f04597452aa6012597366968650759f632a61e67cef8bfa54e66b279e256bb485d5545550766ca4556a8db4722c5e156015743662cd6392724c5f986e436d3e65006f5876d878d076fc7554522453db4e535e9e65c180:2ad6,629b5486522870ae888d8dd16ce1547880da57f988f48d54966a914d4f696c9b55b776c6783062a870f96f8e5f6d84ec68da787c7bf781a8670b9e4f636778b0576f7812973962:79ab,528874356bd782:6a6b6c6d71757677787b7c808183858687898c90939495969a9b9ea0a2a3a7b2b5b6babbbcbfc0c2c3c5c6c9d0d6d9dadde2e7e8e9eaecedeef0f2f3f5f6f8#fafcfdfeff,83:000a0b0d1012131618191d1e1f20212223242526292a2e3032373b3d,5564813e75b276ae533975de50fb5c418b6c7bc7504f72479a9798d86f0274e27968648777a562fc98918d2b54c180584e52576a82f9840d5e7351ed74f68bc45c4f57616cfc98875a4678349b448feb7c955256625194fa4ec68386846183e984b257d467345703666e6d668c3166dd7011671f6b3a6816621a59bb4e0351c46f0667d26c8f517668cb59476b6775665d0e81109f5065d779:4841,9a918d775c824e5e4f01542f5951780c56686c148fc45f036c:7de3,8bab639083:3e3f41424445484a4b4c4d4e5355565758595d6270717273747576797a7e7f808182838487888a8b8c8d8f909194959697999a9d9fa1a2a3a4a5a6a7acadae#afb5bbbebfc2c3c4c6c8c9cbcdced0d1d2d3d5d7d9dadbdee2e3e4e6e7e8ebeced,60706d3d7275626694:8ec5,53438fc17b7e4edf8c264e7e9ed494:b1b3,524d6f5c90636d458c3458115d4c6b:2049,67aa545b81547f8c589985375f3a62a26a47953965726084686577a74e544fa85de7979864ac7fd85ced4fcf7a8d520783044e14602f7a8394a64fb54eb279e6743452e482b964d279bd5bdd6c8197528f7b6c22503e537f6e0564ce66746c3060c598778bf75e86743c7a7779cb4e1890b174036c4256da914b6cc58d8b533a86c666f28eaf5c489a716e2083:eeeff3f4f5f6f7fafbfcfeff,84:0002050708090a10121314151617191a1b1e1f20212223292a2b2c2d2e2f30323334353637393a3b3e3f404142434445474849#4a4b4c4d4e4f505253545556585d5e5f606264656667686a6e6f70727477797b7c,53d65a369f8b8da353bb570898a76743919b6cc9516875ca62f372ac52:389d,7f3a7094763853749e4a69b7786e96c088d97fa471:36c3,518967d374e458e4651856b78ba9997662707ed560f970ed58ec4e:c1ba,5fcd97e74efb8ba45203598a7eab62544ecd65e5620e833884c98363878d71946eb65bb97ed2519763c967d480898339881551125b7a59828fb14e736c5d516589258f6f962e854a745e95:10f0,6da682e55f3164926d128428816e9cc3585e8d5b4e0953c184:7d7e7f8081838485868a8d8f90919293949596989a9b9d9e9fa0a2a3a4a5a6a7a8a9aaabacadaeb0b1b3b5b6b7bbbcbec0c2c3c5c6c7c8cbcccecfd2d4d5d7#d8d9dadbdcdee1e2e4e7e8e9eaebedeeeff1f2f3f4f5f6f7f8f9fafbfdfe,85:000102,4f1e6563685155d34e2764149a9a626b5ac2745f82726da968ee50e7838e7802674052396c997eb150bb5565715e7b5b665273ca82eb67495c715220717d886b95ea965564c58d6181b355846c5562477f2e58924f2455468d4f664c4e0a5c1a88f368a2634e7a0d70e7828d52fa97f65c1154e890b57ecd59628d4a86c782:0c0d,8d6664445c0461516d89793e8bbe78377533547b4f388eab6df15a207ec5795e6c885ba15a76751a80be614e6e1758f075:1f25,727253477ef385:030405060708090a0b0d0e0f101214151618191b1c1d1e2022232425262728292a2d2e2f303132333435363e3f404142444546474b4c4d4e4f505152535455#57585a5b5c5d5f60616263656667696a6b6c6d6e6f707173757677787c7d7f8081,770176db526980dc57235e08593172ee65bd6e7f8bd75c388671534177f362fe65f64ec098df86805b9e8bc653f277e24f7f5c4e9a7659cb5f0f793a58eb4e1667ff4e8b62ed8a93901d52bf662f55dc566c90024ed54f8d91ca99706c0f5e0260435ba489c68bd56536624b99965b:88ff,6388552e53d77626517d852c67a268b36b8a62928f9353d482126dd1758f4e668d4e5b70719f85af66:91d9,7f7287009ecd9f205c5e672f8ff06811675f620d7ad658855eb665706f3185:82838688898a8b8c8d8e909192939495969798999a9d9e9fa0a1a2a3a5a6a7a9abacadb1b2b3b4b5b6b8babbbcbdbebfc0c2c3c4c5c6c7c8cacbcccdced1d2#d4d6d7d8d9dadbdddedfe0e1e2e3e5e6e7e8eaebecedeeeff0f1f2f3f4f5f6f7f8,60555237800d6454887075295e05681362f4971c53cc723d8c016c3477617a0e542e77ac987a821c8bf47855671470c165af64955636601d79c153f84e1d6b7b80865bfa55e356db4f:3a3c,99725df3677e80386002988290015b8b8b:bcf5,641c825864de55fd82cf91654fd77d20901f7c9f50f358516eaf5bbf8bc980839178849c7b97867d96:8b8f,7ee59ad3788e5c817a57904296a7795f5b59635f7b0b84d168ad55067f2974107d2295016240584c4ed65b835979585485:f9fafcfdfe,86:0001020304060708090a0b0c0d0e0f10121314151718191a1b1c1d1e1f20212223242526282a2b2c2d2e2f3031323334353637393a3b3d3e3f40#4142434445464748494a4b4c525355565758595b5c5d5f6061636465666768696a,736d631e8e:4b0f,80ce82d462ac53f06cf0915e592a60016c70574d644a8d2a762b6ee9575b6a8075f06f6d8c:2d08,57666bef889278b363a253f970ad6c645858642a580268e0819b55107cd650188eba6dcc8d9f70eb638f6d9b6ed47ee68404684390036dd896768ba85957727985e4817e75bc8a8a68af52548e22951163d098988e44557c4f5366ff568f60d56d9552435c4959296dfb586b75:301c,606c82148146631167618fe2773a8d:f334,94c15e165385542c70c386:6d6f7072737475767778838485868788898e8f90919294969798999a9b9e9fa0a1a2a5a6abadaeb2b3b7b8b9bbbcbdbebfc1c2c3c5c8cccdd2d3d5d6d7dadc#dde0e1e2e3e5e6e7e8eaebeceff5f6f7fafbfcfdff,87:010405060b0c0e0f10111416,6c405ef7505c4ead5ead633a8247901a6850916e77b3540c94dc5f647ae5687663457b527edf75db507762955934900f51f879c37a8156fe5f9290146d825c60571f541051546e4d56e263a89893817f8715892a9000541e5c6f81c062:d658,81319e3596409a:6e7c,692d59a562d3553e631654c786d96d3c5a0374e6889c6b6a59168c4c5f2f6e7e73a9987d4e3870f75b8c7897633d665a769660cb5b9b5a494e0781556c6a738b4ea167897f515f8065fa671b5fd859845a0187:191b1d1f20242627282a2b2c2d2f303233353638393a3c3d404142434445464a4b4d4f505152545556585a5b5c5d5e5f6162666768696a6b6c6d6f71727375#7778797a7f8081848687898a8c8e8f90919294959698999a9b9c9d9ea0a1a2a3a4,5dcd5fae537197e68fdd684556f4552f60df4e3a6f4d7ef482c7840e59d44f:1f2a,5c3e7eac672a851a5473754f80c355829b4f4f4d6e2d8c135c096170536b761f6e29868a658795fb7eb9543b7a337d0a95ee55e17fc174ee631d87176da17a9d621165a1536763e16c835deb545c94a84e4c6c618bec5c4b65e0829c68a754:3e34,6b:cb66,4e9463425348821e4f:0dae,575e620a96fe6664726952:ffa1,609f8bef661471996790897f785277fd6670563b54389521727a87:a5a6a7a9aaaeb0b1b2b4b6b7b8b9bbbcbebfc1c2c3c4c5c7c8c9cccdcecfd0d4d5d6d7d8d9dadcdddedfe1e2e3e4e6e7e8e9ebecedeff0f1f2f3f4f5f6f7f8#fafbfcfdff,88:0001020405060708090b0c0d0e0f101112141718191a1c1d1e1f2023,7a00606f5e0c6089819d591560dc718470ef6eaa6c5072806a8488ad5e2d4e605ab3559c94e36d177cfb9699620f7ec6778e867e5323971e8f9666875ce14fa072ed4e0b53a6590f54136380952851484ed99c9c7ea454b88d248854823795f26d8e5f265acc663e966973:b02e,53bf817a99857fa15baa96:7750,7ebf76f853a2957699997bb189446e584e617fd479658be660f354cd4eab98795df76a6150cf54118c618427785d9704524a54ee56a395006d885bb56dc6665388:2425262728292a2b2c2d2e2f30313334353637383a3b3d3e3f414243464748494a4b4e4f505152535556585a5b5c5d5e5f6066676a6d6f717374757678797a#7b7c80838687898a8c8e8f90919394959798999a9b9d9e9fa0a1a3a5a6a7a8a9aa,5c0f5b5d6821809655787b11654869544e9b6b47874e978b534f631f643a90aa659c80c18c10519968b0537887f961c86c:c4fb,8c225c5185aa82af950c6b238f9b65b05f:fbc3,4fe18845661f8165732960fa51745211578b5f6290a2884c91925e78674f602759d351:44f6,80f853086c7996c4718a4f:11ee,7f9e673d55c5950879c088967ee3589f620c9700865a5618987b5f908bb884c4915753d965ed5e8f755c60647d6e5a7f7e:eaed,8f6955a75ba360ac65cb738488:acaeafb0b2b3b4b5b6b8b9babbbdbebfc0c3c4c7c8cacbcccdcfd0d1d3d6d7dadbdcdddee0e1e6e7e9eaebecedeeeff2f5f6f7fafbfdff,89:0001030405060708#090b0c0d0e0f1114151617181c1d1e1f20222324262728292c2d2e2f3132333537,9009766377297eda9774859b5b667a7496ea884052cb718f5faa65ec8be25bfb9a6f5de16b896c5b8b:adaf,900a8fc5538b62bc9e:262d,54404e2b82bd7259869c5d1688596daf96c554d14e9a8bb6710954bd960970df6df976d04e25781487125ca95ef68a00989c960e708e6cbf594463a9773c884d6f148273583071d5538c781a96c155015f6671305bb48c1a9a8c6b83592e9e2f79e76768626c4f6f75a17f8a6d0b96336c274ef075d2517b68376f3e908081705996747689:38393a3b3c3d3e3f40424345464748494a4b4c4d4e4f505152535455565758595a5b5c5d6061626364656768696a6b6c6d6e6f707172737475767778797a7c#7d7e808284858788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9fa0a1,64475c2790657a918c2359da54ac8200836f898180006930564e8036723791ce51b64e5f987563964e1a53f666f3814b591c6db24e0058f9533b63d694f14f:9d0a,886398905937905779fb4eea80f075916c825b9c59e85f5d69058681501a5df24e5977e34ee5827a6291661390915c794ebf5f7981c69038808475ab4ea688d4610f6bc55fc64e4976ca6ea28b:e3ae,8c0a8bd15f027f:fccc,7ece83:356b,56e06bb797f3963459fb541f94f66deb5bc5996e5c395f15969089:a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c3cdd3d4d5d7d8d9dbdddfe0e1e2e4e7e8e9eaecedeef0f1f2f4f5f6f7f8f9fa#fbfcfdfeff,8a:01020304050608090a0b0c0d0e0f101112131415161718191a1b1c1d,537082f16a315a749e705e947f2883b984:2425,836787478fce8d6276c85f719896786c662054df62e54f6381c375c85eb896cd8e0a86f9548f6cf36d8c6c38607f52c775285e7d4f1860a05fe75c24753190ae94c072b96cb96e389149670953:cbf3,4f5191c98bf153c85e7c8fc26de44e8e76c26986865e611a82064f:59de,903e9c7c61096e:1d14,96854e885a3196e84e0e5c7f79b95b878bed7fbd738957df828b90c15401904755bb5cea5fa161086b3272f180b28a:891e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3f4041424344454647494a4b4c4d4e4f505152535455565758595a5b5c5d5e#5f606162636465666768696a6b6c6d6e6f7071727374757677787a7b7c7d7e7f80,6d745bd388d598848c6b9a6d9e336e0a51:a443,57a38881539f63f48f9556ed54585706733f6e907f188fdc82d1613f6028966266f07ea68d:8ac3,94a55cb37ca4670860a6960580184e9190e75300966851418fd08574915d665597f55b55531d78386742683d54c9707e5bb08f7d518d572854b1651266828d:5e43,810f846c906d7cdf51ff85fb67a365e96fa186a48e81566a90207682707671e58d2362e952196cfd8d3c600e589e618e66fe8d60624e55b36e23672d8f678a:81828384858687888b8c8d8e8f9091929495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2#c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3,94e195f87728680569a8548b4e4d70b88bc86458658b5b857a84503a5be877bb6be18a797c986cbe76cf65a98f975d2d5c5586386808536062187ad96e5b7efd6a1f7ae05f706f335f20638c6da867564e085e108d264ed780c07634969c62db662d627e6cbc8d7571677f695146808753ec906e629854f286f08f998005951785178fd96d5973cd659f771f7504782781fb8d1e94884fa6679575b98bca9707632f9547963584b8632377415f8172f04e896014657462ef6b63653f8a:e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,8b:0001020304050608090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f20212223#24252728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445,5e2775c790d18bc1829d679d652f5431871877e580a281026c414e4b7ec7804c76f4690d6b966267503c4f84574063076b628dbe53ea65e87eb85fd763:1ab7,81:f3f4,7f6e5e1c5cd95236667a79e97a1a8d28709975d46ede6cbb7a924e2d76c55fe0949f88777ec879cd80bf91cd4ef24f17821f54685dde6d328bcc7ca58f7480985e1a549276b15b99663c9aa473e0682a86db6731732a8b:f8db,90107af970db716e62c477a956314e3b845767f152a986c08d2e94f87b518b:464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f6061626364656768696a6b6d6e6f707172737475767778797a7b7c7d7e7f80818283848586#8788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9facb1bbc7d0ea,8c:091e,4f4f6ce8795d9a7b6293722a62fd4e1378168f6c64b08d5a7bc668695e8488c55986649e58ee72b6690e95258ffd8d5857607f008c0651c6634962d95353684c74228301914c55447740707c6d4a517954a88d4459ff6ecb6dc45b5c7d2b4ed47c7d6ed35b5081ea6e0d5b579b0368d58e2a5b977efc603b7eb590b98d70594f63cd79df8db3535265cf79568bc5963b7ec494bb7e825634918967007f6a5c0a907566285de64f5067de505a4f5c57505e:a7#3$,8c:38393a3b3c3d3e3f4042434445484a4b4d4e4f5051525354565758595b5c5d5e5f60636465666768696c6d6e6f707172747576777b7c7d7e7f808183848687#888b8d8e8f90919293959697999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aaabacad,4e:8d0c,51404e105eff53454e:15981e,9b325b6c56694e2879ba4e3f53154e47592d723b536e6c1056df80e499976bd3777e9f174e:369f,9f104e:5c6993,82885b5b556c560f4ec453:8d9da3a5ae,97658d5d53:1af5262e3e,8d5c53:6663,52:02080e2d333f404c5e615c,84af52:7d82819093,51827f544e:bbc3c9c2e8e1ebde,4f1b4ef34f:2264,4ef54f:2527092b5e67,65384f:5a5d,8c:aeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebec#edeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,8d:000102030405060708090a0b0c0d,4f:5f57323d76749189838f7e7baa7cac94e6e8eac5dae3dcd1dff8,50:294c,4ff350:2c0f2e2d,4ffe50:1c0c25287e4355484e6c7ba5a7a9bad6,510650:edece6ee,51:070b,4edd6c3d4f:5865ce,9fa06c467c74516e5dfd9ec999985181591452f9530d8a07531051eb591951554ea051564eb388:6ea4,4eb5811488d279805b3488037fb851:abb1bdbc,8d:0e0f101112131415161718191a1b1c205152575f6568696a6c6e6f717278797a7b7c7d7e7f808283868788898c8d8e8f90929395969798999a9b9c9d9ea0a1#a2a4a5a6a7a8a9aaabacadaeafb0b2b6b7b9bbbdc0c1c2c5c7c8c9cacdd0d2d3d4,51:c796a2a5,8b:a0a6a7aab4b5b7c2c3cbcfced2d3d4d6d8d9dcdfe0e4e8e9eef0f3f6f9fcff,8c:000204070c0f1112141516191b181d1f202125272a2b2e2f32333536,53:697a,96:1d2221312a3d3c4249545f676c7274888d97b0,90:979b9d99aca1b4b3b6ba,8d:d5d8d9dce0e1e2e5e6e7e9edeef0f1f2f4f6fcfeff,8e:00010203040607080b0d0e1011121315161718191a1b1c202124252627282b2d303233343637383b3c3e#3f4345464c4d4e4f505354555657585a5b5c5d5e5f60616263646567686a6b6e71,90:b8b0cfc5bed0c4c7d3e6e2dcd7dbebeffe,91:04221e23312f394346,520d594252:a2acadbe,54ff52:d0d6f0,53df71ee77cd5ef451:f5fc,9b2f53b65f01755a5def57:4ca9a1,58:7ebcc5d1,57:292c2a33392e2f5c3b4269856b867c7b686d7673ada48cb2cfa7b493a0d5d8dad9d2b8f4eff8e4dd,8e:73757778797a7b7d7e808283848688898a8b8c8d8e91929395969798999a9b9d9fa0a1a2a3a4a5a6a7a8a9aaadaeb0b1b3b4b5b6b7b8b9bbbcbdbebfc0c1c2#c3c4c5c6c7c8c9cacbcccdcfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4,58:0b0d,57:fded,58:001e194420656c81899a80,99a89f1961ff82:797d7f8f8aa8848e919799abb8beb0c8cae398b7aecbccc1a9b4a1aa9fc4cea4e1,830982:f7e4,83:0f07,82:dcf4d2d8,830c82:fbd3,83:111a061415,82:e0d5,83:1c515b5c08923c34319b5e2f4f47435f4017602d3a336665,8e:e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,8f:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f20212223#2425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f4041424344,83:681b696c6a6d6eb078b3b4a0aa939c857cb6a97db87b989ea8babcc1,840183:e5d8,580784:180b,83:ddfdd6,84:1c381106,83:d4df,84:0f03,83:f8f9eac5c0,842683:f0e1,84:5c515a597387887a89783c4669768c8e316dc1cdd0e6bdd3cabfbae0a1b9b497e5e3,850c750d853884f085:391f3a,8f:45464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f6061626364656a808c929da0a1a2a4a5a6a7aaacadaeafb2b3b4b5b7b8babbbcbfc0c3c6#c9cacbcccdcfd2d6d7dae0e1e3e7eceff1f2f4f5f6fafbfcfeff,90:07080c0e131518,85:563b,84:fffc,85:594868645e7a,77a285:43727ba4a8878f79ae9c85b9b7b0d3c1dcff,86:270529163c,5efe5f0859:3c41,803759:555a58,530f5c:22252c34,62:4c6a9fbbcadad7ee,632262f663:394b43adf6717a8eb46dac8a69aebcf2f8e0ffc4dece,645263:c6be,64:45410b1b200c26215e846d96,90:191c2324252728292a2b2c303132333437393a3d3f4043454648494a4b4c4e545556595a5c5d5e5f6061646667696a6b6c6f70717273767778797a7b7c7e81#84858687898a8c8d8e8f90929496989a9c9e9fa0a4a5a7a8a9abadb2b7bcbdbfc0,64:7ab7b899bac0d0d7e4e2,65:09252e,5f:0bd2,75195f1153:5ff1fde9e8fb,54:1216064b5253545643215759233282947771649a9b8476669dd0adc2b4d2a7a6d3d472a3d5bbbfccd9dadca9aaa4ddcfde,551b54e7552054fd551454f355:22230f11272a678fb5496d41553f503c,90:c2c3c6c8c9cbcccdd2d4d5d6d8d9dadedfe0e3e4e5e9eaeceef0f1f2f3f5f6f7f9fafbfcff,91:00010305060708090a0b0c0d0e0f1011121314151617181a1b1c#1d1f20212425262728292a2b2c2d2e30323334353637383a3b3c3d3e3f40414244,55:375675767733305c8bd283b1b988819f7ed6917bdfbdbe9499eaf7c9,561f55:d1ebecd4e6ddc4efe5f2f3cccde8f5e4,8f9456:1e080c012423,55fe56:00272d5839572c4d62595c4c548664716b7b7c8593afd4d7dde1f5ebf9ff,57:040a091c,5e:0f191411313b3c,91:454748515354555658595b5c5f606667686b6d737a7b7c808182838486888a8e8f939495969798999c9d9e9fa0a1a4a5a6a7a8a9abacb0b1b2b3b6b7b8b9bb#bcbdbebfc0c1c2c3c4c5c6c8cbd0d2d3d4d5d6d7d8d9dadbdddedfe0e1e2e3e4e5,5e:3744545b5e61,5c:8c7a8d9096889899919a9cb5a2bdacabb1a3c1b7c4d2e4cbe5,5d:020327262e241e061b583e343d6c5b6f5d6b4b4a697482999d,8c735d:b7c5,5f:73778287898c95999ca8adb5bc,88625f6172:adb0b4b7b8c3c1cecdd2e8efe9f2f4f7,730172f3730372fa91:e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,92:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f2021222324#25262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445,72fb73:1713210a1e1d152239252c3831504d57606c6f7e,821b592598e759:2402,99:636768696a6b6c74777d8084878a8d9091939495,5e:80918b96a5a0b9b5beb3,8d535e:d2d1dbe8ea,81ba5f:c4c9d6cf,60035fee60045f:e1e4fe,60:0506,5f:eaedf8,60:1935261b0f0d292b0a3f2178797b7a42,92:464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f7071727375767778797a7b7c7d7e7f808182838485#868788898a8b8c8d8f909192939495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7,60:6a7d969aad9d83928c9becbbb1ddd8c6dab4,61:20261523,60f461:000e2b4a75ac94a7b7d4f5,5fdd96b395:e9ebf1f3f5f6fcfe,96:030406080a0b0c0d0f12151617191a,4e2c723f62156c:35545c4aa38590948c6869747686a9d0d4adf7f8f1d7b2e0d6faebeeb1d3effe,92:a8a9aaabacadafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8#e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,93:00010203040506070809,6d:39270c43480704190e2b4d2e351a4f525433916f9ea05e93945c607c63,6e1a6d:c7c5de,6e0e6d:bfe0,6e116d:e6ddd9,6e166dab6e0c6dae6e:2b6e4e6bb25f865354322544dfb198e0,6f2d6e:e2a5a7bdbbb7d7b4cf8fc29f,6f:6246472415,6ef96f:2f364b742a0929898d8c78727c7ad1,93:0a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3f40414243444546474849#4a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696b,6f:c9a7b9b6c2e1eedee0ef,70:1a231b39354f5e,5b:80849593a5b8,752f9a9e64345b:e4ee,89305bf08e478b078f:b6d3d5e5eee4e9e6f3e8,90:05040b26110d162135362d2f445152506858625b,66b990:747d8288838b,5f:50575658,5c3b54ab5c:5059,5b715c:6366,7fbc5f:2a292d,82745f3c9b3b5c6e59:81838da9aaa3,93:6c6d6e6f707172737475767778797a7b7c7d7e7f808182838485868788898a8b8c8d8e909192939495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aaab#acadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cbcccd,59:97caab9ea4d2b2afd7be,5a:0506,59dd5a0859:e3d8f9,5a:0c09323411231340674a553c6275,80ec5a:aa9b777abeebb2d2d4b8e0e3f1d6e6d8dc,5b:091716323740,5c:151c,5b:5a6573515362,9a:7577787a7f7d808185888a90929396989b9c9d9fa0a2a3a5a7,7e:9fa1a3a5a8a9,93:cecfd0d1d2d3d4d5d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,94:000102030405060708090a0b0c0d#0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e,7e:adb0bec0c1c2c9cbccd0d4d7dbe0e1e8ebeeeff1f2,7f0d7e:f6fafbfe,7f:01020307080b0c0f111217191c1b1f212223242526272a2b2c2d2f3031323335,5e7a757f5ddb753e909573:8e91aea29fcfc2d1b7b3c0c9c8e5d9,987c740a73:e9e7debaf2,74:0f2a5b262528302e2c,94:2f303132333435363738393a3b3c3d3f404142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6c6d6e6f#707172737475767778797a7b7c7d7e7f8081828384919698c7cfd3d4dae6fb,95:1c20,74:1b1a415c575559776d7e9c8e8081878b9ea8a990a7d2ba,97:eaebec,67:4c535e4869a5876a7398a775a89ead8b777cf0,680967d8680a67:e9b0,680c67:d9b5dab3dd,680067:c3b8e2,680e67:c1fd,68:323360614e624464831d55664167403e4a4929b58f7477936bc2,696e68fc69:1f20,68f995:27333d43484b555a606e74757778797a7b7c7d7e808182838485868788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aa#abacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacb,692468f069:0b0157,68e369:10713960425d846b80987834cc8788ce896663799ba7bbabadd4b1c1cadf95e08dff,6a2f69ed6a:171865,69f26a:443ea0505b358e793d28587c9190a997ab,73:3752,6b:8182878492938d9a9ba1aa,8f:6b6d71727375767877797a7c7e818284878b,95:cccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3e4e5e6e7ecff,96:0713181b1e20232425262728292b2c2d2f303738393a3e41434a4e4f5152535657#58595a5c5d5e606365666b6d6e6f70717378797a7b7c7d7e7f808182838487898a,8f:8d8e8f989a,8ece62:0b171b1f222125242c,81e774:eff4ff,75:0f1113,65:34eeeff0,66:0a19,677266:031500,708566:f71d34313635,800666:5f54414f56615777848ca79dbedbdce6e9,8d:3233363b3d4045464849474d5559,89:c7cacbcccecfd0d1,72:6e9f5d666f7e7f848b8d8f92,63:0832b0,96:8c8e91929395969a9b9d9e9fa0a1a2a3a4a5a6a8a9aaabacadaeafb1b2b4b5b7b8babbbfc2c3c8cacbd0d1d3d4d6d7d8d9dadbdcdddedfe1e2e3e4e5e6e7eb#ecedeef0f1f2f4f5f8fafbfcfdff,97:0203050a0b0c10111214151718191a1b1d1f20,64:3fd8,80046b:eaf3fdf5f9,6c:0507060d1518191a2129242a32,65:35556b,72:4d525630,8662521680:9f9c93bc,670a80:bdb1abadb4b7e7e8e9eadbc2c4d9cdd7,671080:ddebf1f4ed,81:0d0e,80:f2fc,671581128c5a81:361e2c1832484c5374595a7160697c7d6d67,584d5ab581:888291,6ed581:a3aacc,672681:cabb,97:2122232425262728292b2c2e2f3133343536373a3b3c3d3f404142434445464748494a4b4c4d4e4f5051545557585a5c5d5f63646667686a6b6c6d6e6f7071#72757778797a7b7d7e7f8081828384868788898a8c8e8f9093959697999a9b9c9d,81:c1a6,6b:243739434659,98:d1d2d3d5d9da,6bb35f406bc289f365909f5165:93bcc6c4c3ccced2d6,70:809c969dbbc0b7abb1e8ca,71:1013162f31735c6845724a787a98b3b5a8a0e0d4e7f9,72:1d28,706c71:1866b9,62:3e3d434849,79:3b4046495b5c535a6257606f677a858a9aa7b3,5f:d1d0,97:9e9fa1a2a4a5a6a7a8a9aaacaeb0b1b3b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1e2e3#e4e5e8eeeff0f1f2f4f7f8f9fafbfcfdfeff,98:000102030405060708090a0b0c0d0e,60:3c5d5a67415963ab,61:060d5da99dcbd1,620680:807f,6c:93f6,6dfc77:f6f8,78:0009171811,65ab78:2d1c1d393a3b1f3c252c23294e6d56572650474c6a9b939a879ca1a3b2b9a5d4d9c9ecf2,790578f479:13241e34,9f9b9e:f9fbfc,76f177:040d,76f977:07081a22192d263538505147435a68,98:0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142434445464748494a4b4c4d#4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e,77:62657f8d7d808c919fa0b0b5bd,75:3a404e4b485b727983,7f:58615f,8a487f:68747179817e,76:cde5,883294:8586878b8a8c8d8f909497959a9b9ca3a4abaaadacafb0b2b4b6b7b8b9babcbdbfc4c8c9cacbcccdced0d1d2d5d6d7d9d8dbdedfe0e2e4e5e7e8ea,98:6f70717273748b8e929599a3a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcfd0d4d6d7dbdcdde0e1e2e3e4#e5e6e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,99:0001020304050607,94:e9ebeeeff3f4f5f7f9fcfdff,95:03020607090a0d0e0f1213141516181b1d1e1f222a2b292c3132343637383c3e3f4235444546494c4e4f525354565758595b5e5f5d61626465666768696a6b6c6f7172733a,77:e7ec,96c979:d5ede3eb,7a065d477a:03021e14,99:08090a0b0c0e0f1112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2f303132333435363738393a3b3c3d3e3f40414243444546474849#4a4b4c4d4e4f50515253565758595a5b5c5d5e5f60616264667378797b7e828389,7a:393751,9ecf99a57a7076:888e9399a4,74:dee0,752c9e:202228292a2b2c3231363837393a3e414244464748494b4c4e5155575a5b5c5e63666768696a6b6c716d73,75:929496a09daca3b3b4b8c4b1b0c3c2d6cde3e8e6e4ebe7,760375:f1fcff,76:1000050c170a25181519,99:8c8e9a9b9c9d9e9fa0a1a2a3a4a6a7a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8#d9dadbdcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9,76:1b3c2220402d303f35433e334d5e545c566b6f,7fca7a:e6787980868895a6a0aca8adb3,88:6469727d7f82a2c6b7bcc9e2cee3e5f1,891a88:fce8fef0,89:2119131b0a342b3641667b,758b80e576:b2b4,77dc80:1214161c20222526272928310b3543464d526971,898398:788083,99:fafbfcfdfeff,9a:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738#393a3b3c3d3e3f404142434445464748494a4b4c4d4e4f50515253545556575859,98:898c8d8f949a9b9e9fa1a2a5a6,86:4d546c6e7f7a7c7ba88d8bac9da7a3aa93a9b6c4b5ceb0bab1afc9cfb4e9f1f2edf3d0,871386:def4dfd8d1,87:0307,86f887:080a0d09233b1e252e1a3e48343129373f82227d7e7b60704c6e8b53637c64596593afa8d2,9a:5a5b5c5d5e5f606162636465666768696a6b7283898d8e949599a6a9aaabacadaeafb2b3b4b5b9bbbdbebfc3c4c6c7c8c9cacdcecfd0d2d4d5d6d7d9dadbdc#dddee0e2e3e4e5e7e8e9eaeceef0f1f2f3f4f5f6f7f8fafcfdfeff,9b:000102040506,87:c68885ad9783abe5acb5b3cbd3bdd1c0cadbeae0ee,88:1613,87fe88:0a1b21393c,7f:36424445,82107a:fafd,7b:080304150a2b0f47382a192e31202524333e1e585a45754c5d606e7b62727190a6a7b8ac9da885aa9ca2abb4d1c1ccdddae5e6ea,7c0c7b:fefc,7c:0f160b,9b:07090a0b0c0d0e1011121415161718191a1b1c1d1e2021222425262728292a2b2c2d2e3031333435363738393a3d3e3f40464a4b4c4e50525355565758595a#5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a7b,7c:1f2a26384140,81fe82:010204,81ec884482:2122232d2f282b383b33343e44494b4f5a5f68,88:7e8588d8df,895e7f:9d9fa7afb0b2,7c7c65497c:919d9c9ea2b2bcbdc1c7cccdc8c5d7e8,826e66a87f:bfced5e5e1e6e9eef3,7cf87d:77a6ae,7e:479b,9e:b8b4,8d:73849491b1676d,8c:4749,91:4a504e4f64,9b:7c7d7e7f808182838485868788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9fa0a1a2a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9ba#bbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadb,91:626170696f7d7e7274798c85908d91a2a3aaadaeafb5b4ba,8c559e7e8d:b8eb,8e:055969,8d:b5bfbcbac4d6d7dadececfdbc6ecf7f8e3f9fbe4,8e098dfd8e:141d1f2c2e232f3a4039353d3149414251524a70767c6f74858f94909c9e,8c:78828a859894,659b89:d6dedadc,9b:dcdddedfe0e1e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,9c:000102030405060708090a0b0c0d0e0f101112131415161718191a#1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b,89:e5ebef,8a3e8b26975396:e9f3ef,97:0601080f0e2a2d303e,9f:808385868788898a8c,9efe9f:0b0d,96:b9bcbdced2,77bf96e092:8eaec8,93:3e6aca8f,94:3e6b,9c:7f8285868788,7a239c:8b8e90919294959a9b9e9fa0a1a2a3a5a6a7a8a9abadaeb0b1b2b3b4b5b6b7babbbcbdc4c5c6c7cacb3c3d3e3f404142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a#7b7d7e808384898a8c8f93969798999daaacafb9bebfc0c1c2c8c9d1d2dadbe0e1cccdcecfd0d3d4d5d7d8d9dcdddfe2,97:7c85919294afaba3b2b4,9a:b1b0b7,9e589a:b6babcc1c0c5c2cbccd1,9b:45434749484d51,98e899:0d2e5554,9a:dfe1e6efebfbedf9,9b:080f131f23,9e:bdbe,7e3b9e:8287888b92,93d69e:9d9fdbdcdde0dfe2e9e7e5eaef,9f:222c2f39373d3e44,9c:e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,9d:000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f2021#22232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f404142#92$434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778797a7b7c7d7e7f8081#82838485868788898a8b8c8d8e8f909192939495969798999a9b9c9d9e9fa0a1a2#92$a3a4a5a6a7a8a9aaabacadaeafb0b1b2b3b4b5b6b7b8b9babbbcbdbebfc0c1c2c3c4c5c6c7c8c9cacbcccdcecfd0d1d2d3d4d5d6d7d8d9dadbdcdddedfe0e1#e2e3e4e5e6e7e8e9eaebecedeeeff0f1f2f3f4f5f6f7f8f9fafbfcfdfeff,9e:000102#92$030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e24272e30343b3c404d5052535456595d5f606162656e6f727475767778797a7b7c7d80#8183848586898a8c8d8e8f90919495969798999a9b9c9ea0a1a2a3a4a5a7a8a9aa#92$abacadaeafb0b1b2b3b5b6b7b9babcbfc0c1c2c3c5c6c7c8cacbccd0d2d3d5d6d7d9dadee1e3e4e6e8ebecedeef0f1f2f3f4f5f6f7f8fafdff,9f:000102030405#060708090a0c0f1112141516181a1b1c1d1e1f21232425262728292a2b2d2e3031#92$3233343536383a3c3f4041424345464748494a4b4c4d4e4f52535455565758595a5b5c5d5e5f606162636465666768696a6b6c6d6e6f707172737475767778#797a7b7c7d7e81828d8e8f9091929394959697989c9d9ea1a2a3a4a5,f9:2c7995e7f1#92$,fa:0c0d0e0f111314181f20212324272829,e8:15161718191a1b1c1d1e1f202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f40414243#4445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f6061626364",a.init_data=function(){var t=a.zipData.replace(/#(\d+)\$/g,function(t,e){return Array(+e+3).join("#")}).replace(/#/g,"####").replace(/(\w\w):([\w#]+)(?:,|$)/g,function(t,e,i){return i.replace(/../g,function(t){return"##"!=t?e+t:t})}),e=0;t=t.match(/..../g);for(var i=129;i<=254;i++)for(var n=64;n<=254;n++)if(e>=t.length||"####"==t[e])e++;else{var s=parseInt("0x"+t[e]),r=i<<8|n;a.U2Ghash[s]=r,e++}for(var o in a.U2Ghash)a.G2Uhash[a.U2Ghash[o]]=parseInt(o)},a.init_data(),a.tmp_ui8=new ArrayBuffer(1024),a.tmp_dv=new DataView(a.tmp_ui8),a.gb2312a_to_utf8=function(t){for(var e="",i=0;i<t.length;i++){var n=t[i]<<8|t[i+1];n in a.G2Uhash?(e+=String.fromCharCode(a.G2Uhash[n]),i+=1):e+=String.fromCharCode(t[i])}return e},a.utf8_to_gb2312a=function(t){for(var e=0,i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n in a.U2Ghash){var s=a.U2Ghash[n];a.tmp_dv.setUint8(e++,s>>8&255),a.tmp_dv.setUint8(e++,255&s)}else a.tmp_dv.setUint8(e++,n)}return new Uint8Array(a.tmp_ui8,0,e)}},{}],25:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function AnimaAction(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,AnimaAction),this.iAnimaPoint=-1,this.iDelay=-1,this.iFrame=-1,this.pani=null,this.iRect=[0,0,0,0],null!=t&&this.copyfrom(t)}return a(AnimaAction,[{key:"copyfrom",value:function(t){this.iAnimaPoint=t.iAnimaPoint,this.iDelay=t.iDelay,this.iFrame=t.iFrame,this.pani=t.pani,this.iRect[0]=t.iRect[0],this.iRect[1]=t.iRect[1],this.iRect[2]=t.iRect[2],this.iRect[3]=t.iRect[3]}},{key:"Reset",value:function(){this.iFrame=0,this.iDelay=0}},{key:"Draw",value:function(t,e,i){null==i&&(i=this.iFrame),this.pani.DrawAnimaEx_ByOffset(t,e,this.iAnimaPoint,i,101,1,1,0,0,0)}},{key:"DrawEx1",value:function(t,e,i,a,n,s,r,o,u,l){this.pani.DrawAnimaEx_ByOffset(t,e,this.iAnimaPoint,i,a,n,s,r,o,u,l)}},{key:"DrawEx",value:function(t,e,i,a,n,s,r,o,u,l){101!=a?this.pani.DrawAnimaEx_ByOffset(t,e,this.iAnimaPoint,this.iFrame,i,a,n,s,r,o,u):this.DrawEx1(t,e,i,a,n,s,r,o,u,l)}},{key:"NextFrame",value:function(){return null!=this.pani&&this.pani.NextFrame(this)}},{key:"bIn",value:function(t,e,i,a){return null!=this.pani&&this.pani.bInAnima(this,t,e,i,a)}},{key:"SetFrame",value:function(t){null!=this.pani&&this.pani.SetFrame(this,t)}}]),AnimaAction}();i.default=n},{}],26:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("../../config/XDefine"),r=(a=s)&&a.__esModule?a:{default:a};var o=function(){function LoadAnimaRes(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LoadAnimaRes),this.ani_list=new Array,this.bLoadFinished=!1}return n(LoadAnimaRes,[{key:"PushAnima",value:function(t){this.ani_list[this.ani_list.length]=t}},{key:"LoadInitRes",value:function(){LoadAnimaRes.iLoadingCount=0,LoadAnimaRes.iLoadedResCount=0;for(var t=0;t<this.ani_list.length;t++)LoadAnimaRes.iLoadedResCount+=this.ani_list[t].LoadInitRes(LoadAnimaRes._init_res);LoadAnimaRes.iLoadedResCount>=LoadAnimaRes.iMaxResCount&&r.default.sop("=========load init finished=========")}},{key:"LoadOtherRes",value:function(){if(!this.bLoadFinished){LoadAnimaRes.iLoadingCount=0,this.bLoadFinished=!0;for(var t=0;t<this.ani_list.length;t++)this.ani_list[t].IsResLoadedFinish()||(this.ani_list[t].LoadRes(),this.bLoadFinished=!1);this.bLoadFinished&&r.default.sop("=========load other finished=========")}}}]),LoadAnimaRes}();i.default=o,o.iMaxLoadThread=4096,o.iLoadingCount=0,o.pp=null,o.gi=function(){return null==o.pp&&(o.pp=new o),o.pp},o._init_res=[],o.iMaxResCount=o._init_res.length,o.iLoadedResCount=0},{"../../config/XDefine":7}],27:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("../../config/XDefine"),r=(a=s)&&a.__esModule?a:{default:a};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function _ImageList(t){_classCallCheck(this,_ImageList),this.bUseing=!1,this.bLoaded=!1,this.iImageId=t,this.blocks=new Array,this.iBlockCount=0}return n(_ImageList,[{key:"GetBlock",value:function(t,e,i,a){var n;for(n=0;n<this.iBlockCount;n++)if(this.blocks[n].x==t&&this.blocks[n].y==e&&this.blocks[n].w==i&&this.blocks[n].h==a)return this.blocks[n].image;return this.CreateBlock(t,e,i,a).image}},{key:"CreateBlock",value:function(t,e,i,a){return this.blocks[this.iBlockCount]=new Object,this.blocks[this.iBlockCount].x=t,this.blocks[this.iBlockCount].y=e,this.blocks[this.iBlockCount].w=i,this.blocks[this.iBlockCount].h=a,this.blocks[this.iBlockCount].image=Laya.Texture.createFromTexture(this.image,t,e,i,a),this.iBlockCount++,this.blocks[this.iBlockCount-1]}}]),_ImageList}(),u=function(){function _TextBuffer(){_classCallCheck(this,_TextBuffer),this._txts=new Array(_TextBuffer.SIZE);for(var t=0;t<_TextBuffer.SIZE;t++)this._txts[t]=new Object,this._txts[t].bUseing=!1,this._txts[t].bUsed=!1,this._txts[t].txt=new Laya.Text,this._txts[t].iTimeOut=0,this._txts[t].s="",this._txts[t].c=0,this._txts[t].size=0,this._txts[t].ab=0,this._txts[t].sw=0,this._txts[t].sh=0,this._txts[t].ra=0,this._txts[t].ratx=0,this._txts[t].raty=0,this._txts[t].x=0,this._txts[t].y=0;this.iMaxPoint=0}return n(_TextBuffer,[{key:"Find",value:function(t,e,i,a,n,s,r,o,u){for(var l=0;l<this.iMaxPoint;l++)if(this._txts[l].bUseing&&!this._txts[l].bUsed&&this._txts[l].s==t&&this._txts[l].c==e&&this._txts[l].size==i&&this._txts[l].ab==a&&this._txts[l].sw==n&&this._txts[l].sh==s&&this._txts[l].ra==r&&this._txts[l].ratx==o&&this._txts[l].raty==u)return this._txts[l].iTimeOut=_TextBuffer.iTick+30,this._txts[l].bUsed=!0,this._txts[l];return null}},{key:"Get",value:function(t,e,i,a,n,s,r,o,u){for(var l=0;l<_TextBuffer.SIZE;l++)if(!this._txts[l].bUseing)return this._txts[l].bUseing=!0,this._txts[l].s=t,this._txts[l].c=e,this._txts[l].size=i,this._txts[l].ab=a,this._txts[l].sw=n,this._txts[l].sh=s,this._txts[l].ra=r,this._txts[l].ratx=o,this._txts[l].raty=u,this._txts[l].iTimeOut=_TextBuffer.iTick+30,this._txts[l].bUsed=!0,this._txts[l];return null}},{key:"Clear",value:function(){this.iCount=0,this.iMaxPoint=0;for(var t=0;t<_TextBuffer.SIZE;t++)this._txts[t].bUseing&&(this._txts[t].iTimeOut<_TextBuffer.iTick?this._txts[t].bUseing=!1:(this._txts[t].bUsed=!1,this.iCount++,this.iMaxPoint=t));this.iMaxPoint++}}]),_TextBuffer}();u.SIZE=1024,u.iTick=0;var l=function(){function _SpanBuffer(){_classCallCheck(this,_SpanBuffer),this._spans=new Array(_SpanBuffer.SIZE);for(var t=0;t<_SpanBuffer.SIZE;t++)this._spans[t]=new Object,this._spans[t].bUseing=!1,this._spans[t].bUsed=!1,this._spans[t].span=new Laya.HTMLDivElement,this._spans[t].iTimeOut=0,this._spans[t].s="",this._spans[t].x=0,this._spans[t].y=0;this.iMaxPoint=0}return n(_SpanBuffer,[{key:"Find",value:function(t){for(var e=0;e<this.iMaxPoint;e++)if(this._spans[e].bUseing&&!this._spans[e].bUsed&&this._spans[e].s==t)return this._spans[e].iTimeOut=u.iTick+30,this._spans[e].bUsed=!0,this._spans[e];return null}},{key:"Get",value:function(t){for(var e=0;e<_SpanBuffer.SIZE;e++)if(!this._spans[e].bUseing)return this._spans[e].bUseing=!0,this._spans[e].span.innerHTML=t,this._spans[e].s=t,this._spans[e].iTimeOut=u.iTick+30,this._spans[e].bUsed=!0,this._spans[e];return null}},{key:"Clear",value:function(){this.iCount=0,this.iMaxPoint=0;for(var t=0;t<_SpanBuffer.SIZE;t++)this._spans[t].bUseing&&(this._spans[t].iTimeOut<u.iTick?this._spans[t].bUseing=!1:(this._spans[t].bUsed=!1,this.iCount++,this.iMaxPoint=t));this.iMaxPoint++}}]),_SpanBuffer}();l.SIZE=16;var f=function(){function M2DFast(){_classCallCheck(this,M2DFast),this.tb=new u,this.sb=new l,this.m_ImageList=new Array(M2DFast.MAXIMAGECOUNT);for(var t=0;t<M2DFast.MAXIMAGECOUNT;t++)this.m_ImageList[t]=new o(t);this.view_sprite=new Laya.Sprite,Laya.stage.addChild(this.view_sprite),this.view_sprite.graphics.clear(),this.Clear(),this.block_sprites=new Array,this.iSpritePoint=0,this.iSpriteCount=0,this.block_texts=new Array,this.iTextPoint=0,this.iTextCount=0,this.iClipSpriteCount=0,this.clip_sprites=new Array,this.bClip=!1,this.iFlashDelay=0,this.iTextWidth=-1,this.txt_w=new Laya.Text,this.drawrect=new Int32Array(4)}return n(M2DFast,[{key:"_SpanText",value:function(t,e,i){return"<span style='font-size:"+i+"px;color:"+this.c_to_c(e)+"'>"+t+"</span>"}},{key:"_DrawSpanText",value:function(t,e,i,a){var n=this.sb.Find(i);null==n&&null==(n=this.sb.Get(i))||(n.span.pos(t,e),n.span.style.wordWrap=!0,n.span.style.width=a,this.view_sprite.addChild(n.span))}},{key:"FindFreeText",value:function(){return this.iTextPoint>=this.iTextCount&&(this.block_texts[this.iTextCount]=new Laya.Text,this.iTextCount++),this.iTextPoint++,this.block_texts[this.iTextPoint-1]}},{key:"FindFreeSprite",value:function(){return this.iSpritePoint>=this.iSpriteCount&&(this.block_sprites[this.iSpriteCount]=new Laya.Sprite,this.iSpriteCount++),this.iSpritePoint++,this.block_sprites[this.iSpritePoint-1]}},{key:"Clear",value:function(){var t;for(this.view_sprite.removeChildren(),this.iSpritePoint=0,this.iTextPoint=0,t=0;t<this.iClipSpriteCount;t++)this.clip_sprites[t].scrollRect=null,this.clip_sprites[t].removeChildren();this.iClipSpriteCount=0,this.iFlashDelay>0?(this.iFlashDelay--,this.view_sprite.pos(r.default.grnd(-5,5),r.default.grnd(-5,5))):this.view_sprite.pos(0,0),u.iTick++,this.tb.Clear(),this.sb.Clear()}},{key:"FindFreeImage",value:function(){for(var t=0;t<M2DFast.MAXIMAGECOUNT;t++)if(!this.m_ImageList[t].bUseing)return this.m_ImageList[t];return null}},{key:"FindImage",value:function(t){return this.m_ImageList[t].bUseing&&this.m_ImageList[t].bLoaded?this.m_ImageList[t]:null}},{key:"LoadedImage",value:function(t,e,i,a,n){null!=n?(a.image=n,a.bLoaded=!0,a.fn=e):Laya.loader.load((i?"":r.default.BASE_URL)+e,Laya.Handler.create(t,t.LoadedImage,[t,e,i,a]),null,Laya.Loader.IMAGE)}},{key:"LoadImage",value:function(t,e){null==e&&(e=!1),e=!1;var i=this.FindFreeImage();return null==i?-1:(i.bUseing=!0,this.LoadedImage(this,t,e,i),i.iImageId)}},{key:"_SetViewClip",value:function(t,e,i,a){this.bClip=!0,this.iClipX=t,this.iClipY=e,this.iClipW=i,this.iClipH=a}},{key:"NoClip",value:function(){this.bClip=!1}},{key:"_DrawImageEx",value:function(t,e,i,a,n,s,r,o,u,l,f,h,d,c){if(!(s>2048||r>2048)){c=c||!1;var m=this.FindImage(i);if(null!=m){-1==s&&(s=m.image.width),-1==r&&(r=m.image.height),this.bClip;var g=this.FindFreeSprite();if(this.bClip){var _=this.FindFreeSprite();_.graphics.clear(),_.pos(this.iClipX,this.iClipY),_.rotation=0,_.alpha=1,_.scale(1,1),_.scrollRect=new Laya.Rectangle(this.iClipX,this.iClipY,this.iClipW,this.iClipH),this.view_sprite.addChild(_),_.addChild(g),this.clip_sprites[this.iClipSpriteCount++]=_}else this.view_sprite.addChild(g);g.graphics.clear(),-1==h?h=t:-2==h?h=t+s/2:-3==h&&(h=t+s),-1==d?d=e:-2==d?d=e+r/2:-3==d&&(d=e+r);var p=m.GetBlock(a,n,s,r);g.graphics.drawImage(p,t-h,e-d,s,r),g.pos(h,d),g.alpha=o/100,g.rotation=f,g.scale(c?-u:u,l)}}}},{key:"c_to_c",value:function(t){for(var e=t.toString(16);e.length<6;)e="0"+e;return"#"+e}},{key:"TextWidth",value:function(t,e){return this.txt_w.text=t,this.txt_w.fontSize=e,this.iTextHeight=this.txt_w.textHeight,this.txt_w.textWidth}},{key:"_DrawTextEx",value:function(t,e,i,a,n,s,r,o,u,l,f){if(null!=i&&!(e>Laya.stage.height)){var h,d,c,m=this.tb.Find(i,a,n,s,r,o,u,l,f);if(null==m){if(null==(m=this.tb.Get(i,a,n,s,r,o,u,l,f)))return;(h=m.txt).text=i,h.color=this.c_to_c(a),h.fontSize=n,h.width=h.textWidth,h.height=h.textHeight,this.iTextWidth>0?(h.wordWrap=!0,h.width=this.iTextWidth):h.wordWrap=!1,h.alpha=s/100,h.rotation=u,h.scale(r,o),m.x=-1,m.y=-1}else h=m.txt;if(this.drawrect[0]=t,this.drawrect[1]=e,this.drawrect[2]=t+h.textWidth,this.drawrect[3]=e+h.textHeight,m.x!=t||m.y!=e)d=0==l||-1==l?0:-2==l?h.textWidth/2:-3==l?h.textWidth:l-t,c=0==f||-1==f?0:-2==f?h.textHeight/2:-3==f?h.textHeight:f-e,h.pivot(d,c),h.x=t,h.y=e,m.x=t,m.y=e;if(this.bClip){var g=this.FindFreeSprite();g.graphics.clear(),g.pos(this.iClipX,this.iClipY),g.rotation=0,g.alpha=1,g.scale(1,1),g.scrollRect=new Laya.Rectangle(this.iClipX,this.iClipY,this.iClipW,this.iClipH),this.view_sprite.addChild(g),g.addChild(h),this.clip_sprites[this.iClipSpriteCount++]=g}else this.view_sprite.addChild(h);return h.textWidth}}},{key:"DrawTextEx22",value:function(t,e,i,a,n,s,r,o,u,l,f){if(null!=i&&!(t>640||e>Laya.stage.height)){var h,d,c=this.FindFreeText();if(this.bClip){var m=this.FindFreeSprite();m.graphics.clear(),m.pos(this.iClipX,this.iClipY),m.rotation=0,m.alpha=1,m.scale(1,1),m.scrollRect=new Laya.Rectangle(this.iClipX,this.iClipY,this.iClipW,this.iClipH),this.view_sprite.addChild(m),m.addChild(c),this.clip_sprites[this.iClipSpriteCount++]=m}else this.view_sprite.addChild(c);c.text=i,c.color=this.c_to_c(a),c.fontSize=n,c.width=c.textWidth,c.height=c.textHeight,this.iTextWidth>0?(c.wordWrap=!0,c.width=this.iTextWidth):c.wordWrap=!1,h=-1==l?0:-2==l?c.textWidth/2:-3==l?c.textWidth:l-t,d=-1==f?0:-2==f?c.textHeight/2:-3==f?c.textHeight:f-e,c.pivot(h,d),c.alpha=s/100,c.rotation=u,c.scale(r,o),c.x=t,c.y=e}}},{key:"DrawCircle",value:function(t,e,i,a,n){null==n&&(n=1);var s=this.FindFreeSprite();this.view_sprite.addChild(s),s.graphics.clear(),s.graphics.drawCircle(t,e,i,null,this.c_to_c(a),n),s.pivot(0,0),s.rotation=0,s.alpha=100,s.scale(1,1),s.pos(0,0)}},{key:"FillCircle",value:function(t,e,i,a,n){if(!(t-i>640||e-i>Laya.stage.height||t+i<0||e+i<0)){if(this.bClip){if(t-i>this.iClipX+this.iClipW)return;if(e-i>this.iClipY+this.iClipH)return;if(t+i<this.iClipX)return;if(e+i<this.iClipY)return}null==n&&(n=1);var s=this.FindFreeSprite();this.view_sprite.addChild(s),s.graphics.clear(),s.graphics.drawCircle(t,e,i,this.c_to_c(a),null,n),s.pivot(0,0),s.rotation=0,s.alpha=100,s.scale(1,1),s.pos(0,0)}}},{key:"DrawRect",value:function(t,e,i,a,n,s){null==s&&(s=1);var r=this.FindFreeSprite();if(this.bClip){var o=this.FindFreeSprite();o.graphics.clear(),o.pos(this.iClipX,this.iClipY),o.rotation=0,o.alpha=1,o.scale(1,1),o.scrollRect=new Laya.Rectangle(this.iClipX,this.iClipY,this.iClipW,this.iClipH),this.view_sprite.addChild(o),o.addChild(r),this.clip_sprites[this.iClipSpriteCount++]=o}else this.view_sprite.addChild(r);r.graphics.clear(),r.graphics.drawRect(t,e,i,a,null,this.c_to_c(n),s),r.pivot(0,0),r.rotation=0,r.alpha=100,r.scale(1,1),r.pos(0,0)}},{key:"FillRect",value:function(t,e,i,a,n,s,r){if(!(i<=0||a<=0)){null==s&&(s=1),null==r&&(r=100);var o=this.FindFreeSprite();if(this.bClip){var u=this.FindFreeSprite();u.graphics.clear(),u.pos(this.iClipX,this.iClipY),u.rotation=0,u.alpha=1,u.scale(1,1),u.scrollRect=new Laya.Rectangle(this.iClipX,this.iClipY,this.iClipW,this.iClipH),this.view_sprite.addChild(u),u.addChild(o),this.clip_sprites[this.iClipSpriteCount++]=u}else this.view_sprite.addChild(o);o.graphics.clear(),o.graphics.drawRect(t,e,i,a,this.c_to_c(n),this.c_to_c(n),s),o.pivot(0,0),o.rotation=0,o.alpha=r/100,o.scale(1,1),o.pos(0,0)}}},{key:"DrawLine",value:function(t,e,i,a,n,s){null==s&&(s=1);var r=this.FindFreeSprite();this.view_sprite.addChild(r),r.graphics.clear(),r.graphics.drawLine(t,e,i,a,n,s),r.pivot(0,0),r.rotation=0,r.alpha=1,r.scale(1,1),r.pos(0,0)}}]),M2DFast}();i.default=f,f.pm2f=null,f.xm3f=null,f.gi=function(){return null==f.pm2f&&(f.pm2f=new f,f.xm3f=f.pm2f),f.pm2f},f.MAXIMAGECOUNT=2500},{"../../config/XDefine":7}],28:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../config/XDefine")),_interopRequireDefault(t("./M2DFast")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function M3DFast(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,M3DFast),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(M3DFast.__proto__||Object.getPrototypeOf(M3DFast)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(M3DFast,n.default),a(M3DFast,[{key:"LoadFromFile",value:function(t,e,i){return this.LoadImage("res/"+t,i)}},{key:"DrawImageEx",value:function(t,e,i,a,n,s,r,o,u,l,f,h,d,c){this._DrawImageEx(e,i,a,n,s,r,o,u,l,f,h,d,c)}},{key:"SetViewClip",value:function(t,e,i,a){this._SetViewClip(t,e,i-t,a-e)}},{key:"FillRect_2D",value:function(t,e,i,a,n){var s=(4278190080&n)>>24;s<0&&(s+=256),this.FillRect(t,e,i-t,a-e,16777215&n,1,s/2.55)}},{key:"DrawTextEx",value:function(t,e,i,a,n,s,r,o,u,l,f){this._DrawTextEx(t,e,i,16777215&a,n,s,r,o,u,l,f)}},{key:"DrawText",value:function(t,e,i,a){this.DrawTextEx(t,e,i,a,30,101,1,1,0,0,0)}},{key:"DrawText_2",value:function(t,e,i,a,n,s,r,o,u,l,f,h,d){this.DrawTextEx(t+2,e+2,i,d,n,s,r,o,u,l,f),this.DrawTextEx(t,e,i,a,n,s,r,o,u,l,f)}},{key:"DrawRect_2D",value:function(t,e,i,a,n){this.DrawRect(t,e,i-t,a-e,16777215&n,1)}},{key:"GetTextWidth",value:function(t,e){return this.TextWidth(t,e)}},{key:"GetTextHeight",value:function(){return this.iTextHeight}},{key:"CheckImageLoaded",value:function(){for(var t=0,e=0,i=0;i<n.default.MAXIMAGECOUNT;i++)this.m_ImageList[i].bUseing&&(t++,this.m_ImageList[i].bLoaded&&e++);t!=e&&this.DrawTextEx22(Laya.stage.width/2,Laya.stage.height,t+"/"+e,4294967295,30,101,1,1,0,-2,-3)}}]),M3DFast}();i.default=s,s.pm3f=null,s.gi=function(){return null==s.pm3f&&(s.pm3f=new s),s.pm3f}},{"../../config/XDefine":7,"./M2DFast":27}],29:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("./_VERTEX"),r=(a=s)&&a.__esModule?a:{default:a};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function M3DMath(){_classCallCheck(this,M3DMath),this.vTmpVertex=new r.default}return n(M3DMath,[{key:"GetLineEquation",value:function(t,e,i){return e.x==i.x?(t.bFixedx=!0,t.x=e.x):t.bFixedx=!1,e.y==i.y?(t.bFixedy=!0,t.y=e.y):t.bFixedy=!1,e.z==i.z?(t.bFixedz=!0,t.z=e.z):t.bFixedz=!1,t.bFixedy?t.a=9999999:t.a=(e.x-i.x)/(e.y-i.y),t.b=e.x-t.a*e.y,t.bFixedz?t.c=9999999:t.c=(e.y-i.y)/(e.z-i.z),t.d=e.y-t.c*e.z,!0}},{key:"GetVertexInLine",value:function(t,e,i,a){switch(i){case 0:case"x":case"X":if(e.bFixedx)return!1;t.x=a,t.y=(t.x-e.b)/e.a,t.z=(t.y-e.d)/e.c;break;case 1:case"y":case"Y":if(e.bFixedy)return!1;t.y=a,t.x=e.a*t.y+e.b,t.z=(t.y-e.d)/e.c;break;case 2:case"z":case"Z":if(e.bFixedz)return!1;t.z=a,t.y=e.c*t.z+e.d,t.x=e.a*t.y+e.b}return e.bFixedx&&(t.x=e.x),e.bFixedy&&(t.y=e.y),e.bFixedz&&(t.z=e.z),!0}},{key:"GetLineIntersect",value:function(t,e,i){return e.bFixedx?this.GetVertexInLine(t,i,"x",e.x):e.bFixedy?this.GetVertexInLine(t,i,"y",e.y):e.bFixedz?this.GetVertexInLine(t,i,"z",e.z):i.bFixedx?this.GetVertexInLine(t,e,"x",i.x):i.bFixedy?this.GetVertexInLine(t,e,"y",i.y):i.bFixedz?this.GetVertexInLine(t,e,"z",i.z):(t.y=(i.b-e.b)/(e.a-i.a),t.x=e.a+t.y+e.b,t.z=(t.y-e.d)/e.c,!0)}},{key:"InsertValue",value:function(t,e,i,a,n){t.x=e.x+(i.x-e.x)*a/n,t.y=e.y+(i.y-e.y)*a/n,t.z=e.z+(i.z-e.z)*a/n}},{key:"GetAngleZ",value:function(t,e){var i;return this.vTmpVertex.x=t.x-e.x,this.vTmpVertex.y=t.y-e.y,this.vTmpVertex.z=t.z-e.z,i=Math.atan(this.vTmpVertex.y/this.vTmpVertex.x),this.vTmpVertex.x<0&&(i+=M3DMath.PI),i}},{key:"GetVertexDistance",value:function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))}},{key:"RotationAngle",value:function(t,e,i){for(var a;e>2*M3DMath.PI;)e-=2*M3DMath.PI;for(;e<0;)e+=2*M3DMath.PI;for(;i>2*M3DMath.PI;)i-=2*M3DMath.PI;for(;i<0;)i+=2*M3DMath.PI;return e>i?(a=e-i)<M3DMath.PI?a<t?-a:-t:2*M3DMath.PI-a<t?a:t:(a=i-e)<M3DMath.PI?a<t?a:t:2*M3DMath.PI-a<t?-a:-t}},{key:"RotationVertex_2D",value:function(t,e,i){var a,n,s,r;n=t.x-e.x,s=t.y-e.y,0==n&&(n=1e-7),r=Math.atan(s/n),n<0&&(r+=M3DMath.PI),r+=M3DMath.PI*i/180,a=Math.sqrt(n*n+s*s),t.x=Math.cos(r)*a+e.x,t.y=Math.sin(r)*a+e.y}},{key:"GetAngleXY",value:function(t,e){var i,a,n;return i=t.x-e.x,a=t.y-e.y,0==i&&(i=1e-7),n=Math.atan(a/i),i<0&&(n+=M3DMath.PI),180*n/M3DMath.PI}},{key:"GetAngleXY",value:function(t,e,i,a){var n,s,r;return s=e-a,0==(n=t-i)&&(n=1e-7),r=Math.atan(s/n),n<0&&(r+=M3DMath.PI),180*r/M3DMath.PI}}]),M3DMath}();i.default=o,o.PI=3.1415926,o.m=new o,o.GetAngleXZ=function(t,e){var i,a,n;return i=t.x-e.x,a=t.z-e.z,0==i&&(i=1e-7),n=Math.atan(a/i),i<0&&(n+=o.PI),n<0&&(n+=2*o.PI),180*n/o.PI},o.GetAngleY=function(t,e){var i;return 0==(i=t.LengthTo(e))&&(i=1e-7),180*Math.asin((t.y-e.y)/i)/o.PI},o.xmax=function(t,e){return t>e?t:e},o.xmin=function(t,e){return t<e?t:e},o.intersect=function(t,e,i,a,n,s,r,u){return(t>i?t:i)>=(n<r?n:r)&&(n>r?n:r)>=(t<i?t:i)&&(e>a?e:a)>=(s<u?s:u)&&(s>u?s:u)>=(e<a?e:a)&&o.multiply(n,s,i,a,t,e)*o.multiply(i,a,r,u,t,e)>=0&&o.multiply(t,e,r,u,n,s)*o.multiply(r,u,i,a,n,s)>=0},o.multiply=function(t,e,i,a,n,s){return(t-n)*(a-s)-(i-n)*(e-s)}},{"./_VERTEX":32}],30:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=_interopRequireDefault(t("./M3DFast")),r=_interopRequireDefault(t("./AnimaAction")),o=_interopRequireDefault(t("../../config/XDefine")),u=_interopRequireDefault(t("./LoadAnimaRes")),l=_interopRequireDefault(t("../PackageTools"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=function _RESLIST(){_classCallCheck(this,_RESLIST),this.iRid=-1,this.sResName="",this.iLoadStat=0},h=function _BLOCKLIST(){_classCallCheck(this,_BLOCKLIST),this.iCp=0,this.iMx=0,this.iMy=0,this.iSw=0,this.iSh=0,this.iRa=0,this.bFlip=!1},d=function _FRAMELIST(){_classCallCheck(this,_FRAMELIST),this.iFid=0,this.iDelay=0,this.iBlockCount=0,this.blocklist=null},c=function _ANIMALIST(){_classCallCheck(this,_ANIMALIST),this.iAnimaId=0,this.sAnimaName="",this.iOx=0,this.iOy=0,this.iFrameCount=0,this.rect=[0,0,0,0],this.framelist=null},m=function _CUTLIST(){_classCallCheck(this,_CUTLIST),this.iRp=0,this.iX=0,this.iY=0,this.iW=0,this.iH=0},g=function(){function XAnima(){_classCallCheck(this,XAnima),this.pm3f=s.default.gi(),this.iResCount=0,this.reslist=null,this.iAnimaCount=0,this.animalist=null,this.iCutCount=0,this.cutlist=null,this.pathname="",this.bLocal=null}return n(XAnima,[{key:"LoadInitRes",value:function(t){var e,i=0;for(e=0;e<this.iResCount;e++){for(var a=0;a<t.length&&this.reslist[e].sResPath!=t[a];a++);if(a<t.length){if(u.default.iLoadingCount>=u.default.iMaxLoadThread)return i;-1==this.reslist[e].iRid?(this.reslist[e].iRid=s.default.gi().LoadImage(this.reslist[e].sResPath,this.bLocal),u.default.iLoadingCount++):null==s.default.gi().FindImage(this.reslist[e].iRid)?u.default.iLoadingCount++:i++}}return i}},{key:"LoadRes",value:function(){var t;for(t=0;t<this.iResCount;t++){if(u.default.iLoadingCount>=u.default.iMaxLoadThread)return;-1==this.reslist[t].iRid?(this.reslist[t].iRid=s.default.gi().LoadImage(this.reslist[t].sResPath,this.bLocal),this.reslist[t].iLoadStat=1,u.default.iLoadingCount++):null==s.default.gi().FindImage(this.reslist[t].iRid)&&u.default.iLoadingCount++}}},{key:"GetResLoadedCount",value:function(){var t,e=0;for(t=0;t<this.iResCount;t++)-1!=this.reslist[t].iRid&&null!=s.default.gi().FindImage(this.reslist[t].iRid)&&e++;return e}},{key:"IsResLoadedFinish",value:function(){return this.GetResLoadedCount()==this.iResCount}},{key:"LoadAnima_fullpath",value:function(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.bLocal=i,this.pathname=t,XAnima._PUT(this.pathname,this),this.GetAnimaData(this.pathname,this,0),this.load_finished=a,this.bLoadSuccess=!1,!0}},{key:"GetAnimaData",value:function(t,e,i,a){if(null==a)return i>0&&o.default.sop("retry "+i+","+t),void Laya.loader.load(o.default.BASE_URL+t+"/xa.ax",Laya.Handler.create(e,e.GetAnimaData,[t,e,i+1]),null,Laya.Loader.BUFFER);var n=l.default.gi();n.GetData3(a),e._LoadAnima(t,n,e.bLocal),null!=this.load_finished&&this.load_finished(),this.bLoadSuccess=!0}},{key:"_LoadAnima",value:function(t,e,i){var a,n,s;this.bLocal=i,this.pathname=t;var r,o,l,g,_,p,b=e.GetNextByte();for(e.GetNextByte(),this.iResCount=e.GetNextShort(),this.reslist=new Array(this.iResCount),a=0;a<this.iResCount;a++)this.reslist[a]=new f,this.reslist[a].iRid=e.GetNextShort(),this.reslist[a].sResName=e.GetNextString(),this.reslist[a].sResPath=this.pathname+"/"+this.reslist[a].sResName,this.reslist[a].iRid=-1,this.reslist[a].bNotUsed=!0;for(this.iAnimaCount=e.GetNextShort(),this.animalist=new Array(this.iAnimaCount),a=0;a<this.iAnimaCount;a++)for(this.animalist[a]=new c,this.animalist[a].iAnimaId=e.GetNextShort(),this.animalist[a].sAnimaName=e.GetNextString(),e.GetNextString(),this.animalist[a].iOx=e.GetNextShort(),this.animalist[a].iOy=e.GetNextShort(),e.GetNextShort(),e.GetNextShort(),this.animalist[a].iFrameCount=e.GetNextShort(),this.animalist[a].framelist=new Array(this.animalist[a].iFrameCount),n=0;n<this.animalist[a].iFrameCount;n++)for(this.animalist[a].framelist[n]=new d,this.animalist[a].framelist[n].iFid=e.GetNextShort(),this.animalist[a].framelist[n].iDelay=e.GetNextShort(),this.animalist[a].framelist[n].iBlockCount=e.GetNextShort(),this.animalist[a].framelist[n].blocklist=new Array(this.animalist[a].framelist[n].iBlockCount),s=0;s<this.animalist[a].framelist[n].iBlockCount;s++)this.animalist[a].framelist[n].blocklist[s]=new h,this.animalist[a].framelist[n].blocklist[s].iCp=e.GetNextShort(),10==b?(this.animalist[a].framelist[n].blocklist[s].iMx=e.GetNextShort(),this.animalist[a].framelist[n].blocklist[s].iMy=e.GetNextShort(),this.animalist[a].framelist[n].blocklist[s].iSw=e.GetNextShort(),this.animalist[a].framelist[n].blocklist[s].iSh=e.GetNextShort(),this.animalist[a].framelist[n].blocklist[s].iRa=e.GetNextShort(),this.animalist[a].framelist[n].blocklist[s].fAlpha=e.GetNextShort()/100,4096==(4096&this.animalist[a].framelist[n].blocklist[s].iRa)&&(this.animalist[a].framelist[n].blocklist[s].bFlip=!0,this.animalist[a].framelist[n].blocklist[s].iRa-=4096)):(this.animalist[a].framelist[n].blocklist[s].iMx=e.GetNextFloat(),this.animalist[a].framelist[n].blocklist[s].iMy=e.GetNextFloat(),this.animalist[a].framelist[n].blocklist[s].iSw=e.GetNextFloat(),this.animalist[a].framelist[n].blocklist[s].iSh=e.GetNextFloat(),this.animalist[a].framelist[n].blocklist[s].iRa=e.GetNextFloat(),this.animalist[a].framelist[n].blocklist[s].fAlpha=e.GetNextShort()/100,1==e.GetNextByte()&&(this.animalist[a].framelist[n].blocklist[s].bFlip=!0));for(this.iCutCount=e.GetNextShort(),this.cutlist=new Array(this.iCutCount),a=0;a<this.iCutCount;a++)this.cutlist[a]=new m,this.cutlist[a].iRp=e.GetNextShort(),this.cutlist[a].iX=e.GetNextShort(),this.cutlist[a].iY=e.GetNextShort(),this.cutlist[a].iW=e.GetNextShort(),this.cutlist[a].iH=e.GetNextShort();for(r=0;r<this.iAnimaCount;r++)for(this.animalist[r].rect[0]=99999999,this.animalist[r].rect[1]=99999999,this.animalist[r].rect[2]=-99999999,this.animalist[r].rect[3]=-99999999,a=0;a<this.animalist[r].iFrameCount;a++)for(n=0;n<this.animalist[r].framelist[a].iBlockCount;n++)o=this.animalist[r].framelist[a].blocklist[n].iCp,l=this.animalist[r].framelist[a].blocklist[n].iMx,g=this.animalist[r].framelist[a].blocklist[n].iMy,_=parseInt(.01*this.animalist[r].framelist[a].blocklist[n].iSw*this.cutlist[o].iW),p=parseInt(.01*this.animalist[r].framelist[a].blocklist[n].iSh*this.cutlist[o].iH),0==a&&0==n?this.animalist[r].rect[0]=l:l<this.animalist[r].rect[0]&&(this.animalist[r].rect[0]=l),0==a&&0==n?this.animalist[r].rect[2]=l+_:l+_>this.animalist[r].rect[2]&&(this.animalist[r].rect[2]=l+_),0==a&&0==n?this.animalist[r].rect[1]=g:g<this.animalist[r].rect[1]&&(this.animalist[r].rect[1]=g),0==a&&0==n?this.animalist[r].rect[3]=g+p:g+p>this.animalist[r].rect[3]&&(this.animalist[r].rect[3]=g+p);u.default.gi().PushAnima(this)}},{key:"iAnimaX",value:function(t){return this.animalist[t.iAnimaPoint].rect[0]}},{key:"iAnimaY",value:function(t){return this.animalist[t.iAnimaPoint].rect[1]}},{key:"iAnimaH",value:function(t){return this.animalist[t.iAnimaPoint].rect[3]-this.animalist[t.iAnimaPoint].rect[1]}},{key:"iAnimaW",value:function(t){return this.animalist[t.iAnimaPoint].rect[2]-this.animalist[t.iAnimaPoint].rect[0]}},{key:"InitAnimaWithName",value:function(t,e){var i;for(null==this.aaa&&(this.aaa=new r.default),this.aaa.iAnimaPoint=-1,this.aaa.pani=this,i=0;i<this.iAnimaCount;i++)if(this.animalist[i].sAnimaName==t)return this.aaa.iAnimaPoint=i,this.aaa.iFrame=0,this.aaa.iDelay=0,this.aaa.iRect[0]=this.animalist[i].rect[0],this.aaa.iRect[1]=this.animalist[i].rect[1],this.aaa.iRect[2]=this.animalist[i].rect[2],this.aaa.iRect[3]=this.animalist[i].rect[3],null==e&&(e=new r.default),e.copyfrom(this.aaa),e;return this.aaa.iDelay=-1,o.default.sop("cant find anima "+t+" from "+this.pathname),null==e&&(e=new r.default),e.pani=this,this.aaa}},{key:"DrawAnima",value:function(t,e,i,n){"object"!=(void 0===i?"undefined":a(i))?(null==this.aaa&&(this.aaa=new r.default),this.InitAnimaWithName(i),this.DrawAnimaEx_ByOffset(t,e,this.aaa.iAnimaPoint,n,101,1,1,0,0,0)):this.DrawAnimaEx_ByOffset(t,e,i.iAnimaPoint,i.iFrame,101,1,1,0,0,0)}},{key:"DrawAnima_aa",value:function(t,e,i,a){"string"!=typeof i?"number"!=typeof i?this.DrawAnimaEx_ByOffset(t,e,i.iAnimaPoint,i.iFrame,101,1,1,0,0,0):this.DrawAnimaEx_ByOffset(t,e,i,a,101,1,1,0,0,0):this.DrawAnima(t,e,i,a)}},{key:"DrawAnimaEx",value:function(t,e,i,n,s,o,u,l,f,h){"object"!=(void 0===i?"undefined":a(i))?(null==this.aaa&&(this.aaa=new r.default),this.InitAnimaWithName(i),this.DrawAnimaEx_ByOffset(t,e,this.aaa.iAnimaPoint,n,s,o,u,l,f,h)):this.DrawAnimaEx_ByOffset(t,e,i.iAnimaPoint,i.iFrame,n,s,o,u,l,f)}},{key:"DrawAnimaEx_ByName",value:function(t,e,i,a,n,s,o,u,l,f,h){null==this.aaa&&(this.aaa=new r.default),this.InitAnimaWithName(i),this.DrawAnimaEx_ByOffset(t,e,this.aaa.iAnimaPoint,a,n,s,o,u,l,f,h)}},{key:"DrawAnimaEx_ByOffset",value:function(t,e,i,a,n,r,o,u,l,f,h){var d,c,m,g,_,p,b,D;if(a=parseInt(a),h=h||!1,4096==(4096&u)&&(h=!h,u-=4096),!(i<0||i>this.iAnimaCount||a<0||this.animalist[i].iFrameCount<=0))for(a%=this.animalist[i].iFrameCount,d=0;d<this.animalist[i].framelist[a].iBlockCount;d++)c=this.animalist[i].framelist[a].blocklist[d].iCp,D=h,this.animalist[i].framelist[a].blocklist[d].bFlip&&(D=!D),_=.01*this.animalist[i].framelist[a].blocklist[d].iSw*r,p=.01*this.animalist[i].framelist[a].blocklist[d].iSh*o,m=-2==l?t+this.animalist[i].framelist[a].blocklist[d].iMx:(t+this.animalist[i].framelist[a].blocklist[d].iMx+(D?1:0)*this.cutlist[c].iW)/_,g=-2==f?e+this.animalist[i].framelist[a].blocklist[d].iMy:(e+this.animalist[i].framelist[a].blocklist[d].iMy)/p,D&&(m=-m),b=this.animalist[i].framelist[a].blocklist[d].iRa+u,-1!=this.reslist[this.cutlist[c].iRp].iRid?(s.default.gi()._DrawImageEx(m,g,this.reslist[this.cutlist[c].iRp].iRid,this.cutlist[c].iX,this.cutlist[c].iY,this.cutlist[c].iW,this.cutlist[c].iH,n*this.animalist[i].framelist[a].blocklist[d].fAlpha,_,p,b,0==b||l>0?l:-2,0==b||f>0?f:-2,D),this.reslist[this.cutlist[c].iRp].bNotUsed&&(this.reslist[this.cutlist[c].iRp].bNotUsed=!1)):this.reslist[this.cutlist[c].iRp].iRid=s.default.gi().LoadImage(this.reslist[this.cutlist[c].iRp].sResPath,this.bLocal)}},{key:"bInAnima",value:function(t,e,i,a,n){if(null==t)return!1;if(t.iAnimaPoint<0||t.iAnimaPoint>=this.iAnimaCount)return!1;var s=this.animalist[t.iAnimaPoint].rect[0],r=this.animalist[t.iAnimaPoint].rect[1],o=this.animalist[t.iAnimaPoint].rect[2],u=this.animalist[t.iAnimaPoint].rect[3];return a>e+s&&a<e+o&&n>i+r&&n<i+u}},{key:"RotationVertex_2D2",value:function(t,e,i,a,n){var s,r,o,u;o=e-a,0==(r=t-i)&&(r=1e-7),u=Math.atan(o/r),r<0&&(u+=Math.PI),u+=Math.PI*n/180,s=Math.sqrt(r*r+o*o),this.rdx=Math.cos(u)*s+i,this.rdy=Math.sin(u)*s+a}},{key:"NextFrame",value:function(t){return t.iDelay++,!(t.iAnimaPoint<0||t.iAnimaPoint>=this.iAnimaCount)&&((t.iFrame<0||t.iFrame>=this.animalist[t.iAnimaPoint].iFrameCount)&&(t.iFrame=0,t.iDelay=0),0!=this.animalist[t.iAnimaPoint].iFrameCount&&(t.iDelay>this.animalist[t.iAnimaPoint].framelist[t.iFrame].iDelay&&(t.iDelay=0,t.iFrame++,t.iFrame>=this.animalist[t.iAnimaPoint].iFrameCount)&&(t.iFrame=0,!0)))}},{key:"SetFrame",value:function(t,e){var i,a,n,s=0,r=this.animalist[t.iAnimaPoint];for(i=0;i<r.iFrameCount;i++)s+=r.framelist[i].iDelay+1;if(0!=s)for(a=e%s,n=0,i=0;i<r.iFrameCount;i++)if((n+=r.framelist[i].iDelay+1)>=a)return void(t.iFrame=i)}}]),XAnima}();i.default=g,g._ALL=new Array,g._GET=function(t){for(var e=0;e<g._ALL.length;e++)if(g._ALL[e].fn==t)return g._ALL[e].ani;return null},g._PUT=function(t,e){var i=g._ALL.length;g._ALL[i]=new Object,g._ALL[i].fn=t,g._ALL[i].ani=e}},{"../../config/XDefine":7,"../PackageTools":9,"./AnimaAction":25,"./LoadAnimaRes":26,"./M3DFast":28}],31:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function _POINT(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_POINT),this.x=0,this.y=0}return a(_POINT,[{key:"To",value:function(t,e){this.x=t,this.y=e}},{key:"copyfrom",value:function(t){this.x=t.x,this.y=t.y}}]),_POINT}();i.default=n},{}],32:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function _VERTEX(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_VERTEX),this.x=0,this.y=0,this.z=0}return a(_VERTEX,[{key:"copyfrom",value:function(t){x=t.x,y=t.y,z=t.z}},{key:"toString",value:function(){return"x="+x+",y="+y+",z="+z}},{key:"To",value:function(t,e,i){x=t,y=e,z=i}},{key:"Move",value:function(t){x+=t.x,y+=t.y,z+=t.z}},{key:"Move",value:function(t,e,i){x+=t,y+=e,z+=i}},{key:"scale",value:function(t){x*=t,y*=t,z*=t}},{key:"Rotate",value:function(t,e){var i,a;switch(e=e*Math.PI/180,t){case"0":case"x":case"X":i=Math.sqrt(y*y+z*z),0==y&&(y=1e-7),a=Math.atan(z/y),y<0&&(a+=Math.PI),a+=e,z=Math.sin(a)*i,y=Math.cos(a)*i;break;case"1":case"y":case"Y":i=Math.sqrt(z*z+x*x),0==x&&(x=1e-7),a=Math.atan(z/x),x<0&&(a+=Math.PI),a+=e,z=Math.sin(a)*i,x=Math.cos(a)*i;break;case"2":case"z":case"Z":i=Math.sqrt(y*y+x*x),0==x&&(x=1e-7),a=Math.atan(y/x),x<0&&(a+=Math.PI),a+=e,y=Math.sin(a)*i,x=Math.cos(a)*i}}},{key:"LengthTo",value:function(t){return Math.sqrt((t.x-x)*(t.x-x)+(t.y-y)*(t.y-y)+(t.z-z)*(t.z-z))}},{key:"LengthTo",value:function(t,e,i){return Math.sqrt((t-x)*(t-x)+(e-y)*(e-y)+(i-z)*(i-z))}}]),_VERTEX}();i.default=n},{}],33:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../config/XDefine")),s=_interopRequireDefault(t("../PackageTools")),r=_interopRequireDefault(t("../../engtst/mgm/GmPlay")),o=_interopRequireDefault(t("../../engtst/mgm/XStat")),u=_interopRequireDefault(t("../../engtst/mgm/GmProtocol")),l=_interopRequireDefault(t("./_MESSAGEBUFFER"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(){function NetFast(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NetFast),this.socket=new Laya.Socket,this.socket.on(Laya.Event.OPEN,this,this.onConnect),this.socket.on(Laya.Event.MESSAGE,this,this.onReceive),this.socket.on(Laya.Event.CLOSE,this,this.onClose),this.socket.on(Laya.Event.ERROR,this,this.onError),this.sConnectUrl=t,this.socket.connectByUrl(this.sConnectUrl),this.bConnected=!1,this.pls=new s.default(10240),this.pls_package=new s.default(10240),this.pls_ext=new s.default(10240),this.msg=new l.default,this.iLastSendMs=n.default.get_ms(),this.bAllow=!0,this.bReconnect=!1,this.byte=new Laya.Byte,this.bWaitingClose=!1,this.iReconnectDelay=0,this.iReTryCount=0}return a(NetFast,[{key:"onConnect",value:function(){this.bConnected=!0,n.default.sop("onConnect")}},{key:"onReceive",value:function(t){this.byte.clear(),this.byte.writeArrayBuffer(t),this.byte.pos=0;for(var e=0;e<this.byte.length;e++){var i=this.byte.getByte();i<0&&(i=256+i),this.pls_package.databuf[e]=i}this.pls_package.iLength=this.byte.length,this.pls_package.iOffset=0,this.AnalyzePackage()}},{key:"onClose",value:function(){n.default.sop("onClose"),this.bConnected=!1,this.bWaitingClose=!1}},{key:"onError",value:function(){n.default.sop("onError"),this.socket.close(),this.bConnected=!1}},{key:"Init1",value:function(){this.pls_ext.iOffset=0,this.pls_ext.InsertInt(0),this.pls_ext.InsertInt(0),this.pls_ext.InsertInt(0),this.InQueue(500,this.pls_ext.iOffset,this.pls_ext.databuf)}},{key:"InQueue",value:function(t,e,i){return n.default.sop("---send "+t+" : "+e),this.pls.iOffset=0,this.pls.InsertShort(t),n.default.arraycopy(i,0,this.pls.databuf,this.pls.iOffset,e),this.msg.InSendQueue(this.pls.iOffset+e,this.pls.databuf)}},{key:"GetQueue",value:function(){return this.msg.OutRecvQueue()}},{key:"CreatePackage",value:function(){var t=0;for(o.default.gi().bGameing()&&u.default.gi().s_UploadMyPos(),this.pls_package.iOffset=10,this.msg.bStartMessage?(this.pls_package.InsertData(this.msg.startmessage.data,this.msg.startmessage.iSize),t++):this.msg.iSendTail-this.msg.iSendHead<=0&&this.Init1();this.msg.OutSendQueue()&&(this.pls_package.InsertData(this.msg.sendout.data,this.msg.sendout.iSize),t++,!(this.pls_package.iOffset>=1024)););this.msg.bEndMessage&&(this.pls_package.InsertData(this.msg.endmessage.data,this.msg.endmessage.iSize),t++),this.pls_package.databuf[this.pls_package.iOffset++]="E".charCodeAt(0),this.pls_package.databuf[this.pls_package.iOffset++]="O".charCodeAt(0),this.pls_package.databuf[this.pls_package.iOffset++]="F".charCodeAt(0),this.pls_package.databuf[0]="s".charCodeAt(0),this.pls_package.databuf[1]="o".charCodeAt(0),this.pls_package.databuf[2]="s".charCodeAt(0),this.pls_package.databuf[3]=0,this.pls_package.databuf[4]=0,this.pls_package.databuf[5]=0,this.pls_package.databuf[6]=0,this.pls_package.databuf[7]=t,this.pls_package.databuf[8]=this.pls_package.iOffset>>8&255,this.pls_package.databuf[9]=255&this.pls_package.iOffset}},{key:"Sleep",value:function(t){Thread.sleep(t)}},{key:"send",value:function(){for(var t=0;t<this.pls_package.iOffset;t++)this.socket.output.writeByte(this.pls_package.databuf[t]);return this.socket.flush(),!0}},{key:"recv",value:function(){var t;for(this.pls_package.iLength=0;!((t=m_is.read(this.pls_package.databuf,this.pls_package.iLength,2048))<=0);){if(this.pls_package.iLength+=t,"E"==this.pls_package.databuf[this.pls_package.iLength-3]&&"O"==this.pls_package.databuf[this.pls_package.iLength-2]&&"F"==this.pls_package.databuf[this.pls_package.iLength-1])return this.pls_package.iOffset=0,!0;if(iLastConnectDelay>1e3){this.bReconnect=!0;break}}return!1}},{key:"AnalyzePackage",value:function(){var t,e;if(this.pls_package.iLength<13||this.pls_package.iLength>=4096)return-1;if(e=this.pls_package.databuf[8]<<8&65280|255&this.pls_package.databuf[9],this.pls_package.iLength<e||e<13||e>=4096)return-1;for(t=this.pls_package.databuf[7],this.pls_package.iOffset=10;t>0;)this.pls_package.GetNextData(),this.msg.InRecvQueue(this.pls_package.obi,this.pls_package.obd),t--;return e}},{key:"ResetSever",value:function(t){this.sConnectUrl!=t&&(this.sConnectUrl=t,n.default.sop("ResetSever:"+t),this.msg.ResetQueue(),this.bReconnect=!0,this.socket.close(),this.bWaitingClose=!0)}},{key:"NetLogic",value:function(){this.bAllow&&(this.bWaitingClose||(this.bConnected?this.iLastSendMs+600>n.default.get_ms()||(this.iLastSendMs=n.default.get_ms(),this.CreatePackage(),this.send()):this.bReconnect?(this.socket=new Laya.Socket,this.socket.on(Laya.Event.OPEN,this,this.onConnect),this.socket.on(Laya.Event.MESSAGE,this,this.onReceive),this.socket.on(Laya.Event.CLOSE,this,this.onClose),this.socket.on(Laya.Event.ERROR,this,this.onError),this.socket.connectByUrl(this.sConnectUrl),n.default.sop("do connect"),this.bReconnect=!1):this.iReTryCount<10&&(this.iReconnectDelay++,this.iReconnectDelay>=60&&(this.iReconnectDelay=0,this.bReconnect=!0,this.iReTryCount++))))}},{key:"NetBusy",value:function(){return 3}},{key:"InitClient",value:function(t,e){return r.default.sop("connect:"+t+":"+e),sock=new Socket(t,e),m_os=sock.getOutputStream(),m_is=sock.getInputStream(),!0}},{key:"CloseClient",value:function(){null!=m_os&&m_os.close(),m_os=null,null!=m_is&&m_is.close(),m_is=null,null!=sock&&sock.close(),sock=null}}]),NetFast}();i.default=f},{"../../config/XDefine":7,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/GmProtocol":66,"../../engtst/mgm/XStat":70,"../PackageTools":9,"./_MESSAGEBUFFER":35}],34:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("../../config/XDefine"),r=(a=s)&&a.__esModule?a:{default:a};var o=function(){function _AMESSAGE(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_AMESSAGE),this.MAXMESSAGESIZE=2048,this.iSize,this.data=new Uint8Array(this.MAXMESSAGESIZE)}return n(_AMESSAGE,[{key:"copyfrom",value:function(t){this.iSize=t.iSize,r.default.arraycopy(t.data,0,this.data,0,this.iSize)}}]),_AMESSAGE}();i.default=o},{"../../config/XDefine":7}],35:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("./_AMESSAGE")),s=_interopRequireDefault(t("../../config/XDefine"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(){function _MESSAGEBUFFER(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_MESSAGEBUFFER),this.MAXRECVBUFFERCOUNT=64,this.MAXSENDBUFFERCOUNT=64,this.iRecvHead=0,this.iRecvTail=0,this.recv=new Array(this.MAXRECVBUFFERCOUNT),t=0;t<this.MAXRECVBUFFERCOUNT;t++)this.recv[t]=new n.default;for(this.recvout=new n.default,this.iSendHead=0,this.iSendTail=0,this.send=new Array(this.MAXSENDBUFFERCOUNT),t=0;t<this.MAXSENDBUFFERCOUNT;t++)this.send[t]=new n.default;this.sendout=new n.default,this.bStartMessage=!1,this.bEndMessage=!1,this.startmessage=new n.default,this.endmessage=new n.default}return a(_MESSAGEBUFFER,[{key:"ResetQueue",value:function(){this.iRecvHead=0,this.iRecvTail=0,this.iSendHead=0,this.iSendTail=0}},{key:"SetStartMessage",value:function(t,e){this.startmessage.iSize=t,s.default.arraycopy(e,0,this.startmessage.data,0,t),this.bStartMessage=!0}},{key:"SetEndMessage",value:function(t,e){this.endmessage.iSize=t,s.default.arraycopy(e,0,this.endmessage.data,0,t),this.bEndMessage=!0}},{key:"InSendQueue",value:function(t,e){for(;this.iSendTail-this.iSendHead>=this.MAXSENDBUFFERCOUNT;)return!1;var i=this.iSendTail%this.MAXSENDBUFFERCOUNT;return this.send[i].iSize=t,s.default.arraycopy(e,0,this.send[i].data,0,t),this.iSendTail++,!0}},{key:"OutSendQueue",value:function(){return!(this.iSendTail-this.iSendHead<=0)&&(this.sendout.copyfrom(this.send[this.iSendHead%this.MAXSENDBUFFERCOUNT]),this.iSendHead++,!0)}},{key:"InRecvQueue",value:function(t,e){for(;this.iRecvTail-this.iRecvHead>=this.MAXRECVBUFFERCOUNT;)return!1;var i=this.iRecvTail%this.MAXRECVBUFFERCOUNT;return this.recv[i].iSize=t,s.default.arraycopy(e,0,this.recv[i].data,0,t),this.iRecvTail++,!0}},{key:"OutRecvQueue",value:function(){return!(this.iRecvTail-this.iRecvHead<=0)&&(this.recvout.copyfrom(this.recv[this.iRecvHead%this.MAXRECVBUFFERCOUNT]),this.iRecvHead++,!0)}}]),_MESSAGEBUFFER}();i.default=r},{"../../config/XDefine":7,"./_AMESSAGE":34}],36:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../engtst/mgm/gameing/fast/SystemOperate")),s=(_interopRequireDefault(t("../../engtst/mgm/GmPlay")),_interopRequireDefault(t("../../config/XDefine")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(){function WavFast(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,WavFast),this.bMusicEnabled=!0,this.bPause=!1}return a(WavFast,[{key:"StartWav",value:function(t,e){if(0!=n.default.iSound&&!this.bPause)for(var i=0;i<WavFast._d2.length;i++)WavFast._d2[i]==t&&Laya.SoundManager.playSound(s.default.BASE_URL+"res/datapackage/sound/sound/"+WavFast._d2[i]+".xxx")}},{key:"StartWav_Pet",value:function(t,e){0!=n.default.iSound&&(this.bPause||t<=0||t>=20||17==t||e<0||e>=4||Laya.SoundManager.playSound(s.default.BASE_URL+"res/datapackage/sound/sound/pets/"+parseInt(t/10)+t%10+"/"+WavFast._d1[e]+".xxx"))}},{key:"StartBackMusic",value:function(t,e){this.bMusicEnabled&&(s.default.sop(s.default.BASE_URL+"res/datapackage/sound/music/"+t+".xxx"),WavFast._music_channel=Laya.SoundManager.playMusic(s.default.BASE_URL+"res/datapackage/sound/music/"+t+".xxx"))}},{key:"StopBackMusic",value:function(){null!=WavFast._music_channel&&WavFast._music_channel.stop()}}]),WavFast}();i.default=r,r._d1=["attack","magic","hurt","die"],r._d2=["defence","escape","role0_attack","role0_magic","role0_hurt","role0_die","role1_attack","role1_magic","role1_hurt","role1_die",""],r._music_channel=null,r.MusicContinue=function(){null!=XWavFast._music_channel&&r._music_channel.play()}},{"../../config/XDefine":7,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/gameing/fast/SystemOperate":124}],37:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../engine/BaseClass")),s=_interopRequireDefault(t("../../engine/graphics/M3DFast")),r=(_interopRequireDefault(t("../../engine/xms/anima/XAnimaActionOle")),_interopRequireDefault(t("../../engine/xms/anima/XAnimaOle")),_interopRequireDefault(t("../../engine/xms/control/XmsCAnima"))),o=(_interopRequireDefault(t("../../engine/xms/control/XmsCBaseControl")),_interopRequireDefault(t("../../engine/xms/control/XmsCButton"))),u=_interopRequireDefault(t("../../engine/xms/control/XmsCFrame")),l=_interopRequireDefault(t("../../engine/xms/control/XmsCList")),f=_interopRequireDefault(t("../../engine/xms/control/XmsCOle")),h=_interopRequireDefault(t("../../engine/xms/control/XmsCSlider")),d=_interopRequireDefault(t("../../engine/xms/control/XmsCTab")),c=_interopRequireDefault(t("../../engine/xms/control/XmsCText")),m=(_interopRequireDefault(t("../../engine/xms/control/head/_LISTLINE")),_interopRequireDefault(t("../../engine/xms/control/head/_LISTTITLE")),_interopRequireDefault(t("../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../engine/xms/first/X20_FLOAT")),_interopRequireDefault(t("../../engine/xms/first/X30_WORD")),_interopRequireDefault(t("../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../engine/xms/first/X50_CODE")),_interopRequireDefault(t("../../engine/xms/first/X_FIRST")),_interopRequireDefault(t("../../engine/xms/first/_CLASSARRAY")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),g=_interopRequireDefault(t("../../engtst/mgm/GmProtocol")),_=_interopRequireDefault(t("../../engtst/mgm/XStat")),p=_interopRequireDefault(t("./XmsEngine")),b=_interopRequireDefault(t("../../config/GmConfig"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var D=function(t){function RunFirst(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,RunFirst);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(RunFirst.__proto__||Object.getPrototypeOf(RunFirst)).call(this));return t.bClose=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(RunFirst,n.default),a(RunFirst,[{key:"_Init",value:function(){RunFirst.paaole=p.default.paaole,RunFirst.panimaole=p.default.panimaole,this.pm3f=s.default.gi(),this.pbaseclass=this.prunclass.GetBase(),this.prunclass=this.prunclass.GetCopy(),this.pface=this.prunclass,this.InitBefore(),this.InitMemory(this.pbaseclass.FindFirst("初始化",3)),this.InitMemory(this.prunclass),this.InitAfter()}},{key:"InitBefore",value:function(){}},{key:"InitAfter",value:function(){this.RunCode(this.prunclass.FindCode("初始化后执行"))}},{key:"Draw",value:function(){this._Draw()}},{key:"ProcTouch",value:function(t,e,i){return!!this._ProcTouch(t,e,i)}},{key:"InitMemory",value:function(t){var e,i,a,n;if(10==t.iType&&"唯一处理标识"==t.sName){var s=t;switch(e=s.pback,s.iNumber){case 301:RunFirst.panimaole.LoadOleAnima(e.FindWord("载入到索引").pword,e.FindWord("动画文件").pword);break;case 501:RunFirst.SCRW=e.FindNumber("屏幕宽度").iNumber,RunFirst.SCRH=e.FindNumber("屏幕高度").iNumber,RunFirst.SCRW=b.default.SCRW,RunFirst.SCRH=b.default.SCRH;break;case 101:return e.pobj=new o.default(this.pm3f,e,this),!0;case 102:return e.pobj=new l.default(this.pm3f,e,this),!0;case 103:return e.pobj=new f.default(this.pm3f,e,this),!0;case 104:return e.pobj=new d.default(this.pm3f,e,this),!0;case 105:return e.pobj=new h.default(this.pm3f,e,this),!0;case 201:return e.pobj=new u.default(this.pm3f,e,this),!0;case 202:return e.pobj=new r.default(this.pm3f,e,this),!0;case 203:return e.pobj=new c.default(this.pm3f,e,this),!0}}if(40==t.iType)for(n=(e=t).pca,i=0;i<e.iArray;i++){for(a=n.phead;null!=a&&!this.InitMemory(a);)a=a.pdown;n=n.pnext}return!1}},{key:"_Draw",value:function(){null!=this.pface&&this.DrawFirst(this.pface,0,0)}},{key:"DrawFirst",value:function(t,e,i){var a;if(10==t.iType&&"唯一处理标识"==t.sName){var n=t;switch(a=n.pback,n.iNumber){case 400:return this.Draw_Interface400(a),!0;case 101:return this.Draw_CButton(a.pobj,this.iInterfaceX,this.iInterfaceY),!0;case 102:return this.Draw_CList(a.pobj,this.iInterfaceX,this.iInterfaceY),!0;case 104:return this.Draw_CTab104(a.pobj,this.iInterfaceX,this.iInterfaceY),!0;case 105:return this.Draw_Slider105(a.pobj,this.iInterfaceX,this.iInterfaceY),!0;case 201:return this.Draw_CFrame201(a.pobj,this.iInterfaceX,this.iInterfaceY),!0;case 202:return this.Draw_CAnima202(a.pobj,this.iInterfaceX,this.iInterfaceY),!0;case 203:return this.Draw_CText203(a.pobj,this.iInterfaceX,this.iInterfaceY),!0}}if(40==t.iType){var s,r,o=(a=t).pca;for(s=0;s<a.iArray;s++){for(r=o.phead;null!=r;){if(this.DrawFirst(r,e,i))return!1;r=r.pdown}o=o.pnext}}return!1}},{key:"Draw_Interface400",value:function(t){var e,i;null!=(e=t.FindClass("界面区域"))&&(this.iInterfaceX=e.FindNumber("坐标X").iNumber,this.iInterfaceY=e.FindNumber("坐标X").iNumber,this.iInterfaceW=e.FindNumber("宽度").iNumber,this.iInterfaceH=e.FindNumber("高度").iNumber),null!=(i=t.FindWord("对齐方式"))&&("上"==i.pword?(this.iInterfaceX=(RunFirst.SCRW-this.iInterfaceW)/2,this.iInterfaceY=0):"左上"==i.pword?(this.iInterfaceX=0,this.iInterfaceY=0):"左"==i.pword?(this.iInterfaceX=0,this.iInterfaceY=(RunFirst.SCRH-this.iInterfaceH)/2):"左下"==i.pword?(this.iInterfaceX=0,this.iInterfaceY=RunFirst.SCRH-this.iInterfaceH):"下"==i.pword?(this.iInterfaceX=(RunFirst.SCRW-this.iInterfaceW)/2,this.iInterfaceY=RunFirst.SCRH-this.iInterfaceH):"右下"==i.pword?(this.iInterfaceX=RunFirst.SCRW-this.iInterfaceW,this.iInterfaceY=RunFirst.SCRH-this.iInterfaceH):"右"==i.pword?(this.iInterfaceX=RunFirst.SCRW-this.iInterfaceW,this.iInterfaceY=(RunFirst.SCRH-this.iInterfaceH)/2):"右上"==i.pword?(this.iInterfaceX=RunFirst.SCRW-this.iInterfaceW,this.iInterfaceY=0):"居中"==i.pword&&(this.iInterfaceX=(RunFirst.SCRW-this.iInterfaceW)/2,this.iInterfaceY=(RunFirst.SCRH-this.iInterfaceH)/2))}},{key:"Draw_CList",value:function(t,e,i){t.Draw(e,i)}},{key:"Draw_COle",value:function(t,e,i){t.Draw(e,i)}},{key:"Draw_CButton",value:function(t,e,i){t.Draw(e,i)}},{key:"Draw_CTab104",value:function(t,e,i){t.Draw(e,i)}},{key:"Draw_Slider105",value:function(t,e,i){t.Draw(e,i)}},{key:"Draw_CFrame201",value:function(t,e,i){null!=t&&t.Draw(e,i)}},{key:"Draw_CText203",value:function(t,e,i){t.Draw(e,i)}},{key:"Draw_CAnima202",value:function(t,e,i){t.Draw(e,i)}},{key:"_ProcTouch",value:function(t,e,i){if(null!=this.pface){this.ProcTouchFirst(this.pface,t,e,i);return!!this.bClose&&(_.default.x_stat.PopStat(1),!0)}return!1}},{key:"ProcTouchFirst",value:function(t,e,i,a){var n;if(10==t.iType&&"唯一处理标识"==t.sName){var s=t;switch(n=s.pback,s.iNumber){case 400:return!1;case 101:return!!this.Touch_CButton(n,e,i,a);case 102:return!!this.Touch_CList(n,e,i,a);case 104:return!!this.Touch_CTab(n,e,i,a);case 105:return!!this.Touch_Control(n,e,i,a);case 201:return!!this.Touch_CFrame(n,e,i,a)}}if(40==t.iType){var r,o,u=(n=t).pca;for(r=0;r<n.iArray;r++){for(o=u.phead;null!=o;){if(this.ProcTouchFirst(o,e,i,a))return!0;o=o.pdown}u=u.pnext}}return!1}},{key:"Touch_CButton",value:function(t,e,i,a){return null!=t.pobj&&!!t.pobj.ProcTouch(e,i,a)}},{key:"Touch_CTab",value:function(t,e,i,a){return null!=t.pobj&&!!t.pobj.ProcTouch(e,i,a)}},{key:"Touch_CList",value:function(t,e,i,a){return!!t.pobj.ProcTouch(e,i,a)}},{key:"Touch_CFrame",value:function(t,e,i,a){return null!=t.pobj&&!!t.pobj.ProcTouch(e,i,a)}},{key:"Touch_Control",value:function(t,e,i,a){return null!=t.pobj&&!!t.pobj.ProcTouch(e,i,a)}},{key:"FindControl",value:function(t,e){return null==(t=t.FindFirst(e,10))?null:(m.default.sop("find"+e),t.pobj)}},{key:"ReloadControl",value:function(t){if(null==t)return!1;var e,i,a,n;if(10==t.iType&&"唯一处理标识"==t.sName){var s=t;switch(e=s.pback,m.default.sop("Reload Type = "+s.iNumber),s.iNumber){case 101:case 102:case 103:case 104:case 105:case 201:case 202:case 203:return e.pobj.ReLoad(),!0}}if(40==t.iType)for(n=(e=t).pca,i=0;i<e.iArray;i++){for(a=n.phead;null!=a&&!this.ReloadControl(a);)a=a.pdown;n=n.pnext}return!1}},{key:"atoi",value:function(t){return parseInt(t)}},{key:"getnextword",value:function(t,e,i){var a,n=0,s=new Array;for(a=0;a<i-e&&(" "==t[e+a]||"\r"==t[e+a]||"\n"==t[e+a]);a++);if(this.out="",a>=i-e)return 1024;for(a=a;a<i-e&&0!=t[e+a];a++){if(" "==t[e+a]||"\r"==t[e+a]||"\n"==t[e+a])return a;s[n++]=t[e+a],this.out+=t[e+a]}return n>0?a:1024}},{key:"RunCode",value:function(t){if(null!=t)for(var e,i,a,n,s=0,r=0,o=new Array(5),u=0,l="",f=0,h=0,d="",c=0,_=0,p=2,b=null;;)switch(s){case 0:if(r+=this.getnextword(t.Get(),r,t.iLen),"set"==this.out?s=100:"string"==this.out?s=300:"reload"==this.out?s=200:"if"==this.out?s=400:"button"==this.out?s=500:"run"==this.out?s=600:"send"==this.out?s=700:"close"==this.out&&(this.bClose=!0),r>=t.iLen)return;break;case 700:var D=new Array(7);for(e=0;e<7;e++)r+=this.getnextword(t.Get(),r,t.iLen),"string1"==this.out?D[e]=o[1]:"string2"==this.out?D[e]=o[2]:D[e]=this.out;g.default.pt.xms_send(D[0],D[1],D[2],D[3],D[4],D[5],D[6]),s=0;break;case 600:if(r+=this.getnextword(t.Get(),r,t.iLen),null==(b=this.prunclass.FindFirstByPath(this.out)))return;50==b.iType&&this.RunCode(b);break;case 500:r+=this.getnextword(t.Get(),r,t.iLen),l=this.out,s=501;break;case 501:if(r+=this.getnextword(t.Get(),r,t.iLen),"pressdown"==this.out){if(null==(b=this.prunclass.FindFirstByPath(l)))return;40==b.iType&&((n=b).pobj.bMouseIn=!0,n.pobj.bMouseDown=!0)}s=0;break;case 400:if(r+=this.getnextword(t.Get(),r,t.iLen),"compint"==this.out)_=0;else{if("compstr"!=this.out)return;_=1}s=410;break;case 410:r+=this.getnextword(t.Get(),r,t.iLen),"fromdirect"==this.out&&(s=411);break;case 411:r+=this.getnextword(t.Get(),r,t.iLen),l=this.out,s=420;break;case 420:if(r+=this.getnextword(t.Get(),r,t.iLen),"<"==this.out)p=0;else if("<="==this.out)p=1;else if("="==this.out)p=2;else if(">="==this.out)p=3;else{if(">"!=this.out)return;p=4}s=430;break;case 430:r+=this.getnextword(t.Get(),r,t.iLen),"tocurrent"==this.out&&(h=1,s=431);break;case 431:if(r+=this.getnextword(t.Get(),r,t.iLen),10==(b=this.prunclass.FindFirstByPath(this.out)).iType)d=""+(i=b).iNumber;else{if(30!=b.iType)return;d=(a=b).Get()}s=440;break;case 440:if(e=0,0==_?(0==p&&this.atoi(l)<this.atoi(d)&&(e=1),1==p&&this.atoi(l)<=this.atoi(d)&&(e=1),2==p&&this.atoi(l)==this.atoi(d)&&(e=1),3==p&&this.atoi(l)>=this.atoi(d)&&(e=1),4==p&&this.atoi(l)>this.atoi(d)&&(e=1)):1==_&&(0==p&&l<d&&(e=1),2==p&&l==d&&(e=1),4==p&&l>d&&(e=1)),0==e)for(;;){if((r+=this.getnextword(t.Get(),r,t.iLen))>=t.iLen)return;if("endif"==this.out)break}s=0;break;case 300:r+=this.getnextword(t.Get(),r,t.iLen),s="append"==this.out?310:0;break;case 310:if(r+=this.getnextword(t.Get(),r,t.iLen),"string1"==this.out)c=1;else{if("string2"!=this.out)return;c=2}s=311;break;case 311:r+=this.getnextword(t.Get(),r,t.iLen),"fromdirect"==this.out?(u=2,s=312):"frommemory"==this.out&&(u=3,s=313);break;case 312:r+=this.getnextword(t.Get(),r,t.iLen),l=this.out,s=320;break;case 313:if(r+=this.getnextword(t.Get(),r,t.iLen),"string1"==this.out)f=1;else{if("string2"!=this.out)return;f=2}s=320;break;case 320:2==u?this.out=l:3==u&&(this.out=o[f]),o[c]+=this.out,s=0;break;case 200:r+=this.getnextword(t.Get(),r,t.iLen),m.default.sop("???????="+this.out),"all"==this.out?(this.ReloadControl(this.prunclass),s=0):s=0;break;case 100:r+=this.getnextword(t.Get(),r,t.iLen),"string"==this.out?(1,s=110):s=0;break;case 110:r+=this.getnextword(t.Get(),r,t.iLen),"fromsource"==this.out?(s=111,u=0):"frommemory"==this.out?(s=112,u=3):"fromdirect"==this.out?(s=111,u=2):"fromcurrent"==this.out?(s=111,u=1):s=0;break;case 111:r+=this.getnextword(t.Get(),r,t.iLen),l=this.out,s=120;break;case 112:if(r+=this.getnextword(t.Get(),r,t.iLen),"string1"==this.out)f=1;else{if("string2"!=this.out)return;f=2}s=120;break;case 120:r+=this.getnextword(t.Get(),r,t.iLen),"tocurrent"==this.out?(s=121,h=1):"tomemory"==this.out&&(h=2,s=122);break;case 121:r+=this.getnextword(t.Get(),r,t.iLen),d=this.out,s=130;break;case 122:if(r+=this.getnextword(t.Get(),r,t.iLen),"string1"==this.out)c=1;else{if("string2"!=this.out)return;c=2}s=130;break;case 130:if(0==u||1==u){if(0==u&&(b=this.pbaseclass.FindFirstByPath(l)),1==u&&(b=this.prunclass.FindFirstByPath(l)),null==b)return;if(10==b.iType)i=b,this.out=""+i.iNumber;else{if(30!=b.iType)return;a=b,this.out=a.Get()}}else 2==u?this.out=l:3==u&&(this.out=o[f]);if(1==h){if(null==(b=this.prunclass.FindFirstByPath(d)))return;if(10==b.iType)(i=b).iNumber=this.atoi(this.out);else{if(30!=b.iType)return;(a=b).Set(this.out)}}else 2==h&&(o[c]=this.out);s=0}}}]),RunFirst}();i.default=D,D.paaole,D.panimaole,D.SCRW,D.SCRH},{"../../config/GmConfig":5,"../../engine/BaseClass":8,"../../engine/graphics/M3DFast":28,"../../engine/xms/anima/XAnimaActionOle":41,"../../engine/xms/anima/XAnimaOle":42,"../../engine/xms/control/XmsCAnima":44,"../../engine/xms/control/XmsCBaseControl":45,"../../engine/xms/control/XmsCButton":46,"../../engine/xms/control/XmsCFrame":47,"../../engine/xms/control/XmsCList":48,"../../engine/xms/control/XmsCOle":49,"../../engine/xms/control/XmsCSlider":50,"../../engine/xms/control/XmsCTab":51,"../../engine/xms/control/XmsCText":52,"../../engine/xms/control/head/_LISTLINE":54,"../../engine/xms/control/head/_LISTTITLE":55,"../../engine/xms/first/X10_NUMBER":56,"../../engine/xms/first/X20_FLOAT":57,"../../engine/xms/first/X30_WORD":58,"../../engine/xms/first/X40_CLASS":59,"../../engine/xms/first/X50_CODE":60,"../../engine/xms/first/X_FIRST":62,"../../engine/xms/first/_CLASSARRAY":63,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/GmProtocol":66,"../../engtst/mgm/XStat":70,"./XmsEngine":40}],38:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../engine/xms/control/XmsCButton")),_interopRequireDefault(t("../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../engine/xms/first/X_FIRST")),_interopRequireDefault(t("../../engtst/mgm/frame/message/FrameMessage")),_interopRequireDefault(t("./RunFirst")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function TestRun(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,TestRun),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(TestRun.__proto__||Object.getPrototypeOf(TestRun)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(TestRun,n.default),a(TestRun,[{key:"InitBefore",value:function(){var t=prunclass.FindFirst("行内容1",10).GetCopy();t.sName="行内容3",prunclass.FindFirst("行内容",10).LinkFirst(t)}},{key:"InitAfter",value:function(){}},{key:"Draw",value:function(){this._Draw()}},{key:"ProcTouch",value:function(t,e,i){return this._ProcTouch(t,e,i),!1}}]),TestRun}();i.default=s},{"../../engine/xms/control/XmsCButton":46,"../../engine/xms/first/X40_CLASS":59,"../../engine/xms/first/X_FIRST":62,"../../engtst/mgm/frame/message/FrameMessage":87,"./RunFirst":37}],39:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../config/GameData")),_interopRequireDefault(t("../../engine/PackageTools")),_interopRequireDefault(t("../../engine/xms/first/X10_NUMBER"))),s=_interopRequireDefault(t("../../engine/xms/first/X20_FLOAT")),r=_interopRequireDefault(t("../../engine/xms/first/X30_WORD")),o=_interopRequireDefault(t("../../engine/xms/first/X40_CLASS")),u=_interopRequireDefault(t("../../engine/xms/first/X50_CODE")),l=_interopRequireDefault(t("../../engine/xms/first/X60_DATA")),f=(_interopRequireDefault(t("../../engine/xms/first/X_FIRST")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../config/XDefine"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=function(){function XFirstOle(){_classCallCheck(this,XFirstOle),this.MAXMAIN=256,f.default.sop("new first 1"),this.pmains=new Array(this.MAXMAIN),f.default.sop("new first 2"),this.Clear(),f.default.sop("new first 3")}return a(XFirstOle,[{key:"Clear",value:function(){for(var t=0;t<this.MAXMAIN;t++)this.pmains[t]=null}},{key:"LockMain",value:function(t){for(var e=0;e<this.MAXMAIN;e++)if(null!=this.pmains[e]&&this.pmains[e].sName==t)return this.pmains[e];return null}},{key:"LoadFile",value:function(t,e){f.default.sop("load "+t+" 1"),e&&Laya.loader.load(h.default.BASE_URL+t,Laya.Handler.create(this,this._LoadFile,[this,t]),null,Laya.Loader.BUFFER)}},{key:"_LoadFile",value:function(t,e,i){var a=f.default.gi().pls;a.GetData3(i),f.default.sop("load "+e+" 2");var n,s,r,o=a.GetNextString();if("xf"==o)for(a.GetNextInt(),n=0;n<this.MAXMAIN;n++)if(null==this.pmains[n]){s=a.GetNextInt(),r=a.GetNextInt(),this.pmains[n]=this.LoadFirst(a),this.pmains[n].SetPos(s,r);break}if("xal"==o){for(f.default.sop("load "+e+" 3"),a.GetNextInt();!(a.GetNextInt()<0);)for(n=0;n<this.MAXMAIN;n++)if(null==this.pmains[n]){s=a.GetNextInt(),r=a.GetNextInt(),this.pmains[n]=this.LoadFirst(a),this.pmains[n].SetPos(s,r);break}f.default.sop("load "+e+" 4")}}},{key:"LoadFirst",value:function(t){var e,i,a,f,h,d,c,m=null,g=t.GetNextInt();switch(g){case 10:(m=e=new n.default).iType=g,m.sName=t.GetNextString(),m.iLen=t.GetNextInt(),e.iNumber=t.GetNextInt();break;case 20:(m=i=new s.default).iType=g,m.sName=t.GetNextString(),m.iLen=t.GetNextInt(),i.fFloat=t.GetNextFloat();break;case 30:(m=a=new r.default).iType=g,m.sName=t.GetNextString(),t.GetNextInt(),t.GetNextData(),a.Set(t.DataToString());break;case 40:for((m=f=new o.default).iType=g,m.sName=t.GetNextString(),m.iLen=t.GetNextInt(),f.iArray=t.GetNextInt();null!=(c=this.LoadFirst(t));)f.LinkFirst(c);break;case 50:(m=h=new u.default).iType=g,m.sName=t.GetNextString(),t.GetNextInt(),t.GetNextData(),h.Set(t.obd,t.obi);break;case 60:(m=d=new l.default).iType=g,m.sName=t.GetNextString(),t.GetNextInt(),t.GetNextData(),d.Set(t.obd,t.obi)}return m}}]),XFirstOle}();i.default=d},{"../../config/GameData":4,"../../config/XDefine":7,"../../engine/PackageTools":9,"../../engine/xms/first/X10_NUMBER":56,"../../engine/xms/first/X20_FLOAT":57,"../../engine/xms/first/X30_WORD":58,"../../engine/xms/first/X40_CLASS":59,"../../engine/xms/first/X50_CODE":60,"../../engine/xms/first/X60_DATA":61,"../../engine/xms/first/X_FIRST":62,"../../engtst/mgm/GmPlay":65}],40:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../zero/Interface/GameVersion")),_interopRequireDefault(t("../../engine/PackageTools")),_interopRequireDefault(t("../../engine/xms/anima/XAnimaActionOle"))),s=_interopRequireDefault(t("../../engine/xms/anima/XAnimaOle")),r=(_interopRequireDefault(t("../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../engine/xms/first/X_FIRST")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),o=_interopRequireDefault(t("../../engtst/mgm/XStat")),u=_interopRequireDefault(t("../../engtst/mgm/gameing/me/xms_AddPoint")),l=_interopRequireDefault(t("../../engtst/mgm/gameing/me/xms_PointPlan")),f=_interopRequireDefault(t("./XFirstOle")),h=_interopRequireDefault(t("./RunFirst"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var d=function(){function XmsEngine(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XmsEngine),this.pfole=new f.default,r.default.sop("Ｘｍｓ　ＩｎｉｔＦｉｎｉｓｈ1"),this.pfole.LoadFile("res/datapackage/data/7gol.xal",!0),r.default.sop("Ｘｍｓ　ＩｎｉｔＦｉｎｉｓｈ2"),XmsEngine.panimaole=new s.default,r.default.sop("Ｘｍｓ　ＩｎｉｔＦｉｎｉｓｈ3"),XmsEngine.paaole=new n.default,XmsEngine.pxe=this,r.default.sop("Ｘｍｓ　ＩｎｉｔＦｉｎｉｓｈ4"),this.iStatPoint=0}return a(XmsEngine,[{key:"FindMain",value:function(t){return this.pfole.LockMain(t)}},{key:"FindLink",value:function(t){for(var e=0;e<XmsEngine._STATLINK.length;e++)if(XmsEngine._STATLINK[e][0]==t)return e;return-1}},{key:"IsStat",value:function(t){var e=this.FindLink(t);return-1!=e&&o.default.x_stat.iXStat==XmsEngine.XS_BASESTAT+e}},{key:"RunXms",value:function(t){if("string"!=typeof t){var e,i=XmsEngine._STATLINK[t][1],a=XmsEngine._STATLINK[t][2],n=null;switch(t){case 0:n=new u.default;break;case 1:n=new l.default}null!=(e=this.FindMain(i))&&null!=(e=e.FindFirst(a,5))&&this.Run(XmsEngine.XS_BASESTAT+t,e,n)}else{var s=this.FindLink(t);if(-1==s)return;this.RunXms(s)}}},{key:"Run",value:function(t,e,i){o.default.x_stat.PushXmsStat(t,i),i.prunclass=e,i.XMS_MYSTAT=t,i._Init()}},{key:"RunByPls",value:function(t){var e=this.FindMain("七国");if(null!=e){var i=t.GetNextString();if(null!=(e=e.FindFirstByPath(i))){var a=new h.default;a.prunclass=e,a._Init(),o.default.x_stat.PushXmsStat(XmsEngine.XS_BASESTAT+2e3,a),a.XMS_MYSTAT=XmsEngine.XS_BASESTAT+2e3}}}}]),XmsEngine}();i.default=d,d.XS_BASESTAT=1e5,d.panimaole,d.paaole,d.pxe,d._STATLINK=[["人物加点","七国","人物加点界面"],["人物加点方案","七国","人物加点方案"]]},{"../../engine/PackageTools":9,"../../engine/xms/anima/XAnimaActionOle":41,"../../engine/xms/anima/XAnimaOle":42,"../../engine/xms/first/X40_CLASS":59,"../../engine/xms/first/X_FIRST":62,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/XStat":70,"../../engtst/mgm/gameing/me/xms_AddPoint":276,"../../engtst/mgm/gameing/me/xms_PointPlan":277,"../../zero/Interface/GameVersion":317,"./RunFirst":37,"./XFirstOle":39}],41:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("../../graphics/AnimaAction"),r=(a=s)&&a.__esModule?a:{default:a};var o=function(){function XAnimaActionOle(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XAnimaActionOle),this.MAXAAO=1024,this.iUseFlag=new Int32Array(this.MAXAAO),this.sName=new Array(this.MAXAAO),this.aa=new Array(this.MAXAAO);for(var t=0;t<this.MAXAAO;t++)this.iUseFlag[t]=0,this.aa[t]=new r.default,this.sName[t]=""}return n(XAnimaActionOle,[{key:"ClearFlag",value:function(){for(var t=0;t<this.MAXAAO;t++)this.iUseFlag[t]=0}},{key:"AddAA",value:function(t,e){for(var i=0;i<this.MAXAAO;i++)if(0==this.iUseFlag[i])return this.iUseFlag[i]++,this.aa[i].copyfrom(t),this.sName[i]=e,i;return 0}},{key:"GetAA",value:function(t,e){return t<0||t>=this.MAXAAO?null:this.sName[t]!=e?null:this.aa[t]}}]),XAnimaActionOle}();i.default=o},{"../../graphics/AnimaAction":25}],42:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../config/GameData")),_interopRequireDefault(t("../../../engine/graphics/XAnima"))),s=(_interopRequireDefault(t("../../../engtst/mgm/GmPlay")),_interopRequireDefault(t("./_XANIMA")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(){function XAnimaOle(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XAnimaOle),this.phead=null,this.pend=null}return a(XAnimaOle,[{key:"ReleaseAll",value:function(){this.phead=null,this.pend=null}},{key:"LoadOleAnima",value:function(t,e){e="res/datapackage/"+e;for(var i=this.phead;null!=i;){if(i.sMark==t)return;i=i.pnext}if((i=new s.default).xani=n.default._GET(e),null==i.xani);i.sMark=t,null==this.phead?(this.phead=i,this.pend=i):(this.pend.pnext=i,this.pend=i)}},{key:"FindAnima",value:function(t){for(var e=this.phead;null!=e;){if(e.sMark==t)return e.xani;e=e.pnext}return null}}]),XAnimaOle}();i.default=r},{"../../../config/GameData":4,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmPlay":65,"./_XANIMA":43}],43:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=t("../../../engine/graphics/XAnima");(a=n)&&a.__esModule;i.default=function _XANIMA(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_XANIMA),this.sMark="",this.xani=null,this.pnext=null}},{"../../../engine/graphics/XAnima":30}],44:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../engine/graphics/M3DFast"))),s=(_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engine/xms/RunFirst")),_interopRequireDefault(t("../../../engine/xms/XmsEngine"))),r=(_interopRequireDefault(t("../../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../../engine/xms/first/X20_FLOAT")),_interopRequireDefault(t("../../../engine/xms/first/X30_WORD")),_interopRequireDefault(t("../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("./XmsCBaseControl")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function XmsCAnima(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XmsCAnima);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(XmsCAnima.__proto__||Object.getPrototypeOf(XmsCAnima)).call(this));return a.iX=0,a.iY=0,a.pm3f=n.default.xm3f,a.pclass=e,a.prun=i,a.ReLoad(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(XmsCAnima,r.default),a(XmsCAnima,[{key:"ReLoad",value:function(){var t,e,i,a,n;null!=(i=this.pclass.FindClass("动画指向"))&&(t=i.FindWord("动画分类名"),e=i.FindWord("动画名"),null!=t&&null!=e&&this.Init(s.default.panimaole.FindAnima(t.pword),e.pword)),null!=(a=this.pclass.FindNumber("坐标X"))&&(this.iX=a.iNumber),null!=(a=this.pclass.FindNumber("坐标Y"))&&(this.iY=a.iNumber),null!=(a=this.pclass.FindNumber("绘制第几帧"))&&(this.xaa.iFrame=a.iNumber),null!=(a=this.pclass.FindNumber("透明度"))&&(this.iAlpha=a.iNumber),null!=(n=this.pclass.FindFloat("水平缩放"))&&(this.fSw=n.fFloat),null!=(n=this.pclass.FindFloat("垂直缩放"))&&(this.fSh=n.fFloat),null!=(a=this.pclass.FindNumber("旋转角度"))&&(this.iRa=a.iNumber),null!=(a=this.pclass.FindNumber("旋转锚点X"))&&(this.iRax=a.iNumber),null!=(a=this.pclass.FindNumber("旋转锚点Y"))&&(this.iRay=a.iNumber)}},{key:"Init",value:function(t,e){this.xaa=t.InitAnimaWithName(e,null)}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"Draw",value:function(t,e){this.xaa.DrawEx(this.iX+t,this.iY+e,this.iAlpha,this.fSw,this.fSh,this.iRa,this.iRax,this.iRay)}}]),XmsCAnima}();i.default=o},{"../../../engine/graphics/AnimaAction":25,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engine/xms/RunFirst":37,"../../../engine/xms/XmsEngine":40,"../../../engine/xms/first/X10_NUMBER":56,"../../../engine/xms/first/X20_FLOAT":57,"../../../engine/xms/first/X30_WORD":58,"../../../engine/xms/first/X40_CLASS":59,"./XmsCBaseControl":45}],45:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/XDefine"));_interopRequireDefault(t("../../../engine/graphics/M3DFast"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var s=function(){function XmsCBaseControl(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XmsCBaseControl)}return a(XmsCBaseControl,[{key:"Draw",value:function(){}},{key:"Draw",value:function(t,e){}},{key:"ProcTouch",value:function(t,e,i){return!1}},{key:"bInConrtolRect",value:function(t,e){return n.default.bInRect(t,e,this.iOffX+this.iX,this.iOffY+this.iY,this.iW,this.iH)}},{key:"DrawControlRect",value:function(t){var e,i=this.iX+this.iOffX,a=this.iY+this.iOffY,n=this.iW,s=this.iH;for(e=0;e<5;e++)t.DrawRect_2D(i-e,a-e,n+2*e,s+2*e,4294901760|255-50*e<<8)}}]),XmsCBaseControl}();i.default=s},{"../../../config/XDefine":7,"../../../engine/graphics/M3DFast":28}],46:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engine/xms/RunFirst")),_interopRequireDefault(t("../../../engine/xms/XmsEngine"))),s=(_interopRequireDefault(t("../../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../../engine/xms/first/X30_WORD")),_interopRequireDefault(t("../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("./XmsCBaseControl"))),r=_interopRequireDefault(t("../../../zero/Interface/PublicInterface"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function XmsCButton(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XmsCButton);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(XmsCButton.__proto__||Object.getPrototypeOf(XmsCButton)).call(this));return a.exts=new Int32Array(16),a.pm3f=t,a.ClearButton(),a.pclass=e,a.prun=i,a.ReLoad(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(XmsCButton,s.default),a(XmsCButton,[{key:"ReLoad",value:function(){var t,e,i,a,s,r,o;null!=(e=this.pclass.FindWord("按钮文字"))&&(this.sName=e.pword),null!=(t=this.pclass.FindClass("动画指向"))&&(e=t.FindWord("动画分类名"),i=t.FindWord("动画名"),null!=e&&null!=i&&this.Init(n.default.panimaole.FindAnima(e.pword),i.pword)),null!=(t=this.pclass.FindMark(10))&&(a=t.FindNumber("坐标X"),s=t.FindNumber("坐标Y"),r=t.FindNumber("宽度"),o=t.FindNumber("高度"),null!=a&&null!=s&&null!=r&&null!=o&&this.Move(a.iNumber,s.iNumber,r.iNumber,o.iNumber))}},{key:"ClearButton",value:function(){this.bSingleButton=!0,this.bMouseIn=!1,this.bMouseDown=!1,this.bVisible=!0,this.bDisable=!1,this.bChecked=!1,this.sName="",this.iX=0,this.iY=0,this.iOffX=0,this.iOffY=0}},{key:"Init",value:function(t,e){this.xaa=t.InitAnimaWithName(e,null),this.xaa.iDelay>=0&&(this.bSingleButton=!1)}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"Draw",value:function(t,e){if(this.iOffX=t,this.iOffY=e,this.bVisible)if(this.bDisable)this.pm3f.FillRect_2D(this.iX+this.iOffX,this.iY+this.iOffY,this.iX+this.iW,this.iY+this.iH,3238002687);else{for(;r.default.gi().bInBound(this.iX,this.iY,this.iW,this.iH);)this.iX--;this.prun.RunCode(this.pclass.FindCode("自动执行")),this.bMouseIn?this.bMouseDown?this.bSingleButton?(this.pm3f.FillRect_2D(this.iX+this.iOffX,this.iY+this.iOffY,this.iX+this.iOffX+this.iW,this.iY+this.iOffY+this.iH,2164260863),this.pm3f.DrawRect_2D(this.iX+this.iOffX,this.iY+this.iOffY,this.iX+this.iOffX+this.iW,this.iY+this.iOffY+this.iH,4294967295)):this.xaa.Draw(this.iX+this.iOffX,this.iY+this.iOffY,1):this.bSingleButton?(this.pm3f.FillRect_2D(this.iX+this.iOffX,this.iY+this.iOffY,this.iX+this.iOffX+this.iW,this.iY+this.iOffY+this.iH,1090519039),this.pm3f.DrawRect_2D(this.iX+this.iOffX,this.iY+this.iOffY,this.iX+this.iOffX+this.iW,this.iY+this.iOffY+this.iH,4294967295)):this.xaa.Draw(this.iX+this.iOffX,this.iY+this.iOffY,0):this.bSingleButton?this.pm3f.DrawRect_2D(this.iX+this.iOffX,this.iY+this.iOffY,this.iX+this.iW+this.iOffX,this.iY+this.iH+this.iOffY,4294967295):this.xaa.Draw(this.iX+this.iOffX,this.iY+this.iOffY,0),this.sName.length>0&&(this.bSingleButton?this.pm3f.DrawTextEx(this.iX+this.iW/2+this.iOffX,this.iY+this.iH/2+this.iOffY,this.sName,4294967295,15,101,1,1,0,-2,-2):this.pm3f.DrawTextEx(this.iX+this.iW/2+this.iOffX,this.iY+this.iH/2+this.iOffY,this.sName,4294967040,30,101,1,1,0,-2,-2))}}},{key:"ProcTouch",value:function(t,e,i){if(!this.bVisible)return!1;if(this.bDisable)return!1;if(!this.bMoveIn(e,i))return this.bMouseDown=!1,!1;switch(t){case 1:this.bMouseDown=!0;break;case 2:break;case 3:this.bMouseDown&&(this.bMouseDown=!1,this.bChecked=!0,this.prun.RunCode(this.pclass.FindCode("点击执行")))}return!0}},{key:"bMoveIn",value:function(t,e){return this.bMouseIn=!1,this.bSingleButton,t>=this.iX+this.iOffX&&t<=this.iX+this.iW+this.iOffX&&e>=this.iY+this.iOffY&&e<=this.iY+this.iH+this.iOffY?this.bMouseIn=!0:this.bMouseIn=!1,this.bMouseIn}},{key:"IsChecked",value:function(){return!!this.bChecked&&(this.bChecked=!1,!0)}}]),XmsCButton}();i.default=o},{"../../../engine/graphics/AnimaAction":25,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engine/xms/RunFirst":37,"../../../engine/xms/XmsEngine":40,"../../../engine/xms/first/X10_NUMBER":56,"../../../engine/xms/first/X30_WORD":58,"../../../engine/xms/first/X40_CLASS":59,"../../../zero/Interface/PublicInterface":318,"./XmsCBaseControl":45}],47:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/XDefine")),s=_interopRequireDefault(t("../../../engine/control/XInput")),r=(_interopRequireDefault(t("../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engine/xms/RunFirst")),_interopRequireDefault(t("../../../engine/xms/XmsEngine"))),o=(_interopRequireDefault(t("../../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../../engine/xms/first/X30_WORD")),_interopRequireDefault(t("../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"))),u=_interopRequireDefault(t("./XmsCBaseControl")),l=_interopRequireDefault(t("./XmsCText"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function XmsCFrame(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XmsCFrame);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(XmsCFrame.__proto__||Object.getPrototypeOf(XmsCFrame)).call(this));return a.pm3f=t,a.xin=null,a.pclass=e,a.prun=i,a.ReLoad(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(XmsCFrame,u.default),a(XmsCFrame,[{key:"ReLoad",value:function(){var t,e,i,a,n,s,o;null!=(t=this.pclass.FindClass("框体区域"))&&(e=t.FindNumber("坐标X"),i=t.FindNumber("坐标Y"),a=t.FindNumber("宽度"),n=t.FindNumber("高度"),null!=e&&null!=i&&null!=a&&null!=n&&this.Move(e.iNumber,i.iNumber,a.iNumber,n.iNumber)),null!=(t=this.pclass.FindClass("动画指向"))&&(s=t.FindWord("动画分类名"),o=t.FindWord("动画名"),null!=s&&null!=o&&this.Init(r.default.panimaole.FindAnima(s.pword),o.pword)),null!=(s=this.pclass.FindWord("框体类型"))&&("整框"==s.pword?this.iFrameType=0:"横向框"==s.pword&&(this.iFrameType=1)),null!=(e=this.pclass.FindNumber("动画单位宽"))&&(this.iBw=e.iNumber),null!=(e=this.pclass.FindNumber("动画单位高"))&&(this.iBh=e.iNumber),null!=(t=this.pclass.FindClass("可输入"))?(this.bCanInput=!0,t.pobj=new l.default(this.pm3f,t,this.prun),this.pinput=t.pobj,this.px30_word=t.FindWord("文字内容")):this.bCanInput=!1,s=this.pclass.FindWord("默认隐藏"),this.bHide=null!=s}},{key:"Init",value:function(t,e){this.faa=t.InitAnimaWithName(e,null)}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"SetDetail",value:function(t){this.px30_word.Set(t),this.pinput.sText=t}},{key:"Draw",value:function(t,e){if(!this.bHide){this.iOffX=t,this.iOffY=e;var i=this.iX+t,a=this.iY+e,n=1,s=1;this.iBw+this.iBw>this.iW&&(n=.5*this.iW/this.iBw),this.iBh+this.iBh>this.iH&&(s=.5*this.iH/this.iBh),0==this.iFrameType?(this.iW-this.iBw-this.iBw>0&&this.iH-this.iBh-this.iBh>0&&this.faa.DrawEx(i+this.iBw-2,a+this.iBh-2,8,101,1*(this.iW-this.iBw-this.iBw+4)/this.iBw,1*(this.iH-this.iBh-this.iBh+4)/this.iBh,0,0,0),this.iW-this.iBw-this.iBw>0&&this.faa.DrawEx(i+this.iBw-2,a,1,101,1*(this.iW-this.iBw-this.iBw+4)/this.iBw,1,0,0,0),this.iH-this.iBh-this.iBh>0&&this.faa.DrawEx(i+this.iW-this.iBw,a+this.iBh-2,3,101,1,1*(this.iH-this.iBh-this.iBh+4)/this.iBh,0,0,0),this.iW-this.iBw-this.iBw>0&&this.faa.DrawEx(i+this.iBw-2,a+this.iH-this.iBh,5,101,1*(this.iW-this.iBw-this.iBw+4)/this.iBw,1,0,0,0),this.iH-this.iBh-this.iBh>0&&this.faa.DrawEx(i,a+this.iBh-2,7,101,1,1*(this.iH-this.iBh-this.iBh+4)/this.iBh,0,0,0),this.faa.DrawEx(i,a,0,101,n,s,0,0,0),this.faa.DrawEx(i+this.iW-n*this.iBw,a,2,101,n,s,0,0,0),this.faa.DrawEx(i+this.iW-n*this.iBw,a+this.iH-s*this.iBh,4,101,n,s,0,0,0),this.faa.DrawEx(i,a+this.iH-s*this.iBh,6,101,n,s,0,0,0)):1==this.iFrameType&&(this.faa.Draw(i,a,0),this.iW-this.iBw-this.iBw>0&&this.faa.DrawEx(i+this.iBw,a,1,101,1*(this.iW-this.iBw-this.iBw)/this.iBw,1,0,0,0),this.faa.Draw(i+this.iW-this.iBw,a,2)),this.bCanInput&&(this.pinput.Draw(i,a),null!=this.xin&&this.xin.bChanged()&&this.SetDetail(this.xin.sDetail)),null!=this.xin&&this.xin.onscr()}}},{key:"ProcTouch",value:function(t,e,i){return!this.bHide&&(!(!this.bCanInput||!n.default.bInRect(e,i,this.iOffX+this.iX,this.iOffY+this.iY,this.iW,this.iH))&&(3==t&&(null==this.xin&&(this.xin=new s.default(o.default.xani_ui)),this.xin.sDetail=this.pinput.sText,this.xin.OpenInput()),!0))}}]),XmsCFrame}();i.default=f},{"../../../config/XDefine":7,"../../../engine/control/XInput":18,"../../../engine/graphics/AnimaAction":25,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engine/xms/RunFirst":37,"../../../engine/xms/XmsEngine":40,"../../../engine/xms/first/X10_NUMBER":56,"../../../engine/xms/first/X30_WORD":58,"../../../engine/xms/first/X40_CLASS":59,"../../../engtst/mgm/GmPlay":65,"./XmsCBaseControl":45,"./XmsCText":52}],48:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/XDefine")),s=_interopRequireDefault(t("../../../engine/graphics/M3DFast")),r=(_interopRequireDefault(t("../../../engine/xms/RunFirst")),_interopRequireDefault(t("../../../engine/xms/control/head/_LISTLINE"))),o=_interopRequireDefault(t("../../../engine/xms/control/head/_LISTTITLE")),u=(_interopRequireDefault(t("../../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../../engine/xms/first/X30_WORD")),_interopRequireDefault(t("../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../engine/xms/first/X_FIRST")),_interopRequireDefault(t("./XmsCBaseControl")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function XmsCList(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XmsCList);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(XmsCList.__proto__||Object.getPrototypeOf(XmsCList)).call(this));return a.iX=0,a.iY=0,a.plines=null,a.iScrollY=0,a.bTouchDown=!1,a.bLockScroll=!1,a.iSelectLine=-1,a.pm3f=s.default.xm3f,a.pclass=e,a.prun=i,a.ReLoad(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(XmsCList,u.default),a(XmsCList,[{key:"ReLoad",value:function(){var t,e,i,a,n,s,r,u,l,f;if(null!=(i=this.pclass.FindClass("列表区域"))&&(s=i.FindNumber("坐标X"),r=i.FindNumber("坐标Y"),u=i.FindNumber("宽度"),l=i.FindNumber("高度"),null!=s&&null!=r&&null!=u&&null!=l&&this.Move(s.iNumber,r.iNumber,u.iNumber,l.iNumber)),null!=(s=this.pclass.FindNumber("列数"))&&(this.iTitleCount=s.iNumber),null!=(s=this.pclass.FindNumber("标题高度"))&&(this.iTitleHeight=s.iNumber),this.ptitles=new Array(this.iTitleCount),null!=(a=this.pclass.FindClass("标题")))for(t=0;t<this.iTitleCount;t++)this.ptitles[t]=new o.default,null!=(i=a.FindClass("标题"+(t+1)))&&(null!=(s=i.FindNumber("宽度"))&&(this.ptitles[t].iWidth=s.iNumber),null!=(f=i.FindWord("标题名"))&&(this.ptitles[t].sName=f.pword),null!=(f=i.FindWord("类型"))&&"容器"==f.pword&&(this.ptitles[t].iType=2),null!=(f=i.FindWord("对齐方式"))&&"中"==f.pword&&(this.ptitles[t].iLocate=1),null!=(n=i.FindClass("背景框"))&&this.iTitleHeight>0&&(this.ptitles[t].pframe=new XmsCFrame(this.pm3f,n,this.prun),n.pobj=this.ptitles[t].pframe));if(e=0,null!=(a=this.pclass.FindClass("行内容")))for(;null!=(i=a.FindClass("行内容"+(e+1)));){var h=i.pca.phead,d=this.AddLine();for(t=0;t<this.iTitleCount;t++)switch(this.ptitles[t].iType){case 2:d.pfiled[t]=new XmsCOle(this.pm3f,h,this.prun),null!=(n=i.FindFirst("选中覆盖框",5))&&(d.pcoverframe[t]=n.pobj)}h=h.pdown,e++}null==(f=this.pclass.FindWord("标题可开关"))?this.iSwitch=0:"开"==f.pword?this.iSwitch=1:this.iSwitch=2}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"AddLine",value:function(){if(null==this.plines)return this.plines=new r.default,this.plines;for(var t=this.plines;null!=t.pnext;)t=t.pnext;return t.pnext=new r.default,t.pnext}},{key:"Draw",value:function(t,e){var i,a,n,s,r;if(this.iOffX=t,this.iOffY=e,s=this.iX+t,r=this.iY+e,this.pm3f.DrawRect_2D(s,r,s+this.iW,r+this.iH,4294967295),this.iTitleHeight>0){for(a=0,i=0;i<this.iTitleCount;i++)this.iTitleHeight>0&&null!=this.ptitles[i].pframe&&this.ptitles[i].pframe.Draw(s+a,r),this.ptitles[i].sName.length>0&&this.pm3f.DrawTextEx(s+a+this.ptitles[i].iWidth/2,r+this.iTitleHeight/2,this.ptitles[i].sName,4294967295,30,101,1,1,0,-2,-2),a+=this.ptitles[i].iWidth;r+=this.iTitleHeight,this.pm3f.DrawLine(s,r,s+this.iW,r,4294967295)}if(2!=this.iSwitch){this.pm3f.SetViewClip(s,r,s+this.iW,r+this.iH-this.iTitleHeight);var o,u=this.plines;for(a=0,n=0;null!=u;){if(this.iSelectLine==n)for(o=0,i=0;i<this.iTitleCount;i++){if(2==this.ptitles[i].iType)o<(l=u.pfiled[i]).iH+(l.bHaveExtend&l.bShowExtend?l.pExtend.iH:0)&&(o=l.iH+(l.bHaveExtend&l.bShowExtend?l.pExtend.iH:0))}for(o=0,i=0;i<this.iTitleCount;i++)if(2==this.ptitles[i].iType){var l=u.pfiled[i];this.iSelectLine==n?(null!=u.pcoverframe[i]&&(u.pcoverframe[i].bHide=!1),l.bShowExtend=!0):this.iSelectLine>=0&&(l.bShowExtend=!1,null!=u.pcoverframe[i]&&(u.pcoverframe[i].bHide=!0)),l.Draw(s,r+a+this.iScrollY),o<l.iH+(l.bHaveExtend&l.bShowExtend?l.pExtend.iH:0)&&(o=l.iH+(l.bHaveExtend&l.bShowExtend?l.pExtend.iH:0))}a+=o,n++,u=u.pnext}this.iDetailHeight=a,this.pm3f.NoClip(),1==this.iSwitch&&(this.iH=this.iTitleHeight+this.iDetailHeight),this.bLockScroll||(this.iDetailHeight<this.iH-this.iTitleHeight?this.iScrollY>10||this.iScrollY<-10?this.iScrollY/=2:this.iScrollY=0:(a=-(this.iDetailHeight-(this.iH-this.iTitleHeight)),this.iScrollY<a&&((i=a-this.iScrollY)>10&&(i/=2),this.iScrollY+=i),this.iScrollY>0&&(this.iScrollY>10?this.iScrollY/=2:this.iScrollY=0)))}else this.iH=this.iTitleHeight}},{key:"CleanSelect",value:function(){for(var t,e=this.plines;null!=e;){for(t=0;t<this.iTitleCount;t++)2==this.ptitles[t].iType&&null!=e.pcoverframe[t]&&(e.pcoverframe[t].bHide=!0);e=e.pnext}this.iSelectLine=-1}},{key:"ProcTouch",value:function(t,e,i){if(e-=this.iOffX,i-=this.iOffY,this.bTouchDown){if(2==t){if(this.bLockScroll)return 0==this.iSwitch&&(this.iScrollY-=this.iLockY-i,this.iLockY=i),!0;Math.abs(this.iLockY-i)>10&&(0==this.iSwitch?(this.iLockY=i,this.bLockScroll=!0):this.bTouchDown=!1)}if(3==t){if(this.bLockScroll)return this.bLockScroll=!1,this.bTouchDown=!1,!0;this.iSelectLine=this.iSelectLineTmp,this.bTouchDown=!1}}if(n.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)){var a,s,r=this.plines,o=0,u=0;if(this.iTitleHeight>0)for(a=0;a<this.iTitleCount;a++)null!=this.ptitles[a].pframe&&this.ptitles[a].pframe.bInConrtolRect(this.iOffX+e,this.iOffY+i)&&(1==t?this.ptitles[a].bDown=!0:3==t&&this.ptitles[a].bDown&&(this.ptitles[a].bDown=!1,1==this.iSwitch?this.iSwitch=2:2==this.iSwitch&&(this.iSwitch=1)));if(2==this.iSwitch)return!1;for(this.iSelectLineTmp=-1;null!=r;){for(s=0,a=0;a<this.iTitleCount;a++)if(2==this.ptitles[a].iType){var l=r.pfiled[a];if(l.ProcTouch(t,e+this.iOffX,i+this.iOffY))return!0;s<l.iH+(l.bHaveExtend&l.bShowExtend?l.pExtend.iH:0)&&(s=l.iH+(l.bHaveExtend&l.bShowExtend?l.pExtend.iH:0))}i-this.iTitleHeight>=this.iY+o+this.iScrollY&&i-this.iTitleHeight<=this.iY+o+this.iScrollY+s&&(this.iSelectLineTmp=u),o+=s,u++,r=r.pnext}return 1==t&&(this.bTouchDown=!0,this.iLockY=i),!(this.iSwitch>0)}return this.bTouchDown=!1,!1}}]),XmsCList}();i.default=l},{"../../../config/XDefine":7,"../../../engine/graphics/M3DFast":28,"../../../engine/xms/RunFirst":37,"../../../engine/xms/control/head/_LISTLINE":54,"../../../engine/xms/control/head/_LISTTITLE":55,"../../../engine/xms/first/X10_NUMBER":56,"../../../engine/xms/first/X30_WORD":58,"../../../engine/xms/first/X40_CLASS":59,"../../../engine/xms/first/X_FIRST":62,"./XmsCBaseControl":45}],49:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/xms/RunFirst")),_interopRequireDefault(t("../../../engine/xms/control/head/_LINKCONTROL"))),s=(_interopRequireDefault(t("../../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../engine/xms/first/X_FIRST")),_interopRequireDefault(t("./XmsCBaseControl"))),r=_interopRequireDefault(t("./XmsCButton")),o=_interopRequireDefault(t("./XmsCFrame")),u=_interopRequireDefault(t("./XmsCText")),l=_interopRequireDefault(t("./XmsCAnima")),f=_interopRequireDefault(t("./XmsCList")),h=_interopRequireDefault(t("./XmsCSlider"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function XmsCOle(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XmsCOle);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(XmsCOle.__proto__||Object.getPrototypeOf(XmsCOle)).call(this));return a.iX=0,a.iY=0,a.plc=null,a.pm3f=t,a.pclass=e,a.prun=i,a.ReLoad(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(XmsCOle,s.default),a(XmsCOle,[{key:"ReLoad",value:function(){var t,e,i,a,n,s;if(null!=(t=this.pclass.FindClass("容器区域"))&&(i=t.FindNumber("坐标X"),a=t.FindNumber("坐标Y"),n=t.FindNumber("宽度"),s=t.FindNumber("高度"),null!=i&&null!=a&&null!=n&&null!=s&&this.Move(i.iNumber,a.iNumber,n.iNumber,s.iNumber)),null!=(t=this.pclass.FindClass("内容")))for(var d=t.pca.phead;null!=d;){if(40==d.iType&&null!=(e=d).pca.phead&&10==e.pca.phead.iType&&"唯一处理标识"==e.pca.phead.sName)switch((i=e.pca.phead).iNumber){case 101:e.pobj=new r.default(this.pm3f,e,this.prun),this.AddControl(XmsCOle.CTYPE_BUTTON,e.pobj);break;case 201:e.pobj=new o.default(this.pm3f,e,this.prun),this.AddControl(XmsCOle.CTYPE_FRAME,e.pobj);break;case 203:e.pobj=new u.default(this.pm3f,e,this.prun),this.AddControl(XmsCOle.CTYPE_TEXT,e.pobj);break;case 202:e.pobj=new l.default(this.pm3f,e,this.prun),this.AddControl(XmsCOle.CTYPE_ANIMA,e.pobj);break;case 102:e.pobj=new f.default(this.pm3f,e,this.prun),this.AddControl(XmsCOle.CTYPE_LIST,e.pobj);break;case 105:e.pobj=new h.default(this.pm3f,e,this.prun),this.AddControl(XmsCOle.CTYPE_SLIDER,e.pobj);break;case 103:e.pobj=new XmsCOle(this.pm3f,e,this.prun),this.AddControl(XmsCOle.CTYPE_OLE,e.pobj)}d=d.pdown}null!=(t=this.pclass.FindClass("扩展下拉容器"))?(this.pExtend=new XmsCOle(this.pm3f,t,this.prun),this.bHaveExtend=!0):this.bHaveExtend=!1,this.bShowExtend=!0}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"AddControl",value:function(t,e){var i;if(null==this.plc)this.plc=new n.default,i=this.plc;else{for(i=this.plc;null!=i.pnext;)i=i.pnext;i.pnext=new n.default,i=i.pnext}i.iType=t,i.pobj=e}},{key:"Draw",value:function(t,e){this.iOffX=t,this.iOffY=e;var i,a,n=this.plc,s=t+this.iX,r=e+this.iY;for(this.pm3f.DrawRect_2D(s,r,s+this.iW,r+this.iH,4294967295),this.bHaveExtend&&this.bShowExtend&&this.pExtend.Draw(t,e),this.iH=0;null!=n;)(i=n.pobj).Draw(s,r),(a=i.iY+i.iH)>this.iH&&(this.iH=a),n=n.pnext}},{key:"ProcTouch",value:function(t,e,i){e-=this.iOffX,i-=this.iOffY;for(var a=this.plc;null!=a;){switch(a.iType){case CTYPE_BUTTON:case CTYPE_FRAME:case CTYPE_LIST:case CTYPE_SLIDER:case CTYPE_OLE:if(a.pobj.ProcTouch(t,e+this.iOffX,i+this.iOffY))return!0}a=a.pnext}return!(!this.bHaveExtend||!this.bShowExtend)&&this.pExtend.ProcTouch(t,e,i)}}]),XmsCOle}();i.default=d,s.default.CTYPE_BUTTON=1,s.default.CTYPE_FRAME=2,s.default.CTYPE_TEXT=3,s.default.CTYPE_ANIMA=4,s.default.CTYPE_LIST=5,s.default.CTYPE_SLIDER=6,s.default.CTYPE_OLE=7},{"../../../engine/graphics/M3DFast":28,"../../../engine/xms/RunFirst":37,"../../../engine/xms/control/head/_LINKCONTROL":53,"../../../engine/xms/first/X10_NUMBER":56,"../../../engine/xms/first/X40_CLASS":59,"../../../engine/xms/first/X_FIRST":62,"./XmsCAnima":44,"./XmsCBaseControl":45,"./XmsCButton":46,"./XmsCFrame":47,"./XmsCList":48,"./XmsCSlider":50,"./XmsCText":52}],50:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/XDefine")),s=(_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/xms/RunFirst")),_interopRequireDefault(t("../../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"))),r=_interopRequireDefault(t("./XmsCBaseControl")),o=_interopRequireDefault(t("./XmsCFrame")),u=_interopRequireDefault(t("./XmsCAnima")),l=_interopRequireDefault(t("../../../config/GmConfig"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function XmsCSlider(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XmsCSlider);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(XmsCSlider.__proto__||Object.getPrototypeOf(XmsCSlider)).call(this));return a.pm3f=t,a.bLock=!1,a.iRange=1e4,a.iPos=0,a.iMin=0,a.iMax=1e4,a.bChanged=!1,a.pclass=e,a.prun=i,a.ReLoad(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(XmsCSlider,r.default),a(XmsCSlider,[{key:"SetPos",value:function(t){this.iPos=t}},{key:"SetRange",value:function(t){this.iRange=t,this.iMax=t}},{key:"IsChanged",value:function(){return!!this.bChanged&&(this.bChanged=!1,!0)}}]),a(XmsCSlider,[{key:"ReLoad",value:function(){var t,e,i,a,n;null!=(t=this.pclass.FindClass("背景条"))&&(t.pobj=new o.default(this.pm3f,t,this.prun),this.pline=t.pobj),null!=(t=this.pclass.FindClass("滑块"))&&(t.pobj=new u.default(this.pm3f,t,this.prun),this.pblock=t.pobj),null!=(t=this.pclass.FindClass("滑杆区域"))&&(e=t.FindNumber("坐标X"),i=t.FindNumber("坐标Y"),a=t.FindNumber("宽度"),n=t.FindNumber("高度"),null!=e&&null!=i&&null!=a&&null!=n&&this.Move(e.iNumber,i.iNumber,a.iNumber,n.iNumber)),null!=(t=this.pclass.FindClass("滑块大小"))&&(a=t.FindNumber("宽度"),n=t.FindNumber("高度"),null!=a&&null!=n&&(this.iBlockW=a.iNumber,this.iBlockH=n.iNumber))}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"Draw",value:function(t,e){this.iOffX=t,this.iOffX=e,this.pline.Draw(t+this.iX,e+this.iY),this.pblock.Draw(t+this.iX-this.iBlockW/2+this.iPos*this.iW/this.iRange,e+this.iY+this.iH/2-this.iBlockH/2)}},{key:"ProcTouch",value:function(t,e,i){if(3==t)return this.bLock=!1,!1;e-=(l.default.SCRW-1280)/2;var a=this.iPos;if(this.bLock&&2==t){var r=(this.iLockX-e)*this.iRange/this.iW;return s.default.sop("this.iPos="+this.iPos+"this.iLockX="+this.iLockX+"x="+e+"j="+r+"---------"+this.iRange+"=mmmmm="+this.iW),0!=r&&(this.iPos-=(this.iLockX-e)*this.iRange/this.iW,this.iPos<this.iMin&&(this.iPos=this.iMin),this.iPos>this.iRange&&(this.iPos=this.iRange),this.iPos>this.iMax&&(this.iPos=this.iMax),this.iLockX=e),s.default.sop("this.iPos="+this.iPos),a!=this.iPos&&(this.bChanged=!0),!0}if(n.default.bInRect(e,i,this.iOffX+this.iX-this.iBlockW/2,this.iOffX+this.iY,this.iW+this.iBlockW,this.iH)&&1==t)return this.bLock=!0,this.iLockX=e,(e<(r=this.iOffX+this.iX+this.iPos*this.iW/this.iRange)-this.iBlockW/2||e>r+this.iBlockW/2)&&(this.iPos=(e-this.iOffX-this.iX)*this.iRange/this.iW,this.iPos<this.iMin&&(this.iPos=this.iMin),this.iPos>this.iRange&&(this.iPos=this.iRange),this.iPos>this.iMax&&(this.iPos=this.iMax)),a!=this.iPos&&(this.bChanged=!0),!0;return!1}}]),XmsCSlider}();i.default=f},{"../../../config/GmConfig":5,"../../../config/XDefine":7,"../../../engine/graphics/M3DFast":28,"../../../engine/xms/RunFirst":37,"../../../engine/xms/first/X10_NUMBER":56,"../../../engine/xms/first/X40_CLASS":59,"../../../engtst/mgm/GmPlay":65,"./XmsCAnima":44,"./XmsCBaseControl":45,"./XmsCFrame":47}],51:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/xms/RunFirst")),_interopRequireDefault(t("../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("./XmsCBaseControl")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function _TABLIST(){_classCallCheck(this,_TABLIST)},r=function(t){function XmsCTab(t,e,i){_classCallCheck(this,XmsCTab);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(XmsCTab.__proto__||Object.getPrototypeOf(XmsCTab)).call(this));a.iX=0,a.iY=0,a.pm3f=t,a.ptablist=new Array(16);for(var n=0;n<16;n++)a.ptablist[n]=new s;return a.iTabPoint=0,a.pclass=e,a.prun=i,a.ReLoad(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(XmsCTab,n.default),a(XmsCTab,[{key:"ReLoad",value:function(){for(var t,e,i,a=0;null!=(t=this.pclass.FindClass("标签"+(a+1)))&&null!=(e=t.FindClass("标签按钮"))&&null!=(i=t.FindClass("标签容器"));)e.pobj=new XmsCButton(this.pm3f,e,this.prun),i.pobj=new XmsCOle(this.pm3f,i,this.prun),this.AddTab(e.pobj,i.pobj),a++}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"Draw",value:function(t,e){var i;for(this.iOffX=t,this.iOffY=e,i=0;i<this.iTabListCount;i++)i==this.iTabPoint&&this.ptablist[i].pole.Draw(t,e),this.ptablist[i].pbtn.Draw(t,e)}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<this.iTabListCount;a++){if(a==this.iTabPoint&&this.ptablist[a].pole.ProcTouch(t,e,i))return!0;if(this.ptablist[a].pbtn.ProcTouch(t,e,i))return this.ptablist[a].pbtn.IsChecked()&&(this.iTabPoint=a),!0}return!1}},{key:"AddTab",value:function(t,e){this.iTabListCount<16&&(this.ptablist[this.iTabListCount].pbtn=t,this.ptablist[this.iTabListCount].pole=e,this.iTabListCount++)}}]),XmsCTab}();i.default=r},{"../../../engine/graphics/M3DFast":28,"../../../engine/xms/RunFirst":37,"../../../engine/xms/first/X40_CLASS":59,"./XmsCBaseControl":45}],52:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/XDefine")),s=(_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/xms/RunFirst")),_interopRequireDefault(t("../../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../../engine/xms/first/X20_FLOAT")),_interopRequireDefault(t("../../../engine/xms/first/X30_WORD")),_interopRequireDefault(t("../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"))),r=_interopRequireDefault(t("../../../engtst/mgm/frame/format/FormatString")),o=_interopRequireDefault(t("./XmsCBaseControl"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function XmsCText(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XmsCText);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(XmsCText.__proto__||Object.getPrototypeOf(XmsCText)).call(this));return a.iX=0,a.iY=0,a.pm3f=t,a.pclass=e,a.prun=i,a.ReLoad(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(XmsCText,o.default),a(XmsCText,[{key:"ReLoad",value:function(){var t,e,i;if(null!=(t=this.pclass.FindNumber("坐标X"))&&(this.iX=t.iNumber),null!=(t=this.pclass.FindNumber("坐标Y"))&&(this.iY=t.iNumber),null!=(i=this.pclass.FindWord("文字内容"))&&(this.sText=i.pword),s.default.sop("Reload Text = "+this.sText),null!=(i=this.pclass.FindWord("颜色"))){var a=0;for(this.iColor=0;i.pword.length>a;)i.pword.charAt(a)>="0"&&i.pword.charAt(a)<="9"?this.iColor=this.iColor<<4|i.pword.charAt(a)-"0":i.pword.charAt(a)>="a"&&i.pword.charAt(a)<="f"?this.iColor=this.iColor<<4|i.pword.charAt(a)-"a"+10:i.pword.charAt(a)>="A"&&i.pword.charAt(a)<="F"&&(this.iColor=this.iColor<<4|i.pword.charAt(a)-"A"+10),a++;this.iColor|=4278190080}null!=(t=this.pclass.FindNumber("文字大小"))&&(this.iSize=t.iNumber),null!=(t=this.pclass.FindNumber("透明度"))&&(this.iAlpha=t.iNumber),null!=(e=this.pclass.FindFloat("水平缩放"))&&(this.fSw=e.fFloat),null!=(e=this.pclass.FindFloat("垂直缩放"))&&(this.fSh=e.fFloat),null!=(t=this.pclass.FindNumber("旋转角度"))&&(this.iRa=t.iNumber),null!=(t=this.pclass.FindNumber("旋转锚点X"))&&(this.iRax=t.iNumber),null!=(t=this.pclass.FindNumber("旋转锚点Y"))&&(this.iRay=t.iNumber);var n=this.pclass.FindClass("描边");if(null==n)this.bStroke=!1;else if(this.bStroke=!0,null!=(t=n.FindNumber("类型"))&&(this.iStrokeType=t.iNumber),null!=(i=n.FindWord("颜色"))){a=0;for(this.iStrokeColor=0;i.pword.length>a;)i.pword.charAt(a)>="0"&&i.pword.charAt(a)<="9"?this.iStrokeColor=this.iStrokeColor<<4|i.pword.charAt(a)-"0":i.pword.charAt(a)>="a"&&i.pword.charAt(a)<="f"?this.iStrokeColor=this.iStrokeColor<<4|i.pword.charAt(a)-"a"+10:i.pword.charAt(a)>="A"&&i.pword.charAt(a)<="F"&&(this.iStrokeColor=this.iStrokeColor<<4|i.pword.charAt(a)-"A"+10),a++;this.iStrokeColor|=4278190080}null==(n=this.pclass.FindClass("格式化输出"))?this.bFormat=!1:(this.bFormat=!0,null!=(t=n.FindNumber("行宽"))&&(this.iFormatW=t.iNumber),null!=(t=n.FindNumber("行高"))&&(this.iFormatH=t.iNumber))}},{key:"Move",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"Draw",value:function(t,e){this.iOffX=t,this.iOffY=e,this.bFormat?(r.default.gi().FormatEx(this.sText,this.iFormatW,this.iSize,this.bStroke?this.iStrokeType:0,this.iStrokeColor,this.iFormatH),r.default.gi().Draw(this.iX+t,this.iY+e),this.iTextX=this.iX+t,this.iTextY=this.iY+e,this.iTextW=r.default.gi().iW,this.iTextH=r.default.gi().iH):(this.bStroke?this.pm3f.DrawText_2(this.iX+t,this.iY+e,this.sText,this.iColor,this.iSize,this.iAlpha,this.fSw,this.fSh,this.iRa,this.iRax,this.iRay,this.iStrokeType,this.iStrokeColor):this.pm3f.DrawTextEx(this.iX+t,this.iY+e,this.sText,this.iColor,this.iSize,this.iAlpha,this.fSw,this.fSh,this.iRa,this.iRax,this.iRay),this.iTextX=this.pm3f.drawrect[0],this.iTextY=this.pm3f.drawrect[1],this.iTextW=this.pm3f.drawrect[2]-this.pm3f.drawrect[0],this.iTextH=this.pm3f.drawrect[3]-this.pm3f.drawrect[1])}},{key:"bInConrtolRect",value:function(t,e){return n.default.bInRect(t,e,this.iTextX,this.iTextY,this.iTextW,this.iTextH)}},{key:"DrawControlRect",value:function(t){var e,i=this.iTextX,a=this.iTextY,n=this.iTextW,s=this.iTextH;for(e=0;e<5;e++)this.pm3f.DrawRect_2D(i-e,a-e,n+2*e,s+2*e,4294901760|255-50*e<<8)}}]),XmsCText}();i.default=u},{"../../../config/XDefine":7,"../../../engine/graphics/M3DFast":28,"../../../engine/xms/RunFirst":37,"../../../engine/xms/first/X10_NUMBER":56,"../../../engine/xms/first/X20_FLOAT":57,"../../../engine/xms/first/X30_WORD":58,"../../../engine/xms/first/X40_CLASS":59,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/frame/format/FormatString":81,"./XmsCBaseControl":45}],53:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function _LINKCONTROL(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_LINKCONTROL),this.pobj=null,this.pnext=null}},{}],54:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function _LISTLINE(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_LISTLINE),this.pnext=null,this.pfiled=new Array(32),this.pcoverframe=new Array(32)}},{}],55:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function _LISTTITLE(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_LISTTITLE),pframe=null,bDown=!1}},{}],56:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("./X_FIRST"),r=(a=s)&&a.__esModule?a:{default:a};var o=function(t){function X10_NUMBER(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,X10_NUMBER);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(X10_NUMBER.__proto__||Object.getPrototypeOf(X10_NUMBER)).call(this));return t.iNumber=0,t.iType=10,t.iLen=4,t.iNumber=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(X10_NUMBER,r.default),n(X10_NUMBER,[{key:"Set",value:function(t){this.iNumber=t}},{key:"Get",value:function(){return this.iNumber}},{key:"copyfrom",value:function(t){this.iX=t.iX,this.iY=t.iY,this.sName=t.sName,this.iNumber=t.iNumber}},{key:"GetCopy",value:function(){var t=new X10_NUMBER;return t.copyfrom(this),t}}]),X10_NUMBER}();i.default=o},{"./X_FIRST":62}],57:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("./X_FIRST"),r=(a=s)&&a.__esModule?a:{default:a};var o=function(t){function X20_FLOAT(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,X20_FLOAT);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(X20_FLOAT.__proto__||Object.getPrototypeOf(X20_FLOAT)).call(this));return t.fFloat=0,t.iType=20,t.iLen=4,t.sName="",t.fFloat=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(X20_FLOAT,r.default),n(X20_FLOAT,[{key:"Set",value:function(t){this.fFloat=t}},{key:"Get",value:function(){return this.fFloat}},{key:"copyfrom",value:function(t){this.iX=t.iX,this.iY=t.iY,this.sName=t.sName,this.fFloat=t.fFloat}},{key:"GetCopy",value:function(){var t=new X20_FLOAT;return t.copyfrom(this),t}}]),X20_FLOAT}();i.default=o},{"./X_FIRST":62}],58:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("./X_FIRST"),r=(a=s)&&a.__esModule?a:{default:a};var o=function(t){function X30_WORD(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,X30_WORD);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(X30_WORD.__proto__||Object.getPrototypeOf(X30_WORD)).call(this));return t.pword="",t.iType=30,t.iLen=8,t.sName="",t.pword="",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(X30_WORD,r.default),n(X30_WORD,[{key:"Set",value:function(t){this.pword=t}},{key:"Get",value:function(){return this.pword}},{key:"copyfrom",value:function(t){this.iX=t.iX,this.iY=t.iY,this.sName=t.sName,this.pword=t.pword}},{key:"GetCopy",value:function(){var t=new X30_WORD;return t.copyfrom(this),t}}]),X30_WORD}();i.default=o},{"./X_FIRST":62}],59:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("./_CLASSARRAY")),s=_interopRequireDefault(t("./X_FIRST"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function X40_CLASS(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,X40_CLASS);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(X40_CLASS.__proto__||Object.getPrototypeOf(X40_CLASS)).call(this));return t.iType=40,t.iLen=8,t.sName="",t.iArray=1,t.pobj=null,t.pca=new n.default(t),t.bOpenTree=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(X40_CLASS,s.default),a(X40_CLASS,[{key:"copyfrom",value:function(t){this.iX=t.iX,this.iY=t.iY,this.sName=t.sName,this.iArray=t.iArray}},{key:"_NEW_x40",value:function(){var t,e,i,a;for(i=this.pca,t=1;t<this.iArray;t++){for(a=new n.default(this),e=this.pca.phead;null!==e;)a.LinkFirst(e.GetCopy()),e=e.pdown;i.pnext=a,i=a}for(t=0;t<iArray;t++)for(e=pca.phead;null!=e;)40==e.iType&&e._NEW_x40(),e=e.pdown}},{key:"MoveUpFirst",value:function(t){pca.MoveUpFirst(t)}},{key:"MoveDownFirst",value:function(t){}},{key:"UnLinkFirst",value:function(t){return this.pca.UnLinkFirst(t)}},{key:"LinkFirst",value:function(t){this.pca.LinkFirst(t)}},{key:"AddClass",value:function(t){return this.pca.AddClass(t)}},{key:"FindFirst",value:function(t,e){return null==e&&(e=0),this.pca.FindFirst(t,e)}},{key:"FindFirstByPath",value:function(t){for(var e=t.split("/"),i=null,a=1;a<e.length;a++)i=null==i?this.FindFirst(e[a]):i.FindFirst(e[a]);return i}},{key:"FindNumber",value:function(t){return this.pca.FindNumber(t,0)}},{key:"FindFloat",value:function(t){return this.pca.FindFloat(t,0)}},{key:"FindWord",value:function(t){return this.pca.FindWord(t,0)}},{key:"FindCode",value:function(t){return this.pca.FindCode(t,0)}},{key:"FindClass",value:function(t){return this.pca.FindClass(t,0)}},{key:"FindPoint",value:function(t){return this.pca.FindPoint(t,0)}},{key:"FindMark",value:function(t){return this.pca.FindMark(t)}},{key:"DeleteObj",value:function(){}},{key:"GetCopy",value:function(){var t=new X40_CLASS;t.copyfrom(this);for(var e=this.pca.phead;null!=e;)t.LinkFirst(e.GetCopy()),e=e.pdown;return t}}]),X40_CLASS}();i.default=r},{"./X_FIRST":62,"./_CLASSARRAY":63}],60:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("./X_FIRST")),s=_interopRequireDefault(t("../../gbk"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(t){function X50_CODE(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,X50_CODE);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(X50_CODE.__proto__||Object.getPrototypeOf(X50_CODE)).call(this));return t.iType=50,t.iLen=7,t.pcode="",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(X50_CODE,n.default),a(X50_CODE,[{key:"Set",value:function(t,e){for(var i=new Uint8Array(e),a=0;a<e;a++)i[a]=t[a];this.pcode=s.default.gb2312a_to_utf8(i),this.iLen=this.pcode.length}},{key:"Get",value:function(){return this.pcode}},{key:"copyfrom",value:function(t){this.iX=t.iX,this.iY=t.iY,this.sName=t.sName,this.pcode=t.pcode,this.iLen=t.iLen}},{key:"GetCopy",value:function(){var t=new X50_CODE;return t.copyfrom(this),t}}]),X50_CODE}();i.default=r},{"../../gbk":24,"./X_FIRST":62}],61:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("./X_FIRST"),r=(a=s)&&a.__esModule?a:{default:a};var o=function(t){function X60_DATA(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,X60_DATA);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(X60_DATA.__proto__||Object.getPrototypeOf(X60_DATA)).call(this));return t.iType=30,t.iLen=8,t.sName="",t.pdata="",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(X60_DATA,r.default),n(X60_DATA,[{key:"SetPos",value:function(t,e){this.iX=t,this.iY=e}},{key:"Set",value:function(t){this.pdata=t}},{key:"Get",value:function(){return this.pdata}},{key:"copyfrom",value:function(t){this.iX=t.iX,this.iY=t.iY,this.sName=t.sName,this.pdata=t.pdata}},{key:"GetCopy",value:function(){var t=new X60_DATA;return t.copyfrom(this),t}}]),X60_DATA}();i.default=o},{"./X_FIRST":62}],62:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function X_FIRST(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,X_FIRST),this.iType=0,this.iX=0,this.iY=0,this.sName="",this.iLen=0,this.iXID=0,this.pup=null,this.pback=null,this.pfront=null,this.pdown=null}return a(X_FIRST,[{key:"Init",value:function(){this.iType=0}},{key:"SetName",value:function(t){this.sName=t}},{key:"SetPos",value:function(t,e){this.iX=t,this.iY=e}},{key:"GetBase",value:function(t){return null==t&&(t=this),null==t.pback?t:this.GetBase(t.pback)}},{key:"copyfrom",value:function(t){this.iX=t.iX,this.iY=t.iY,this.sName=t.sName}},{key:"GetCopy",value:function(){}}]),X_FIRST}();i.default=n},{}],63:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("./X_FIRST"),r=(a=s)&&a.__esModule?a:{default:a};var o=function(t){function _CLASSARRAY(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_CLASSARRAY);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(_CLASSARRAY.__proto__||Object.getPrototypeOf(_CLASSARRAY)).call(this));return e.phead=null,e.pend=null,e.pnext=null,e.pback=t,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(_CLASSARRAY,r.default),n(_CLASSARRAY,[{key:"copyfrom",value:function(t){for(var e=t.phead;null!==e;)this.LinkFirst(e.GetCopy()),e=e.pdown;null!=t.pnext&&new _CLASSARRAY(pback).copyfrom(t.pnext)}},{key:"UnLinkFirst",value:function(t){if(null===this.phead)return null;if(this.phead===t)this.pend===t?(this.phead=null,this.pend=null,this.pfront=null):(this.phead=phead.pdown,this.pfront=this.phead,this.phead.pup=null);else{for(var e=this.phead.pdown;e!==t&&e!==this.pend;)e=e.pdown;e===t&&(e===this.pend&&(this.pend=e.pup),e.pup.pdown=e.pdown,null!==e.pdown&&(e.pdown.pup=e.pup))}return t.pup=null,t.pdown=null,t.pback=null,t}},{key:"LinkFirst",value:function(t){null!==t&&(t.pback=this.pback,null===this.phead?(this.phead=t,this.pend=t,this.pfront=t,t.pup=null,t.pdown=null):(this.pend.pdown=t,t.pup=this.pend,t.pdown=null,this.pend=t))}},{key:"AddClass",value:function(t){var e=null;switch(t){case 10:e=new X10_NUMBER;break;case 20:e=new X20_FLOAT;break;case 30:e=new X30_WORD;break;case 40:e=new X40_CLASS;break;case 50:e=new X50_CODE;break;case 60:e=new X60_DATA}return null!==e&&(SetXid(e),e.pback=this.pback,null===this.phead?(this.phead=e,this.pend=e,this.pfront=e,e.pup=null,e.pdown=null):(this.pend.pdown=e,e.pup=this.pend,e.pdown=null,this.pend=e)),e}},{key:"FindFirst",value:function(t,e){for(var i=this.phead;null!==i;){if(i.sName===t)return i;if(e>0&&40===i.iType){var a=i.pca.FindFirst(t,e-1);if(null!==a)return a}i=i.pdown}return null}},{key:"FindNumber",value:function(t,e){for(var i=this.phead;null!==i;){if(10===i.iType&&i.sName===t)return i;if(e>0&&40===i.iType){var a=i.pca.FindNumber(t,e-1);if(null!==a)return a}i=i.pdown}return null}},{key:"FindFloat",value:function(t,e){for(var i=this.phead;null!==i;){if(20===i.iType&&i.sName===t)return i;if(e>0&&40===i.iType){var a=i.pca.FindFloat(t,e-1);if(null!==a)return a}i=i.pdown}return null}},{key:"FindWord",value:function(t,e){for(var i=this.phead;null!==i;){if(30===i.iType&&i.sName===t)return i;if(e>0&&40===i.iType){var a=i.pca.FindWord(t,e-1);if(null!==a)return a}i=i.pdown}return null}},{key:"FindClass",value:function(t,e){for(var i=this.phead;null!==i;){if(40===i.iType&&i.sName===t)return i;if(e>0&&40===i.iType){var a=i.pca.FindClass(t,e-1);if(null!==a)return a}i=i.pdown}return null}},{key:"FindCode",value:function(t,e){for(var i=this.phead;null!==i;){if(50===i.iType&&i.sName===t)return i;if(e>0&&40===i.iType){var a=i.pca.FindCode(t,e-1);if(null!==a)return a}i=i.pdown}return null}},{key:"FindData",value:function(t,e){for(var i=this.phead;null!==i;){if(60===i.iType&&i.sName===t)return i;if(e>0&&40===i.iType){var a=i.pca.FindData(t,e-1);if(null!==a)return a}i=i.pdown}return null}},{key:"FindPoint",value:function(t,e){for(var i=this.phead;null!==i;){if(70===i.iType&&i.sName===t)return i;if(e>0&&40===i.iType){var a=i.pca.FindPoint(t,e-1);if(null!==a)return a}i=i.pdown}return null}},{key:"FindMark",value:function(t){for(var e=this.phead;null!==e;){if(40===e.iType){var i=e;if(null===i.pca.phead)return null;if("唯一处理标识"===i.pca.phead.sName)if(10===i.pca.phead.iType)if(i.pca.phead.iNumber===t)return i;if(null!==(i=i.FindMark(t)))return i}e=e.pdown}return null}},{key:"DeleteObj",value:function(){}}]),_CLASSARRAY}();i.default=o},{"./X_FIRST":62}],64:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../config/GmConfig")),s=(_interopRequireDefault(t("../../map/DrawBuffer")),_interopRequireDefault(t("../../map/MapManager"))),r=_interopRequireDefault(t("../../engine/graphics/AnimaAction")),o=_interopRequireDefault(t("../../engine/graphics/M3DFast")),u=_interopRequireDefault(t("./GmPlay"));_interopRequireDefault(t("../../config/XDefine"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function _FIREWORKS(){_classCallCheck(this,_FIREWORKS),this.bUseing=!1,this.aa=new r.default},f=function(){function FireworksEffect(){var t;for(_classCallCheck(this,FireworksEffect),this.flist=new Array(FireworksEffect.MAXFIREWORKS),t=0;t<FireworksEffect.MAXFIREWORKS;t++)this.flist[t]=new l;this.iShadow=0}return a(FireworksEffect,[{key:"Draw",value:function(){var t,e,i,a=!1;for(t=0;t<FireworksEffect.MAXFIREWORKS;t++)if(this.flist[t].bUseing){if(this.flist[t].iDelay>0){this.flist[t].iDelay--;continue}switch(e=s.default.gi().iOffx+this.flist[t].iX,i=s.default.gi().iOffy+this.flist[t].iY,!a&&e>0&&i>0&&e<n.default.SCRW&&i<n.default.SCRH&&(o.default.gi().FillRect_2D(0,0,n.default.SCRW,n.default.SCRH,this.iShadow<<24),a=!0),this.flist[t].iMode){case 0:this.flist[t].aa.Draw(e,i);break;case 1:this.flist[t].iLoop<=3&&(this.flist[t].iAlpha-=1),this.flist[t].aa.DrawEx(e,i,this.flist[t].iAlpha,1,1,0,0,0),this.flist[t].iX=this.flist[t].iX+this.flist[t].iCs1-1e3,this.flist[t].iY=this.flist[t].iY+this.flist[t].iCs2-1e3;break;case 2:this.flist[t].aa.DrawEx(e,i,101,.1*this.flist[t].iCs1,.1*this.flist[t].iCs2,0,0,0)}this.flist[t].aa.NextFrame()&&(this.flist[t].iLoop>1?this.flist[t].iLoop--:this.flist[t].bUseing=!1)}a?this.iShadow<100&&(this.iShadow+=10):this.iShadow>0&&(o.default.gi().FillRect_2D(0,0,n.default.SCRW,n.default.SCRH,this.iShadow<<24),this.iShadow-=10)}},{key:"AddFireworks",value:function(t,e,i,a,n,s,r,o,l){var f;for(f=0;f<FireworksEffect.MAXFIREWORKS;f++)if(!this.flist[f].bUseing){if(this.flist[f].aa.iAnimaPoint=0,0==i?u.default.xani_skill.InitAnimaWithName(a,this.flist[f].aa):1==i?u.default.xani_effect.InitAnimaWithName(a,this.flist[f].aa):i>=10&&i<=12&&u.default.xani_skills[i-10].InitAnimaWithName(a,this.flist[f].aa),u.default.sop(",,,"+a+",,,"+this.flist[f].aa.iAnimaPoint),0==this.flist[f].aa.iAnimaPoint)return;return this.flist[f].iX=t,this.flist[f].iY=e,this.flist[f].iDelay=n,this.flist[f].iLoop=s,this.flist[f].iMode=r,this.flist[f].iCs1=o,this.flist[f].iCs2=l,this.flist[f].iAlpha=101,void(this.flist[f].bUseing=!0)}}}]),FireworksEffect}();i.default=f,f.MAXFIREWORKS=64,f.fe=new f,f.DrawAura=function(t,e,i,a,n){t<0||t>=128||(null==a?u.default.aa_auras[t].Draw(e,i):a.DrawAnima_aa(n,null,e,i,u.default.aa_auras[t]))}},{"../../config/GmConfig":5,"../../config/XDefine":7,"../../engine/graphics/AnimaAction":25,"../../engine/graphics/M3DFast":28,"../../map/DrawBuffer":283,"../../map/MapManager":286,"./GmPlay":65}],65:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=t("../../zero/Interface/GameVersion"),s=_interopRequireDefault(n),r=t("../../zero/Interface/PublicInterface"),o=_interopRequireDefault(r),u=t("../../config/GameData"),l=_interopRequireDefault(u),f=t("../../config/GmConfig"),h=_interopRequireDefault(f),d=t("../../config/XDefine"),c=_interopRequireDefault(d),m=t("../../map/MapManager"),g=_interopRequireDefault(m),_=_interopRequireDefault(t("../../mgm/newmainmenu/CreateRole")),p=(_interopRequireDefault(t("../../mgm/newmainmenu/LeadPage")),_interopRequireDefault(t("../../mgm/newmainmenu/SelectRole"))),b=_interopRequireDefault(t("../../mgm/newmainmenu/SelectSever")),D=(_interopRequireDefault(t("../../mgm/newmainmenu/local/Login_local")),_interopRequireDefault(t("../../mgm/newmainmenu/local/Regist_local")),_interopRequireDefault(t("../../engine/PackageTools"))),y=_interopRequireDefault(t("../../engine/TouchManager")),w=_interopRequireDefault(t("../../engine/control/XButton")),S=_interopRequireDefault(t("../../engine/data/DataEngine")),x=_interopRequireDefault(t("../../engine/graphics/AnimaAction")),P=_interopRequireDefault(t("../../engine/graphics/M3DFast")),v=_interopRequireDefault(t("../../engine/graphics/XAnima")),R=_interopRequireDefault(t("../../engine/network/NetFast")),M=_interopRequireDefault(t("../../engine/sound/WavFast")),C=_interopRequireDefault(t("../../engine/xms/XmsEngine")),k=_interopRequireDefault(t("../../engtst/mgm/History/XRecordFast")),T=(_interopRequireDefault(t("../../engtst/mgm/frame/KickOut")),_interopRequireDefault(t("../../engtst/mgm/frame/Message1"))),A=_interopRequireDefault(t("../../engtst/mgm/frame/SevConfirm")),G=(_interopRequireDefault(t("../../engtst/mgm/frame/format/FormatString")),_interopRequireDefault(t("../../engtst/mgm/frame/message/EasyMessage"))),E=_interopRequireDefault(t("../../engtst/mgm/frame/message/FrameMessage")),X=_interopRequireDefault(t("../../engtst/mgm/frame/message/FrameMessageEx")),O=_interopRequireDefault(t("../../engtst/mgm/gameing/ExtendButton")),I=_interopRequireDefault(t("../../engtst/mgm/gameing/Gameing")),F=(_interopRequireDefault(t("../../engtst/mgm/gameing/NearRole")),_interopRequireDefault(t("../../engtst/mgm/gameing/ProgressBar"))),N=_interopRequireDefault(t("../../engtst/mgm/gameing/act/PeakFight")),q=_interopRequireDefault(t("../../engtst/mgm/gameing/afternoonquestion/AQDoing")),L=_interopRequireDefault(t("../../engtst/mgm/gameing/afternoonquestion/AQStart")),B=_interopRequireDefault(t("../../engtst/mgm/gameing/chat/privatechat/FriendList")),Y=_interopRequireDefault(t("../../engtst/mgm/gameing/chat/privatechat/PrivateChatWatch")),W=_interopRequireDefault(t("../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame")),H=_interopRequireDefault(t("../../engtst/mgm/gameing/fast/IngotMall")),j=_interopRequireDefault(t("../../engtst/mgm/gameing/fast/SteeringWheel")),V=_interopRequireDefault(t("../../engtst/mgm/gameing/fast/SystemOperate")),U=(_interopRequireDefault(t("../../engtst/mgm/gameing/fast/WatchOn")),_interopRequireDefault(t("../../engtst/mgm/gameing/fight/DiePrompt"))),z=_interopRequireDefault(t("../../engtst/mgm/gameing/fight/XFight")),Q=_interopRequireDefault(t("../../engtst/mgm/gameing/fteam/FTRank")),J=_interopRequireDefault(t("../../engtst/mgm/gameing/fteam/MyFT")),K=_interopRequireDefault(t("../../engtst/mgm/gameing/fteam/manage/FTFrame")),Z=_interopRequireDefault(t("../../engtst/mgm/gameing/fteam/member/FTAgree")),$=_interopRequireDefault(t("../../engtst/mgm/gameing/fteam/member/FTApply")),tt=_interopRequireDefault(t("../../engtst/mgm/gameing/fteam/member/FTMember")),et=_interopRequireDefault(t("../../engtst/mgm/gameing/fuben/FubenMall")),it=_interopRequireDefault(t("../../engtst/mgm/gameing/fuben/MyFuBen")),at=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ExtLearnSkill")),nt=(_interopRequireDefault(t("../../engtst/mgm/gameing/gov/GovFrame")),_interopRequireDefault(t("../../engtst/mgm/gameing/gov/MemberDetail")),_interopRequireDefault(t("../../engtst/mgm/gameing/gov/MyGov"))),st=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/HireTraderWorker")),rt=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/NewShop")),ot=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/apply/ApplyForGov")),ut=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/base/NewGovFrame")),lt=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/manage/NewGovManage")),ft=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/mission/EntrustMission")),ht=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/fuben/GovFBTarget")),dt=_interopRequireDefault(t("../../engtst/mgm/gameing/help/BeginersGuide")),ct=_interopRequireDefault(t("../../engtst/mgm/gameing/help/DayAttend")),mt=_interopRequireDefault(t("../../engtst/mgm/gameing/help/FastGoods")),gt=_interopRequireDefault(t("../../engtst/mgm/gameing/help/JQMode")),_t=_interopRequireDefault(t("../../engtst/mgm/gameing/help/MySelect")),pt=_interopRequireDefault(t("../../engtst/mgm/gameing/help/ExtHelp/ExtHelp")),bt=_interopRequireDefault(t("../../engtst/mgm/gameing/help/FuYuan/FuYuan")),Dt=(_interopRequireDefault(t("../../engtst/mgm/gameing/help/TopIcon/LeaderBoard")),_interopRequireDefault(t("../../engtst/mgm/gameing/help/TopIcon/LeaderBoard_/LeaderBoardFrame"))),yt=_interopRequireDefault(t("../../engtst/mgm/gameing/help/ang/NewActivity")),wt=_interopRequireDefault(t("../../engtst/mgm/gameing/help/novice/NoviceCheckAnswer")),St=_interopRequireDefault(t("../../engtst/mgm/gameing/help/novice/NoviceHelp")),xt=_interopRequireDefault(t("../../engtst/mgm/gameing/help/novice/NoviceQuestionList")),Pt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/GmMe")),vt=(_interopRequireDefault(t("../../engtst/mgm/gameing/me/SetTitle")),_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/MyPets"))),Rt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/school/BackToSchool")),Mt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/MyBuy")),Ct=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/MySell")),kt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/shop_BuyDrawing")),Tt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/shop_PeakFight")),At=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/MyGoods")),Gt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/TmpGoods")),Et=_interopRequireDefault(t("../../engtst/mgm/gameing/me/land/LandFrame")),Xt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/land/MyLand")),Ot=_interopRequireDefault(t("../../engtst/mgm/gameing/me/land/PlantFrame")),It=_interopRequireDefault(t("../../engtst/mgm/gameing/me/mission/MissionLead")),Ft=_interopRequireDefault(t("../../engtst/mgm/gameing/me/mission/MyMission")),Nt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/mission/UpgradeEffect")),qt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/mounts/MyMounts")),Lt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/NpcShop")),Bt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/team/MyTeam")),Yt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/team/TeamCreate")),Wt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/team/TeamOperate")),Ht=_interopRequireDefault(t("../../engtst/mgm/gameing/me/team/TeamZhen")),jt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/trade/MyTrade")),Vt=_interopRequireDefault(t("../../engtst/mgm/gameing/me/trade/PetStoreFrame")),Ut=_interopRequireDefault(t("./XStat")),zt=_interopRequireDefault(t("./MyAI")),Qt=_interopRequireDefault(t("./GmProtocol")),Jt=_interopRequireDefault(t("./VoiceInterface"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var Kt=function(){function GmPlay(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GmPlay),this.bTimerOnce=!1,this.sCheckError="验证错误，强制退出游戏",this.btn_checkok=null,this.btn_checkreset=null,GmPlay.iNowMillis=c.default.get_ms(),GmPlay.gp=this,Pt.default.me=new Pt.default,Xt.default.ml=new Xt.default,this.bCheck=!1,this.iCheckFace=new Int32Array(4),this.iCheckRot=new Int32Array(4),this.iCheckAnima=new Int32Array(4),this.bCheck2=!1,this.sCheckWord=new Array(4),this.iCheckValue=new Array(4),this.iCheckResult=new Int32Array(4),this.iResultValue=new Array(4);for(var t=0;t<4;t++)this.iCheckValue[t]=new Int32Array(9),this.iResultValue[t]=new Int32Array(9);this.pls=new D.default,GmPlay.iDelay=0,GmPlay.x_record=new k.default(this.pls),GmPlay.x_record.ReadFrom(c.default.RECORDFILENAME),this.xm3f=P.default.gi(),GmPlay.xani_local=new v.default,GmPlay.xani_local.LoadAnima_fullpath("res/localres/anima",this.pls,!0,this._LoadFinish),this.iLoadStat=0}return a(GmPlay,[{key:"_LoadFinish",value:function(){Ut.default.gi().PushStat(Ut.default.GS_LEADPAGE)}},{key:"init_data",value:function(t){Ft.default.de_mission=new S.default(this.pls,"data/mission.dat",t),GmPlay.de_goods=new S.default(this.pls,"data/goods.dat",t),GmPlay.de_pet=new S.default(this.pls,"data/pet.dat",t),GmPlay.de_map=new S.default(this.pls,"data/map.dat",t),GmPlay.de_skill=new S.default(this.pls,"data/skill.dat",t),GmPlay.de_npc=new S.default(this.pls,"data/npc.dat",t),GmPlay.de_mounts=new S.default(this.pls,"data/mounts.dat",t),GmPlay.de_fuben=new S.default(this.pls,"data/fuben.dat",t),GmPlay.de_chuan_song=new S.default(this.pls,"data/chuan_song.dat",t),GmPlay.de_grow=new S.default(this.pls,"data/grow.dat",t)}},{key:"init_data_finished",value:function(){return!!(Ft.default.de_mission.bLoadSuccess&&GmPlay.de_goods.bLoadSuccess&&GmPlay.de_pet.bLoadSuccess&&GmPlay.de_map.bLoadSuccess&&GmPlay.de_skill.bLoadSuccess&&GmPlay.de_npc.bLoadSuccess&&GmPlay.de_mounts.bLoadSuccess&&GmPlay.de_fuben.bLoadSuccess&&GmPlay.de_chuan_song.bLoadSuccess&&GmPlay.de_grow.bLoadSuccess)}},{key:"init_anima1",value:function(t){var e="res/datapackage/",i=this.pls;GmPlay.xani_ui=new v.default(this.xm3f),GmPlay.xani_ui.LoadAnima_fullpath(e+"ui",i,t),GmPlay.xani_ui2=new v.default(this.xm3f),GmPlay.xani_ui2.LoadAnima_fullpath(e+"ui2",i,t),GmPlay.xani_ui3=new v.default(this.xm3f),GmPlay.xani_ui3.LoadAnima_fullpath(e+"ui3",i,t),GmPlay.xani_ui4=new v.default(this.xm3f),GmPlay.xani_ui4.LoadAnima_fullpath(e+"ui4",i,t),GmPlay.xani_nui1=new v.default(this.xm3f),GmPlay.xani_nui1.LoadAnima_fullpath(e+"uis/nui1",i,t),GmPlay.xani_nui2=new v.default(this.xm3f),GmPlay.xani_nui2.LoadAnima_fullpath(e+"uis/nui2",i,t),GmPlay.xani_nui3=new v.default(this.xm3f),GmPlay.xani_nui3.LoadAnima_fullpath(e+"uis/nui3",i,t),GmPlay.xani_nui4=new v.default(this.xm3f),GmPlay.xani_nui4.LoadAnima_fullpath(e+"uis/nui4",i,t),GmPlay.xani_nui5=new v.default(this.xm3f),GmPlay.xani_nui5.LoadAnima_fullpath(e+"uis/nui5",i,t),GmPlay.xani_nui6=new v.default(this.xm3f),GmPlay.xani_nui6.LoadAnima_fullpath(e+"uis/nui6",i,t),GmPlay.xani_nicon=new v.default(this.xm3f),GmPlay.xani_nicon.LoadAnima_fullpath(e+"skills/nicon",i,t),GmPlay.xani_aura=new v.default(this.xm3f),GmPlay.xani_aura.LoadAnima_fullpath(e+"anima/aura",i,t),GmPlay.xani_frame=new v.default(this.xm3f),GmPlay.xani_frame.LoadAnima_fullpath(e+"uis/ui_frame",i,t),GmPlay.xani_button=new v.default(this.xm3f),GmPlay.xani_button.LoadAnima_fullpath(e+"uis/ui_button",i,t),GmPlay.xani_icon=new v.default(this.xm3f),GmPlay.xani_icon.LoadAnima_fullpath(e+"uis/ui_icon",i,t),GmPlay.xani_other=new v.default(this.xm3f),GmPlay.xani_other.LoadAnima_fullpath(e+"uis/ui_other",i,t),GmPlay.xani_newrole=new Array(6),GmPlay.xani_weap=new Array(6),GmPlay.xani_color=new Array(6);for(var a=0;a<6;a++){GmPlay.xani_newrole[a]=new v.default(this.xm3f),GmPlay.xani_newrole[a].LoadAnima_fullpath(e+"nroles/role"+a,i,t),GmPlay.xani_weap[a]=new Array(10);for(var n=0;n<10;n++)GmPlay.xani_weap[a][n]=new v.default(this.xm3f),GmPlay.xani_weap[a][n].LoadAnima_fullpath(e+"nroles/role"+a+"/weap_"+a+"_"+n,i,t);GmPlay.xani_color[a]=new Array(5);for(n=0;n<5;n++)GmPlay.xani_color[a][n]=new v.default(this.xm3f),GmPlay.xani_color[a][n].LoadAnima_fullpath(e+"nroles/role"+a+"/c"+n,i,t)}for(GmPlay.xani_ngoods=new v.default(this.xm3f),GmPlay.xani_ngoods.LoadAnima_fullpath(e+"anima/ngoods",i,t),GmPlay.xani_stand=new Array(5),GmPlay.xani_shot=new Array(5),a=0;a<5;a++)GmPlay.xani_stand[a]=new v.default(this.xm3f),GmPlay.xani_shot[a]=new v.default(this.xm3f);GmPlay.xani_shot[0].LoadAnima_fullpath(e+"anima/shot0",i,t),GmPlay.xani_shot[1].LoadAnima_fullpath(e+"anima/shot1",i,t),GmPlay.xani_stand[0].LoadAnima_fullpath(e+"anima/stand0",i,t),GmPlay.xani_stand[1].LoadAnima_fullpath(e+"anima/stand1",i,t),GmPlay.xani_stand[2].LoadAnima_fullpath(e+"anima/stand2",i,t),GmPlay.xani_face=new v.default(this.xm3f),GmPlay.xani_face.LoadAnima_fullpath(e+"anima/face",i,t),GmPlay.xani_head=new v.default(this.xm3f),GmPlay.xani_head.LoadAnima_fullpath(e+"anima/head",i,t),GmPlay.xani_skill=new v.default(this.xm3f),GmPlay.xani_skill.LoadAnima_fullpath(e+"skill",i,t),GmPlay.xani_skills=new Array(13);var s=["other","sc1","sc2","sc3","sc4","sc5","sc6","sc7","sc8","sc9","equip","pet","equip2"];for(a=0;a<13;a++)GmPlay.xani_skills[a]=new v.default(this.xm3f),GmPlay.xani_skills[a].LoadAnima_fullpath(e+"skills/"+s[a],i,t);GmPlay.xani_effect=new v.default(this.xm3f),GmPlay.xani_effect.LoadAnima_fullpath(e+"effect",i,t),GmPlay.xani_grow=new v.default(this.xm3f),GmPlay.xani_grow.LoadAnima_fullpath(e+"grow",i,t),GmPlay.xani_pets=new Array(40);for(a=0;a<40;a++){GmPlay.xani_pets[a]=new v.default(this.xm3f),-1==(n=GmPlay.de_pet.intValue(a,0,2))?GmPlay.xani_pets[a].LoadAnima_fullpath(e+"pet/1",i,t):GmPlay.xani_pets[a].LoadAnima_fullpath(e+"pet/"+a,i,t)}GmPlay.xani_nmounts=new Array(3);for(a=0;a<3;a++){GmPlay.xani_nmounts[a]=new Array(3);for(n=0;n<3;n++)GmPlay.xani_nmounts[a][n]=new v.default(this.xm3f),GmPlay.xani_nmounts[a][n].LoadAnima_fullpath(e+"anima/nmounts/"+(a+1)+"/"+(n+1),i,t)}}},{key:"init_anima1_finished",value:function(){if(!GmPlay.xani_ui.bLoadSuccess)return!1;if(!GmPlay.xani_ui2.bLoadSuccess)return!1;if(!GmPlay.xani_ui3.bLoadSuccess)return!1;if(!GmPlay.xani_ui4.bLoadSuccess)return!1;if(!GmPlay.xani_nui1.bLoadSuccess)return!1;if(!GmPlay.xani_nui2.bLoadSuccess)return!1;if(!GmPlay.xani_nui3.bLoadSuccess)return!1;if(!GmPlay.xani_nui4.bLoadSuccess)return!1;if(!GmPlay.xani_nui5.bLoadSuccess)return!1;if(!GmPlay.xani_nui6.bLoadSuccess)return!1;if(!GmPlay.xani_nicon.bLoadSuccess)return!1;if(!GmPlay.xani_aura.bLoadSuccess)return!1;if(!GmPlay.xani_frame.bLoadSuccess)return!1;if(!GmPlay.xani_button.bLoadSuccess)return!1;if(!GmPlay.xani_icon.bLoadSuccess)return!1;if(!GmPlay.xani_other.bLoadSuccess)return!1;for(var t=0;t<6;t++){if(!GmPlay.xani_newrole[t].bLoadSuccess)return!1;for(var e=0;e<10;e++)if(!GmPlay.xani_weap[t][e].bLoadSuccess)return!1;for(e=0;e<5;e++)if(!GmPlay.xani_color[t][e].bLoadSuccess)return!1}if(!GmPlay.xani_ngoods.bLoadSuccess)return!1;if(!GmPlay.xani_shot[0].bLoadSuccess)return!1;if(!GmPlay.xani_shot[1].bLoadSuccess)return!1;if(!GmPlay.xani_stand[0].bLoadSuccess)return!1;if(!GmPlay.xani_stand[1].bLoadSuccess)return!1;if(!GmPlay.xani_stand[2].bLoadSuccess)return!1;if(!GmPlay.xani_face.bLoadSuccess)return!1;if(!GmPlay.xani_head.bLoadSuccess)return!1;if(!GmPlay.xani_skill.bLoadSuccess)return!1;for(t=0;t<13;t++)if(!GmPlay.xani_skills[t].bLoadSuccess)return!1;if(!GmPlay.xani_effect.bLoadSuccess)return!1;if(!GmPlay.xani_grow.bLoadSuccess)return!1;for(t=0;t<40;t++)if(!GmPlay.xani_pets[t].bLoadSuccess)return!1;for(t=0;t<3;t++)for(e=0;e<3;e++)if(!GmPlay.xani_nmounts[t][e].bLoadSuccess)return!1;return!0}},{key:"InitAnimaAndData",value:function(){switch(this.iLoadStat){case 0:GmPlay.xntf=new R.default("ws://121.40.40.172:11000/login"),this.init_data(!0),this.iLoadStat=1;break;case 1:this.init_data_finished()&&(this.iLoadStat=2);break;case 2:zt.default.gi().InitLink(),this.iLoadStat=3;break;case 3:this.init_anima1(!0),this.iLoadStat=4;break;case 4:this.init_anima1_finished()&&(this.iLoadStat=5);break;case 5:GmPlay.aa_auras=new Array(128);for(var t=0;t<128;t++)GmPlay.aa_auras[t]=new x.default,t<2&&GmPlay.xani_aura.InitAnimaWithName("aura"+t,GmPlay.aa_auras[t]);GmPlay.aa_fightready=new x.default,GmPlay.xani_skills[0].InitAnimaWithName("准备中",GmPlay.aa_fightready),this.iLoadStat=6;break;case 6:g.default.gi().LoadLogic()&&(Pt.default.me.Init(),GmPlay.m_vi=new Jt.default,GmPlay.m_vi.Init(),GmPlay.pxe=new C.default,GmPlay.x_wav=new M.default,this.iLoadStat=7);break;case 7:return!0}return!1}},{key:"GmTimer",value:function(){var t,e;if(GmPlay.iNowMillis=c.default.get_ms(),GmPlay.ResetSound(),0==g.default.gi().iMapChangeing?this.ProcTouch():(y.default.gi().clear(),j.default.sw.bLocked=!1),Ut.default.gi().Draw(),Ut.default.gi().bGameing()&&mt.default.gi().Draw(),zt.default.gi().AILogic(),W.default.gi().DrawSpeaker(),dt.default.gi().Draw(),F.default.gi().Draw(),g.default.gi().iMapChangeing>0&&(t=29*(t=g.default.gi().iMapChangeing%100)<<24,this.xm3f.FillRect_2D(0,0,h.default.SCRW,h.default.SCRH,t),g.default.gi().iMapChangeing>=100?g.default.gi().iMapChangeing<108&&g.default.gi().iMapChangeing++:g.default.gi().iMapChangeing--),null!=GmPlay.xntf&&GmPlay.xntf.NetLogic(),this.OnReceive(),GmPlay.iDelay++,X.default.fm.Draw(),E.default.fm.Draw(),G.default.easymsg.Draw(),dt.default.gi().InitGuide(),this.bCheck){var i,a,n;for(600,n=200,i=(h.default.SCRW-600)/2,a=(h.default.SCRH-n)/2,this.xm3f.FillRect_2D(i,a,i+600,a+n,2147483648),t=0;t<4;t++){if(e=60,0==this.iCheckFace[t])GmPlay.xani_newrole[this.iCheckAnima[t]].InitAnimaWithName("站立_下",GmPlay.aaa);else if(1==this.iCheckFace[t])GmPlay.xani_newrole[this.iCheckAnima[t]].InitAnimaWithName("站立_上",GmPlay.aaa);else if(2==this.iCheckFace[t])GmPlay.xani_newrole[this.iCheckAnima[t]].InitAnimaWithName("站立_左",GmPlay.aaa);else{if(3!=this.iCheckFace[t])break;GmPlay.xani_newrole[this.iCheckAnima[t]].InitAnimaWithName("站立_右",GmPlay.aaa)}GmPlay.aaa.SetFrame(GmPlay.iDelay),this.iCheckRot[t]<0?GmPlay.aaa.DrawEx(i+150*t+75,a+130,e,1,1,360+this.iCheckRot[t],-1,-1):GmPlay.aaa.DrawEx(i+150*t+75,a+130,e,1,1,this.iCheckRot[t],-1,-1)}this.iCheckLast>0?(this.iCheckLast--,this.xm3f.DrawTextEx(i+300,a+n-30,"等待"+parseInt(this.iCheckLast/15),4294967295,30,101,1,1,0,-2,-2)):GmPlay.iDelay/5%2==0&&this.xm3f.DrawTextEx(i+300,a+n-30,"选择一个面向你的角色",4294967295,30,101,1,1,0,-2,-2)}if(this.bCheck2){for(this.xm3f.FillRect_2D(this.C2X,this.C2Y,this.C2X+this.C2W+100,this.C2Y+this.C2H+100,2147483648),t=0;t<4;t++)this.xm3f.DrawTextEx(this.C2X+this.iCheckValue[t][5],this.C2Y+this.iCheckValue[t][6],this.sCheckWord[t],this.iCheckValue[t][4],this.iCheckValue[t][0],101,.01*this.iCheckValue[t][2],.01*this.iCheckValue[t][3],this.iCheckValue[t][1],this.C2X+this.iCheckValue[t][5]+.005*this.iCheckValue[t][2]*this.iCheckValue[t][0],this.C2Y+this.iCheckValue[t][6]+.005*this.iCheckValue[t][3]*this.iCheckValue[t][0]),this.iCheckValue[t][5]+=this.iCheckValue[t][7],this.iCheckValue[t][6]+=this.iCheckValue[t][8],this.iCheckValue[t][5]<0&&this.iCheckValue[t][7]<0&&(this.iCheckValue[t][7]=-this.iCheckValue[t][7]),this.iCheckValue[t][5]>this.C2W-this.iCheckValue[t][0]&&this.iCheckValue[t][7]>0&&(this.iCheckValue[t][7]=-this.iCheckValue[t][7]),this.iCheckValue[t][6]<0&&this.iCheckValue[t][8]<0&&(this.iCheckValue[t][8]=-this.iCheckValue[t][8]),this.iCheckValue[t][6]>this.C2H-this.iCheckValue[t][0]&&this.iCheckValue[t][8]>0&&(this.iCheckValue[t][8]=-this.iCheckValue[t][8]);for(this.xm3f.DrawTextEx(this.C2X+20,this.C2Y+this.C2H,"请按顺序点击文字组成成语",4294967295,30,101,1,1,0,0,0),t=0;t<this.iCRP;t++)e=this.iCheckResult[t],this.xm3f.DrawTextEx(this.C2X+20+80*t,this.C2Y+this.C2H+40,this.sCheckWord[e],this.iResultValue[t][4],this.iResultValue[t][0],101,.01*this.iResultValue[t][2],.01*this.iResultValue[t][3],this.iResultValue[t][1],this.C2X+20+80*t+.005*this.iResultValue[t][2]*this.iResultValue[t][0],this.C2Y+this.C2H+10+.005*this.iResultValue[t][3]*this.iResultValue[t][0]);this.btn_checkreset.Draw(),this.btn_checkok.Draw()}o.default.gi().Draw()}},{key:"ProcTouch",value:function(){for(var t,e,i;y.default.gi().poptouch();)if(t=y.default.gi().procing.iTouchStat,e=y.default.gi().procing.iX,i=y.default.gi().procing.iY,!o.default.gi().ProcTouch(y.default.gi().procing.iTouchStat,y.default.gi().procing.iX,y.default.gi().procing.iY)){if(this.bCheck2){var a;if(this.btn_checkok.ProcTouch(t,e,i))return this.btn_checkok.bCheck()&&(this.bCheck2=!1,Qt.default.gi().s_Check2Reply(1e3*this.iCheckResult[0]+100*this.iCheckResult[1]+10*this.iCheckResult[2]+this.iCheckResult[3])),!0;if(this.btn_checkreset.ProcTouch(t,e,i))return this.btn_checkreset.bCheck()&&(this.iCRP=0,this.iCheckResult[0]=0,this.iCheckResult[1]=0,this.iCheckResult[2]=0,this.iCheckResult[3]=0),!0;if(1==y.default.gi().procing.iTouchStat)for(n=0;n<4;n++)if(c.default.bInRect(y.default.gi().procing.iX,y.default.gi().procing.iY,this.C2X+this.iCheckValue[n][5],this.C2Y+this.iCheckValue[n][6],80,80)&&this.iCRP<4){for(this.iCheckResult[this.iCRP]=n,a=0;a<7;a++)this.iResultValue[this.iCRP][a]=this.iCheckValue[n][a];this.iCRP++,this.ResetCheckValue()}return!0}if(this.bCheck){var n,s,r;for(600,200,s=(h.default.SCRW-600)/2,r=(h.default.SCRH-200)/2,n=0;n<4&&!(this.iCheckLast>0);n++)3==y.default.gi().procing.iTouchStat&&c.default.bInRect(y.default.gi().procing.iX,y.default.gi().procing.iY,s+150*n,r,150,200)&&(0==this.iCheckFace[n]?(this.bCheck=!1,Qt.default.gi().s_CheckReply(n)):(GmPlay.xntf.bAllow=!1,Ut.default.gi().iXStat!=Ut.default.GS_KICKOUT&&Ut.default.gi().PushStat(Ut.default.GS_KICKOUT),Ut.default.gi().LastStat(0).sDetail=this.sCheckError,this.bCheck=!1));return!0}dt.default.gi().ProcTouch(y.default.gi().procing.iTouchStat,y.default.gi().procing.iX,y.default.gi().procing.iY)||E.default.fm.ProcTouch(y.default.gi().procing.iTouchStat,y.default.gi().procing.iX,y.default.gi().procing.iY)||X.default.fm.ProcTouch(y.default.gi().procing.iTouchStat,y.default.gi().procing.iX,y.default.gi().procing.iY)||Ut.default.gi().ProcTouch(y.default.gi().procing.iTouchStat,y.default.gi().procing.iX,y.default.gi().procing.iY,y.default.gi().procing.iSourceX,y.default.gi().procing.iSourceY)}return!1}},{key:"ResetCheckValue",value:function(){var t;for(t=0;t<4;t++)this.iCheckValue[t][0]=c.default.GetRand(60,80),0==c.default.GetRand(0,1)?this.iCheckValue[t][1]=c.default.GetRand(0,30):this.iCheckValue[t][1]=c.default.GetRand(330,360),this.iCheckValue[t][2]=c.default.GetRand(50,100),this.iCheckValue[t][3]=c.default.GetRand(50,100),this.iCheckValue[t][4]=4278190080|c.default.GetRand(128,255)<<16|c.default.GetRand(128,255)<<8|c.default.GetRand(128,255),this.iCheckValue[t][5]=c.default.GetRand(0,this.C2W),this.iCheckValue[t][6]=c.default.GetRand(0,this.C2H),this.iCheckValue[t][7]=c.default.GetRand(2,4),this.iCheckValue[t][8]=6-this.iCheckValue[t][7],0==c.default.GetRand(0,1)&&(this.iCheckValue[t][7]=-this.iCheckValue[t][7]),0==c.default.GetRand(0,1)&&(this.iCheckValue[t][8]=-this.iCheckValue[t][8])}},{key:"OnReceive",value:function(){if(null!=GmPlay.xntf)for(var t,e,i,a,n,r,u,l,f,d,m=0,D=this.pls;GmPlay.xntf.GetQueue();)switch(c.default.arraycopy(GmPlay.xntf.msg.recvout.data,0,D.databuf,0,GmPlay.xntf.msg.recvout.iSize),D.iOffset=0,D.iLength=GmPlay.xntf.msg.recvout.iSize,503!=(m=D.GetNextShort())&&2032!=m&&c.default.sop("------------------Recv msg : "+m),m){case 500:Qt.default.gi().GetBase(D),GmPlay.bConnected=!0,Qt.default.gi().s_CheckVersion();break;case 502:break;case 503:Qt.default.gi().iEchoId=D.GetNextByte(),GmPlay.xntf.msg.startmessage.data[GmPlay.xntf.msg.startmessage.iSize-1]=Qt.default.gi().iEchoId;break;case 510:t=D.GetNextByte(),k.default.iClientID=D.GetNextInt(),0==t&&(GmPlay.xntf.bAllow=!1,Ut.default.gi().PushStat(Ut.default.GS_KICKOUT),Ut.default.gi().LastStat(0).sDetail="当前游戏版本号过低，请下载最新版本的游戏后重新登录，点击确定按钮退出游戏");break;case 511:if(this.bCheck=!1,this.bCheck2=!1,GmPlay.xntf.bAllow=!1,Ut.default.gi().iXStat==Ut.default.GS_KICKOUT)break;Ut.default.gi().PushStat(Ut.default.GS_KICKOUT),Ut.default.gi().LastStat(0).sDetail=D.GetNextString();break;case 512:for(t=0;t<4;t++)this.iCheckFace[t]=c.default.GetRand(1,3),this.iCheckAnima[t]=c.default.GetRand(0,5),this.iCheckRot[t]=c.default.GetRand(0,60)-30;this.iCheckFace[D.GetNextByte()]=0,this.iCheckLast=80,this.bCheck=!0;break;case 513:f=D.GetNextString(),a=D.GetNextInt(),GmPlay.xntf.ResetSever(f,a);break;case 514:for(this.C2W=h.default.SCRW/2,this.C2H=h.default.SCRH/2,this.C2X=(h.default.SCRW-this.C2W)/2,this.C2Y=(h.default.SCRH-this.C2H)/2,this.iCRP=0,t=0;t<4;t++)this.sCheckWord[t]=D.GetNextString(),this.iCheckResult[t]=0;this.ResetCheckValue(),null==this.btn_checkok&&(this.btn_checkok=new w.default(GmPlay.xani_ui),this.btn_checkok.InitButton("统一大按钮2"),this.btn_checkok.sName="确定",this.btn_checkreset=new w.default(GmPlay.xani_ui),this.btn_checkreset.InitButton("统一大按钮2"),this.btn_checkreset.sName="重置"),this.btn_checkok.Move(this.C2X+this.C2W,this.C2Y+this.C2H-20-50,80,50),this.btn_checkreset.Move(this.C2X+this.C2W,this.C2Y+20,80,50),this.bCheck2=!0;break;case 515:GmPlay.iTraverse=D.GetNextInt(),1==GmPlay.iTraverse&&g.default.gi().RemoveTraverse(0);break;case 1e3:if(Ut.default.gi().LastStatType(0)!=Ut.default.GS_LOADING1||Ut.default.gi().LastStatType(1)!=Ut.default.GS_REGIST)break;1==(t=D.GetNextByte())?(f=Ut.default.gi().LastStat(1).in_user.sDetail,d=Ut.default.gi().LastStat(1).in_pass.sDetail,Ut.default.gi().PopStat(2),Ut.default.gi().PushStat(Ut.default.GS_LOGIN),Ut.default.gi().PushStat(Ut.default.GS_MESSAGE1),Ut.default.gi().LastStat(1).in_user.sDetail=f,Ut.default.gi().LastStat(1).in_pass.sDetail=d,Ut.default.gi().LastStat(0).sDetail="注册成功，进入登录页面"):(Ut.default.gi().PopStat(1),Ut.default.gi().PushStat(Ut.default.GS_MESSAGE1),Ut.default.gi().LastStat(0).sDetail=D.GetNextString());break;case 1001:1==(t=D.GetNextByte())?(31==s.default.QUDAO&&o.default.gi().proc_extend("uc_get_acid",0,D.GetNextString()),0==k.default.iHaveSeverRecord?Qt.default.gi().s_GetSeverList(100):Qt.default.gi().s_GetRoleList(k.default.iLastSector,k.default.iLastSever),o.default.gi().iStat=10,c.default.sop("登陆成功")):(Ut.default.gi().PopStat(1),T.default.Open(D.GetNextString()));break;case 1006:Pt.default.me.iRid=0,p.default.Open(D);break;case 1003:break;case 1002:b.default.Open(D);break;case 1004:if(Ut.default.gi().LastStatType(0)!=Ut.default.GS_LOADING1||Ut.default.gi().LastStatType(1)!=Ut.default.GS_CREATEROLE)break;0==(e=D.GetNextByte())?(D.GetNextString(),Qt.default.gi().s_StartGame(D.GetNextInt())):(G.default.easymsg.AddMessage(D.GetNextString()),Ut.default.gi().PopStat(1));break;case 1005:0==(e=D.GetNextByte())?(Qt.default.gi().iUid=D.GetNextInt(),Qt.default.gi().iPid=D.GetNextInt(),f=D.GetNextString(),a=D.GetNextInt(),Qt.default.gi().iEchoId=0,Qt.default.gi().set_Head(),0==o.default.QUDAO?GmPlay.xntf.ResetSever("ws://"+f+":"+a):GmPlay.xntf.ResetSever("ws://121.40.40.172:11000/game"+a),Ut.default.gi().ResetStat(),Ut.default.gi().PushStat(Ut.default.GS_GAMEING),Ut.default.gi().PushStat(Ut.default.GS_LOADING2),0==k.default.iQQSay&&(pt.default.Initex("欢迎来到七国，我是琴清，下面我将带您熟悉游戏#e#cff0000老玩家可在系统设置关闭引导",0,1,"普通引导",0,2,"语音引导",1,1,"确定"),k.default.iQQSay++),h.default.SYSW>=1280?V.default.iScreenLS=192e3/(h.default.SYSW-800):V.default.iScreenLS=400*(h.default.SYSW-800)/480,V.default.iSameRate=0,Qt.default.gi().s_UseSkill(100,V.default.iNearRoleCount,0,0,0,0,0)):5==e&&(Ut.default.gi().PopStat(1),Ut.default.gi().PushStat(Ut.default.GS_MESSAGE1),Ut.default.gi().objstack[Ut.default.gi().iStatPoint].sDetail="进入失败，联系GM");break;case 1007:_.default.GetRandName(D);break;case 1100:o.default.gi().OnReceive(D);break;case 2e3:for(t=D.GetNextInt(),e=D.GetNextInt(),Pt.default.me.iX=D.GetNextInt(),Pt.default.me.iY=D.GetNextInt(),Pt.default.me.iDx=Pt.default.me.iX,Pt.default.me.iDy=Pt.default.me.iY,g.default.gi().vbk.ClearVisual(),I.default.gameing.m_map.LoadMap(t,e,I.default.gameing.me.iX,I.default.gameing.me.iY),g.default.gi().mapdata.sMapDetail=D.GetNextString(),g.default.gi().mapdata.iMapFlag=D.GetNextInt(),0!=(1&g.default.gi().mapdata.iMapFlag)&&g.default.gi().vbk.ClearVisual(),I.default.gameing.me.ChangeStat("站立"),t=0;t<Pt.default.MAXMARK;t++)I.default.gameing.me.iMarks[t][0]=I.default.gameing.me.iX,I.default.gameing.me.iMarks[t][1]=I.default.gameing.me.iY,I.default.gameing.me.iMarks[t][2]=I.default.gameing.me.iFace8;break;case 2001:Pt.default.me.getinit(D),Qt.default.gi().s_CheckVersion(),o.default.gi().mta_record(6,0,"");break;case 2002:Pt.default.me.GetBaseAtt(D);break;case 2003:Pt.default.me.getschoolskill(D);break;case 2004:Pt.default.me.getgovskill(D);break;case 2005:Pt.default.me.getgovxiu(D);break;case 2006:Pt.default.me.getflag(D);break;case 2007:Ut.default.gi().LastStatType(0)==Ut.default.GS_SETTITLE&&Ut.default.gi().LastStat(0).getlist(D);break;case 2008:Pt.default.me.sName=D.GetNextString();break;case 2009:Pt.default.me.GetExt(D);break;case 2020:W.default.gi().GetMessage(D);break;case 2021:B.default.gi().GetFriends(D);break;case 2022:Y.default.gi().GetPrivateMessage(D);break;case 2030:for(t=D.GetNextInt(),e=D.GetNextInt(),Pt.default.me.iX=D.GetNextInt(),Pt.default.me.iY=D.GetNextInt(),g.default.gi().vbk.ClearVisual(),g.default.gi().LoadMap(t,e,Pt.default.me.iX,Pt.default.me.iY),g.default.gi().mapdata.sMapDetail=D.GetNextString(),g.default.gi().mapdata.iMapFlag=D.GetNextInt(),0!=(1&g.default.gi().mapdata.iMapFlag)&&g.default.gi().vbk.ClearVisual(),Pt.default.me.ChangeStat("站立"),t=0;t<Pt.default.MAXMARK;t++)I.default.gameing.me.iMarks[t][0]=I.default.gameing.me.iX,I.default.gameing.me.iMarks[t][1]=I.default.gameing.me.iY,I.default.gameing.me.iMarks[t][2]=I.default.gameing.me.iFace8;for(t=0,e=0;e<I.default.iNearMax;e++)I.default.gameing.nrs[e].bUseing=!1;g.default.gi().iMapChangeing>=100&&(g.default.gi().iMapChangeing-=100);break;case 2031:t=D.GetNextInt(),e=D.GetNextInt(),t==Pt.default.me.iX&&e==Pt.default.me.iY||(g.default.gi().mfy.iPath[0][0]=Pt.default.me.iX,g.default.gi().mfy.iPath[0][1]=Pt.default.me.iY,g.default.gi().mfy.iPath[1][0]=t,g.default.gi().mfy.iPath[1][1]=e,g.default.gi().mfy.iPathDeep=2,g.default.gi().vbk.iGoToNpcFlag=-1,g.default.gi().vbk.iGoToNpcId=-1,Pt.default.me.start(g.default.gi().mfy.iPath,g.default.gi().mfy.iPathDeep));break;case 2032:var y,S;for(a=0,t=D.GetNextInt();t>0;){for(S=!1,e=0;e<I.default.iNearMax&&(!I.default.gameing.nrs[e].bUseing||I.default.gameing.nrs[e].iRid!=t);e++);if(e>=I.default.iNearMax){for(e=0;e<I.default.iNearMax&&I.default.gameing.nrs[e].bUseing;e++);e>=I.default.iNearMax&&(e=0),S=!0,I.default.gameing.nrs[e].bUseing=!0,I.default.gameing.nrs[e].iRid=t,I.default.gameing.nrs[e].iPopoDelay=0,I.default.gameing.nrs[e].sTitle="",I.default.gameing.nrs[e].iFollowPid=0,I.default.gameing.nrs[e].iFollowTid=1e4}y=I.default.gameing.nrs[e],0!=(1&(e=D.GetNextByte()))&&(y.iDx=D.GetNextShort(),y.iDy=D.GetNextShort()),0!=(2&e)&&(y.iFighting=D.GetNextByte()),0!=(4&e)&&(y.iIsLeader=D.GetNextByte()),0!=(8&e)&&(y.sName=D.GetNextString(),i=D.GetNextByte(),y.iSex=parseInt(i/10),y.iRace=i%10,y.bsc=!0),0!=(16&e)&&(y.iDFaceTo=D.GetNextByte()),0!=(32&e)&&(0==(1&(i=D.GetNextByte()))?y.iIsSelling=0:(y.iIsSelling=1,y.sSellName=D.GetNextString()),y.iIsVip=0==(2&i)?0:1,y.iDChangeType=0==(4&i)?0:D.GetNextShort(),0==(8&i)?(y.iColor[0]=0,y.iColor[1]=0,y.iColor[2]=0,y.iColor[3]=0,y.iColor[4]=0,y.iColor[5]=0):(n=D.GetNextShort(),y.iColor[0]=7&n,y.iColor[1]=n>>3&7,y.iColor[2]=n>>6&7,y.iColor[3]=n>>9&7,y.iColor[4]=n>>12&7),y.iAura=0==(16&i)?0:D.GetNextShort()),0!=(64&e)&&(y.iDMountsTid=D.GetNextShort(),i=D.GetNextInt(),y.iDWeapTid=i%1e4,y.bwc=!0,i=D.GetNextShort(),y.iSchoolId=parseInt(i/1e3),y.iLev=i%1e3,y.sTitle=D.GetNextString(),y.iFollowPid=D.GetNextInt(),y.iFollowTid=D.GetNextShort(),y.sFollowName=D.GetNextString()),S&&(y.iX=y.iDx,y.iY=y.iDy,y.SetMarks(),y.iFaceTo=y.iDFaceTo,y.bfc8=!0),0!=(128&e)&&(y.bUseing=!1,a++,S&&GmPlay.sop1("m error")),t=D.GetNextInt()}break;case 2033:3==(t=D.GetNextByte())?Yt.default.teamlist(D):1==t?Wt.default.rolelist(D):2==t?Wt.default.sZz=D.GetNextString():4==t?(Ut.default.gi().PushStat(Ut.default.GS_TEAMOPERATE),Qt.default.gi().s_TeamOperate(10,0,0)):5==t&&(1==D.GetNextByte()?Bt.default.bSingleAutoTeaming=!0:Bt.default.bSingleAutoTeaming=!1);break;case 2034:t=D.GetNextInt(),e=D.GetNextInt(),Pt.default.me.iX=t,Pt.default.me.iY=e,g.default.gi().mfy.iPath[0][0]=Pt.default.me.iX,g.default.gi().mfy.iPath[0][1]=Pt.default.me.iY,g.default.gi().mfy.iPath[1][0]=Pt.default.me.iX,g.default.gi().mfy.iPath[1][1]=Pt.default.me.iY,g.default.gi().mfy.iPathDeep=1,Pt.default.me.ChangeStat("站立");break;case 2035:if(Bt.default.iTeamRid[0]=D.GetNextInt(),0==Bt.default.iTeamRid[0])Bt.default.iTmpTeamRid[0]=0;else{for(t=0;t<Pt.default.MAXTEAMOLE;t++)t>0&&(Bt.default.iTeamRid[t]=D.GetNextInt()),Bt.default.iTmpTeamRid[t]=D.GetNextInt(),0!=Bt.default.iTmpTeamRid[t]&&(Bt.default.sName[t]=D.GetNextString(),Bt.default.iRas[t]=D.GetNextByte(),Bt.default.iSchoolId[t]=D.GetNextByte(),Bt.default.iLev[t]=D.GetNextShort(),n=D.GetNextShort(),Bt.default.iColor[t][0]=7&n,Bt.default.iColor[t][1]=n>>3&7,Bt.default.iColor[t][2]=n>>6&7,Bt.default.iColor[t][3]=n>>9&7,Bt.default.iColor[t][4]=n>>12&7,Bt.default.iWeapTid[t]=D.GetNextShort(),Bt.default.sMapName[t]=D.GetNextString());Pt.default.iTeamZhen=D.GetNextByte(),Bt.default.iTeamTarget=D.GetNextByte(),Pt.default.iTeamMap=D.GetNextShort(),Bt.default.iLev1=D.GetNextShort(),Bt.default.iLev2=D.GetNextShort(),1==D.GetNextByte()?Bt.default.bLeaderAutoTeaming=!0:Bt.default.bLeaderAutoTeaming=!1}Wt.default.CleanAnima(),Ht.default.CleanAnima(),Ut.default.gi().LastStatType(0)==Ut.default.GS_TEAMCREATE&&Ut.default.gi().PopStat(1);break;case 2036:0==(t=D.GetNextByte())?Wt.default.AddTeamRequest(D):1==t&&Pt.default.me.BeInvite(D);break;case 2040:At.default.gi().GetGoods(D);break;case 2041:At.default.gi().UpdateOneGoods(D);break;case 2043:Ct.default.gi().InitSell(D);break;case 2044:Ct.default.gi().IndexSell(D);break;case 2045:Mt.default.gi().IndexBuy(D);break;case 2046:Gt.default.getgoods(D);break;case 2047:Ct.default.gi().AddSellRecord(D);break;case 2048:mt.default.gi().PushGoods(D);break;case 2049:rt.default.Open(D);break;case 2050:vt.default.mp.GetPets(D);break;case 2051:vt.default.mp.UpdateOnePet(D);break;case 2052:vt.default.mp.GetPetBaseAtt(D);break;case 2056:Vt.default.Open(D);break;case 2060:g.default.gi().vbk.getnpc(D);break;case 2061:_t.default.Open(D);break;case 2062:g.default.gi().vbk.npctalk(D);break;case 2063:g.default.gi().vbk.clearnpc(D);break;case 2064:Lt.default.ns.FreshGoods(D);break;case 2065:g.default.gi().vbk.npcmove(D);break;case 2066:H.default.OPEN(D);break;case 2067:g.default.gi().vbk.getnpctalkext(D);break;case 2068:A.default.Open(D);break;case 2069:t=D.GetNextInt(),e=D.GetNextInt(),i=D.GetNextByte(),f=D.GetNextString(),a=D.GetNextInt(),n=D.GetNextInt(),r=D.GetNextByte(),u=D.GetNextInt(),l=D.GetNextInt(),FireworksEffect.fe.AddFireworks(t,e,i,f,a,n,r,u,l);break;case 2070:Ft.default.m.getmissionindex(D);break;case 2071:Ft.default.m.getmissiondetail(D),It.default.gi().FreshMission();break;case 2072:Ft.default.m.cleanclientmission(D),It.default.gi().FreshMission();break;case 2080:nt.default.mg.initmygov(D);break;case 2081:break;case 2083:if(Ut.default.gi().iXStat==Ut.default.GS_GOVFRAME)Ut.default.gi().LastStat(0).getgovdata(D);else if(Ut.default.gi().LastStatType(0)==Ut.default.GS_MEMBERDETAIL){Ut.default.x_stat.LastStat(0).getgovdata(D)}break;case 2085:g.default.gi().mapdata.sMapDetail=D.GetNextString();break;case 2088:nt.default.mg.govoperateframe(D);break;case 2090:at.default.Open(D);break;case 2093:Ut.default.gi().LastStatType(0)==Ut.default.GS_LOADING1&&Ut.default.gi().PopStat(1),Ut.default.gi().LastStatType(0)==Ut.default.GS_FINDFRIEND&&Ut.default.gi().PopStat(1),Ut.default.gi().LastStatType(0)!=Ut.default.GS_WATCHON&&Ut.default.gi().PushStat(Ut.default.GS_WATCHON),Ut.default.gi().LastStat(0).InitData(D);break;case 2094:St.default.sDetail=D.GetNextString(),St.default.sTitle=D.GetNextString(),D.GetNextData(),St.default.sDetail=D.DataToString();break;case 2095:0==(e=D.GetNextByte())?ot.default.Open(D):1==e?ot.default.Get(D):2==e?ot.default.Applyed(D):3==e?ut.default.Open(D):5==e?ut.default.InitMemberList(D):6==e?ut.default.InitMemberDetail(D):7==e?ut.default.ChangeJob(D):9==e?ut.default.ApplyList(D):10==e?ut.default.ApplyDetail(D):11==e?ut.default.ApplyCheck(D):12==e?ut.default.InitGovEvent(D):13==e?ut.default.InitEventDetail(D):14==e?ft.default.GetMyMission(D):15==e?ft.default.GetMyDetail(D):17==e?ft.default.CancelEntrust(D):18==e?lt.default.GetSet(D):19==e?ut.default.UpdateDetail(D):21==e?st.default.Open(D):22==e&&ht.default.GetData(D);break;case 2096:zt.default.gi().getlogicpath(D);break;case 2097:0==(e=D.GetNextByte())?It.default.gi().special_doyb():1==e&&(bt.default.fy.bShow=!0);break;case 2010:jt.default.mt.tradestart(D);break;case 2011:Ut.default.gi().iXStat==Ut.default.GS_MYTRADEFRAME&&Ut.default.gi().PopStat(1),jt.default.bCheckTradeing=!1;break;case 2012:Ut.default.gi().iXStat==Ut.default.GS_MYTRADEFRAME&&jt.default.mt.tradeready(D);break;case 2900:0==(t=D.GetNextByte())?kt.default.Open(D):1==t&&Tt.default.Open(D);break;case 2100:qt.default.mm.UpdateOneMounts(D);break;case 2150:Xt.default.ml.Init(D);break;case 2151:Xt.default.bShowBlock=!0;break;case 2152:Ot.default.Open(D);break;case 2153:Et.default.Open(D);break;case 2205:for(;Ut.default.gi().iXStat!=Ut.default.GS_GAMEING&&Ut.default.gi().iXStat!=Ut.default.GS_PRIVATECHAT&&Ut.default.gi().iXStat!=Ut.default.GS_SENDPUBLICCHAT;)Ut.default.gi().PopStat(1);g.default.gi().iMapChangeing=0,g.default.gi().mfy.iPathDeep=0,Pt.default.me.ChangeStat("站立"),V.default.SetScreenMode(10),z.default.gi().InitFight(D),V.default.SetScreenMode(11),j.default.sw.bLocked=!1;break;case 2206:z.default.gi().updatefat(D);break;case 2207:z.default.gi().setpetused(D);break;case 2202:z.default.gi().getfightdata(D);break;case 2203:z.default.gi().bFightFinished=!0;break;case 2204:z.default.gi().getfightflag(D);break;case 2208:U.default.bOpen=!0,D.GetNextByte(),U.default.iLostExp=D.GetNextInt(),U.default.iLostMoney=D.GetNextInt(),U.default.sDetail=D.GetNextString();break;case 2209:for(a=0;a<6&&!((t=D.GetNextByte())>=64);a++)e=D.GetNextInt(),i=D.GetNextInt(),At.default.gi().goods[1][t].iGid==e&&(At.default.gi().goods[1][t].iAtts[5]=i);break;case 2301:xt.default.getquestion(D);break;case 2302:wt.default.getanswer(D);break;case 2303:yt.default.Open(D);break;case 2304:ct.default.Open(D);break;case 2305:dt.default.gi().InitGuideFromSever(D);break;case 2306:pt.default.Init(D);break;case 2307:Rt.default.Open(D);break;case 2400:break;case 2401:it.default.OpenManage(D);break;case 2402:it.default.OpenApply(D);break;case 2403:it.default.GetStat(D),GmPlay.bInitFinished=!0;break;case 2404:it.default.GetTarget(D);break;case 2408:et.default.OPEN(D);break;case 2500:J.default.mft.iFTid=D.GetNextInt(),J.default.mft.iFTJob=D.GetNextInt();break;case 2501:K.default.Open(D);break;case 2502:$.default.Open(D);break;case 2503:tt.default.Open(D);break;case 2504:Z.default.Open(D);break;case 2505:Q.default.Open(D);case 2506:Q.default._2506c(D);break;case 2600:G.default.easymsg.AddMessage(D.GetNextString()),Ut.default.gi().iXStat==Ut.default.GS_LOADING1&&Ut.default.gi().PopStat(1),g.default.gi().iMapChangeing=0;break;case 2601:E.default.fm.Open(D.GetNextString()),Ut.default.gi().iXStat==Ut.default.GS_LOADING1&&Ut.default.gi().PopStat(1),g.default.gi().iMapChangeing=0;break;case 2602:F.default.gi().InitProgress(D);break;case 2700:1==(e=D.GetNextByte())?(L.default.bShow=!0,L.default.Open()):L.default.bShow=!1;break;case 2701:q.default.Open(D);break;case 2800:O.default.peb.SetIcon(D);break;case 2801:this.RunCommand(D);break;case 2802:X.default.fm.Open(D.GetNextString()),Ut.default.gi().iXStat==Ut.default.GS_LOADING1&&Ut.default.gi().PopStat(1),g.default.gi().iMapChangeing=0;break;case 2910:Dt.default.LeaderBoardFresh(D);break;case 2901:0==(t=D.GetNextByte())&&N.default.Open(D);break;case 5e3:GmPlay.pxe.RunByPls(D)}}},{key:"RunCommand",value:function(t){var e=t.GetNextString(),i=t.GetNextInt(),a=t.GetNextString();"首次登陆黑屏提示语"==e?gt.default.jq.StartJQ(2):"升级效果"==e?Nt.default.ue.Init():"活跃抽奖结果"==e?Ut.default.gi().iXStat==Ut.default.GS_PROMPTACTIVITY&&Ut.default.gi().LastStat(0).lottery_startround(i):"帮派副本进度查询"==e?ht.default.Open():"升级"==e?o.default.gi().mta_record(10,0,""):"uc_get_sign"==e&&o.default.gi().proc_extend(e,i,a)}}]),GmPlay}();i.default=Kt,Kt.iPlayingId=-1,Kt.ResetSound=function(){if(null!=Kt.x_wav){if(0==V.default.iMusic||M.default.bPause)return Kt.x_wav.StopBackMusic(),void(Kt.iPlayingId=-1);var t=-1;if((t=Ut.default.gi().bGameing()?z.default.bFighting?1:1==g.default.gi().iCurrentMapId||3==g.default.gi().iCurrentMapId||14==g.default.gi().iCurrentMapId||15==g.default.gi().iCurrentMapId||16==g.default.gi().iCurrentMapId?2:3:0)!=Kt.iPlayingId)switch(Kt.iPlayingId=t,t){case 0:Kt.x_wav.StartBackMusic("start",!0);break;case 1:Kt.x_wav.StartBackMusic("fight",!0);break;case 2:Kt.x_wav.StartBackMusic("city",!0);break;case 3:Kt.x_wav.StartBackMusic("site",!0)}}},Kt.bInitFinished=!1,Kt.sop=function(t){},Kt.sop1=function(t){},Kt.sop2=function(t){},Kt.pp=null,Kt.gi=function(){return null==Kt.pp&&(Kt.pp=new Kt),Kt.pp},Kt.iDelay,Kt.aaa=new x.default,Kt.aa_auras,Kt.aa_fightready,Kt.xntf,Kt.x_record,Kt.x_wav=null,Kt.xani_local,Kt.xani_nui1,Kt.xani_nui2,Kt.xani_nui3,Kt.xani_nui4,Kt.xani_nui5,Kt.xani_nui6,Kt.xani_aura,Kt.xani_nicon,Kt.xani_ngoods,Kt.xani_stand,Kt.xani_shot,Kt.xani_frame,Kt.xani_button,Kt.xani_icon,Kt.xani_other,Kt.xani_back,Kt.xani_color,Kt.xani_newrole,Kt.xani_weap,Kt.xani_nmounts,Kt.xani_ui,Kt.xani_ui2,Kt.xani_ui3,Kt.xani_ui4,Kt.xani_face,Kt.xani_head,Kt.xani_skill,Kt.xani_effect,Kt.xani_skills,Kt.xani_grow,Kt.xani_pets,Kt.de_goods,Kt.de_pet,Kt.de_map,Kt.de_skill,Kt.de_npc,Kt.de_mounts,Kt.de_fuben,Kt.de_chuan_song,Kt.de_grow,Kt.pxe,Kt.gp,Kt.bCheckRes=!1,Kt.iTraverse=0,Kt.m_vi,Kt.sLoginIp=l.default.sLGURL,Kt.iLoginPort=8002,Kt.bInited=!1,Kt.bConnected=!1,Kt.iNowMillis,Kt.xntf=null},{"../../config/GameData":4,"../../config/GmConfig":5,"../../config/XDefine":7,"../../engine/PackageTools":9,"../../engine/TouchManager":10,"../../engine/control/XButton":14,"../../engine/data/DataEngine":20,"../../engine/graphics/AnimaAction":25,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engine/network/NetFast":33,"../../engine/sound/WavFast":36,"../../engine/xms/XmsEngine":40,"../../engtst/mgm/History/XRecordFast":67,"../../engtst/mgm/frame/KickOut":75,"../../engtst/mgm/frame/Message1":78,"../../engtst/mgm/frame/SevConfirm":79,"../../engtst/mgm/frame/format/FormatString":81,"../../engtst/mgm/frame/message/EasyMessage":86,"../../engtst/mgm/frame/message/FrameMessage":87,"../../engtst/mgm/frame/message/FrameMessageEx":88,"../../engtst/mgm/gameing/ExtendButton":90,"../../engtst/mgm/gameing/Gameing":91,"../../engtst/mgm/gameing/NearRole":93,"../../engtst/mgm/gameing/ProgressBar":94,"../../engtst/mgm/gameing/act/PeakFight":95,"../../engtst/mgm/gameing/afternoonquestion/AQDoing":96,"../../engtst/mgm/gameing/afternoonquestion/AQStart":97,"../../engtst/mgm/gameing/chat/privatechat/FriendList":102,"../../engtst/mgm/gameing/chat/privatechat/PrivateChatWatch":106,"../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame":111,"../../engtst/mgm/gameing/fast/IngotMall":121,"../../engtst/mgm/gameing/fast/SteeringWheel":123,"../../engtst/mgm/gameing/fast/SystemOperate":124,"../../engtst/mgm/gameing/fast/WatchOn":125,"../../engtst/mgm/gameing/fight/DiePrompt":127,"../../engtst/mgm/gameing/fight/XFight":130,"../../engtst/mgm/gameing/fteam/FTRank":139,"../../engtst/mgm/gameing/fteam/MyFT":140,"../../engtst/mgm/gameing/fteam/manage/FTFrame":141,"../../engtst/mgm/gameing/fteam/member/FTAgree":145,"../../engtst/mgm/gameing/fteam/member/FTApply":146,"../../engtst/mgm/gameing/fteam/member/FTMember":147,"../../engtst/mgm/gameing/fuben/FubenMall":150,"../../engtst/mgm/gameing/fuben/MyFuBen":152,"../../engtst/mgm/gameing/gov/ExtLearnSkill":155,"../../engtst/mgm/gameing/gov/GovFrame":156,"../../engtst/mgm/gameing/gov/MemberDetail":159,"../../engtst/mgm/gameing/gov/MyGov":160,"../../engtst/mgm/gameing/gov/ext/HireTraderWorker":162,"../../engtst/mgm/gameing/gov/ext/NewShop":163,"../../engtst/mgm/gameing/gov/ext/apply/ApplyForGov":165,"../../engtst/mgm/gameing/gov/ext/base/NewGovFrame":170,"../../engtst/mgm/gameing/gov/ext/manage/NewGovManage":177,"../../engtst/mgm/gameing/gov/ext/mission/EntrustMission":178,"../../engtst/mgm/gameing/gov/fuben/GovFBTarget":180,"../../engtst/mgm/gameing/help/BeginersGuide":181,"../../engtst/mgm/gameing/help/DayAttend":182,"../../engtst/mgm/gameing/help/ExtHelp/ExtHelp":183,"../../engtst/mgm/gameing/help/FastGoods":184,"../../engtst/mgm/gameing/help/FuYuan/FuYuan":185,"../../engtst/mgm/gameing/help/JQMode":187,"../../engtst/mgm/gameing/help/MySelect":189,"../../engtst/mgm/gameing/help/TopIcon/LeaderBoard":195,"../../engtst/mgm/gameing/help/TopIcon/LeaderBoard_/LeaderBoardFrame":196,"../../engtst/mgm/gameing/help/ang/NewActivity":200,"../../engtst/mgm/gameing/help/novice/NoviceCheckAnswer":204,"../../engtst/mgm/gameing/help/novice/NoviceHelp":205,"../../engtst/mgm/gameing/help/novice/NoviceQuestionList":206,"../../engtst/mgm/gameing/me/GmMe":211,"../../engtst/mgm/gameing/me/SetTitle":213,"../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../engtst/mgm/gameing/me/goods/TmpGoods":225,"../../engtst/mgm/gameing/me/land/LandFrame":226,"../../engtst/mgm/gameing/me/land/MyLand":227,"../../engtst/mgm/gameing/me/land/PlantFrame":228,"../../engtst/mgm/gameing/me/mission/MissionLead":232,"../../engtst/mgm/gameing/me/mission/MyMission":233,"../../engtst/mgm/gameing/me/mission/UpgradeEffect":235,"../../engtst/mgm/gameing/me/mounts/MyMounts":243,"../../engtst/mgm/gameing/me/pet/MyPets":245,"../../engtst/mgm/gameing/me/school/BackToSchool":255,"../../engtst/mgm/gameing/me/shop/MyBuy":257,"../../engtst/mgm/gameing/me/shop/MySell":259,"../../engtst/mgm/gameing/me/shop/NpcShop":260,"../../engtst/mgm/gameing/me/shop/shop_BuyDrawing":264,"../../engtst/mgm/gameing/me/shop/shop_PeakFight":265,"../../engtst/mgm/gameing/me/team/MyTeam":266,"../../engtst/mgm/gameing/me/team/TeamCreate":267,"../../engtst/mgm/gameing/me/team/TeamOperate":269,"../../engtst/mgm/gameing/me/team/TeamZhen":271,"../../engtst/mgm/gameing/me/trade/MyTrade":273,"../../engtst/mgm/gameing/me/trade/PetStoreFrame":275,"../../map/MapManager":286,"../../mgm/newmainmenu/CreateRole":307,"../../mgm/newmainmenu/LeadPage":308,"../../mgm/newmainmenu/SelectRole":309,"../../mgm/newmainmenu/SelectSever":310,"../../mgm/newmainmenu/local/Login_local":314,"../../mgm/newmainmenu/local/Regist_local":315,"../../zero/Interface/GameVersion":317,"../../zero/Interface/PublicInterface":318,"./GmProtocol":66,"./MyAI":68,"./VoiceInterface":69,"./XStat":70}],66:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../zero/Interface/GameVersion")),s=(_interopRequireDefault(t("../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../config/GameData"))),r=(_interopRequireDefault(t("../../config/GmConfig")),_interopRequireDefault(t("../../config/XDefine"))),o=_interopRequireDefault(t("../../map/MapManager")),u=_interopRequireDefault(t("../../engine/PackageTools")),l=(_interopRequireDefault(t("../../engine/network/NetFast")),_interopRequireDefault(t("../../engtst/mgm/History/XRecordFast"))),f=_interopRequireDefault(t("../../engtst/mgm/gameing/Gameing")),h=(_interopRequireDefault(t("../../engtst/mgm/gameing/NearRole")),_interopRequireDefault(t("../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send"))),d=_interopRequireDefault(t("../../engtst/mgm/gameing/chat/publicchat/PublicChat_Send")),c=_interopRequireDefault(t("../../engtst/mgm/gameing/me/GmMe")),m=_interopRequireDefault(t("../../engtst/mgm/gameing/me/team/MyTeam")),g=_interopRequireDefault(t("./GmPlay"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(){function GmProtocol(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GmProtocol),this.pls=new u.default(3072),this.xntf=e,this.iEchoId=0,this.pos1=0,this.pos2,this.pos3=0,this.ox,this.oy}return a(GmProtocol,[{key:"GetBase",value:function(t){this.iSid=t.GetNextInt(),this.iPid=t.GetNextInt(),this.iUid=t.GetNextInt(),this.xntf.msg.SetStartMessage(t.iLength,t.databuf)}},{key:"set_Head",value:function(){this.pls.iOffset=0,this.pls.InsertShort(500),this.pls.InsertInt(this.iSid),this.pls.InsertInt(this.iPid),this.pls.InsertInt(this.iUid),this.pls.InsertInt(s.default.APKVersion),this.pls.InsertByte(this.iEchoId),this.xntf.msg.SetStartMessage(this.pls.iOffset,this.pls.databuf)}},{key:"s_CheckVersion",value:function(){"0"==GmProtocol.sMid&&(GmProtocol.sMid=""),this.pls.iOffset=0,this.pls.InsertInt(s.default.APKVersion),this.pls.InsertInt(l.default.iClientID),this.pls.InsertString(GmProtocol.sMid),this.xntf.InQueue(510,this.pls.iOffset,this.pls.databuf)}},{key:"s_CheckReply",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(512,this.pls.iOffset,this.pls.databuf)}},{key:"s_Check2Reply",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(514,this.pls.iOffset,this.pls.databuf)}},{key:"s_ClientExp",value:function(t){this.pls.iOffset=0,this.pls.InsertString(t),this.xntf.InQueue(513,this.pls.iOffset,this.pls.databuf)}},{key:"s_Regist",value:function(t,e){this.pls.iOffset=0,this.pls.InsertString(t),this.pls.InsertString(e),this.xntf.InQueue(1e3,this.pls.iOffset,this.pls.databuf)}},{key:"s_Login",value:function(t,e){this.pls.iOffset=0,this.pls.InsertString(t),this.pls.InsertString(e),this.xntf.InQueue(1001,this.pls.iOffset,this.pls.databuf)}},{key:"s_Login_xyx",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertString(e),this.pls.InsertString(i),this.xntf.InQueue(4002,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetRoleList",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.xntf.InQueue(1006,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetSeverList",value:function(t){this.pls.iOffset=0,this.pls.InsertByte(t),this.xntf.InQueue(1003,this.pls.iOffset,this.pls.databuf)}},{key:"s_CreateRole",value:function(t,e,i,a,n){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertString(i),this.pls.InsertByte(a),this.pls.InsertByte(n),this.xntf.InQueue(1004,this.pls.iOffset,this.pls.databuf)}},{key:"s_StartGame",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(s.default.GV),this.xntf.InQueue(1005,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetRandName",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(1007,this.pls.iOffset,this.pls.databuf)}},{key:"s_UpgradeMe",value:function(t){this.pls.iOffset=0,this.pls.InsertShort(t),this.xntf.InQueue(2001,this.pls.iOffset,this.pls.databuf)}},{key:"s_AddPoint",value:function(t,e,i,a,n){this.pls.iOffset=0,this.pls.InsertShort(t),this.pls.InsertShort(e),this.pls.InsertShort(i),this.pls.InsertShort(a),this.pls.InsertShort(n),this.xntf.InQueue(2002,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetInSchool",value:function(t){this.pls.iOffset=0,this.pls.InsertByte(t),this.xntf.InQueue(2003,this.pls.iOffset,this.pls.databuf)}},{key:"s_learnschoolskill",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertByte(e),this.xntf.InQueue(2004,this.pls.iOffset,this.pls.databuf)}},{key:"s_setflag",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2005,this.pls.iOffset,this.pls.databuf)}},{key:"s_getflag",value:function(){this.pls.iOffset=0,this.xntf.InQueue(2006,this.pls.iOffset,this.pls.databuf)}},{key:"s_proctitle",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertString(e),this.xntf.InQueue(2007,this.pls.iOffset,this.pls.databuf)}},{key:"s_changenick",value:function(t){this.pls.iOffset=0,this.pls.InsertString(t),this.xntf.InQueue(2008,this.pls.iOffset,this.pls.databuf)}},{key:"s_SetLock",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertString(i),this.xntf.InQueue(2009,this.pls.iOffset,this.pls.databuf)}},{key:"s_PublicChat",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertString(e);for(var i=0;i<4;i++)this.pls.InsertByte(d.default.cext[i].type),d.default.cext[i].type>=100||(0==d.default.cext[i].type||1==d.default.cext[i].type||4==d.default.cext[i].type?(this.pls.InsertInt(d.default.cext[i].eid),this.pls.InsertShort(d.default.cext[i].tid)):2==d.default.cext[i].type&&(this.pls.InsertInt(d.default.cext[i].eid),this.pls.InsertString(d.default.cext[i].name),this.pls.InsertString(d.default.cext[i].detail)));this.xntf.InQueue(2020,this.pls.iOffset,this.pls.databuf)}},{key:"s_FriendOperate",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2021,this.pls.iOffset,this.pls.databuf)}},{key:"s_PrivateChat",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertString(e),this.pls.InsertString(i);for(var a=0;a<4;a++)this.pls.InsertByte(h.default.cext[a].type),h.default.cext[a].type>=100||(0==h.default.cext[a].type||1==h.default.cext[a].type||4==h.default.cext[a].type?(this.pls.InsertInt(h.default.cext[a].eid),this.pls.InsertShort(h.default.cext[a].tid)):2==h.default.cext[a].type&&(this.pls.InsertInt(h.default.cext[a].eid),this.pls.InsertString(h.default.cext[a].name),this.pls.InsertString(h.default.cext[a].detail)));this.xntf.InQueue(2022,this.pls.iOffset,this.pls.databuf)}},{key:"s_ReviewPrivateChat",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2023,this.pls.iOffset,this.pls.databuf)}},{key:"s_ChangeMapNew",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.xntf.InQueue(2032,this.pls.iOffset,this.pls.databuf),o.default.gi().iMapChangeing=100}},{key:"s_ChangeMap",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2030,this.pls.iOffset,this.pls.databuf),o.default.gi().iMapChangeing=100}},{key:"s_UploadMyPos",value:function(){var t;if(0!=c.default.me.iRid){if(this.pls.iOffset=0,this.pls.InsertInt(o.default.gi().iVisualMapId),this.pls.InsertInt(f.default.gameing.me.iX),this.pls.InsertInt(f.default.gameing.me.iY),this.pls.InsertByte(c.default.me.iFace8+10*c.default.me.iFace4),this.pos2=r.default.get_ms()%1e8,this.pls.InsertInt(parseInt(this.pos2)),m.default.bTeamLeader()){for(this.pls.InsertByte(1),t=1;t<5;t++)if(0!=m.default.iTeamRid[t]){var e=f.default.gameing.findnrs(m.default.iTeamRid[t]);null!=e&&(this.pls.InsertInt(e.iRid),this.pls.InsertShort(e.iDx),this.pls.InsertShort(e.iDy),this.pls.InsertByte(e.iDFaceTo))}this.pls.InsertInt(0)}else this.pls.InsertByte(0);0==this.pos1?this.pos1=r.default.get_ms():(this.pos2=r.default.get_ms()-this.pos1,this.pos1=r.default.get_ms(),this.ox=c.default.me.iX,this.oy=c.default.me.iY),this.xntf.InQueue(2031,this.pls.iOffset,this.pls.databuf)}}},{key:"s_TeamOperate",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2035,this.pls.iOffset,this.pls.databuf)}},{key:"s_TeamOperateEx",value:function(t,e,i,a,n){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.pls.InsertInt(n),this.xntf.InQueue(2035,this.pls.iOffset,this.pls.databuf)}},{key:"s_TeamOperateEx",value:function(t,e,i,a){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertString(a),this.xntf.InQueue(2035,this.pls.iOffset,this.pls.databuf)}},{key:"s_ChangeZhen",value:function(t){this.pls.iOffset=0,this.pls.InsertByte(t),this.xntf.InQueue(2036,this.pls.iOffset,this.pls.databuf)}},{key:"s_SwapEquipment",value:function(t){this.pls.iOffset=0,this.pls.InsertByte(t),this.xntf.InQueue(2044,this.pls.iOffset,this.pls.databuf)}},{key:"s_MoveGoods",value:function(t,e,i,a,n,s){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertByte(e),this.pls.InsertByte(i),this.pls.InsertInt(a),this.pls.InsertByte(n),this.pls.InsertByte(s),this.xntf.InQueue(2040,this.pls.iOffset,this.pls.databuf)}},{key:"s_DropGoods",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2041,this.pls.iOffset,this.pls.databuf)}},{key:"s_GiveGoods",value:function(t,e,i,a){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.xntf.InQueue(2042,this.pls.iOffset,this.pls.databuf)}},{key:"s_StartSell",value:function(t,e,i,a){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(point),this.pls.InsertInt(i),this.pls.InsertString(a),this.xntf.InQueue(2043,this.pls.iOffset,this.pls.databuf)}},{key:"s_StartBuy",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2045,this.pls.iOffset,this.pls.databuf)}},{key:"s_MyBuy",value:function(t,e,i,a){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.xntf.InQueue(2046,this.pls.iOffset,this.pls.databuf)}},{key:"s_UseGoods",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertByte(e),this.pls.InsertString(i),this.xntf.InQueue(2047,this.pls.iOffset,this.pls.databuf)}},{key:"s_RecoverGoods",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2048,this.pls.iOffset,this.pls.databuf)}},{key:"s_NewShopBuy",value:function(t,e,i,a){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.xntf.InQueue(2049,this.pls.iOffset,this.pls.databuf)}},{key:"s_ChangePetName",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertString(e),this.xntf.InQueue(2050,this.pls.iOffset,this.pls.databuf)}},{key:"s_ChangeFightPet",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2051,this.pls.iOffset,this.pls.databuf)}},{key:"s_ChangeFollowPet",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2057,this.pls.iOffset,this.pls.databuf)}},{key:"s_PetJJ",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2058,this.pls.iOffset,this.pls.databuf)}},{key:"s_DropPet",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2052,this.pls.iOffset,this.pls.databuf)}},{key:"s_AddPetPoint",value:function(t,e,i,a,n,s){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertShort(e),this.pls.InsertShort(i),this.pls.InsertShort(a),this.pls.InsertShort(n),this.pls.InsertShort(s),this.xntf.InQueue(2053,this.pls.iOffset,this.pls.databuf)}},{key:"s_LearnPetSkill",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.xntf.InQueue(2054,this.pls.iOffset,this.pls.databuf)}},{key:"s_WashPet",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.xntf.InQueue(2055,this.pls.iOffset,this.pls.databuf)}},{key:"s_OpenStore",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2056,this.pls.iOffset,this.pls.databuf)}},{key:"s_SeverSelect",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertByte(e),this.pls.InsertInt(i),this.xntf.InQueue(2061,this.pls.iOffset,this.pls.databuf)}},{key:"s_SevConfirm",value:function(t){this.pls.iOffset=0,this.pls.InsertString(t),this.xntf.InQueue(2068,this.pls.iOffset,this.pls.databuf)}},{key:"s_NpcReply",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertByte(i),this.xntf.InQueue(2062,this.pls.iOffset,this.pls.databuf)}},{key:"s_NpcCmd",value:function(t,e,i,a,n,s,r,o){this.pls.iOffset=0,this.pls.InsertString(t),this.pls.InsertString(e),this.pls.InsertString(i),this.pls.InsertString(a),this.pls.InsertString(n),this.pls.InsertString(s),this.pls.InsertString(r),this.pls.InsertString(o),this.xntf.InQueue(2063,this.pls.iOffset,this.pls.databuf)}},{key:"s_NpcShop",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2064,this.pls.iOffset,this.pls.databuf)}},{key:"s_NpcShopBuy",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2065,this.pls.iOffset,this.pls.databuf)}},{key:"s_IngotMall",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.xntf.InQueue(2066,this.pls.iOffset,this.pls.databuf)}},{key:"s_IngotMallBuy",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2067,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetSchoolMission",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2070,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetMissionDetail",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertByte(e),this.xntf.InQueue(2071,this.pls.iOffset,this.pls.databuf)}},{key:"s_FinishMission",value:function(t,e,i,a){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.xntf.InQueue(2072,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetMission",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.xntf.InQueue(2073,this.pls.iOffset,this.pls.databuf)}},{key:"s_CancelMission",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2074,this.pls.iOffset,this.pls.databuf)}},{key:"s_CreateGov",value:function(t,e){this.pls.iOffset=0,this.pls.InsertString(t),this.pls.InsertString(e),this.xntf.InQueue(2080,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetGovList",value:function(t){this.pls.iOffset=0,this.pls.InsertByte(t),this.xntf.InQueue(2081,this.pls.iOffset,this.pls.databuf)}},{key:"s_ApplyForGov",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2082,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetBaseGovData",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.xntf.InQueue(2083,this.pls.iOffset,this.pls.databuf)}},{key:"s_OperateGovMember",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertByte(e),this.pls.InsertInt(i),this.xntf.InQueue(2084,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetIntoGov",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2085,this.pls.iOffset,this.pls.databuf),o.default.gi().iMapChangeing=100}},{key:"s_HireWorker",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertByte(e),this.pls.InsertByte(i),this.xntf.InQueue(2086,this.pls.iOffset,this.pls.databuf)}},{key:"s_GovSet",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.xntf.InQueue(2087,this.pls.iOffset,this.pls.databuf)}},{key:"s_GovOperateFrame",value:function(t){this.pls.iOffset=0,this.pls.InsertByte(t),this.xntf.InQueue(2088,this.pls.iOffset,this.pls.databuf)}},{key:"s_LearnGovSkill",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.xntf.InQueue(2089,this.pls.iOffset,this.pls.databuf)}},{key:"s_GovXiu",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.xntf.InQueue(2090,this.pls.iOffset,this.pls.databuf)}},{key:"s_LeaveGov",value:function(){this.pls.iOffset=0,this.xntf.InQueue(2091,this.pls.iOffset,this.pls.databuf)}},{key:"s_UseSkill",value:function(t,e,i,a,n,s,r){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.pls.InsertInt(n),this.pls.InsertInt(s),this.pls.InsertInt(r),this.xntf.InQueue(2092,this.pls.iOffset,this.pls.databuf)}},{key:"s_WatchOn",value:function(t,e,i,a){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertString(a),this.xntf.InQueue(2093,this.pls.iOffset,this.pls.databuf)}},{key:"s_NewGovOperate",value:function(t,e,i,a,n,s){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.pls.InsertInt(n),this.pls.InsertString(s),this.xntf.InQueue(2095,this.pls.iOffset,this.pls.databuf),4==t&&(o.default.gi().iMapChangeing=100)}},{key:"s_ChangeFightMounts",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2101,this.pls.iOffset,this.pls.databuf)}},{key:"s_DropMounts",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2102,this.pls.iOffset,this.pls.databuf)}},{key:"s_TrainMounts",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2103,this.pls.iOffset,this.pls.databuf)}},{key:"s_AddMountsPoint",value:function(t,e,i,a,n,s){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertShort(e),this.pls.InsertShort(i),this.pls.InsertShort(a),this.pls.InsertShort(n),this.pls.InsertShort(s),this.xntf.InQueue(2104,this.pls.iOffset,this.pls.databuf)}},{key:"s_FeedMounts",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2105,this.pls.iOffset,this.pls.databuf)}},{key:"s_JJMounts",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2106,this.pls.iOffset,this.pls.databuf)}},{key:"s_FightOperate",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertByte(e[0]),this.pls.InsertInt(e[1]),this.pls.InsertInt(e[2]),this.xntf.InQueue(2200,this.pls.iOffset,this.pls.databuf)}},{key:"s_PK",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2201,this.pls.iOffset,this.pls.databuf)}},{key:"s_WatchFight",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.xntf.InQueue(2202,this.pls.iOffset,this.pls.databuf)}},{key:"s_Trade",value:function(t,e,i,a,n,s,r,o,u,l,f){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.pls.InsertInt(n),this.pls.InsertInt(s),this.pls.InsertInt(r),this.pls.InsertInt(o),this.pls.InsertInt(u),this.pls.InsertInt(l),this.pls.InsertInt(f),this.xntf.InQueue(2010,this.pls.iOffset,this.pls.databuf)}},{key:"s_SeverEvent",value:function(t,e,i,a,n){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertByte(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.pls.InsertInt(n),this.xntf.InQueue(2100,this.pls.iOffset,this.pls.databuf)}},{key:"s_NoviceHelp",value:function(t,e,i,a){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertString(a),this.xntf.InQueue(2300,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetCodeReward",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertString(e),this.xntf.InQueue(2301,this.pls.iOffset,this.pls.databuf)}},{key:"s_Pay",value:function(t,e,i,a,s){this.pls.iOffset=0,this.pls.InsertInt(n.default.QUDAO),this.pls.InsertString(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.pls.InsertString(s),this.xntf.InQueue(2302,this.pls.iOffset,this.pls.databuf)}},{key:"s_PromptActivity",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.xntf.InQueue(2304,this.pls.iOffset,this.pls.databuf)}},{key:"s_FuBen",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.xntf.InQueue(2400,this.pls.iOffset,this.pls.databuf)}},{key:"s_CreateFuBen",value:function(t,e){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertString(e),this.xntf.InQueue(2401,this.pls.iOffset,this.pls.databuf)}},{key:"s_ApplyFuBen",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2402,this.pls.iOffset,this.pls.databuf)}},{key:"s_ManageFuBen",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2403,this.pls.iOffset,this.pls.databuf)}},{key:"s_FuBenMail",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2408,this.pls.iOffset,this.pls.databuf)}},{key:"s_FubenMallBuy",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2409,this.pls.iOffset,this.pls.databuf)}},{key:"s_LandOperate",value:function(t,e,i,a){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.pls.InsertInt(a),this.xntf.InQueue(2150,this.pls.iOffset,this.pls.databuf)}},{key:"s_CreateFT",value:function(t,e){this.pls.iOffset=0,this.pls.InsertString(t),this.pls.InsertString(e),this.xntf.InQueue(2500,this.pls.iOffset,this.pls.databuf)}},{key:"s_ApplyFT",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2502,this.pls.iOffset,this.pls.databuf)}},{key:"s_GetApply",value:function(t){this.pls.iOffset=0,this.pls.InsertInt(t),this.xntf.InQueue(2503,this.pls.iOffset,this.pls.databuf)}},{key:"s_FTAgree",value:function(t,e){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.xntf.InQueue(2504,this.pls.iOffset,this.pls.databuf)}},{key:"s_FTChallenge",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2505,this.pls.iOffset,this.pls.databuf)}},{key:"s_FTOperate",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertByte(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2506,this.pls.iOffset,this.pls.databuf)}},{key:"s_CreateShop",value:function(t,e){this.pls.iOffset=0,this.pls.InsertString(t),this.pls.InsertInt(e),this.xntf.InQueue(2600,this.pls.iOffset,this.pls.databuf)}},{key:"s_AfternoooQuestion",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2700,this.pls.iOffset,this.pls.databuf)}},{key:"s_ExtendCmd",value:function(t,e,i,a,n,s,r,o){this.pls.iOffset=0,this.pls.InsertString(t),this.pls.InsertString(e),this.pls.InsertString(i),this.pls.InsertString(a),this.pls.InsertString(n),this.pls.InsertString(s),this.pls.InsertString(r),this.pls.InsertString(o),this.xntf.InQueue(2800,this.pls.iOffset,this.pls.databuf)}},{key:"xms_send",value:function(t,e,i,a,n,s,r){this.pls.iOffset=0,this.pls.InsertString(t),this.pls.InsertString(e),this.pls.InsertString(i),this.pls.InsertString(a),this.pls.InsertString(n),this.pls.InsertString(s),this.pls.InsertString(r),this.xntf.InQueue(5e3,this.pls.iOffset,this.pls.databuf)}},{key:"s_LeaderBoardFresh",value:function(t,e,i){this.pls.iOffset=0,this.pls.InsertInt(t),this.pls.InsertInt(e),this.pls.InsertInt(i),this.xntf.InQueue(2910,this.pls.iOffset,this.pls.databuf)}}]),GmProtocol}();i.default=_,_.sMid="0",_.pt=null,_.gi=function(){return null==_.pt&&(_.pt=new _(null,g.default.xntf)),_.pt}},{"../../config/GameData":4,"../../config/GmConfig":5,"../../config/XDefine":7,"../../engine/PackageTools":9,"../../engine/network/NetFast":33,"../../engtst/mgm/History/XRecordFast":67,"../../engtst/mgm/gameing/Gameing":91,"../../engtst/mgm/gameing/NearRole":93,"../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../engtst/mgm/gameing/chat/publicchat/PublicChat_Send":110,"../../engtst/mgm/gameing/me/GmMe":211,"../../engtst/mgm/gameing/me/team/MyTeam":266,"../../map/MapManager":286,"../../zero/Interface/GameVersion":317,"../../zero/Interface/PublicInterface":318,"./GmPlay":65}],67:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=_interopRequireDefault(t("../../../engine/PackageTools")),r=_interopRequireDefault(t("../../../engtst/mgm/GmPlay")),o=_interopRequireDefault(t("../../../engtst/mgm/gameing/chat/privatechat/PrivateChatWatch")),u=_interopRequireDefault(t("../../../engtst/mgm/gameing/fast/SystemOperate")),l=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/GmMe")),f=_interopRequireDefault(t("../../../config/XDefine"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var h=function(){function XRecordFast(t){var e;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XRecordFast),this.pls=new s.default(524288),this.v=0,this.iUserCount=0,this.sUser=new Array(5),this.sPass=new Array(5),e=0;e<5;e++)this.sUser[e]="",this.sPass[e]="";for(XRecordFast.iGuideFlags=new Int32Array(16),e=0;e<16;e++)XRecordFast.iGuideFlags[e]=0;XRecordFast.iExtHelp=1,XRecordFast.iQQSay=0}return a(XRecordFast,[{key:"SaveTo",value:function(t){var e;for(this.pls.iOffset=0,this.pls.InsertByte(this.v),this.pls.InsertByte(this.iUserCount),e=0;e<this.iUserCount;e++)this.pls.InsertString(this.sUser[e]),this.pls.InsertString(this.sPass[e]);for(this.bSaveUser?this.pls.InsertByte(1):this.pls.InsertByte(0),this.bSavePass?this.pls.InsertByte(1):this.pls.InsertByte(0),e=0;e<16;e++)this.pls.InsertInt(XRecordFast.iGuideFlags[e]);u.default.bShowName?this.pls.InsertByte(0):this.pls.InsertByte(1),u.default.bShowRole?this.pls.InsertByte(0):this.pls.InsertByte(1),u.default.bShowSell?this.pls.InsertByte(0):this.pls.InsertByte(1),this.pls.InsertByte(u.default.iNearRoleCount),this.pls.InsertByte(u.default.iPictureQuality),this.pls.InsertByte(u.default.iPictureBuffer),this.pls.InsertByte(u.default.iRenderType),r.default.bCheckRes?this.pls.InsertByte(1):this.pls.InsertByte(0),this.pls.InsertByte(u.default.iMusic),this.pls.InsertByte(u.default.iSound),this.pls.InsertByte(XRecordFast.iHaveSeverRecord),this.pls.InsertInt(XRecordFast.iLastSector),this.pls.InsertInt(XRecordFast.iLastSever),this.pls.InsertByte(u.default.iWheel),this.pls.InsertInt(u.default.iSameRate),this.pls.InsertInt(u.default.iScreenLS),(u.default.iScreenLS<0||u.default.iScreenLS>400)&&(u.default.iScreenLS=0),this.pls.InsertInt(XRecordFast.iClientID),this.pls.InsertInt(XRecordFast.iExtHelp),this.pls.InsertInt(XRecordFast.iQQSay),u.default.bShowMount?this.pls.InsertByte(0):this.pls.InsertByte(1),u.default.bShowWeapon?this.pls.InsertByte(0):this.pls.InsertByte(1),u.default.bShowColor?this.pls.InsertByte(0):this.pls.InsertByte(1),u.default.bShowFollow?this.pls.InsertByte(0):this.pls.InsertByte(1),u.default.bShowTitle?this.pls.InsertByte(0):this.pls.InsertByte(1),this.pls.InsertInt(XRecordFast.iPublicVoiceShow),this.pls.InsertByte(XRecordFast.iPrivateChatMode),this.pls.InsertInt(XRecordFast.iFilterChannel),this.pls.InsertInt(XRecordFast.iAutoPlay),this.pls.InsertInt(XRecordFast.iFastVoice),this.pls.iLength=this.pls.iOffset,this.pls.JS_DataToLocal(t),f.default.sop("SaveTo 1"+u.default.iMusic+","+u.default.iSound)}},{key:"ReadFrom",value:function(t){var e;if(f.default.sop("ReadFrom 1"),this.pls.JS_DataFromLocal(t)||(XRecordFast.iFirstOpen=!0,this.SaveTo(t),this.pls.JS_DataFromLocal(t))){for(f.default.sop("ReadFrom 3"),this.v=this.pls.GetNextByte(),this.iUserCount=this.pls.GetNextByte(),e=0;e<this.iUserCount;e++)this.sUser[e]=this.pls.GetNextString(),this.sPass[e]=this.pls.GetNextString();for(0==this.pls.GetNextByte()?this.bSaveUser=!1:this.bSaveUser=!0,0==this.pls.GetNextByte()?this.bSavePass=!1:this.bSavePass=!0,e=0;e<16;e++)XRecordFast.iGuideFlags[e]=this.pls.GetNextInt();0==this.pls.GetNextByte()?u.default.bShowName=!0:u.default.bShowName=!1,0==this.pls.GetNextByte()?u.default.bShowRole=!0:u.default.bShowRole=!1,0==this.pls.GetNextByte()?u.default.bShowSell=!0:u.default.bShowSell=!1,u.default.iNearRoleCount=this.pls.GetNextByte(),u.default.iNearRoleCount=25,u.default.iPictureQuality=this.pls.GetNextByte(),u.default.iPictureQuality=1,u.default.iPictureBuffer=this.pls.GetNextByte(),u.default.iPictureBuffer=50,u.default.iRenderType=this.pls.GetNextByte(),u.default.iRenderType=1,u.default.iNearRoleCount<5&&(u.default.iNearRoleCount=5),e=n.default.SYSW<=800?10:n.default.SYSW<1280?25:1280==n.default.SYSW?40:50,1==this.pls.GetNextByte()?(r.default.bCheckRes=!0,u.default.iNearRoleCount>20?u.default.iNearRoleCount-=10:u.default.iNearRoleCount=10):r.default.bCheckRes=!1,XRecordFast.iFirstOpen&&(u.default.iPictureBuffer=e),u.default.iMusic=this.pls.GetNextByte(),u.default.iSound=this.pls.GetNextByte(),XRecordFast.iHaveSeverRecord=this.pls.GetNextByte(),XRecordFast.iLastSector=this.pls.GetNextInt(),XRecordFast.iLastSever=this.pls.GetNextInt(),u.default.iWheel=this.pls.GetNextByte(),u.default.iSameRate=this.pls.GetNextInt(),u.default.iSameRate=0,u.default.iScreenLS=this.pls.GetNextInt(),n.default.SYSW>=1280?u.default.iScreenLS=192e3/(n.default.SYSW-800):u.default.iScreenLS=400*(n.default.SYSW-800)/480,XRecordFast.iClientID=this.pls.GetNextInt(),XRecordFast.iExtHelp=this.pls.GetNextInt(),XRecordFast.iQQSay=this.pls.GetNextInt(),0==this.pls.GetNextByte()?u.default.bShowMount=!0:u.default.bShowMount=!1,0==this.pls.GetNextByte()?u.default.bShowWeapon=!0:u.default.bShowWeapon=!1,0==this.pls.GetNextByte()?u.default.bShowColor=!0:u.default.bShowColor=!1,0==this.pls.GetNextByte()?u.default.bShowFollow=!0:u.default.bShowFollow=!1,0==this.pls.GetNextByte()?u.default.bShowTitle=!0:u.default.bShowTitle=!1,0==u.default.iPictureQuality?u.default.iPictureBuffer=50:1==u.default.iPictureQuality?u.default.iPictureBuffer=25:u.default.iPictureBuffer=0,XRecordFast.iPublicVoiceShow=this.pls.GetNextInt(),XRecordFast.iPrivateChatMode=this.pls.GetNextByte(),this.pls.iOffset>=this.pls.iLength?XRecordFast.iFilterChannel=255:XRecordFast.iFilterChannel=this.pls.GetNextInt(),this.pls.iOffset>=this.pls.iLength?XRecordFast.iAutoPlay=0:XRecordFast.iAutoPlay=this.pls.GetNextInt(),this.pls.iOffset>=this.pls.iLength?XRecordFast.iFastVoice=3:XRecordFast.iFastVoice=this.pls.GetNextInt()}else f.default.sop("ReadFrom 2")}},{key:"SavePrivateChat",value:function(){var t,e,i=o.default.gi();for(this.pls.iOffset=0,t=0;t<i.iMessageCount;t++)if(i.pms[t].bWatched)for(this.pls.InsertInt(i.pms[t].iRid),this.pls.InsertString(i.pms[t].sName),this.pls.InsertByte(i.pms[t].iRax),this.pls.InsertInt(i.pms[t].iDRid),this.pls.InsertString(i.pms[t].sTime),this.pls.InsertString(i.pms[t].sDetail),e=1;e<5;e++)switch(this.pls.InsertByte(i.pms[t].exts[e].type),i.pms[t].exts[e].type){case 0:case 1:this.pls.InsertInt(i.pms[t].exts[e].eid),this.pls.InsertShort(i.pms[t].exts[e].tid);break;case 2:this.pls.InsertInt(i.pms[t].exts[e].eid),this.pls.InsertString(i.pms[t].exts[e].name),this.pls.InsertString(i.pms[t].exts[e].detail)}this.pls.InsertInt(123454321),this.pls.JS_DataFromLocal("recordchat_"+l.default.me.iRid+".dat")}},{key:"ReadPrivateChat",value:function(){if(this.pls.JS_DataFromLocal("recordchat_"+l.default.me.iRid+".dat")){var t,e,i=o.default.gi();for(t=0;t<o.default.MAXMESSAGE&&123454321!=(e=this.pls.GetNextInt());t++){for(i.pms[t].iRid=e,i.pms[t].sName=this.pls.GetNextString(),i.pms[t].iRax=this.pls.GetNextByte(),i.pms[t].iDRid=this.pls.GetNextInt(),i.pms[t].sTime=this.pls.GetNextString(),i.pms[t].sDetail=this.pls.GetNextString(),i.pms[t].exts[0].type=3,i.pms[t].exts[0].eid=i.pms[t].iRid,e=1;e<5;e++)switch(i.pms[t].exts[e].type=this.pls.GetNextByte(),i.pms[t].exts[e].type){case 0:case 1:i.pms[t].exts[e].eid=this.pls.GetNextInt(),i.pms[t].exts[e].tid=this.pls.GetNextShort();break;case 2:i.pms[t].exts[e].eid=this.pls.GetNextInt(),i.pms[t].exts[e].name=this.pls.GetNextString(),i.pms[t].exts[e].detail=this.pls.GetNextString()}i.pms[t].bWatched=!0,i.pms[t].iSession=0}i.iMessageCount=t}}}]),XRecordFast}();i.default=h,h.iGuideFlags,h.iExtHelp,h.iQQSay,h.iHaveSeverRecord=0,h.iLastSector=0,h.iLastSever=0,h.iClientID=0,h.sLastSeverName="",h.iPublicVoiceShow=1,h.iPrivateChatMode=0,h.iFilterChannel=255,h.iAutoPlay=0,h.iFastVoice=3,h.iFirstOpen=!1},{"../../../config/GmConfig":5,"../../../config/XDefine":7,"../../../engine/PackageTools":9,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/gameing/chat/privatechat/PrivateChatWatch":106,"../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../engtst/mgm/gameing/me/GmMe":211}],68:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../config/GameData")),s=_interopRequireDefault(t("../../config/XDefine")),r=_interopRequireDefault(t("../../map/MapManager")),o=_interopRequireDefault(t("../../map/VisualBlock")),u=(_interopRequireDefault(t("../../map/_VISUALBLOCK")),_interopRequireDefault(t("../../map/npcboom/MapDialog"))),l=(_interopRequireDefault(t("../../engine/PackageTools")),_interopRequireDefault(t("../../engine/data/E_DATA")),_interopRequireDefault(t("../../engtst/mgm/frame/message/EasyMessage"))),f=_interopRequireDefault(t("../../engtst/mgm/frame/message/FrameMessage")),h=_interopRequireDefault(t("../../engtst/mgm/gameing/fight/XFight")),d=_interopRequireDefault(t("../../engtst/mgm/gameing/help/FastGoods")),c=_interopRequireDefault(t("../../engtst/mgm/gameing/me/GmMe")),m=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/GoodsDraw")),g=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/MyGoods")),_=(_interopRequireDefault(t("../../engtst/mgm/gameing/me/mission/missionstruct/NormalMission")),_interopRequireDefault(t("../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission")),_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/MySell"))),p=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/NpcShop")),b=(_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/NpcShopFrame")),_interopRequireDefault(t("../../engtst/mgm/gameing/me/team/MyTeam"))),D=_interopRequireDefault(t("./GmPlay")),y=_interopRequireDefault(t("./GmProtocol")),w=_interopRequireDefault(t("./XStat"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var S=function(){function _MAPLINK(){_classCallCheck(this,_MAPLINK)}return a(_MAPLINK,[{key:"Set",value:function(t,e,i,a,n){this.iType=t,this.iMapId=e,this.iGoid=i,this.iSx=a,this.iSy=n}}]),_MAPLINK}(),x=function(){function MyAI(){_classCallCheck(this,MyAI),this.bFinding=!1,this.iMapPath=new Int32Array(16),this.bDown=!1,this.bByNpc=!1,this.bByDundi=!1,this.tmp_path=new Array(128),this.last_path=new Array(128),this.iDelay=0,this.iLogicStat=0,this.iLogic_npc1,this.iLogic_npc2,this.iLogic_shop1,this.iLogic_goods1,this.iLogic_count1,this.iLogic_map1,this.iLogic_px1,this.iLogic_px2,this.iLogic_py1,this.iLogic_py2,this.sm_doing}return a(MyAI,[{key:"InitLink",value:function(){var t,e,i,a,n,s,r,o,u,l=0;for(this.iMapLink=new Array(64),t=0;t<64;t++)this.iMapLink[t]=new Array(32);for(this.iMapLinkCount=new Int32Array(64),this.iMapLinkSize=0,t=0;t<D.default.de_chuan_song.iDataCount;t++){for(a=D.default.de_chuan_song.datas[t].intValue(1),n=D.default.de_chuan_song.datas[t].intValue(2),s=D.default.de_chuan_song.datas[t].intValue(5),r=D.default.de_chuan_song.datas[t].iDid,o=D.default.de_chuan_song.datas[t].intValue(3),u=D.default.de_chuan_song.datas[t].intValue(4),e=0;e<this.iMapLinkSize;e++)if(this.iMapLink[e][0].iMapId==n){this.iMapLink[e][this.iMapLinkCount[e]].Set(a,s,r,o,u),this.iMapLinkCount[e]++,this.iMapLinkCount[e]>l&&(l=this.iMapLinkCount[e]);break}if(e>=this.iMapLinkSize){for(i=0;i<32;i++)this.iMapLink[this.iMapLinkSize][i]=new S;this.iMapLink[this.iMapLinkSize][0].Set(2,n,-1,-1,-1),this.iMapLink[this.iMapLinkSize][1].Set(a,s,r,o,u),this.iMapLinkCount[this.iMapLinkSize]=2,this.iMapLinkSize++}}}},{key:"FindNpc",value:function(t,e,i){var a=D.default.de_npc.fdata(t);null!=a?(this.iDestMapId=a.intValue(4),this.iDestX=a.intValue(5),this.iDestY=a.intValue(6),this.iDestMapId<=0||this.iDestX<=0||this.iDestY<=0?l.default.easymsg.AddMessage("目标NPC不能寻路"):(this.bByNpc=e,this.bByDundi=i,D.default.sop("start find npc = "+t),this._findway(t),o.default.iLastProcBase=-1)):l.default.easymsg.AddMessage("目标NPC不能寻路")}},{key:"FindMap",value:function(t,e,i,a,n){return this.iDestMapId=t,this.iDestX=e,this.iDestY=i,this.bByNpc=a,this.bByDundi=n,this._findway(-1)}},{key:"_findway",value:function(t){var e;for(e=0;e<this.iMapLinkSize&&this.iMapLink[e][0].iMapId!=r.default.gi().iCurrentMapId;e++);if(e>=this.iMapLinkSize)return l.default.easymsg.AddMessage("你当前所在地图不能寻路"),!1;if(r.default.gi().vbk.iGoToNpcFlag=-1,r.default.gi().iCurrentMapId==this.iDestMapId)return this.bFinding=!0,this.iFindStat=0,this.iFindPoint=0,this.last_path[0]=new S,this.last_path[0].Set(0,r.default.gi().iCurrentMapId,0,0,0),this.last_path[1]=new S,this.last_path[1].Set(0,this.iDestMapId,0,this.iDestX,this.iDestY),this.pathlength=2,r.default.gi().vbk.iGoToNpcId=t,!0;var i=this.iMapLinkCount[e];return this.bByDundi&&c.default.me.rbs.iSchoolId>0&&b.default.bNoTeam()&&!_.default.gi().bSelling&&(this.iMapLink[e][this.iMapLinkCount[e]].Set(2,n.default.iSchoolMapIds[c.default.me.rbs.iSchoolId],0,0,0),this.iMapLinkCount[e]++),this.pathlength=999,this._dig(this.iMapLink[e][0],this.iDestMapId,0),this.pathlength<999?(this.bFinding=!0,this.iFindStat=0,this.iFindPoint=0,r.default.gi().vbk.iGoToNpcId=t,this.iMapLinkCount[e]=i,!0):(l.default.easymsg.AddMessage("目标地图不能寻路"),this.iMapLinkCount[e]=i,!1)}},{key:"savepath",value:function(t){var e;if(t<this.pathlength){for(e=0;e<t;e++)this.last_path[e]=this.tmp_path[e];this.pathlength=t}}},{key:"_dig",value:function(t,e,i){var a,n,s;if(!(i>=16))for(D.default.sop("deep="+i),a=0;a<this.iMapLinkSize;a++)if(this.iMapLink[a][0].iMapId==t.iMapId)for(this.tmp_path[i]=t,n=this.iMapLinkCount[a]-1;n>=1;n--)if(0!=this.bByNpc||0==this.iMapLink[a][n].iType){if(this.iMapLink[a][n].iMapId==e)return this.tmp_path[i+1]=this.iMapLink[a][n],void this.savepath(i+2);for(s=0;s<i&&this.tmp_path[s]!=this.iMapLink[a][n];s++);s>=i&&i<this.pathlength-1&&this._dig(this.iMapLink[a][n],e,i+1)}}},{key:"Draw",value:function(){if(this.bFinding)switch(this.iFindStat){case 3:s.default.llength(c.default.me.iX,c.default.me.iY,this.iDestX,this.iDestY)<30?this.bFinding=!1:u.default.md.bDialoging?this.bFinding=!1:"跑步"!=c.default.me.sStat&&this.dodelay()&&(this.iFindStat=0);break;case 0:r.default.gi().iCurrentMapId==this.iDestMapId?this.iDestX<0||this.iDestY<0?this.bFinding=!1:s.default.llength(c.default.me.iX,c.default.me.iY,this.iDestX,this.iDestY)<30?this.bFinding=!1:u.default.md.bDialoging?this.bFinding=!1:this.to_pos(this.iDestX,this.iDestY)?this.iFindStat=3:this.bFinding=!1:r.default.gi().iCurrentMapId==this.last_path[this.iFindPoint].iMapId?this.iFindPoint++:(0==this.last_path[this.iFindPoint].iType&&(this.to_pos(this.last_path[this.iFindPoint].iSx,this.last_path[this.iFindPoint].iSy),this.iFindStat=1),1==this.last_path[this.iFindPoint].iType&&(this.to_pos(this.last_path[this.iFindPoint].iSx,this.last_path[this.iFindPoint].iSy),this.iFindStat=2),2==this.last_path[this.iFindPoint].iType&&(y.default.gi().s_UseSkill(0,0,0,0,0,0,0),r.default.gi().iMapChangeing=100,this.iFindStat=1),this.iDelay=0);break;case 1:r.default.gi().iCurrentMapId==this.last_path[this.iFindPoint].iMapId?this.dodelay()&&(this.iFindStat=0):"跑步"!=c.default.me.sStat&&0==r.default.gi().iMapChangeing&&this.dodelay()&&(this.iFindStat=0);break;case 2:s.default.llength(c.default.me.iX,c.default.me.iY,this.last_path[this.iFindPoint].iSx,this.last_path[this.iFindPoint].iSy)<30?this.dodelay()&&(y.default.gi().s_ChangeMapNew(2,this.last_path[this.iFindPoint].iGoid),this.iFindStat=1):"跑步"!=c.default.me.sStat&&this.dodelay()&&(this.iFindStat=0)}}},{key:"dodelay",value:function(){return this.iDelay++,this.iDelay>=10&&(this.iDelay=0,!0)}},{key:"map_to_map",value:function(t,e){var i,a,n;for(i=0;i<D.default.de_chuan_song.iDataCount;i++)if(0==D.default.de_chuan_song.datas[i].intValue(1)&&D.default.de_chuan_song.datas[i].intValue(2)==t&&D.default.de_chuan_song.datas[i].intValue(5)==e){a=D.default.de_chuan_song.datas[i].intValue(3),n=D.default.de_chuan_song.datas[i].intValue(4),this.to_pos(a,n);break}return!(i>=D.default.de_chuan_song.iDataCount)}},{key:"to_pos",value:function(t,e){if(_.default.gi().bSelling)l.default.easymsg.AddMessage("摆摊中不能行走");else if((b.default.bNoTeam()||b.default.bTeamLeader()||b.default.bAway())&&r.default.gi().mfy.findway(c.default.me.iX,c.default.me.iY,t,e)){if(D.default.sop("check again start"),r.default.gi().mfy.checkagain())return c.default.me.start(r.default.gi().mfy.iPath,r.default.gi().mfy.iPathDeep),!0;D.default.sop("check again end2")}return!1}},{key:"AILogic",value:function(){var t,e;switch(this.iLogicStat){case 0:break;case 100:if(50==this.sm_doing.iMPoint||52==this.sm_doing.iMPoint||54==this.sm_doing.iMPoint)for(t=0;t<this.sm_doing.iItemCount;t++)if(0==this.sm_doing.si[t].iMType&&(1==this.sm_doing.si[t].iSType||5==this.sm_doing.si[t].iSType))return this.FindNpc(this.sm_doing.si[t].iV1,!0,!0),void(this.iLogicStat=0);if(53==this.sm_doing.iMPoint)for(t=0;t<this.sm_doing.iItemCount;t++)if(0==this.sm_doing.si[t].iMType&&(1==this.sm_doing.si[t].iSType||4==this.sm_doing.si[t].iSType))return this.iLogic_map1=this.sm_doing.si[t].iV1,this.FindMap(this.sm_doing.si[t].iV1,-1,-1,!0,!0),this.iLogic_px1=-1,y.default.gi().s_SeverEvent(29,0,this.iLogic_map1,0,0),void(this.iLogicStat=110);if(10==this.sm_doing.iMPoint)for(t=0;t<this.sm_doing.iItemCount;t++)if(0==this.sm_doing.si[t].iMType&&0==this.sm_doing.si[t].iSType&&g.default.bHaveGoods(this.sm_doing.si[t].iV1,this.sm_doing.si[t].iV2)){if(34==this.sm_doing.si[t].iV3)if(15==r.default.gi().iCurrentMapId){var i=o.default.pvb.FindNpcByName("程镖头");null!=i&&(this.FindMap(15,i.MyAI.iX,i.MyAI.iY,!0,!1),r.default.gi().vbk.iGoToNpcId=i.iNpcId),this.iLogicStat=0}else this.FindMap(15,-1,-1,!0,!1),r.default.gi().vbk.iGoToNpcId=34,this.iLogic_map1=15,this.iLogicStat=114;else this.FindNpc(this.sm_doing.si[t].iV3,!0,!1),this.iLogic_npc2=this.sm_doing.si[t].iV3,d.default.gi().iListPoint=0,this.iLogicStat=0;return}if(51==this.sm_doing.iMPoint)for(t=0;t<this.sm_doing.iItemCount;t++)if(0==this.sm_doing.si[t].iMType&&0==this.sm_doing.si[t].iSType)return void(g.default.bHaveGoods(this.sm_doing.si[t].iV1,this.sm_doing.si[t].iV2)?(D.default.sop("上交物品"),this.FindNpc(this.sm_doing.si[t].iV3,!0,!0),this.iLogic_npc2=this.sm_doing.si[t].iV3,d.default.gi().iListPoint=0,this.iLogicStat=0):(this.iLogic_goods1=this.sm_doing.si[t].iV1,this.iLogic_count1=this.sm_doing.si[t].iV2,-1==(e=this.getnpcbygoods(this.sm_doing.si[t].iV1))?l.default.easymsg.AddMessage("所需物品来源未知"):(this.iLogic_npc1=MyAI.npc_shop_goods[e][0],this.iLogic_shop1=MyAI.npc_shop_goods[e][1],this.FindNpc(this.iLogic_npc1,!0,!0),this.iLogicStat=101,o.default.talkingnpc=null)));break;case 101:"站立"==c.default.me.sStat&&null!=o.default.talkingnpc&&o.default.talkingnpc.bCurrentBlock&&o.default.talkingnpc.iNpcId==this.iLogic_npc1&&(y.default.gi().s_NpcShop(this.iLogic_shop1),this.iLogicStat=102);break;case 102:if(w.default.gi().CheckStat(w.default.GS_SHOPFRAME)){var a=w.default.gi().LastStat(0);for(t=0;t<20;t++)if(p.default.ns.goods[t].iGid>0&&p.default.ns.goods[t].iTid==this.iLogic_goods1)return a._lockgoods(p.default.ns.goods[t]),m.default.new_LockPos(a.iX+30,a.iY+30,p.default.ns.goods,p.default.ns.goods[t]),void(this.iLogicStat=103)}break;case 103:g.default.bHaveGoods(this.iLogic_goods1,this.iLogic_count1)&&(u.default.md.bDialoging=!1,w.default.gi().CheckStat(w.default.GS_SHOPFRAME)&&w.default.gi().PopStat(1),this.iLogicStat=100);break;case 110:r.default.gi().iCurrentMapId==this.iLogic_map1&&(this.iLogicStat=111);break;case 111:this.iLogic_px1>0&&(this.to_pos(this.iLogic_px2,this.iLogic_py2),this.iLogicStat=112);break;case 112:s.default.llength(c.default.me.iX,c.default.me.iY,this.iLogic_px2,this.iLogic_py2)<50&&(this.to_pos(this.iLogic_px1,this.iLogic_py1),this.iLogicStat=113),!h.default.bFighting&&this.bFinding||(this.iLogicStat=0);break;case 113:s.default.llength(c.default.me.iX,c.default.me.iY,this.iLogic_px1,this.iLogic_py1)<50&&(this.to_pos(this.iLogic_px2,this.iLogic_py2),this.iLogicStat=112),!h.default.bFighting&&this.bFinding||(this.iLogicStat=0);break;case 114:r.default.gi().iCurrentMapId==this.iLogic_map1&&(this.iLogicStat=100);break;case 200:if(56!=this.nm_doing.iMPoint&&59!=this.nm_doing.iMPoint||(this.iLogic_map1=4,this.FindMap(4,-1,-1,!0,!0),this.iLogic_px1=-1,y.default.gi().s_SeverEvent(29,0,this.iLogic_map1,0,0),this.iLogicStat=110),139==this.nm_doing.iMPoint||140==this.nm_doing.iMPoint){for(this.iLogicStat=0,t=1;t<10;t++)if(r.default.gi().iCurrentMapId==MyAI._MENPAIMAP[t])return void this.FindNpc(MyAI._TEACHERID[t],!1,!0);f.default.fm.Open("寻找门派师傅对话")}141!=this.nm_doing.iMPoint&&144!=this.nm_doing.iMPoint||(this.iLogicStat=0,this.FindNpc(MyAI._TEACHERID[c.default.me.rbs.iSchoolId],!0,!0))}}},{key:"getlogicpath",value:function(t){var e=t.GetNextInt();this.iLogic_px1=e/1e4,this.iLogic_py1=e%1e4,e=t.GetNextInt(),this.iLogic_px2=e/1e4,this.iLogic_py2=e%1e4}},{key:"getnpcbygoods",value:function(t){var e,i;for(e=0;e<MyAI.npc_shop_goods.length;e++)for(i=2;i<MyAI.npc_shop_goods[e].length;i++)if(MyAI.npc_shop_goods[e][i]==t)return e;return-1}},{key:"AutoSpecialMission",value:function(t){this.sm_doing=t,this.iLogicStat=100}},{key:"AutoNormalMission",value:function(t){this.nm_doing=t,this.iLogicStat=200}},{key:"ProcTouch",value:function(t,e,i){return!1}}]),MyAI}();i.default=x,x.iX,x.iY,x.iW,x.iH,x._TEACHERID=[0,5,6,7,21,22,23,24,25,26],x._MENPAIMAP=[0,5,6,7,10,8,9,11,12,13],x.npc_shop_goods=[[27,4,66,67,69,70,73,74],[28,2,47,53,59,11,19,25,31,37,13],[3,3,65,66,68,69,71,72],[2,1,1,3,4,5,6,7,8,9,10],[41,5,78,81,83,67,71,75],[93,9,14,12,20,48,54,60,26,32,38],[42,6,79,80,82,72,73,76],[94,10,15,43,21,49,55,61,27,33,39],[43,7,82,83,84,77,80,81],[95,11,16,44,22,50,56,62,28,34,40]],x.ma=null,x.gi=function(){return null==x.ma&&(x.ma=new x),x.ma}},{"../../config/GameData":4,"../../config/XDefine":7,"../../engine/PackageTools":9,"../../engine/data/E_DATA":21,"../../engtst/mgm/frame/message/EasyMessage":86,"../../engtst/mgm/frame/message/FrameMessage":87,"../../engtst/mgm/gameing/fight/XFight":130,"../../engtst/mgm/gameing/help/FastGoods":184,"../../engtst/mgm/gameing/me/GmMe":211,"../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../engtst/mgm/gameing/me/mission/missionstruct/NormalMission":237,"../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission":239,"../../engtst/mgm/gameing/me/shop/MySell":259,"../../engtst/mgm/gameing/me/shop/NpcShop":260,"../../engtst/mgm/gameing/me/shop/NpcShopFrame":261,"../../engtst/mgm/gameing/me/team/MyTeam":266,"../../map/MapManager":286,"../../map/VisualBlock":290,"../../map/_VISUALBLOCK":292,"../../map/npcboom/MapDialog":293,"./GmPlay":65,"./GmProtocol":66,"./XStat":70}],69:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();_interopRequireDefault(t("../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../config/GameData")),_interopRequireDefault(t("../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var n=function(){function VoiceInterface(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,VoiceInterface)}return a(VoiceInterface,[{key:"Init",value:function(){}},{key:"CleanVoiceFile",value:function(){}},{key:"Login",value:function(t,e){}},{key:"StartRecord",value:function(){}},{key:"sGetRecordName",value:function(){return this.sRecordName}},{key:"StopRecord",value:function(){}},{key:"PlayVoice",value:function(){}},{key:"UpLoad",value:function(){}},{key:"PlayUrlVoice",value:function(t){}},{key:"StartRecognize",value:function(){}},{key:"handleMessageEvent",value:function(t){}}]),VoiceInterface}();i.default=n},{"../../config/GameData":4,"../../engtst/mgm/gameing/me/GmMe":211,"../../zero/Interface/PublicInterface":318}],70:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=t("../../engine/BaseClass"),s=(_interopRequireDefault(n),t("../../zero/Interface/GameVersion")),r=_interopRequireDefault(s),o=t("../../config/GameData"),u=(_interopRequireDefault(o),t("../../config/GmConfig")),l=_interopRequireDefault(u),f=t("../../config/XDefine"),h=_interopRequireDefault(f),d=t("../../map/SmallMap"),c=_interopRequireDefault(d),m=t("../../map/WorldMap"),g=_interopRequireDefault(m),_=t("../../mgm/mainmenu/FastGetin_uc"),p=(_interopRequireDefault(_),t("../../mgm/mainmenu/Logo")),b=_interopRequireDefault(p),D=t("../../mgm/mainmenu/MainMenu"),y=_interopRequireDefault(D),w=t("../../mgm/newmainmenu/CreateRole"),S=_interopRequireDefault(w),x=t("../../mgm/newmainmenu/LeadPage"),P=_interopRequireDefault(x),v=t("../../mgm/newmainmenu/SelectRole"),R=_interopRequireDefault(v),M=t("../../mgm/newmainmenu/SelectSever"),C=_interopRequireDefault(M),k=t("../../mgm/newmainmenu/StartGame"),T=_interopRequireDefault(k),A=t("../../mgm/newmainmenu/local/FastGetin_local"),G=_interopRequireDefault(A),E=t("../../mgm/newmainmenu/local/Login_local"),X=_interopRequireDefault(E),O=t("../../mgm/newmainmenu/local/Regist_local"),I=_interopRequireDefault(O),F=t("../../engine/TouchManager"),N=_interopRequireDefault(F),q=t("../../engine/graphics/XAnima"),L=(_interopRequireDefault(q),t("../../engtst/mgm/frame/Confirm1")),B=_interopRequireDefault(L),Y=t("../../engtst/mgm/frame/ExitConfirm"),W=_interopRequireDefault(Y),H=t("../../engtst/mgm/frame/InNumber"),j=_interopRequireDefault(H),V=t("../../engtst/mgm/frame/KickOut"),U=_interopRequireDefault(V),z=t("../../engtst/mgm/frame/Loading1"),Q=_interopRequireDefault(z),J=t("../../engtst/mgm/frame/Loading2"),K=_interopRequireDefault(J),Z=t("../../engtst/mgm/frame/Message1"),$=_interopRequireDefault(Z),tt=t("../../engtst/mgm/frame/SevConfirm"),et=_interopRequireDefault(tt),it=t("../../engtst/mgm/frame/message/PromptMessage"),at=_interopRequireDefault(it),nt=t("../../engtst/mgm/gameing/Gameing"),st=_interopRequireDefault(nt),rt=t("../../engtst/mgm/gameing/act/PeakFight"),ot=_interopRequireDefault(rt),ut=t("../../engtst/mgm/gameing/afternoonquestion/AQDoing"),lt=_interopRequireDefault(ut),ft=t("../../engtst/mgm/gameing/afternoonquestion/AQStart"),ht=_interopRequireDefault(ft),dt=t("../../engtst/mgm/gameing/chat/SelectGoods"),ct=_interopRequireDefault(dt),mt=t("../../engtst/mgm/gameing/chat/SelectPet"),gt=_interopRequireDefault(mt),_t=t("../../engtst/mgm/gameing/chat/privatechat/FriendTeam"),pt=_interopRequireDefault(_t),bt=t("../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send"),Dt=_interopRequireDefault(bt),yt=t("../../engtst/mgm/gameing/chat/privatechat/PrivateChatRecord"),wt=_interopRequireDefault(yt),St=t("../../engtst/mgm/gameing/chat/publicchat/PublicChat_BigFrame"),xt=_interopRequireDefault(St),Pt=t("../../engtst/mgm/gameing/chat/publicchat/PublicChat_Send"),vt=_interopRequireDefault(Pt),Rt=t("../../engtst/mgm/gameing/chat/publicchat/SetChatValue"),Mt=_interopRequireDefault(Rt),Ct=t("../../engtst/mgm/gameing/equip/CameoOperate"),kt=_interopRequireDefault(Ct),Tt=t("../../engtst/mgm/gameing/equip/ImproveEquip"),At=_interopRequireDefault(Tt),Gt=t("../../engtst/mgm/gameing/equip/MakeEquip"),Et=_interopRequireDefault(Gt),Xt=t("../../engtst/mgm/gameing/equip/RepairEquip"),Ot=_interopRequireDefault(Xt),It=t("../../engtst/mgm/gameing/fast/FastOperate"),Ft=_interopRequireDefault(It),Nt=t("../../engtst/mgm/gameing/fast/FindFriend"),qt=_interopRequireDefault(Nt),Lt=t("../../engtst/mgm/gameing/fast/IngotMall"),Bt=_interopRequireDefault(Lt),Yt=t("../../engtst/mgm/gameing/fast/LianDanShu"),Wt=_interopRequireDefault(Yt),Ht=t("../../engtst/mgm/gameing/fast/SystemOperate"),jt=_interopRequireDefault(Ht),Vt=t("../../engtst/mgm/gameing/fast/WatchOn"),Ut=_interopRequireDefault(Vt),zt=t("../../engtst/mgm/gameing/fight/DiePrompt"),Qt=_interopRequireDefault(zt),Jt=t("../../engtst/mgm/gameing/fteam/CreateFT"),Kt=_interopRequireDefault(Jt),Zt=t("../../engtst/mgm/gameing/fteam/FTChallenge"),$t=_interopRequireDefault(Zt),te=t("../../engtst/mgm/gameing/fteam/FTRank"),ee=_interopRequireDefault(te),ie=t("../../engtst/mgm/gameing/fteam/manage/FTFrame"),ae=_interopRequireDefault(ie),ne=t("../../engtst/mgm/gameing/fteam/manage/FTGetOut"),se=_interopRequireDefault(ne),re=t("../../engtst/mgm/gameing/fteam/manage/FTMiJing"),oe=_interopRequireDefault(re),ue=t("../../engtst/mgm/gameing/fteam/manage/FTPutIn"),le=_interopRequireDefault(ue),fe=_interopRequireDefault(t("../../engtst/mgm/gameing/fteam/member/FTAgree")),he=_interopRequireDefault(t("../../engtst/mgm/gameing/fteam/member/FTApply")),de=_interopRequireDefault(t("../../engtst/mgm/gameing/fteam/member/FTMember")),ce=_interopRequireDefault(t("../../engtst/mgm/gameing/fuben/ApplyFuBen")),me=_interopRequireDefault(t("../../engtst/mgm/gameing/fuben/CreateFuBen")),ge=_interopRequireDefault(t("../../engtst/mgm/gameing/fuben/FubenMall")),_e=_interopRequireDefault(t("../../engtst/mgm/gameing/fuben/ManageFuBen")),pe=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ApplyGovFight")),be=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/CreateGov")),De=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ExtLearnSkill")),ye=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/GovFrame")),we=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/GovXiu")),Se=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/LearnGovSkill")),xe=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/MemberDetail")),Pe=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/PetXiu")),ve=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/apply/ApplyForGov")),Re=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/apply/GetInGov")),Me=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/base/ConfirmApply")),Ce=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/base/Gov_SetDetail")),ke=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/base/MemberOperate")),Te=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/base/NewGovFrame")),Ae=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/base/SetGovPower")),Ge=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/manage/Gov_SetBuilding")),Ee=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/manage/Gov_SetHostility")),Xe=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/manage/Gov_SetMtLev")),Oe=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/manage/Gov_SetName")),Ie=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/manage/Gov_SetResearch")),Fe=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/manage/NewGovManage")),Ne=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/mission/EntrustMission")),qe=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/HireTraderWorker")),Le=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/NewShop")),Be=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/RemedyMerge")),Ye=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/ext/mission/ReleaseGovMission")),We=_interopRequireDefault(t("../../engtst/mgm/gameing/gov/fuben/GovFBTarget")),He=_interopRequireDefault(t("../../engtst/mgm/gameing/help/DayAttend")),je=_interopRequireDefault(t("../../engtst/mgm/gameing/help/MainHelp")),Ve=_interopRequireDefault(t("../../engtst/mgm/gameing/help/MySelect")),Ue=_interopRequireDefault(t("../../engtst/mgm/gameing/help/SelectNewPet")),ze=_interopRequireDefault(t("../../engtst/mgm/gameing/help/SelectSchool")),Qe=_interopRequireDefault(t("../../engtst/mgm/gameing/help/ExtHelp/ExtHelp")),Je=_interopRequireDefault(t("../../engtst/mgm/gameing/help/TopIcon/LeaderBoard_/LeaderBoardFrame")),Ke=_interopRequireDefault(t("../../engtst/mgm/gameing/help/TopIcon/LeaderBoard_/LeaderBoardRole")),Ze=_interopRequireDefault(t("../../engtst/mgm/gameing/help/ang/NewActivity")),$e=(_interopRequireDefault(t("../../engtst/mgm/gameing/help/ang/PromptActivity")),_interopRequireDefault(t("../../engtst/mgm/gameing/help/ang/ShowActivityDetail"))),ti=_interopRequireDefault(t("../../engtst/mgm/gameing/help/ang/WeeklyActivity")),ei=_interopRequireDefault(t("../../engtst/mgm/gameing/help/novice/NoviceCheckAnswer")),ii=_interopRequireDefault(t("../../engtst/mgm/gameing/help/novice/NoviceHelp")),ai=_interopRequireDefault(t("../../engtst/mgm/gameing/help/novice/NoviceQuestionList")),ni=_interopRequireDefault(t("../../engtst/mgm/gameing/help/novice/Send_AceAnswer")),si=_interopRequireDefault(t("../../engtst/mgm/gameing/help/novice/Send_NoviceAsk")),ri=_interopRequireDefault(t("../../engtst/mgm/gameing/me/AddPoint")),oi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/ChangeName")),ui=_interopRequireDefault(t("../../engtst/mgm/gameing/me/MyAttFrame")),li=_interopRequireDefault(t("../../engtst/mgm/gameing/me/SetTitle")),fi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/ExchangeMoney")),hi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/GiveGoods")),di=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/GoodsDraw")),ci=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/LockFrame")),mi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/LockOpen")),gi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/LockSet")),_i=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/MyGoodsFrame")),pi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/SmallSpeaker")),bi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/land/LandFrame")),Di=_interopRequireDefault(t("../../engtst/mgm/gameing/me/land/PlantFrame")),yi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/land/SelectLS")),wi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/mission/MissionFrame")),Si=_interopRequireDefault(t("../../engtst/mgm/gameing/me/mission/SelectGoodsForMission")),xi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/mounts/FeedMounts")),Pi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/mounts/MountsFrame")),vi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/LearnPetSkill")),Ri=_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/PetEat")),Mi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/PetsFrame")),Ci=_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/WashPet")),ki=_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/fuse/ApprovePet")),Ti=_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/fuse/FusePet")),Ai=_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/fuse/SelectMyPet")),Gi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/jj/JJPet")),Ei=_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/jj/MergeZR")),Xi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/school/BackToSchool")),Oi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/school/LearnSkill")),Ii=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/MyRecover")),Fi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/ShelvesFrame")),Ni=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/NpcShopFrame")),qi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/shop_BuyDrawing")),Li=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/shop_PeakFight")),Bi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/shop/business/CreateShop")),Yi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/team/TeamCreate")),Wi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/team/TeamDest")),Hi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/team/TeamOperate")),ji=_interopRequireDefault(t("../../engtst/mgm/gameing/me/team/TeamZhen")),Vi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/trade/GoodsStoreFrame")),Ui=_interopRequireDefault(t("../../engtst/mgm/gameing/me/trade/MyTrade")),zi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/trade/MyTradeFrame")),Qi=_interopRequireDefault(t("../../engtst/mgm/gameing/me/trade/PetStoreFrame")),Ji=_interopRequireDefault(t("../../engtst/mgm/gameing/system/ChangeColor")),Ki=_interopRequireDefault(t("../../engtst/mgm/gameing/system/GetCodeReward")),Zi=_interopRequireDefault(t("../../engtst/mgm/gameing/system/Tetris")),$i=_interopRequireDefault(t("./GmPlay")),ta=_interopRequireDefault(t("./GmProtocol"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var ea=function(){function XStat(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XStat),this.MAXSTACKSIZE=32,this.iXStat=-1,this.iStatStack=new Int32Array(this.MAXSTACKSIZE),this.iPointStack=new Int32Array(this.MAXSTACKSIZE),this.iPageStack=new Int32Array(this.MAXSTACKSIZE),this.objstack=new Array(this.MAXSTACKSIZE),this.oCurrentView=null,this.oPreviousView=null,this.iStatPoint=0,this.iPoint=0,this.iPage=0;for(var t=0;t<this.MAXSTACKSIZE;t++)this.objstack[t]=null;this.ResetStat()}return a(XStat,[{key:"ResetStat",value:function(){for(var t=0;t<this.MAXSTACKSIZE;t++)this.objstack[t]=null;this.iStatPoint=0,this.iStatStack[this.iStatPoint]=0,this.PushStat(0)}},{key:"PopStat",value:function(t,e){return null!=this.oPreviousView&&this.oPreviousView.CallBack(t,e),this.PopStat(1)}},{key:"PopStat",value:function(t){return Ui.default.bCheckTradeing&&this.iXStat==GS_MYTRADEFRAME&&(ta.default.gi().s_Trade(10,0,0,0,0,0,0,0,0,0,0),Ui.default.bCheckTradeing=!1),this.iXStat==XStat.GS_SYSTEMOPERATE&&($i.default.x_record.SaveTo(h.default.RECORDFILENAME),ta.default.gi().s_UseSkill(100,jt.default.iNearRoleCount,0,0,0,0,0)),t>1&&this.PopStat(t-1),this.iStatPoint>1&&(this.iPoint=this.iPointStack[this.iStatPoint],this.iPage=this.iPageStack[this.iStatPoint],this.objstack[this.iStatPoint]=null,this.iStatPoint--),this.iXStat=this.iStatStack[this.iStatPoint],this.oCurrentView=this.objstack[this.iStatPoint],this.oPreviousView=this.objstack[this.iStatPoint-1],this.iStatStack[this.iStatPoint]}},{key:"PushXmsStat",value:function(t,e){return Ui.default.bCheckTradeing&&t!=GS_WATCHON&&(ta.default.gi().s_Trade(10,0,0,0,0,0,0,0,0,0,0),Ui.default.bCheckTradeing=!1),this.iStatPoint<0||this.iStatPoint>=this.MAXSTACKSIZE?null:(this.iStatPoint++,this.iStatStack[this.iStatPoint]=t,this.iPointStack[this.iStatPoint]=this.iPoint,this.iPageStack[this.iStatPoint]=this.iPage,this.iPoint=0,this.iPage=0,this.iXStat=t,l.default.bBigUI&&t!=XStat.GS_GAMEING&&(l.default.SCRW,l.default.BUW),this.objstack[this.iStatPoint]=e,null!=this.objstack[this.iStatPoint]&&(this.objstack[this.iStatPoint].iStatType=t),this.oCurrentView=this.objstack[this.iStatPoint],this.oPreviousView=this.objstack[this.iStatPoint-1],di.default.Reset(),this.oCurrentView)}},{key:"PushStat",value:function(t){return Ui.default.bCheckTradeing&&t!=GS_WATCHON&&(ta.default.gi().s_Trade(10,0,0,0,0,0,0,0,0,0,0),Ui.default.bCheckTradeing=!1),this.iStatPoint<0||this.iStatPoint>=this.MAXSTACKSIZE?null:(this.iStatPoint++,this.iStatStack[this.iStatPoint]=t,this.iPointStack[this.iStatPoint]=this.iPoint,this.iPageStack[this.iStatPoint]=this.iPage,this.iPoint=0,this.iPage=0,this.iXStat=t,l.default.bBigUI&&t!=XStat.GS_GAMEING&&(l.default.SCRW,l.default.BUW),this.objstack[this.iStatPoint]=this.InitStat(),null!=this.objstack[this.iStatPoint]&&(this.objstack[this.iStatPoint].iStatType=t),this.oCurrentView=this.objstack[this.iStatPoint],this.oPreviousView=this.objstack[this.iStatPoint-1],di.default.Reset(),this.oCurrentView)}},{key:"bGameing",value:function(){for(var t=this.iStatPoint;t>0;t--)if(this.iStatStack[t]==XStat.GS_GAMEING)return!0;return!1}},{key:"bHaveStat",value:function(t){for(var e=this.iStatPoint;e>0;e--)if(this.iStatStack[e]==t)return!0;return!1}},{key:"FindStat",value:function(t){for(var e=this.iStatPoint;e>0;e--)if(this.iStatStack[e]==t)return this.objstack[e];return null}},{key:"LastStat",value:function(t){return this.objstack[this.iStatPoint-t]}},{key:"CheckStat",value:function(t){return this.LastStatType(0)==t}},{key:"LastStatType",value:function(t){return this.iStatStack[this.iStatPoint-t]}},{key:"InitStat",value:function(){switch(this.iXStat){case XStat.GS_EXITCONFIRM:return new W.default($i.default.xani_ui);case XStat.GS_KICKOUT:return new U.default($i.default.xani_back);case XStat.GS_LOADING1:return new Q.default($i.default.xani_ui);case XStat.GS_LOADING2:return new K.default($i.default.xani_ui);case XStat.GS_MESSAGE1:return new $.default($i.default.xani_ui);case XStat.GS_PROMPTMESSAGE:return new at.default($i.default.xani_ui);case XStat.GS_CONFIRM1:return new B.default($i.default.xani_ui);case XStat.GS_CONFIRM2:return new et.default($i.default.xani_ui);case XStat.GS_INNUMBER:return new j.default($i.default.xani_ui);case XStat.GS_LOGO:return new b.default($i.default.xani_ui);case XStat.GS_LEADPAGE:return new P.default;case XStat.GS_STARTGAME:return new T.default;case XStat.GS_MAINMENU:return new y.default($i.default.xani_ui);case XStat.GS_FASTLOGIN:switch(r.default.QUDAO){case 0:return new G.default;case 1:default:return new T.default}case XStat.GS_REGIST:return new I.default($i.default.xani_ui);case XStat.GS_LOGIN:return new X.default($i.default.xani_ui);case XStat.GS_SELECTROLE:return new R.default($i.default.xani_ui);case XStat.GS_CREATEROLE:return new S.default($i.default.xani_ui);case XStat.GS_SELECTSEVER:return new C.default($i.default.xani_ui);case XStat.GS_GAMEING:return new st.default($i.default.xani_ui);case XStat.GS_TEAMOPERATE:return new Hi.default($i.default.xani_ui);case XStat.GS_TEAMCREATE:return new Yi.default($i.default.xani_ui);case XStat.GS_TEAMZHEN:return new ji.default($i.default.xani_ui);case XStat.GS_TEAMDEST:return new Wi.default($i.default.xani_ui);case XStat.GS_SENDPUBLICCHAT:return new vt.default($i.default.xani_ui);case XStat.GS_SETCHATVALUE:return new Mt.default($i.default.xani_ui);case XStat.GS_ADDPOINT:return new ri.default($i.default.xani_ui);case XStat.GS_PRIVATECHAT:return new Dt.default($i.default.xani_ui);case XStat.GS_GIVEGOODS:return new hi.default($i.default.xani_ui);case XStat.GS_LEARNSKILL:return new Oi.default($i.default.xani_ui);case XStat.GS_BACKTOSCHOOL:return new Xi.default($i.default.xani_ui);case XStat.GS_MISSIONFRAME:return new wi.default($i.default.xani_ui);case XStat.GS_SELECTGOODSFORMISSION:return new Si.default($i.default.xani_ui);case XStat.GS_FULLCHATFRAME:return new xt.default($i.default.xani_ui);case XStat.GS_SHOPFRAME:return new Ni.default($i.default.xani_ui);case XStat.GS_SHELVESFRAME:return new Fi.default($i.default.xani_ui);case XStat.GS_CREATEGOV:return new be.default($i.default.xani_ui);case XStat.GS_APPLYFORGOV:return new ve.default($i.default.xani_ui);case XStat.GS_GOVFRAME:return new ye.default($i.default.xani_ui);case XStat.GS_LEARNGOVSKILL:return new Se.default($i.default.xani_ui);case XStat.GS_GOVXIU:return new we.default($i.default.xani_ui);case XStat.GS_SMALLMAP:return new c.default($i.default.xani_ui);case XStat.GS_WORLDMAP:return new g.default($i.default.xani_ui);case XStat.GS_SYSTEMOPERATE:return new jt.default($i.default.xani_ui);case XStat.GS_MYATTFRAME:return new ui.default($i.default.xani_ui);case XStat.GS_MEMBERDETAIL:return new xe.default($i.default.xani_ui);case XStat.GS_MAKEEQUIP:return new Et.default($i.default.xani_ui);case XStat.GS_FASTOPERATE:return new Ft.default($i.default.xani_ui);case XStat.GS_CAMEOOPERATE:return new kt.default($i.default.xani_ui);case XStat.GS_PETSFRAME:return new Mi.default($i.default.xani_ui);case XStat.GS_FUSEPET:return new Ti.default($i.default.xani_ui);case XStat.GS_APPROVEPET:return new ki.default($i.default.xani_ui);case XStat.GS_SELECTMYPET:return new Ai.default($i.default.xani_ui);case XStat.GS_INGOTMALL:return new Bt.default($i.default.xani_ui);case XStat.GS_FUBENMALL:return new ge.default($i.default.xani_ui);case XStat.GS_IMPROVEEQUIP:return new At.default($i.default.xani_ui);case XStat.GS_REPAIREQUIP:return new Ot.default($i.default.xani_ui);case XStat.GS_WATCHON:return new Ut.default($i.default.xani_ui);case XStat.GS_FINDFRIEND:return new qt.default($i.default.xani_ui);case XStat.GS_SMALLSPEAKER:return new pi.default($i.default.xani_ui);case XStat.GS_SENDNOVICEASK:return new si.default($i.default.xani_ui);case XStat.GS_SENDACEANSWER:return new ni.default($i.default.xani_ui);case XStat.GS_GETCODEREWARD:return new Ki.default($i.default.xani_ui);case XStat.GS_LEARNPETSKILL:return new vi.default($i.default.xani_ui);case XStat.GS_PETEAT:return new Ri.default($i.default.xani_ui);case XStat.GS_WASHPET:return new Ci.default($i.default.xani_ui);case XStat.GS_MYRECOVER:return new Ii.default($i.default.xani_ui);case XStat.GS_MYGOODSFRAME:return new _i.default($i.default.xani_ui);case XStat.GS_EXCHANGEMONEY:return new fi.default($i.default.xani_ui);case XStat.GS_MYTRADEFRAME:return new zi.default($i.default.xani_ui);case XStat.GS_GOODSSTOREFROME:return new Vi.default($i.default.xani_ui);case XStat.GS_PETSTOREFRAME:return new Qi.default($i.default.xani_ui);case XStat.GS_PRIVATECHATRECORD:return new wt.default($i.default.xani_ui);case XStat.GS_LIANDANSHU:return new Wt.default($i.default.xani_ui);case XStat.GS_SETTITLE:return new li.default($i.default.xani_ui);case XStat.GS_PETXIU:return new Pe.default($i.default.xani_ui);case XStat.GS_MOUNTSFRAME:return new Pi.default($i.default.xani_ui);case XStat.GS_FEEDMOUNTS:return new xi.default($i.default.xani_ui);case XStat.GS_NOVICEHELP:return new ii.default($i.default.xani_ui);case XStat.GS_NOVICEQUESTIONLIST:return new ai.default($i.default.xani_ui);case XStat.GS_NOVICECHECKANSWER:return new ei.default($i.default.xani_ui);case XStat.GS_PROMPTACTIVITY:return new Ze.default($i.default.xani_ui);case XStat.GS_SHOWACTIVITYDETAIL:return new $e.default($i.default.xani_ui);case XStat.GS_WEEKLYACTIVITY:return new ti.default($i.default.xani_ui);case XStat.GS_DAYATTEND:return new He.default($i.default.xani_ui);case XStat.GS_CHANGENAME:return new oi.default($i.default.xani_ui);case XStat.GS_LOCKOPEN:return new mi.default($i.default.xani_ui);case XStat.GS_LOCKSET:return new gi.default($i.default.xani_ui);case XStat.GS_LOCKFRAME:return new ci.default($i.default.xani_ui);case XStat.GS_SELECTGOODS:return new ct.default($i.default.xani_ui);case XStat.GS_SELECTPET:return new gt.default($i.default.xani_ui);case XStat.GS_EXTHELP:return new Qe.default($i.default.xani_ui);case XStat.GS_PLANTFRAME:return new Di.default($i.default.xani_ui);case XStat.GS_LANDFRAME:return new bi.default($i.default.xani_ui);case XStat.GS_SELECTLS:return new yi.default($i.default.xani_ui);case XStat.GS_EXTLEARNSKILL:return new De.default($i.default.xani_ui);case XStat.GS_APPLYGOVFIGHT:return new pe.default($i.default.xani_ui);case XStat.GS_GETINGOV:return new Re.default($i.default.xani_ui);case XStat.GS_NEWGOVFRAME:return new Te.default($i.default.xani_ui);case XStat.GS_MEMBEROPERATE:return new ke.default($i.default.xani_ui);case XStat.GS_SETGOVPOWER:return new Ae.default($i.default.xani_ui);case XStat.GS_CONFIRMAPPLY:return new Me.default($i.default.xani_ui);case XStat.GS_ENTRUSTMISSION:return new Ne.default($i.default.xani_ui);case XStat.GS_RELEASEGOVMISSION:return new Ye.default($i.default.xani_ui);case XStat.GS_NEWGOVMANAGE:return new Fe.default($i.default.xani_ui);case XStat.GS_GOV_SETBUILDING:return new Ge.default($i.default.xani_ui);case XStat.GS_GOV_SETRESEARCH:return new Ie.default($i.default.xani_ui);case XStat.GS_GOV_SETMTLEV:return new Xe.default($i.default.xani_ui);case XStat.GS_GOV_SETHOSTILITY:return new Ee.default($i.default.xani_ui);case XStat.GS_GOV_SETNAME:return new Oe.default($i.default.xani_ui);case XStat.GS_GOV_SETDETAIL:return new Ce.default($i.default.xani_ui);case XStat.GS_GOV_REMEDYMERGE:return new Be.default($i.default.xani_ui);case XStat.GS_HIRETRADERWORKER:return new qe.default($i.default.xani_ui);case XStat.GS_GOVFBTARGET:return new We.default($i.default.xani_ui);case XStat.GS_CREATEFT:return new Kt.default($i.default.xani_ui);case XStat.GS_FTFRAME:return new ae.default($i.default.xani_ui);case XStat.GS_FTAPPLY:return new he.default($i.default.xani_ui);case XStat.GS_FTMEMBER:return new de.default($i.default.xani_ui);case XStat.GS_FTAGREE:return new fe.default($i.default.xani_ui);case XStat.GS_FTRANK:return new ee.default($i.default.xani_ui);case XStat.GS_FTCHALLENGE:return new $t.default($i.default.xani_ui);case XStat.GS_FTPUTIN:return new le.default($i.default.xani_ui);case XStat.GS_FTGETOUT:return new se.default($i.default.xani_ui);case XStat.GS_FTMIJING:return new oe.default($i.default.xani_ui);case XStat.GS_JJPET:return new Gi.default($i.default.xani_ui);case XStat.GS_MERGEZR:return new Ei.default($i.default.xani_ui);case XStat.GS_CREATESHOP:return new Bi.default($i.default.xani_ui);case XStat.GS_FRIENDTEAM:return new pt.default($i.default.xani_ui);case XStat.GS_CHANGECOLOR:return new Ji.default($i.default.xani_ui);case XStat.GS_SELECTSCHOOL:return new ze.default($i.default.xani_ui);case XStat.GS_NEWSHOP:return new Le.default($i.default.xani_ui);case XStat.GS_SELECTNEWPET:return new Ue.default($i.default.xani_ui);case XStat.GS_CREATEFUBEN:return new me.default($i.default.xani_ui);case XStat.GS_APPLYFUBEN:return new ce.default($i.default.xani_ui);case XStat.GS_MANAGEFUBEN:return new _e.default($i.default.xani_ui);case XStat.GS_AQSTART:return new ht.default($i.default.xani_ui);case XStat.GS_AQDOING:return new lt.default($i.default.xani_ui);case XStat.GS_MAINHELP:return new je.default($i.default.xani_ui);case XStat.GS_TETRIS:return new Zi.default($i.default.xani_ui);case XStat.GS_DIEPROMPT:return new Qt.default($i.default.xani_ui);case XStat.GS_MYSELECT:return new Ve.default($i.default.xani_ui);case XStat.GS_SHOPBUYDRAWING:return new qi.default($i.default.xani_ui);case XStat.GS_PEAKFIGHT:return new ot.default($i.default.xani_ui);case XStat.GS_PEAKFIGHTSHOP:return new Li.default($i.default.xani_ui);case XStat.GS_LEADERBOARDFRAME:return new Je.default($i.default.xani_ui);case XStat.GS_LEADERBOARDROLE:return new Ke.default($i.default.xani_ui);default:$i.default.sop("un init stat = "+this.iXStat)}return null}},{key:"Draw",value:function(){var t;for(t=0;t<=this.iStatPoint;t++)null!=this.objstack[t]&&(l.default.bBigUI&&this.objstack[t].iStatType!=GS_GAMEING&&(l.default.SCRW,l.default.BUW),this.objstack[t].Draw())}},{key:"ProcTouch",value:function(t,e,i,a,n){return null!=this.objstack[this.iStatPoint]&&(l.default.bBigUI&&this.objstack[this.iStatPoint].iStatType!=GS_GAMEING&&l.default.SCRW>l.default.BUW?(N.default.gi().calcxy(a,n),this.objstack[this.iStatPoint].ProcTouch(t,N.default.gi().cx,N.default.gi().cy)):this.objstack[this.iStatPoint].ProcTouch(t,e,i))}}]),XStat}();i.default=ea,ea.GS_EXITCONFIRM=1,ea.GS_KICKOUT=2,ea.GS_LOADING1=10,ea.GS_LOADING2=11,ea.GS_MESSAGE1=50,ea.GS_PROMPTMESSAGE=60,ea.GS_CONFIRM1=70,ea.GS_CONFIRM2=71,ea.GS_INNUMBER=80,ea.GS_LEADPAGE=101,ea.GS_STARTGAME=102,ea.GS_LOGO=100,ea.GS_MAINMENU=200,ea.GS_FASTLOGIN=300,ea.GS_REGIST=400,ea.GS_LOGIN=500,ea.GS_SELECTROLE=600,ea.GS_CREATEROLE=700,ea.GS_SELECTSEVER=800,ea.GS_GAMEING=2e3,ea.GS_TEAMOPERATE=2100,ea.GS_TEAMCREATE=2101,ea.GS_TEAMZHEN=2102,ea.GS_TEAMDEST=2103,ea.GS_SENDPUBLICCHAT=2200,ea.GS_SETCHATVALUE=2202,ea.GS_ADDPOINT=2300,ea.GS_PRIVATECHAT=2400,ea.GS_GIVEGOODS=2500,ea.GS_LEARNSKILL=2600,ea.GS_BACKTOSCHOOL=2601,ea.GS_MISSIONFRAME=2700,ea.GS_SELECTGOODSFORMISSION=2701,ea.GS_FULLCHATFRAME=2800,ea.GS_SHOPFRAME=2900,ea.GS_SHELVESFRAME=3e3,ea.GS_SMALLMAP=3010,ea.GS_WORLDMAP=3011,ea.GS_SYSTEMOPERATE=3020,ea.GS_MYATTFRAME=3030,ea.GS_FASTOPERATE=3040,ea.GS_PETSFRAME=3050,ea.GS_FUSEPET=3051,ea.GS_APPROVEPET=3052,ea.GS_SELECTMYPET=3053,ea.GS_INGOTMALL=3060,ea.GS_FUBENMALL=3061,ea.GS_WATCHON=3070,ea.GS_FINDFRIEND=3080,ea.GS_SMALLSPEAKER=3090,ea.GS_SENDNOVICEASK=3091,ea.GS_SENDACEANSWER=3092,ea.GS_GETCODEREWARD=3093,ea.GS_LEARNPETSKILL=3100,ea.GS_PETEAT=3101,ea.GS_WASHPET=3110,ea.GS_MYRECOVER=3120,ea.GS_MYGOODSFRAME=3130,ea.GS_EXCHANGEMONEY=3131,ea.GS_MYTRADEFRAME=3140,ea.GS_GOODSSTOREFROME=3150,ea.GS_PETSTOREFRAME=3151,ea.GS_PRIVATECHATRECORD=3160,ea.GS_LIANDANSHU=3170,ea.GS_SETTITLE=3180,ea.GS_PETXIU=3190,ea.GS_MOUNTSFRAME=3200,ea.GS_FEEDMOUNTS=3210,ea.GS_NOVICEHELP=3220,ea.GS_NOVICEQUESTIONLIST=3230,ea.GS_NOVICECHECKANSWER=3240,ea.GS_PROMPTACTIVITY=3250,ea.GS_SHOWACTIVITYDETAIL=3251,ea.GS_WEEKLYACTIVITY=3252,ea.GS_DAYATTEND=3260,ea.GS_CHANGENAME=3270,ea.GS_LOCKSET=3280,ea.GS_LOCKOPEN=3290,ea.GS_LOCKFRAME=3300,ea.GS_SELECTGOODS=3310,ea.GS_SELECTPET=3330,ea.GS_EXTHELP=3340,ea.GS_PLANTFRAME=3350,ea.GS_LANDFRAME=3360,ea.GS_SELECTLS=3370,ea.GS_CREATEGOV=4e3,ea.GS_APPLYFORGOV=4001,ea.GS_GOVFRAME=4002,ea.GS_LEARNGOVSKILL=4003,ea.GS_GOVXIU=4004,ea.GS_MEMBERDETAIL=4005,ea.GS_EXTLEARNSKILL=4006,ea.GS_APPLYGOVFIGHT=4007,ea.GS_GETINGOV=4008,ea.GS_NEWGOVFRAME=4009,ea.GS_MEMBEROPERATE=4010,ea.GS_SETGOVPOWER=4011,ea.GS_CONFIRMAPPLY=4012,ea.GS_ENTRUSTMISSION=4013,ea.GS_RELEASEGOVMISSION=4014,ea.GS_NEWGOVMANAGE=4015,ea.GS_GOV_SETBUILDING=4016,ea.GS_GOV_SETRESEARCH=4017,ea.GS_GOV_SETMTLEV=4018,ea.GS_GOV_SETHOSTILITY=4019,ea.GS_GOV_SETNAME=4020,ea.GS_GOV_SETDETAIL=4021,ea.GS_GOV_REMEDYMERGE=4022,ea.GS_HIRETRADERWORKER=4023,ea.GS_GOVFBTARGET=4024,ea.GS_CREATEFT=4100,ea.GS_FTFRAME=4101,ea.GS_FTAPPLY=4102,ea.GS_FTMEMBER=4103,ea.GS_FTAGREE=4104,ea.GS_FTRANK=4105,ea.GS_FTCHALLENGE=4106,ea.GS_FTPUTIN=4107,ea.GS_FTGETOUT=4108,ea.GS_FTMIJING=4109,ea.GS_JJPET=4110,ea.GS_MERGEZR=4111,ea.GS_CREATESHOP=4200,ea.GS_FRIENDTEAM=4300,ea.GS_CHANGECOLOR=4400,ea.GS_SELECTSCHOOL=4500,ea.GS_NEWSHOP=4600,ea.GS_SELECTNEWPET=4700,ea.GS_MAKEEQUIP=5e3,ea.GS_CAMEOOPERATE=5010,ea.GS_IMPROVEEQUIP=5020,ea.GS_REPAIREQUIP=5030,ea.GS_CREATEFUBEN=6e3,ea.GS_APPLYFUBEN=6010,ea.GS_MANAGEFUBEN=6020,ea.GS_AQSTART=6500,ea.GS_AQDOING=6501,ea.GS_MAINHELP=6502,ea.GS_DIEPROMPT=7e3,ea.GS_MYSELECT=7001,ea.GS_SHOPBUYDRAWING=7002,ea.GS_PEAKFIGHT=7003,ea.GS_PEAKFIGHTSHOP=7004,ea.GS_LEADERBOARDFRAME=7005,ea.GS_LEADERBOARDROLE=7006,ea.GS_TETRIS=1e4,ea.x_stat=null,ea.gi=function(){return null==ea.x_stat&&(ea.x_stat=new ea),ea.x_stat}},{"../../config/GameData":4,"../../config/GmConfig":5,"../../config/XDefine":7,"../../engine/BaseClass":8,"../../engine/TouchManager":10,"../../engine/graphics/XAnima":30,"../../engtst/mgm/frame/Confirm1":71,"../../engtst/mgm/frame/ExitConfirm":73,"../../engtst/mgm/frame/InNumber":74,"../../engtst/mgm/frame/KickOut":75,"../../engtst/mgm/frame/Loading1":76,"../../engtst/mgm/frame/Loading2":77,"../../engtst/mgm/frame/Message1":78,"../../engtst/mgm/frame/SevConfirm":79,"../../engtst/mgm/frame/message/PromptMessage":89,"../../engtst/mgm/gameing/Gameing":91,"../../engtst/mgm/gameing/act/PeakFight":95,"../../engtst/mgm/gameing/afternoonquestion/AQDoing":96,"../../engtst/mgm/gameing/afternoonquestion/AQStart":97,"../../engtst/mgm/gameing/chat/SelectGoods":100,"../../engtst/mgm/gameing/chat/SelectPet":101,"../../engtst/mgm/gameing/chat/privatechat/FriendTeam":103,"../../engtst/mgm/gameing/chat/privatechat/PrivateChatRecord":105,"../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../engtst/mgm/gameing/chat/publicchat/PublicChat_BigFrame":109,"../../engtst/mgm/gameing/chat/publicchat/PublicChat_Send":110,"../../engtst/mgm/gameing/chat/publicchat/SetChatValue":112,"../../engtst/mgm/gameing/equip/CameoOperate":114,"../../engtst/mgm/gameing/equip/ImproveEquip":115,"../../engtst/mgm/gameing/equip/MakeEquip":116,"../../engtst/mgm/gameing/equip/RepairEquip":117,"../../engtst/mgm/gameing/fast/FastOperate":119,"../../engtst/mgm/gameing/fast/FindFriend":120,"../../engtst/mgm/gameing/fast/IngotMall":121,"../../engtst/mgm/gameing/fast/LianDanShu":122,"../../engtst/mgm/gameing/fast/SystemOperate":124,"../../engtst/mgm/gameing/fast/WatchOn":125,"../../engtst/mgm/gameing/fight/DiePrompt":127,"../../engtst/mgm/gameing/fteam/CreateFT":137,"../../engtst/mgm/gameing/fteam/FTChallenge":138,"../../engtst/mgm/gameing/fteam/FTRank":139,"../../engtst/mgm/gameing/fteam/manage/FTFrame":141,"../../engtst/mgm/gameing/fteam/manage/FTGetOut":142,"../../engtst/mgm/gameing/fteam/manage/FTMiJing":143,"../../engtst/mgm/gameing/fteam/manage/FTPutIn":144,"../../engtst/mgm/gameing/fteam/member/FTAgree":145,"../../engtst/mgm/gameing/fteam/member/FTApply":146,"../../engtst/mgm/gameing/fteam/member/FTMember":147,"../../engtst/mgm/gameing/fuben/ApplyFuBen":148,"../../engtst/mgm/gameing/fuben/CreateFuBen":149,"../../engtst/mgm/gameing/fuben/FubenMall":150,"../../engtst/mgm/gameing/fuben/ManageFuBen":151,"../../engtst/mgm/gameing/gov/ApplyGovFight":153,"../../engtst/mgm/gameing/gov/CreateGov":154,"../../engtst/mgm/gameing/gov/ExtLearnSkill":155,"../../engtst/mgm/gameing/gov/GovFrame":156,"../../engtst/mgm/gameing/gov/GovXiu":157,"../../engtst/mgm/gameing/gov/LearnGovSkill":158,"../../engtst/mgm/gameing/gov/MemberDetail":159,"../../engtst/mgm/gameing/gov/PetXiu":161,"../../engtst/mgm/gameing/gov/ext/HireTraderWorker":162,"../../engtst/mgm/gameing/gov/ext/NewShop":163,"../../engtst/mgm/gameing/gov/ext/RemedyMerge":164,"../../engtst/mgm/gameing/gov/ext/apply/ApplyForGov":165,"../../engtst/mgm/gameing/gov/ext/apply/GetInGov":166,"../../engtst/mgm/gameing/gov/ext/base/ConfirmApply":167,"../../engtst/mgm/gameing/gov/ext/base/Gov_SetDetail":168,"../../engtst/mgm/gameing/gov/ext/base/MemberOperate":169,"../../engtst/mgm/gameing/gov/ext/base/NewGovFrame":170,"../../engtst/mgm/gameing/gov/ext/base/SetGovPower":171,"../../engtst/mgm/gameing/gov/ext/manage/Gov_SetBuilding":172,"../../engtst/mgm/gameing/gov/ext/manage/Gov_SetHostility":173,"../../engtst/mgm/gameing/gov/ext/manage/Gov_SetMtLev":174,"../../engtst/mgm/gameing/gov/ext/manage/Gov_SetName":175,"../../engtst/mgm/gameing/gov/ext/manage/Gov_SetResearch":176,"../../engtst/mgm/gameing/gov/ext/manage/NewGovManage":177,"../../engtst/mgm/gameing/gov/ext/mission/EntrustMission":178,"../../engtst/mgm/gameing/gov/ext/mission/ReleaseGovMission":179,"../../engtst/mgm/gameing/gov/fuben/GovFBTarget":180,"../../engtst/mgm/gameing/help/DayAttend":182,"../../engtst/mgm/gameing/help/ExtHelp/ExtHelp":183,"../../engtst/mgm/gameing/help/MainHelp":188,"../../engtst/mgm/gameing/help/MySelect":189,"../../engtst/mgm/gameing/help/SelectNewPet":190,"../../engtst/mgm/gameing/help/SelectSchool":191,"../../engtst/mgm/gameing/help/TopIcon/LeaderBoard_/LeaderBoardFrame":196,"../../engtst/mgm/gameing/help/TopIcon/LeaderBoard_/LeaderBoardRole":197,"../../engtst/mgm/gameing/help/ang/NewActivity":200,"../../engtst/mgm/gameing/help/ang/PromptActivity":201,"../../engtst/mgm/gameing/help/ang/ShowActivityDetail":202,"../../engtst/mgm/gameing/help/ang/WeeklyActivity":203,"../../engtst/mgm/gameing/help/novice/NoviceCheckAnswer":204,"../../engtst/mgm/gameing/help/novice/NoviceHelp":205,"../../engtst/mgm/gameing/help/novice/NoviceQuestionList":206,"../../engtst/mgm/gameing/help/novice/Send_AceAnswer":207,"../../engtst/mgm/gameing/help/novice/Send_NoviceAsk":208,"../../engtst/mgm/gameing/me/AddPoint":209,"../../engtst/mgm/gameing/me/ChangeName":210,"../../engtst/mgm/gameing/me/MyAttFrame":212,"../../engtst/mgm/gameing/me/SetTitle":213,"../../engtst/mgm/gameing/me/goods/ExchangeMoney":215,"../../engtst/mgm/gameing/me/goods/GiveGoods":216,"../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../engtst/mgm/gameing/me/goods/LockFrame":219,"../../engtst/mgm/gameing/me/goods/LockOpen":220,"../../engtst/mgm/gameing/me/goods/LockSet":221,"../../engtst/mgm/gameing/me/goods/MyGoodsFrame":223,"../../engtst/mgm/gameing/me/goods/SmallSpeaker":224,"../../engtst/mgm/gameing/me/land/LandFrame":226,"../../engtst/mgm/gameing/me/land/PlantFrame":228,"../../engtst/mgm/gameing/me/land/SelectLS":229,"../../engtst/mgm/gameing/me/mission/MissionFrame":231,"../../engtst/mgm/gameing/me/mission/SelectGoodsForMission":234,"../../engtst/mgm/gameing/me/mounts/FeedMounts":240,"../../engtst/mgm/gameing/me/mounts/MountsFrame":242,"../../engtst/mgm/gameing/me/pet/LearnPetSkill":244,"../../engtst/mgm/gameing/me/pet/PetEat":246,"../../engtst/mgm/gameing/me/pet/PetsFrame":248,"../../engtst/mgm/gameing/me/pet/WashPet":249,"../../engtst/mgm/gameing/me/pet/fuse/ApprovePet":250,"../../engtst/mgm/gameing/me/pet/fuse/FusePet":251,"../../engtst/mgm/gameing/me/pet/fuse/SelectMyPet":252,"../../engtst/mgm/gameing/me/pet/jj/JJPet":253,"../../engtst/mgm/gameing/me/pet/jj/MergeZR":254,"../../engtst/mgm/gameing/me/school/BackToSchool":255,"../../engtst/mgm/gameing/me/school/LearnSkill":256,"../../engtst/mgm/gameing/me/shop/MyRecover":258,"../../engtst/mgm/gameing/me/shop/NpcShopFrame":261,"../../engtst/mgm/gameing/me/shop/ShelvesFrame":262,"../../engtst/mgm/gameing/me/shop/business/CreateShop":263,"../../engtst/mgm/gameing/me/shop/shop_BuyDrawing":264,"../../engtst/mgm/gameing/me/shop/shop_PeakFight":265,"../../engtst/mgm/gameing/me/team/TeamCreate":267,"../../engtst/mgm/gameing/me/team/TeamDest":268,"../../engtst/mgm/gameing/me/team/TeamOperate":269,"../../engtst/mgm/gameing/me/team/TeamZhen":271,"../../engtst/mgm/gameing/me/trade/GoodsStoreFrame":272,"../../engtst/mgm/gameing/me/trade/MyTrade":273,"../../engtst/mgm/gameing/me/trade/MyTradeFrame":274,"../../engtst/mgm/gameing/me/trade/PetStoreFrame":275,"../../engtst/mgm/gameing/system/ChangeColor":278,"../../engtst/mgm/gameing/system/GetCodeReward":279,"../../engtst/mgm/gameing/system/Tetris":280,"../../map/SmallMap":288,"../../map/WorldMap":291,"../../mgm/mainmenu/FastGetin_uc":301,"../../mgm/mainmenu/Logo":302,"../../mgm/mainmenu/MainMenu":303,"../../mgm/newmainmenu/CreateRole":307,"../../mgm/newmainmenu/LeadPage":308,"../../mgm/newmainmenu/SelectRole":309,"../../mgm/newmainmenu/SelectSever":310,"../../mgm/newmainmenu/StartGame":312,"../../mgm/newmainmenu/local/FastGetin_local":313,"../../mgm/newmainmenu/local/Login_local":314,"../../mgm/newmainmenu/local/Regist_local":315,"../../zero/Interface/GameVersion":317,"./GmPlay":65,"./GmProtocol":66}],71:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=_interopRequireDefault(t("../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../engine/control/XButton")),_interopRequireDefault(t("../../../engine/control/XButtonEx2"))),o=(_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"))),u=_interopRequireDefault(t("../../../engtst/mgm/XStat")),l=_interopRequireDefault(t("../../../engtst/mgm/frame/format/FormatString")),f=_interopRequireDefault(t("./DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function Confirm1(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Confirm1);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Confirm1.__proto__||Object.getPrototypeOf(Confirm1)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=350,e.iH=200,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_ok=new r.default(o.default.xani_nui3),e.btn_ok.InitButton("内框按钮"),e.btn_ok.Move(e.iX+10,e.iY+e.iH-60,70,40),e.btn_ok.sName="确定",e.btn_cancel=new r.default(o.default.xani_nui3),e.btn_cancel.InitButton("内框按钮"),e.btn_cancel.Move(e.iX+e.iW-90,e.iY+e.iH-60,70,40),e.btn_cancel.sName="取消",Confirm1.bFinished=!1,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Confirm1,s.default),a(Confirm1,[{key:"Draw",value:function(){l.default.gi().FormatEx(Confirm1.sDetail,this.iW-40,26,0,0,30),this.iH=20+l.default.gi().iH+20+55+20,this.iY=(n.default.SCRH-this.iH)/2,this.btn_ok.Move(this.iX+20,this.iY+this.iH-70,98,55),this.btn_cancel.Move(this.iX+this.iW-98-20,this.iY+this.iH-70,98,55),f.default.new_framewatch(this.iX,this.iY,this.iW,this.iH),l.default.gi().Draw(this.iX+20,this.iY+20),this.btn_ok.Draw(),this.btn_cancel.Draw()}},{key:"ProcTouch",value:function(t,e,i){return this.btn_ok.ProcTouch(t,e,i)&&this.btn_ok.bCheck()&&(Confirm1.bFinished=!0,Confirm1.bConfirm=!0,u.default.gi().PopStat(1)),this.btn_cancel.ProcTouch(t,e,i)&&this.btn_cancel.bCheck()&&(Confirm1.bFinished=!0,Confirm1.bConfirm=!1,u.default.gi().PopStat(1)),!1}}]),Confirm1}();i.default=h,h.CONFIRM_UPGRADE=10,h.CONFIRM_DROPGOODS=20,h.CONFIRM_BREAKGOODS=21,h.CONFIRM_DROPPET=30,h.CONFIRM_INVITE=40,h.CONFIRM_MYBUY=50,h.CONFIRM_LEAVEGOV=60,h.CONFIRM_UPGRADEGOV=61,h.CONFIRM_SWAPGOV=62,h.CONFIRM_GOVKICK=70,h.CONFIRM_BUYSTORE=80,h.CONFIRM_DROPMOUNTS=90,h.CONFIRM_JJMOUNTS=100,h.CONFIRM_ESCAPE=110,h.CONFIRM_LEAVEFUBEN=120,h.CONFIRM_STARTFUBEN=130,h.CONFIRM_VIP=140,h.CONFIRM_LOCK=150,h.CONFIRM_UNLOCK=160,h.CONFIRM_NOWAR=200,h.CONFIRM_SWADD=201,h.CONFIRM_FTDISMISS=202,h.CONFIRM_FTKICK=203,h.CONFIRM_FTTRANFER=204,h.CONFIRM_FTMJ1=210,h.CONFIRM_FTMJ2=211,h.CONFIRM_FTMJ3=212,h.CONFIRM_FTMJ4=213,h.CONFIRM_FTMJ5=214,h.CONFIRM_MERGEONE=250,h.CONFIRM_MERGEALL=251,h.CONFIRM_IMPROVEEQUIP=260,h.CONFIRM_EXITAQ=270,h.CONFIRM_FUSEPET=280,h.CONFIRM_APPROVEPET=281,h.CONFIRM_CHANGECOLOR=290,h.CONFIRM_BACKGOV=300,h.CONFIRM_GOVAPPOINT=301,h.CONFIRM_GOVKICKMEMBER=302,h.CONFIRM_GOVRELEASEENTRUST=303,h.CONFIRM_GOVCANCELENTRUST=304,h.CONFIRM_GOVGETENTRUST=305,h.CONFIRM_GOVUPGRADE=306,h.CONFIRM_GOVDISBAND=307,h.CONFIRM_GOVCONVEY1=[310,311,312,313,314,315,316],h.CONFIRM_GOVCONVEY2=[320,321,322,323,324,325,326],h.CONFIRM_BACKTOSCHOOL=400,h.CONFIRM_WASHROLEPOINT=500,h.CONFIRM_OPENPOINTPLAN=501,h.CONFIRM_SWAPPOINTPLAN=502,h.CONFIRM_WASHPET=600,h.CONFIRM_WASHPETBYINGOT=601,h.CONFIRM_CANCELMISSION=700,h.iCid,h.bFinished=!1,h.bConfirm,h.iCid,h.sDetail,h.start=function(t,e){u.default.gi().LastStatType(0)!=u.default.GS_CONFIRM1&&(h.iCid=t,h.sDetail=e,h.bFinished=!1,u.default.gi().PushStat(u.default.GS_CONFIRM1))},h.end=function(t){return!(!h.bFinished||h.iCid!=t)&&(h.iCid=0,h.bFinished=!1,!0)}},{"../../../config/GmConfig":5,"../../../engine/BaseClass":8,"../../../engine/control/XButton":14,"../../../engine/control/XButtonEx2":16,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/XStat":70,"../../../engtst/mgm/frame/format/FormatString":81,"./DrawMode":72}],72:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=_interopRequireDefault(t("../../../engine/graphics/AnimaAction")),n=_interopRequireDefault(t("../../../engine/graphics/M3DFast")),s=_interopRequireDefault(t("../../../engtst/mgm/GmPlay")),r=_interopRequireDefault(t("../../../engtst/mgm/gameing/fast/SystemOperate"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var o=function DrawMode(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,DrawMode)};i.default=o,o.aa_tmp=new a.default,o.dm=new o,o.ui3_frame1=null,o.ui3_frame2=null,o.ui3_frame3=null,o.ui3_frame4=null,o.ui3_frame5=null,o.ui3_text2=null,o.ui4_frame1=null,o.ui4_frame2=null,o.ui4_FrameUp=function(t,e,i){null==o.ui4_frame1&&(o.ui4_frame1=s.default.xani_ui4.InitAnimaWithName("对话框上",null)),o.ui4_frame1.iFrame=1,o.ui4_frame1.DrawEx(t+40,e,101,1*(i-80)/40,1,0,0,0),o.ui4_frame1.iFrame=0,o.ui4_frame1.Draw(t,e),o.ui4_frame1.iFrame=2,o.ui4_frame1.Draw(t+i-40,e)},o.ui4_FrameDown=function(t,e,i,a){null==o.ui4_frame2&&(o.ui4_frame2=s.default.xani_ui4.InitAnimaWithName("对话框下",null)),o.ui4_frame2.iFrame=8,o.ui4_frame2.DrawEx(t+40,e+40,101,1*(i-80)/40,1*(a-80)/40,0,0,0),o.ui4_frame2.iFrame=0,o.ui4_frame2.Draw(t,e),o.ui4_frame2.iFrame=2,o.ui4_frame2.Draw(t+i-40,e),o.ui4_frame2.iFrame=4,o.ui4_frame2.Draw(t+i-40,e+a-40),o.ui4_frame2.iFrame=6,o.ui4_frame2.Draw(t,e+a-40),o.ui4_frame2.iFrame=1,o.ui4_frame2.DrawEx(t+40,e,101,1*(i-80)/40,1,0,0,0),o.ui4_frame2.iFrame=5,o.ui4_frame2.DrawEx(t+40,e+a-40,101,1*(i-80)/40,1,0,0,0),o.ui4_frame2.iFrame=3,o.ui4_frame2.DrawEx(t+i-40,e+40,101,1,1*(a-80)/40,0,0,0),o.ui4_frame2.iFrame=7,o.ui4_frame2.DrawEx(t,e+40,101,1,1*(a-80)/40,0,0,0)},o.ui3_DefineFrame=function(t,e,i,a){null==o.ui3_frame5&&(o.ui3_frame5=s.default.xani_ui3.InitAnimaWithName("基本框5",null)),n.default.gi().SetViewClip(t+5,e+5,t+i-5,e+a-5),s.default.xani_ui3.DrawAnima(t+i/2-400,e+a/2-240,"基本大框",0),n.default.gi().NoClip(),o.ui3_frame5.iFrame=0,o.ui3_frame5.DrawEx(t,e,101,1,1,0,0,0),o.ui3_frame5.iFrame=2,o.ui3_frame5.DrawEx(t+i-50,e,101,1,1,0,0,0),o.ui3_frame5.iFrame=4,o.ui3_frame5.DrawEx(t+i-50,e+a-50,101,1,1,0,0,0),o.ui3_frame5.iFrame=6,o.ui3_frame5.DrawEx(t,e+a-50,101,1,1,0,0,0),i>100&&(o.ui3_frame5.iFrame=1,o.ui3_frame5.DrawEx(t+50,e,101,1*(i-100)/200,1,0,0,0),o.ui3_frame5.iFrame=5,o.ui3_frame5.DrawEx(t+50,e+a-11,101,1*(i-100)/200,1,0,0,0)),a>100&&(o.ui3_frame5.iFrame=3,o.ui3_frame5.DrawEx(t+i-11,e+50,101,1,1*(a-100)/200,0,0,0),o.ui3_frame5.iFrame=7,o.ui3_frame5.DrawEx(t,e+50,101,1,1*(a-100)/200,0,0,0))},o.ui3_TagText4=function(t,e,i,a,s,r){n.default.gi().DrawText_2(t+15,e+5+0,i,4291338240,17,101,1,1,0,-2,0,3,4278190080),n.default.gi().DrawText_2(t+15,e+5+18,a,4291338240,17,101,1,1,0,-2,0,3,4278190080),n.default.gi().DrawText_2(t+15,e+5+36,s,4291338240,17,101,1,1,0,-2,0,3,4278190080),n.default.gi().DrawText_2(t+15,e+5+54,r,4291338240,17,101,1,1,0,-2,0,3,4278190080)},o.ui3_TagText3=function(t,e,i,a,s){n.default.gi().DrawText_2(t+15,e+10+0,i,4291338240,17,101,1,1,0,-2,0,3,4278190080),n.default.gi().DrawText_2(t+15,e+10+22,a,4291338240,17,101,1,1,0,-2,0,3,4278190080),n.default.gi().DrawText_2(t+15,e+10+44,s,4291338240,17,101,1,1,0,-2,0,3,4278190080)},o.ui3_TagText2=function(t,e,i,a){n.default.gi().DrawText_2(t+15,e+18+0,i,4291338240,17,101,1,1,0,-2,0,3,4278190080),n.default.gi().DrawText_2(t+15,e+18+26,a,4291338240,17,101,1,1,0,-2,0,3,4278190080)},o.ui3_BaseFrame2=function(t,e,i,a){s.default.xani_ui3.DrawAnima(t,e,"基本大框",0),n.default.gi().DrawText_2(t+21,e+130-23,i,4294967295,20,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+21,e+130+23,a,4294967295,20,101,1,1,0,-2,-2,3,4278190080)},o.ui3_BaseFrame3=function(t,e,i,a,r){s.default.xani_ui3.DrawAnima(t,e,"基本大框",0),n.default.gi().DrawText_2(t+21,e+130-35,i,4294967295,20,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+21,e+130,a,4294967295,20,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+21,e+130+35,r,4294967295,20,101,1,1,0,-2,-2,3,4278190080)},o.ui3_BaseFrame4=function(t,e,i,a,r,o){s.default.xani_ui3.DrawAnima(t,e,"基本大框",0),n.default.gi().DrawText_2(t+21,e+130-45,i,4294967295,20,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+21,e+130-15,a,4294967295,20,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+21,e+130+15,r,4294967295,20,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+21,e+130+45,o,4294967295,20,101,1,1,0,-2,-2,3,4278190080)},o.ui3_Frame1=function(t,e,i,a){null==o.ui3_frame1&&(o.ui3_frame1=s.default.xani_ui3.InitAnimaWithName("基本框1",null)),s.default.xani_ui3.DrawAnima_aa(t,e,o.ui3_frame1.iAnimaPoint,0),s.default.xani_ui3.DrawAnimaEx(t+10,e,o.ui3_frame1.iAnimaPoint,1,101,1*(i-20)/10,1,0,0,0),s.default.xani_ui3.DrawAnima_aa(t+i-10,e,o.ui3_frame1.iAnimaPoint,2),s.default.xani_ui3.DrawAnimaEx(t+i-10,e+10,o.ui3_frame1.iAnimaPoint,3,101,1,1*(a-20)/10,0,0,0),s.default.xani_ui3.DrawAnima_aa(t+i-10,e+a-10,o.ui3_frame1.iAnimaPoint,4),s.default.xani_ui3.DrawAnimaEx(t+10,e+a-10,o.ui3_frame1.iAnimaPoint,5,101,1*(i-20)/10,1,0,0,0),s.default.xani_ui3.DrawAnima_aa(t,e+a-10,o.ui3_frame1.iAnimaPoint,6),s.default.xani_ui3.DrawAnimaEx(t,e+10,o.ui3_frame1.iAnimaPoint,7,101,1,1*(a-20)/10,0,0,0),s.default.xani_ui3.DrawAnimaEx(t+10,e+10,o.ui3_frame1.iAnimaPoint,8,101,1*(i-20)/10,1*(a-20)/10,0,0,0)},o.ui3_Frame2=function(t,e,i,a){null==o.ui3_frame2&&(o.ui3_frame2=s.default.xani_ui3.InitAnimaWithName("基本框2",null)),s.default.xani_ui3.DrawAnima_aa(t,e,o.ui3_frame2.iAnimaPoint,0),s.default.xani_ui3.DrawAnimaEx(t+10,e,o.ui3_frame2.iAnimaPoint,1,101,1*(i-20)/10,1,0,0,0),s.default.xani_ui3.DrawAnima_aa(t+i-10,e,o.ui3_frame2.iAnimaPoint,2),s.default.xani_ui3.DrawAnimaEx(t+i-10,e+10,o.ui3_frame2.iAnimaPoint,3,101,1,1*(a-20)/10,0,0,0),s.default.xani_ui3.DrawAnima_aa(t+i-10,e+a-10,o.ui3_frame2.iAnimaPoint,4),s.default.xani_ui3.DrawAnimaEx(t+10,e+a-10,o.ui3_frame2.iAnimaPoint,5,101,1*(i-20)/10,1,0,0,0),s.default.xani_ui3.DrawAnima_aa(t,e+a-10,o.ui3_frame2.iAnimaPoint,6),s.default.xani_ui3.DrawAnimaEx(t,e+10,o.ui3_frame2.iAnimaPoint,7,101,1,1*(a-20)/10,0,0,0),s.default.xani_ui3.DrawAnimaEx(t+10,e+10,o.ui3_frame2.iAnimaPoint,8,101,1*(i-20)/10,1*(a-20)/10,0,0,0)},o.ui3_Frame3=function(t,e,i,a){null==o.ui3_frame3&&(o.ui3_frame3=s.default.xani_ui3.InitAnimaWithName("基本框3",null)),s.default.xani_ui3.DrawAnima_aa(t,e,o.ui3_frame3.iAnimaPoint,0),s.default.xani_ui3.DrawAnimaEx(t+13,e,o.ui3_frame3.iAnimaPoint,1,101,1*(i-26)/13,1,0,0,0),s.default.xani_ui3.DrawAnima_aa(t+i-13,e,o.ui3_frame3.iAnimaPoint,2),s.default.xani_ui3.DrawAnimaEx(t+i-13,e+13,o.ui3_frame3.iAnimaPoint,3,101,1,1*(a-26)/13,0,0,0),s.default.xani_ui3.DrawAnima_aa(t+i-13,e+a-13,o.ui3_frame3.iAnimaPoint,4),s.default.xani_ui3.DrawAnimaEx(t+13,e+a-13,o.ui3_frame3.iAnimaPoint,5,101,1*(i-26)/13,1,0,0,0),s.default.xani_ui3.DrawAnima_aa(t,e+a-13,o.ui3_frame3.iAnimaPoint,6),s.default.xani_ui3.DrawAnimaEx(t,e+13,o.ui3_frame3.iAnimaPoint,7,101,1,1*(a-26)/13,0,0,0)},o.ui3_Frame4=function(t,e,i,a){null==o.ui3_frame4&&(o.ui3_frame4=s.default.xani_ui3.InitAnimaWithName("基本框4",null)),s.default.xani_ui3.DrawAnima_aa(t,e,o.ui3_frame4.iAnimaPoint,0),s.default.xani_ui3.DrawAnimaEx(t+30,e,o.ui3_frame4.iAnimaPoint,1,101,1*(i-60)/30,1,0,0,0),s.default.xani_ui3.DrawAnima_aa(t+i-30,e,o.ui3_frame4.iAnimaPoint,2),s.default.xani_ui3.DrawAnimaEx(t+i-30,e+30,o.ui3_frame4.iAnimaPoint,3,101,1,1*(a-60)/30,0,0,0),s.default.xani_ui3.DrawAnima_aa(t+i-30,e+a-30,o.ui3_frame4.iAnimaPoint,4),s.default.xani_ui3.DrawAnimaEx(t+30,e+a-30,o.ui3_frame4.iAnimaPoint,5,101,1*(i-60)/30,1,0,0,0),s.default.xani_ui3.DrawAnima_aa(t,e+a-30,o.ui3_frame4.iAnimaPoint,6),s.default.xani_ui3.DrawAnimaEx(t,e+30,o.ui3_frame4.iAnimaPoint,7,101,1,1*(a-60)/30,0,0,0),s.default.xani_ui3.DrawAnimaEx(t+30,e+30,o.ui3_frame4.iAnimaPoint,8,101,1*(i-60)/30,1*(a-60)/30,0,0,0)},o.ui3_Text1=function(t,e,i,a,s,r){o.frame_type1("3号框20_30",t,e,i,20),o.frame_type1("4号框20_30",t+i,e,a,20),n.default.gi().DrawText_2(t+i/2,e+16,s,4294967295,20,101,1,1,0,-2,-2,0,4278190080),n.default.gi().DrawText_2(t+i+a/2,e+16,r,4294967295,20,101,1,1,0,-2,-2,0,4278190080)},o.ui3_Text1_=function(t,e,i,a,r,o){s.default.xani_nui2.DrawAnima(t,e,"提示1",0),s.default.xani_nui2.DrawAnimaEx(t+i,e,"可变长文字框",0,101,1,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+i+15,e,"可变长文字框",1,101,1*(a-30)/20,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+i+a-20,e,"可变长文字框",2,101,1,1,0,0,0),n.default.gi().DrawText_2(t+i/2,e+16,r,4294967295,20,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+i+a/2,e+16,o,4294967295,20,101,1,1,0,-2,-2,3,4278190080)},o.ui3_Text1__=function(t,e,i,a,r,o){s.default.xani_nui2.DrawAnima(t,e,"提示1",0),s.default.xani_nui2.DrawAnimaEx(t+i,e,"可变长文字框",0,101,1,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+i+20,e,"可变长文字框",1,101,(a-40)/20,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+i+20+a-40,e,"可变长文字框",2,101,1,1,0,0,0),n.default.gi().DrawText_2(t+i/2,e+16,r,4294967295,20,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+i+a/2,e+16,o,4294967295,20,101,1,1,0,-2,-2,3,4278190080)},o.ui3_Text1_4word=function(t,e,i,a,r,o){s.default.xani_nui2.DrawAnima(t,e,"提示1",2),s.default.xani_nui2.DrawAnimaEx(t+i,e,"可变长文字框",0,101,1,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+i+18,e,"可变长文字框",1,101,1*(a-36)/20,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+i+a-20,e,"可变长文字框",2,101,1,1,0,0,0),n.default.gi().DrawText_2(t+i/2,e+16,r,4294967295,20,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+i+a/2,e+16,o,4294967295,20,101,1,1,0,-2,-2,3,4278190080)},o.ui3_Text1_4word_=function(t,e,i,a,r,o){s.default.xani_nui2.DrawAnima(t,e,"提示1",2),s.default.xani_nui2.DrawAnimaEx(t+i,e,"可变长文字框",0,101,1,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+i+20,e,"可变长文字框",1,101,(a-40)/20,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+i+20+a-40,e,"可变长文字框",2,101,1,1,0,0,0),n.default.gi().DrawText_2(t+i/2,e+16,r,4294967295,20,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+i+a/2,e+16,o,4294967295,20,101,1,1,0,-2,-2,3,4278190080)},o.new_bgbar=function(t,e,i,a,n){s.default.xani_nui2.DrawAnimaEx(t,e,n,0,101,1,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+a,e,n,1,101,(i-2*a)/a,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+i-a,e,n,2,101,1,1,0,0,0)},o.ui3_Text2=function(t,e,i,a,r,u){null==o.ui3_text2&&(o.ui3_text2=s.default.xani_ui3.InitAnimaWithName("标签文本2",null)),a<124?(s.default.xani_ui3.DrawAnima_aa(t+i,e+4,o.ui3_text2.iAnimaPoint,2),s.default.xani_ui3.DrawAnima_aa(t+i+a-64,e+4,o.ui3_text2.iAnimaPoint,3)):(s.default.xani_ui3.DrawAnima_aa(t+i,e+4,o.ui3_text2.iAnimaPoint,0),s.default.xani_ui3.DrawAnima_aa(t+i+a-122,e+4,o.ui3_text2.iAnimaPoint,1)),n.default.gi().DrawText_2(t+i/2,e+20,r,4286643968,22,101,1,1,0,-2,-2,3,4278190080),n.default.gi().DrawText_2(t+i+a/2,e+20,u,4286643968,22,101,1,1,0,-2,-2,3,4278190080)},o.ui3_Text2_=function(t,e,i,a,r,o){s.default.xani_nui2.DrawAnima(t+10,e+33,"快捷提示分割条",0),n.default.gi().DrawTextEx(t+i/2,e+20,r,4278206039,20,101,1,1,0,-2,-2),n.default.gi().DrawTextEx(t+i+a/2,e+20,o,4278206039,20,101,1,1,0,-2,-2)},o.Tag1_TW=function(t,e,i){},o.Data1_BR=function(t,e,i,a,s,r){n.default.gi().DrawTextEx(t,e+10,i,4294967295,20,101,1,1,0,0,-2),o.Text1_BR(t+s,e,r),n.default.gi().DrawTextEx(t+s+r/2,e+10,a,4294967295,20,101,1,1,0,-2,-2)},o.Text1_BR=function(t,e,i){s.default.xani_ui.InitAnimaWithName("统一文本框1",o.aa_tmp),s.default.xani_ui.DrawAnimaEx(t,e,o.aa_tmp.iAnimaPoint,0,101,1,1,0,0,0),s.default.xani_ui.DrawAnimaEx(t+i-20,e,o.aa_tmp.iAnimaPoint,1,101,1,1,0,0,0),s.default.xani_ui.DrawAnimaEx(t+20,e,o.aa_tmp.iAnimaPoint,2,101,1*(i-40)/20,1,0,0,0)},o.Frame1_BR=function(t,e,i,a){s.default.xani_ui.InitAnimaWithName("统一红黑框",o.aa_tmp),s.default.xani_ui.DrawAnimaEx(t,e,o.aa_tmp.iAnimaPoint,0,101,1*i/404,1*a/222,0,0,0),s.default.xani_ui.DrawAnimaEx(t,e,o.aa_tmp.iAnimaPoint,2,101,1*i/10,1,0,0,0),s.default.xani_ui.DrawAnimaEx(t,e+a-3,o.aa_tmp.iAnimaPoint,6,101,1*i/10,1,0,0,0),s.default.xani_ui.DrawAnimaEx(t,e,o.aa_tmp.iAnimaPoint,8,101,1,1*a/10,0,0,0),s.default.xani_ui.DrawAnimaEx(t+i-3,e,o.aa_tmp.iAnimaPoint,4,101,1,1*a/10,0,0,0),s.default.xani_ui.DrawAnima_aa(t,e,o.aa_tmp.iAnimaPoint,1),s.default.xani_ui.DrawAnima_aa(t+i-10,e,o.aa_tmp.iAnimaPoint,3),s.default.xani_ui.DrawAnima_aa(t+i-10,e+a-10,o.aa_tmp.iAnimaPoint,5),s.default.xani_ui.DrawAnima_aa(t,e+a-10,o.aa_tmp.iAnimaPoint,7)},o.Frame2_MD=function(t,e,i,a){o.new_framein(t,e,i,a,4294694536)},o.Frame3_BK=function(t,e,i,a,r){var u,l;for(s.default.xani_ui.InitAnimaWithName("统一背景框",o.aa_tmp),n.default.gi().SetViewClip(t,e,t+i,e+a),u=0;u<i/64+1;u++)for(l=0;l<a/64+1;l++)s.default.xani_ui.DrawAnimaEx(t+64*u,e+64*l,o.aa_tmp.iAnimaPoint,0,101,1,1,0,0,0);n.default.gi().NoClip(),s.default.xani_ui.DrawAnimaEx(t,e,o.aa_tmp.iAnimaPoint,8,101,1*i/192,1*a/192,0,0,0),s.default.xani_ui.DrawAnimaEx(t,e,o.aa_tmp.iAnimaPoint,1,101,1*i/250,1,0,0,0),s.default.xani_ui.DrawAnimaEx(t,e,o.aa_tmp.iAnimaPoint,2,101,1*i/250,1,0,0,0),s.default.xani_ui.DrawAnimaEx(t,e+a,o.aa_tmp.iAnimaPoint,2,101,1*i/250,1,0,0,0),s.default.xani_ui.DrawAnimaEx(t,e,o.aa_tmp.iAnimaPoint,3,101,1,1*a/250,0,0,0),s.default.xani_ui.DrawAnimaEx(t+i,e,o.aa_tmp.iAnimaPoint,3,101,1,1*a/250,0,0,0),s.default.xani_ui.DrawAnima_aa(t,e,o.aa_tmp.iAnimaPoint,4),s.default.xani_ui.DrawAnima_aa(t+i,e,o.aa_tmp.iAnimaPoint,5),s.default.xani_ui.DrawAnima_aa(t+i,e+a,o.aa_tmp.iAnimaPoint,7),s.default.xani_ui.DrawAnima_aa(t,e+a,o.aa_tmp.iAnimaPoint,6),n.default.gi().DrawTextEx(t+10-2,e+10,r,4278190080,40,101,1,1,0,0,0),n.default.gi().DrawTextEx(t+10+2,e+10,r,4278190080,40,101,1,1,0,0,0),n.default.gi().DrawTextEx(t+10,e+10-2,r,4278190080,40,101,1,1,0,0,0),n.default.gi().DrawTextEx(t+10,e+10+2,r,4278190080,40,101,1,1,0,0,0),n.default.gi().DrawTextEx(t+10,e+10,r,4294967295,40,101,1,1,0,0,0)},o.DrawFrame3=function(t,e,i){s.default.xani_ui.DrawAnimaEx(t,e,"提示对话框",0,101,1,1*i/222,0,0,0),s.default.xani_ui.DrawAnimaEx(t,e,"提示对话框",1,101,1,1,0,0,0),s.default.xani_ui.DrawAnimaEx(t,e+i-5,"提示对话框",2,101,1,1,0,-1,-1)},o.DrawFrame1=function(t,e,i,a){DrawFrame("公共框1",t,e,i,a)},o.DrawFrame2=function(t,e,i,a){DrawFrame("公共框2",t,e,i,a)},o.DrawFrame=function(t,e,i,a,n){s.default.xani_ui.DrawAnima_aa(e,i,t,0),s.default.xani_ui.DrawAnima_aa(e+a-50,i,t,2),s.default.xani_ui.DrawAnima_aa(e+a-50,i+n-50,t,4),s.default.xani_ui.DrawAnima_aa(e,i+n-50,t,6),a>100&&(s.default.xani_ui.DrawAnimaEx(e+50,i,t,1,101,1*(a-100)/50,1,0,0,0),s.default.xani_ui.DrawAnimaEx(e+50,i+n-50,t,5,101,1*(a-100)/50,1,0,0,0)),n>100&&(s.default.xani_ui.DrawAnimaEx(e,i+50,t,7,101,1,1*(n-100)/50,0,0,0),s.default.xani_ui.DrawAnimaEx(e+a-50,i+50,t,3,101,1,1*(n-100)/50,0,0,0)),a>100&&n>100&&s.default.xani_ui.DrawAnimaEx(e+50,i+50,t,8,101,1*(a-100)/50,1*(n-100)/50,0,0,0)},o.DrawTextFrame1=function(t,e,i){DrawTextFrame("大文本框",t,e,i)},o.DrawTextFrame=function(t,e,i,a){a<=50?(s.default.xani_ui.DrawAnimaEx(e,i,t,0,101,1,1,0,0,0),s.default.xani_ui.DrawAnimaEx(e,i,t,1,101,1,1,0,0,0)):(s.default.xani_ui.DrawAnimaEx(e,i,t,0,101,1,1,0,0,0),s.default.xani_ui.DrawAnimaEx(e+25-25*(a-50)/30,i,t,2,101,1*(a-50)/30,1,0,0,0),s.default.xani_ui.DrawAnimaEx(e+a-50,i,t,1,101,1,1,0,0,0))},o.local_frameani=null,o.local_titleframe=function(t,e,i,a,u){null==o.local_frameani&&(o.local_frameani=s.default.xani_local.InitAnimaWithName("提示框",null)),n.default.gi().FillRect_2D(t,e,t+i,e+a,1493172224),o.local_frameani.iFrame=0,o.local_frameani.Draw(t,e),o.local_frameani.iFrame=1,o.local_frameani.DrawEx(t,e+80,101,1,1*(a-80-57)/183,0,0,0),o.local_frameani.iFrame=2,o.local_frameani.Draw(t,e+a),o.local_frameani.iFrame=3,o.local_frameani.DrawEx(t+42,e+a,101,1*(i-42-42)/373,1,0,0,0),o.local_frameani.iFrame=4,o.local_frameani.Draw(t+i,e+a),o.local_frameani.iFrame=5,o.local_frameani.DrawEx(t+i,e+80,101,1,1*(a-80-57)/183,0,0,0),o.local_frameani.iFrame=6,o.local_frameani.Draw(t+i,e),o.local_frameani.iFrame=7,o.local_frameani.DrawEx(t+35,e,101,1*(i-35-35)/373,1,0,0,0),u&&s.default.xani_local.DrawAnimaEx(t+i/6,e+r.default.WordSize(80),"分隔条",0,101,2*i/3/400,1,0,0,0)},o.local_frameani1=null,o.local_frame1=function(t,e,i,a){null==o.local_frameani1&&(o.local_frameani1=s.default.xani_nui1.InitAnimaWithName("背景框1",null)),n.default.gi().FillRect_2D(t,e,t+i,e+a,1493172224),o.local_frameani1.iFrame=0,o.local_frameani1.Draw(t,e),o.local_frameani1.iFrame=1,o.local_frameani1.DrawEx(t,e+50,101,1,1*(a-100)/50,0,0,0),o.local_frameani1.iFrame=2,o.local_frameani1.Draw(t,e+a),o.local_frameani1.iFrame=3,o.local_frameani1.DrawEx(t+50,e+a,101,1*(i-100)/50,1,0,0,0),o.local_frameani1.iFrame=4,o.local_frameani1.Draw(t+i,e+a),o.local_frameani1.iFrame=5,o.local_frameani1.DrawEx(t+i,e+50,101,1,1*(a-100)/50,0,0,0),o.local_frameani1.iFrame=6,o.local_frameani1.Draw(t+i,e),o.local_frameani1.iFrame=7,o.local_frameani1.DrawEx(t+50,e,101,1*(i-100)/50,1,0,0,0),o.local_frameani1.iFrame=8,o.local_frameani1.DrawEx(t+50,e+50,101,1*(i-100)/50,1*(a-100)/50,0,0,0)},o.local_frameani2=null,o.local_frame2=function(t,e,i,a){null==o.local_frameani2&&(o.local_frameani2=s.default.xani_nui1.InitAnimaWithName("背景框2",null)),n.default.gi().FillRect_2D(t,e,t+i,e+a,1493172224),o.local_frameani2.iFrame=0,o.local_frameani2.Draw(t,e),o.local_frameani2.iFrame=1,o.local_frameani2.DrawEx(t,e+81,101,1,1*(a-81-39)/28,0,0,0),o.local_frameani2.iFrame=2,o.local_frameani2.Draw(t,e+a),o.local_frameani2.iFrame=3,o.local_frameani2.DrawEx(t+65,e+a,101,1*(i-65-65)/32,1,0,0,0),o.local_frameani2.iFrame=4,o.local_frameani2.Draw(t+i,e+a),o.local_frameani2.iFrame=5,o.local_frameani2.DrawEx(t+i,e+81,101,1,1*(a-81-39)/28,0,0,0),o.local_frameani2.iFrame=6,o.local_frameani2.Draw(t+i,e),o.local_frameani2.iFrame=7,o.local_frameani2.DrawEx(t+65,e,101,1*(i-65-65)/32,1,0,0,0)},o.new_frame1=null,o.new_frame3=null,o.new_bigframe=function(t,e,i,a){null==o.new_frame1&&(o.new_frame1=s.default.xani_nui2.InitAnimaWithName("大边框",null),o.new_frame2=s.default.xani_nui2.InitAnimaWithName("梅竹",null)),n.default.gi().FillRect_2D(t,e,t+i,e+a,4290764502),o.new_frame2.iFrame=0,o.new_frame2.Draw(t+i-12,e+12),o.new_frame2.iFrame=1,o.new_frame2.Draw(t+12,e+a-12),o.new_frame1.iFrame=0,o.new_frame1.Draw(t,e),o.new_frame1.iFrame=1,o.new_frame1.Draw(t+i,e),o.new_frame1.iFrame=2,o.new_frame1.Draw(t+i,e+a),o.new_frame1.iFrame=3,o.new_frame1.Draw(t,e+a),i>=400&&(o.new_frame1.iFrame=4,o.new_frame1.DrawEx(t+200,e,101,1*(i-400)/40,1,0,0,0),o.new_frame1.iFrame=5,o.new_frame1.DrawEx(t+200,e+a-1,101,1*(i-400)/40,1,0,0,0)),a>=400&&(o.new_frame1.iFrame=6,o.new_frame1.DrawEx(t,e+200,101,1,1*(a-400)/40,0,0,0),o.new_frame1.iFrame=7,o.new_frame1.DrawEx(t+i,e+200,101,1,1*(a-400)/40,0,0,0))},o.new_framein=function(t,e,i,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2155787942;null==o.new_frame3&&(o.new_frame3=s.default.xani_nui2.InitAnimaWithName("内框",null)),n.default.gi().FillRect_2D(t,e,t+i,e+a,r),o.new_frame3.iFrame=0,o.new_frame3.Draw(t,e),o.new_frame3.iFrame=1,o.new_frame3.Draw(t+i,e),o.new_frame3.iFrame=3,o.new_frame3.Draw(t+i,e+a),o.new_frame3.iFrame=2,o.new_frame3.Draw(t,e+a),i>=80&&(o.new_frame3.iFrame=4,o.new_frame3.DrawEx(t+40,e,101,1*(i-80)/17,1,0,0,0),o.new_frame3.iFrame=4,o.new_frame3.DrawEx(t+40,e+a-3,101,1*(i-80)/17,1,0,0,0)),a>=80&&(o.new_frame3.iFrame=5,o.new_frame3.DrawEx(t,e+40,101,1,1*(a-80)/14,0,0,0),o.new_frame3.iFrame=6,o.new_frame3.DrawEx(t+i,e+40,101,1,1*(a-80)/14,0,0,0))},o.new_baseframe2=function(t,e,i,a,r,u){o.new_bigframe(t,e,i,a),s.default.xani_nui2.DrawAnima(t,e,"卷轴",0),n.default.gi().DrawText_2(t-11,e+190,r,4278206039,30,101,1,1,0,-2,-2,4,4287496191),n.default.gi().DrawText_2(t-11,e+270,u,4278206039,30,101,1,1,0,-2,-2,4,4287496191)},o.new_baseframe3=function(t,e,i,a,r,u,l){o.new_bigframe(t,e,i,a),s.default.xani_nui2.DrawAnima(t,e,"卷轴",0),n.default.gi().DrawText_2(t-11,e+180,r,4278206039,30,101,1,1,0,-2,-2,4,4287496191),n.default.gi().DrawText_2(t-11,e+230,u,4278206039,30,101,1,1,0,-2,-2,4,4287496191),n.default.gi().DrawText_2(t-11,e+280,l,4278206039,30,101,1,1,0,-2,-2,4,4287496191)},o.new_baseframe4=function(t,e,i,a,r,u,l,f){o.new_bigframe(t,e,i,a),s.default.xani_nui2.DrawAnima(t,e,"卷轴",0),n.default.gi().DrawText_2(t-11,e+165,r,4278206039,30,101,1,1,0,-2,-2,4,4287496191),n.default.gi().DrawText_2(t-11,e+205,u,4278206039,30,101,1,1,0,-2,-2,4,4287496191),n.default.gi().DrawText_2(t-11,e+245,l,4278206039,30,101,1,1,0,-2,-2,4,4287496191),n.default.gi().DrawText_2(t-11,e+285,f,4278206039,30,101,1,1,0,-2,-2,4,4287496191)},o.new_lableword2=function(t,e,i,a,s,r,o){s?(n.default.gi().DrawText_2(t+i/2-2,e+a/3,r,4294967040,22,101,1,1,0,-2,-2,3,4278206039),n.default.gi().DrawText_2(t+i/2-2,e+a/3*2,o,4294967040,22,101,1,1,0,-2,-2,3,4278206039)):(n.default.gi().DrawTextEx(t+i/2-2,e+a/3,r,4278206039,22,101,1,1,0,-2,-2),n.default.gi().DrawTextEx(t+i/2-2,e+a/3*2,o,4278206039,22,101,1,1,0,-2,-2))},o.new_lableword3=function(t,e,i,a,s,r,o,u){s?(n.default.gi().DrawText_2(t+i/2-2,e+a/3,r,4294967040,22,101,1,1,0,-2,-2,3,4278206039),n.default.gi().DrawText_2(t+i/2-2,e+a/3*2,o,4294967040,22,101,1,1,0,-2,-2,3,4278206039),n.default.gi().DrawText_2(t+i/2-2,e+a/3*3,u,4294967040,22,101,1,1,0,-2,-2,3,4278206039)):(n.default.gi().DrawTextEx(t+i/2-2,e+a/3,r,4278206039,22,101,1,1,0,-2,-2),n.default.gi().DrawTextEx(t+i/2-2,e+a/3*2,o,4278206039,22,101,1,1,0,-2,-2),n.default.gi().DrawTextEx(t+i/2-2,e+a/3*3,u,4278206039,22,101,1,1,0,-2,-2))},o.new_lableword4=function(t,e,i,a,s,r,o,u,l){s?(n.default.gi().DrawText_2(t+i/2-2,e+a/3,r,4294967040,22,101,1,1,0,-2,-2,3,4278206039),n.default.gi().DrawText_2(t+i/2-2,e+a/3*2,o,4294967040,22,101,1,1,0,-2,-2,3,4278206039),n.default.gi().DrawText_2(t+i/2-2,e+a/3*3,u,4294967040,22,101,1,1,0,-2,-2,3,4278206039),n.default.gi().DrawText_2(t+i/2-2,e+a/3*4,l,4294967040,22,101,1,1,0,-2,-2,3,4278206039)):(n.default.gi().DrawTextEx(t+i/2-2,e+a/3,r,4278206039,22,101,1,1,0,-2,-2),n.default.gi().DrawTextEx(t+i/2-2,e+a/3*2,o,4278206039,22,101,1,1,0,-2,-2),n.default.gi().DrawTextEx(t+i/2-2,e+a/3*3,u,4278206039,22,101,1,1,0,-2,-2),n.default.gi().DrawTextEx(t+i/2-2,e+a/3*4,l,4278206039,22,101,1,1,0,-2,-2))},o.new_frame4=null,o.new_frame5=null,o.new_frameon=function(t,e,i,a,r){var u,l;if(null==o.new_frame4&&(o.new_frame4=s.default.xani_nui2.InitAnimaWithName("特殊奖励框",null)),null==o.new_frame5&&(o.new_frame5=s.default.xani_nui2.InitAnimaWithName("特殊奖励框2",null)),0==r)u=o.new_frame4,l=4281963410;else{if(1!=r)return;u=o.new_frame5,l=4282151834}n.default.gi().FillRect_2D(t+5,e+5,t+i-10,e+a-10,l),u.iFrame=0,u.Draw(t,e),u.iFrame=1,u.Draw(t+i,e),u.iFrame=2,u.Draw(t+i,e+a),u.iFrame=3,u.Draw(t,e+a),u.iFrame=4,u.DrawEx(t+20,e,101,1*(i-20-20)/20,1,0,0,0),u.iFrame=5,u.DrawEx(t,e+20,101,1,1*(a-20-20)/20,0,0,0),u.iFrame=6,u.DrawEx(t+i,e+20,101,1,1*(a-20-20)/20,0,0,0),u.iFrame=7,u.DrawEx(t+20,e+a,101,1*(i-20-20)/20,1,0,0,0)},o.new_frame6=null,o.new_framepc=function(t,e,i,a){null==o.new_frame6&&(o.new_frame6=s.default.xani_nui3.InitAnimaWithName("公共聊天外框",null)),n.default.gi().FillRect_2D(t+3,e+3,t+i-3,e+a-3,2147483648),o.new_frame6.iFrame=0,o.new_frame6.Draw(t+i,e),o.new_frame6.iFrame=1,o.new_frame6.DrawEx(t+19,e,101,1*(i-38)/20,1,0,0,0),o.new_frame6.iFrame=2,o.new_frame6.Draw(t,e),o.new_frame6.iFrame=3,o.new_frame6.DrawEx(t,e+19,101,1,1*(a-38)/20,0,0,0),o.new_frame6.iFrame=4,o.new_frame6.Draw(t,e+a),o.new_frame6.iFrame=5,o.new_frame6.DrawEx(t+19,e+a,101,1*(i-38)/20,1,0,0,0),o.new_frame6.iFrame=6,o.new_frame6.Draw(t+i,e+a),o.new_frame6.iFrame=7,o.new_frame6.DrawEx(t+i,e+19,101,1,1*(a-38)/20,0,0,0)},o.new_TagText2=function(t,e,i,a,r){s.default.xani_nui2.DrawAnima(t,e,"提示1",0),o.new_Text(t+67,e,i,r),n.default.gi().DrawText_2(t+33.5,e+16,a,4294967295,20,101,1,1,0,-2,-2,3,4278190080)},o.new_Text=function(t,e,i,a){s.default.xani_nui2.DrawAnimaEx(t,e,"可变长文字框",0,101,1,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+15,e,"可变长文字框",1,101,1*(i-30)/20,1,0,0,0),s.default.xani_nui2.DrawAnimaEx(t+i-20,e,"可变长文字框",2,101,1,1,0,0,0),n.default.gi().DrawText_2(t+i/2,e+16,a,4294967295,20,101,1,1,0,-2,-2,3,4278190080)},o.new_frame7=null,o.new_framewatch=function(t,e,i,a){null==o.new_frame7&&(o.new_frame7=s.default.xani_nui3.InitAnimaWithName("公共内框1",null)),o.new_frame7.iFrame=8,o.new_frame7.DrawEx(t+29,e+29,101,1*(i-58)/20,1*(a-29-21)/20,0,0,0),o.new_frame7.iFrame=1,o.new_frame7.DrawEx(t+29,e,101,1*(i-58)/20,1,0,0,0),o.new_frame7.iFrame=5,o.new_frame7.DrawEx(t+29,e+a,101,1*(i-58)/20,1,0,0,0),o.new_frame7.iFrame=7,o.new_frame7.DrawEx(t,e+29,101,1,1*(a-29-21)/20,0,0,0),o.new_frame7.iFrame=3,o.new_frame7.DrawEx(t+i,e+29,101,1,1*(a-29-21)/20,0,0,0),o.new_frame7.iFrame=0,o.new_frame7.Draw(t,e),o.new_frame7.iFrame=2,o.new_frame7.Draw(t+i,e),o.new_frame7.iFrame=4,o.new_frame7.Draw(t+i,e+a),o.new_frame7.iFrame=6,o.new_frame7.Draw(t,e+a)},o.new_frame8=null,o.new_numberframe=function(t,e,i,a){null==o.new_frame8&&(o.new_frame8=s.default.xani_nui3.InitAnimaWithName("数字输入框",null)),o.new_frame8.iFrame=1,o.new_frame8.DrawEx(t+15,e,101,1*(i-30)/20,1,0,0,0),o.new_frame8.iFrame=0,o.new_frame8.Draw(t,e),o.new_frame8.iFrame=2,o.new_frame8.Draw(t+i-20,e),n.default.gi().DrawTextEx(t+i/2,e+25,a,4278206039,30,101,1,1,0,-2,-2)},o.frame_type1=function(t,e,i,a,n){a<2*n?(s.default.xani_frame.DrawAnimaEx(e,i,t,0,101,1*a/2/n,1,0,0,0),s.default.xani_frame.DrawAnimaEx(e+a/2,i,t,2,101,1*a/2/n,1,0,0,0)):(s.default.xani_frame.DrawAnimaEx(e+n/2,i,t,1,101,1*(a-n)/n,1,0,0,0),s.default.xani_frame.DrawAnima(e,i,t,0),s.default.xani_frame.DrawAnima(e+a-n,i,t,2))},o.frame_type2=function(t,e,i,a,n,r,o){s.default.xani_frame.DrawAnima(e,i,t,0),s.default.xani_frame.DrawAnimaEx(e+r,i,t,1,101,1*(a-r-r)/r,1,0,0,0),s.default.xani_frame.DrawAnima(e+a-r,i,t,2),s.default.xani_frame.DrawAnimaEx(e+a-r,i+o,t,3,101,1,1*(n-o-o)/o,0,0,0),s.default.xani_frame.DrawAnima(e+a-r,i+n-o,t,4),s.default.xani_frame.DrawAnimaEx(e+r,i+n-o,t,5,101,1*(a-r-r)/r,1,0,0,0),s.default.xani_frame.DrawAnima(e,i+n-o,t,6),s.default.xani_frame.DrawAnimaEx(e,i+o,t,7,101,1,1*(n-o-o)/o,0,0,0)},o.frame_type3=function(t,e,i,a,n,r,o){s.default.xani_frame.DrawAnimaEx(e,i,t,1,101,1*a/r,1*n/o,0,0,0)},o.frame_type4=function(t,e,i,a,n,r,o){a-r-r>0&&n-o-o>0&&s.default.xani_frame.DrawAnimaEx(e+r-2,i+o-2,t,8,101,1*(a-r-r+4)/r,1*(n-o-o+4)/o,0,0,0),a-r-r>0&&s.default.xani_frame.DrawAnimaEx(e+r-2,i,t,1,101,1*(a-r-r+4)/r,1,0,0,0),n-o-o>0&&s.default.xani_frame.DrawAnimaEx(e+a-r,i+o-2,t,3,101,1,1*(n-o-o+4)/o,0,0,0),a-r-r>0&&s.default.xani_frame.DrawAnimaEx(e+r-2,i+n-o,t,5,101,1*(a-r-r+4)/r,1,0,0,0),n-o-o>0&&s.default.xani_frame.DrawAnimaEx(e,i+o-2,t,7,101,1,1*(n-o-o+4)/o,0,0,0),s.default.xani_frame.DrawAnimaEx(e,i,t,0,101,1,1,0,0,0),s.default.xani_frame.DrawAnimaEx(e+a-1*r,i,t,2,101,1,1,0,0,0),s.default.xani_frame.DrawAnimaEx(e+a-1*r,i+n-1*o,t,4,101,1,1,0,0,0),s.default.xani_frame.DrawAnimaEx(e,i+n-1*o,t,6,101,1,1,0,0,0)}},{"../../../engine/graphics/AnimaAction":25,"../../../engine/graphics/M3DFast":28,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/gameing/fast/SystemOperate":124}],73:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../zero/Interface/PublicInterface")),s=_interopRequireDefault(t("../../../config/GmConfig")),r=_interopRequireDefault(t("../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../engine/control/XButton")),_interopRequireDefault(t("../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../engtst/mgm/XStat")),f=_interopRequireDefault(t("../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function ExitConfirm(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ExitConfirm);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ExitConfirm.__proto__||Object.getPrototypeOf(ExitConfirm)).call(this));return e.pani=t,e.iW=350,e.iH=200,e.iX=(s.default.SCRW-e.iW)/2,e.iY=(s.default.SCRH-e.iH)/2,e.btn_ok=null,e.btn_cancel=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ExitConfirm,r.default),a(ExitConfirm,[{key:"Draw",value:function(){u.default.bInited&&(null==this.btn_ok&&(this.btn_ok=new o.default(u.default.xani_nui3),this.btn_ok.InitButton("内框按钮"),this.btn_ok.Move(this.iX+10,this.iY+this.iH-60,70,40),this.btn_ok.sName="确定",this.btn_cancel=new o.default(u.default.xani_nui3),this.btn_cancel.InitButton("内框按钮"),this.btn_cancel.Move(this.iX+this.iW-90,this.iY+this.iH-60,70,40),this.btn_cancel.sName="取消"),f.default.gi().FormatEx("是否确定退出游戏",this.iW-40,26,0,0,30),this.iH=20+f.default.gi().iH+20+55+20,this.iY=(s.default.SCRH-this.iH)/2,this.btn_ok.Move(this.iX+20,this.iY+this.iH-70,98,55),this.btn_cancel.Move(this.iX+this.iW-98-20,this.iY+this.iH-70,98,55),DrawMode.new_framewatch(this.iX,this.iY,this.iW,this.iH),f.default.gi().Draw(this.iX+20,this.iY+20),this.btn_ok.Draw(),this.btn_cancel.Draw())}},{key:"ProcTouch",value:function(t,e,i){return!!u.default.bInited&&(this.btn_ok.ProcTouch(t,e,i)&&this.btn_ok.bCheck()&&(l.default.gi().PopStat(1),n.default.gi().Exit()),this.btn_cancel.ProcTouch(t,e,i)&&this.btn_cancel.bCheck()&&l.default.gi().PopStat(1),!1)}}]),ExitConfirm}();i.default=h},{"../../../config/GmConfig":5,"../../../engine/BaseClass":8,"../../../engine/control/XButton":14,"../../../engine/control/XButtonEx2":16,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/XStat":70,"../../../engtst/mgm/frame/format/FormatString":81,"../../../zero/Interface/PublicInterface":318}],74:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=_interopRequireDefault(t("../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../engine/control/XButton")),_interopRequireDefault(t("../../../engine/control/XButtonEx2"))),o=(_interopRequireDefault(t("../../../engine/control/XCheckBox")),_interopRequireDefault(t("../../../engine/control/XInput")),_interopRequireDefault(t("../../../engine/control/XInputNumber"))),u=_interopRequireDefault(t("../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../engtst/mgm/frame/message/EasyMessage"));_interopRequireDefault(t("../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function InNumber(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,InNumber);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(InNumber.__proto__||Object.getPrototypeOf(InNumber)).call(this));return e.iW=320,e.iH=230,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_ok=new r.default(l.default.xani_nui3),e.btn_ok.InitButton("内框按钮"),e.btn_ok.sName="确定",e.btn_cancel=new r.default(l.default.xani_nui3),e.btn_cancel.InitButton("内框按钮"),e.btn_cancel.sName="取消",e.in_num=new o.default(l.default.xani_nui3),e.in_num.iNumber=0,InNumber.bOk=!1,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(InNumber,s.default),a(InNumber,[{key:"Draw",value:function(){DrawMode.new_framewatch(this.iX,this.iY,this.iW,this.iH),u.default.gi().DrawTextEx(this.iX+30,this.iY+30,InNumber.sTitle,4294967295,30,100,1,1,0,0,0),this.in_num.Move(this.iX+30+30,this.iY+30+30+20,220),this.in_num.Draw(),this.btn_ok.Move(this.iX+30,this.iY+this.iH-30-50,98,50),this.btn_cancel.Move(this.iX+this.iW-30-98,this.iY+this.iH-30-50,98,50),this.btn_ok.Draw(),this.btn_cancel.Draw()}},{key:"ProcTouch",value:function(t,e,i){return!!this.in_num.ProcTouch(t,e,i)||(this.btn_ok.ProcTouch(t,e,i)?(this.btn_ok.bCheck()&&(this.in_num.iNumber>=0?(iNumber=this.in_num.iNumber,InNumber.bFinished=!0,InNumber.bOk=!0,h.default.gi().PopStat(1),iIid==IN_RID&&f.default.gi().s_SeverEvent(17,2,iNumber,0,0)):d.default.easymsg.AddMessage("请先输入数字")),!0):!!this.btn_cancel.ProcTouch(t,e,i)&&(this.btn_cancel.bCheck()&&h.default.gi().PopStat(1),!0))}}]),InNumber}();i.default=c,c.IN_IN=10,c.IN_OUT=20,c.IN_RID=30,c.iNumber,c.iIid,c.bFinished=!1,c.bOk,c.sTitle,c.start=function(t,e,i,a){if(h.default.gi().LastStatType(0)!=h.default.GS_INNUMBER){iIid=t,c.sTitle=e,iNumber=i;var n=h.default.gi().PushStat(h.default.GS_INNUMBER);n.in_num.MinMax(0,a),n.in_num.iNumber=i}},c.end=function(t){return!(!c.bFinished||iIid!=t)&&(iIid=0,c.bFinished=!1,!0)}},{"../../../config/GmConfig":5,"../../../engine/BaseClass":8,"../../../engine/control/XButton":14,"../../../engine/control/XButtonEx2":16,"../../../engine/control/XCheckBox":17,"../../../engine/control/XInput":18,"../../../engine/control/XInputNumber":19,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/GmProtocol":66,"../../../engtst/mgm/XStat":70,"../../../engtst/mgm/frame/message/EasyMessage":86,"../../../engtst/mgm/gameing/me/GmMe":211}],75:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../zero/Interface/PublicInterface")),s=_interopRequireDefault(t("../../../config/GmConfig")),r=(_interopRequireDefault(t("../../../config/XDefine")),_interopRequireDefault(t("../../../engine/BaseClass"))),o=(_interopRequireDefault(t("../../../engine/control/XButton")),_interopRequireDefault(t("../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function KickOut(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,KickOut);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(KickOut.__proto__||Object.getPrototypeOf(KickOut)).call(this));return e.iW=300,e.iH=200,e.iX=(s.default.SCRW-e.iW)/2,e.iY=(s.default.SCRH-e.iH)/2,e.sDetail="点击确定关闭游戏",e.btn_ok=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(KickOut,r.default),a(KickOut,[{key:"Draw",value:function(){null==this.btn_ok&&(this.btn_ok=new o.default(l.default.xani_button),this.btn_ok.sName="确定",this.btn_ok.Move(this.iX+(this.iW-90)/2,this.iY+this.iH-60-20,90,60),this.btn_ok.InitButton("1号按钮90_60")),u.default.gi().FillRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,2147483648),u.default.gi().DrawRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,4294967295),f.default.gi().Format("#cffff00"+this.sDetail,this.iW-40,20),f.default.gi().Draw(this.iX+20,this.iY+20),this.btn_ok.Draw()}},{key:"ProcTouch",value:function(t,e,i){return null!=this.btn_ok&&(this.btn_ok.ProcTouch(t,e,i)&&this.btn_ok.bCheck()&&n.default.gi().Exit(),!1)}}]),KickOut}();i.default=h},{"../../../config/GmConfig":5,"../../../config/XDefine":7,"../../../engine/BaseClass":8,"../../../engine/control/XButton":14,"../../../engine/control/XButtonEx2":16,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/frame/format/FormatString":81,"../../../zero/Interface/PublicInterface":318}],76:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=_interopRequireDefault(t("../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../engine/graphics/M3DFast"))),o=(_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function Loading1(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Loading1);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Loading1.__proto__||Object.getPrototypeOf(Loading1)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iDelay=0,e.aa_loading=o.default.xani_ui.InitAnimaWithName("载入中",null),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Loading1,s.default),a(Loading1,[{key:"Draw",value:function(){this.iDelay<128&&(this.iDelay+=15),r.default.gi().FillRect_2D(0,0,n.default.SCRW,n.default.SCRH,this.iDelay<<24),this.aa_loading.Draw(n.default.SCRW/2,3*n.default.SCRH/5),this.aa_loading.NextFrame()}},{key:"ProcTouch",value:function(t,e,i){return!1}}]),Loading1}();i.default=u},{"../../../config/GmConfig":5,"../../../engine/BaseClass":8,"../../../engine/graphics/AnimaAction":25,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmPlay":65}],77:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=_interopRequireDefault(t("../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../engine/graphics/M3DFast"))),o=(_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function Loading2(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Loading2);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Loading2.__proto__||Object.getPrototypeOf(Loading2)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iStat=0,e.iDelay=0,e.aa_loading=o.default.xani_ui.InitAnimaWithName("载入中",null),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Loading2,s.default),a(Loading2,[{key:"Draw",value:function(){r.default.gi().FillRect_2D(0,0,n.default.SCRW,n.default.SCRH,4278190080),this.aa_loading.Draw(n.default.SCRW/2,3*n.default.SCRH/5),this.aa_loading.NextFrame()}},{key:"ProcTouch",value:function(t,e,i){return!1}}]),Loading2}();i.default=u},{"../../../config/GmConfig":5,"../../../engine/BaseClass":8,"../../../engine/graphics/AnimaAction":25,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmPlay":65}],78:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=_interopRequireDefault(t("../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../engine/TouchManager")),o=(_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/XStat")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function Message1(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Message1);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Message1.__proto__||Object.getPrototypeOf(Message1)).call(this));return e.pani=t,e.pm3f=t.pm3f,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Message1,s.default),a(Message1,[{key:"Draw",value:function(){this.pm3f.FillRect_2D(0,0,n.default.SCRW,n.default.SCRH,4278190080),this.pm3f.DrawText(0,0,"Message",4294967295),this.pm3f.DrawText(100,n.default.SCRH/2,this.sDetail,4294967295),parseInt(this.iDelay/5)%2==0&&this.pm3f.DrawText(100,n.default.SCRH/2+50,"按任意键继续...",4294967295),this.iDelay++}},{key:"ProcTouch",value:function(t,e,i){return t==r.default.TOUCH_UP&&o.default.gi().PopStat(1),!1}}]),Message1}();i.default=u,u.Open=function(t){o.default.gi().PushStat(o.default.GS_MESSAGE1).sDetail=t}},{"../../../config/GmConfig":5,"../../../engine/BaseClass":8,"../../../engine/TouchManager":10,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/XStat":70}],79:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=_interopRequireDefault(t("../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../engine/PackageTools")),_interopRequireDefault(t("../../../engine/control/XButton")),_interopRequireDefault(t("../../../engine/control/XButtonEx2"))),o=(_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"))),u=_interopRequireDefault(t("../../../engtst/mgm/GmProtocol")),l=_interopRequireDefault(t("../../../engtst/mgm/XStat")),f=_interopRequireDefault(t("../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function SevConfirm(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SevConfirm);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SevConfirm.__proto__||Object.getPrototypeOf(SevConfirm)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=350,e.iH=200,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_ok=new r.default(o.default.xani_nui3),e.btn_ok.InitButton("内框按钮"),e.btn_ok.Move(e.iX+10,e.iY+e.iH-60,70,40),e.btn_cancel=new r.default(o.default.xani_nui3),e.btn_cancel.InitButton("内框按钮"),e.btn_cancel.Move(e.iX+e.iW-90,e.iY+e.iH-60,70,40),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SevConfirm,s.default),a(SevConfirm,[{key:"Draw",value:function(){f.default.gi().FormatEx(this.sMsg,this.iW-40,26,0,0,30),this.iH=20+f.default.gi().iH+20+55+20,this.iY=(n.default.SCRH-this.iH)/2,this.btn_ok.Move(this.iX+20,this.iY+this.iH-70,98,55),this.btn_cancel.Move(this.iX+this.iW-98-20,this.iY+this.iH-70,98,55),DrawMode.new_framewatch(this.iX,this.iY,this.iW,this.iH),f.default.gi().Draw(this.iX+20,this.iY+20),this.btn_ok.Draw(),this.btn_cancel.Draw()}},{key:"ProcTouch",value:function(t,e,i){return this.btn_ok.ProcTouch(t,e,i)&&this.btn_ok.bCheck()&&(u.default.gi().s_SevConfirm(this.sCmd),l.default.gi().PopStat(1)),this.btn_cancel.ProcTouch(t,e,i)&&this.btn_cancel.bCheck()&&l.default.gi().PopStat(1),!1}}]),SevConfirm}();i.default=h,h.Open=function(t){if(l.default.gi().LastStatType(0)!=l.default.GS_CONFIRM2){var e=l.default.gi().PushStat(l.default.GS_CONFIRM2);e.sMsg=t.GetNextString(),e.btn_ok.sName=t.GetNextString(),e.btn_cancel.sName=t.GetNextString(),e.sCmd=t.GetNextString()}}},{"../../../config/GmConfig":5,"../../../engine/BaseClass":8,"../../../engine/PackageTools":9,"../../../engine/control/XButton":14,"../../../engine/control/XButtonEx2":16,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/GmProtocol":66,"../../../engtst/mgm/XStat":70,"../../../engtst/mgm/frame/format/FormatString":81}],80:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/XDefine")),s=(_interopRequireDefault(t("../../../engine/control/XButtonEx2")),_interopRequireDefault(t("../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../engine/graphics/M3DFast"))),r=_interopRequireDefault(t("../../../engtst/mgm/GmPlay")),o=_interopRequireDefault(t("./DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(){function UIList(t,e,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,UIList),this.iType=t,this.iTitleCount=e,this.iW=i,this.iH=a,this.sTitleName=new Array(this.iTitleCount),this.iTitleWidth=new Int32Array(this.iTitleCount),this.iTitleOffx=new Int32Array(this.iTitleCount),this.bCanSort=new Array(this.iTitleCount),this.iAlign=new Int32Array(this.iTitleCount);for(var n=0;n<this.iTitleCount;n++)this.sTitleName[n]="",this.iTitleWidth[n]=0,this.iAlign[n]=-2;this.iTitleHeight=50,this.iRowHeight=40,this.iOffY=0,this.bTouchLock=!1,this.iCheckPoint=-1,this.iLockPoint=-1,this.iSortLock=-1,this.iSortType=-1,this.iSortUD=0,this.btn_list=new Array(3)}return a(UIList,[{key:"Clean",value:function(){this.iOffY=0,this.iSortType=-1,this.iSortUD=0,this.iLockPoint=-1}}]),a(UIList,[{key:"SetTitle",value:function(t,e,i,a){t<0||t>=this.iTitleCount||(this.sTitleName[t]=e,this.iTitleWidth[t]=i,this.bCanSort[t]=a)}},{key:"BeginDraw",value:function(t,e){var i,a,n,r;for(this.iTitleOffx[0]=0,i=1;i<this.iTitleCount;i++)this.iTitleOffx[i]=this.iTitleOffx[i-1]+this.iTitleWidth[i-1];for(this.iX=t,this.iY=e,s.default.gi().SetViewClip(t,e,t+this.iW,e+this.iH),n=this.iX,r=this.iY+this.iTitleHeight-this.iOffY%(2*this.iRowHeight)-2*this.iRowHeight,a=(this.iH-this.iTitleHeight)/this.iRowHeight+4,i=0;i<a;i++)i%2==0?o.default.frame_type3("纯色a10_10",n,r,this.iW,this.iRowHeight,10,10):o.default.frame_type3("纯色b10_10",n,r,this.iW,this.iRowHeight,10,10),r+=this.iRowHeight;this.iLockPoint>=0&&(r=this.iY+this.iTitleHeight+this.iLockPoint*this.iRowHeight-this.iOffY,o.default.frame_type4("19号框20_20",n,r,this.iW,40,20,20)),this.iMaxLine=0,this.iBtnCount=0}},{key:"DrawUnitEx_Anima",value:function(t,e,i,a,n){var s,r;(this.iMaxLine<e&&(this.iMaxLine=e),this.bShow(e))&&(s=this.iTitleOffx[t],this.iTitleWidth[t],r=this.iTitleHeight-this.iOffY+e*this.iRowHeight,i.Draw(this.iX+s+a,this.iY+r+n))}},{key:"DrawUnitEx_Button",value:function(t,e,i,a,n){var s,r;(this.iMaxLine<e&&(this.iMaxLine=e),this.bShow(e))&&(s=this.iTitleOffx[t],this.iTitleWidth[t],r=this.iTitleHeight-this.iOffY+e*this.iRowHeight,i.Move(this.iX+s+a,this.iY+r+n,i.iW,i.iH),i.Draw(),this.btn_list[this.iBtnCount++]=i)}},{key:"DrawUnit",value:function(t,e,i){var a,n,r;(this.iMaxLine<e&&(this.iMaxLine=e),this.bShow(e))&&(i.length<=0||(a=this.iTitleOffx[t],r=this.iTitleWidth[t],n=this.iTitleHeight-this.iOffY+e*this.iRowHeight,0==this.iAlign[t]||-1==this.iAlign[t]?s.default.gi().DrawTextEx(this.iX+a,this.iY+n+this.iRowHeight/2,i,4294967295,20,101,1,1,0,this.iAlign[t],-2):-2==this.iAlign[t]?s.default.gi().DrawTextEx(this.iX+a+r/2,this.iY+n+this.iRowHeight/2,i,4294967295,20,101,1,1,0,this.iAlign[t],-2):-3==this.iAlign[t]&&s.default.gi().DrawTextEx(this.iX+a+r,this.iY+n+this.iRowHeight/2,i,4294967295,20,101,1,1,0,this.iAlign[t],-2)))}},{key:"OffX",value:function(t){var e,i;return e=this.iTitleOffx[t],i=this.iTitleWidth[t],0==this.iAlign[t]||-1==this.iAlign[t]?this.iX+e:-2==this.iAlign[t]?this.iX+e+i/2:-3==this.iAlign[t]?this.iX+e+i:0}},{key:"bShow",value:function(t){var e=-this.iOffY+t*this.iRowHeight;return!(e<-this.iRowHeight||e>this.iH)}},{key:"FinishDraw",value:function(){var t,e;if(s.default.gi().NoClip(),o.default.frame_type2("内阴影a10_10",this.iX,this.iY,this.iW,this.iH,10,10),this.iTitleHeight>0)for(o.default.frame_type1("列表标题a20_50",this.iX,this.iY,this.iW,20),t=0;t<this.iTitleCount;t++)this.iTitleWidth[t]>0&&(t>0&&r.default.xani_frame.DrawAnima(this.iX+this.iTitleOffx[t],this.iY+3,"列表分割线a3_44",0),this.iSortType==t?s.default.gi().DrawText_2(this.iX+this.iTitleOffx[t]+this.iTitleWidth[t]/2,this.iY+25,this.sTitleName[t],4294967040,26,101,1,1,0,-2,-2,4,4278222848):s.default.gi().DrawText_2(this.iX+this.iTitleOffx[t]+this.iTitleWidth[t]/2,this.iY+25,this.sTitleName[t],4294967040,25,101,1,1,0,-2,-2,4,4286578688));this.bTouchLock||(this.iOffY<0&&(this.iOffY/=2),e=(this.iH-this.iTitleHeight)/this.iRowHeight-1,(t=this.iMaxLine*this.iRowHeight-this.iRowHeight*e)<0&&(t=0),this.iOffY>t&&(this.iOffY-=(this.iOffY-t)/2))}},{key:"iChecked",value:function(){var t=this.iCheckPoint;return this.iCheckPoint=-1,t>=0?t:-1}},{key:"ProcTouch",value:function(t,e,i){var a,s,r;for(a=0;a<this.iBtnCount;a++)if(this.btn_list[a].ProcTouch(t,e,i))return!0;for(a=0;a<this.iTitleCount;a++)if(this.bCanSort[a]&&n.default.bInRect(e,i,this.iX+this.iTitleOffx[a],this.iY,this.iTitleWidth[a],this.iTitleHeight)){1==t&&(this.iSortLock=a),3==t&&this.iSortLock==a&&(this.iSortType==a?this.iSortUD=1-this.iSortUD:(this.iSortType=a,this.iSortUD=0),this.iSortLock=-1);break}if(a>=this.iTitleCount&&(this.iSortLock=-1),2==t&&this.bTouchLock&&(Math.abs(this.iLockY-i)>=10&&(this.bTouchMoving=!0),this.bTouchMoving))return this.iOffY+=this.iLockY-i,this.iLockY=i,!0;if(3==t&&this.bTouchLock){if(this.bTouchLock=!1,!this.bTouchMoving){for(this.iLockPoint=(this.iLockY-this.iY-this.iTitleHeight+this.iOffY)/this.iRowHeight,(this.iLockPoint<0||this.iLockPoint>this.iMaxLine)&&(this.iLockPoint=-1),this.iLockPoint>=0&&(this.iCheckPoint=this.iLockPoint),s=e-this.iX,r=0,a=0;a<this.iTitleCount&&!(s<(r+=this.iTitleWidth[a]));a++);this.iCheckX=a}return!0}return!(!n.default.bInRect(e,i,this.iX,this.iY+this.iTitleHeight,this.iW,this.iH-this.iTitleHeight)||1!=t)&&(this.iLockY=i,this.bTouchLock=!0,this.bTouchMoving=!1,!0)}}]),UIList}();i.default=u},{"../../../config/XDefine":7,"../../../engine/control/XButtonEx2":16,"../../../engine/graphics/AnimaAction":25,"../../../engine/graphics/M3DFast":28,"../../../engtst/mgm/GmPlay":65,"./DrawMode":72}],81:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../map/DrawBuffer")),s=_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),r=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),o=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),u=_interopRequireDefault(t("./LockRect")),l=_interopRequireDefault(t("./UnitList"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(){function FormatString(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FormatString),this.iLineY=new Int32Array(FormatString.MAXUNIT),this.iLineH=new Int32Array(FormatString.MAXUNIT),this.pm3f=r.default.gi(),this.uls=new Array(FormatString.MAXUNIT),t=0;t<FormatString.MAXUNIT;t++)this.uls[t]=new l.default;for(this.aa_face=new s.default,this.lrs=new Array(10),t=0;t<10;t++)this.lrs[t]=new u.default;this.ilp=0}return a(FormatString,[{key:"InsertLocker",value:function(t,e,i,a,n){return e.indexOf(a+i)>=0?e.replace(a+i,n+"#L"+t+"["+i+"#]"):e}},{key:"CheckOutRect",value:function(){var t,e=-1,i=-1,a=-1,n=-1;for(t=0;t<10;t++)this.lrs[t].Clear();for(t=0;t<FormatString.MAXUNIT&&-1!=this.uls[t].iLp;t++)switch(this.uls[t].iType){case 2:a=this.uls[t].iColor,n=this.uls[t].iLp,this.lrs[a].Clear(),e=this.uls[t].iX,i=this.iLineY[n];break;case 3:a>=0&&(this.lrs[a].Add(e,i,this.uls[t].iX-e,this.iLineH[n]),a=-1);break;default:a>=0&&this.uls[t].iLp!=n&&(this.lrs[a].Add(e,i,this.iW-e,this.iLineH[n]),n=this.uls[t].iLp,e=this.uls[t].iX,i=this.iLineY[n])}}},{key:"hto",value:function(t){switch(t){case"0":return 0;case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"8":return 8;case"9":return 9;case"a":case"A":return 10;case"b":case"B":return 11;case"c":case"C":return 12;case"d":case"D":return 13;case"e":case"E":return 14;case"f":case"F":return 15}return-1}},{key:"NextUnit",value:function(t,e){var i,a,n,s=t[e];if(s==FormatString.KEY){if(this.iCurrentType=999,e+1>=t.length)return this.sCurrentString="",e+1;if(" "==(s=t[e+1]))return this.iSpaceWidth+=this.WORDSIZE,e+2;if("o"==s||"O"==s)return this.iCurrentColor=this.iOldColor,this.iCurrentType=999,e+2;if("|"==s)return e+2;if("l"==s||"L"==s)return this.iLockRectPoint=t.charAt(e+2)-"0",this.iCurrentType=3,this.sCurrentString="",e+4;if("]"==s)return this.iCurrentType=4,this.sCurrentString="",e+2;if("e"==s||"E"==s)return this.iCurrentType=2,this.sCurrentString="",e+2;if("f"==s||"F"==s){for(this.sCurrentString="",e+=2,a=0,n=0;n<3&&!(e>=t.length)&&-1!=(i=this.hto(t[e]));n++)a=10*a+i,e++;return a>=0&&a<900&&(this.iCurrentType=1,this.sCurrentString="表情"+a),e}if("c"==s||"C"==s){for(this.iCurrentType=999,e+=2,this.iOldColor=this.iCurrentColor,this.iCurrentColor=0,i=0;i<6;i++){if(e>=t.length)return this.sCurrentString="",e;if(s=t.charAt(e),-1==(a=this.hto(s)))return this.iCurrentColor|=4278190080,e;this.iCurrentColor=this.iCurrentColor<<4|a,e++}return this.iCurrentColor|=4278190080,e}return this.iCurrentType=0,this.sCurrentString=""+FormatString.KEY,e+1}return this.iCurrentType=0,this.sCurrentString=""+s,++e}},{key:"AddUnit",value:function(t,e,i,a,n,s,r){return this.uls[e].iType=i,this.uls[e].sDetail=r,this.uls[e].iColor=a,this.uls[e].iX=n,this.uls[e].iH=s,this.uls[e].iLp=t,++e}},{key:"AddLine",value:function(t,e){var i,a=0;for(i=0;i<FormatString.MAXUNIT;i++)this.uls[i].iLp==t&&a<this.uls[i].iH&&(a=this.uls[i].iH);for(this.bEx&&a<this.iExLineGap&&(a=this.iExLineGap),this.iLineH[t]=a,this.iLineY[t+1]=this.iLineY[t]+a,i=0;i<FormatString.MAXUNIT;i++)this.uls[i].iLp==t&&(a<this.uls[i].iH&&(a=this.uls[i].iH),this.uls[i].iY=this.iLineY[t]+a-this.uls[i].iH)}},{key:"FormatEx",value:function(t,e,i,a,n,s){var r;this.bEx=!0,this.iExType=a,this.iExColor=n,this.iExLineGap=s,this.WORDSIZE=i;var u=0,l=0,f="",h=4294967295;for(this.iW=0,this.ilp=0,r=0;r<FormatString.MAXUNIT;r++)this.uls[r].iLp=-1,this.iLineY[r]=0,this.iLineH[r]=0;for(this.iCurrentColor=4294967295,this.iOldColor=4294967295,this.iSpaceWidth=0;u<t.length;)if(u=this.NextUnit(t,u),0==this.iCurrentType)this.iW+this.pm3f.GetTextWidth(f+this.sCurrentString,this.WORDSIZE)>=e?(this.pm3f.GetTextWidth(f,this.WORDSIZE),l=this.AddUnit(this.ilp,l,0,h,this.iW,this.pm3f.GetTextHeight(),f),this.AddLine(this.ilp,l),this.ilp++,f=this.sCurrentString,this.iW=0):this.iCurrentColor!=h||this.iSpaceWidth>0?(f.length>0&&(this.pm3f.GetTextWidth(f,this.WORDSIZE),l=this.AddUnit(this.ilp,l,0,h,this.iW,this.pm3f.GetTextHeight(),f),this.iW+=this.pm3f.GetTextWidth(f,this.WORDSIZE)),f=this.sCurrentString,h=this.iCurrentColor,this.iW+=this.iSpaceWidth,this.iSpaceWidth=0):f+=this.sCurrentString;else if(1==this.iCurrentType){if(o.default.xani_face.InitAnimaWithName(this.sCurrentString,this.aa_face),this.aa_face.iDelay<0)continue;f.length>0&&(this.pm3f.GetTextWidth(f,this.WORDSIZE),l=this.AddUnit(this.ilp,l,0,h,this.iW,this.pm3f.GetTextHeight(),f),this.iW+=this.pm3f.GetTextWidth(f,this.WORDSIZE));var d=o.default.xani_face.iAnimaW(this.aa_face),c=o.default.xani_face.iAnimaH(this.aa_face);this.iW+d>e&&(this.AddLine(this.ilp,l),this.ilp++,this.iW=0),l=this.AddUnit(this.ilp,l,1,h,this.iW,c,this.sCurrentString),this.iW+=d,this.iW>=e&&(this.pm3f.GetTextWidth(f,this.WORDSIZE),this.AddLine(this.ilp,l),this.ilp++,this.iW=0),f=""}else 2==this.iCurrentType?(this.pm3f.GetTextWidth(f,this.WORDSIZE),l=this.AddUnit(this.ilp,l,0,h,this.iW,this.pm3f.GetTextHeight(),f),this.AddLine(this.ilp,l),this.ilp++,f=this.sCurrentString,this.iW=0):3==this.iCurrentType?(f.length>0&&(this.pm3f.GetTextWidth(f,this.WORDSIZE),l=this.AddUnit(this.ilp,l,0,h,this.iW,this.pm3f.GetTextHeight(),f),this.iW+=this.pm3f.GetTextWidth(f,this.WORDSIZE)),f=this.sCurrentString,l=this.AddUnit(this.ilp,l,2,this.iLockRectPoint,this.iW,0,"")):4==this.iCurrentType&&(f.length>0&&(this.pm3f.GetTextWidth(f,this.WORDSIZE),l=this.AddUnit(this.ilp,l,0,h,this.iW,this.pm3f.GetTextHeight(),f),this.iW+=this.pm3f.GetTextWidth(f,this.WORDSIZE)),f=this.sCurrentString,l=this.AddUnit(this.ilp,l,3,this.iLockRectPoint,this.iW,0,""));""!=f&&(this.pm3f.GetTextWidth(f,this.WORDSIZE),l=this.AddUnit(this.ilp,l,0,h,this.iW,this.pm3f.GetTextHeight(),f),this.iW+=this.pm3f.GetTextWidth(f,this.WORDSIZE)),this.AddLine(this.ilp,l),this.ilp++,this.iH=this.ilp*this.WORDSIZE,this.iH=this.iLineY[this.ilp],this.ilp>=2&&(this.iW=e)}},{key:"Format",value:function(t,e,i){var a;this.bEx=!1,this.WORDSIZE=i;var n=0,s=0,r="",u=4294967295;for(this.iW=0,this.ilp=0,a=0;a<FormatString.MAXUNIT;a++)this.uls[a].iLp=-1,this.iLineY[a]=0,this.iLineH[a]=0;for(this.iCurrentColor=4294967295,this.iSpaceWidth=0;n<t.length;)if(n=this.NextUnit(t,n),0==this.iCurrentType)this.iW+this.pm3f.GetTextWidth(r+this.sCurrentString,this.WORDSIZE)>=e?(this.pm3f.GetTextWidth(r,this.WORDSIZE),s=this.AddUnit(this.ilp,s,0,u,this.iW,this.pm3f.GetTextHeight(),r),this.AddLine(this.ilp,s),this.ilp++,r=this.sCurrentString,this.iW=0):this.iCurrentColor!=u||this.iSpaceWidth>0?(r.length>0&&(this.pm3f.GetTextWidth(r,this.WORDSIZE),s=this.AddUnit(this.ilp,s,0,u,this.iW,this.pm3f.GetTextHeight(),r),this.iW+=this.pm3f.GetTextWidth(r,this.WORDSIZE)),r=this.sCurrentString,u=this.iCurrentColor,this.iW+=this.iSpaceWidth,this.iSpaceWidth=0):r+=this.sCurrentString;else if(1==this.iCurrentType){if(o.default.xani_face.InitAnimaWithName(this.sCurrentString,this.aa_face),this.aa_face.iDelay<0)continue;r.length>0&&(this.pm3f.GetTextWidth(r,this.WORDSIZE),s=this.AddUnit(this.ilp,s,0,u,this.iW,this.pm3f.GetTextHeight(),r),this.iW+=this.pm3f.GetTextWidth(r,this.WORDSIZE));var l=o.default.xani_face.iAnimaW(this.aa_face),f=o.default.xani_face.iAnimaH(this.aa_face);this.iW+l>e&&(this.AddLine(this.ilp,s),this.ilp++,this.iW=0),s=this.AddUnit(this.ilp,s,1,u,this.iW,f,this.sCurrentString),this.iW+=l,this.iW>=e&&(this.pm3f.GetTextWidth(r,this.WORDSIZE),this.AddLine(this.ilp,s),this.ilp++,this.iW=0),r=""}else 2==this.iCurrentType?(this.pm3f.GetTextWidth(r,this.WORDSIZE),s=this.AddUnit(this.ilp,s,0,u,this.iW,this.pm3f.GetTextHeight(),r),this.AddLine(this.ilp,s),this.ilp++,r=this.sCurrentString,this.iW=0):3==this.iCurrentType?(r.length>0&&(this.pm3f.GetTextWidth(r,this.WORDSIZE),s=this.AddUnit(this.ilp,s,0,u,this.iW,this.pm3f.GetTextHeight(),r),this.iW+=this.pm3f.GetTextWidth(r,this.WORDSIZE)),r=this.sCurrentString,s=this.AddUnit(this.ilp,s,2,this.iLockRectPoint,this.iW,0,"")):4==this.iCurrentType&&(r.length>0&&(this.pm3f.GetTextWidth(r,this.WORDSIZE),s=this.AddUnit(this.ilp,s,0,u,this.iW,this.pm3f.GetTextHeight(),r),this.iW+=this.pm3f.GetTextWidth(r,this.WORDSIZE)),r=this.sCurrentString,s=this.AddUnit(this.ilp,s,3,this.iLockRectPoint,this.iW,0,""));""!=r&&(this.pm3f.GetTextWidth(r,this.WORDSIZE),s=this.AddUnit(this.ilp,s,0,u,this.iW,this.pm3f.GetTextHeight(),r),this.iW+=this.pm3f.GetTextWidth(r,this.WORDSIZE)),this.AddLine(this.ilp,s),this.ilp++,this.iH=this.ilp*this.WORDSIZE,this.iH=this.iLineY[this.ilp],this.ilp>=2&&(this.iW=e)}},{key:"Draw",value:function(t,e){var i;for(i=0;i<FormatString.MAXUNIT;i++){if(-1==this.uls[i].iLp)return;switch(this.uls[i].iType){case 0:this.bEx?this.pm3f.DrawText_2(t+this.uls[i].iX,e+this.uls[i].iY,this.uls[i].sDetail,this.uls[i].iColor,this.WORDSIZE,101,1,1,0,0,0,this.iExType,this.iExColor):this.pm3f.DrawTextEx(t+this.uls[i].iX,e+this.uls[i].iY,this.uls[i].sDetail,this.uls[i].iColor,this.WORDSIZE,101,1,1,0,0,0);break;case 1:o.default.xani_face.InitAnimaWithName(this.uls[i].sDetail,this.aa_face),this.aa_face.SetFrame(o.default.iDelay),this.aa_face.DrawEx(t+this.uls[i].iX,e+this.uls[i].iY,101,1,1,0,-1,-1)}}}},{key:"DrawToBuffer",value:function(t,e,i){var a;for(a=0;a<FormatString.MAXUNIT;a++){if(-1==this.uls[a].iLp)return;switch(this.uls[a].iType){case 0:n.default.gi().DrawText(t,0,e+this.uls[a].iX,i+this.uls[a].iY,this.uls[a].sDetail,this.uls[a].iColor,this.WORDSIZE);break;case 1:o.default.xani_face.InitAnimaWithName(this.uls[a].sDetail,this.aa_face),this.aa_face.SetFrame(o.default.iDelay),n.default.gi().DrawAnimaEx(t,e+this.uls[a].iX,i+this.uls[a].iY,this.aa_face,101,1,1,0,-1,-1)}}}}]),FormatString}();i.default=f,f.KEY="#",f.MAXUNIT=64,f.fs=null,f.gi=function(){return null==f.fs&&(f.fs=new f),f.fs}},{"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../map/DrawBuffer":283,"./LockRect":83,"./UnitList":84}],82:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),s=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),r=_interopRequireDefault(t("./FormatString")),o=_interopRequireDefault(t("./UnitList"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(){function FormatStringBuffer(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FormatStringBuffer)}return a(FormatStringBuffer,[{key:"Init",value:function(){var t;for(this.bEx=r.default.gi().bEx,this.WORDSIZE=r.default.gi().WORDSIZE,this.iExType=r.default.gi().iExType,this.iExColor=r.default.gi().iExColor,this.iulc=0,t=0;t<r.default.MAXUNIT&&-1!=r.default.gi().uls[t].iLp;t++)this.iulc++;for(this.uls=new Array(this.iulc),t=0;t<this.iulc;t++)this.uls[t]=new o.default,this.uls[t].copyfrom(r.default.gi().uls[t])}},{key:"Draw",value:function(t,e){var i;for(i=0;i<this.iulc;i++)switch(this.uls[i].iType){case 0:this.bEx?n.default.gi().DrawText_2(t+this.uls[i].iX,e+this.uls[i].iY,this.uls[i].sDetail,this.uls[i].iColor,this.WORDSIZE,101,1,1,0,0,0,this.iExType,this.iExColor):n.default.gi().DrawTextEx(t+this.uls[i].iX,e+this.uls[i].iY,this.uls[i].sDetail,this.uls[i].iColor,this.WORDSIZE,101,1,1,0,0,0);break;case 1:s.default.xani_face.InitAnimaWithName(this.uls[i].sDetail,s.default.aaa),s.default.aaa.SetFrame(s.default.iDelay),s.default.aaa.DrawEx(t+this.uls[i].iX,e+this.uls[i].iY,101,1,1,0,-1,-1)}}}]),FormatStringBuffer}();i.default=u},{"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"./FormatString":81,"./UnitList":84}],83:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),_interopRequireDefault(t("./_XRECT")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var s=function(){function LockRect(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LockRect),this.rs=new Array(3);for(var t=0;t<3;t++)this.rs[t]=new n.default}return a(LockRect,[{key:"bIn",value:function(t,e){return this.rs[0].bIn(t,e)||this.rs[1].bIn(t,e)||this.rs[2].bIn(t,e)}},{key:"Clear",value:function(){this.rs[0].Set(-1,-1,-1,-1),this.rs[1].Set(-1,-1,-1,-1),this.rs[2].Set(-1,-1,-1,-1),this.iCount=0}},{key:"Add",value:function(t,e,i,a){this.iCount>=3||(this.rs[this.iCount].Set(t,e,i,a),this.iCount++)}},{key:"CopyFrom",value:function(t){this.iCount=t.iCount,this.rs[0].CopyFrom(t.rs[0]),this.rs[1].CopyFrom(t.rs[1]),this.rs[2].CopyFrom(t.rs[2])}}]),LockRect}();i.default=s},{"../../../../engtst/mgm/GmPlay":65,"./_XRECT":85}],84:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function UnitList(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,UnitList),this.sDetail=""}return a(UnitList,[{key:"copyfrom",value:function(t){this.iType=t.iType,this.iLp=t.iLp,this.iX=t.iX,this.iY=t.iY,this.iW=t.iW,this.iH=t.iH,this.iColor=t.iColor,this.sDetail=t.sDetail}}]),UnitList}();i.default=n},{}],85:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function _XRECT(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_XRECT),this.iX=-1,this.iY=-1,this.iW=-1,this.iH=-1}return a(_XRECT,[{key:"Set",value:function(t,e,i,a){this.iX=t,this.iY=e,this.iW=i,this.iH=a}},{key:"bIn",value:function(t,e){return!(t<this.iX)&&(!(e<this.iY)&&(!(t>this.iX+this.iW)&&!(e>this.iY+this.iH)))}},{key:"CopyFrom",value:function(t){this.iX=t.iX,this.iY=t.iY,this.iW=t.iW,this.iH=t.iH}}]),_XRECT}();i.default=n},{}],86:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),r=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),o=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),u=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),l=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=function MessageList(){_classCallCheck(this,MessageList),this.sMessage=""},h=function(){function EasyMessage(){var t;for(_classCallCheck(this,EasyMessage),this.pm3f=s.default.xm3f,this.iMessageCount=0,this.messages=new Array(EasyMessage.MAXMESSAGE),t=0;t<EasyMessage.MAXMESSAGE;t++)this.messages[t]=new f;this.snap_atts=new Int32Array(6),this.iShowDelay=-1,this.bDisable=!1}return a(EasyMessage,[{key:"snapatt",value:function(){this.snap_atts[0]=l.default.me.rbs.iMaxHp,this.snap_atts[1]=l.default.me.rbs.iMaxMp,this.snap_atts[2]=l.default.me.rbs.iAttack,this.snap_atts[3]=l.default.me.rbs.iDefence,this.snap_atts[4]=l.default.me.rbs.iSpirit,this.snap_atts[5]=l.default.me.rbs.iSpeed}},{key:"calcattchanged",value:function(){this.snap_atts[0]=l.default.me.rbs.iMaxHp-this.snap_atts[0],this.snap_atts[1]=l.default.me.rbs.iMaxMp-this.snap_atts[1],this.snap_atts[2]=l.default.me.rbs.iAttack-this.snap_atts[2],this.snap_atts[3]=l.default.me.rbs.iDefence-this.snap_atts[3],this.snap_atts[4]=l.default.me.rbs.iSpirit-this.snap_atts[4],this.snap_atts[5]=l.default.me.rbs.iSpeed-this.snap_atts[5],this.iShowCount=0;for(var t=0;t<6;t++)0!=this.snap_atts[t]&&(this.iShowCount++,this.AddMessage(this.getdetail(t,this.snap_atts[t])))}},{key:"addflag",value:function(t){return t>0?"+"+t:""+t}},{key:"getdetail",value:function(t,e){switch(t){case 0:return"气血上限"+this.addflag(e);case 1:return"魔法上限"+this.addflag(e);case 2:return"攻击力"+this.addflag(e);case 3:return"防御力"+this.addflag(e);case 4:return"灵力"+this.addflag(e);case 5:return"速度"+this.addflag(e);default:return"null"}}},{key:"drawattchanged",value:function(){if(!(this.iShowDelay<=0)){for(var t=n.default.SCRH/2-80*this.iShowCount/2,e=0,i=0;i<6;i++)0!=this.snap_atts[i]&&(this.pm3f.DrawTextEx(n.default.SCRW/2-2,t+80*e,this.getdetail(i,this.snap_atts[i]),4278190080,60,this.iShowDelay,1,1,0,-2,0),this.pm3f.DrawTextEx(n.default.SCRW/2+2,t+80*e,this.getdetail(i,this.snap_atts[i]),4278190080,60,this.iShowDelay,1,1,0,-2,0),this.pm3f.DrawTextEx(n.default.SCRW/2,t+80*e-2,this.getdetail(i,this.snap_atts[i]),4278190080,60,this.iShowDelay,1,1,0,-2,0),this.pm3f.DrawTextEx(n.default.SCRW/2,t+80*e+2,this.getdetail(i,this.snap_atts[i]),4278190080,60,this.iShowDelay,1,1,0,-2,0),this.pm3f.DrawTextEx(n.default.SCRW/2,t+80*e,this.getdetail(i,this.snap_atts[i]),this.snap_atts[i]>0?4278255360:4294901760,60,this.iShowDelay>101?101:this.iShowDelay,1,1,0,-2,0),e++);this.iShowDelay-=5}}},{key:"Clear",value:function(){this.iMessageCount=0}},{key:"AddMessage",value:function(t){var e;for(this.iMessageCount>=EasyMessage.MAXMESSAGE&&(this.iMessageCount=EasyMessage.MAXMESSAGE-1),e=this.iMessageCount;e>0;e--)this.messages[e].sMessage=this.messages[e-1].sMessage,this.messages[e].iDelay=this.messages[e-1].iDelay;this.messages[0].sMessage=t,this.messages[0].iDelay=EasyMessage.MESSAGEDELAY,this.iMessageCount++}},{key:"Draw",value:function(){if(this.bDisable)o.default.gi().iXStat!=o.default.GS_PROMPTACTIVITY&&(this.bDisable=!1);else{var t,e,i,a;for(this.drawattchanged(),t=0;t<this.iMessageCount;t++)u.default.gi().Format("#cffff00"+this.messages[t].sMessage,800,26),a=u.default.gi().iW,32,e=(n.default.SCRW-a-4)/2,i=n.default.SCRH-32*(t+1)-1,EasyMessage.new_Text(e,i,a+4),u.default.gi().Draw(e+2,i+3),this.messages[t].iDelay--;this.iMessageCount>0&&this.messages[this.iMessageCount-1].iDelay<=0&&this.iMessageCount--}}},{key:"ProcTouch",value:function(t,e,i){return!1}}]),EasyMessage}();i.default=h,h.MAXMESSAGE=10,h.MESSAGEDELAY=100,h.easymsg=new h,h.new_Text=function(t,e,i){r.default.xani_nui2.DrawAnimaEx(t,e,"可变长文字框",0,60,1,1,0,0,0),r.default.xani_nui2.DrawAnimaEx(t+15,e,"可变长文字框",1,60,1*(i-30)/20,1,0,0,0),r.default.xani_nui2.DrawAnimaEx(t+i-20,e,"可变长文字框",2,60,1,1,0,0,0)}},{"../../../../config/GmConfig":5,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/me/GmMe":211}],87:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=(_interopRequireDefault(t("../../../../map/MapManager")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),r=(_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode"))),o=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(){function FrameMessage(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FrameMessage)}return a(FrameMessage,[{key:"FrameMessage",value:function(){this.iW=300,this.iH=200,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.pm3f=s.default.xm3f,this.bShow=!1}},{key:"Open",value:function(t){this.sDetail=t,this.bShow=!0,this.iW=n.default.SCRW/2,this.iH=200,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.iY=n.default.SCRH/2-10,this.bLock=!0}},{key:"Draw",value:function(){this.bShow&&(this.iW=500,this.iH=200,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2+40,o.default.gi().FormatEx("#cffff00"+this.sDetail,this.iW-50,30,1,4278190080,35),this.iH=240,o.default.gi().iH+50>this.iH&&(this.iH=o.default.gi().iH+50),this.iY=(n.default.SCRH-this.iH)/2+40,r.default.new_framewatch(this.iX,this.iY,this.iW,this.iH),o.default.gi().Draw(this.iX+25,this.iY+25))}},{key:"ProcTouch",value:function(t,e,i){return!!this.bShow&&(1==t&&(this.bLock=!1),3!=t||this.bLock||(this.bShow=!1),!0)}}]),FrameMessage}();i.default=u,u.fm=new u},{"../../../../config/GmConfig":5,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../map/MapManager":286}],88:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=(_interopRequireDefault(t("../../../../map/MapManager")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),r=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),o=(_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString"))),u=_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/JQMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(){function FrameMessageEx(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FrameMessageEx),this.iW=300,this.iH=200,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.pm3f=s.default.xm3f,this.bShow=!1}return a(FrameMessageEx,[{key:"Open",value:function(t){this.sDetail=t,this.bShow=!0,this.iW=512,this.iH=195,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2+40,this.bLock=!0,this.iot=r.default.iNowMillis}},{key:"Draw",value:function(){this.bShow&&(u.default.jq.bJQLock()?this.iot=r.default.iNowMillis:(r.default.xani_other.DrawAnima(this.iX,this.iY,"欢迎框",0),r.default.xani_other.DrawAnima(this.iX,this.iY,"欢迎仙女",0),o.default.gi().FormatEx("#cd1ecf5"+this.sDetail,300,25,1,4278190080,40),o.default.gi().Draw(this.iX+180,this.iY+40),r.default.iNowMillis-this.iot>5e3&&(this.bShow=!1)))}},{key:"ProcTouch",value:function(t,e,i){return!u.default.jq.bJQLock()&&(!!this.bShow&&(1==t&&(this.bLock=!1),3!=t||this.bLock||r.default.iNowMillis-this.iot>1e3&&(this.bShow=!1),!0))}}]),FrameMessageEx}();i.default=l,l.fm=new l},{"../../../../config/GmConfig":5,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../map/MapManager":286}],89:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),u=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/XStat"))),l=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),f=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function PromptMessage(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PromptMessage),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PromptMessage.__proto__||Object.getPrototypeOf(PromptMessage)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PromptMessage,r.default),a(PromptMessage,[{key:"Draw",value:function(){f.default.gi().FormatEx(this.sDetail,500,20,0,0,25),this.iW=580,this.iH=f.default.gi().iH+20+30+30+30,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,l.default.frame_type4("提示框a32_32",this.iX,this.iY,this.iW,this.iH,32,32),o.default.gi().DrawText_2(this.iX+this.iW/2,this.iY+30+15,this.sTitle,4294967040,30,101,1,1,0,-2,-2,4,4289034305),f.default.gi().Draw(this.iX+40,this.iY+30+30+20)}},{key:"ProcTouch",value:function(t,e,i){return s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||u.default.gi().PopStat(1),!1}}]),PromptMessage}();i.default=h,h.Open=function(t,e){var i=u.default.gi().PushStat(u.default.GS_PROMPTMESSAGE);i.sTitle=t,i.sDetail=e}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81}],90:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=(_interopRequireDefault(t("../../../engine/PackageTools")),_interopRequireDefault(t("../../../engine/control/XButtonEx2"))),r=_interopRequireDefault(t("../../../engtst/mgm/GmPlay")),o=_interopRequireDefault(t("../../../engtst/mgm/GmProtocol")),u=_interopRequireDefault(t("../../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function _EXTBTNS(){_classCallCheck(this,_EXTBTNS)},f=function(){function ExtendButton(){var t;for(_classCallCheck(this,ExtendButton),this.btns=new Array(ExtendButton.MAXBTN),t=0;t<ExtendButton.MAXBTN;t++)this.btns[t]=null}return a(ExtendButton,[{key:"SetIcon",value:function(t){var e,i=t.GetNextInt(),a=t.GetNextString(),n=t.GetNextString();if(0==i){for(e=0;e<ExtendButton.MAXBTN;e++)if(null!=this.btns[e]&&this.btns[e].sCmd==n&&this.btns[e].sAnima==a)return void(this.btns[e]=null)}else{for(e=0;e<ExtendButton.MAXBTN;e++)if(null!=this.btns[e]&&this.btns[e].sCmd==n&&this.btns[e].sAnima==a)return;for(e=0;e<ExtendButton.MAXBTN;e++)if(null==this.btns[e])return this.btns[e]=new l,this.btns[e].btn_icon=new s.default(r.default.xani_button),this.btns[e].btn_icon.InitButton(a),this.btns[e].sAnima=a,this.btns[e].sCmd=n,void(this.btns[e].iShow=i)}}},{key:"Draw",value:function(t){var e,i=n.default.SCRW-120-ExtendButton.BW,a=n.default.SCRH-120-ExtendButton.BH;for(e=0;e<ExtendButton.MAXBTN;e++)null!=this.btns[e]&&0!=(this.btns[e].iShow&t)&&(u.default.new_framepc(i,a,ExtendButton.BW,ExtendButton.BH),this.btns[e].btn_icon.Move(i,a,ExtendButton.BW,ExtendButton.BH),this.btns[e].btn_icon.Draw(),i-=ExtendButton.BW-20)}},{key:"ProcTouch",value:function(t,e,i,a){var n;for(n=0;n<ExtendButton.MAXBTN;n++)if(null!=this.btns[n]&&0!=(this.btns[n].iShow&t)&&this.btns[n].btn_icon.ProcTouch(e,i,a))return this.btns[n].btn_icon.bCheck()&&o.default.gi().s_ExtendCmd(this.btns[n].sCmd,"","","","","","",""),!0;return!1}}]),ExtendButton}();i.default=f,f.MAXBTN=3,f.BW=80,f.BH=80,f.peb=new f},{"../../../config/GmConfig":5,"../../../engine/PackageTools":9,"../../../engine/control/XButtonEx2":16,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/GmProtocol":66,"../../../engtst/mgm/frame/DrawMode":72}],91:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=_interopRequireDefault(t("../../../config/XDefine")),r=_interopRequireDefault(t("../../../map/DrawBuffer")),o=_interopRequireDefault(t("../../../map/MapManager")),u=_interopRequireDefault(t("../../../map/TouchEffect")),l=_interopRequireDefault(t("../../../engine/BaseClass")),f=_interopRequireDefault(t("../../../engine/PackageTools")),h=_interopRequireDefault(t("../../../engine/TouchManager")),d=(_interopRequireDefault(t("../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../engine/graphics/M3DFast"))),c=(_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/FireworksEffect"))),m=_interopRequireDefault(t("../../../engtst/mgm/GmPlay")),g=_interopRequireDefault(t("../../../engtst/mgm/GmProtocol")),_=_interopRequireDefault(t("../../../engtst/mgm/MyAI")),p=_interopRequireDefault(t("../../../engtst/mgm/XStat")),b=_interopRequireDefault(t("../../../engtst/mgm/gameing/chat/privatechat/FriendList")),D=_interopRequireDefault(t("../../../engtst/mgm/gameing/chat/privatechat/PrivateChatWatch")),y=_interopRequireDefault(t("../../../engtst/mgm/gameing/chat/publicchat/PublicChat_BigFrame")),w=_interopRequireDefault(t("../../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame")),S=_interopRequireDefault(t("../../../engtst/mgm/gameing/fast/FastButton")),x=_interopRequireDefault(t("../../../engtst/mgm/gameing/fast/SteeringWheel")),P=_interopRequireDefault(t("../../../engtst/mgm/gameing/fast/SystemOperate")),v=_interopRequireDefault(t("../../../engtst/mgm/gameing/fight/AutoFightFrame")),R=_interopRequireDefault(t("../../../engtst/mgm/gameing/fight/XFight")),M=_interopRequireDefault(t("../../../engtst/mgm/gameing/help/FastGoods")),C=_interopRequireDefault(t("../../../engtst/mgm/gameing/help/GamePost")),k=_interopRequireDefault(t("../../../engtst/mgm/gameing/help/JQMode")),T=(_interopRequireDefault(t("../../../engtst/mgm/gameing/help/MySelect")),_interopRequireDefault(t("../../../engtst/mgm/gameing/help/ShowPath"))),A=_interopRequireDefault(t("../../../engtst/mgm/gameing/help/TopIcon/FirstCharge")),G=_interopRequireDefault(t("../../../engtst/mgm/gameing/help/TopIcon/FiveGift")),E=_interopRequireDefault(t("../../../engtst/mgm/gameing/help/TopIcon/LeaderBoard")),X=_interopRequireDefault(t("../../../engtst/mgm/gameing/help/TopIcon/LoginGift")),O=_interopRequireDefault(t("../../../engtst/mgm/gameing/help/TopIcon/StrengthUpgrade")),I=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/GmMe")),F=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/goods/MyGoods")),N=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/goods/TmpGoods")),q=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/mission/MissionFinish")),L=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/mission/MissionLead")),B=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/mission/UpgradeEffect")),Y=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/shop/MyBuy")),W=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/shop/MySell")),H=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/team/MyTeam")),j=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/team/TeamCreate")),V=_interopRequireDefault(t("./NearRole")),U=_interopRequireDefault(t("./NearBy")),z=_interopRequireDefault(t("./ExtendButton")),Q=_interopRequireDefault(t("./ProgressBar"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var J=function(t){function Gameing(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Gameing);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Gameing.__proto__||Object.getPrototypeOf(Gameing)).call(this));for(Gameing.gameing=i,i.pani=t,i.pm3f=t.pm3f,i.pls=new f.default(524288),i.m_map=o.default.gi(),i.m_dbf=r.default.gi(),i.me=I.default.me,i.me.iX=50,i.me.iY=50,i.me.iRid=0,i.nrs=new Array(Gameing.iNearMax),e=0;e<Gameing.iNearMax;e++)i.nrs[e]=new V.default;return i.nb=new U.default,i.aa_pos=m.default.xani_nui3.InitAnimaWithName("地图坐标",null),i.aa_network=m.default.xani_nui2.InitAnimaWithName("网络状况",null),i.aa_numtime=m.default.xani_nui2.InitAnimaWithName("时间",null),i.aa_numpos=m.default.xani_nui2.InitAnimaWithName("坐标",null),i.oldhour=0,i.iFStat=0,i.iFDT1=0,i.iFDT2=0,i.iFDT3=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Gameing,l.default),a(Gameing,[{key:"findnrs",value:function(t){var e;for(e=0;e<Gameing.iNearMax;e++)if(this.nrs[e].bUseing&&this.nrs[e].iRid==t)return this.nrs[e];return null}},{key:"ClearPopo",value:function(){var t;for(t=0;t<Gameing.iNearMax;t++)this.nrs[t].bUseing&&(this.nrs[t].iPopoDelay=0)}},{key:"findnrsbyname",value:function(t){var e;for(e=0;e<Gameing.iNearMax;e++)if(this.nrs[e].bUseing&&this.nrs[e].sName==t)return this.nrs[e];return null}}]),a(Gameing,[{key:"FreshNearRole",value:function(){var t;for(t=0;t<Gameing.iNearMax;t++)this.nrs[t].bsc=!0}},{key:"DrawMapUI",value:function(){if(!o.default.gi().vbk.mapdialog.bHideUI()&&!k.default.jq.bJQLock()){var t,e,i;for(this.aa_pos.Draw(0,0),t=e=m.default.xntf.NetBusy();t<e+5;t++)i=t<5?0:t<9?t-4:4,this.aa_network.iFrame=i,this.aa_network.Draw(23*(t-e),0);if(this.pm3f.DrawText_2(59,42,o.default.gi().mapdata.sMapDetail,4294967295,20,101,1,1,0,-2,-2,1,4278190080),d.default.gi().DrawTextEx(42,17,":",4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(76,17,":",4294967295,20,101,1,1,0,-2,-2),t=parseInt((m.default.iNowMillis-I.default.iMillis)/1e3),i=(e=I.default.iTime[2]+t%60)>=60?1:0,e%=60,d.default.gi().DrawTextEx(94,17,""+parseInt(e/10)+e%10,4294967295,20,101,1,1,0,-2,-2),i=(e=I.default.iTime[1]+parseInt(t/60)%60+i)>=60?1:0,e%=60,d.default.gi().DrawTextEx(59,17,""+parseInt(e/10)+e%10,4294967295,20,101,1,1,0,-2,-2),e=I.default.iTime[0]+parseInt(t/60/60)+i,e%=24,d.default.gi().DrawTextEx(24,17,""+parseInt(e/10)+e%10,4294967295,20,101,1,1,0,-2,-2),23==this.oldhour&&0==e)for(var a=0;a<20;a++)F.default.gi().goods[2][a].iGid>0&&F.default.gi().goods[2][a].iTid>=347&&F.default.gi().goods[2][a].iTid<=351&&(F.default.gi().goods[2][a].iGid=-1),F.default.gi().goods[3][a].iGid>0&&F.default.gi().goods[3][a].iTid>=347&&F.default.gi().goods[3][a].iTid<=351&&(F.default.gi().goods[3][a].iGid=-1);this.oldhour=e,d.default.gi().DrawTextEx(59,69,":",4294967040,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(29,69,""+parseInt(I.default.me.iX/16),4294967040,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(89,69,""+parseInt(I.default.me.iY/16),4294967040,20,101,1,1,0,-2,-2)}}},{key:"Draw",value:function(){var t;if(o.default.gi().bMapLoaded&&this.m_map.mto(this.me.iX,this.me.iY),o.default.gi().bMapLoaded&&this.m_map.DrawGround(),R.default.bFighting){if(o.default.gi().iMapChangeing=0,o.default.gi().bMapLoaded&&this.m_map.DrawMiddleDirect(),P.default.SetScreenMode(11),R.default.gi().Draw_UI1(),P.default.SetScreenMode(10),R.default.gi().Draw(),P.default.SetScreenMode(11),R.default.gi().Draw_UI2(),w.default.gi().Draw(),this.DrawMapUI(),v.default.aff.Draw(),this.me.TeamFollow(),y.default.gi().Draw(),D.default.gi().Draw(),z.default.peb.Draw(2),this.me.DrawExp(),R.default.gi().iAlphaEffect>=n.default.SCRW||300!=R.default.gi().iFightStat)return;P.default.SetScreenMode(10)}if(this.m_dbf.ClearBuffer(),o.default.gi().bMapLoaded&&this.m_map.DrawMiddle(this.m_dbf),this.me.Draw(),T.default.psp.Draw(),this.me.next(this.m_map.mfy.iPath,this.m_map.mfy.iPathDeep),n.default.bDebug){for(t=1;t<this.m_map.mfy.iPathDeep;t++)d.default.gi().DrawLine(o.default.gi().iOffx+this.m_map.mfy.iPath[t][0],o.default.gi().iOffy+this.m_map.mfy.iPath[t][1],o.default.gi().iOffx+this.m_map.mfy.iPath[t-1][0],o.default.gi().iOffy+this.m_map.mfy.iPath[t-1][1],4294901760);o.default.gi().bMapLoaded&&o.default.gi().mfy.Draw()}for(this.me.TeamFollow(),this.iNearRoleCount=0,t=0;t<Gameing.iNearMax;t++)this.nrs[t].bUseing&&(this.nrs[t].Go(),this.nrs[t].Draw(),this.iNearRoleCount++);this.m_dbf.SortAndDraw(),c.default.fe.Draw(),o.default.gi().bMapLoaded&&this.m_map.DrawSky(),P.default.SetScreenMode(11),this.me.DrawUI(),this.DrawMapUI(),this.nb.Draw(),w.default.gi().Draw(),x.default.sw.Draw(),S.default.gi().Draw(),b.default.gi().Draw(),L.default.gi().Draw(),D.default.gi().Draw(),Gameing.iFindWayOnce>0&&Gameing.iFindWayOnce--,W.default.gi().bSelling&&W.default.gi().Draw(),Y.default.gi().bBuying&&Y.default.gi().Draw(),N.default.Draw(),_.default.gi().Draw(),j.default.iWaitingApplyMapId>0&&j.default.iWaitingApplyMapId==o.default.gi().iCurrentMapId&&(j.default.iWaitingApplyMapId=0,g.default.gi().s_TeamOperate(3,j.default.iWaitingApplyRid,0)),v.default.aff.Draw(),C.default.gi().Draw(),Gameing.iTopIconOffX=130,E.default.lb.Draw(),G.default.fg.Draw(),X.default.lg.Draw(),A.default.fg.Draw(),O.default.su.Draw(),1==this.iFStat&&(this.iFDT2=s.default.get_ms(),this.iFDT2-this.iFDT1>500&&(this.iFDT1=this.iFDT2,this.goon(this.iFX,this.iFY))),y.default.gi().Draw(),z.default.peb.Draw(1),this.m_map.vbk.mapdialog.Draw(),q.default.mf.Draw(),B.default.ue.Draw(),this.me.DrawExp(),k.default.jq.JQLogic()}},{key:"ProcTouch",value:function(t,e,i){if(k.default.jq.ProcTouch(t,e,i))return!0;if(v.default.aff.ProcTouch(t,e,i))return!0;if(R.default.bFighting)return!!z.default.peb.ProcTouch(2,t,e,i)||(!!D.default.gi().ProcTouch(t,e,i)||(!!y.default.gi().ProcTouch(t,e,i)||(!!w.default.gi().ProcTouch(t,e,i)||(R.default.gi().ProcTouch(t,e,i),R.default.gi().iFightStat>=100&&b.default.gi().ProcTouch(t,e,i),!0))));if(p.default.gi().iXStat==p.default.GS_GAMEING&&M.default.gi().ProcTouch(t,e,i))return!0;if(this.m_map.vbk.mapdialog.ProcTouch(t,e,i))return!0;if(z.default.peb.ProcTouch(1,t,e,i))return!0;if(D.default.gi().ProcTouch(t,e,i))return!0;if(y.default.gi().ProcTouch(t,e,i))return!0;var a,n,r,l,f=o.default.gi().iOffx,d=o.default.gi().iOffy;if(r=e,l=i,2==t&&1==this.iFStat)return this.iFDT2=s.default.get_ms(),this.iFDT2-this.iFDT1>50&&this.iFDT2-this.iFDT3>500&&(this.iFDT1=this.iFDT2,this.iFX=e,this.iFY=i,this.goon(e,i)),!0;if(3==t&&1==this.iFStat){if(this.iFStat=0,this.iFDT2=s.default.get_ms(),this.iFDT2-this.iFDT3<500)if(o.default.gi().vbk.GoToNpc(e-this.m_map.iOffx,i-this.m_map.iOffy))(H.default.bNoTeam()||H.default.bTeamLeader()||H.default.bAway())&&!W.default.gi().bSelling&&(e=o.default.gi().vbk.iNpcX+this.m_map.iOffx,i=o.default.gi().vbk.iNpcY+this.m_map.iOffy,this.m_map.mfy.findway(this.me.iX,this.me.iY,e-this.m_map.iOffx,i-this.m_map.iOffy)&&this.m_map.mfy.checkagain()&&(this.me.start(this.m_map.mfy.iPath,this.m_map.mfy.iPathDeep),u.default.te.Add(e-this.m_map.iOffx,i-this.m_map.iOffy)),this.nb.Clear());else{for(this.nb.Clear(),W.default.gi().bSelling,a=0;a<Gameing.iNearMax;a++)this.nrs[a].bUseing&&(P.default.bShowRole||H.default.bInTmpTeam(this.nrs[a].iRid))&&m.default.xani_newrole[2*this.nrs[a].iRace+this.nrs[a].iSex].bInAnima(this.nrs[a].aa_body,f+this.nrs[a].iX,d+this.nrs[a].iY,e,i)&&(m.default.sop("ppp===="+this.nrs[a].aa_body.iAnimaPoint),1==this.nrs[a].iIsLeader?this.nb.Add(2,this.nrs[a].sName,this.nrs[a]):this.nb.Add(4,this.nrs[a].sName,this.nrs[a]));if(P.default.bShowSell)for(a=0;a<Gameing.iNearMax;a++)this.nrs[a].bUseing&&s.default.bInRect(e,i,f+this.nrs[a].iX-this.nrs[a].iSellWidth/2,d+this.nrs[a].iY-140,this.nrs[a].iSellWidth,40)&&1==this.nrs[a].iIsSelling&&this.nb.Add(3,this.nrs[a].sSellName,this.nrs[a]);0==this.nb.iSelectCount&&this.goon(e,i)}else this.goon(e,i);return!0}if(e=r,i=l,E.default.lb.ProcTouch(t,e,i))return!0;if(A.default.fg.ProcTouch(t,e,i))return!0;if(G.default.fg.ProcTouch(t,e,i))return!0;if(X.default.lg.ProcTouch(t,e,i))return!0;if(O.default.su.ProcTouch(t,e,i))return!0;if(C.default.gi().ProcTouch(t,e,i))return!0;if(_.default.gi().ProcTouch(h.default.gi().procing.iTouchStat,h.default.gi().procing.iX,h.default.gi().procing.iY))return!0;if(N.default.ProcTouch(t,e,i))return!0;if(Y.default.gi().bBuying)return Y.default.gi().ProcTouch(t,e,i),!0;if(W.default.gi().bSelling&&W.default.gi().bShow)return W.default.gi().ProcTouch(t,e,i),!0;if(this.me.ProcTouch_AttFrame(t,e,i))return!0;if(b.default.gi().ProcTouch(t,e,i))return!0;if(w.default.gi().ProcTouch(t,e,i))return!0;if(Q.default.gi().bShow)return!0;if(L.default.gi().ProcTouch(t,e,i))return!0;if(S.default.gi().ProcTouch(t,e,i))return!0;if(x.default.sw.ProcTouch(t,e,i))return!0;if(this.me.ProcTouch(t,e,i))return!0;if(this.nb.ProcTouch(t,e,i))return!0;if(r=e,l=i,_.default.gi().bFinding=!1,1==t){if(o.default.gi().vbk.bOnNpc(e-this.m_map.iOffx,i-this.m_map.iOffy));else{for(this.nb.Clear(),W.default.gi().bSelling,n=0,a=0;a<Gameing.iNearMax;a++)this.nrs[a].bUseing&&(P.default.bShowRole||H.default.bInTmpTeam(this.nrs[a].iRid))&&m.default.xani_newrole[2*this.nrs[a].iRace+this.nrs[a].iSex].bInAnima(this.nrs[a].aa_body,f+this.nrs[a].iX,d+this.nrs[a].iY,e,i)&&n++;if(P.default.bShowSell)for(a=0;a<Gameing.iNearMax;a++)this.nrs[a].bUseing&&s.default.bInRect(e,i,f+this.nrs[a].iX-this.nrs[a].iSellWidth/2,d+this.nrs[a].iY-140,this.nrs[a].iSellWidth,40)&&n++;0==n&&this.goon(e,i)}this.iFStat=1,this.iFX=e,this.iFY=i,this.iFDT1=s.default.get_ms(),this.iFDT3=s.default.get_ms()}return e=r,i=l,!1}},{key:"goon",value:function(t,e){Gameing.iFindWayOnce>0||(Gameing.iFindWayOnce++,W.default.gi().bSelling||(H.default.bNoTeam()||H.default.bTeamLeader()||H.default.bAway())&&(this.m_map.mfy.findway(this.me.iX,this.me.iY,t-this.m_map.iOffx,e-this.m_map.iOffy)?this.m_map.mfy.checkagain()&&(o.default.gi().vbk.iGoToNpcFlag=-1,o.default.gi().vbk.iGoToNpcId=-1,this.me.start(this.m_map.mfy.iPath,this.m_map.mfy.iPathDeep),x.default.sw.bLocked=!1,x.default.sw.bAutoRun=!1,u.default.te.Add(t-this.m_map.iOffx,e-this.m_map.iOffy)):(x.default.sw.bLocked=!0,x.default.sw.iLockX=t-(o.default.gi().iOffx+I.default.me.iX)+x.default.sw.iX,x.default.sw.iLockY=e-(o.default.gi().iOffy+I.default.me.iY)+x.default.sw.iY,x.default.sw.bAutoRun=!0)))}}]),Gameing}();i.default=J,J.iNearMax=50,J.iFindWayOnce=0,J.bSheildRoles=!1,J.bSheildUis=!1,J.iTopIconOffX},{"../../../config/GmConfig":5,"../../../config/XDefine":7,"../../../engine/BaseClass":8,"../../../engine/PackageTools":9,"../../../engine/TouchManager":10,"../../../engine/graphics/AnimaAction":25,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/FireworksEffect":64,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/GmProtocol":66,"../../../engtst/mgm/MyAI":68,"../../../engtst/mgm/XStat":70,"../../../engtst/mgm/gameing/chat/privatechat/FriendList":102,"../../../engtst/mgm/gameing/chat/privatechat/PrivateChatWatch":106,"../../../engtst/mgm/gameing/chat/publicchat/PublicChat_BigFrame":109,"../../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame":111,"../../../engtst/mgm/gameing/fast/FastButton":118,"../../../engtst/mgm/gameing/fast/SteeringWheel":123,"../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../engtst/mgm/gameing/fight/AutoFightFrame":126,"../../../engtst/mgm/gameing/fight/XFight":130,"../../../engtst/mgm/gameing/help/FastGoods":184,"../../../engtst/mgm/gameing/help/GamePost":186,"../../../engtst/mgm/gameing/help/JQMode":187,"../../../engtst/mgm/gameing/help/MySelect":189,"../../../engtst/mgm/gameing/help/ShowPath":192,"../../../engtst/mgm/gameing/help/TopIcon/FirstCharge":193,"../../../engtst/mgm/gameing/help/TopIcon/FiveGift":194,"../../../engtst/mgm/gameing/help/TopIcon/LeaderBoard":195,"../../../engtst/mgm/gameing/help/TopIcon/LoginGift":198,"../../../engtst/mgm/gameing/help/TopIcon/StrengthUpgrade":199,"../../../engtst/mgm/gameing/me/GmMe":211,"../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../engtst/mgm/gameing/me/goods/TmpGoods":225,"../../../engtst/mgm/gameing/me/mission/MissionFinish":230,"../../../engtst/mgm/gameing/me/mission/MissionLead":232,"../../../engtst/mgm/gameing/me/mission/UpgradeEffect":235,"../../../engtst/mgm/gameing/me/shop/MyBuy":257,"../../../engtst/mgm/gameing/me/shop/MySell":259,"../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../engtst/mgm/gameing/me/team/TeamCreate":267,"../../../map/DrawBuffer":283,"../../../map/MapManager":286,"../../../map/TouchEffect":289,"./ExtendButton":90,"./NearBy":92,"./NearRole":93,"./ProgressBar":94}],92:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=_interopRequireDefault(t("../../../config/XDefine")),r=_interopRequireDefault(t("../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../engine/graphics/M3DFast")),u=_interopRequireDefault(t("../../../engtst/mgm/GmPlay")),l=_interopRequireDefault(t("../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../engtst/mgm/frame/DrawMode")),h=_interopRequireDefault(t("../../../engtst/mgm/frame/message/EasyMessage")),d=_interopRequireDefault(t("../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send")),c=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/GmMe")),m=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/goods/GiveGoods")),g=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/shop/MyBuy")),_=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/shop/MySell")),p=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/team/MyTeam"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var b=function SelectList(){_classCallCheck(this,SelectList),this.name=""},D=function(){function NearBy(){var t;for(_classCallCheck(this,NearBy),this.OFFX=n.default.SCRW/4*3,this.OFFY=n.default.SCRH/4*1,this.sls=new Array(NearBy.MAXSELECTCOUNT),t=0;t<NearBy.MAXSELECTCOUNT;t++)this.sls[t]=new b;for(this.iSelectCount=0,this.btn_operate=new Array(16),t=0;t<16;t++)this.btn_operate[t]=new r.default(u.default.xani_nui3),this.btn_operate[t].Move(this.OFFX+50+t%2*80,this.OFFY+50+t/2*50,80,50),this.btn_operate[t].InitButton("附近操作按钮"),this.btn_operate[t].sName="无无"}return a(NearBy,[{key:"Clear",value:function(){this.iSelectCount=0,this.iSelectPoint=-1,this.iOperatePoint=-1}},{key:"Add",value:function(t,e,i){this.iSelectCount>=NearBy.MAXSELECTCOUNT||(this.sls[this.iSelectCount].type=t,this.sls[this.iSelectCount].name=e,this.sls[this.iSelectCount].point=i,this.iSelectCount++)}},{key:"OpenMyBuy",value:function(t,e,i){g.default.gi().bBuying||(g.default.gi().InitBuy(e,t,i),l.default.gi().s_StartBuy(e))}},{key:"Draw",value:function(){var t;if(!(this.iSelectCount<=0)){for(this.OFFX=n.default.SCRW/8*5,this.OFFY=n.default.SCRH/4*1,t=0;t<16;t++)this.btn_operate[t].Move(this.OFFX+80+10+t%2*77,this.OFFY+80+t/2*53,72,50);if(1==this.iSelectCount){if(0!=this.iOperatePoint){this.iOperatePoint=0;var e=this.sls[this.iOperatePoint].point;this.iORid=e.iRid}else{e=this.sls[this.iOperatePoint].point;if(this.iORid!=e.iRid)return void(this.iSelectCount=0)}if(3==this.sls[this.iOperatePoint].type){e=this.sls[this.iOperatePoint].point;return this.OpenMyBuy(e.sSellName,e.iRid,e.sName),void(this.iSelectCount=0)}}if(-1==this.iOperatePoint){for(this.x1=this.OFFX+100,this.y1=this.OFFY,this.x2=this.x1+10+10+160,this.y2=this.y1+10+10+30*this.iSelectCount,f.default.new_framepc(this.x1-5,this.y1-5,this.x2-this.x1+10,this.y2-this.y1+10),o.default.gi().SetViewClip(this.x1,this.y1,this.x2,this.y2),t=0;t<this.iSelectCount;t++)this.iSelectPoint==t&&o.default.gi().FillRect_2D(this.x1+10,this.y1+10+30*t,this.x1+10+160,this.y1+10+30*t+30,4278190335),2==this.sls[t].type?o.default.gi().DrawTextEx(this.x1+10,this.y1+10+30*t+2,"[队]"+this.sls[t].name,4294967295,25,101,1,1,0,-1,-1):o.default.gi().DrawTextEx(this.x1+10,this.y1+10+30*t+2,this.sls[t].name,4294967295,25,101,1,1,0,-1,-1);o.default.gi().NoClip()}else switch(this.sls[this.iOperatePoint].type){case 1:var i=this.sls[this.iOperatePoint].point;u.default.xani_head.DrawAnima(this.OFFX-33,this.OFFY-10,"新头像"+(2*i.iRace+i.iSex),0),u.default.xani_ui.DrawAnimaEx(this.OFFX+50,this.OFFY-10,"附近操作框",0,101,1,1,0,0,0),o.default.gi().DrawTextEx(this.OFFX+60,this.OFFY-5,i.sName,4294967295,25,101,1,1,0,-1,-1),o.default.gi().DrawTextEx(this.OFFX+60,this.OFFY+25,"号码:"+i.iRid,4294967295,20,101,1,1,0,-1,-1),this.btn_operate[0].sName="组队",this.btn_operate[0].Draw(),this.btn_operate[1].sName="摆摊",this.btn_operate[1].Draw();break;case 2:case 4:e=this.sls[this.iOperatePoint].point;u.default.xani_head.DrawAnima(this.OFFX,this.OFFY,"新头像"+(2*e.iRace+e.iSex),0),f.default.new_framepc(this.OFFX+80,this.OFFY,169,297),o.default.gi().DrawTextEx(this.OFFX+80+10,this.OFFY+22,e.sName,4294967295,25,101,1,1,0,-1,-2),o.default.gi().DrawTextEx(this.OFFX+80+10,this.OFFY+58,"号码:"+e.iRid,4294967295,25,101,1,1,0,-1,-2),2==this.sls[this.iOperatePoint].type?this.btn_operate[0].sName="入队":this.btn_operate[0].sName="组队",this.btn_operate[0].Draw(),this.btn_operate[1].sName="好友",this.btn_operate[1].Draw(),this.btn_operate[2].sName="发送",this.btn_operate[2].Draw(),this.btn_operate[3].sName="给予",this.btn_operate[3].Draw(),this.btn_operate[4].sName="攻击",this.btn_operate[4].Draw(),this.btn_operate[5].sName="查看",this.btn_operate[5].Draw(),this.btn_operate[6].sName="交易",this.btn_operate[6].Draw()}}}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.iSelectCount<=0)return!1;if(-1==this.iOperatePoint){for(this.iSelectPoint=-1,a=0;a<this.iSelectCount;a++)s.default.bInRect(e,i,this.x1+10,this.y1+10+30*a,160,30)&&(this.iSelectPoint=a);if(-1!=this.iSelectPoint&&3==t&&(this.iOperatePoint=this.iSelectPoint,3==this.sls[this.iOperatePoint].type)){var n=this.sls[this.iOperatePoint].point;return this.OpenMyBuy(n.sSellName,n.iRid,n.sName),this.iSelectCount=0,!0}if(s.default.bInRect(e,i,this.x1,this.y1,this.x2-this.x1,this.y2-this.y1))return!0}else switch(this.sls[this.iOperatePoint].type){case 1:if(this.btn_operate[0].ProcTouch(t,e,i)){if(this.btn_operate[0].bCheck()){this.sls[this.iOperatePoint].point;p.default.bNoTeam()&&l.default.gi().s_TeamOperate(0,0,0),this.Clear()}return!0}if(this.btn_operate[1].ProcTouch(t,e,i))return this.btn_operate[1].bCheck()&&(p.default.bInTeam()?h.default.easymsg.AddMessage("队伍中不能摆摊"):_.default.gi().bSelling?_.default.gi().bShow=!0:l.default.gi().s_StartSell(0,0,0,""),this.Clear()),!0;break;case 2:case 4:if(this.btn_operate[0].ProcTouch(t,e,i)){if(this.btn_operate[0].bCheck()){n=this.sls[this.iOperatePoint].point,Gameing.gameing.me;p.default.bTeamLeader()?l.default.gi().s_TeamOperate(6,n.iRid,0):p.default.bNoTeam()&&1==n.iIsLeader?l.default.gi().s_TeamOperate(3,n.iRid,0):p.default.bNoTeam(),this.Clear()}return!0}if(this.btn_operate[1].ProcTouch(t,e,i)){if(this.btn_operate[1].bCheck()){n=this.sls[this.iOperatePoint].point;l.default.gi().s_FriendOperate(0,n.iRid,0),this.Clear()}return!0}if(this.btn_operate[2].ProcTouch(t,e,i)){if(this.btn_operate[2].bCheck()){n=this.sls[this.iOperatePoint].point;d.default.OpenChat(n.iRid,n.sName,2*n.iRace+n.iSex),this.Clear()}return!0}if(this.btn_operate[3].ProcTouch(t,e,i)){if(this.btn_operate[3].bCheck()){if(c.default.me.bHaveLock&&c.default.me.bLocked)return h.default.easymsg.AddMessage("未解锁不能给予"),!0;if(_.default.gi().bSelling)return h.default.easymsg.AddMessage("摆摊中不能给予"),!0;n=this.sls[this.iOperatePoint].point;m.default.GiveTo(n.iRid,n.sName),this.Clear()}return!0}if(this.btn_operate[4].ProcTouch(t,e,i)){if(this.btn_operate[4].bCheck()){n=this.sls[this.iOperatePoint].point;l.default.gi().s_PK(n.iRid),this.Clear()}return!0}if(this.btn_operate[5].ProcTouch(t,e,i)){if(this.btn_operate[5].bCheck()){n=this.sls[this.iOperatePoint].point;l.default.gi().s_WatchOn(0,n.iRid,0,""),this.Clear()}return!0}if(this.btn_operate[6].ProcTouch(t,e,i)){if(this.btn_operate[6].bCheck()){if(c.default.me.bHaveLock&&c.default.me.bLocked)return h.default.easymsg.AddMessage("未解锁不能交易"),!0;n=this.sls[this.iOperatePoint].point;l.default.gi().s_Trade(0,n.iRid,0,0,0,0,0,0,0,0,0),this.Clear()}return!0}}return!1}}]),NearBy}();i.default=D,D.MAXSELECTCOUNT=15},{"../../../config/GmConfig":5,"../../../config/XDefine":7,"../../../engine/control/XButton":14,"../../../engine/graphics/M3DFast":28,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/GmProtocol":66,"../../../engtst/mgm/frame/DrawMode":72,"../../../engtst/mgm/frame/message/EasyMessage":86,"../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../engtst/mgm/gameing/me/GmMe":211,"../../../engtst/mgm/gameing/me/goods/GiveGoods":216,"../../../engtst/mgm/gameing/me/shop/MyBuy":257,"../../../engtst/mgm/gameing/me/shop/MySell":259,"../../../engtst/mgm/gameing/me/team/MyTeam":266}],93:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/SortAnima")),s=_interopRequireDefault(t("../../../config/XDefine")),r=_interopRequireDefault(t("../../../map/DrawBuffer")),o=_interopRequireDefault(t("../../../map/MapManager")),u=_interopRequireDefault(t("../../../engine/graphics/AnimaAction")),l=_interopRequireDefault(t("../../../engine/graphics/M3DFast")),f=_interopRequireDefault(t("../../../engtst/mgm/FireworksEffect")),h=_interopRequireDefault(t("../../../engtst/mgm/GmPlay")),d=_interopRequireDefault(t("../../../engtst/mgm/frame/format/FormatString")),c=_interopRequireDefault(t("../../../engtst/mgm/gameing/fast/SystemOperate")),m=_interopRequireDefault(t("../../../engtst/mgm/gameing/help/JQMode")),g=_interopRequireDefault(t("../../../engtst/mgm/gameing/me/GmMe")),_=(_interopRequireDefault(t("../../../engtst/mgm/gameing/me/goods/MyGoods")),_interopRequireDefault(t("../../../engtst/mgm/gameing/me/pet/MyPets")),_interopRequireDefault(t("../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("../../../engtst/mgm/gameing/me/shop/MySell")),_interopRequireDefault(t("../../../engtst/mgm/gameing/me/team/MyTeam")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(){function NearRole(){var t,e;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NearRole),this.MAXMARK=8,this.aa_body=new u.default,this.aa_weapon=new u.default,this.aa_mounts=new u.default,this.iSpeed=8,this.bUseing=!1,this.iPopoDelay=0,this.iWeapTid=-1,this.iDWeapTid=-1,this.iMountsTid=-1,this.iDMountsTid=-1,this.iChangeType=0,this.iDChangeType=0,this.bsc=!0,this.bfc8=!1,this.bfc6=!1,this.sStat="站立",this.sFace8="左",this.aa_team=new u.default,h.default.xani_ui.InitAnimaWithName("队伍图标",this.aa_team),this.aa_fighting=new u.default,h.default.xani_ui.InitAnimaWithName("战斗中头顶",this.aa_fighting),this.sTitle="",this.iFollowPid=0,this.iFollowTid=1e4,this.aa_follow=new u.default,this.iMarks=new Array(this.MAXMARK),t=0;t<this.MAXMARK;t++)this.iMarks[t]=new Int32Array(2);for(this.aa_mts=new Array(6),this.aa_bds=new Array(6),this.iColor=new Int32Array(6),this.aa_cls=new Array(6),t=0;t<6;t++)for(this.aa_mts[t]=new u.default,this.aa_bds[t]=new u.default,this.aa_cls[t]=new Array(6),this.iColor[t]=0,e=0;e<6;e++)this.aa_cls[t][e]=new u.default;this.iFace6=-1}return a(NearRole,[{key:"SetMarks",value:function(){var t;for(t=0;t<8;t++)this.iMarks[t][0]=this.iX,this.iMarks[t][1]=this.iY}},{key:"Go",value:function(){var t;if(this.iX==this.iDx&&this.iY==this.iDy)return this.IsStat("跑步")&&this.ChangeStat("站立"),this.iDFaceTo!=this.iFaceTo&&(this.bfc8=!0,this.bfc4=!0),void(this.iFaceTo=this.iDFaceTo);var e=parseInt(s.default.llength(this.iX,this.iY,this.iDx,this.iDy)/this.iSpeed);if(e<=0){for(t=this.MAXMARK-1;t>0;t--)this.iMarks[t][0]=this.iMarks[t-1][0],this.iMarks[t][1]=this.iMarks[t-1][1];return this.iMarks[0][0]=this.iX,this.iMarks[0][1]=this.iY,this.iX=this.iDx,this.iY=this.iDy,this.iDFaceTo!=this.iFaceTo&&(this.bfc8=!0,this.bfc4=!0),void(this.iFaceTo=this.iDFaceTo)}for(this.FaceTo(),t=this.MAXMARK-1;t>0;t--)this.iMarks[t][0]=this.iMarks[t-1][0],this.iMarks[t][1]=this.iMarks[t-1][1];this.iMarks[0][0]=this.iX,this.iMarks[0][1]=this.iY,this.iX=this.iX+(this.iDx-this.iX)/e,this.iY=this.iY+(this.iDy-this.iY)/e,this.IsStat("站立")&&this.ChangeStat("跑步")}},{key:"FaceTo",value:function(){var t,e,i,a;t=360-s.default.GetAngleXY(this.iDx,this.iDy,this.iX,this.iY),(i=0<=(t%=360)&&t<=90?0:90<=t&&t<=180?3:180<=t&&t<=270?2:1)!=parseInt(this.iFaceTo/10)&&(this.bfc4=!0),e=this.iFace6,this.iFace6=0<=t&&t<=30?0:30<t&&t<=90?5:90<t&&t<=150?4:150<t&&t<=210?3:210<t&&t<=270?2:270<t&&t<=330?1:0,e!=this.iFace6&&(this.bfc6=!0),a=this.sFace8,22<t&&t<68?(this.iFaceTo=1,this.sFace8="右上"):67<t&&t<113?(this.iFaceTo=2,this.sFace8="上"):112<t&&t<158?(this.iFaceTo=3,this.sFace8="左上"):157<t&&t<203?(this.iFaceTo=4,this.sFace8="左"):202<t&&t<248?(this.iFaceTo=5,this.sFace8="左下"):247<t&&t<293?(this.iFaceTo=6,this.sFace8="下"):292<t&&t<338?(this.iFaceTo=7,this.sFace8="右下"):(this.iFaceTo=0,this.sFace8="右"),this.iFaceTo=10*i+this.iFaceTo,a!=this.sFace8&&(this.bfc8=!0)}},{key:"bFaceChanged6",value:function(){return!!this.bfc6&&(this.bfc6=!1,!0)}},{key:"bFaceChanged4",value:function(){if(this.bfc4){switch(parseInt(this.iFaceTo/10)){case 0:this.sFace4="右";break;case 1:this.sFace4="右下";break;case 2:this.sFace4="左下";break;case 3:this.sFace4="左"}return this.bfc4=!1,!0}return!1}},{key:"bFaceChanged8",value:function(){if(this.bfc8){switch(this.iFaceTo%10){case 0:this.sFace8="右";break;case 1:this.sFace8="右上";break;case 2:this.sFace8="上";break;case 3:this.sFace8="左上";break;case 4:this.sFace8="左";break;case 5:this.sFace8="左下";break;case 6:this.sFace8="下";break;case 7:this.sFace8="右下"}return this.bfc8=!1,!0}return!1}},{key:"bStatChanged",value:function(){return!!this.bsc&&(this.bsc=!1,!0)}},{key:"ChangeStat",value:function(t){this.sStat!=t&&(this.sStat=t,this.bsc=!0)}},{key:"IsStat",value:function(t){return this.sStat==t}},{key:"sSex",value:function(){return 0==this.iSex?"女":"男"}},{key:"sRace",value:function(){return 0==this.iRace?"人":1==this.iRace?"魔":"仙"}},{key:"DrawMounts",value:function(t,e,i,a,s){var o,u=0,l=2*this.iRace+this.iSex,f=g.default.face_sti(i),d=g.default.stat_sti(a),m=parseInt(this.iMountsTid/100)-1,_=this.iMountsTid%100,p=_-1,b=0;s&&(this.iOffY=0);var D=0;for(2==parseInt(this.iMountsTid/100)&&(D=12),o=0;o<n.default._ANIMASORT_MOUNT[m][p][d][f].length;o++)"左翅膀"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&h.default.xani_nmounts[m][p].InitAnimaWithName(_+"_"+a+"_"+i+"_左翅膀",this.aa_mts[2]),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_mts[2]),this.aa_mts[2].NextFrame(),b++):"右翅膀"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&h.default.xani_nmounts[m][p].InitAnimaWithName(_+"_"+a+"_"+i+"_右翅膀",this.aa_mts[3]),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_mts[3]),this.aa_mts[3].NextFrame(),b++):"前"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&h.default.xani_nmounts[m][p].InitAnimaWithName(_+"_"+a+"_"+i+"_前",this.aa_mts[0]),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_mts[0]),this.aa_mts[0].NextFrame(),b++):"后"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&h.default.xani_nmounts[m][p].InitAnimaWithName(_+"_"+a+"_"+i+"_后",this.aa_mts[1]),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_mts[1]),this.aa_mts[1].NextFrame(),b++):"身体"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&h.default.xani_nmounts[m][p].InitAnimaWithName(_+"_"+a+"_"+i+"_身体",this.aa_mts[4]),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_mts[4]),this.aa_mts[4].NextFrame(),b++):"飘带"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&h.default.xani_nmounts[m][p].InitAnimaWithName(_+"_"+a+"_"+i+"_飘带",this.aa_mts[5]),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_mts[5]),this.aa_mts[5].NextFrame(),b++):"人前"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&(h.default.xani_newrole[l].InitAnimaWithName("骑"+a+"_"+i+"_前",this.aa_bds[0]),this.ChangeColor(l,"骑"+a+"_"+i+"_前",0),u=this.aa_bds[0].pani.iAnimaY(this.aa_bds[0])-30,this.iOffY>u&&(this.iOffY=u)),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_bds[0]),this.DrawColor(l,this.aa_bds[0].iFrame,e+b,t,e+D,0),this.aa_bds[0].NextFrame(),b++):"人后"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&(h.default.xani_newrole[l].InitAnimaWithName("骑"+a+"_"+i+"_后",this.aa_bds[1]),this.ChangeColor(l,"骑"+a+"_"+i+"_后",1),u=this.aa_bds[1].pani.iAnimaY(this.aa_bds[1])-30,this.iOffY>u&&(this.iOffY=u)),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_bds[1]),this.DrawColor(l,this.aa_bds[1].iFrame,e+b,t,e+D,1),this.aa_bds[1].NextFrame(),b++):"人左"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&(h.default.xani_newrole[l].InitAnimaWithName("骑"+a+"_"+i+"_左",this.aa_bds[2]),this.ChangeColor(l,"骑"+a+"_"+i+"_左",2),u=this.aa_bds[2].pani.iAnimaY(this.aa_bds[2])-30,this.iOffY>u&&(this.iOffY=u)),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_bds[2]),this.DrawColor(l,this.aa_bds[2].iFrame,e+b,t,e+D,2),this.aa_bds[2].NextFrame(),b++):"人右"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&(h.default.xani_newrole[l].InitAnimaWithName("骑"+a+"_"+i+"_右",this.aa_bds[3]),this.ChangeColor(l,"骑"+a+"_"+i+"_右",3),u=this.aa_bds[3].pani.iAnimaY(this.aa_bds[3])-30,this.iOffY>u&&(this.iOffY=u)),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_bds[3]),this.DrawColor(l,this.aa_bds[3].iFrame,e+b,t,e+D,3),this.aa_bds[3].NextFrame(),b++):"人"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]?(s&&(h.default.xani_newrole[l].InitAnimaWithName("骑"+a+"_"+i,this.aa_bds[4]),this.ChangeColor(l,"骑"+a+"_"+i,4),u=this.aa_bds[4].pani.iAnimaY(this.aa_bds[4])-30,this.iOffY>u&&(this.iOffY=u)),r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_bds[4]),this.DrawColor(l,this.aa_bds[4].iFrame,e+b,t,e+D,4),this.aa_bds[4].NextFrame(),b++):"武器"==n.default._ANIMASORT_MOUNT[m][p][d][f][o]&&(s&&(this.iWeapTid=this.iDWeapTid,this.iWeapTid>=0&&h.default.xani_weap[l][n.default.WeapFlag(this.iWeapTid)].InitAnimaWithName("骑"+a+"_"+i,this.aa_weapon)),this.iWeapTid>=0&&(c.default.bShowWeapon&&r.default.gi().DrawAnima_aa(e+b,null,t,e+D,this.aa_weapon),this.aa_weapon.NextFrame()),b++)}},{key:"ChangeColor",value:function(t,e,i){var a;if(c.default.bShowColor)for(a=0;a<n.default._CHANGECOLOR[t].length;a++)this.iColor[a]<=0||this.iColor[a]>=6||h.default.xani_color[t][this.iColor[a]-1].InitAnimaWithName(n.default._CHANGECOLOR[t][a]+"_"+e,this.aa_cls[i][a])}},{key:"DrawColor",value:function(t,e,i,a,s,o){var u;if(c.default.bShowColor)for(u=0;u<n.default._CHANGECOLOR[t].length;u++)this.iColor[u]<=0||this.iColor[u]>=6||(this.aa_cls[o][u].iFrame=e,r.default.gi().DrawAnima_aa(i,null,a,s,this.aa_cls[o][u]))}},{key:"DrawRole",value:function(t,e,i,a,s){var o,u=2*this.iRace+this.iSex,l=g.default.face_sti(i),f=g.default.stat_sti(a)+0,d=0;for(o=0;o<n.default._ANIMASORT[u][f][l].length;o++)"人物"==n.default._ANIMASORT[u][f][l][o]?(s&&(h.default.xani_newrole[u].InitAnimaWithName(a+"_"+i,this.aa_body),this.ChangeColor(u,a+"_"+i,0),this.iOffY=this.aa_body.pani.iAnimaY(this.aa_body)-30),r.default.gi().DrawAnima_aa(e+d,null,t,e,this.aa_body),this.DrawColor(u,this.aa_body.iFrame,e+d,t,e,0),this.aa_body.NextFrame(),d++):"武器"==n.default._ANIMASORT[u][f][l][o]&&(s&&(this.iWeapTid=this.iDWeapTid,this.iWeapTid>=0&&h.default.xani_weap[u][n.default.WeapFlag(this.iWeapTid)].InitAnimaWithName(a+"_"+i,this.aa_weapon)),this.iWeapTid>=0&&(c.default.bShowWeapon&&r.default.gi().DrawAnima_aa(e+d,null,t,e,this.aa_weapon),this.aa_weapon.NextFrame()),d++)}},{key:"Draw",value:function(){if(!m.default.jq.bJQLock()){var t,e=!1;if(this.iDMountsTid!=this.iMountsTid&&(e=!0),this.iMountsTid=this.iDMountsTid,this.iDChangeType!=this.iChangeType&&(e=!0),this.iChangeType=this.iDChangeType,this.iChangeType>0?(e=this.bStatChanged()|e,(e=this.bFaceChanged6()|e)&&(0==this.iFace6?this.sFace6="右":1==this.iFace6?this.sFace6="右下":2==this.iFace6?this.sFace6="左下":3==this.iFace6?this.sFace6="左":4==this.iFace6?this.sFace6="左上":5==this.iFace6&&(this.sFace6="右上"),this.iChangeType>=1e4?h.default.xani_pets[this.iChangeType%1e4].InitAnimaWithName("变异_"+this.sStat+"_"+this.sFace6,this.aa_body):h.default.xani_pets[this.iChangeType%1e4].InitAnimaWithName(this.sStat+"_"+this.sFace6,this.aa_body),this.iOffY=this.aa_body.pani.iAnimaY(this.aa_body)-30)):this.iMountsTid>0&&0==this.iIsSelling&&c.default.bShowMount?(e=this.bWeapChanged()|e,e=this.bFaceChanged8()|e,e=this.bStatChanged()|e):(e=this.bStatChanged()|e,e=this.bFaceChanged8()|e,e=this.bWeapChanged()|e),c.default.bShowRole&&this.iFollowPid>0&&c.default.bShowFollow){var i=this.iMarks[5][0],a=this.iMarks[5][1],n="";n=0==parseInt(this.iFollowTid/1e3)?"":"变异_",i>this.iX?n+=this.sStat+"_左":n+=this.sStat+"_右",h.default.xani_pets[this.iFollowTid%1e3].InitAnimaWithName(n,this.aa_follow),this.aa_follow.SetFrame(h.default.iDelay),r.default.gi().DrawAnima_aa(o.default.gi().iOffy+a,null,o.default.gi().iOffx+i,o.default.gi().iOffy+a,this.aa_follow),f.default.DrawAura(0,o.default.gi().iOffx+i,o.default.gi().iOffy+a,r.default.gi(),o.default.gi().iOffy+a-1),r.default.gi().DrawText_2(o.default.gi().iOffy+a-1,1,o.default.gi().iOffx+i,o.default.gi().iOffy+a+30,this.sFollowName,4294946944,20,1,4278190080)}r.default.gi().BeginGroup(),(c.default.bShowName||_.default.bInTmpTeam(this.iRid))&&(this.sTitle.length>0&&c.default.bShowTitle?(r.default.gi().DrawText_2(o.default.gi().iOffy+this.iY,1,o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY+20,this.sTitle,4286628095,20,1,4278190080),r.default.gi().DrawText_2(o.default.gi().iOffy+this.iY,1,o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY+20+20,this.sName,4286644096,20,1,4278190080)):r.default.gi().DrawText_2(o.default.gi().iOffy+this.iY,1,o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY+30,this.sName,4286644096,20,1,4278190080)),(c.default.bShowRole||_.default.bInTmpTeam(this.iRid))&&(f.default.DrawAura(this.iAura,o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY,r.default.gi(),o.default.gi().iOffy+this.iY),this.iChangeType>0?(r.default.gi().DrawAnima_aa(o.default.gi().iOffy+this.iY,this.aa_body.xani,o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY,this.aa_body),this.aa_body.NextFrame()):this.iMountsTid>0&&0==this.iIsSelling&&c.default.bShowMount?this.DrawMounts(o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY,this.sFace8,this.sStat,e):this.DrawRole(o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY,this.sFace8,this.sStat,e),1==this.iIsLeader&&(r.default.gi().DrawAnima_aa(o.default.gi().iOffy+this.iY,h.default.xani_ui,o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY+this.iOffY,this.aa_team),h.default.xani_ui.NextFrame(this.aa_team)),1==this.iFighting&&(r.default.gi().DrawAnima_aa(o.default.gi().iOffy+this.iY,h.default.xani_ui,o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY+this.iOffY,this.aa_fighting),h.default.xani_ui.NextFrame(this.aa_fighting)),this.DrawPopo(o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY)),1==this.iIsSelling&&c.default.bShowSell&&(this.iSellWidth=l.default.gi().GetTextWidth(this.sSellName,25),(t=(this.iSellWidth-60)/30+2)<2?t=2:t>6&&(t=6),h.default.xani_ui2.InitAnimaWithName("普通摊位",h.default.aaa),h.default.aaa.iFrame=0,r.default.gi().DrawAnimaEx(o.default.gi().iOffy+this.iY-2,o.default.gi().iOffx+this.iX-this.iSellWidth/2-9,o.default.gi().iOffy+this.iY-140+5,h.default.aaa,101,1,1,0,0,0),h.default.aaa.iFrame=1,r.default.gi().DrawAnimaEx(o.default.gi().iOffy+this.iY-2,o.default.gi().iOffx+this.iX-this.iSellWidth/2,o.default.gi().iOffy+this.iY-140+5,h.default.aaa,101,1*this.iSellWidth/10,1,0,0,0),h.default.aaa.iFrame=2,r.default.gi().DrawAnimaEx(o.default.gi().iOffy+this.iY-2,o.default.gi().iOffx+this.iX+this.iSellWidth/2,o.default.gi().iOffy+this.iY-140+5,h.default.aaa,101,1,1,0,0,0),r.default.gi().DrawText(o.default.gi().iOffy+this.iY-1,1,o.default.gi().iOffx+this.iX,o.default.gi().iOffy+this.iY-120,this.sSellName,4282433791,25)),r.default.gi().EndGroup()}}},{key:"DrawPopo",value:function(t,e){if(!(this.iPopoDelay<=0)){this.iPopoDelay--,d.default.gi().Format(this.sPopoString,151,25),t-=d.default.gi().iW/2;var i=e+this.iOffY+40-d.default.gi().iH;r.default.gi().FillRect(e,t,i,t+d.default.gi().iW,i+d.default.gi().iH,1342177280),d.default.gi().DrawToBuffer(e+1,t,i)}}},{key:"bWeapChanged",value:function(){return!!this.bwc&&(this.bwc=!1,!0)}}]),NearRole}();i.default=p},{"../../../config/SortAnima":6,"../../../config/XDefine":7,"../../../engine/graphics/AnimaAction":25,"../../../engine/graphics/M3DFast":28,"../../../engtst/mgm/FireworksEffect":64,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/frame/format/FormatString":81,"../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../engtst/mgm/gameing/help/JQMode":187,"../../../engtst/mgm/gameing/me/GmMe":211,"../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../engtst/mgm/gameing/me/pet/Pets":247,"../../../engtst/mgm/gameing/me/shop/MySell":259,"../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../map/DrawBuffer":283,"../../../map/MapManager":286}],94:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=(_interopRequireDefault(t("../../../engine/PackageTools")),_interopRequireDefault(t("../../../engine/graphics/M3DFast"))),r=_interopRequireDefault(t("../../../engtst/mgm/GmPlay")),o=_interopRequireDefault(t("../../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(){function ProgressBar(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ProgressBar),this.iW=200,this.iH=24,this.iX=(n.default.SCRW-this.iW)/2,this.iY=2*(n.default.SCRH-this.iH)/3,this.bShow=!1}return a(ProgressBar,[{key:"InitProgress",value:function(t){var e=t.GetNextInt();e<=0?this.bShow=!1:(this.iStartMillis=r.default.iNowMillis,this.iLastMillis=r.default.iNowMillis+e,this.bShow=!0,this.sDetail=t.GetNextString(),this.sCmd=t.GetNextString())}},{key:"Draw",value:function(){if(this.bShow){var t=1*(r.default.iNowMillis-this.iStartMillis)/(this.iLastMillis-this.iStartMillis);o.default.new_framepc(this.iX,this.iY,this.iW,this.iH),o.default.frame_type1("埋宝地进度条8_18",this.iX+3,this.iY+3,t*(this.iW-6),8);var e=r.default.iDelay/10,i="";e%3==0&&(i="."),e%3==1&&(i=".."),e%3==2&&(i="..."),s.default.gi().DrawTextEx(this.iX,this.iY-30,this.sDetail+i,4294967040,30,101,1,1,0,0,0),r.default.iNowMillis>=this.iLastMillis&&(this.bShow=!1)}}},{key:"ProcTouch",value:function(t,e,i,a){return!1}}]),ProgressBar}();i.default=u,u.ppb=null,u.gi=function(){return null==u.ppb&&(u.ppb=new u),u.ppb}},{"../../../config/GmConfig":5,"../../../engine/PackageTools":9,"../../../engine/graphics/M3DFast":28,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/frame/DrawMode":72}],95:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("../../../../engine/BaseClass"),r=(a=s)&&a.__esModule?a:{default:a};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function _RANKLIST(){_classCallCheck(this,_RANKLIST)},u=function(t){function PeakFight(t){_classCallCheck(this,PeakFight);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PeakFight.__proto__||Object.getPrototypeOf(PeakFight)).call(this));e.campscore=new Int32Array(3),e.ranklist=new o(6);for(var i=0;i<6;i++)e.ranklist[i]=new o;for(e.iW=950,e.iH=570,e.iX=(GmConfig.SCRW-e.iW)/2,e.iY=(GmConfig.SCRH-e.iH)/2,e.btn_close=new XButtonEx2(GmPlay.xani_nui2),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.sAttack=new Array(2),e.btn_attack=new Array(2),i=0;i<2;i++)e.btn_attack[i]=new XButtonEx2(GmPlay.xani_button),e.btn_attack[i].InitButton("巅峰决战进攻173_94");return e.list_rank=new UIList(0,4,490,290),e.list_rank.SetTitle(0,"排名",80,!1),e.list_rank.SetTitle(1,"玩家名称",160,!1),e.list_rank.SetTitle(2,"门派",100,!1),e.list_rank.SetTitle(3,"个人积分",150,!1),e.iCountDown=[[0,0,0],[0,0,0]],e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PeakFight,r.default),n(PeakFight,[{key:"_open",value:function(t){var e;for(this.campscore[0]=t.GetNextInt(),this.campscore[1]=t.GetNextInt(),this.campscore[2]=t.GetNextInt(),e=0;e<5;e++)this.ranklist[e].iRank=e+1,this.ranklist[e].sName=t.GetNextString(),this.ranklist[e].iSchoolId=t.GetNextByte(),this.ranklist[e].iScore=t.GetNextInt();this.ranklist[5].iRank=t.GetNextInt()+1,this.ranklist[5].sName=GmMe.me.sName,this.ranklist[5].iSchoolId=GmMe.me.rbs.iSchoolId,this.ranklist[5].iScore=t.GetNextInt(),this.iMyCamp=t.GetNextInt(),this.iCountDown[0][0]=t.GetNextInt(),this.iCountDown[0][1]=t.GetNextInt(),this.iCountDown[0][2]=XDefine.get_ms(),this.iCountDown[1][0]=t.GetNextInt(),this.iCountDown[1][1]=t.GetNextInt(),this.iCountDown[1][2]=XDefine.get_ms()}},{key:"Draw",value:function(){var t,e,i,a;for(DrawMode.frame_type4("主背景框a150_150",this.iX,this.iY,this.iW,this.iH,150,150),DrawMode.frame_type4("子背景框b35_35",this.iX+30,this.iY+30,this.iW-60,this.iH-60,35,35),this.btn_close.Draw(),t=0;t<3;t++)GmPlay.xani_frame.DrawAnima(this.iX+100+260*t,this.iY+50,"巅峰决战国家框172_84",0),GmPlay.xani_icon.DrawAnima(this.iX+100+260*t,this.iY+50,"巅峰决战国"+(t+1),0),M3DFast.gi().DrawTextEx(this.iX+100+260*t+115,this.iY+50+42,""+this.campscore[t],4294967295,20,101,1,1,0,-2,-2);for(this.list_rank.BeginDraw(this.iX+100,this.iY+150),t=0;t<6;t++)this.ranklist[t].iScore>0&&(this.list_rank.DrawUnit(0,t,""+this.ranklist[t].iRank),this.list_rank.DrawUnit(1,t,this.ranklist[t].sName),this.list_rank.DrawUnit(2,t,GameData.sSchools[this.ranklist[t].iSchoolId]),this.list_rank.DrawUnit(3,t,""+this.ranklist[t].iScore));switch(this.list_rank.FinishDraw(),this.iMyCamp){case 0:this.sAttack[0]="伐楚",this.sAttack[1]="伐齐";break;case 1:this.sAttack[0]="伐秦",this.sAttack[1]="伐齐";break;case 2:this.sAttack[0]="伐秦",this.sAttack[1]="伐楚"}for(t=0;t<2;t++)this.btn_attack[t].Move(this.iX+620,this.iY+180+130*t,173,94),this.btn_attack[t].Draw(),GmPlay.xani_icon.DrawAnima(this.btn_attack[t].iX+10,this.btn_attack[t].iY+8,"巅峰决战旗",0),M3DFast.gi().DrawText_2(this.btn_attack[t].iX+100,this.btn_attack[t].iY+47,this.sAttack[t],4294967040,30,101,1,1,0,-2,-2,4,4278199373);DrawMode.frame_type1("文本框a20_40",this.iX+this.iW/2-325,this.iY+this.iH-90,650,20),DrawMode.frame_type1("活跃进度外框a20_24",this.iX+50,this.iY+this.iH-100,850,20),e=this.iY+this.iH-100+2,(a=1e3*this.iCountDown[0][1]-(XDefine.get_ms()-this.iCountDown[0][2]))<0&&(a=0),M3DFast.gi().DrawTextEx(this.iX+this.iW/2-60,this.iY+this.iH-80+4,"进攻冷却倒计时："+a/1e3+"秒",4294967040,24,101,1,1,0,-3,0),i=425*a/this.iCountDown[0][0]/1e3,t=this.iX+50+2+425-i,DrawMode.frame_type1("活跃进度内框a10_18",t,e,i,10),t=this.iX+50+425+2,(a=1e3*this.iCountDown[1][1]-(XDefine.get_ms()-this.iCountDown[1][2]))<0&&(a=0),M3DFast.gi().DrawTextEx(this.iX+this.iW/2+60,this.iY+this.iH-80+4,"防守冷却倒计时："+a/1e3+"秒",4294967040,24,101,1,1,0,-1,0),i=425*a/this.iCountDown[1][0]/1e3,DrawMode.frame_type1("活跃进度内框a10_18",t,e,i,10),GmPlay.xani_icon.DrawAnima(this.iX+this.iW/2-63,this.iY+this.iH-125,"巅峰决战狮子头",0)}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&XStat.gi().PopStat(1),!0;for(a=0;a<2;a++)this.btn_attack[a].ProcTouch(t,e,i)&&this.btn_attack[a].bCheck()&&GmProtocol.gi().s_SevConfirm("巅峰之战进攻"+a);return!1}}]),PeakFight}();i.default=u,u.Open=function(t){var e=XStat.gi().FindStat(XStat.GS_PEAKFIGHT);null==e&&(e=XStat.gi().PushStat(XStat.GS_PEAKFIGHT)),e._open(t)}},{"../../../../engine/BaseClass":8}],96:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function AQDoing(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,AQDoing);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(AQDoing.__proto__||Object.getPrototypeOf(AQDoing)).call(this));for(i.sAnswers=new Array(4),i.iW=750,i.iH=540,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.btn_sel=new Array(4),e=0;e<4;e++)i.btn_sel[e]=new o.default(l.default.xani_nui3),i.btn_sel[e].InitButton("分类标签按钮");return i.btn_exit=new o.default(l.default.xani_nui3),i.btn_exit.InitButton("分类标签按钮"),i.btn_exit.sName="退出答题",i.btn_exit.Move(i.iX+i.iW-40-190,i.iY+i.iH-40-40,190,40),i.btn_get=new o.default(l.default.xani_ngoods),i.btn_get.InitButton("礼包1"),i.bWin=!1,i._bigletter=["A.","B.","C.","D."],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(AQDoing,r.default),a(AQDoing,[{key:"Draw",value:function(){var t,e,i;if(c.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),e=this.iX+30,i=this.iY+30,c.default.new_framein(e,i,200,200),u.default.gi().DrawTextEx(e+20,i+20,"答对题数",4278206039,30,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+50,i+60,this.iRightCount+"/"+this.iReplyCount,4278206039,30,101,1,1,0,0,0),e+=220,c.default.new_framein(e,i,this.iW-200-30-30-20,200),this.bWin||(u.default.gi().DrawTextEx(e+20,i+20,"题目"+n.default.sBigNum[this.iReplyCount+1],4278206039,30,101,1,1,0,0,0),m.default.gi().FormatEx("#c003e57"+this.sQuestion,this.iW-200-30-30-20,30,0,0,35),m.default.gi().Draw(e+20,i+60),(t=parseInt((this.iTm-l.default.iNowMillis)/1e3))<0&&(t=0),u.default.gi().DrawTextEx(this.iX+this.iW-30-20,i+200-20,"倒计时："+t+"s",4278206039,30,101,1,1,0,-3,-3)),e=this.iX+30,i+=220,c.default.new_framein(e,i,200,this.iH-200-30-30-20),u.default.gi().DrawTextEx(e+20,i+20,"活动奖励",4278206039,30,101,1,1,0,0,0),this.bWin&&(this.btn_get.Move(e+100-40,i+100,80,80),this.btn_get.Draw()),e+=220,c.default.new_framein(e,i,this.iW-200-30-30-20,this.iH-200-30-30-20-40-40),!this.bWin)for(t=0;t<this.iACount;t++)this.btn_sel[t].Move(e+30+t%2*220,i+30+80*parseInt(t/2),190,40),this.btn_sel[t].sName=this._bigletter[t]+this.sAnswers[t],this.btn_sel[t].Draw();this.btn_exit.Draw(),d.default.end(d.default.CONFIRM_EXITAQ)&&d.default.bConfirm&&(f.default.gi().s_AfternoooQuestion(3,0,0),h.default.gi().PopStat(1))}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<this.iACount;a++)this.btn_sel[a].ProcTouch(t,e,i)&&this.btn_sel[a].bCheck()&&f.default.gi().s_AfternoooQuestion(1,this.iCheck,a);return this.btn_exit.ProcTouch(t,e,i)&&this.btn_exit.bCheck()&&(this.bWin?d.default.start(d.default.CONFIRM_EXITAQ,"你已答满15道题，可以点击左侧图标领取额外奖励，退出后奖励无法领取"):d.default.start(d.default.CONFIRM_EXITAQ,"离开活动界面后计算为活动失败，是否确定退出活动？")),this.bWin&&this.btn_get.ProcTouch(t,e,i)&&this.btn_get.ProcTouch(t,e,i)&&(f.default.gi().s_AfternoooQuestion(2,0,0),h.default.gi().PopStat(1)),!1}}]),AQDoing}();i.default=g,g.Open=function(t){var e,i=t.GetNextInt();if(1==i){var a;for(h.default.gi().iXStat!=h.default.GS_AQDOING&&h.default.gi().PushStat(h.default.GS_AQDOING),(a=h.default.gi().LastStat(0)).sQuestion=t.GetNextString(),a.iACount=t.GetNextInt(),e=0;e<a.iACount;e++)a.sAnswers[e]=t.GetNextString();a.iCheck=t.GetNextInt(),a.iReplyCount=t.GetNextInt(),a.iRightCount=t.GetNextInt(),a.iTm=l.default.iNowMillis+2e4}(2==i&&h.default.gi().iXStat==h.default.GS_AQDOING&&h.default.gi().PopStat(1),3==i)&&(h.default.gi().iXStat!=h.default.GS_AQDOING&&h.default.gi().PushStat(h.default.GS_AQDOING),(a=h.default.gi().LastStat(0)).iReplyCount=t.GetNextInt(),a.iRightCount=t.GetNextInt(),a.bWin=!0)}},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81}],97:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),o=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),u=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),c=(_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage"))),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/fight/XFight")),g=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/MyTeam")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function AQStart(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,AQStart);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(AQStart.__proto__||Object.getPrototypeOf(AQStart)).call(this));return e.btn_start=new r.default(u.default.xani_nui2),e.btn_start.InitButton("按钮1"),e.btn_start.sName="立刻参加",e.btn_later=new r.default(u.default.xani_nui2),e.btn_later.InitButton("按钮1"),e.btn_later.sName="稍后再去",e.iW=800,e.iH=500,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(AQStart,s.default),a(AQStart,[{key:"Draw",value:function(){h.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),o.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+30,"趣味答题",4278206039,40,101,1,1,0,-2,0),o.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+30+50,"答题活动已经开启，少侠是否参加？",4278206039,30,101,1,1,0,-2,0),o.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+30+50+40,"(活动时间12:00:00~13:00:00)",4278206039,30,101,1,1,0,-2,0),d.default.gi().FormatEx("#c003e57活动介绍：#e1，共15道题，每次答对可获得经验和储备金奖励，每题限20秒内回答#e2，累计答错3题计算为失败#e3，完成答题（至少答对12个），可参与额外抽奖#e3，答题途中离开答题页面视为放弃活动，计算为失败",this.iW-60,30,0,0,35),d.default.gi().Draw(this.iX+30,this.iY+30+50+40+40),this.btn_start.Move(this.iX+40,this.iY+this.iH-40-53,161,53),this.btn_start.Draw(),this.btn_later.Move(this.iX+this.iW-40-161,this.iY+this.iH-40-53,161,53),this.btn_later.Draw()}},{key:"ProcTouch",value:function(t,e,i){return this.btn_start.ProcTouch(t,e,i)?(this.btn_start.bCheck()&&(m.default.bFighting?c.default.fm.Open("战斗中不能开始答题活动，请在战斗结束后，点击答题图标重新参与"):g.default.bInTeam()?c.default.fm.Open("队伍中不能开始答题活动，请离开队伍后，点击答题图标重新参与"):(AQStart.bShow=!1,l.default.gi().s_AfternoooQuestion(0,0,0)),f.default.gi().PopStat(1)),!0):!!this.btn_later.ProcTouch(t,e,i)&&(this.btn_later.bCheck()&&f.default.gi().PopStat(1),!0)}}]),AQStart}();i.default=_,_.bShow=!1,_.Open=function(){f.default.gi().PushStat(f.default.GS_AQSTART)}},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/gameing/fight/XFight":130,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/team/MyTeam":266}],98:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),u=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),l=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(){function SelectColor(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SelectColor)}return a(SelectColor,[{key:"tostr",value:function(){for(var t=parseInt(this.iColor,16);t.length<6;)t="0"+t;return t.length>6&&t.substring(t.length-6,t.length),t}},{key:"Init",value:function(t){t>=0&&(this.iColor=t,this.iR=t>>16&255,this.iG=t>>8&255,this.iB=255&t),this.iSelectStat=0}},{key:"SelectColor",value:function(){this.iR=255,this.iG=255,this.iB=255,this.iColor=4294967295}},{key:"Draw",value:function(){var t,e,i,a;null==this.btn_ok&&(this.btn_ok=new r.default(u.default.xani_nui2),this.btn_ok.InitButton("按钮1_110"),this.btn_ok.sName="选择"),this.iW=436,this.iH=378,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,l.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),i=this.iX+25,a=this.iY+25,t=4278190080|this.iB,e=15,o.default.gi().FillRect_2D_ex(i,a,i+256,a+256,t,65280|t,16776960|t,16711680|t),o.default.gi().DrawCircle(i+this.iR,a+255-this.iG,16,16,4278190080),o.default.gi().DrawCircle(i+this.iR,a+255-this.iG,e,e,4294967295),o.default.gi().DrawCircle(i+this.iR,a+255-this.iG,14,14,4278190080),i+=276,t=4278190080|this.iR<<16|this.iG<<8,o.default.gi().FillRect_2D_ex(i,a,i+110,a+256,t,255|t,255|t,t),o.default.gi().DrawCircle(i+35,a+255-this.iB,16,16,4278190080),o.default.gi().DrawCircle(i+35,a+255-this.iB,e,e,4294967295),o.default.gi().DrawCircle(i+35,a+255-this.iB,14,14,4278190080),i=this.iX+25,a=this.iY+25+256+20,o.default.gi().FillRect_2D(i+80,a,i+256,a+52,4278190080|this.iColor),o.default.gi().DrawTextEx(i,a+26,"颜色：",4278206039,30,101,1,1,0,0,-2),i=this.iX+25+256+20,a=this.iY+25+256+20,this.btn_ok.Move(i,a,110,52),this.btn_ok.Draw()}},{key:"ProcTouch",value:function(t,e,i){return 3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)?this.btn_ok.ProcTouch(t,e,i)?!!this.btn_ok.bCheck()&&(this.iSelectStat=1,!0):(s.default.bInRect(e,i,this.iX+25,this.iY+25,256,256)&&(this.iR=e-(this.iX+25),this.iG=255-(i-(this.iY+25)),this.iColor=this.iR<<16|this.iG<<8|this.iB),s.default.bInRect(e,i,this.iX+25+256+20,this.iY+25,70,256)&&(this.iB=255-(i-(this.iY+25)),this.iColor=this.iR<<16|this.iG<<8|this.iB),!1):(this.iSelectStat=10,!0)}}]),SelectColor}();i.default=f,f.sc=new f},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/control/XButton":14,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72}],99:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"));_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(){function SelectFace(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SelectFace),this.aa_face=new o.default,SelectFace.iSelectPage=0,this.btn_up=null,this.btn_down=null}return a(SelectFace,[{key:"Init",value:function(){this.iSelectStat=0}}]),a(SelectFace,[{key:"Draw",value:function(){var t,e,i;for(null==this.btn_up&&(this.btn_up=new r.default(l.default.xani_button),this.btn_up.bSingleButton=!0,this.btn_up.sName="普通",this.btn_down=new r.default(l.default.xani_button),this.btn_down.bSingleButton=!0,this.btn_down.sName="会员"),this.BW=80,this.BH=80,this.WW=5,this.HH=5,this.iW=this.BW*this.WW,this.iH=this.BH*this.HH+60,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,u.default.gi().FillRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,2147483648),this.btn_up.Move(this.iX,this.iY+this.BH*this.HH,120,60),this.btn_up.Draw(),this.btn_down.Move(this.iX+120,this.iY+this.BH*this.HH,120,60),this.btn_down.Draw(),t=0;t<this.WW;t++)for(e=0;e<this.HH;e++)i=t+e*this.WW,0==SelectFace.iSelectPage&&i>=0&&i<=21&&(l.default.xani_face.InitAnimaWithName("表情"+i,this.aa_face),this.aa_face.SetFrame(l.default.iDelay),l.default.xani_face.DrawAnima_aa(this.iX+this.BW/2-l.default.xani_face.iAnimaW(this.aa_face)/2+t*this.BW,this.iY+this.BH/2-l.default.xani_face.iAnimaH(this.aa_face)/2+e*this.BH,this.aa_face)),1==SelectFace.iSelectPage&&i>=0&&i<=12&&(i+=100,l.default.xani_face.InitAnimaWithName("表情"+i,this.aa_face),this.aa_face.SetFrame(l.default.iDelay),l.default.xani_face.DrawAnima_aa(this.iX+this.BW/2-l.default.xani_face.iAnimaW(this.aa_face)/2+t*this.BW,this.iY+this.BH/2-l.default.xani_face.iAnimaH(this.aa_face)/2+e*this.BH,this.aa_face))}},{key:"ProcTouch",value:function(t,e,i){var a,n,r;if(this.btn_up.ProcTouch(t,e,i)&&this.btn_up.bCheck()&&(SelectFace.iSelectPage=0),this.btn_down.ProcTouch(t,e,i)&&this.btn_down.bCheck()&&(SelectFace.iSelectPage=1),3==t&&!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))return this.iSelectStat=10,!0;for(a=0;a<this.WW;a++)for(n=0;n<this.HH;n++)if(r=a+n*this.WW,(0==SelectFace.iSelectPage&&r>=0&&r<=21||1==SelectFace.iSelectPage&&r>=0&&r<=12)&&s.default.bInRect(e,i,this.iX+a*this.BW,this.iY+n*this.BH,this.BW,this.BH)&&(this.iSelectPoint=r+100*SelectFace.iSelectPage,3==t))return this.iSelectStat=1,!0;return!1}}]),SelectFace}();i.default=f,f.iSelectPage,f.sf=null,f.gi=function(){return null==f.sf&&(f.sf=new f),f.sf}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/control/XButton":14,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72}],100:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=(_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),_interopRequireDefault(t("../../../../engtst/mgm/XStat"))),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send")),c=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_Send")),m=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function SelectGoods(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SelectGoods);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SelectGoods.__proto__||Object.getPrototypeOf(SelectGoods)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=490,e.iH=472,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_sel=new o.default(l.default.xani_nui2),e.btn_sel.InitButton("按钮1_110"),e.btn_sel.sName="选择",e.btn_sel.Move(e.iX+e.iW-110-30,e.iY+e.iH-52-30,110,52),e.lockgoods=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SelectGoods,r.default),a(SelectGoods,[{key:"Draw",value:function(){h.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),m.default.new_DrawGoods(this.iX+30,this.iY+30,g.default.gi().goods[2],null,null),u.default.gi().DrawTextEx(this.iX+30,this.iY+this.iH-30-26,"选择物品添加到聊天",4278206039,30,101,1,1,0,0,-2),null!=this.lockgoods&&(m.default.new_DrawRect(this.iX+30,this.iY+30,g.default.gi().goods[2],this.lockgoods,0),this.btn_sel.Draw()),m.default.bShowDetail()&&m.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){return null!=this.lockgoods&&this.btn_sel.ProcTouch(t,e,i)?(this.btn_sel.bCheck()&&(0==SelectGoods.iType?c.default.AddGoods(this.lockgoods):1==SelectGoods.iType&&d.default.AddGoods(this.lockgoods),f.default.gi().PopStat(1)),!0):(this.lockgoods=m.default.new_LockGoods(e,i,this.iX+30,this.iY+30,g.default.gi().goods[2],t),m.default.NoMove(),3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||f.default.gi().PopStat(1),!1)}}]),SelectGoods}();i.default=_,_.iType=0,_.Open=function(t){_.iType=t,f.default.gi().PushStat(f.default.GS_SELECTGOODS)}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_Send":110,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],101:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),f=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),d=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send")),c=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_Send")),m=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function SelectPet(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SelectPet);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SelectPet.__proto__||Object.getPrototypeOf(SelectPet)).call(this));if(i.pani=t,i.pm3f=t.pm3f,i.iW=310,i.iH=50*m.default.mp.iPetCount+40,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,null==i.btn_sel)for(i.btn_sel=new Array(m.default.mp.iPetCount),e=0;e<m.default.mp.iPetCount;e++)i.btn_sel[e]=new o.default(u.default.xani_button),i.btn_sel[e].InitButton("3号按钮250_42"),i.btn_sel[e].Move(i.iX+30,i.iY+20+50*e,250,42),i.btn_sel[e].sName=m.default.mp.pets[e].sName;return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SelectPet,r.default),a(SelectPet,[{key:"Draw",value:function(){var t;for(f.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),t=0;t<m.default.mp.iPetCount;t++)this.btn_sel[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<m.default.mp.iPetCount;a++)if(this.btn_sel[a].ProcTouch(t,e,i))return this.btn_sel[a].bCheck()&&(0==SelectPet.iType?c.default.AddPet(m.default.mp.pets[a]):1==SelectPet.iType&&d.default.AddPet(m.default.mp.pets[a]),l.default.gi().PopStat(1)),!0;return 3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||l.default.gi().PopStat(1),!1}}]),SelectPet}();i.default=g,g.iType=0,g.Open=function(t){m.default.mp.iPetCount<=0?h.default.easymsg.AddMessage("当前没有宠物"):(g.iType=t,l.default.gi().PushStat(l.default.GS_SELECTPET))},g.Open=function(t){l.default.gi().PushStat(l.default.GS_SELECTPET)}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_Send":110,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/pet/MyPets":245}],102:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../map/MapManager")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton"))),u=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),l=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/Gameing")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fight/XFight")),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/JQMode")),p=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/shop/MySell")),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/team/MyTeam")),y=_interopRequireDefault(t("./MyFriends")),w=_interopRequireDefault(t("./PrivateChatWatch")),S=_interopRequireDefault(t("../../../../../zero/Interface/PublicInterface")),x=_interopRequireDefault(t("./PrivateChat_Send"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var P=function(){function TempChat(){_classCallCheck(this,TempChat)}return a(TempChat,[{key:"copyfrom",value:function(t){this.iRid=t.iRid,this.sName=t.sName,this.iRax=t.iRax}}]),TempChat}(),v=function(){function FriendList(){var t;for(_classCallCheck(this,FriendList),this.pm3f=l.default.gi(),this.bShow=!1,this.btn_section=new Array(3),this.btn_mpl=new Array(3),t=0;t<3;t++)this.btn_section[t]=new o.default(f.default.xani_nui3),this.btn_section[t].InitButton("分类标签按钮"),this.btn_mpl[t]=new o.default(f.default.xani_nui3),this.btn_mpl[t].InitButton("分组标签按钮");for(this.btn_mpl[0].sName="密",this.btn_mpl[1].sName="普",this.btn_mpl[2].sName="临",this.btn_operate=new Array(4),t=0;t<4;t++)this.btn_operate[t]=new o.default(f.default.xani_nui3),this.btn_operate[t].InitButton("好友功能按钮");for(this.iSectPoint=1,this.iScrollOff=0,this.iNameSize=24,this.iSelectPoint=-1,this.friends=new Array(FriendList.MAXFRIEND),t=0;t<FriendList.MAXFRIEND;t++)this.friends[t]=new y.default;for(this.iOnLineFriendCount=0,this.iOffLineFriendCount=0,this.iBlackFriendCount=0,this.btn_chat0=new u.default(f.default.xani_icon),this.btn_chat0.InitButton("好友功能按钮"),this.btn_chat0.bCheckByRect=!0,this.btn_chat1=new u.default(f.default.xani_icon),this.btn_chat1.InitButton("好友功能按钮"),this.btn_chat1.bCheckByRect=!0,this.bOpening=!1,this.bCloseing=!1,this.iModifyX=0,this.bLocked=!1,this.bDrag=!1,this.iModifyY=0,this.iDragDelay=0,this.iOffY=0,this.iF1Count=0,this.iF2Count=0,this.iF3Count=0,this.iF4Count=0,this.tmpchat=new Array(FriendList.MAXTEMPCHAT),t=0;t<FriendList.MAXTEMPCHAT;t++)this.tmpchat[t]=new P,this.tmpchat[t].iRid=0}return a(FriendList,[{key:"Draw",value:function(){var t,e,i;if(!n.default.gi().vbk.mapdialog.bHideUI()&&!_.default.jq.bJQLock()){var a;if(this.iW=200,this.iH=s.default.SCRH-20,this.iX=s.default.SCRW-this.iW,this.iY=(s.default.SCRH-this.iH)/2,S.default.gi().iBx>0&&(this.iY=S.default.gi().iBy+S.default.gi().iBh,this.iH=s.default.SCRH-this.iY-10),this.iCbx=s.default.SCRW-80,g.default.bFighting&&g.default.gi().iAlphaEffect>=s.default.SCRW?this.iCby=s.default.SCRH-80-340:this.iCby=s.default.SCRH-80-255-5,this.bOpening&&(this.iModifyX+=this.iW/4,this.iModifyX>=this.iW&&(this.iModifyX=this.iW,this.bOpening=!1)),this.bCloseing&&(this.iModifyX-=this.iW/4,this.iModifyX<0&&(this.iModifyX=0,this.bCloseing=!1,this.bShow=!1)),this.bPrivateChatFlash&&(this.bPrivateChatFlash=w.default.gi().bHaveUnWatched()),this.bShow?(this.btn_chat1.Move(this.iCbx-this.iModifyX,this.iCby,72,72),this.bPrivateChatFlash&&parseInt(f.default.iDelay/2)%2==0&&this.btn_chat1.Move(this.iCbx-this.iModifyX+2,this.iCby+2,72,72),this.btn_chat1.Draw(),l.default.gi().DrawText_2(this.btn_chat1.iX+36,this.btn_chat1.iY+80,"好友",4294833640,22,101,1,1,0,-2,-3,3,4279894016)):(this.btn_chat0.Move(this.iCbx-this.iModifyX,this.iCby,72,72),this.bPrivateChatFlash&&parseInt(f.default.iDelay/2)%2==0&&this.btn_chat0.Move(this.iCbx-this.iModifyX+2,this.iCby+2,72,72),this.btn_chat0.Draw(),l.default.gi().DrawText_2(this.btn_chat0.iX+36,this.btn_chat0.iY+80,"好友",4294833640,22,101,1,1,0,-2,-3,3,4279894016)),this.bShow){var r,o,u,h;for(this.iX=s.default.SCRW-this.iModifyX,d.default.new_framepc(this.iX,this.iY,this.iW,this.iH),t=0;t<3;t++)switch(r=this.iX+5,o=t<=this.iSectPoint?this.iY+5+45*t:this.iY+this.iH-135+45*t,this.btn_section[t].Move(r,o,190,40),this.btn_section[t].Draw(),t==this.iSectPoint?f.default.xani_nui3.DrawAnima(r+4,o+10,"打开关闭小箭头",1):f.default.xani_nui3.DrawAnima(r+4+6,o+4,"打开关闭小箭头",0),l.default.gi().DrawTextEx(r+50,o+20,FriendList.btnstr[t],4294967295,30,100,1,1,0,0,-2),t){case 0:l.default.gi().DrawTextEx(r+185,o+20,""+m.default.gameing.iNearRoleCount,4294967295,30,100,1,1,0,-3,-2);break;case 1:l.default.gi().DrawTextEx(r+185,o+20,""+(this.iF1Count+this.iF2Count+this.iF3Count),4294967295,30,100,1,1,0,-3,-2);break;case 2:l.default.gi().DrawTextEx(r+185,o+20,""+this.iF4Count,4294967295,30,100,1,1,0,-3,-2)}switch(this.iOx=this.iX+5,this.iOy=this.iY+5+45*(this.iSectPoint+1),this.iDx=this.iOx+190,this.iDy=this.iY+this.iH-135+45*(this.iSectPoint+1)-5,this.pm3f.SetViewClip(this.iOx-60,this.iOy-3,this.iDx,this.iDy),this.iOy+=this.iModifyY+this.iOffY,e=0,this.bSelected=!1,this.iSectPoint){case 0:for(e=0,t=0;t<m.default.iNearMax;t++)m.default.gameing.nrs[t].bUseing&&(u=this.iOx,h=this.iOy+40*e,this.iSelectPoint==e&&(f.default.xani_nui3.DrawAnima(u,h-1,"选中好友",0),this.bSelected=!0,this.iSelectX=u,this.iSelectY=h,this.iSelectRid=m.default.gameing.nrs[t].iRid,this.sSelectName=m.default.gameing.nrs[t].sName,this.iSelectRax=2*m.default.gameing.nrs[t].iRace+m.default.gameing.nrs[t].iSex,this.iGoX=m.default.gameing.nrs[t].iX,this.iGoY=m.default.gameing.nrs[t].iY,this.iSBCount=3,this.btn_operate[0].sName="查看",this.btn_operate[1].sName="前往",this.btn_operate[2].sName="攻击"),f.default.xani_nui3.DrawAnima(u,h,"小头像",2*m.default.gameing.nrs[t].iRace+m.default.gameing.nrs[t].iSex),this.pm3f.DrawTextEx(u+42,h+20,m.default.gameing.nrs[t].sName,4294967295,this.iNameSize,101,1,1,0,0,-2),e++);break;case 1:for(t=0;t<3;t++)FriendList.iMplPoint==t&&(this.btn_mpl[t].bMouseDown=!0,this.btn_mpl[t].bMouseIn=!0),this.btn_mpl[t].Move(this.iOx+63*t,this.iOy-(this.iModifyY+this.iOffY)-3,62,50),this.btn_mpl[t].Draw();if(this.iOy+=50,this.pm3f.SetViewClip(this.iOx-60,this.iOy-(this.iModifyY+this.iOffY)-3,this.iDx,this.iDy),0==FriendList.iMplPoint){for(t=0;t<this.iF1Count;t++)u=this.iOx,h=this.iOy+40*t,a=this.friends[this.flist1[t]],this.iSelectPoint==t&&(f.default.xani_nui3.DrawAnima(u,h-1,"选中好友",0),this.bSelected=!0,this.iSelectX=u,this.iSelectY=h,this.iSelectRid=a.iRid,this.sSelectName=a.sName,this.iSelectRax=a.iImportant%100,a.bOnLine?this.iSBCount=4:this.iSBCount=3,this.btn_operate[0].sName="发送",this.btn_operate[1].sName="记录",this.btn_operate[2].sName="分组",this.btn_operate[3].sName="查看"),f.default.xani_nui3.DrawAnima(u,h,"小头像",a.iImportant%100),this.pm3f.DrawTextEx(u+42,h+20,a.sName,a.bOnLine?4294967295:4288716960,this.iNameSize,101,1,1,0,0,-2);e=this.iF1Count}if(1==FriendList.iMplPoint){for(t=0;t<this.iF2Count;t++)u=this.iOx,h=this.iOy+40*t,a=this.friends[this.flist2[t]],this.iSelectPoint==t&&(f.default.xani_nui3.DrawAnima(u,h-1,"选中好友",0),this.bSelected=!0,this.iSelectX=u,this.iSelectY=h,this.iSelectRid=a.iRid,this.sSelectName=a.sName,this.iSelectRax=a.iImportant%100,a.bOnLine?this.iSBCount=4:this.iSBCount=3,this.btn_operate[0].sName="发送",this.btn_operate[1].sName="记录",this.btn_operate[2].sName="分组",this.btn_operate[3].sName="查看"),f.default.xani_nui3.DrawAnima(u,h,"小头像",a.iImportant%100),this.pm3f.DrawTextEx(u+42,h+20,a.sName,a.bOnLine?4294967295:4288716960,this.iNameSize,101,1,1,0,0,-2);e=this.iF2Count}if(2==FriendList.iMplPoint){for(t=0;t<this.iF3Count;t++)u=this.iOx,h=this.iOy+40*t,this.iSelectPoint==t&&(f.default.xani_nui3.DrawAnima(u,h-1,"选中好友",0),this.bSelected=!0,this.iSelectX=u,this.iSelectY=h,this.iSelectRid=this.tmpchat[t].iRid,this.sSelectName=this.tmpchat[t].sName,this.iSelectRax=this.tmpchat[t].iRax,this.iSBCount=4,this.btn_operate[0].sName="发送",this.btn_operate[1].sName="记录",this.btn_operate[2].sName="分组",this.btn_operate[3].sName="查看"),this.pm3f.DrawTextEx(u+2,h+20,this.tmpchat[t].sName,4294967295,this.iNameSize,101,1,1,0,0,-2);e=this.iF3Count}this.pm3f.NoClip();break;case 2:for(t=0;t<this.iF4Count;t++)u=this.iOx,h=this.iOy+40*t,a=this.friends[this.flist4[t]],this.iSelectPoint==t&&(f.default.xani_nui3.DrawAnima(u,h-1,"选中好友",0),this.bSelected=!0,this.iSelectX=u,this.iSelectY=h,this.iSelectRid=a.iRid,this.sSelectName=a.sName,this.iSBCount=1,this.btn_operate[0].sName="分组"),f.default.xani_nui3.DrawAnima(u,h,"小头像",a.iImportant%100),this.pm3f.DrawTextEx(u+42,h+20,a.sName,a.bOnLine?4294967295:4288716960,this.iNameSize,101,1,1,0,0,-2);e=this.iF4Count}if(this.iOy-=this.iModifyY+this.iOffY,this.pm3f.NoClip(),this.bSelected)for(this.iSelectY>s.default.SCRH-51*this.iSBCount&&(this.iSelectY=s.default.SCRH-51*this.iSBCount),t=0;t<4;t++)t<this.iSBCount?(this.btn_operate[t].Move(this.iSelectX-80,this.iSelectY+51*t,80,51),this.btn_operate[t].Draw()):this.btn_operate[t].Move(0,0,0,0);this.iSelectCount=e,(i=40*e-(this.iDy-this.iOy))<0&&(i=0),0!=this.iDragDelay?(this.iDragDelay=this.iDragDelay/2,this.iDragDelay>10||this.iDragDelay<-10?this.iOffY+=this.iDragDelay:this.iDragDelay=0):this.iOffY<-i?(t=(-i-this.iOffY)/2)>10?this.iOffY+=t:this.iOffY=-i:this.iOffY>0&&((t=this.iOffY/2)>10?this.iOffY-=t:this.iOffY=0),this.bDrag&&this.iDragTime++}}}},{key:"Close",value:function(){this.bCloseing=!0,this.bOpening=!1}},{key:"ProcTouch",value:function(t,e,i){var a,s,o;if(o=this.bShow?this.btn_chat1:this.btn_chat0,!this.bShow)return!!o.ProcTouch(t,e,i)&&(o.bCheck()&&(this.bPrivateChatFlash?w.default.gi().ShowMessage():FriendList.gi().bShow?this.Close():(this.bShow=!0,this.bCloseing=!1,this.bOpening=!0,this.iModifyX=0)),!0);switch(t){case 2:if(this.bLocked&&(this.iDragY=i,this.iModifyY=this.iDragY-this.iLockY,(a=this.iOffY+this.iModifyY)>0&&(this.iModifyY-=a/2,this.iDragTime=10),(s=40*this.iSelectCount-(this.iDy-this.iOy))<0&&(s=0),a<-s&&(this.iModifyY-=(a+s)/2,this.iDragTime=10),this.iModifyY>15||this.iModifyY<-15))return this.bDrag=!0,this.iSelectPoint=-1,!0;break;case 3:if(this.bLocked=!1,this.bDrag)return this.iOffY+=this.iModifyY,this.iDragTime<=0&&(this.iDragTime=1),this.iDragTime<5&&(this.iDragDelay=3*this.iModifyY/this.iDragTime),f.default.sop("this.iDragDelay="+this.iDragDelay),this.iModifyY=0,this.bDrag=!1,!0}for(a=0;a<3;a++)if(this.btn_section[a].ProcTouch(t,e,i))return this.btn_section[a].bCheck()&&(this.iSectPoint==a?this.iSectPoint=10:this.iSectPoint=a,this.iScrollOff=0,this.iOffY=0,this.iSelectPoint=-1),!0;if(1==this.iSectPoint)for(a=0;a<3;a++)this.btn_mpl[a].ProcTouch(t,e,i)&&this.btn_mpl[a].bCheck()&&(FriendList.iMplPoint=a);if(this.bSelected)for(a=0;a<this.iSBCount;a++)if(this.btn_operate[a].ProcTouch(t,e,i))return this.btn_operate[a].bCheck()&&(0==this.iSectPoint&&(0==a&&h.default.gi().s_WatchOn(0,this.iSelectRid,0,""),1==a&&0==this.iSectPoint&&(b.default.gi().bSelling?c.default.easymsg.AddMessage("摆摊中不能行走"):(D.default.bNoTeam()||D.default.bTeamLeader()||D.default.bAway())&&n.default.gi().mfy.findway(p.default.me.iX,p.default.me.iY,this.iGoX,this.iGoY)&&(f.default.sop("check again start"),n.default.gi().mfy.checkagain()?(n.default.gi().vbk.iGoToNpcFlag=-1,n.default.gi().vbk.iGoToNpcId=-1,p.default.me.start(n.default.gi().mfy.iPath,n.default.gi().mfy.iPathDeep)):f.default.sop("check again end2"))),2==a&&h.default.gi().s_PK(this.iSelectRid)),1==this.iSectPoint&&(0==a&&x.default.OpenChat(this.iSelectRid,this.sSelectName,this.iSelectRax),1==a&&PrivateChatRecord.OpenRecord(this.iSelectRid,this.sSelectName,this.iSelectRax),2==a&&FriendTeam.Open(this.sSelectName,this.iSelectRid),3==a&&h.default.gi().s_WatchOn(0,this.iSelectRid,0,"")),2==this.iSectPoint&&0==a&&FriendTeam.Open(this.sSelectName,this.iSelectRid),this.iSelectPoint=-1),!0;if(this.iSelectPoint=-1,r.default.bInRect(e,i,this.iOx,this.iOy,this.iDx-this.iOx,this.iDy-this.iOy)){switch(t){case 1:this.bLocked||(this.bLocked=!0,this.iLockY=i,this.iModifyY=0,this.iDragTime=0,this.iDragDelay=0)}for(this.iSelectPoint=-1,a=0;a<this.iSelectCount;a++)r.default.bInRect(e,i,this.iOx,this.iOy+this.iOffY+40*a,this.iW-10,40)&&(this.iSelectPoint=a)}return o.ProcTouch(t,e,i)?(o.bCheck()&&(this.bPrivateChatFlash?w.default.gi().ShowMessage():FriendList.gi().bShow?this.Close():(this.bShow=!0,this.bCloseing=!1,this.bOpening=!0,this.iModifyX=0)),!0):!!r.default.bInRect(e,i,this.iX,this.iY,this.iW+10,this.iH+1)}},{key:"GetFreeFriendOle",value:function(){var t;for(t=0;t<FriendList.MAXFRIEND;t++)if(!this.friends[t].bUseing)return this.friends[t];return null}},{key:"FindFriend",value:function(t){var e;for(e=0;e<FriendList.MAXFRIEND;e++)if(this.friends[e].bUseing&&this.friends[e].iRid==t)return this.friends[e];return null}},{key:"Clean",value:function(){var t;for(t=0;t<FriendList.MAXFRIEND;t++)this.friends[t].bUseing=!1;this.SortFriends()}},{key:"GetFriends",value:function(t){for(var e,i,a;0!=(i=t.GetNextByte())&&(e=t.GetNextInt(),null==(a=this.FindFriend(e))&&(a=this.GetFreeFriendOle()),null!=a);)a.bOnLine=0!=(2&i),a.iRid=e,a.sName=t.GetNextString(),a.iRelation=t.GetNextByte(),a.iAmity=t.GetNextShort(),a.iTeam=t.GetNextByte(),a.iImportant=t.GetNextByte(),a.bUseing=!0;this.SortFriends()}},{key:"SortFriends",value:function(){var t;for(null==this.flist1&&(this.flist1=new Int32Array(FriendList.MAXFRIEND)),null==this.flist2&&(this.flist2=new Int32Array(FriendList.MAXFRIEND)),null==this.flist4&&(this.flist4=new Int32Array(FriendList.MAXFRIEND)),this.iF1Count=0,this.iF2Count=0,this.iF4Count=0,t=0;t<FriendList.MAXFRIEND;t++)this.friends[t].bUseing&&(0==this.friends[t].iTeam&&this.friends[t].bOnLine&&(this.flist1[this.iF1Count]=t,this.iF1Count++),1==this.friends[t].iTeam&&this.friends[t].bOnLine&&(this.flist2[this.iF2Count]=t,this.iF2Count++),3==this.friends[t].iTeam&&this.friends[t].bOnLine&&(this.flist4[this.iF4Count]=t,this.iF4Count++));for(t=0;t<FriendList.MAXFRIEND;t++)this.friends[t].bUseing&&(0!=this.friends[t].iTeam||this.friends[t].bOnLine||(this.flist1[this.iF1Count]=t,this.iF1Count++),1!=this.friends[t].iTeam||this.friends[t].bOnLine||(this.flist2[this.iF2Count]=t,this.iF2Count++),3!=this.friends[t].iTeam||this.friends[t].bOnLine||(this.flist4[this.iF4Count]=t,this.iF4Count++))}},{key:"DelTmpChat",value:function(t){var e,i;for(e=0;e<FriendList.MAXTEMPCHAT;e++)if(this.tmpchat[e].iRid==t){for(i=e;i<FriendList.MAXTEMPCHAT-1;i++)this.tmpchat[i].iRid=this.tmpchat[i+1].iRid,this.tmpchat[i].sName=this.tmpchat[i+1].sName,this.tmpchat[i].iRax=this.tmpchat[i+1].iRax;return void(this.iF3Count>0&&this.iF3Count--)}}},{key:"AddTmpChat",value:function(t,e,i){var a,n;for(a=0;a<FriendList.MAXTEMPCHAT;a++)if(this.tmpchat[a].iRid==t){for(n=a;n>0;n--)this.tmpchat[n].copyfrom(this.tmpchat[n-1]);return this.tmpchat[0].iRid=t,this.tmpchat[0].sName=e,void(this.tmpchat[0].iRax=i)}for(n=FriendList.MAXTEMPCHAT-1;n>0;n--)this.tmpchat[n].copyfrom(this.tmpchat[n-1]);this.tmpchat[0].iRid=t,this.tmpchat[0].sName=e,this.tmpchat[0].iRax=i,this.iF3Count<FriendList.MAXTEMPCHAT&&this.iF3Count++}}]),FriendList}();i.default=v,v.MAXFRIEND=128,v.iMplPoint=0,v.MAXTEMPCHAT=16,v.btnstr=["附近","好友","黑名单"],v.flist=null,v.gi=function(){return null==v.flist&&(v.flist=new v),v.flist}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/Gameing":91,"../../../../../engtst/mgm/gameing/fight/XFight":130,"../../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/shop/MySell":259,"../../../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../../../map/MapManager":286,"../../../../../zero/Interface/PublicInterface":318,"./MyFriends":104,"./PrivateChatWatch":106,"./PrivateChat_Send":107}],103:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("../../../../../engine/BaseClass"),r=(a=s)&&a.__esModule?a:{default:a};var o=function(t){function FriendTeam(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FriendTeam);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FriendTeam.__proto__||Object.getPrototypeOf(FriendTeam)).call(this));for(i.iW=150,i.iH=340,i.iX=GmConfig.SCRW-i.iW-230,i.iY=(GmConfig.SCRH-i.iH)/2,i.btn_team=new Array(4),e=0;e<4;e++)i.btn_team[e]=new XButtonEx2(GmPlay.xani_nui2),i.btn_team[e].InitButton("按钮1_110");return i.btn_team[0].FriendTeam.sName="亲密",i.btn_team[1].FriendTeam.sName="普通",i.btn_team[2].FriendTeam.sName="黑名单",i.btn_team[3].FriendTeam.sName="删除",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FriendTeam,r.default),n(FriendTeam,[{key:"Draw",value:function(){var t;for(DrawMode.new_framewatch(this.iX,this.iY,this.iW,this.iH),M3DFast.gi().DrawTextEx(this.iX+this.iW/2,this.iY+20,FriendTeam.sName,4294967295,25,101,1,1,0,-2,0),M3DFast.gi().DrawTextEx(this.iX+this.iW/2,this.iY+20+30,""+FriendTeam.iRid,4294967295,25,101,1,1,0,-2,0),t=0;t<4;t++)this.btn_team[t].Move(this.iX+20,this.iY+20+30+30+60*t,110,52),this.btn_team[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<4;a++)if(this.btn_team[a].ProcTouch(t,e,i)&&this.btn_team[a].bCheck()){if(GmProtocol.gi().s_FriendOperate(2,FriendTeam.iRid,a),3==a){var n=FriendList.gi().FindFriend(FriendTeam.iRid);null!=n&&(n.bUseing=!1),FriendList.gi().SortFriends()}XStat.gi().PopStat(1)}return 3!=t||XDefine.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||XStat.gi().PopStat(1),!0}}]),FriendTeam}();i.default=o,o.sName,o.iRid,o.Open=function(t,e){o.sName=t,o.iRid=e,XStat.gi().PushStat(XStat.GS_FRIENDTEAM)}},{"../../../../../engine/BaseClass":8}],104:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function MyFriends(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyFriends)}return a(MyFriends,[{key:"MyFriends",value:function(){this.bUseing=!1,this.sName=""}}]),MyFriends}();i.default=n},{}],105:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),u=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),_interopRequireDefault(t("../../../../../engtst/mgm/XStat"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/History/XRecordFast")),f=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=function _ChatRecord(){_classCallCheck(this,_ChatRecord)},c=function(t){function PrivateChatRecord(t){_classCallCheck(this,PrivateChatRecord);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PrivateChatRecord.__proto__||Object.getPrototypeOf(PrivateChatRecord)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=600,e.iH=500,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.iOffY=0,e.bLock=!1,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PrivateChatRecord,r.default),a(PrivateChatRecord,[{key:"Draw",value:function(){var t,e,i,a;for(f.default.new_framewatch(this.iX,this.iY,this.iW,this.iH),o.default.gi().SetViewClip(this.iX+20,this.iY+20,this.iX+this.iW-20,this.iY+this.iH-20),e=this.iX+20,a=this.iOffY+this.iY+20,t=0;t<iRecordPoint&&(crs[t].fromid!=iRid&&crs[t].toid!=iRid||(h.default.gi().FormatEx(crs[t].sName+":"+crs[t].sDetail,this.iW-40,25,0,0,27),i=h.default.gi().iH,h.default.gi().Draw(e,a),!((a+=i+3)>=this.iY+this.iH-20)));t++);t>=iRecordPoint?this.bCanDown=!1:this.bCanDown=!0,o.default.gi().NoClip()}},{key:"ProcTouch",value:function(t,e,i){if(3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||u.default.gi().PopStat(1),1==t)s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)&&(this.bLock=!0,this.iLockY=i);else if(2==t){if(this.bLock){var a=i-this.iLockY;a>0&&this.iOffY<0?this.iOffY+=a:this.bCanDown&&(this.iOffY+=a),this.iOffY>0&&(this.iOffY=0),this.iLockY=i}}else 3==t&&(this.bLock=!1);return!1}}]),PrivateChatRecord}();i.default=c,c.AddChatRecord=function(t,e,i,a,n){if(crs[iRecordPoint]=new d,crs[iRecordPoint].fromid=t,crs[iRecordPoint].toid=e,crs[iRecordPoint].sName=i,crs[iRecordPoint].sDetail=a,crs[iRecordPoint].sTime=n,iRecordPoint++,iRecordPoint>=c.MAXCHATRECORD){var s;for(s=0;s<c.MAXCHATRECORD/2;s++)crs[s]=crs[c.MAXCHATRECORD/2+s];iRecordPoint=c.MAXCHATRECORD/2}},c.OpenRecord=function(t,e,i){l.default.iPrivateChatMode=1,PrivateChat_Send.OpenChat(t,e,i)},c.iRid,c.iRecordPoint=0,c.MAXCHATRECORD=1e3,c.crs=new Array(c.MAXCHATRECORD)},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/History/XRecordFast":67,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81}],106:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../../../../config/GameData"))),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/History/XRecordFast")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/SystemOperate")),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),p=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/team/MyTeam")),b=_interopRequireDefault(t("./PrivateMessage")),D=_interopRequireDefault(t("./FriendList")),y=_interopRequireDefault(t("./PrivateChat_Send"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var w=function(){function PrivateChatWatch(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PrivateChatWatch),this.pm3f=u.default.gi(),this.pms=new Array(PrivateChatWatch.MAXMESSAGE),t=0;t<PrivateChatWatch.MAXMESSAGE;t++)this.pms[t]=new b.default;this.iMessageCount=0,this.bShow=!1,this.iW=550,this.iH=360,this.iX=(s.default.SCRW-this.iW)/2,this.iY=(s.default.SCRH-this.iH)/2-50,this.btn_record=new o.default(l.default.xani_button),this.btn_record.Move(this.iX+this.iW-25-90,this.iY+25,90,60),this.btn_record.InitButton("发送聊天按钮"),this.btn_record.sName="记录",this.btn_watch=new o.default(l.default.xani_button),this.btn_watch.Move(this.iX+this.iW-25-90-10-90,this.iY+25,90,60),this.btn_watch.InitButton("发送聊天按钮"),this.btn_watch.sName="查看",this.btn_reply=new o.default(l.default.xani_button),this.btn_reply.Move(this.iX+this.iW-25-90,this.iY+this.iH-60-25,90,60),this.btn_reply.InitButton("发送聊天按钮"),this.btn_reply.sName="回复"}return a(PrivateChatWatch,[{key:"GetPrivateMessage",value:function(t){var e;for(l.default.sop("aaaaaaaaaaaaaaaaa"+this.iMessageCount),this.iMessageCount>=PrivateChatWatch.MAXMESSAGE&&(this.iMessageCount=PrivateChatWatch.MAXMESSAGE-1),e=this.iMessageCount;e>0;e--)this.pms[e]=this.pms[e-1];for(this.pms[0]=new b.default,this.pms[0].iSession=t.GetNextInt(),this.pms[0].iRid=t.GetNextInt(),this.pms[0].sName=t.GetNextString(),this.pms[0].iRax=t.GetNextByte(),this.pms[0].iFlag=t.GetNextByte(),this.pms[0].iDRid=t.GetNextInt(),this.pms[0].sTime=t.GetNextString(),this.pms[0].sDetail=t.GetNextString(),this.pms[0].exts[0].type=3,this.pms[0].exts[0].eid=this.pms[0].iRid,e=1;e<5;e++)if(t.iOffset>=t.iLength)this.pms[0].exts[e].type=100;else switch(this.pms[0].exts[e].type=t.GetNextByte(),this.pms[0].exts[e].type){case 0:case 1:case 4:this.pms[0].exts[e].eid=t.GetNextInt(),this.pms[0].exts[e].tid=t.GetNextShort();break;case 2:this.pms[0].exts[e].eid=t.GetNextInt(),this.pms[0].exts[e].name=t.GetNextString(),this.pms[0].exts[e].detail=t.GetNextString()}this.pms[0].iRid==_.default.me.iRid?(this.pms[0].bFriend=!1,this.pms[0].bWatched=!0,l.default.x_record.SavePrivateChat(),l.default.sop("bbbbbbbbb")):(null==D.default.gi().FindFriend(this.pms[0].iRid)?this.pms[0].bFriend=!1:this.pms[0].bFriend=!0,this.pms[0].bWatched=!1,D.default.gi().AddTmpChat(this.pms[0].iRid,this.pms[0].sName,this.pms[0].iRax),D.default.gi().bPrivateChatFlash=!0,l.default.sop("cccccccccccc")),this.iMessageCount++}},{key:"ShowMessage",value:function(){var t;for(t=this.iMessageCount-1;t>=0&&0!=this.pms[t].bWatched;t--);t>=0&&(0==h.default.iPrivateChatMode?(this.showpms=this.pms[t],f.default.gi().s_ReviewPrivateChat(this.pms[t].iSession),this.pms[t].bWatched=!0,l.default.x_record.SavePrivateChat(),this.bShow=!0):y.default.OpenChat(this.pms[t].iRid,this.pms[t].sName,this.pms[t].iRax))}},{key:"bHaveUnWatched",value:function(){for(var t=0;t<this.iMessageCount;t++)if(0==this.pms[t].bWatched)return!0;return!1}},{key:"Draw",value:function(){if(this.bShow){var t=0;if(!this.showpms.bFriend){var e=l.default.iDelay%20;t=25*(e>=10?20-e:e)<<24|16711680,u.default.gi().FillRect_2D(this.iX-10,this.iY-10,this.iX+this.iW+10,this.iY+this.iH+10,t)}d.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),d.default.frame_type4("聊天显示框亮20_20",this.iX+25,this.iY+25+60+10,this.iW-50,this.iH-25-60-10-25-60-10,20,20),l.default.xani_head.DrawAnimaEx(this.iX+25,this.iY+25,"新头像"+this.showpms.iRax,0,101,.75,.75,0,0,0),u.default.gi().DrawTextEx(this.iX+25+65,this.iY+25,"名字:"+this.showpms.sName,4278190080,30,101,1,1,0,0,0),u.default.gi().DrawTextEx(this.iX+25+65,this.iY+25+35+5,"号码:"+this.showpms.iRid,4278190080,25,101,1,1,0,0,0),this.pm3f.DrawTextEx(this.iX+25,this.iY+this.iH-25-30,""+this.showpms.sTime,4278190080,30,101,1,1,0,0,-2),this.btn_record.Draw(),this.btn_watch.Draw(),this.btn_reply.Draw(),this.DrawPms(this.iX+25,this.iY+25+60+10)}}},{key:"DrawPms",value:function(t,e){var i,a="#c176b51"+this.showpms.sDetail;for(i=1;i<5;i++)switch(this.showpms.exts[i].type){case 0:a=c.default.gi().InsertLocker(i,a,"["+l.default.de_goods.strValue(this.showpms.exts[i].tid,0,4)+"]",n.default.EXTCOLOR,"#c00c000");break;case 1:a=c.default.gi().InsertLocker(i,a,"["+l.default.de_pet.strValue(this.showpms.exts[i].tid,0,1)+"]",n.default.EXTCOLOR,"#c00c000");break;case 2:a=c.default.gi().InsertLocker(i,a,"[语音:"+this.showpms.exts[i].detail+"]",n.default.EXTCOLOR,"#c00c000");break;case 4:a=c.default.gi().InsertLocker(i,a,"[申请入队]",n.default.EXTCOLOR,"#c00c000")}for(c.default.gi().Format(a,this.iW-50-30,g.default.WordSize(24)),c.default.gi().CheckOutRect(),i=1;i<5;i++)switch(this.showpms.exts[i].type){case 0:case 1:case 2:case 3:case 4:this.showpms.lrs_small[i].CopyFrom(c.default.gi().lrs[i])}this.showpms.ox=t+15,this.showpms.oy=e+10,this.showpms.ow=c.default.gi().iW,this.showpms.oh=c.default.gi().iH,this.DrawSelect(t+15,e+10),c.default.gi().Draw(t+15,e+10)}},{key:"DrawSelect",value:function(t,e){var i;for(i=1;i<5;i++)switch(this.showpms.exts[i].type){case 0:case 1:case 2:if(this.showpms.lrs_small[i].CopyFrom(c.default.gi().lrs[i]),this.showpms.exts[i].iShowDelay>0){for(var a=0;a<this.showpms.lrs_small[i].iCount;a++){var n=t+this.showpms.lrs_small[i].rs[a].iX,s=e+this.showpms.lrs_small[i].rs[a].iY,r=t+this.showpms.lrs_small[i].rs[a].iX+this.showpms.lrs_small[i].rs[a].iW,o=e+this.showpms.lrs_small[i].rs[a].iY+this.showpms.lrs_small[i].rs[a].iH;u.default.gi().FillRect_2D(n,s,r,o,16711935|this.showpms.exts[i].iShowDelay<<24)}this.showpms.exts[i].iShowDelay>200?this.showpms.exts[i].iShowDelay-=3:this.showpms.exts[i].iShowDelay>150?this.showpms.exts[i].iShowDelay-=6:this.showpms.exts[i].iShowDelay>100?this.showpms.exts[i].iShowDelay-=9:this.showpms.exts[i].iShowDelay>50?this.showpms.exts[i].iShowDelay-=12:this.showpms.exts[i].iShowDelay=0}}}},{key:"ProcTouch",value:function(t,e,i){if(!this.bShow)return!1;if(r.default.bInRect(e,i,this.showpms.ox,this.showpms.oy,this.showpms.ow,this.showpms.oh))for(j=1;j<5;j++)if(!(this.showpms.exts[j].type>=100)&&!(this.showpms.exts[j].iShowDelay>0)&&this.showpms.lrs_small[j].bIn(e-this.showpms.ox,i-this.showpms.oy))switch(this.showpms.exts[j].type){case 0:f.default.gi().s_WatchOn(1,this.showpms.exts[j].eid,0,""),this.showpms.exts[j].iShowDelay=255;break;case 1:f.default.gi().s_WatchOn(2,this.showpms.exts[j].eid,0,""),this.showpms.exts[j].iShowDelay=255;break;case 2:l.default.m_vi.PlayUrlVoice(this.showpms.exts[j].name),this.showpms.exts[j].iShowDelay=255;break;case 4:p.default.bInTeam()?m.default.easymsg.AddMessage("已有队伍"):f.default.gi().s_TeamOperate(3,this.showpms.exts[j].eid,0),this.showpms.exts[j].iShowDelay=255}return this.btn_watch.ProcTouch(t,e,i)&&this.btn_watch.bCheck()&&f.default.gi().s_WatchOn(0,this.showpms.iRid,0,""),this.btn_record.ProcTouch(t,e,i)&&this.btn_record.bCheck()&&(h.default.iPrivateChatMode=1,y.default.OpenChat(this.showpms.iRid,this.showpms.sName,this.showpms.iRax),this.bShow=!1),this.btn_reply.ProcTouch(t,e,i)&&this.btn_reply.bCheck()&&(y.default.OpenChat(this.showpms.iRid,this.showpms.sName,this.showpms.iRax),this.bShow=!1),3!=t||r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||(this.bShow=!1),!0}}]),PrivateChatWatch}();i.default=w,w.pp=null,w.gi=function(){return null==w.pp&&(w.pp=new w),w.pp},w.MAXMESSAGE=1024},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/History/XRecordFast":67,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../../../zero/Interface/PublicInterface":318,"./FriendList":102,"./PrivateChat_Send":107,"./PrivateMessage":108}],107:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../../../../config/GameData"))),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),l=_interopRequireDefault(t("../../../../../engine/control/XInput")),f=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),h=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),d=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),c=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),m=_interopRequireDefault(t("../../../../../engtst/mgm/History/XRecordFast")),g=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/SelectColor")),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/SelectFace")),y=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/SelectGoods")),w=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/SelectPet")),S=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/publicchat/_EXTDATA"))),x=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/SystemOperate")),P=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),v=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/team/MyTeam"))),R=_interopRequireDefault(t("./PrivateChatWatch")),M=_interopRequireDefault(t("./FriendList"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var C=function(t){function PrivateChat_Send(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PrivateChat_Send);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PrivateChat_Send.__proto__||Object.getPrototypeOf(PrivateChat_Send)).call(this));if(e.bSend=!1,e.bSelectColor=!1,e.bSelectFace=!1,e.btn_voice=new u.default(h.default.xani_button),e.btn_voice.InitButton("发送语音"),e.btn_face=new u.default(h.default.xani_button),e.btn_face.InitButton("发送表情"),e.btn_goods=new u.default(h.default.xani_button),e.btn_goods.InitButton("发送物品"),e.btn_pet=new u.default(h.default.xani_button),e.btn_pet.InitButton("发送宠物"),e.btn_team=new u.default(h.default.xani_button),e.btn_team.InitButton("发送队伍"),e.btn_send=new u.default(h.default.xani_button),e.btn_send.InitButton("发送聊天按钮"),e.btn_send.sName="发送",e.btn_record=new u.default(h.default.xani_button),e.btn_record.InitButton("发送聊天按钮"),e.btn_record.sName="记录",e.btn_watch=new u.default(h.default.xani_button),e.btn_watch.InitButton("发送聊天按钮"),e.btn_watch.sName="查看",null==PrivateChat_Send.in_speak&&(PrivateChat_Send.in_speak=new l.default(h.default.xani_nui3),PrivateChat_Send.in_speak.bHideText=!0),PrivateChat_Send.in_speak.sDetail="",e.ResetSize(),null==PrivateChat_Send.cext){PrivateChat_Send.cext=new Array(5);for(var i=0;i<5;i++)PrivateChat_Send.cext[i]=new S.default;PrivateChat_Send.ClearCext()}return e.iCurrentColor=16777215,e.iRecordStat=0,e.iRecordingShow=0,e.iRecordDelay=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PrivateChat_Send,o.default),a(PrivateChat_Send,[{key:"ResetSize",value:function(){this.iW=590,0==m.default.iPrivateChatMode?(this.iH=360,this.iX=(s.default.SCRW-this.iW)/2,this.iY=(s.default.SCRH-this.iH)/2-50,PrivateChat_Send.in_speak.Move(this.iX+25,this.iY+25+60+10,this.iW-50,this.iH-25-65-10-25-60-10),this.btn_voice.Move(this.iX+25,this.iY+this.iH-25-65,64,65),this.btn_face.Move(this.iX+25+150,this.iY+this.iH-25-65,64,65),this.btn_goods.Move(this.iX+25+225,this.iY+this.iH-25-65,64,65),this.btn_pet.Move(this.iX+25+300,this.iY+this.iH-25-65,64,65),this.btn_team.Move(this.iX+25+375,this.iY+this.iH-25-65,64,65),this.btn_send.Move(this.iX+this.iW-90-25,this.iY+this.iH-25-65+2,90,60),this.btn_record.Move(this.iX+this.iW-90-25,this.iY+25,90,60),this.btn_watch.Move(this.iX+this.iW-90-25-90-10,this.iY+25,90,60)):(this.iH=s.default.SCRH,this.iX=(s.default.SCRW-this.iW)/2,this.iY=0,PrivateChat_Send.in_speak.Move(this.iX+25,this.iY+this.iH-20-65-10-100,this.iW-50,100),this.btn_voice.Move(this.iX+25,this.iY+this.iH-20-65,64,65),this.btn_face.Move(this.iX+25+150,this.iY+this.iH-20-65,64,65),this.btn_goods.Move(this.iX+25+225,this.iY+this.iH-20-65,64,65),this.btn_pet.Move(this.iX+25+300,this.iY+this.iH-20-65,64,65),this.btn_team.Move(this.iX+25+375,this.iY+this.iH-20-65,64,65),this.btn_send.Move(this.iX+this.iW-90-25,this.iY+this.iH-20-65+2,90,60),this.btn_record.Move(this.iX+this.iW-90-25,this.iY+20,90,60),this.btn_watch.Move(this.iX+this.iW-90-25-90-10,this.iY+20,90,60))}},{key:"DrawSelect",value:function(t,e,i){var a;for(a=0;a<5;a++)switch(i.exts[a].type){case 0:case 1:case 2:if(i.lrs_small[a].CopyFrom(_.default.gi().lrs[a]),i.exts[a].iShowDelay>0){for(var n=0;n<i.lrs_small[a].iCount;n++){var s=t+i.lrs_small[a].rs[n].iX,r=e+i.lrs_small[a].rs[n].iY,o=t+i.lrs_small[a].rs[n].iX+i.lrs_small[a].rs[n].iW,u=e+i.lrs_small[a].rs[n].iY+i.lrs_small[a].rs[n].iH;f.default.gi().FillRect_2D(s,r,o,u,16711935|i.exts[a].iShowDelay<<24)}i.exts[a].iShowDelay>200?i.exts[a].iShowDelay-=3:i.exts[a].iShowDelay>150?i.exts[a].iShowDelay-=6:i.exts[a].iShowDelay>100?i.exts[a].iShowDelay-=9:i.exts[a].iShowDelay>50?i.exts[a].iShowDelay-=12:i.exts[a].iShowDelay=0}}}},{key:"DrawPms",value:function(t,e,i,a){var s,r="#c176b51"+a.sDetail;for(s=1;s<5;s++)switch(a.exts[s].type){case 0:r=_.default.gi().InsertLocker(s,r,"["+h.default.de_goods.strValue(a.exts[s].tid,0,4)+"]",n.default.EXTCOLOR,"#c00c000");break;case 1:r=_.default.gi().InsertLocker(s,r,"["+h.default.de_pet.strValue(a.exts[s].tid,0,1)+"]",n.default.EXTCOLOR,"#c00c000");break;case 2:r=_.default.gi().InsertLocker(s,r,"[语音:"+a.exts[s].detail+"]",n.default.EXTCOLOR,"#c00c000")}for(_.default.gi().Format(r,i-90,x.default.WordSize(24)),_.default.gi().CheckOutRect(),s=0;s<5;s++)switch(a.exts[s].type){case 0:case 1:case 2:case 3:a.lrs_small[s].CopyFrom(_.default.gi().lrs[s])}var o=_.default.gi().iH+10+10;o<52&&(o=52);var u=e-o;return a.iRid==P.default.me.iRid?(a.ox=t+i-52-10-_.default.gi().iW-10,a.oy=u+10,a.ow=_.default.gi().iW,a.oh=_.default.gi().iH,a.headx=t+i-52,a.heady=u,h.default.xani_head.DrawAnimaEx(t+i-52,u,"新头像"+a.iRax,0,101,.65,.65,0,0,0),g.default.frame_type4("聊天内容框20_20",t+i-52-10-(_.default.gi().iW+20),u,_.default.gi().iW+20,_.default.gi().iH+20,20,20),h.default.xani_frame.DrawAnima(t+i-52-10,u+10,"聊天内容框20_20",10),this.DrawSelect(t+i-52-10-_.default.gi().iW-10,u+10,a),_.default.gi().Draw(t+i-52-10-_.default.gi().iW-10,u+10)):(a.ox=t+52+10+10,a.oy=u+10,a.ow=_.default.gi().iW,a.oh=_.default.gi().iH,a.headx=t,a.heady=u,h.default.xani_head.DrawAnimaEx(t,u,"新头像"+a.iRax,0,101,.65,.65,0,0,0),g.default.frame_type4("聊天内容框20_20",t+52+10,u,_.default.gi().iW+20,_.default.gi().iH+20,20,20),h.default.xani_frame.DrawAnima(t+52+10,u+10,"聊天内容框20_20",9),this.DrawSelect(t+52+10+10,u+10,a),_.default.gi().Draw(t+52+10+10,u+10)),o}},{key:"DrawMessage",value:function(t,e,i,a){var n;t+=10,e+=10,i-=20,a-=20,this.iMx=t,this.iMy=e,this.iMw=i,this.iMh=a;var s=e+a+this.iScrollY,r=R.default.gi();for(n=0;n<r.iMessageCount;n++)r.pms[n].ox=-1;for(f.default.gi().SetViewClip(t,e,t+i,e+a),n=0;n<r.iMessageCount;n++){if(r.pms[n].iRid==PrivateChat_Send.iRid);else if(r.pms[n].iRid!=P.default.me.iRid||r.pms[n].iDRid!=PrivateChat_Send.iRid)continue;if(0==r.pms[n].bWatched&&(r.pms[n].bWatched=!0,h.default.x_record.SavePrivateChat(),d.default.gi().s_ReviewPrivateChat(r.pms[n].iSession)),(s-=this.DrawPms(t,s,i,r.pms[n])+5)<=e)break}n<r.iMessageCount?this.bCanScroll=!0:this.bCanScroll=!1,f.default.gi().NoClip()}},{key:"Draw",value:function(){PrivateChat_Send.in_speak.onscr(),g.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),g.default.frame_type4("聊天显示框亮20_20",PrivateChat_Send.in_speak.iX,PrivateChat_Send.in_speak.iY,PrivateChat_Send.in_speak.iW,PrivateChat_Send.in_speak.iH,20,20),0==m.default.iPrivateChatMode?(h.default.xani_head.DrawAnimaEx(this.iX+25,this.iY+25,"新头像"+PrivateChat_Send.iRax,0,101,.75,.75,0,0,0),1e4==PrivateChat_Send.iRid?f.default.gi().DrawTextEx(this.iX+25+65,this.iY+25,"帮派群发:"+PrivateChat_Send.sName,4278190080,30,101,1,1,0,0,0):f.default.gi().DrawTextEx(this.iX+25+65,this.iY+25,"名字:"+PrivateChat_Send.sName,4278190080,30,101,1,1,0,0,0),f.default.gi().DrawTextEx(this.iX+25+65,this.iY+25+35+5,"号码:"+PrivateChat_Send.iRid,4278190080,25,101,1,1,0,0,0)):(h.default.xani_head.DrawAnimaEx(this.iX+25,this.iY+20,"新头像"+PrivateChat_Send.iRax,0,101,.75,.75,0,0,0),1e4==PrivateChat_Send.iRid?f.default.gi().DrawTextEx(this.iX+25+65,this.iY+20,"帮派群发:"+PrivateChat_Send.sName,4278190080,30,101,1,1,0,0,0):f.default.gi().DrawTextEx(this.iX+25+65,this.iY+20,"名字:"+PrivateChat_Send.sName,4278190080,30,101,1,1,0,0,0),f.default.gi().DrawTextEx(this.iX+25+65,this.iY+20+35+5,"号码:"+PrivateChat_Send.iRid,4278190080,25,101,1,1,0,0,0),g.default.frame_type4("聊天显示框暗20_20",this.iX+25,this.iY+20+60+10,this.iW-50,this.iH-20-60-10-20-65-10-100-10,20,20),this.DrawMessage(this.iX+25,this.iY+20+60+10,this.iW-50,this.iH-20-60-10-20-65-10-100-10));for(var t="#c176b51"+PrivateChat_Send.in_speak.sDetail,e=0;e<4;e++)PrivateChat_Send.cext[e].type>=100||(t.indexOf("#x"+(e+1))>=0?t=3==e?t.replace("#x"+(e+1),"#c00c000[语音:"+PrivateChat_Send.cext[e].detail+"]#o"):t.replace("#x"+(e+1),"#c00c000["+PrivateChat_Send.cext[e].name+"]#o"):PrivateChat_Send.cext[e].type=100);switch(_.default.gi().FormatEx(t,PrivateChat_Send.in_speak.iW-30,29,0,0,35),_.default.gi().Draw(PrivateChat_Send.in_speak.iX+15,PrivateChat_Send.in_speak.iY+10),this.btn_voice.Draw(),this.btn_face.Draw(),this.btn_goods.Draw(),this.btn_pet.Draw(),this.btn_team.Draw(),this.btn_send.Draw(),this.btn_record.Draw(),this.btn_watch.Draw(),this.bSelectFace&&D.default.gi().Draw(),this.iRecordStat){case 0:break;case 1:g.default.frame_type4("语音输入背景20_20",s.default.SCRW/2-120,s.default.SCRH/2-120,240,305,20,20),g.default.frame_type1("语音输入字底框20_35",s.default.SCRW/2-100,s.default.SCRH/2+100+20,200,20);var i=s.default.SCRW/2-100,a=s.default.SCRH/2+100+20;f.default.gi().FillRect_2D(i,a,i+200*(n.default.VOICETIMEOUT-this.iRecordDelay)/n.default.VOICETIMEOUT,a+35,822083583),1==this.iRecordingShow?(h.default.xani_other.DrawAnima(s.default.SCRW/2-100,s.default.SCRH/2-100,"录音中",0),f.default.gi().DrawTextEx(s.default.SCRW/2,s.default.SCRH/2+100+20+17.5,"手指划开，取消录制",4294967295,18,101,1,1,0,-2,-2)):2==this.iRecordingShow&&(h.default.xani_other.DrawAnima(s.default.SCRW/2-100,s.default.SCRH/2-100,"移开手指",0),f.default.gi().DrawTextEx(s.default.SCRW/2,s.default.SCRH/2+100+20+17.5,"手指划开，取消发送",4294967295,18,101,1,1,0,-2,-2));break;case 2:if("empty"!=h.default.m_vi.sRecordName){if(h.default.m_vi.iRecordTime<=1e3){p.default.easymsg.AddMessage("录音时间太短"),this.iRecordStat=0;break}this.iRecordDelay=n.default.VOICETIMEOUT,PrivateChat_Send.cext[3].type=2,PrivateChat_Send.cext[3].eid=h.default.m_vi.iRecordTime,-1==PrivateChat_Send.in_speak.sDetail.indexOf("#x4")&&(PrivateChat_Send.in_speak.sDetail+="#x4",PrivateChat_Send.in_speak.OpenInput()),PrivateChat_Send.cext[3].name="",PrivateChat_Send.cext[3].detail="",h.default.m_vi.UpLoad(),this.iRecordStat=3}break;case 3:"empty"!=h.default.m_vi.sUrlName&&(this.iRecordDelay=n.default.VOICETIMEOUT,PrivateChat_Send.cext[3].name=h.default.m_vi.sUrlName,h.default.m_vi.StartRecognize(),this.iRecordStat=4);break;case 4:"empty"!=h.default.m_vi.sRecognizeResult&&(PrivateChat_Send.cext[3].detail=h.default.m_vi.sRecognizeResult,this.iRecordStat=0)}this.iRecordStat>0&&(this.iRecordDelay--,this.iRecordDelay<=0&&(this.iRecordStat=0,h.default.m_vi.StopRecord(),p.default.easymsg.AddMessage("录音超时取消"))),this.bSend&&0==this.iRecordStat&&(this.bSend=!1,this.SendMessage())}},{key:"ProcTouch",value:function(t,e,i){if(this.bSelectFace)return D.default.gi().ProcTouch(t,e,i)&&0!=D.default.gi().iSelectStat&&(1==D.default.gi().iSelectStat&&(PrivateChat_Send.in_speak.sDetail+="#f"+D.default.gi().iSelectPoint,PrivateChat_Send.in_speak.OpenInput()),this.bSelectFace=!1),!0;if(this.bSelectColor)return b.default.sc.ProcTouch(t,e,i)&&0!=b.default.sc.iSelectStat&&(1==b.default.sc.iSelectStat&&(PrivateChat_Send.in_speak.sDetail+="#c"+b.default.sc.tostr(),this.iCurrentColor=b.default.sc.iColor,PrivateChat_Send.in_speak.OpenInput()),this.bSelectColor=!1),!0;if(this.btn_face.ProcTouch(t,e,i))return this.btn_face.bCheck()&&(this.bSelectFace=!0,D.default.gi().Init()),!0;if(this.btn_record.ProcTouch(t,e,i))return this.btn_record.bCheck()&&(0==m.default.iPrivateChatMode?m.default.iPrivateChatMode=1:m.default.iPrivateChatMode=0,this.ResetSize()),!0;if(this.btn_watch.ProcTouch(t,e,i))return this.btn_watch.bCheck()&&d.default.gi().s_WatchOn(0,PrivateChat_Send.iRid,0,""),!0;if(this.btn_goods.ProcTouch(t,e,i))return this.btn_goods.bCheck()&&y.default.Open(1),!0;if(this.btn_pet.ProcTouch(t,e,i))return this.btn_pet.bCheck()&&w.default.Open(1),!0;if(this.btn_team.ProcTouch(t,e,i))return this.btn_team.bCheck()&&PrivateChat_Send.AddTeam(),!0;if(r.default.bInRect(e,i,this.btn_voice.iX,this.btn_voice.iY,this.btn_voice.iW,this.btn_voice.iH)){if(1==t){if(0==this.iRecordStat){if(!h.default.m_vi.StartRecord())return p.default.easymsg.AddMessage("启动录音失败"),!0;this.iRecordStat=1,this.iRecordDelay=n.default.VOICETIMEOUT}}else 3==t&&1==this.iRecordStat&&(h.default.m_vi.StopRecord(),this.iRecordStat=2);return this.iRecordingShow=1,!0}if(1==this.iRecordStat)return 3==t&&(h.default.m_vi.StopRecord(),this.iRecordStat=0),this.iRecordingShow=2,!0;if(this.iRecordingShow=0,PrivateChat_Send.in_speak.ProcTouch(t,e,i),this.btn_send.ProcTouch(t,e,i))return this.btn_send.bCheck()&&(this.bSend=!0,0!=this.iRecordStat&&p.default.easymsg.AddMessage("正在处理中，请稍后...")),!0;if(1==m.default.iPrivateChatMode){if(3==t){var a,s,o=R.default.gi();for(a=0;a<o.iMessageCount;a++)if(-1!=o.pms[a].ox&&(r.default.bInRect(e,i,o.pms[a].headx,o.pms[a].heady,52,52)&&o.pms[a].iRid>1e3&&d.default.gi().s_WatchOn(0,o.pms[a].iRid,0,""),r.default.bInRect(e,i,o.pms[a].ox,o.pms[a].oy,o.pms[a].ow,o.pms[a].oh)))for(s=1;s<5;s++)if(!(o.pms[a].exts[s].type>=100)&&!(o.pms[a].exts[s].iShowDelay>0)&&o.pms[a].lrs_small[s].bIn(e-o.pms[a].ox,i-o.pms[a].oy))switch(o.pms[a].exts[s].type){case 0:d.default.gi().s_WatchOn(1,o.pms[a].exts[s].eid,0,""),o.pms[a].exts[s].iShowDelay=255;break;case 1:d.default.gi().s_WatchOn(2,o.pms[a].exts[s].eid,0,""),o.pms[a].exts[s].iShowDelay=255;break;case 2:h.default.m_vi.PlayUrlVoice(o.pms[a].exts[s].name),o.pms[a].exts[s].iShowDelay=255}}r.default.bInRect(e,i,this.iMx,this.iMy,this.iMw,this.iMh)&&1==t&&(this.bScrolling=!0,this.iLockY=i),this.bScrolling&&(2==t&&(i>this.iLockY?this.bCanScroll&&(this.iScrollY+=i-this.iLockY):this.iScrollY+=i-this.iLockY,this.iScrollY<0&&(this.iScrollY=0),this.iLockY=i),3==t&&(this.bScrolling=!1))}return 3!=t||r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||c.default.gi().PopStat(1),!1}},{key:"SendMessage",value:function(){if(PrivateChat_Send.in_speak.sDetail.length>100)p.default.easymsg.AddMessage("文字太长"),PrivateChat_Send.in_speak.sDetail="";else if(PrivateChat_Send.in_speak.sDetail.length>0){for(var t=PrivateChat_Send.in_speak.sDetail,e=0;e<4;e++)PrivateChat_Send.cext[e].type>=100||(t.indexOf("#x"+(e+1))>=0?t=3==e?t.replace("#x"+(e+1),n.default.EXTCOLOR+"[语音:"+PrivateChat_Send.cext[e].detail+"]#o"):t.replace("#x"+(e+1),n.default.EXTCOLOR+"["+PrivateChat_Send.cext[e].name+"]#o"):PrivateChat_Send.cext[e].type=100);d.default.gi().s_PrivateChat(PrivateChat_Send.iRid,PrivateChat_Send.sName,t),M.default.gi().Close(),M.default.gi().AddTmpChat(PrivateChat_Send.iRid,PrivateChat_Send.sName,PrivateChat_Send.iRax),PrivateChat_Send.in_speak.sDetail="",PrivateChat_Send.ClearCext(),0==m.default.iPrivateChatMode&&c.default.gi().PopStat(1)}else p.default.easymsg.AddMessage("请先输入文字")}}]),PrivateChat_Send}();i.default=C,C.iRid,C.sName,C.iRax,C.in_speak=null,C.cext=null,C.AddTeam=function(){var t;if(v.default.bTeamLeader()){for(t=0;t<3;t++)if(100==C.cext[t].type)return C.cext[t].type=4,C.cext[t].eid=P.default.me.iRid,C.cext[t].tid=0,C.cext[t].name="申请入队",C.in_speak.sDetail+="#x"+(t+1),void C.in_speak.OpenInput();p.default.easymsg.AddMessage("最多添加3个发送项目")}else p.default.easymsg.AddMessage("队长才能添加")},C.AddGoods=function(t){var e;for(e=0;e<3;e++)if(100==C.cext[e].type)return C.cext[e].type=0,C.cext[e].eid=t.iGid,C.cext[e].tid=t.iTid,C.cext[e].name=h.default.de_goods.strValue(t.iTid,0,4),C.in_speak.sDetail+="#x"+(e+1),void C.in_speak.OpenInput();p.default.easymsg.AddMessage("最多添加3个物品或宠物")},C.AddPet=function(t){var e;for(e=0;e<3;e++)if(100==C.cext[e].type)return C.cext[e].type=1,C.cext[e].eid=t.iPid,C.cext[e].tid=t.iTid,C.cext[e].name=h.default.de_pet.strValue(t.iTid,0,1),C.in_speak.sDetail+="#x"+(e+1),void C.in_speak.OpenInput();p.default.easymsg.AddMessage("最多添加3个物品或宠物")},C.OpenChat=function(t,e,i){C.iRid=t,C.sName=e,C.iRax=i,(C.iRax<0||C.iRax>6)&&(C.iRax=6),c.default.gi().PushStat(c.default.GS_PRIVATECHAT)},C.ClearCext=function(){if(null==C.cext){C.cext=new Array(5);for(var t=0;t<5;t++)C.cext[t]=new S.default}for(t=0;t<5;t++)C.cext[t].type=100}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/History/XRecordFast":67,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/chat/SelectColor":98,"../../../../../engtst/mgm/gameing/chat/SelectFace":99,"../../../../../engtst/mgm/gameing/chat/SelectGoods":100,"../../../../../engtst/mgm/gameing/chat/SelectPet":101,"../../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame":111,"../../../../../engtst/mgm/gameing/chat/publicchat/_EXTDATA":113,"../../../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/pet/Pets":247,"../../../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../../../zero/Interface/PublicInterface":318,"./FriendList":102,"./PrivateChatWatch":106}],108:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/LockRect")),s=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/publicchat/_EXTDATA"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(){function PrivateMessage(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PrivateMessage),this.iRid=0,this.sName="",this.sTime="",this.sDetail="",this.bFriend=!1,this.exts=new Array(5),this.lrs_small=new Array(5),t=0;t<5;t++)this.exts[t]=new s.default,this.lrs_small[t]=new n.default}return a(PrivateMessage,[{key:"copyfrom",value:function(t){this.iSession=t.iSession,this.iRid=t.iRid,this.sName=t.sName,this.iDRid=t.iDRid,this.sTime=t.sTime,this.sDetail=t.sDetail,this.bFriend=t.bFriend,this.iRax=t.iRax,this.iFlag=t.iFlag,this.exts[0].copyfrom(t.exts[0]),this.exts[1].copyfrom(t.exts[1]),this.exts[2].copyfrom(t.exts[2]),this.exts[3].copyfrom(t.exts[3]),this.exts[4].copyfrom(t.exts[4])}}]),PrivateMessage}();i.default=r},{"../../../../../engtst/mgm/frame/format/LockRect":83,"../../../../../engtst/mgm/gameing/chat/publicchat/_EXTDATA":113}],109:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GameData")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),l=_interopRequireDefault(t("../../../../../engine/control/XCheckBox")),f=_interopRequireDefault(t("../../../../../engine/control/XInput")),h=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),d=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),c=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),p=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/SelectFace")),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/SystemOperate")),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/gov/MyGov")),y=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),w=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/team/MyTeam")),S=_interopRequireDefault(t("./PublicChat_SmallFrame")),x=_interopRequireDefault(t("./PublicChat_Send")),P=_interopRequireDefault(t("./SetChatValue"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function PublicChat_BigFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PublicChat_BigFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PublicChat_BigFrame.__proto__||Object.getPrototypeOf(PublicChat_BigFrame)).call(this));for(i.chk_switch=new Array(8),e=0;e<8;e++)i.chk_switch[e]=new l.default(d.default.xani_nui3),i.chk_switch[e].InitBox("统一勾选"),i.chk_switch[e].Move(i.iX+i.iW-25-50-60,i.iY+25+55*e,50,50),i.chk_switch[e].bTrue=!0,e>0&&(i.chk_switch[e].bTrue=S.default.gi().bMessageSwitch[e-1]);return i.chk_switch[1].sDetail="当前",i.chk_switch[2].sDetail="队伍",i.chk_switch[3].sDetail="门派",i.chk_switch[4].sDetail="帮派",i.chk_switch[5].sDetail="世界",i.chk_switch[6].sDetail="传闻",i.bScrolling=!1,i.iRecordDelay=0,i.iRecordStat=0,i.iVoiceChannelPoint=0,i.iRecordingShow=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PublicChat_BigFrame,o.default),a(PublicChat_BigFrame,[{key:"InitButton",value:function(){if(!this.bInited){var t;for(this.btn_set=new u.default(d.default.xani_button),this.btn_set.InitButton("聊天设置"),this.btn_face=new u.default(d.default.xani_button),this.btn_face.InitButton("发送表情"),this.btn_send=new u.default(d.default.xani_button),this.btn_send.InitButton("发送聊天按钮"),this.btn_send.sName="发送",this.in_words=new f.default(d.default.xani_ui),this.in_words.sDetail="",this.in_words.sBackPrompt="点击这里输入聊天信息",this.in_words.iBackSize=20,this.in_words.iTextSize=30,this.in_words.iTextColor=4279724881,this.btn_channel=new Array(8),t=0;t<8;t++)this.btn_channel[t]=new u.default(d.default.xani_button),this.btn_channel[t].InitButton("频道选择");this.btn_channel[0].sName="全",this.btn_channel[1].sName="当",this.btn_channel[2].sName="队",this.btn_channel[3].sName="门",this.btn_channel[4].sName="帮",this.btn_channel[5].sName="世",this.btn_channel[6].sName="传",this.btn_channel[7].sName="系",this.btn_voice=new u.default(d.default.xani_button),this.btn_voice.InitButton("发送语音"),this.btn_opensend=new u.default(d.default.xani_button),this.btn_opensend.InitButton("打开公聊输入框"),this.btn_close=new u.default(d.default.xani_frame),this.btn_close.InitButton("聊天半屏关闭框45_106"),this.bInited=!0}}}]),a(PublicChat_BigFrame,[{key:"DrawSelect",value:function(t,e,i){var a;for(a=0;a<5;a++)switch(i.exts[a].type){case 0:case 1:case 2:if(i.lrs_big[a].CopyFrom(g.default.gi().lrs[a]),i.exts[a].iShowDelay>0){for(var n=0;n<i.lrs_big[a].iCount;n++){var s=t+i.lrs_big[a].rs[n].iX,r=e+i.lrs_big[a].rs[n].iY,o=t+i.lrs_big[a].rs[n].iX+i.lrs_big[a].rs[n].iW,u=e+i.lrs_big[a].rs[n].iY+i.lrs_big[a].rs[n].iH;h.default.gi().FillRect_2D(s,r,o,u,16711935|i.exts[a].iShowDelay<<24)}i.exts[a].iShowDelay>200?i.exts[a].iShowDelay-=3:i.exts[a].iShowDelay>150?i.exts[a].iShowDelay-=6:i.exts[a].iShowDelay>100?i.exts[a].iShowDelay-=9:i.exts[a].iShowDelay>50?i.exts[a].iShowDelay-=12:i.exts[a].iShowDelay=0}}}},{key:"DrawPms",value:function(t,e,i,a,s){var r,o=S.default.gi(),u="#c176b51"+s.sMessage;for(r=1;r<5;r++)switch(s.exts[r].type){case 0:u=g.default.gi().InsertLocker(r,u,"["+d.default.de_goods.strValue(s.exts[r].tid,0,4)+"]",n.default.EXTCOLOR,"#c00c000");break;case 1:u=g.default.gi().InsertLocker(r,u,"["+d.default.de_pet.strValue(s.exts[r].tid,0,1)+"]",n.default.EXTCOLOR,"#c00c000");break;case 2:u=g.default.gi().InsertLocker(r,u,"[语音:"+s.exts[r].detail+"]",n.default.EXTCOLOR,"#c00c000");break;case 4:u=g.default.gi().InsertLocker(r,u,"[申请入队]",n.default.EXTCOLOR,"#c00c000")}for(g.default.gi().Format(u,i-90,b.default.WordSize(24)),g.default.gi().CheckOutRect(),r=0;r<5;r++)switch(s.exts[r].type){case 0:case 1:case 2:case 3:case 4:s.lrs_big[r].CopyFrom(g.default.gi().lrs[r])}var l=g.default.gi().iH+10+10+24,f=e-l;return s.iRid==y.default.me.iRid?(s.ox=t+i-52-10-g.default.gi().iW-10,s.oy=f+24+10,s.ow=g.default.gi().iW,s.oh=g.default.gi().iH,s.headx=t+i-52,s.heady=f,d.default.xani_head.DrawAnimaEx(t+i-52,f,"新头像"+s.iRax,0,101,.65,.65,0,0,0),d.default.xani_frame.DrawAnima(t+i-52-10-24,f,"聊天频道框24_24",0),h.default.gi().DrawTextEx(t+i-52-10-24+12,f+12,o._CHANNELSHORT[a],o._CHANNELCOLORI[a],20,101,1,1,0,-2,-2),h.default.gi().DrawTextEx(t+i-52-10-24-5,f+12,s.sName,4279724881,24,101,1,1,0,-3,-2),m.default.frame_type4("聊天内容框20_20",t+i-52-10-(g.default.gi().iW+20),f+24,g.default.gi().iW+20,g.default.gi().iH+20,20,20),d.default.xani_frame.DrawAnima(t+i-52-10,f+24,"聊天内容框20_20",10),this.DrawSelect(t+i-52-10-g.default.gi().iW-10,f+24+10,s),g.default.gi().Draw(t+i-52-10-g.default.gi().iW-10,f+24+10)):(s.ox=t+52+10+10,s.oy=f+24+10,s.ow=g.default.gi().iW,s.oh=g.default.gi().iH,s.headx=t,s.heady=f,d.default.xani_head.DrawAnimaEx(t,f,"新头像"+s.iRax,0,101,.65,.65,0,0,0),d.default.xani_frame.DrawAnima(t+52+10,f,"聊天频道框24_24",0),h.default.gi().DrawTextEx(t+52+10+12,f+12,o._CHANNELSHORT[a],o._CHANNELCOLORI[a],20,101,1,1,0,-2,-2),h.default.gi().DrawTextEx(t+52+10+24+5,f+12,s.sName,4279724881,24,101,1,1,0,0,-2),m.default.frame_type4("聊天内容框20_20",t+52+10,f+24,g.default.gi().iW+20,g.default.gi().iH+20,20,20),d.default.xani_frame.DrawAnima(t+52+10,f+24,"聊天内容框20_20",9),this.DrawSelect(t+52+10+10,f+24+10,s),g.default.gi().Draw(t+52+10+10,f+24+10)),l}},{key:"DrawPmsEx",value:function(t,e,i,a,n){var s=S.default.gi(),r=s._CHANNELCOLORS[a]+n.sMessage;g.default.gi().Format(r,i-60,b.default.WordSize(24));var o=g.default.gi().iH+10,u=e-o;return d.default.xani_frame.DrawAnima(t,u,"聊天频道框24_24",0),h.default.gi().DrawTextEx(t+12,u+12,s._CHANNELSHORT[a],s._CHANNELCOLORI[a],20,101,1,1,0,-2,-2),g.default.gi().Draw(t+24+10,u),o}},{key:"DrawMessage",value:function(t,e,i,a){var n,s;t+=10,e+=10,i-=20,a-=20,this.iMx=t,this.iMy=e,this.iMw=i,this.iMh=a;var r=e+a+this.iScrollY,o=S.default.gi();for(n=0;n<o.iMessageCount;n++)o.pms[n].ox=-1;for(h.default.gi().SetViewClip(t,e,t+i,e+a),n=0;n<o.iMessageCount;n++)if((1!=this.iChannelPoint||0==o.pms[n].channel)&&!(2==this.iChannelPoint&&1!=o.pms[n].channel||3==this.iChannelPoint&&2!=o.pms[n].channel||4==this.iChannelPoint&&3!=o.pms[n].channel||5==this.iChannelPoint&&4!=o.pms[n].channel&&50!=o.pms[n].channel||6==this.iChannelPoint&&5!=o.pms[n].channel||7==this.iChannelPoint&&6!=o.pms[n].channel&&7!=o.pms[n].channel)){if(0==o.pms[n].channel)s=0;else if(1==o.pms[n].channel)s=1;else if(2==o.pms[n].channel)s=2;else if(3==o.pms[n].channel)s=3;else if(4==o.pms[n].channel||50==o.pms[n].channel)s=4;else if(5==o.pms[n].channel)s=5;else if(6==o.pms[n].channel)s=6;else{if(7!=o.pms[n].channel)continue;s=7}if((r-=s<=5?this.DrawPms(t,r,i,s,o.pms[n])+5:this.DrawPmsEx(t,r,i,s,o.pms[n])+5)<=e)break}n<S.default.gi().iMessageCount?this.bCanScroll=!0:this.bCanScroll=!1,h.default.gi().NoClip()}},{key:"Draw",value:function(){if(this.bShow){var t,e,i;if(this.InitButton(),this.bOpening)this.iX<0-this.iW/5?this.iX+=this.iW/5:(this.iX=0,this.bOpening=!1);else if(this.bCloseing){if(!(this.iX>-this.iW))return this.iX=-this.iW,this.bCloseing=!1,void(this.bShow=!1);this.iX-=this.iW/5}for(this.btn_close.Move(this.iX+this.iW,this.iY+s.default.SCRH/2-53,45,106),this.btn_close.Draw(),m.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),e=this.iX+15,i=this.iY+15,this.btn_set.Move(e,i,64,65),this.btn_set.Draw(),e+=69,this.in_words.Move(e,i+9,235,47),m.default.frame_type1("输入框a20_47",this.in_words.iX,this.in_words.iY,this.in_words.iW,20),this.in_words.DrawText(),this.in_words.onscr(),e+=240,this.btn_face.Move(e,i,64,65),this.btn_face.Draw(),e+=69,this.btn_send.Move(e,i+2,90,60),this.btn_send.Draw(),e=this.iX+15,i+=69,t=0;t<8;t++)this.btn_channel[t].Move(e+2,i+60*t,60,60),this.btn_channel[t].Draw();var a=this.iH-15-15-64-5;for(m.default.frame_type4("聊天显示框暗20_20",e+64+5,i,400,a,20,20),this.DrawMessage(e+64+5,i,400,a),this.btn_opensend.Move(this.iX+15,this.iY+this.iH-15-65,64,65),this.btn_opensend.Draw(),this.btn_voice.Move(this.iX+15,this.iY+this.iH-15-65-5-65,64,65),this.btn_voice.Draw(),t=0;t<8;t++)this.iChannelPoint==t&&(this.btn_channel[t].bMouseIn=!0,this.btn_channel[t].bMouseDown=!0),this.btn_channel[t].Draw();switch(this.bSelectFace&&p.default.gi().Draw(),this.iRecordStat){case 0:break;case 1:m.default.frame_type4("语音输入背景20_20",s.default.SCRW/2-120,s.default.SCRH/2-120,240,305,20,20),m.default.frame_type1("语音输入字底框20_35",s.default.SCRW/2-100,s.default.SCRH/2+100+20,200,20);var r=s.default.SCRW/2-100,o=s.default.SCRH/2+100+20;h.default.gi().FillRect_2D(r,o,r+200*(n.default.VOICETIMEOUT-this.iRecordDelay)/n.default.VOICETIMEOUT,o+35,822083583),1==this.iRecordingShow?(d.default.xani_other.DrawAnima(s.default.SCRW/2-100,s.default.SCRH/2-100,"录音中",0),h.default.gi().DrawTextEx(s.default.SCRW/2,s.default.SCRH/2+100+20+17.5,"手指划开，取消录制",4294967295,18,101,1,1,0,-2,-2)):2==this.iRecordingShow&&(d.default.xani_other.DrawAnima(s.default.SCRW/2-100,s.default.SCRH/2-100,"移开手指",0),h.default.gi().DrawTextEx(s.default.SCRW/2,s.default.SCRH/2+100+20+17.5,"手指划开，取消发送",4294967295,18,101,1,1,0,-2,-2));break;case 2:"empty"!=d.default.m_vi.sRecordName&&(this.iRecordDelay=n.default.VOICETIMEOUT,d.default.m_vi.UpLoad(),this.iRecordStat=3);break;case 3:"empty"!=d.default.m_vi.sUrlName&&(this.iRecordDelay=n.default.VOICETIMEOUT,d.default.m_vi.StartRecognize(),this.iRecordStat=4);break;case 4:if("empty"!=d.default.m_vi.sRecognizeResult){if(d.default.m_vi.iRecordTime<=1e3){_.default.easymsg.AddMessage("录音时间太短"),this.iRecordStat=0;break}x.default.ClearCext(),x.default.cext[3].type=2,x.default.cext[3].eid=d.default.m_vi.iRecordTime,x.default.cext[3].name=d.default.m_vi.sUrlName,x.default.cext[3].detail=d.default.m_vi.sRecognizeResult,this.iRecordStat=0,c.default.gi().s_PublicChat(this.iVoiceChannelPoint,n.default.EXTCOLOR+"[语音:"+x.default.cext[3].detail+"]#o")}}this.iRecordStat>0&&(this.iRecordDelay--,this.iRecordDelay<=0&&(this.iRecordStat=0,d.default.m_vi.StopRecord(),_.default.easymsg.AddMessage("录音超时取消")))}}},{key:"ProcTouch",value:function(t,e,i){if(!this.bShow)return!1;var a,s;if(this.bSelectFace)return p.default.gi().ProcTouch(t,e,i)&&0!=p.default.gi().iSelectStat&&(1==p.default.gi().iSelectStat&&(this.in_words.sDetail+="#f"+p.default.gi().iSelectPoint),this.bSelectFace=!1),!0;if(this.btn_close.bMouseDown)return 2==t?(this.iX-=this.iLockX-e,this.iLockX=e,this.iX>0&&(this.iX=0)):3==t&&(Math.abs(this.iLockX_old-e)<10?this.bCloseing=!0:this.iX<-this.iW/2?this.bCloseing=!0:this.bOpening=!0,this.btn_close.bMouseDown=!1,this.btn_close.iAnimaStat=11),!0;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bMouseDown&&(this.iLockX=e,this.iLockX_old=e),this.btn_close.bCheck()&&(this.bCloseing=!0),!0;if(this.btn_opensend.ProcTouch(t,e,i))return this.btn_opensend.bCheck()&&(x.default.Open(),x.default.iChannelPoint=this.iChannelPoint-1),!0;for(a=0;a<8;a++)this.btn_channel[a].ProcTouch(t,e,i)&&this.btn_channel[a].bCheck()&&this.iChannelPoint!=a&&(this.iChannelPoint=a,this.iScrollY=0);if(r.default.bInRect(e,i,this.btn_voice.iX,this.btn_voice.iY,this.btn_voice.iW,this.btn_voice.iH)){if(1==t){if(0==this.iChannelPoint)_.default.easymsg.AddMessage("不能在全部频道发言");else if(7==this.iChannelPoint)_.default.easymsg.AddMessage("不能在系统频道发言");else if(2==this.iChannelPoint&&w.default.bNoTeam())_.default.easymsg.AddMessage("还未组队");else if(3==this.iChannelPoint&&y.default.me.rbs.iSchoolId<=0)_.default.easymsg.AddMessage("还未加入门派");else if(4==this.iChannelPoint&&D.default.mg.iRealGid<=0)_.default.easymsg.AddMessage("还未加入帮派");else if(0==this.iRecordStat){if(!d.default.m_vi.StartRecord())return _.default.easymsg.AddMessage("启动录音失败"),!0;this.iRecordStat=1,this.iRecordDelay=n.default.VOICETIMEOUT,this.iVoiceChannelPoint=this.iChannelPoint-1}}else 3==t&&1==this.iRecordStat&&(d.default.m_vi.StopRecord(),this.iRecordStat=2);return this.iRecordingShow=1,!0}if(1==this.iRecordStat)return 3==t&&(d.default.m_vi.StopRecord(),this.iRecordStat=0),this.iRecordingShow=2,!0;if(this.iRecordingShow=0,3==t){var o=S.default.gi();for(a=0;a<o.iMessageCount;a++)if(-1!=o.pms[a].ox&&(r.default.bInRect(e,i,o.pms[a].headx,o.pms[a].heady,52,52)&&o.pms[a].iRid>1e3&&c.default.gi().s_WatchOn(0,o.pms[a].iRid,0,""),r.default.bInRect(e,i,o.pms[a].ox,o.pms[a].oy,o.pms[a].ow,o.pms[a].oh)))for(s=1;s<5;s++)if(!(o.pms[a].exts[s].type>=100)&&!(o.pms[a].exts[s].iShowDelay>0)&&o.pms[a].lrs_big[s].bIn(e-o.pms[a].ox,i-o.pms[a].oy))switch(o.pms[a].exts[s].type){case 0:c.default.gi().s_WatchOn(1,o.pms[a].exts[s].eid,0,""),o.pms[a].exts[s].iShowDelay=255;break;case 1:c.default.gi().s_WatchOn(2,o.pms[a].exts[s].eid,0,""),o.pms[a].exts[s].iShowDelay=255;break;case 2:d.default.m_vi.PlayUrlVoice(o.pms[a].exts[s].name),o.pms[a].exts[s].iShowDelay=255;break;case 4:w.default.bInTeam()?_.default.easymsg.AddMessage("已有队伍"):c.default.gi().s_TeamOperate(3,o.pms[a].exts[s].eid,0),o.pms[a].exts[s].iShowDelay=255}}return this.btn_send.ProcTouch(t,e,i)&&this.btn_send.bCheck()&&(0==this.iChannelPoint?_.default.easymsg.AddMessage("不能在全部频道发言"):7==this.iChannelPoint?_.default.easymsg.AddMessage("不能在系统频道发言"):this.in_words.sDetail.length>100?(_.default.easymsg.AddMessage("文字太长"),this.in_words.sDetail=""):this.in_words.sDetail.length>0?(x.default.ClearCext(),c.default.gi().s_PublicChat(this.iChannelPoint-1,this.in_words.sDetail),this.in_words.sDetail=""):_.default.easymsg.AddMessage("请先输入文字")),this.btn_face.ProcTouch(t,e,i)?(this.btn_face.bCheck()&&(this.bSelectFace=!0,p.default.gi().Init()),!0):!!this.in_words.ProcTouch(t,e,i)||(this.btn_set.ProcTouch(t,e,i)?(this.btn_set.bCheck()&&P.default.Open(),!0):(r.default.bInRect(e,i,this.iMx,this.iMy,this.iMw,this.iMh)&&1==t&&(this.bScrolling=!0,this.iLockY=i),this.bScrolling&&(2==t&&(i>this.iLockY?this.bCanScroll&&(this.iScrollY+=i-this.iLockY):this.iScrollY+=i-this.iLockY,this.iScrollY<0&&(this.iScrollY=0),this.iLockY=i),3==t&&(this.bScrolling=!1)),!!r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)))}}]),PublicChat_BigFrame}();i.default=v,v.bg=null,v.gi=function(){return null==v.bg&&(v.bg=new v(null)),v.bg},v.Open=function(){var t=v.gi();t.iW=500,t.iH=s.default.SCRH,t.iX=-t.iW,t.iY=0,t.bShow=!0,t.bOpening=!0,t.iScrollY=0,t.InitButton();for(var e=0;e<8;e++)t.btn_channel[e].SetNormal();t.bSelectFace=!1}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XCheckBox":17,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/chat/SelectFace":99,"../../../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/team/MyTeam":266,"./PublicChat_Send":110,"./PublicChat_SmallFrame":111,"./SetChatValue":112}],110:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../zero/Interface/GameVersion")),_interopRequireDefault(t("../../../../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../../../../config/GameData"))),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),l=_interopRequireDefault(t("../../../../../engine/control/XInput")),f=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),h=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),d=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),c=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),p=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/SelectColor")),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/SelectFace")),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/SelectGoods")),y=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/SelectPet")),w=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),S=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods"))),x=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/team/MyTeam"))),P=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/team/TeamCreate")),v=_interopRequireDefault(t("./_EXTDATA"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var R=function(t){function PublicChat_Send(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PublicChat_Send);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PublicChat_Send.__proto__||Object.getPrototypeOf(PublicChat_Send)).call(this));for(i.iW=590,i.iH=360,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2-50,i.btn_channel=new Array(7),e=0;e<7;e++)i.btn_channel[e]=new u.default(h.default.xani_button),i.btn_channel[e].Move(i.iX+25+80*e,i.iY+25,60,60),i.btn_channel[e].InitButton("频道选择");if(i.btn_channel[0].sName="当",i.btn_channel[1].sName="队",i.btn_channel[2].sName="门",i.btn_channel[3].sName="帮",i.btn_channel[4].sName="世",i.btn_channel[5].sName="传",i.btn_channel[6].sName="叭",i.bSelectColor=!1,i.bSelectFace=!1,e=75,i.btn_voice=new u.default(h.default.xani_button),i.btn_voice.Move(i.iX+25,i.iY+i.iH-25-65,64,65),i.btn_voice.InitButton("发送语音"),i.btn_face=new u.default(h.default.xani_button),i.btn_face.Move(i.iX+25+e+e,i.iY+i.iH-25-65,64,65),i.btn_face.InitButton("发送表情"),i.btn_goods=new u.default(h.default.xani_button),i.btn_goods.Move(i.iX+25+e+e+e,i.iY+i.iH-25-65,64,65),i.btn_goods.InitButton("发送物品"),i.btn_pet=new u.default(h.default.xani_button),i.btn_pet.Move(i.iX+25+e+e+e+e,i.iY+i.iH-25-65,64,65),i.btn_pet.InitButton("发送宠物"),i.btn_team=new u.default(h.default.xani_button),i.btn_team.Move(i.iX+25+5*e,i.iY+i.iH-25-65,64,65),i.btn_team.InitButton("发送队伍"),i.btn_send=new u.default(h.default.xani_button),i.btn_send.Move(i.iX+i.iW-90-25,i.iY+i.iH-25-65+2,90,60),i.btn_send.InitButton("发送聊天按钮"),i.btn_send.sName="发送",PublicChat_Send.in_speak=new l.default(h.default.xani_nui3),PublicChat_Send.in_speak.Move(i.iX+25,i.iY+25+60+10,i.iW-50,i.iH-25-65-10-25-60-10),PublicChat_Send.in_speak.bHideText=!0,PublicChat_Send.bOpenInput&&PublicChat_Send.in_speak.OpenInput(),PublicChat_Send.bOpenInput=!0,i.iCurrentColor=16777215,null==PublicChat_Send.cext){for(PublicChat_Send.cext=new Array(5),e=0;e<5;e++)PublicChat_Send.cext[e]=new v.default;PublicChat_Send.ClearCext()}return i.iRecordDelay=0,i.iRecordStat=0,i.iRecordingShow=0,i.bSend=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PublicChat_Send,o.default),a(PublicChat_Send,[{key:"Draw",value:function(){var t,e;for(PublicChat_Send.iChannelPoint<0&&(PublicChat_Send.iChannelPoint=0),PublicChat_Send.iChannelPoint>6&&(PublicChat_Send.iChannelPoint=6),m.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),m.default.frame_type4("聊天显示框亮20_20",PublicChat_Send.in_speak.iX,PublicChat_Send.in_speak.iY,PublicChat_Send.in_speak.iW,PublicChat_Send.in_speak.iH,20,20),t=0;t<7;t++)PublicChat_Send.iChannelPoint==t&&(this.btn_channel[t].bMouseIn=!0,this.btn_channel[t].bMouseDown=!0),this.btn_channel[t].Draw();for(PublicChat_Send.in_speak.onscr(),e="#c176b51"+PublicChat_Send.in_speak.sDetail,t=0;t<4;t++)PublicChat_Send.cext[t].type>=100||(e.indexOf("#x"+(t+1))>=0?e=3==t?e.replace("#x"+(t+1),"#c00c000[语音:"+PublicChat_Send.cext[t].detail+"]#o"):e.replace("#x"+(t+1),"#c00c000["+PublicChat_Send.cext[t].name+"]#o"):PublicChat_Send.cext[t].type=100);switch(g.default.gi().FormatEx(e,PublicChat_Send.in_speak.iW-30,29,0,0,35),g.default.gi().Draw(PublicChat_Send.in_speak.iX+15,PublicChat_Send.in_speak.iY+10),this.btn_voice.Draw(),this.btn_face.Draw(),this.btn_goods.Draw(),this.btn_pet.Draw(),this.btn_team.Draw(),this.btn_send.Draw(),this.bSelectFace&&b.default.gi().Draw(),this.iRecordStat){case 0:break;case 1:m.default.frame_type4("语音输入背景20_20",s.default.SCRW/2-120,s.default.SCRH/2-120,240,305,20,20),m.default.frame_type1("语音输入字底框20_35",s.default.SCRW/2-100,s.default.SCRH/2+100+20,200,20);var i=s.default.SCRW/2-100,a=s.default.SCRH/2+100+20;f.default.gi().FillRect_2D(i,a,i+200*(n.default.VOICETIMEOUT-this.iRecordDelay)/n.default.VOICETIMEOUT,a+35,822083583),1==this.iRecordingShow?(h.default.xani_other.DrawAnima(s.default.SCRW/2-100,s.default.SCRH/2-100,"录音中",0),f.default.gi().DrawTextEx(s.default.SCRW/2,s.default.SCRH/2+100+20+17.5,"手指划开，取消录制",4294967295,18,101,1,1,0,-2,-2)):2==this.iRecordingShow&&(h.default.xani_other.DrawAnima(s.default.SCRW/2-100,s.default.SCRH/2-100,"移开手指",0),f.default.gi().DrawTextEx(s.default.SCRW/2,s.default.SCRH/2+100+20+17.5,"手指划开，取消发送",4294967295,18,101,1,1,0,-2,-2));break;case 2:if("empty"!=h.default.m_vi.sRecordName){if(h.default.m_vi.iRecordTime<=1e3){_.default.easymsg.AddMessage("录音时间太短"),this.iRecordStat=0;break}this.iRecordDelay=n.default.VOICETIMEOUT,PublicChat_Send.cext[3].type=2,PublicChat_Send.cext[3].eid=h.default.m_vi.iRecordTime,-1==PublicChat_Send.in_speak.sDetail.indexOf("#x4")&&(PublicChat_Send.in_speak.sDetail+="#x4",PublicChat_Send.in_speak.OpenInput()),PublicChat_Send.cext[3].name="",PublicChat_Send.cext[3].detail="",h.default.m_vi.UpLoad(),this.iRecordStat=3}break;case 3:"empty"!=h.default.m_vi.sUrlName&&(this.iRecordDelay=n.default.VOICETIMEOUT,PublicChat_Send.cext[3].name=h.default.m_vi.sUrlName,h.default.m_vi.StartRecognize(),this.iRecordStat=4);break;case 4:"empty"!=h.default.m_vi.sRecognizeResult&&(PublicChat_Send.cext[3].detail=h.default.m_vi.sRecognizeResult,this.iRecordStat=0)}this.iRecordStat>0&&(this.iRecordDelay--,this.iRecordDelay<=0&&(this.iRecordStat=0,h.default.m_vi.StopRecord(),_.default.easymsg.AddMessage("录音超时取消"))),this.bSend&&0==this.iRecordStat&&(this.bSend=!1,this.SendMessage())}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.bSelectFace)return b.default.gi().ProcTouch(t,e,i)&&0!=b.default.gi().iSelectStat&&(1==b.default.gi().iSelectStat&&(PublicChat_Send.in_speak.sDetail+="#f"+b.default.gi().iSelectPoint,PublicChat_Send.in_speak.OpenInput()),this.bSelectFace=!1),!0;if(this.bSelectColor)return p.default.sc.ProcTouch(t,e,i)&&0!=p.default.sc.iSelectStat&&(1==p.default.sc.iSelectStat&&(PublicChat_Send.in_speak.sDetail+="#c"+p.default.sc.tostr(),PublicChat_Send.in_speak.OpenInput(),this.iCurrentColor=p.default.sc.iColor),this.bSelectColor=!1),!0;if(this.btn_face.ProcTouch(t,e,i))return this.btn_face.bCheck()&&(this.bSelectFace=!0,b.default.gi().Init()),!0;if(this.btn_goods.ProcTouch(t,e,i))return this.btn_goods.bCheck()&&D.default.Open(0),!0;if(this.btn_pet.ProcTouch(t,e,i))return this.btn_pet.bCheck()&&y.default.Open(0),!0;if(this.btn_team.ProcTouch(t,e,i))return this.btn_team.bCheck()&&PublicChat_Send.AddTeam(),!0;if(r.default.bInRect(e,i,this.btn_voice.iX,this.btn_voice.iY,this.btn_voice.iW,this.btn_voice.iH)){if(1==t){if(0==this.iRecordStat){if(!h.default.m_vi.StartRecord())return _.default.easymsg.AddMessage("启动录音失败"),!0;this.iRecordStat=1,this.iRecordDelay=n.default.VOICETIMEOUT}}else 3==t&&1==this.iRecordStat&&(h.default.m_vi.StopRecord(),this.iRecordStat=2);return this.iRecordingShow=1,!0}if(1==this.iRecordStat)return 3==t&&(h.default.m_vi.StopRecord(),this.iRecordStat=0),this.iRecordingShow=2,!0;for(this.iRecordingShow=0,a=0;a<7;a++)this.btn_channel[a].ProcTouch(t,e,i)&&this.btn_channel[a].bCheck()&&(6==a?S.default.bHaveGoods(122,1)?PublicChat_Send.iChannelPoint=a:_.default.easymsg.AddMessage("背包中没有小喇叭"):PublicChat_Send.iChannelPoint=a);return PublicChat_Send.in_speak.ProcTouch(t,e,i),this.btn_send.ProcTouch(t,e,i)?(this.btn_send.bCheck()&&(this.bSend=!0,0!=this.iRecordStat&&_.default.easymsg.AddMessage("正在处理中，请稍后...")),!0):!!r.default.bOnRect(e,i,this.iX,this.iY,this.iW,this.iH)||(3==t&&c.default.gi().PopStat(1),!1)}},{key:"SendMessage",value:function(){var t;if(PublicChat_Send.in_speak.sDetail.length>100)_.default.easymsg.AddMessage("文字太长"),PublicChat_Send.in_speak.sDetail="";else if(PublicChat_Send.in_speak.sDetail.length>0){var e=PublicChat_Send.in_speak.sDetail;for(t=0;t<4;t++)PublicChat_Send.cext[t].type>=100||(e.indexOf("#x"+(t+1))>=0?e=3==t?e.replace("#x"+(t+1),n.default.EXTCOLOR+"[语音:"+PublicChat_Send.cext[t].detail+"]#o"):e.replace("#x"+(t+1),n.default.EXTCOLOR+"["+PublicChat_Send.cext[t].name+"]#o"):PublicChat_Send.cext[t].type=100);d.default.gi().s_PublicChat(PublicChat_Send.iChannelPoint,e),PublicChat_Send.in_speak.sDetail="",PublicChat_Send.ClearCext(),c.default.gi().PopStat(1)}else _.default.easymsg.AddMessage("请先输入文字")}}]),PublicChat_Send}();i.default=R,R.iChannelPoint=0,R.in_speak=null,R.cext=null,R.AddTeam=function(){var t;if(x.default.bTeamLeader()){for(t=0;t<3;t++)if(100==R.cext[t].type)return R.cext[t].type=4,R.cext[t].eid=w.default.me.iRid,R.cext[t].tid=0,R.cext[t].name="申请入队",R.in_speak.sDetail+=P.default._TARGET[x.default.iTeamTarget]+""+x.default.iLev1+"级~"+x.default.iLev2+"级#x"+(t+1),void R.in_speak.OpenInput();_.default.easymsg.AddMessage("最多添加3个发送项目")}else _.default.easymsg.AddMessage("队长才能添加")},R.AddGoods=function(t){var e;for(e=0;e<3;e++)if(100==R.cext[e].type)return R.cext[e].type=0,R.cext[e].eid=t.iGid,R.cext[e].tid=t.iTid,R.cext[e].name=h.default.de_goods.strValue(t.iTid,0,4),R.in_speak.sDetail+="#x"+(e+1),void R.in_speak.OpenInput();_.default.easymsg.AddMessage("最多添加3个物品或宠物")},R.AddPet=function(t){var e;for(e=0;e<3;e++)if(100==R.cext[e].type)return R.cext[e].type=1,R.cext[e].eid=t.iPid,R.cext[e].tid=t.iTid,R.cext[e].name=h.default.de_pet.strValue(t.iTid,0,1),R.in_speak.sDetail+="#x"+(e+1),void R.in_speak.OpenInput();_.default.easymsg.AddMessage("最多添加3个物品或宠物")},R.bOpenInput=!0,R.Open=function(){c.default.gi().PushStat(c.default.GS_SENDPUBLICCHAT)},R.ClearCext=function(){var t;if(null==R.cext)for(R.cext=new Array(5),t=0;t<5;t++)R.cext[t]=new v.default;for(t=0;t<5;t++)R.cext[t].type=100}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/chat/SelectColor":98,"../../../../../engtst/mgm/gameing/chat/SelectFace":99,"../../../../../engtst/mgm/gameing/chat/SelectGoods":100,"../../../../../engtst/mgm/gameing/chat/SelectPet":101,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../engtst/mgm/gameing/me/pet/Pets":247,"../../../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../../../engtst/mgm/gameing/me/team/TeamCreate":267,"../../../../../zero/Interface/GameVersion":317,"../../../../../zero/Interface/PublicInterface":318,"./_EXTDATA":113}],111:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../zero/Interface/PublicInterface")),s=_interopRequireDefault(t("../../../../../map/MapManager")),r=_interopRequireDefault(t("../../../../../config/GameData")),o=_interopRequireDefault(t("../../../../../config/GmConfig")),u=_interopRequireDefault(t("../../../../../config/XDefine")),l=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),f=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),d=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),c=_interopRequireDefault(t("../../../../../engtst/mgm/History/XRecordFast")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/LockRect")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/Gameing")),D=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/NearRole")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/SystemOperate"))),y=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/gov/MyGov")),w=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/JQMode")),S=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),x=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/school/BackToSchool")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/team/MyTeam"))),P=_interopRequireDefault(t("./_EXTDATA")),v=_interopRequireDefault(t("./PublicChat_BigFrame")),R=_interopRequireDefault(t("./PublicChat_Send"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var M=function(){function PublicMessage(){var t;for(_classCallCheck(this,PublicMessage),this.sName="",this.sMessage="",this.exts=new Array(5),this.lrs_small=new Array(5),this.lrs_big=new Array(5),t=0;t<5;t++)this.exts[t]=new P.default,this.lrs_small[t]=new _.default,this.lrs_big[t]=new _.default}return a(PublicMessage,[{key:"copyfrom",value:function(t){this.channel=t.channel,this.iRid=t.iRid,this.sName=t.sName,this.iRax=t.iRax,this.iFlag=t.iFlag,this.sMessage=t.sMessage,this.exts[0].copyfrom(t.exts[0]),this.exts[1].copyfrom(t.exts[1]),this.exts[2].copyfrom(t.exts[2]),this.exts[3].copyfrom(t.exts[3]),this.exts[4].copyfrom(t.exts[4])}}]),PublicMessage}(),C=function(){function PublicChat_SmallFrame(){var t;for(_classCallCheck(this,PublicChat_SmallFrame),this.pm3f=f.default.gi(),this.bMessageSwitch=new Array(10),t=0;t<10;t++)this.bMessageSwitch[t]=!0;for(PublicChat_SmallFrame.iW=475,PublicChat_SmallFrame.iH=160,PublicChat_SmallFrame.iModifyW=PublicChat_SmallFrame.iW,PublicChat_SmallFrame.iModifyH=PublicChat_SmallFrame.iH,this.bOpen=!0,this.bOpening=!1,this.bCloseing=!1,this.btn_open=null,this.btn_speak=null,this.btn_close=null,this.btn_full=null,this.btn_voice=null,this.pms=new Array(PublicChat_SmallFrame.MAXMESSAGE),t=0;t<PublicChat_SmallFrame.MAXMESSAGE;t++)this.pms[t]=new M;this.iMessageCount=0,PublicChat_SmallFrame.bLock=!1,this.sSpeakers=new Array(32),this.iSpeakerCount=-1,this.iSpeakerX=0,this.iSpeakerWidth=0,this.iRecordDelay=0,this.iRecordStat=0,this.iVoiceChannelPoint=0,this.iRecordingShow=0,this._CHANNELSHORT=["当","队","门","帮","世","传","系","副"],this._CHANNELCOLORS=["#cffffff","#cff8000","#cff0000","#c00ff00","#c00ffff","#c80a0ff","#cffff00","#cff00ff"],this._CHANNELCOLORI=[4294967295,4294934528,4294901760,4278255360,4278255615,4286619903,4294967040,4294902015]}return a(PublicChat_SmallFrame,[{key:"AddSpeaker",value:function(t,e){-1==this.iSpeakerCount?(this.iSpeakerCount=1,this.sSpeakers[1]=t+":"+e,this.NextSpeaker()):this.iSpeakerCount<30&&(this.iSpeakerCount++,this.sSpeakers[this.iSpeakerCount]=t+":"+e)}},{key:"DrawSpeaker",value:function(){this.iSpeakerCount<0||(this.iSpeakerX+this.iSpeakerWidth<0&&this.NextSpeaker(),this.iSpeakerX-=o.default.SCRW/100,this.pm3f.FillRect_2D(0,60,o.default.SCRW,90,2147483648),this.pm3f.DrawTextEx(this.iSpeakerX,75,this.sSpeakers[0],4294967295,30,101,1,1,0,0,-2))}},{key:"NextSpeaker",value:function(){var t;for(t=0;t<this.iSpeakerCount;t++)this.sSpeakers[t]=this.sSpeakers[t+1];this.iSpeakerCount--,this.iSpeakerWidth=this.pm3f.GetTextWidth(this.sSpeakers[0],30),this.iSpeakerX=o.default.SCRW}},{key:"DrawMessage",value:function(t,e){var i,a,n,s,u,l,d,m,_,p=o.default.SCRH-10,b="";for(s=t+36,u=e,l=PublicChat_SmallFrame.iW-40,d=PublicChat_SmallFrame.iH,i=0;i<this.iMessageCount;i++)this.pms[i].ox=-1;for(this.pm3f.SetViewClip(s-40+3,u+3,s+l-3,u+d-3),i=0;i<this.iMessageCount;i++)if((!(this.pms[i].channel<10)||this.bMessageSwitch[this.pms[i].channel])&&(0!=(1&c.default.iFilterChannel)||0!=this.pms[i].channel)&&!(0==(2&c.default.iFilterChannel)&&1==this.pms[i].channel||0==(4&c.default.iFilterChannel)&&2==this.pms[i].channel||0==(8&c.default.iFilterChannel)&&3==this.pms[i].channel||0==(16&c.default.iFilterChannel)&&(4==this.pms[i].channel||50==this.pms[i].channel)||0==(32&c.default.iFilterChannel)&&5==this.pms[i].channel||0==(64&c.default.iFilterChannel)&&(6==this.pms[i].channel||7==this.pms[i].channel))){switch(this.pms[i].channel){case 0:case 1:case 2:case 3:case 4:case 50:b="["+this.pms[i].sName+"]:"+this.pms[i].sMessage;break;case 5:case 6:case 7:b=""==this.pms[i].sName?this.pms[i].sMessage:"["+this.pms[i].sName+"]:"+this.pms[i].sMessage}for(50==(a=this.pms[i].channel)&&(a=4),(a<0||a>7)&&(a=0),b=this._CHANNELCOLORS[a]+b,n=0;n<5;n++)switch(this.pms[i].exts[n].type){case 0:b=g.default.gi().InsertLocker(n,b,"["+h.default.de_goods.strValue(this.pms[i].exts[n].tid,0,4)+"]",r.default.EXTCOLOR,"#c00ff00");break;case 1:b=g.default.gi().InsertLocker(n,b,"["+h.default.de_pet.strValue(this.pms[i].exts[n].tid,0,1)+"]",r.default.EXTCOLOR,"#c00ff00");break;case 2:b=g.default.gi().InsertLocker(n,b,"[语音:"+this.pms[i].exts[n].detail+"]",r.default.EXTCOLOR,"#c00ff00");break;case 3:b=g.default.gi().InsertLocker(n,b,"["+this.pms[i].sName+"]",this._CHANNELCOLORS[a],this._CHANNELCOLORS[a]);break;case 4:b=g.default.gi().InsertLocker(n,b,"[申请入队]",r.default.EXTCOLOR,"#c00ff00")}for(g.default.gi().Format(b,l,D.default.WordSize(24)),g.default.gi().CheckOutRect(),m=s,_=p-g.default.gi().iH,n=0;n<5;n++)switch(this.pms[i].exts[n].type){case 0:case 1:case 2:case 3:case 4:if(this.pms[i].lrs_small[n].CopyFrom(g.default.gi().lrs[n]),this.pms[i].exts[n].iShowDelay>0){for(var y=0;y<this.pms[i].lrs_small[n].iCount;y++){var w=m+this.pms[i].lrs_small[n].rs[y].iX,S=_+this.pms[i].lrs_small[n].rs[y].iY,x=m+this.pms[i].lrs_small[n].rs[y].iX+this.pms[i].lrs_small[n].rs[y].iW,P=_+this.pms[i].lrs_small[n].rs[y].iY+this.pms[i].lrs_small[n].rs[y].iH;f.default.gi().FillRect_2D(w,S,x,P,16711935|this.pms[i].exts[n].iShowDelay<<24)}this.pms[i].exts[n].iShowDelay>200?this.pms[i].exts[n].iShowDelay-=3:this.pms[i].exts[n].iShowDelay>150?this.pms[i].exts[n].iShowDelay-=6:this.pms[i].exts[n].iShowDelay>100?this.pms[i].exts[n].iShowDelay-=9:this.pms[i].exts[n].iShowDelay>50?this.pms[i].exts[n].iShowDelay-=12:this.pms[i].exts[n].iShowDelay=0}}if(h.default.xani_frame.DrawAnima(s-16-12,p-g.default.gi().iH+g.default.gi().iLineH[0]-24-1,"聊天频道框24_24",0),f.default.gi().DrawTextEx(s-16,p-g.default.gi().iH+12+g.default.gi().iLineH[0]-24-1,this._CHANNELSHORT[a],this._CHANNELCOLORI[a],20,101,1,1,0,-2,-2),g.default.gi().Draw(s,p-g.default.gi().iH),this.pms[i].ox=s,this.pms[i].oy=p-g.default.gi().iH,this.pms[i].ow=g.default.gi().iW,this.pms[i].oh=g.default.gi().iH,(p-=g.default.gi().iH)<=u)break}this.pm3f.NoClip()}},{key:"LoadButtons",value:function(){if(null==this.btn_open&&(this.btn_open=new l.default(h.default.xani_nui2),this.btn_open.InitButton("左下开关2")),null==this.btn_close&&(this.btn_close=new l.default(h.default.xani_nui2),this.btn_close.InitButton("左下开关1")),null==this.btn_speak&&(this.btn_speak=new l.default(h.default.xani_nui2),this.btn_speak.InitButton("左下发言")),null==this.btn_full&&(this.btn_full=new l.default(h.default.xani_nui2),this.btn_full.InitButton("左下展开")),null==this.btn_voice){this.btn_voice=new Array(10);for(var t=0;t<6;t++)this.btn_voice[t]=new l.default(h.default.xani_button),this.btn_voice[t].InitButton("喇叭按钮60_60")}}},{key:"Draw",value:function(){if(!s.default.gi().vbk.mapdialog.bHideUI()&&!w.default.jq.bJQLock()){this.LoadButtons();var t=5;this.bOpening?(PublicChat_SmallFrame.iModifyW+PublicChat_SmallFrame.iW/t<PublicChat_SmallFrame.iW?PublicChat_SmallFrame.iModifyW+=PublicChat_SmallFrame.iW/t:PublicChat_SmallFrame.iModifyW=PublicChat_SmallFrame.iW,PublicChat_SmallFrame.iModifyH+PublicChat_SmallFrame.iH/t<PublicChat_SmallFrame.iH?PublicChat_SmallFrame.iModifyH+=PublicChat_SmallFrame.iH/t:PublicChat_SmallFrame.iModifyH=PublicChat_SmallFrame.iH,PublicChat_SmallFrame.iModifyW==PublicChat_SmallFrame.iW&&PublicChat_SmallFrame.iModifyH==PublicChat_SmallFrame.iH&&(this.bOpening=!1,this.bOpen=!0)):this.bCloseing&&(PublicChat_SmallFrame.iModifyW>0?PublicChat_SmallFrame.iModifyW-=PublicChat_SmallFrame.iW/t:PublicChat_SmallFrame.iModifyW=0,PublicChat_SmallFrame.iModifyH>0?PublicChat_SmallFrame.iModifyH-=PublicChat_SmallFrame.iH/t:PublicChat_SmallFrame.iModifyH=0,0==PublicChat_SmallFrame.iModifyW&&0==PublicChat_SmallFrame.iModifyH&&(this.bCloseing=!1,this.bOpen=!1));var e=o.default.SCRH-PublicChat_SmallFrame.iModifyH;PublicChat_SmallFrame.iModifyW>0&&PublicChat_SmallFrame.iModifyH>0&&this.pm3f.FillRect_2D(0,e,0+PublicChat_SmallFrame.iModifyW,e+PublicChat_SmallFrame.iModifyH,2147483648),this.bOpen&&this.DrawMessage(0,e),this.btn_open.Move(0,o.default.SCRH-60,60,60),this.btn_open.SetCheckRect(0,o.default.SCRH-60,60,60),this.btn_close.Move(PublicChat_SmallFrame.iModifyW-60,o.default.SCRH-(PublicChat_SmallFrame.iModifyH+60)/2,60,60),this.btn_close.SetCheckRect(PublicChat_SmallFrame.iModifyW-60,o.default.SCRH-(PublicChat_SmallFrame.iModifyH+60)/2,60,60);var i=0;n.default.gi().iLHX>0&&(i=n.default.gi().iLHX);var a=o.default.SCRH-PublicChat_SmallFrame.iModifyH-80;for(this.btn_speak.Move(i,a,72,72),this.btn_speak.SetCheckRect(i,a,72,72),i+=80,this.btn_full.Move(i,a,72,72),this.btn_full.SetCheckRect(i,a,72,72),i+=80,t=0;t<6;t++)0!=(c.default.iFastVoice&1<<t)&&(this.btn_voice[t].Move(i,a,72,72),i+=80);if(this.bOpen||this.bOpening||this.bCloseing){for(h.default.xani_frame.DrawAnima(this.btn_speak.iX,this.btn_speak.iY,"右下底框72_72",0),h.default.xani_icon.DrawAnima(this.btn_speak.iX,this.btn_speak.iY,"公聊发送",0),h.default.xani_frame.DrawAnima(this.btn_full.iX,this.btn_full.iY,"右下底框72_72",0),h.default.xani_icon.DrawAnima(this.btn_full.iX,this.btn_full.iY,"公聊半屏",0),t=0;t<6;t++)0!=(c.default.iFastVoice&1<<t)&&(h.default.xani_frame.DrawAnima(this.btn_voice[t].iX,this.btn_voice[t].iY,"右下底框72_72",0),h.default.xani_icon.DrawAnima(this.btn_voice[t].iX,this.btn_voice[t].iY,"公聊话筒",0),f.default.gi().DrawText_2(this.btn_voice[t].iX+72-10,this.btn_voice[t].iY+10,this._CHANNELSHORT[t],4294967295,30,101,1,1,0,-2,-2,4,4278199373));switch(this.iRecordStat){case 0:break;case 1:m.default.frame_type4("语音输入背景20_20",o.default.SCRW/2-120,o.default.SCRH/2-120,240,305,20,20),m.default.frame_type1("语音输入字底框20_35",o.default.SCRW/2-100,o.default.SCRH/2+100+20,200,20);var u=o.default.SCRW/2-100,l=o.default.SCRH/2+100+20;f.default.gi().FillRect_2D(u,l,u+200*(r.default.VOICETIMEOUT-this.iRecordDelay)/r.default.VOICETIMEOUT,l+35,822083583),1==this.iRecordingShow?(h.default.xani_other.DrawAnima(o.default.SCRW/2-100,o.default.SCRH/2-100,"录音中",0),f.default.gi().DrawTextEx(o.default.SCRW/2,o.default.SCRH/2+100+20+17.5,"手指划开，取消录制",4294967295,18,101,1,1,0,-2,-2)):2==this.iRecordingShow&&(h.default.xani_other.DrawAnima(o.default.SCRW/2-100,o.default.SCRH/2-100,"移开手指",0),f.default.gi().DrawTextEx(o.default.SCRW/2,o.default.SCRH/2+100+20+17.5,"手指划开，取消发送",4294967295,18,101,1,1,0,-2,-2));break;case 2:"empty"!=h.default.m_vi.sRecordName&&(this.iRecordDelay=r.default.VOICETIMEOUT,h.default.m_vi.UpLoad(),this.iRecordStat=3);break;case 3:"empty"!=h.default.m_vi.sUrlName&&(this.iRecordDelay=r.default.VOICETIMEOUT,h.default.m_vi.StartRecognize(),this.iRecordStat=4);break;case 4:if("empty"!=h.default.m_vi.sRecognizeResult){if(h.default.m_vi.iRecordTime<=1e3){p.default.easymsg.AddMessage("录音时间太短"),this.iRecordStat=0;break}R.default.ClearCext(),R.default.cext[3].type=2,R.default.cext[3].eid=h.default.m_vi.iRecordTime,R.default.cext[3].name=h.default.m_vi.sUrlName,R.default.cext[3].detail=h.default.m_vi.sRecognizeResult,this.iRecordStat=0,d.default.gi().s_PublicChat(this.iVoiceChannelPoint,r.default.EXTCOLOR+"[语音:"+R.default.cext[3].detail+"]#o")}}this.btn_close.Move(PublicChat_SmallFrame.iModifyW-60,o.default.SCRH-(PublicChat_SmallFrame.iModifyH+60)/2,60,60)}this.iRecordStat>0&&(this.iRecordDelay--,this.iRecordDelay<=0&&(this.iRecordStat=0,h.default.m_vi.StopRecord(),p.default.easymsg.AddMessage("录音超时取消"))),this.bOpening||this.bCloseing||(this.bOpen?this.btn_close.Draw():this.btn_open.Draw())}}},{key:"SwichFrame",value:function(){this.bOpening?(this.bOpening=!1,this.bCloseing=!0):this.bCloseing?(this.bOpening=!0,this.bCloseing=!1):this.bOpen?(this.bOpening=!1,this.bCloseing=!0):this.bOpen||(this.bOpening=!0,this.bCloseing=!1)}},{key:"ProcTouch",value:function(t,e,i){var a,n,s=o.default.SCRH-PublicChat_SmallFrame.iModifyH;if(PublicChat_SmallFrame.bLock){switch(t){case 2:PublicChat_SmallFrame.iW=PublicChat_SmallFrame.iW+(e-this.iLockX),PublicChat_SmallFrame.iW<235&&(PublicChat_SmallFrame.iW=235),PublicChat_SmallFrame.iH=PublicChat_SmallFrame.iH-(i-this.iLockY),PublicChat_SmallFrame.iH<110&&(PublicChat_SmallFrame.iH=110),e>this.iLockX&&PublicChat_SmallFrame.iW>o.default.SCRW-40&&(PublicChat_SmallFrame.iW=o.default.SCRW),PublicChat_SmallFrame.iW>o.default.SCRW&&(PublicChat_SmallFrame.iW=o.default.SCRW),i<this.iLockY&&PublicChat_SmallFrame.iH>o.default.SCRH-40&&(PublicChat_SmallFrame.iH=o.default.SCRH),PublicChat_SmallFrame.iH>o.default.SCRH&&(PublicChat_SmallFrame.iH=o.default.SCRH),this.iLockX=e,this.iLockY=i,PublicChat_SmallFrame.iModifyW=PublicChat_SmallFrame.iW,PublicChat_SmallFrame.iModifyH=PublicChat_SmallFrame.iH;break;case 3:PublicChat_SmallFrame.bLock=!1}return!0}if(!this.bOpen&&this.btn_open.ProcTouch(t,e,i))return this.btn_open.bCheck()&&this.SwichFrame(),!0;if(this.bOpen&&this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&this.SwichFrame(),!0;if(this.bOpen){if(this.btn_speak.ProcTouch(t,e,i))return this.btn_speak.bCheck()&&R.default.Open(),!0;if(this.btn_full.ProcTouch(t,e,i))return this.btn_full.bCheck()&&v.default.Open(),!0;for(n=-1,a=0;a<6;a++)if(0!=(c.default.iFastVoice&1<<a)&&u.default.bInRect(e,i,this.btn_voice[a].iX,this.btn_voice[a].iY,this.btn_voice[a].iW,this.btn_voice[a].iH)){if(0==this.iRecordStat&&1==t){if(1==a&&x.default.bNoTeam())return p.default.easymsg.AddMessage("还未组队"),!0;if(2==a&&S.default.me.rbs.iSchoolId<=0)return p.default.easymsg.AddMessage("还未加入门派"),!0;if(3==a&&y.default.mg.iRealGid<=0)return p.default.easymsg.AddMessage("还未加入帮派"),!0}if(this.iRecordStat>=2)return!0;if(n=a,1==t){if(0==this.iRecordStat){if(!h.default.m_vi.StartRecord())return p.default.easymsg.AddMessage("启动录音失败"),!0;this.iRecordStat=1,this.iRecordDelay=r.default.VOICETIMEOUT,this.iVoiceChannelPoint=a}}else 3==t&&1==this.iRecordStat&&(n==this.iVoiceChannelPoint?(h.default.m_vi.StopRecord(),this.iRecordStat=2):(h.default.m_vi.StopRecord(),this.iRecordStat=0))}if(1==this.iRecordStat)return n==this.iVoiceChannelPoint?this.iRecordingShow=1:(3==t&&(h.default.m_vi.StopRecord(),this.iRecordStat=0),this.iRecordingShow=2),!0;if(this.iRecordingShow=0,3==t)for(a=0;a<this.iMessageCount;a++)if(-1!=this.pms[a].ox&&u.default.bInRect(e,i,this.pms[a].ox,this.pms[a].oy,this.pms[a].ow,this.pms[a].oh))for(n=0;n<5;n++)if(h.default.sop(""+this.pms[a].exts[n].type),!(this.pms[a].exts[n].type>=100)&&!(this.pms[a].exts[n].iShowDelay>0)&&this.pms[a].lrs_small[n].bIn(e-this.pms[a].ox,i-this.pms[a].oy))switch(this.pms[a].exts[n].type){case 0:d.default.gi().s_WatchOn(1,this.pms[a].exts[n].eid,0,""),this.pms[a].exts[n].iShowDelay=255;break;case 1:d.default.gi().s_WatchOn(2,this.pms[a].exts[n].eid,0,""),this.pms[a].exts[n].iShowDelay=255;break;case 2:h.default.m_vi.PlayUrlVoice(this.pms[a].exts[n].name),this.pms[a].exts[n].iShowDelay=255;break;case 3:this.pms[a].exts[n].eid>1e3&&d.default.gi().s_WatchOn(0,this.pms[a].exts[n].eid,0,""),this.pms[a].exts[n].iShowDelay=255;break;case 4:x.default.bInTeam()?p.default.easymsg.AddMessage("已有队伍"):d.default.gi().s_TeamOperate(3,this.pms[a].exts[n].eid,0),this.pms[a].exts[n].iShowDelay=255}}return u.default.bInRect(e,i,0+PublicChat_SmallFrame.iW-60,s,60,60)&&1==t?(PublicChat_SmallFrame.bLock=!0,this.iLockX=e,this.iLockY=i,!0):(PublicChat_SmallFrame.bLock=!1,!!u.default.bInRect(e,i,0,s,PublicChat_SmallFrame.iModifyW,PublicChat_SmallFrame.iModifyH))}},{key:"GetMessage",value:function(t){var e=t.GetNextByte(),i=t.GetNextInt(),a=t.GetNextString(),n=t.GetNextByte(),s=t.GetNextByte(),r=t.GetNextString();if(50==e&&this.AddSpeaker(a,r),this.AddMessage(e,i,a,n,s,r,t),0==e||1==e)if(i==S.default.me.iRid)S.default.me.sPopoString=r,S.default.me.iPopoDelay=200;else{var o=b.default.gameing.findnrs(i);null!=o&&(o.sPopoString=r,o.iPopoDelay=200)}}},{key:"AddMessage",value:function(t,e,i,a,n,s,r){var o;for(this.iMessageCount>=PublicChat_SmallFrame.MAXMESSAGE&&(this.iMessageCount=PublicChat_SmallFrame.MAXMESSAGE-1),o=this.iMessageCount;o>0;o--)this.pms[o].copyfrom(this.pms[o-1]);for(this.pms[0].channel=t,this.pms[0].iRid=e,this.pms[0].sName=i,this.pms[0].iRax=a,this.pms[0].iFlag=n,this.pms[0].sMessage=s,5==t&&e<1e3&&(this.pms[0].iRax=6,this.pms[0].sName="某某"),t<5?(this.pms[0].exts[0].type=3,this.pms[0].exts[0].eid=e):this.pms[0].exts[0].type=100,o=1;o<5&&null!=r;o++)if(r.iOffset>=r.iLength)this.pms[0].exts[o].type=100;else switch(this.pms[0].exts[o].type=r.GetNextByte(),this.pms[0].exts[o].type){case 0:case 1:case 4:this.pms[0].exts[o].eid=r.GetNextInt(),this.pms[0].exts[o].tid=r.GetNextShort();break;case 2:this.pms[0].exts[o].eid=r.GetNextInt(),this.pms[0].exts[o].name=r.GetNextString(),this.pms[0].exts[o].detail=r.GetNextString(),0!=(1&c.default.iAutoPlay)&&0==t?h.default.m_vi.PlayUrlVoice(this.pms[0].exts[o].name):0!=(2&c.default.iAutoPlay)&&1==t?h.default.m_vi.PlayUrlVoice(this.pms[0].exts[o].name):0!=(4&c.default.iAutoPlay)&&2==t?h.default.m_vi.PlayUrlVoice(this.pms[0].exts[o].name):0!=(8&c.default.iAutoPlay)&&3==t?h.default.m_vi.PlayUrlVoice(this.pms[0].exts[o].name):0==(16&c.default.iAutoPlay)||4!=t&&50!=t?0!=(32&c.default.iAutoPlay)&&5==t&&h.default.m_vi.PlayUrlVoice(this.pms[0].exts[o].name):h.default.m_vi.PlayUrlVoice(this.pms[0].exts[o].name)}this.iMessageCount++}}]),PublicChat_SmallFrame}();i.default=C,C.iW,C.iH,C.iModifyW,C.iModifyH,C.bLock,C.MAXMESSAGE=100,C.chat=null,C.gi=function(){return null==C.chat&&(C.chat=new C),C.chat},C.CHANNEL_DANGQIAN=0,C.CHANNEL_DUIWU=1,C.CHANNEL_MENPAI=2,C.CHANNEL_BANGPAI=3,C.CHANNEL_SHIJIE=4,C.CHANNEL_CHUANWEN=5,C.CHANNEL_XITONG=6,C.CHANNEL_FUBEN=7},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/History/XRecordFast":67,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/format/LockRect":83,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/Gameing":91,"../../../../../engtst/mgm/gameing/NearRole":93,"../../../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/school/BackToSchool":255,"../../../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../../../map/MapManager":286,"../../../../../zero/Interface/PublicInterface":318,"./PublicChat_BigFrame":109,"./PublicChat_Send":110,"./_EXTDATA":113}],112:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../engine/control/XCheckBox")),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/History/XRecordFast")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function SetChatValue(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SetChatValue);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SetChatValue.__proto__||Object.getPrototypeOf(SetChatValue)).call(this));for(i._FCLIST=["当前频道","队伍频道","门派频道","帮派频道","世界频道","传闻频道","系统频道"],i._AUTO=["当前语音","队伍语音","门派语音","帮派语音","世界语音","传闻语音"],i._FAST=["当前语音","队伍语音","门派语音","帮派语音","世界语音","传闻语音"],i.iW=700,i.iH=570,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.chk_fchannel=new Array(8),i.chk_autoplay=new Array(8),i.chk_fastvoice=new Array(8),e=0;e<7;e++)i.chk_fchannel[e]=new o.default(l.default.xani_button),i.chk_fchannel[e].InitBox("复选框50_53"),0==(h.default.iFilterChannel&1<<e)?i.chk_fchannel[e].bTrue=!1:i.chk_fchannel[e].bTrue=!0,i.chk_fchannel[e].sDetail=i._FCLIST[e];for(e=0;e<6;e++)i.chk_autoplay[e]=new o.default(l.default.xani_button),i.chk_autoplay[e].InitBox("复选框50_53"),0==(h.default.iAutoPlay&1<<e)?i.chk_autoplay[e].bTrue=!1:i.chk_autoplay[e].bTrue=!0,i.chk_autoplay[e].sDetail=i._AUTO[e],i.chk_fastvoice[e]=new o.default(l.default.xani_button),i.chk_fastvoice[e].InitBox("复选框50_53"),0==(h.default.iFastVoice&1<<e)?i.chk_fastvoice[e].bTrue=!1:i.chk_fastvoice[e].bTrue=!0,i.chk_fastvoice[e].sDetail=i._FAST[e];return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SetChatValue,r.default),a(SetChatValue,[{key:"Draw",value:function(){var t,e,i;for(d.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),this.iH-50,200,e=this.iX+25,i=this.iY+25,d.default.frame_type4("聊天显示框暗20_20",e,i,200,this.iH-50,20,20),d.default.frame_type4("单色内框a20_20",e+20,i+20,160,50,20,20),u.default.gi().DrawTextEx(e+100,i+20+25,"频道过滤",4279724881,30,101,1,1,0,-2,-2),t=0;t<7;t++)this.chk_fchannel[t].Move(e+20,i+20+50+20+60*t,50,50),this.chk_fchannel[t].Draw();for(e+=225,d.default.frame_type4("聊天显示框暗20_20",e,i,200,this.iH-50,20,20),d.default.frame_type4("单色内框a20_20",e+20,i+20,160,50,20,20),u.default.gi().DrawTextEx(e+100,i+20+25,"自动播放",4279724881,30,101,1,1,0,-2,-2),t=0;t<6;t++)this.chk_autoplay[t].Move(e+20,i+20+50+20+60*t,50,50),this.chk_autoplay[t].Draw();for(e+=225,d.default.frame_type4("聊天显示框暗20_20",e,i,200,this.iH-50,20,20),d.default.frame_type4("单色内框a20_20",e+20,i+20,160,50,20,20),u.default.gi().DrawTextEx(e+100,i+20+25,"快捷语音",4279724881,30,101,1,1,0,-2,-2),t=0;t<6;t++)this.chk_fastvoice[t].Move(e+20,i+20+50+20+60*t,50,50),this.chk_fastvoice[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<7;a++)this.chk_fchannel[a].ProcTouch(t,e,i)&&(h.default.iFilterChannel=h.default.iFilterChannel&~(1<<a),this.chk_fchannel[a].bTrue&&(h.default.iFilterChannel|=1<<a));for(a=0;a<6;a++)this.chk_autoplay[a].ProcTouch(t,e,i)&&(h.default.iAutoPlay=h.default.iAutoPlay&~(1<<a),this.chk_autoplay[a].bTrue&&(h.default.iAutoPlay|=1<<a)),this.chk_fastvoice[a].ProcTouch(t,e,i)&&(h.default.iFastVoice=h.default.iFastVoice&~(1<<a),this.chk_fastvoice[a].bTrue&&(h.default.iFastVoice|=1<<a));return s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||f.default.gi().PopStat(1),!1}}]),SetChatValue}();i.default=c,c.Open=function(){f.default.gi().PushStat(f.default.GS_SETCHATVALUE)}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XCheckBox":17,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/History/XRecordFast":67,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72}],113:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function _EXTDATA(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_EXTDATA)}return a(_EXTDATA,[{key:"_EXTDATA",value:function(){this.iShowDelay=0}},{key:"copyfrom",value:function(t){this.type=t.type,this.eid=t.eid,this.tid=t.tid,this.name=t.name,this.detail=t.detail,this.iShowDelay=t.iShowDelay}}]),_EXTDATA}();i.default=n},{}],114:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=(_interopRequireDefault(t("../../../../config/XDefine")),_interopRequireDefault(t("../../../../engine/BaseClass"))),r=_interopRequireDefault(t("../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),m=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function CameoOperate(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,CameoOperate);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(CameoOperate.__proto__||Object.getPrototypeOf(CameoOperate)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=950,i.iH=475,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new r.default(l.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_goods=new Array(8),i.gmake=new Array(8),i.igsub=new Array(8),e=0;e<8;e++)i.btn_goods[e]=new r.default(l.default.xani_button),i.btn_goods[e].InitButton("物品格"),i.gmake[e]=null,i.igsub[e]=1;return i.btn_goods[0].Move(i.iX+35+80,i.iY+120,80,80),i.btn_goods[1].Move(i.iX+35+80+140,i.iY+120,80,80),i.btn_make=new o.default(l.default.xani_nui2),i.btn_make.InitButton("按钮1_110"),i.btn_make.sName="制造",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(CameoOperate,s.default),a(CameoOperate,[{key:"Draw",value:function(){var t,e,i;for(d.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"镶","嵌","合","成"),this.btn_close.Draw(),l.default.xani_nui3.DrawAnima(this.iX+230,this.iY+200,"炼丹炉背景",0),e=this.iX+this.iW-30-430-40,i=this.iY+30,d.default.new_framein(e,i,470,this.iH-60),u.default.gi().DrawTextEx(e+20,i+20,"双击选择装备或宝石：",4278206039,30,101,1,1,0,0,0),this.iGx=e+20,this.iGy=i+20+30,m.default.new_DrawGoods(this.iGx,this.iGy,g.default.gi().goods[2],this.gmake,this.igsub),null!=this.lockgoods&&m.default.new_DrawRect(this.iGx,this.iGy,g.default.gi().goods[2],this.lockgoods,0),t=0;t<2;t++)l.default.xani_nui3.DrawAnima(this.btn_goods[t].iX,this.btn_goods[t].iY,"物品格子",0),null!=this.gmake[t]&&m.default.new_DrawOneGoods_ext(this.btn_goods[t].iX,this.btn_goods[t].iY,this.gmake[t],1);i=this.iY+this.iH-30-160,d.default.new_framein(this.iX+30,i,400,160);var a="#c003e57"+this.Check();c.default.gi().FormatEx(a,360,25,0,0,30),c.default.gi().Draw(this.iX+30+20,i+20),this.btn_make.Move(this.iX+30+400-20-110,i+160-20-52,110,52),1==this.iCanMake?(this.btn_make.sName="合成",this.btn_make.Draw()):2==this.iCanMake?(this.btn_make.sName="镶嵌",this.btn_make.Draw()):3==this.iCanMake&&(this.btn_make.sName="使用",this.btn_make.Draw()),m.default.bShowDetail()&&m.default.new_DrawDetail(null,-1,-1,0)}},{key:"Check",value:function(){var t,e,i,a;if(this.iCanMake=0,null==this.gmake[0])return"请先放入镶嵌的装备或合成的宝石";if(-1==(i=l.default.de_goods.intValue(this.gmake[0].iTid,-1,16)))return null==this.gmake[1]?"请先放入同类型同等级的宝石进行合成":this.gmake[1].iTid!=this.gmake[0].iTid?"宝石类型不同，不能合成":this.gmake[1].iAtts[0]!=this.gmake[0].iAtts[0]?"宝石等级不同，不能合成":(this.iCanMake=1,"#c00ff00宝石齐备，可以合成");if(null!=this.gmake[1]&&229==this.gmake[1].iTid)return this.iCanMake=3,"碎石锤可以除去装备上的宝石";switch(i){case 0:if(null==this.gmake[1])return"放入红宝石或月光石进行镶嵌";if(101!=this.gmake[1].iTid&&102!=this.gmake[1].iTid)return"只能镶嵌红宝石或月光石";break;case 1:if(null==this.gmake[1])return"放入碧玺石进行镶嵌";if(105!=this.gmake[1].iTid)return"只能镶嵌碧玺石";break;case 2:if(null==this.gmake[1])return"放入红宝石进行镶嵌";if(101!=this.gmake[1].iTid)return"只能镶嵌红宝石";break;case 3:if(null==this.gmake[1])return"放入紫鸦石或月光石进行镶嵌";if(103!=this.gmake[1].iTid&&102!=this.gmake[1].iTid)return"只能镶嵌紫鸦石或月光石";break;case 4:if(null==this.gmake[1])return"放入紫鸦石或墨晶石进行镶嵌";if(103!=this.gmake[1].iTid&&104!=this.gmake[1].iTid)return"只能镶嵌紫鸦石或墨晶石";break;case 5:if(null==this.gmake[1])return"放入墨晶石或碧玺石进行镶嵌";if(104!=this.gmake[1].iTid&&105!=this.gmake[1].iTid)return"只能镶嵌墨晶石或碧玺石";break;default:return"数据错误3"}return a=1,0!=(t=this.gmake[0].iAtts[2]/1e4)&&(a+=t%1e3),0!=(e=this.gmake[0].iAtts[2]%1e4)&&(a+=e%1e3),this.gmake[1].iAtts[0]!=a?"必须镶嵌"+a+"级宝石":0!=t&&t/1e3==this.gmake[1].iTid-101?(this.iCanMake=2,"#c00ff00宝石齐备，可以镶嵌"):0!=e&&e/1e3==this.gmake[1].iTid-101?(this.iCanMake=2,"#c00ff00宝石齐备，可以镶嵌"):0!=t&&0!=e?"已经镶嵌两种不同类型宝石":(this.iCanMake=2,"#c00ff00宝石齐备，可以镶嵌")}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.iCanMake>0&&this.btn_make.ProcTouch(t,e,i)&&this.btn_make.bCheck()){var n=[0,0,0,0,0,0,0,0];for(a=0;a<8;a++)null!=this.gmake[a]&&(n[a]=this.gmake[a].iGid,l.default.de_goods.intValue(this.gmake[a].iTid,0,28)>1?(this.gmake[a].iCount--,this.gmake[a].iCount<=0&&(this.gmake[a].iGid=-1)):this.gmake[a].iGid=-1,this.gmake[a]=null);f.default.gi().s_UseSkill(5,n[0],n[1],n[2],n[3],n[4],n[5])}if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0;(this.lockgoods=m.default.new_LockGoods(e,i,this.iGx,this.iGy,g.default.gi().goods[2],t),3==t&&null!=this.lockgoods&&m.default.bCanProc())&&(-1!=l.default.de_goods.intValue(this.lockgoods.iTid,0,16)?this.gmake[0]=this.lockgoods:(this.lockgoods.iTid>=101&&this.lockgoods.iTid<=105&&(null==this.gmake[0]?this.gmake[0]=this.lockgoods:null==this.gmake[1]&&this.gmake[0]!=this.lockgoods&&(this.gmake[1]=this.lockgoods)),229==this.lockgoods.iTid&&(this.gmake[1]=this.lockgoods)),this.lockgoods=null);for(a=0;a<2;a++)this.btn_goods[a].ProcTouch(t,e,i)&&this.btn_goods[a].bCheck()&&(this.gmake[a]=null);return!1}}]),CameoOperate}();i.default=_},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],115:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),g=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),_=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function ImproveEquip(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ImproveEquip);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ImproveEquip.__proto__||Object.getPrototypeOf(ImproveEquip)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=950,i.iH=475,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new r.default(l.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_goods=new Array(8),i.gmake=new Array(8),i.igsub=new Array(8),e=0;e<8;e++)i.btn_goods[e]=new r.default(l.default.xani_ui),i.btn_goods[e].InitButton("物品格"),i.gmake[e]=null,i.igsub[e]=1;return i.btn_goods[0].Move(i.iX+35+80,i.iY+80,80,80),i.btn_goods[1].Move(i.iX+35+80+140,i.iY+80,80,80),i.btn_goods[2].Move(i.iX+35+80,i.iY+180,80,80),i.btn_goods[3].Move(i.iX+35+80+140,i.iY+180,80,80),i.btn_make=new o.default(l.default.xani_nui2),i.btn_make.InitButton("按钮1_110"),i.btn_make.sName="强化",i.btn_make.Move(i.iX+270,i.iY+i.iH-40-40,70,40),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ImproveEquip,s.default),a(ImproveEquip,[{key:"Draw",value:function(){var t,e,i;for(c.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"强","化"),this.btn_close.Draw(),l.default.xani_nui3.DrawAnima(this.iX+230,this.iY+200,"炼丹炉背景",0),e=this.iX+this.iW-30-430-40,i=this.iY+30,c.default.new_framein(e,i,470,this.iH-60),u.default.gi().DrawTextEx(e+20,i+20,"双击选择要强化的装备：",4278206039,30,101,1,1,0,0,0),this.iGx=e+20,this.iGy=i+20+30,g.default.new_DrawGoods(this.iGx,this.iGy,_.default.gi().goods[2],this.gmake,this.igsub),null!=this.lockgoods&&g.default.new_DrawRect(this.iGx,this.iGy,_.default.gi().goods[2],this.lockgoods,0),null!=this.gmake[1]&&(this.igsub[1]!=this.iNeed&&(this.igsub[1]=this.iNeed),this.igsub[1]>this.gmake[1].iCount&&(this.igsub[1]=this.gmake[1].iCount)),t=0;t<4;t++)l.default.xani_nui3.DrawAnima(this.btn_goods[t].iX,this.btn_goods[t].iY,"物品格子",0),null!=this.gmake[t]&&g.default.new_DrawOneGoods_ext(this.btn_goods[t].iX,this.btn_goods[t].iY,this.gmake[t],this.igsub[t]);i=this.iY+this.iH-30-160,c.default.new_framein(this.iX+30,i,400,160);var a="#c003e57"+this.Check();m.default.gi().FormatEx(a,360,25,0,0,30),m.default.gi().Draw(this.iX+30+20,i+20),this.bCanMake&&(this.btn_make.Move(this.iX+30+400-20-110,i+160-20-52,110,52),this.btn_make.Draw()),g.default.bShowDetail()&&g.default.new_DrawDetail(null,-1,-1,0),d.default.end(d.default.CONFIRM_IMPROVEEQUIP)&&d.default.bConfirm&&this.ie()}},{key:"Check",value:function(){var t,e;this.iNeed=1;var i="#c00ff00材料齐备，可以强化";return this.bCanMake=!1,null==this.gmake[0]?"请先放入需要强化的装备":-1==l.default.de_goods.intValue(this.gmake[0].iTid,-1,16)?"数据异常6":(e=this.gmake[0].iAtts[3]/1e4)>=9?"装备已经强化到顶层":(this.iNeed=l.default.de_goods.intValue(this.gmake[0].iTid,0,9)/10+e+1,null==this.gmake[1]?"请放入强化符"+this.iNeed+"张":this.gmake[1].iCount<this.iNeed?"强化符数量不足，需要"+this.iNeed+"张":(t=115-15*e,null!=this.gmake[3]&&(t+=20),t>100&&(t=100),i+="#e强化成功率"+t+"%",null==this.gmake[3]&&t<100&&(i+="#e#cff0000幸运符提高强化成功率"),null==this.gmake[2]&&t<100&&(i+="#e#cff0000替身木偶使装备不损毁"),this.bCanMake=!0,i))}},{key:"ie",value:function(){var t,e=[0,0,0,0,0,0,0,0];for(t=0;t<8;t++)null!=this.gmake[t]&&(e[t]=this.gmake[t].iGid,this.gmake[t].iGid=-1,this.gmake[t]=null);f.default.gi().s_UseSkill(6,e[0],e[1],e[2],e[3],e[4],e[5])}},{key:"ProcTouch",value:function(t,e,i){var a,n,s;if(this.bCanMake&&this.btn_make.ProcTouch(t,e,i)&&this.btn_make.bCheck()&&(null==this.gmake[2]?d.default.start(d.default.CONFIRM_IMPROVEEQUIP,"#cff0000没有放入替身木偶，如果强化失败，装备会消失，是否确定继续强化？"):this.ie()),this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0;if(this.lockgoods=g.default.new_LockGoods(e,i,this.iGx,this.iGy,_.default.gi().goods[2],t),3==t&&null!=this.lockgoods&&g.default.bCanProc()){if(-1!=l.default.de_goods.intValue(this.lockgoods.iTid,0,16)){for(this.gmake[0]=this.lockgoods,n=l.default.de_goods.intValue(this.gmake[0].iTid,0,9)/10+this.gmake[0].iAtts[3]/1e4+1,s=0;s<20;s++)if(_.default.gi().goods[2][s].iGid>0&&107==_.default.gi().goods[2][s].iTid&&_.default.gi().goods[2][s].iCount>=n){this.gmake[1]=_.default.gi().goods[2][s];break}for(s=0;s<20;s++)if(_.default.gi().goods[2][s].iGid>0&&106==_.default.gi().goods[2][s].iTid){this.gmake[2]=_.default.gi().goods[2][s];break}for(s=0;s<20;s++)if(_.default.gi().goods[2][s].iGid>0&&108==_.default.gi().goods[2][s].iTid){this.gmake[3]=_.default.gi().goods[2][s];break}}else 107==this.lockgoods.iTid&&(this.gmake[1]=this.lockgoods),106==this.lockgoods.iTid&&(this.gmake[2]=this.lockgoods),108==this.lockgoods.iTid&&(this.gmake[3]=this.lockgoods);this.lockgoods=null}for(a=0;a<4;a++)this.btn_goods[a].ProcTouch(t,e,i)&&this.btn_goods[a].bCheck()&&(this.gmake[a]=null);return!1}}]),ImproveEquip}();i.default=p},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],116:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=(_interopRequireDefault(t("../../../../config/XDefine")),_interopRequireDefault(t("../../../../engine/BaseClass"))),r=_interopRequireDefault(t("../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),m=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function MakeEquip(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MakeEquip);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MakeEquip.__proto__||Object.getPrototypeOf(MakeEquip)).call(this));for(i.pani=t,i.pm3f=t.pm3f,MakeEquip.iW=950,MakeEquip.iH=475,MakeEquip.iX=(n.default.SCRW-MakeEquip.iW)/2,MakeEquip.iY=(n.default.SCRH-MakeEquip.iH)/2,i.btn_close=new r.default(l.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(MakeEquip.iX+MakeEquip.iW-35,MakeEquip.iY-25,60,60),i.btn_goods=new Array(8),i.gmake=new Array(8),i.igsub=new Array(8),e=0;e<8;e++)i.btn_goods[e]=new r.default(l.default.xani_ui),i.btn_goods[e].InitButton("物品格"),i.gmake[e]=null,i.igsub[e]=1;return i.btn_goods[0].Move(MakeEquip.iX+5+60,MakeEquip.iY+80,80,80),i.btn_goods[1].Move(MakeEquip.iX+5+60+125,MakeEquip.iY+80,80,80),i.btn_goods[2].Move(MakeEquip.iX+5+60+250,MakeEquip.iY+80,80,80),i.btn_goods[3].Move(MakeEquip.iX+5+60,MakeEquip.iY+180,80,80),i.btn_goods[4].Move(MakeEquip.iX+5+60+125,MakeEquip.iY+180,80,80),i.btn_goods[5].Move(MakeEquip.iX+5+60+250,MakeEquip.iY+180,80,80),i.btn_make=new o.default(l.default.xani_nui2),i.btn_make.InitButton("按钮1_110"),i.btn_make.sName="制造",i.btn_make.Move(MakeEquip.iX+260,MakeEquip.iY+MakeEquip.iH-50-40,70,40),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MakeEquip,s.default),a(MakeEquip,[{key:"Draw",value:function(){var t,e,i;for(d.default.new_baseframe2(MakeEquip.iX,MakeEquip.iY,MakeEquip.iW,MakeEquip.iH,"打","造"),this.btn_close.Draw(),l.default.xani_nui3.DrawAnima(MakeEquip.iX+230,MakeEquip.iY+200,"炼丹炉背景",0),e=MakeEquip.iX+MakeEquip.iW-30-430-40,i=MakeEquip.iY+30,d.default.new_framein(e,i,470,MakeEquip.iH-60),u.default.gi().DrawTextEx(e+20,i+20,"双击选择装备制造图纸：",4278206039,30,101,1,1,0,0,0),MakeEquip.iGx=e+20,MakeEquip.iGy=i+20+30,m.default.new_DrawGoods(MakeEquip.iGx,MakeEquip.iGy,g.default.gi().goods[2],this.gmake,this.igsub),null!=this.lockgoods&&m.default.new_DrawRect(MakeEquip.iGx,MakeEquip.iGy,g.default.gi().goods[2],this.lockgoods,0),t=0;t<6;t++)l.default.xani_nui3.DrawAnima(this.btn_goods[t].MakeEquip.iX,this.btn_goods[t].MakeEquip.iY,"物品格子",0),null!=this.gmake[t]&&m.default.new_DrawOneGoods_ext(this.btn_goods[t].MakeEquip.iX,this.btn_goods[t].MakeEquip.iY,this.gmake[t],1);i=MakeEquip.iY+MakeEquip.iH-30-160,d.default.new_framein(MakeEquip.iX+30,i,400,160);var a="#c003e57"+this.Check();c.default.gi().FormatEx(a,360,25,0,0,30),c.default.gi().Draw(MakeEquip.iX+30+20,i+20),MakeEquip.bCanMake&&(this.btn_make.Move(MakeEquip.iX+30+400-20-110,i+160-20-52,110,52),this.btn_make.Draw()),m.default.bShowDetail()&&m.default.new_DrawDetail(null,-1,-1,0)}},{key:"Check",value:function(){var t,e,i,a,n,s,r="#c003e57";if(MakeEquip.bCanMake=!1,null==this.gmake[0])return"请先放入装备制造图纸";if(n=l.default.de_goods.intValue(this.gmake[0].iAtts[0],-1,16),s=l.default.de_goods.intValue(this.gmake[0].iAtts[0],-1,9),-1==n||-1==s)return"数据错误1";if(null!=this.gmake[1]&&382==this.gmake[1].iTid);else if(0==n||4==n){if(null==this.gmake[1]||98!=this.gmake[1].iTid)return"需要放入锻造手艺";if(this.gmake[1].iAtts[0]<s)return"锻造手艺等级不够"}else if(1==n||2==n){if(null==this.gmake[1]||99!=this.gmake[1].iTid)return"需要放入冶金手艺";if(this.gmake[1].iAtts[0]<s)return"冶金手艺等级不够"}else{if(3!=n&&5!=n)return"数据错误2";if(null==this.gmake[1]||100!=this.gmake[1].iTid)return"需要放入剪裁手艺";if(this.gmake[1].iAtts[0]<s)return"剪裁手艺等级不够"}for(a=0,t=1;t<4&&!((e=this.gmake[0].iAtts[t])<=0);t++){for(i=3;i<6&&(null==this.gmake[i]||this.gmake[i].iTid!=e);i++);i>=6&&(r=r+"需要放入材料："+l.default.de_goods.strValue(e,-1,4)+"#e",a++)}return a>0?r:(r=null!=this.gmake[2]?"#e至少获得一项附加属性":"#e#cff0000放入幸运符可附加属性",MakeEquip.bCanMake=!0,"#c00ff00材料齐备"+r)}},{key:"ProcTouch",value:function(t,e,i){var a,n,s,r;if(MakeEquip.bCanMake&&this.btn_make.ProcTouch(t,e,i)&&this.btn_make.bCheck()){var o=[0,0,0,0,0,0,0,0];for(a=0;a<8;a++)null!=this.gmake[a]&&(o[a]=this.gmake[a].iGid,(n=l.default.de_goods.intValue(this.gmake[a].iTid,0,28))>1?(this.gmake[a].iCount--,this.gmake[a].iCount<=0&&(this.gmake[a].iGid=-1)):this.gmake[a].iGid=-1,this.gmake[a]=null);f.default.gi().s_UseSkill(4,o[0],o[1],o[2],o[3],o[4],o[5])}if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0;if(this.lockgoods=m.default.new_LockGoods(e,i,MakeEquip.iGx,MakeEquip.iGy,g.default.gi().goods[2],t),3==t&&null!=this.lockgoods&&m.default.bCanProc()){if(97==this.lockgoods.iTid){for(this.gmake[0]=this.lockgoods,n=2==(a=l.default.de_goods.intValue(this.lockgoods.iAtts[0],0,16))||1==a?99:3==a||5==a?100:0==a||4==a?98:-1,s=0;s<20;s++)if(g.default.gi().goods[2][s].iGid>0&&g.default.gi().goods[2][s].iTid==n){this.gmake[1]=g.default.gi().goods[2][s];break}for(s=0;s<20;s++)if(g.default.gi().goods[2][s].iGid>0&&108==g.default.gi().goods[2][s].iTid){this.gmake[2]=g.default.gi().goods[2][s];break}for(r=3,a=1;a<4;a++)if((n=this.lockgoods.iAtts[a])>0)for(s=0;s<20;s++)if(g.default.gi().goods[2][s].iGid>0&&g.default.gi().goods[2][s].iTid==n){this.gmake[r++]=g.default.gi().goods[2][s];break}}if(98!=this.lockgoods.iTid&&99!=this.lockgoods.iTid&&100!=this.lockgoods.iTid&&382!=this.lockgoods.iTid||(this.gmake[1]=this.lockgoods),108==this.lockgoods.iTid&&(this.gmake[2]=this.lockgoods),-1!=l.default.de_goods.intValue(this.lockgoods.iTid,-1,31))for(a=3;a<6;a++)if(null==this.gmake[a]){this.gmake[a]=this.lockgoods;break}this.lockgoods=null}for(a=0;a<6;a++)this.btn_goods[a].ProcTouch(t,e,i)&&this.btn_goods[a].bCheck()&&(this.gmake[a]=null);return!1}}]),MakeEquip}();i.default=_,_.iX,_.iY,_.iW,_.iH,_.iGx,_.iGy,_.bCanMake},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],117:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),g=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/fast/IngotMall")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"))),_=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),p=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw")),b=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var D=function(t){function RepairEquip(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,RepairEquip);var e,i,a,s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(RepairEquip.__proto__||Object.getPrototypeOf(RepairEquip)).call(this));for(s._costmoney=[[5e4,55132,68678,89593,117319,151466,191736,237882,289700,347010,409655],[1e4,11539,15603,21878,30196,40440,52521,66365,81910,99103,117897]],s.pm3f=u.default.xm3f,s.iNeedTid=new Int32Array(5),s.iNeedCount=new Int32Array(5),s.iHaveCount=new Int32Array(5),s.materials=new Array(5),s.btn_detail=new Array(5),e=0;e<5;e++)s.materials[e]=null;for(s.btn_getfrom=new o.default(l.default.xani_button),s.btn_getfrom.InitButton("1号按钮150_60"),s.btn_getfrom.sName="商城购买",s.showgoods=new _.default,e=0;e<5;e++)s.btn_detail[e]=new o.default(l.default.xani_button),s.btn_detail[e].bSingleButton=!0;s.iShowDetail=-1,equips=new _.default(32);var r,f=new Int32Array(32);for(s.iCount=0,s.iWearCount=0,e=0;e<6;e++)b.default.gi().goods[1][e].iGid>0&&b.default.gi().goods[1][e].iAtts[0]>0&&(a=5*l.default.de_goods.intValue(b.default.gi().goods[1][e].iTid,-1,9)+100,((b.default.gi().goods[1][e].iAtts[5]%1e5+19)/20<b.default.gi().goods[1][e].iAtts[5]/1e5||b.default.gi().goods[1][e].iAtts[5]/1e5<a)&&(f[s.iCount]=b.default.gi().goods[1][e].iAtts[5]%1e5*1e4+b.default.gi().goods[1][e].iAtts[5]/1e5,s.equips[s.iCount++]=b.default.gi().goods[1][e],s.iWearCount++));for(e=0;e<20;e++)if(b.default.gi().goods[2][e].iGid>0){if(0==b.default.gi().goods[2][e].iAtts[0])continue;l.default.de_goods.intValue(b.default.gi().goods[2][e].iTid,0,16)>=0&&(a=5*l.default.de_goods.intValue(b.default.gi().goods[2][e].iTid,-1,9)+100,((b.default.gi().goods[2][e].iAtts[5]%1e5+19)/20<b.default.gi().goods[2][e].iAtts[5]/1e5||b.default.gi().goods[2][e].iAtts[5]/1e5<a)&&(f[s.iCount]=b.default.gi().goods[2][e].iAtts[5]%1e5*1e4+b.default.gi().goods[2][e].iAtts[5]/1e5,s.equips[s.iCount++]=b.default.gi().goods[2][e]))}for(e=0;e<s.iWearCount;e++)for(i=e+1;i<s.iWearCount;i++)f[i]<f[e]&&(a=f[i],f[i]=f[e],f[e]=a,r=s.equips[i],s.equips[i]=s.equips[e],s.equips[e]=r);for(e=s.iWearCount;e<s.iCount;e++)for(i=e+1;i<s.iCount;i++)f[i]<f[e]&&(a=f[i],f[i]=f[e],f[e]=a,r=s.equips[i],s.equips[i]=s.equips[e],s.equips[e]=r);for(s.iCount>0?s.iPoint=0:s.iPoint=-1,s.iW=1030,s.iH=580,s.iX=(n.default.SCRW-s.iW)/2,s.iY=(n.default.SCRH-s.iH)/2,s.btn_equips=new Array(s.iCount),e=0;e<s.iCount;e++)s.btn_equips[e]=new o.default(l.default.xani_button),s.btn_equips[e].InitButton("11号按钮250_102");for(s.btn_repairtype=new Array(3),e=0;e<3;e++)s.btn_repairtype[e]=new o.default(l.default.xani_button),s.btn_repairtype[e].InitButton("1号按钮150_60");return s.btn_repairtype[0].sName="普通修理",s.btn_repairtype[1].sName="特殊修理",s.btn_repairtype[2].sName="装备修复",s.btn_repair=new o.default(l.default.xani_button),s.btn_repair.InitButton("1号按钮150_60"),s.btn_repair.sName="修理",s.btn_close=new o.default(l.default.xani_button),s.btn_close.InitButton("关闭按钮"),s.btn_close.Move(s.iX+s.iW-35,s.iY-25,60,60),s.iOffY1=0,s.bLocked1=!1,s.iOffY2=0,s.bLocked2=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(RepairEquip,r.default),a(RepairEquip,[{key:"_open",value:function(t,e){this.iRepairType=e>=0&&e<=2?e:-1,this.LockGoods()}},{key:"Draw",value:function(){var t,e,i,a,n,s=0,r=0;for(d.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"装","备","修","理"),this.btn_close.Draw(),d.default.new_framein(this.iX+25,this.iY+25,290,this.iH-50),this.bLocked1||(this.iOffY1>0&&(this.iOffY1/=2),this.iOffY1<0&&this.iDestH1<this.iY+this.iH-45&&(t=this.iY+this.iH-45-this.iDestH1,this.iOffY1+=t/2)),this.bLocked2||(this.iOffY2>0&&(this.iOffY2/=2),this.iOffY2<0&&this.iDestH2<200&&(t=200-this.iDestH2,this.iOffY2+=t/2)),a=this.iX+25+20,n=this.iY+25+20+this.iOffY1,this.pm3f.SetViewClip(this.iX+25+20,this.iY+25+20,this.iX+25+20+250,this.iY+this.iH-25-20),t=0;t<this.iCount;t++)this.btn_equips[t].Move(a,n,250,102),t==this.iPoint&&this.btn_equips[t].setdown(),this.btn_equips[t].Draw(),l.default.xani_nui3.DrawAnima(a+11,n+11,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(a+11,n+11,l.default.de_goods.strValue(this.equips[t].iTid,0,10),0),t<this.iWearCount&&l.default.xani_other.DrawAnima(a+11+80,n+11,"已装备标签",0),i=this.equips[t].iAtts[5]/1e5,0==(e=this.equips[t].iAtts[5]%1e5/20)?l.default.xani_other.DrawAnima(a+11,n+11+80,"耐久度过低",1):e<50&&l.default.xani_other.DrawAnima(a+11,n+11+80,"耐久度过低",0),u.default.gi().DrawText_2(a+11+80+10,n+11+5,l.default.de_goods.strValue(this.equips[t].iTid,0,4),4294896766,30,101,1,1,0,0,0,3,4278261038),u.default.gi().DrawTextEx(a+11+80+10,n+11+80-5,"耐久度"+e+"/"+i,4294896766,20,101,1,1,0,0,-3),n+=105;for(this.iDestH1=n,this.pm3f.NoClip(),d.default.new_framein(this.iX+25+250+40+20,this.iY+25,670,this.iH-50),a=this.iX+25+250+40+20+20,n=this.iY+25+20,d.default.frame_type4("2号框20_20",a,n,220,220,20,20),d.default.frame_type4("2号框20_20",a+220+20,n,220,220,20,20),t=0;t<3;t++)this.btn_repairtype[t].Move(a+220+20+220+20,n+80*t,150,60),t==this.iRepairType&&this.btn_repairtype[t].setdown(),this.btn_repairtype[t].Draw();this.iPoint>=0&&this.iPoint<this.iCount&&(t=this.iPoint,l.default.xani_nui3.DrawAnima(a+70,n+70,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(a+70,n+70,l.default.de_goods.strValue(this.equips[t].iTid,0,10),0),t<this.iWearCount&&l.default.xani_other.DrawAnima(a+70+80,n+70,"已装备标签",0),u.default.gi().DrawText_2(a+70+40,n+70+80+10,l.default.de_goods.strValue(this.equips[t].iTid,0,4),4294896766,30,101,1,1,0,-2,0,3,4278261038),this.DrawAtts(a+220+20+10,n+10,this.equips[t]),this.iRepairType>=0&&d.default.frame_type4("2号框20_20",a,n+220+20,630,160,20,20),s=a,r=n+220+20,630,this.iELev=l.default.de_goods.intValue(this.equips[t].iTid,0,9),this.iLimitNJ=100+5*this.iELev,this.iMaxNJ=this.equips[t].iAtts[5]/1e5,this.iCurNJ=this.equips[t].iAtts[5]%1e5/20,this.iEType=l.default.de_goods.intValue(this.equips[t].iTid,0,16),s+=315,0==this.iRepairType?(this.iNeedMoney=this._costmoney[this.iRepairType][this.iELev/10],this.btn_detail[0].Move(s-40,r+5,80,80),l.default.xani_nui3.DrawAnima(s-40,r+5,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(s-40,r+5,l.default.de_goods.strValue(this.iNeedTid[0],0,10),0),null==this.materials[0]?this.pm3f.DrawText_2(s,r+5+80+5,"0/1",4294896766,20,101,1,1,0,-2,0,3,4278261038):this.pm3f.DrawText_2(s,r+5+80+5,"1/1",4294896766,20,101,1,1,0,-2,0,3,4278261038),this.pm3f.DrawText_2(s,r+5+80+5+20,(null==this.materials[0]?this.iELev:this.materials[0].iAtts[0])+"级"+l.default.de_goods.strValue(this.iNeedTid[0],0,4),4294896766,20,101,1,1,0,-2,0,3,4278261038),this.pm3f.DrawTextEx(s,r+5+80+10+20+20,"普通修理会消耗耐久上限，耐久上限低于20%无法普通修理",4294967295,18,101,1,1,0,-2,0),this.iNeedMoney>g.default.me.rbs.iMoney?this.btn_repair.bDisable=!0:null==this.materials[0]?this.btn_repair.bDisable=!0:this.iMaxNJ<this.iLimitNJ/5?this.btn_repair.bDisable=!0:this.btn_repair.bDisable=!1):1==this.iRepairType?(this.iNeedMoney=this._costmoney[this.iRepairType][this.iELev/10],this.btn_detail[0].Move(s-50-80,r+5,80,80),l.default.xani_nui3.DrawAnima(s-50-80,r+5,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(s-50-80,r+5,l.default.de_goods.strValue(this.iNeedTid[0],0,10),0),null==this.materials[0]?this.pm3f.DrawText_2(s-50-40,r+5+80+5,"0/1",4294896766,20,101,1,1,0,-2,0,3,4278261038):this.pm3f.DrawText_2(s-50-40,r+5+80+5,"1/1",4294896766,20,101,1,1,0,-2,0,3,4278261038),this.pm3f.DrawText_2(s-50-40,r+5+80+5+20,(null==this.materials[0]?this.iELev:this.materials[0].iAtts[0])+"级"+l.default.de_goods.strValue(this.iNeedTid[0],0,4),4294896766,20,101,1,1,0,-2,0,3,4278261038),this.btn_detail[1].Move(s+50,r+5,80,80),l.default.xani_nui3.DrawAnima(s+50,r+5,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(s+50,r+5,l.default.de_goods.strValue(this.iNeedTid[1],0,10),0),this.pm3f.DrawText_2(s+50+40,r+5+80+5,this.iHaveCount[1]+"/"+this.iNeedCount[1],4294896766,20,101,1,1,0,-2,0,3,4278261038),this.pm3f.DrawText_2(s+50+40,r+5+80+5+20,l.default.de_goods.strValue(this.iNeedTid[1],0,4),4294896766,20,101,1,1,0,-2,0,3,4278261038),this.pm3f.DrawTextEx(s,r+5+80+10+20+20,"特殊修理恢复100点耐久，不会损耗耐久上限",4294967295,18,101,1,1,0,-2,0),this.iNeedMoney>g.default.me.rbs.iMoney?this.btn_repair.bDisable=!0:null==this.materials[0]?this.btn_repair.bDisable=!0:this.iHaveCount[1]<this.iNeedCount[1]?this.btn_repair.bDisable=!0:this.btn_repair.bDisable=!1):2==this.iRepairType?(this.iNeedMoney=0,this.btn_detail[0].Move(s-40,r+5,80,80),l.default.xani_nui3.DrawAnima(s-40,r+5,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(s-40,r+5,l.default.de_goods.strValue(this.iNeedTid[0],0,10),0),this.pm3f.DrawText_2(s,r+5+80+5,this.iHaveCount[0]+"/"+this.iNeedCount[0],4294896766,20,101,1,1,0,-2,0,3,4278261038),this.pm3f.DrawText_2(s,r+5+80+5+20,l.default.de_goods.strValue(this.iNeedTid[0],0,4),4294896766,20,101,1,1,0,-2,0,3,4278261038),this.pm3f.DrawTextEx(s,r+5+80+10+20+20,"装备修复可以完全修复装备耐久和耐久上限",4294967295,18,101,1,1,0,-2,0),this.iHaveCount[0]<this.iNeedCount[0]?this.btn_repair.bDisable=!0:this.btn_repair.bDisable=!1):this.btn_repair.bDisable=!0,d.default.ui3_Text1(a,n+220+20+160+20,100,220,"需要铜币",""+(this.iRepairType<0?"":this.iNeedMoney)),d.default.ui3_Text1(a,n+220+20+160+20+40,100,220,"拥有铜币",""+g.default.me.rbs.iMoney),this.btn_repair.Move(this.iX+this.iW-25-20-150,this.iY+this.iH-25-20-60,150,60),this.btn_repair.Draw(),this.LockGoods()),this.iShowDetail>=0&&(0==this.iRepairType?(this.showgoods.SetAtt(1,this.iNeedTid[0],1,this.iELev,0,0,0,0,0,0,0),null==this.materials[0]?(p.default.detail_add="#e#cc8bfe7获取途径：1生活技能  2手艺任务",p.default.new_DrawDetail(this.showgoods,this.btn_detail[0].iX,this.btn_detail[0].iY,0),p.default.detail_add=""):p.default.new_DrawDetail(this.materials[0],this.btn_detail[0].iX,this.btn_detail[0].iY,0)):1==this.iRepairType?0==this.iShowDetail?(this.showgoods.SetAtt(1,this.iNeedTid[0],1,this.iELev,0,0,0,0,0,0,0),null==this.materials[0]?(p.default.detail_add="#e#cc8bfe7获取途径：1生活技能  2手艺任务",p.default.new_DrawDetail(this.showgoods,this.btn_detail[0].iX,this.btn_detail[0].iY,0),p.default.detail_add=""):p.default.new_DrawDetail(this.materials[0],this.btn_detail[0].iX,this.btn_detail[0].iY,0)):1==this.iShowDetail&&(this.showgoods.SetAtt(1,this.iNeedTid[1],1,0,0,0,0,0,0,0,0),null==this.materials[1]||this.iHaveCount[1]<this.iNeedCount[1]?(p.default.detail_add="#e#cc8bfe7获取途径：",p.default.new_DrawDetail(this.showgoods,this.btn_detail[1].iX,this.btn_detail[1].iY,80),p.default.detail_add="",this.btn_getfrom.Move(p.default.iDetailX+p.default.iDetailW/2-75,p.default.iDetailY+p.default.iDetailH-60-20,150,60),this.btn_getfrom.Draw()):p.default.new_DrawDetail(this.materials[1],this.btn_detail[1].iX,this.btn_detail[1].iY,0)):2==this.iRepairType&&(this.showgoods.SetAtt(1,this.iNeedTid[0],1,0,0,0,0,0,0,0,0),null==this.materials[0]||this.iHaveCount[0]<this.iNeedCount[0]?(p.default.detail_add="#e#cc8bfe7获取途径：",p.default.new_DrawDetail(this.showgoods,this.btn_detail[0].iX,this.btn_detail[0].iY,80),p.default.detail_add="",this.btn_getfrom.Move(p.default.iDetailX+p.default.iDetailW/2-75,p.default.iDetailY+p.default.iDetailH-60-20,150,60),this.btn_getfrom.Draw()):p.default.new_DrawDetail(this.materials[0],this.btn_detail[0].iX,this.btn_detail[0].iY,0)))}},{key:"DrawAtts",value:function(t,e,i){var a,n,s,r;this.iDAX=t,this.iDAY=e;var o,u,f="基本属性",h="等级："+l.default.de_goods.strValue(i.iTid,-1,9),d=[8,12,40,8,6],m=[0,0,0,0,0];o=i.iAtts[0]/1e4,u=i.iAtts[0]%1e4,(a=i.iAtts[2]/1e4)>0&&(m[a/1e3]=d[a/1e3]*(a%1e3)),(a=i.iAtts[2]%1e4)>0&&(m[a/1e3]=d[a/1e3]*(a%1e3));var g="";switch(l.default.de_goods.intValue(i.iTid,-1,16)){case 0:g="类型：头盔",f+="#e# #cffff00防御 +"+(l.default.de_goods.intValue(i.iTid,-1,21)+o+m[1]),f+="#e# #cffff00魔法 +"+(l.default.de_goods.intValue(i.iTid,-1,22)+u),m[1]=0;break;case 1:g="类型：饰品",f+="#e# #cffff00灵力 +"+(l.default.de_goods.intValue(i.iTid,-1,23)+u+m[4]),m[4]=0;break;case 2:g=0==(n=l.default.de_goods.intValue(i.iTid,-1,19))?"类型：武器(剑)":1==n?"类型：武器(刀)":"类型：武器(枪)",f+="#e# #cffff00伤害 +"+(l.default.de_goods.intValue(i.iTid,-1,3)+u+m[0]),m[0]=0;break;case 3:g=0==(n=l.default.de_goods.intValue(i.iTid,-1,20))?"类型：女衣":"类型：铠甲",f+="#e# #cffff00防御 +"+(l.default.de_goods.intValue(i.iTid,-1,21)+u+m[1]),m[1]=0;break;case 4:g="类型：腰带",f+="#e# #cffff00防御 +"+(l.default.de_goods.intValue(i.iTid,-1,21)+o+m[1]),f+="#e# #cffff00气血 +"+(l.default.de_goods.intValue(i.iTid,-1,24)+u+m[2]),m[1]=0,m[2]=0;break;case 5:g="类型：鞋子",f+="#e# #cffff00防御 +"+(l.default.de_goods.intValue(i.iTid,-1,21)+o+m[1]),f+="#e# #cffff00速度 +"+(l.default.de_goods.intValue(i.iTid,-1,25)+u+m[3]),m[1]=0,m[3]=0}m[0]>0&&(f+="#e# 伤害 +"+m[0]),m[1]>0&&(f+="#e# 防御 +"+m[1]),m[2]>0&&(f+="#e# 气血 +"+m[2]),m[3]>0&&(f+="#e# 速度 +"+m[3]),m[4]>0&&(f+="#e# 灵力 +"+m[4]),(o=i.iAtts[1]/1e4)>0&&(o/1e3==0?f+="#e# #c00ff00体质 +"+o%1e3:o/1e3==1?f+="#e# #c00ff00法力 +"+o%1e3:o/1e3==2?f+="#e# #c00ff00力量 +"+o%1e3:o/1e3==3?f+="#e# #c00ff00耐力 +"+o%1e3:o/1e3==4&&(f+="#e# #c00ff00敏捷 +"+o%1e3)),(u=i.iAtts[1]%1e4)>0&&(f+=o<=0?"#e# #c00ff00":" ",u/1e3==0?f+="体质 +"+u%1e3:u/1e3==1?f+="法力 +"+u%1e3:u/1e3==2?f+="力量 +"+u%1e3:u/1e3==3?f+="耐力 +"+u%1e3:u/1e3==4&&(f+="敏捷 +"+u%1e3)),i.iAtts[4]>0&&((a=i.iAtts[4]>>20&1023)>0&&(f+="#e# #cff8020"+l.default.de_skill.strValue(a,0,6)),(a=i.iAtts[4]>>10&1023)>0&&(f+="#e# #c80c0ff特效 : "+l.default.de_skill.strValue(a,0,6)),(a=1023&i.iAtts[4])>0&&(f+="#e# #c80c0ff特技 : "+l.default.de_skill.strValue(a,0,6))),f+="#e# #cffffff耐久度"+(i.iAtts[5]%1e5+19)/20+"/"+i.iAtts[5]/1e5,s=i.iAtts[2]/1e4,r=i.iAtts[2]%1e4,(s>0||r>0)&&(f+="#e#cb48cc8镶嵌等级 "+(s%1e3+r%1e3),f+="#e# 已镶嵌 ",s>0&&(f+=l.default.de_goods.strValue(s/1e3+101,0,4)),r>0&&(f+=","+l.default.de_goods.strValue(r/1e3+101,0,4))),i.CalcSetScore(),i.iScore>0&&(f+="#e# #cffffff评分："+i.iScore),a=i.iAtts[3]/1e4;var _=g+"#e"+h+"#e"+f;this.pm3f.SetViewClip(t,e,t+200,e+200),this.pm3f.DrawText_2(t,e+this.iOffY2,"装备属性",4294896766,24,101,1,1,0,0,0,3,4278261038),c.default.gi().FormatEx(_,200,20,0,0,22),c.default.gi().Draw(t,e+this.iOffY2+26),this.iDestH2=c.default.gi().iH+this.iOffY2+26,this.pm3f.NoClip()}},{key:"ProcTouch",value:function(t,e,i){if(this.iShowDetail>=0)return(1==this.iRepairType&&1==this.iShowDetail||2==this.iRepairType)&&this.btn_getfrom.ProcTouch(t,e,i)&&this.btn_getfrom.bCheck()&&(f.default.gi().s_IngotMall(1,0),this.btn_getfrom.SetNormal()),3==t&&(this.iShowDetail=-1),!0;var a,n;if(3==t){if(this.bLocked1)return this.bLocked1=!1,!0;if(this.bLocked2)return this.bLocked2=!1,!0}if(2==t){if(this.bLocked1)return a=this.iLockY1-i,this.iOffY1-=a,this.iLockY1=i,!0;if(this.bLocked2)return a=this.iLockY2-i,this.iOffY2-=a,this.iLockY2=i,!0}if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0;for(a=0;a<this.iCount;a++)if(this.btn_equips[a].ProcTouch(t,e,i)&&this.btn_equips[a].bCheck()){for(this.iPoint=a,n=0;n<5;n++)this.materials[n]=null;this.LockGoods()}for(a=0;a<3;a++)if(this.btn_repairtype[a].ProcTouch(t,e,i)&&this.btn_repairtype[a].bCheck()){for(this.iRepairType=a,n=0;n<5;n++)this.materials[n]=null;this.LockGoods()}if(this.btn_detail[0].ProcTouch(t,e,i)&&this.btn_detail[0].bCheck()&&(this.iShowDetail=0),1==this.iRepairType&&this.btn_detail[1].ProcTouch(t,e,i)&&this.btn_detail[1].bCheck()&&(this.iShowDetail=1),this.btn_repair.ProcTouch(t,e,i)&&this.btn_repair.bCheck()&&f.default.gi().s_UseSkill(11,this.equips[this.iPoint].iGid,this.iRepairType,0,0,0,0),s.default.bInRect(e,i,this.iX+25,this.iY+25,290,this.iH-50)&&(1==t&&(this.iLockY1=i),2==t&&!this.bLocked1&&((a=this.iLockY1-i)<-15||a>15)))for(this.bLocked1=!0,a=0;a<this.iCount;a++)this.btn_equips[a].SetNormal();return s.default.bInRect(e,i,this.iDAX,this.iDAY,220,220)&&(1==t&&(this.iLockY2=i),2==t&&(this.bLocked2||((a=this.iLockY2-i)<-15||a>15)&&(this.bLocked2=!0))),!1}},{key:"LockGoods",value:function(){var t;for(t=0;t<5;t++)this.materials[t]=null;t=this.iPoint;var e=this.iRepairType;if(!(t<0))if(this.iELev=l.default.de_goods.intValue(this.equips[t].iTid,0,9),this.iLimitNJ=100+5*this.iELev,this.iMaxNJ=this.equips[t].iAtts[5]/1e5,this.iCurNJ=this.equips[t].iAtts[5]%1e5/20,this.iEType=l.default.de_goods.intValue(this.equips[t].iTid,0,16),0==e)for(this.iNeedCount[0]=1,0==this.iEType||4==this.iEType?this.iNeedTid[0]=98:1==this.iEType||2==this.iEType?this.iNeedTid[0]=99:3!=this.iEType&&5!=this.iEType||(this.iNeedTid[0]=100),t=0;t<20;t++)b.default.gi().goods[2][t].iGid>0&&b.default.gi().goods[2][t].iTid==this.iNeedTid[0]&&b.default.gi().goods[2][t].iAtts[0]>=this.iELev&&(null==this.materials[0]?this.materials[0]=b.default.gi().goods[2][t]:this.materials[0].iAtts[0]>b.default.gi().goods[2][t].iAtts[0]?this.materials[0]=b.default.gi().goods[2][t]:this.materials[0].iAtts[1]>b.default.gi().goods[2][t].iAtts[1]&&(this.materials[0]=b.default.gi().goods[2][t]));else if(1==e){for(this.iNeedCount[0]=1,0==this.iEType||4==this.iEType?this.iNeedTid[0]=98:1==this.iEType||2==this.iEType?this.iNeedTid[0]=99:3!=this.iEType&&5!=this.iEType||(this.iNeedTid[0]=100),t=0;t<20;t++)b.default.gi().goods[2][t].iGid>0&&b.default.gi().goods[2][t].iTid==this.iNeedTid[0]&&b.default.gi().goods[2][t].iAtts[0]>=this.iELev&&(null==this.materials[0]?this.materials[0]=b.default.gi().goods[2][t]:this.materials[0].iAtts[0]>b.default.gi().goods[2][t].iAtts[0]?this.materials[0]=b.default.gi().goods[2][t]:this.materials[0].iAtts[1]>b.default.gi().goods[2][t].iAtts[1]&&(this.materials[0]=b.default.gi().goods[2][t]));for(this.iNeedTid[1]=399,this.iELev<=40?this.iNeedCount[1]=1:this.iELev<=60?this.iNeedCount[1]=2:this.iELev<=80?this.iNeedCount[1]=3:this.iNeedCount[1]=4,this.iHaveCount[1]=0,t=0;t<20;t++)b.default.gi().goods[2][t].iGid>0&&b.default.gi().goods[2][t].iTid==this.iNeedTid[1]&&(null==this.materials[1]&&(this.materials[1]=b.default.gi().goods[2][t]),this.iHaveCount[1]+=b.default.gi().goods[2][t].iCount);this.iHaveCount[1]>this.iNeedCount[1]&&(this.iHaveCount[1]=this.iNeedCount[1])}else if(2==e){for(this.iNeedTid[0]=400,this.iELev<=40?this.iNeedCount[0]=3:this.iELev<=60?this.iNeedCount[0]=4:this.iELev<=80?this.iNeedCount[0]=5:this.iNeedCount[0]=6,this.iHaveCount[0]=0,t=0;t<20;t++)b.default.gi().goods[2][t].iGid>0&&b.default.gi().goods[2][t].iTid==this.iNeedTid[0]&&(null==this.materials[0]&&(this.materials[0]=b.default.gi().goods[2][t]),this.iHaveCount[0]+=b.default.gi().goods[2][t].iCount);this.iHaveCount[0]>this.iNeedCount[0]&&(this.iHaveCount[0]=this.iNeedCount[0])}}}]),RepairEquip}();i.default=D,D.Open=function(t,e){var i;(i=h.default.gi().iXStat==h.default.GS_REPAIREQUIP?h.default.gi().oCurrentView:h.default.gi().PushStat(h.default.GS_REPAIREQUIP))._open(t,e),i.iCount<=0&&(m.default.fm.Open("当前没有可修理的装备，只有有附加属性或者经过强化的装备才能修理。"),h.default.gi().PopStat(1))}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/gameing/fast/IngotMall":121,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],118:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../zero/Interface/GameVersion")),_interopRequireDefault(t("../../../../map/MapManager"))),s=(_interopRequireDefault(t("../../../../mgm/newmainmenu/StarEffect")),_interopRequireDefault(t("../../../../config/GmConfig"))),r=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),o=(_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),u=(_interopRequireDefault(t("../../../../engine/xms/TestRun")),_interopRequireDefault(t("../../../../engine/xms/XmsEngine")),_interopRequireDefault(t("../../../../engine/xms/first/X_FIRST")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/History/XRecordFast")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/afternoonquestion/AQStart")),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/fuben/MyFuBen")),_=_interopRequireDefault(t("../../../../engtst/mgm/gameing/gov/MyGov")),p=_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/JQMode")),b=_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/MainHelp")),D=_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/ExtHelp/ExtHelp")),y=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),w=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods")),S=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mission/MissionFrame")),x=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mounts/MyMounts")),P=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/MyTeam"))),v=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/TeamCreate")),R=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/TeamOperate")),_interopRequireDefault(t("../../../../zero/Interface/PublicInterface")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var M=function(){function FastButton(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FastButton),this.bShow=!1,this.iTeamButtonDelay=0,this.bRequestFlash=!1,this.btn_oc=new r.default(u.default.xani_frame),this.btn_oc.InitButton("右下底框72_72"),this.bOpening=!1,this.bCloseing=!1,this.iModifyX=0,this.btn_list1=new Array(8),this.btn_list2=new Array(3),this.btn_list3=new Array(5),this.btn_team=new r.default(u.default.xani_icon),this.btn_team.InitButton("队伍"),this.btn_fast=new r.default(u.default.xani_icon),this.btn_fast.InitButton("快捷"),this.btn_bag=new r.default(u.default.xani_icon),this.btn_bag.InitButton("背包"),this.btn_mission=new r.default(u.default.xani_icon),this.btn_mission.InitButton("任务"),this.btn_gov=new r.default(u.default.xani_icon),this.btn_gov.InitButton("帮派"),this.btn_mounts=new r.default(u.default.xani_icon),this.btn_mounts.InitButton("坐骑"),this.btn_fuben=new r.default(u.default.xani_icon),this.btn_fuben.InitButton("副本"),this.btn_system=new r.default(u.default.xani_icon),this.btn_system.InitButton("系统");var t=0;R.default.gi().iLHX>0&&(t=R.default.gi().iLHX),this.btn_act=new r.default(u.default.xani_icon),this.btn_act.Move(5+t,90,72,72),this.btn_act.InitButton("活动"),this.btn_mall=new r.default(u.default.xani_icon),this.btn_mall.Move(5+t,179,72,72),this.btn_mall.InitButton("商城"),this.btn_aq=new r.default(u.default.xani_icon),this.btn_aq.Move(5+t,268,72,72),this.btn_aq.InitButton("答题图标"),this.btn_aq.sAnimaName="答题",this.btn_help=new r.default(u.default.xani_icon),this.btn_help.Move(5+t,268,72,72),this.btn_help.InitButton("帮助"),this.btn_qq=new r.default(u.default.xani_icon),this.btn_qq.Move(5+t,268,72,72),this.btn_qq.InitButton("引导"),this.bCloseing=!1,this.bOpening=!0,this.bShow=!0,this.iModifyX=0,this.aa_effect=u.default.xani_skill.InitAnimaWithName("起死回生_右",null),this.btn_list2[0]=this.btn_fast,this.btn_list2[1]=this.btn_team,this.iBtnCount2=2}return a(FastButton,[{key:"Draw",value:function(){if(!n.default.gi().vbk.mapdialog.bHideUI()&&!p.default.jq.bJQLock()){this.bOpening&&(this.iModifyX+=15,this.iModifyX>=FastButton.MODIFYW&&(this.iModifyX=FastButton.MODIFYW,this.bOpening=!1)),this.bCloseing&&(this.iModifyX-=15,this.iModifyX<0&&(this.iModifyX=0,this.bCloseing=!1,this.bShow=!1));var t=0;if(this.bShow){for(this.iTeamButtonDelay>0&&this.iTeamButtonDelay--,this.btn_list1[t++]=this.btn_system,y.default.me.rbs.iLev>=40&&(this.btn_list1[t++]=this.btn_fuben),y.default.me.rbs.iLev>=30&&(this.btn_list1[t++]=this.btn_mounts),y.default.me.rbs.iLev>=20&&(this.btn_list1[t++]=this.btn_gov),this.btn_list1[t++]=this.btn_mission,this.btn_list1[t++]=this.btn_bag,this.iBtnCount1=t,t=0;t<this.iBtnCount1;t++)this.btn_list1[t].Move(s.default.SCRW-80-this.iModifyX*(t+1),s.default.SCRH-84,72,72);for(t=0;t<this.iBtnCount1;t++)this.btn_list1[t].Draw(),o.default.gi().DrawText_2(this.btn_list1[t].iX+36,this.btn_list1[t].iY+71,this.btn_list1[t].sAnimaName,4294833640,22,101,1,1,0,-2,-3,3,4279894016);for(t=0;t<this.iBtnCount2;t++)this.btn_list2[t].Move(s.default.SCRW-80,s.default.SCRH-80-this.iModifyX*(t+1),72,72);for(this.bRequestFlash&&u.default.iDelay/2%2==0&&this.btn_team.Move(this.btn_team.iX+2,this.btn_team.iY+2,72,72),t=0;t<this.iBtnCount2;t++)this.btn_list2[t].Draw(),o.default.gi().DrawText_2(this.btn_list2[t].iX+36,this.btn_list2[t].iY+71,this.btn_list2[t].sAnimaName,4294833640,22,101,1,1,0,-2,-3,3,4279894016)}this.btn_oc.Move(s.default.SCRW-80,s.default.SCRH-84,72,72),this.btn_oc.Draw(),u.default.xani_icon.DrawAnimaEx(s.default.SCRW-80-12,s.default.SCRH-84-12,"开关箭头",0,101,1,1,180-180*this.iModifyX/FastButton.MODIFYW,-2,-2),this.btn_list3[0]=this.btn_act,this.btn_list3[1]=this.btn_mall,this.btn_list3[2]=this.btn_help,this.iBtnCount3=3,m.default.bShow&&(this.btn_list3[3]=this.btn_aq,this.iBtnCount3++);var e=0;for(R.default.gi().iLHX>0&&(e=R.default.gi().iLHX),t=0;t<this.iBtnCount3;t++)this.btn_list3[t].Move(5+e,90+89*t,72,72),this.btn_list3[t].Draw(),o.default.gi().DrawText_2(this.btn_list3[t].iX+36,this.btn_list3[t].iY+71,this.btn_list3[t].sAnimaName,4294833640,22,101,1,1,0,-2,-3,3,4279894016);D.default.iHead>0&&3!=h.default.iExtHelp&&(this.btn_qq.Draw(),o.default.gi().DrawText_2(this.btn_qq.iX+40,this.btn_qq.iY+80,this.btn_qq.sAnimaName,4294967295,22,101,1,1,0,-2,-3,3,4278190080))}}},{key:"ProcTouch",value:function(t,e,i){if(D.default.iHead>0&&3!=h.default.iExtHelp&&this.btn_qq.ProcTouch(t,e,i))return this.btn_qq.bCheck()&&(D.default.iPrev=D.default.iTall,D.default.iHead=D.default.iTall,D.default.eh=f.default.gi().PushStat(f.default.GS_EXTHELP),D.default.PreviousHelp()),!0;if(this.btn_act.ProcTouch(t,e,i))return this.btn_act.bCheck()&&(l.default.gi().s_PromptActivity(0,0),f.default.gi().PushStat(f.default.GS_LOADING1)),!0;if(this.btn_mall.ProcTouch(t,e,i))return this.btn_mall.bCheck()&&l.default.gi().s_IngotMall(0,0),!0;if(this.btn_help.ProcTouch(t,e,i))return this.btn_help.bCheck()&&b.default.Open(),!0;if(m.default.bShow&&this.btn_aq.ProcTouch(t,e,i))return this.btn_aq.bCheck()&&m.default.Open(),!0;if(this.btn_oc.ProcTouch(t,e,i))return this.btn_oc.bCheck()&&(this.bShow?(this.bCloseing=!0,this.bOpening=!1,this.iModifyX=FastButton.MODIFYW):(this.bCloseing=!1,this.bOpening=!0,this.bShow=!0,this.iModifyX=0)),!0;if(!this.bShow)return!1;if(this.btn_bag.ProcTouch(t,e,i))return this.btn_bag.bCheck()&&w.default.gi().Open(),!0;if(this.btn_mission.ProcTouch(t,e,i))return this.btn_mission.bCheck()&&S.default.Open(0),!0;if(y.default.me.rbs.iLev>=20&&this.btn_gov.ProcTouch(t,e,i))return this.btn_gov.bCheck()&&(-1==_.default.mg.iRealGid?(l.default.gi().s_NewGovOperate(0,0,0,0,0,""),l.default.gi().s_NewGovOperate(2,0,0,0,0,"")):l.default.gi().s_NewGovOperate(3,0,0,0,0,"")),!0;if(y.default.me.rbs.iLev>=30&&this.btn_mounts.ProcTouch(t,e,i))return this.btn_mounts.bCheck()&&(x.default.mm.iMountsCount>0?f.default.gi().PushStat(f.default.GS_MOUNTSFRAME):d.default.easymsg.AddMessage("你还没有坐骑")),!0;if(y.default.me.rbs.iLev>=40&&this.btn_fuben.ProcTouch(t,e,i))return this.btn_fuben.bCheck()&&(0==g.default.iStat?l.default.gi().s_FuBen(2,0):1==g.default.iStat?l.default.gi().s_FuBen(1,0):2==g.default.iStat&&c.default.fm.Open("#cffffff"+g.default.sDetail+"#e#c00ff00"+g.default.sTarget)),!0;if(this.btn_system.ProcTouch(t,e,i))return this.btn_system.bCheck()&&f.default.gi().PushStat(f.default.GS_SYSTEMOPERATE),!0;if(0==this.iTeamButtonDelay&&this.btn_team.ProcTouch(t,e,i)){if(this.btn_team.bCheck())if(P.default.bNoTeam())v.default.Open(),this.iTeamButtonDelay=30;else{var a=f.default.gi().PushStat(f.default.GS_TEAMOPERATE);l.default.gi().s_TeamOperate(10,0,0),this.bRequestFlash&&(this.bRequestFlash=!1,a.iPage=1)}return!0}return!!this.btn_fast.ProcTouch(t,e,i)&&(this.btn_fast.bCheck()&&f.default.gi().PushStat(f.default.GS_FASTOPERATE),!0)}}]),FastButton}();i.default=M,M.MODIFYW=85,M.fb=null,M.gi=function(){return null==M.fb&&(M.fb=new M),M.fb}},{"../../../../config/GmConfig":5,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engine/xms/TestRun":38,"../../../../engine/xms/XmsEngine":40,"../../../../engine/xms/first/X_FIRST":62,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/History/XRecordFast":67,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/gameing/afternoonquestion/AQStart":97,"../../../../engtst/mgm/gameing/fuben/MyFuBen":152,"../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../engtst/mgm/gameing/help/ExtHelp/ExtHelp":183,"../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../engtst/mgm/gameing/help/MainHelp":188,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../engtst/mgm/gameing/me/mission/MissionFrame":231,"../../../../engtst/mgm/gameing/me/mounts/MyMounts":243,"../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../../engtst/mgm/gameing/me/team/TeamCreate":267,"../../../../engtst/mgm/gameing/me/team/TeamOperate":269,"../../../../map/MapManager":286,"../../../../mgm/newmainmenu/StarEffect":311,"../../../../zero/Interface/GameVersion":317,"../../../../zero/Interface/PublicInterface":318}],119:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../map/MapManager")),u=_interopRequireDefault(t("../../../../engine/BaseClass")),l=_interopRequireDefault(t("../../../../engine/control/XButton")),f=(_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),h=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),d=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),c=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),m=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),g=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),_=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),p=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),b=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/MyAttFrame")),D=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mission/MyMission"))),y=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets")),w=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/shop/MySell"))),S=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/MyTeam"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var x=function(t){function FastOperate(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FastOperate);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FastOperate.__proto__||Object.getPrototypeOf(FastOperate)).call(this));e.pani=t,e.pm3f=t.pm3f,e.iW=910,e.iH=610,e.iX=(s.default.SCRW-e.iW)/2,e.iY=(s.default.SCRH-e.iH)/2,e.btn_close=new f.default(d.default.xani_nui2),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_dundi=new l.default(d.default.xani_nicon),e.btn_dundi.InitButton("遁地术"),e.btn_dundi.Move(s.default.SCRW,s.default.SCRH,1,1),e.btn_duanzao=new l.default(d.default.xani_nicon),e.btn_duanzao.InitButton("锻造"),e.btn_duanzao.Move(s.default.SCRW,s.default.SCRH,1,1),e.btn_yejin=new l.default(d.default.xani_nicon),e.btn_yejin.InitButton("冶金"),e.btn_yejin.Move(s.default.SCRW,s.default.SCRH,1,1),e.btn_jiancai=new l.default(d.default.xani_nicon),e.btn_jiancai.InitButton("剪裁"),e.btn_jiancai.Move(s.default.SCRW,s.default.SCRH,1,1),e.btn_zhiyao=new l.default(d.default.xani_nicon),e.btn_zhiyao.InitButton("炼丹术"),e.btn_zhiyao.Move(s.default.SCRW,s.default.SCRH,1,1),e.btn_pengren=new l.default(d.default.xani_nicon),e.btn_pengren.InitButton("烹饪"),e.btn_pengren.Move(s.default.SCRW,s.default.SCRH,1,1);var i=120,a=245;return e.btn_vip=new f.default(d.default.xani_nui2),e.btn_vip.InitButton("按钮3"),e.btn_vip.sName="开通会员",e.btn_vip.Move(e.iX+e.iW-i-60,e.iY+a-66,141,49),e.btn_vip.iNameSize=25,e.btn_sell=new f.default(d.default.xani_nui2),e.btn_sell.InitButton("按钮4"),e.btn_sell.sName="摆    摊",e.btn_sell.Move(e.iX+e.iW-i-60,e.iY+a,141,49),e.btn_sell.iNameSize=25,e.btn_find=new f.default(d.default.xani_nui2),e.btn_find.InitButton("按钮4"),e.btn_find.sName="查找好友",e.btn_find.Move(e.iX+e.iW-i-60,e.iY+a+66,141,49),e.btn_find.iNameSize=25,e.btn_restore=new f.default(d.default.xani_nui2),e.btn_restore.InitButton("按钮4"),e.btn_restore.sName="快捷恢复",e.btn_restore.Move(e.iX+e.iW-i-60,e.iY+a+132,141,49),e.btn_restore.iNameSize=25,e.btn_dark=new f.default(d.default.xani_nui2),e.btn_dark.InitButton("按钮4"),p.default.me.bDark?e.btn_dark.sName="遇怪:开":e.btn_dark.sName="遇怪:关",e.btn_dark.Move(e.iX+e.iW-i-60,e.iY+a+198,141,49),e.btn_dark.iNameSize=25,e.btn_pk=new f.default(d.default.xani_nui2),e.btn_pk.InitButton("按钮4"),p.default.me.bPk?e.btn_pk.sName="对战:开":e.btn_pk.sName="对战:关",e.btn_pk.Move(e.iX+e.iW-i-60,e.iY+a+264,141,49),e.btn_pk.iNameSize=25,e.bLockStatus=!1,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FastOperate,u.default),a(FastOperate,[{key:"Draw",value:function(){var t,e,i,a,n,s;if(g.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"快","捷"),i=this.iX+30,a=this.iY+30,n=670,s=285,g.default.new_framein(i,a,n,s),a=a+s+15,s=250,g.default.new_framein(i,a,n,s),i=i+n+15,a=this.iY+30,n=170,s=550,g.default.new_framein(i,a,n,s),this.btn_close.Draw(),i=this.iX+10+20,a=this.iY+65+20,this.Draw_Skill(i,a),this.btn_vip.Draw(),this.btn_sell.Draw(),this.btn_find.Draw(),this.btn_restore.Draw(),this.btn_dark.Draw(),this.btn_pk.Draw(),i=this.iX+30,a=this.iY+330,n=670,s=250,h.default.gi().SetViewClip(i+20,a+20,i+n-20,a+s-20),t=0,p.default.me.bStandIn&&this.DrawStatus(t++,"替身状态","开启"),p.default.me.bQP&&this.DrawStatus(t++,"强行对战","开启"),p.default.me.iFlag[3]>0&&this.DrawStatus(t++,"血池剩余",""+p.default.me.iFlag[3]),p.default.me.iFlag[4]>0&&this.DrawStatus(t++,"蓝池剩余",""+p.default.me.iFlag[4]),p.default.me.iFlag[28]>0&&(t=this.DrawStatusEx1(t,"临时体质","+"+(p.default.me.iFlag[27]>>24&31),p.default.me.iFlag[28])),p.default.me.iFlag[29]>0&&(t=this.DrawStatusEx1(t,"临时法力","+"+(p.default.me.iFlag[27]>>18&31),p.default.me.iFlag[29])),p.default.me.iFlag[30]>0&&(t=this.DrawStatusEx1(t,"临时力量","+"+(p.default.me.iFlag[27]>>12&31),p.default.me.iFlag[30])),p.default.me.iFlag[31]>0&&(t=this.DrawStatusEx1(t,"临时耐力","+"+(p.default.me.iFlag[27]>>6&31),p.default.me.iFlag[31])),p.default.me.iFlag[32]>0&&(t=this.DrawStatusEx1(t,"临时敏捷","+"+(31&p.default.me.iFlag[27]),p.default.me.iFlag[32])),p.default.me.iFlagExt[1]>0&&(t=this.DrawStatusEx1(t,"临时愤怒","+"+(31&p.default.me.iFlagExt[0]),p.default.me.iFlagExt[1])),p.default.me.iFlagExt[2]>0&&(t=this.DrawStatusEx1(t,"治疗能力","+"+(p.default.me.iFlagExt[0]>>6&31)+"%",p.default.me.iFlagExt[2])),p.default.me.iFlagExt[3]>0&&(t=this.DrawStatusEx1(t,"固定伤害","+"+(p.default.me.iFlagExt[0]>>12&31),p.default.me.iFlagExt[3])),p.default.me.iFlagExt[4]>0&&(t=(e=50+5*(p.default.me.iFlagExt[0]>>18&31))%10==0?this.DrawStatusEx1(t,"物法命中","+"+e/10+"%",p.default.me.iFlagExt[4]):this.DrawStatusEx1(t,"物法命中","+"+e/10+"."+e%10+"%",p.default.me.iFlagExt[4])),p.default.me.iFlagExt[5]>0&&(t=(e=10+5*(p.default.me.iFlagExt[0]>>24&31))%10==0?this.DrawStatusEx1(t,"物法暴击","+"+e/10+"%",p.default.me.iFlagExt[5]):this.DrawStatusEx1(t,"物法暴击","+"+e/10+"."+e%10+"%",p.default.me.iFlagExt[5])),p.default.me.iFlagExt[7]>0&&(t=this.DrawStatusEx1(t,"人物修炼","+"+(31&p.default.me.iFlagExt[6]),p.default.me.iFlagExt[7])),p.default.me.iFlagExt[9]>0&&(t=this.DrawStatusEx1(t,"伤害结果","+"+20*(p.default.me.iFlagExt[6]>>12&31),p.default.me.iFlagExt[9])),p.default.me.iFlagExt[10]>0&&(t=this.DrawStatusEx1(t,"宠物属性","+"+(p.default.me.iFlagExt[6]>>18&31),p.default.me.iFlagExt[10])),p.default.me.iFlag[5]>0&&(t=this.DrawStatusEx1(t,"双倍时间","",p.default.me.iFlag[5])),p.default.me.iFlag[34]>0&&(t=this.DrawStatusEx1(t,"三倍时间","",p.default.me.iFlag[34])),p.default.me.iFlag[22]>0&&(t=this.DrawStatusEx1(t,"双倍体力","",p.default.me.iFlag[22])),p.default.me.iFlag[23]>0&&(t=this.DrawStatusEx1(t,"自动遇怪","",p.default.me.iFlag[23])),p.default.me.iChangeType>0)if(p.default.me.iChangeLast+p.default.me.ltex-r.default.get_ms()/1e3<0)p.default.me.iChangeType=0;else{if(t=this.DrawStatusEx1(t,"变身状态",d.default.de_pet.strValue(p.default.me.iChangeType%1e4,0,1),p.default.me.iChangeLast),p.default.me.iChangeSkill>0&&this.DrawStatus(t++,"变身技能",d.default.de_skill.strValue(p.default.me.iChangeSkill,0,6)),p.default.me.iChangeAtt>0){e=p.default.me.iChangeAtt%1e3-100;this.DrawStatus(t++,"变身属性",(e>0?"+"+e:e)+"%"+["气血","灵力","伤害","防御","速度"][p.default.me.iChangeAtt/1e3%10])}this.DrawStatus(t++,"变身对战","剩余"+p.default.me.iChangeFC+"次")}h.default.gi().NoClip(),e=(t+1)/2,this.bLockStatus||(this.iStatusOffY<0&&(this.iStatusOffY/=2),(t=36*e-210)<0&&(t=0),this.iStatusOffY>t&&(this.iStatusOffY-=(this.iStatusOffY-t)/2))}},{key:"DrawStatusEx1",value:function(t,e,i,a){var n=a+p.default.me.lt1-r.default.get_ms()/1e3;return n<0?t:(this.DrawStatus(t++,e,i+"("+n/3600+":"+n/60%60+":"+n%60+")"),t)}},{key:"DrawStatus",value:function(t,e,i){var a,n;a=this.iX+30+t%2*300+50,n=this.iY+330+t/2*36+10-this.iStatusOffY,g.default.ui3_Text2_(a,n,110,120,e,i)}},{key:"Draw_Skill",value:function(t,e){var i=t;t+=35,e-=35,d.default.xani_nui2.DrawAnima(this.iX+760,this.iY+50,"技能框",0),p.default.me.rbs.iSchoolId>0&&(this.btn_dundi.Move(this.iX+760,this.iY+50,80,80),this.btn_dundi.Draw(),h.default.gi().DrawText_2(this.iX+760+40,this.iY+50+105,"遁地术",4294959296,20,101,1,1,0,-2,-2,3,4278190080)),d.default.xani_nui2.DrawAnima(t,e,"技能框",0),p.default.me.rbs.iGovSkill[1]>0&&(this.btn_zhiyao.Move(t,e,80,80),this.btn_zhiyao.Draw(),h.default.gi().DrawText_2(t+40,e+105,d.default.de_skill.strValue(n.default.iGovSkillId[1],0,6)+p.default.me.rbs.iGovSkill[1]+"级",4294959296,20,101,1,1,0,-2,-2,3,4278190080)),t+=125,d.default.xani_nui2.DrawAnima(t,e,"技能框",0),p.default.me.rbs.iGovSkill[2]>0&&(this.btn_pengren.Move(t,e,80,80),this.btn_pengren.Draw(),h.default.gi().DrawText_2(t+40,e+105,d.default.de_skill.strValue(n.default.iGovSkillId[2],0,6)+p.default.me.rbs.iGovSkill[2]+"级",4294959296,20,101,1,1,0,-2,-2,3,4278190080)),t+=125,d.default.xani_nui2.DrawAnima(t,e,"技能框",0),p.default.me.rbs.iGovSkill[3]>0&&(this.btn_duanzao.Move(t,e,80,80),this.btn_duanzao.Draw(),h.default.gi().DrawText_2(t+40,e+105,d.default.de_skill.strValue(n.default.iGovSkillId[3],0,6)+p.default.me.rbs.iGovSkill[3]+"级",4294959296,20,101,1,1,0,-2,-2,3,4278190080)),t+=125,d.default.xani_nui2.DrawAnima(t,e,"技能框",0),p.default.me.rbs.iGovSkill[4]>0&&(this.btn_yejin.Move(t,e,80,80),this.btn_yejin.Draw(),h.default.gi().DrawText_2(t+40,e+105,d.default.de_skill.strValue(n.default.iGovSkillId[4],0,6)+p.default.me.rbs.iGovSkill[4]+"级",4294959296,20,101,1,1,0,-2,-2,3,4278190080)),t+=125,d.default.xani_nui2.DrawAnima(t,e,"技能框",0),p.default.me.rbs.iGovSkill[5]>0&&(this.btn_jiancai.Move(t,e,80,80),this.btn_jiancai.Draw(),h.default.gi().DrawText_2(t+40,e+105,d.default.de_skill.strValue(n.default.iGovSkillId[5],0,6)+p.default.me.rbs.iGovSkill[5]+"级",4294959296,20,101,1,1,0,-2,-2,3,4278190080)),t+=195,t=i+35,e+=135,d.default.xani_nui2.DrawAnima(t,e,"技能框",0),t+=125,d.default.xani_nui2.DrawAnima(t,e,"技能框",0),t+=125,d.default.xani_nui2.DrawAnima(t,e,"技能框",0),t+=125,d.default.xani_nui2.DrawAnima(t,e,"技能框",0),t+=125}},{key:"ProcTouch",value:function(t,e,i){var a,n,s;if(n=this.iX+30,s=this.iY+330,670,250,this.bLockStatus&&(2==t&&(this.iStatusOffY+=this.iLockY-i,this.iLockY=i),3==t&&(this.bLockStatus=!1)),r.default.bInRect(e,i,n,s,670,250)&&1==t&&(this.bLockStatus=!0,this.iLockY=i),p.default.me.rbs.iSchoolId>0&&this.btn_dundi.ProcTouch(t,e,i)&&this.btn_dundi.bCheck()&&(S.default.bNoTeam()||S.default.bAway()?p.default.me.rbs.iSchoolId>0&&(c.default.gi().s_UseSkill(0,0,0,0,0,0,0),m.default.gi().PopStat(1),o.default.gi().iMapChangeing=100,D.default.m.bCheckDoing(143)&&c.default.gi().s_FinishMission(0,143,0,0)):_.default.easymsg.AddMessage("队伍中不能使用遁地术")),p.default.me.rbs.iGovSkill[1]>0&&this.btn_zhiyao.ProcTouch(t,e,i))return this.btn_zhiyao.bCheck()&&(m.default.gi().PopStat(1),LianDanShu.Open(null,null)),!0;if(p.default.me.rbs.iGovSkill[2]>0&&this.btn_pengren.ProcTouch(t,e,i))return this.btn_pengren.bCheck()&&(p.default.me.rbs.iGovSkill[2]<10?_.default.easymsg.AddMessage("烹饪技能达到10级才可使用"):p.default.me.rbs.iPower<p.default.me.rbs.iGovSkill[2]?_.default.easymsg.AddMessage("体力不足无法烹饪"):c.default.gi().s_UseSkill(9,0,0,0,0,0,0)),!0;if(p.default.me.rbs.iGovSkill[3]>0&&this.btn_duanzao.ProcTouch(t,e,i)&&this.btn_duanzao.bCheck()&&c.default.gi().s_UseSkill(1,0,0,0,0,0,0),p.default.me.rbs.iGovSkill[4]>0&&this.btn_yejin.ProcTouch(t,e,i)&&this.btn_yejin.bCheck()&&c.default.gi().s_UseSkill(2,0,0,0,0,0,0),p.default.me.rbs.iGovSkill[5]>0&&this.btn_jiancai.ProcTouch(t,e,i)&&this.btn_jiancai.bCheck()&&c.default.gi().s_UseSkill(3,0,0,0,0,0,0),this.btn_vip.ProcTouch(t,e,i))return this.btn_vip.bCheck()&&(m.default.gi().PopStat(1),b.default.Open(3)),!0;if(this.btn_sell.ProcTouch(t,e,i)){if(this.btn_sell.bCheck())if(p.default.me.bHaveLock&&p.default.me.bLocked)_.default.easymsg.AddMessage("未解锁不能摆摊");else if(S.default.bInTeam())_.default.easymsg.AddMessage("队伍中不能摆摊");else if(p.default.me.rbs.iLev<10)_.default.easymsg.AddMessage("10级以上才能摆摊");else if(w.default.gi().bSelling)w.default.gi().bShow=!0,m.default.gi().PopStat(1);else{for(a=0;a<o.default.gi().vbk.MAXVISUALBLOCK;a++)if(null!=o.default.gi().vbk.vbs[a]){if(!o.default.gi().vbk.vbs[a].bCurrentBlock)continue;if(r.default.bInRect(o.default.gi().vbk.vbs[a].iX,o.default.gi().vbk.vbs[a].iY,p.default.me.iX-100,p.default.me.iY-160,200,200))return _.default.easymsg.AddMessage("摆摊不能距离NPC太近"),!0}m.default.gi().PopStat(1),c.default.gi().s_StartSell(0,0,0,""),p.default.me.iFightMid>0&&(p.default.me.iFightMid=0,c.default.gi().s_ChangeFightMounts(0)),p.default.me.ChangeStat("站立")}return!0}if(this.btn_find.ProcTouch(t,e,i))return this.btn_find.bCheck()&&(m.default.gi().PopStat(1),m.default.gi().PushStat(m.default.GS_FINDFRIEND)),!0;if(this.btn_restore.ProcTouch(t,e,i)){if(this.btn_restore.bCheck()){a=p.default.me.rbs.iMaxHp-p.default.me.rbs.iHp,a+=2*(p.default.me.rbs.iMaxMp-p.default.me.rbs.iMp);var u=y.default.mp.GetUseingPet();null!=u&&(a+=u.iMaxHp-u.iHp,a+=u.iMaxMp-u.iMp),c.default.gi().s_UseSkill(7,0,0,0,0,0,0)}return!0}return this.btn_dark.ProcTouch(t,e,i)&&this.btn_dark.bCheck()&&(p.default.me.bDark=!p.default.me.bDark,p.default.me.bDark?(this.btn_dark.sName="遇怪:开",c.default.gi().s_setflag(2,0,0)):(this.btn_dark.sName="遇怪:关",c.default.gi().s_setflag(2,0,1))),this.btn_pk.ProcTouch(t,e,i)&&this.btn_pk.bCheck()&&(p.default.me.bPk=!p.default.me.bPk,p.default.me.bPk?(this.btn_pk.sName="对战:开",c.default.gi().s_setflag(2,1,0)):(this.btn_pk.sName="对战:关",c.default.gi().s_setflag(2,1,1))),!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&m.default.gi().PopStat(1),!0)}}]),FastOperate}();i.default=x},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/mission/MyMission":233,"../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../engtst/mgm/gameing/me/pet/Pets":247,"../../../../engtst/mgm/gameing/me/shop/MySell":259,"../../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../../map/MapManager":286}],120:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButton")),u=_interopRequireDefault(t("../../../../engine/control/XInput")),l=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function FindFriend(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FindFriend);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FindFriend.__proto__||Object.getPrototypeOf(FindFriend)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=450,e.iH=220,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.in_name=new u.default(f.default.xani_ui),e.in_name.Move(e.iX+40+80+20,e.iY+40,160,50),e.in_name.sDetail="",e.in_name.iTextSize=30,e.in_name.iLength=12,e.in_name.iTextColor=4279324257,e.in_id=new u.default(f.default.xani_ui),e.in_id.Move(e.iX+40+80+20,e.iY+40+50+40,160,50),e.in_id.sDetail="",e.in_id.bNumber=!0,e.in_id.iTextSize=30,e.in_id.iMaxNumber=99999999,e.in_id.iTextColor=4279324257,e.btn_name=new o.default(f.default.xani_button),e.btn_name.InitButton("1号按钮90_60"),e.btn_name.sName="查找",e.btn_name.Move(e.iX+40+80+20+160+20,e.iY+35,90,60),e.btn_id=new o.default(f.default.xani_button),e.btn_id.InitButton("1号按钮90_60"),e.btn_id.sName="查找",e.btn_id.Move(e.iX+40+80+20+160+20,e.iY+40+50+40-5,90,60),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FindFriend,r.default),a(FindFriend,[{key:"Draw",value:function(){c.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),l.default.gi().DrawTextEx(this.iX+40,this.iY+40+25,"根据名字",4279324257,20,101,1,1,0,0,-2),c.default.frame_type4("8号框20_20",this.in_name.iX,this.in_name.iY,this.in_name.iW,50,20,20),this.in_name.DrawText(),this.btn_name.Draw(),l.default.gi().DrawTextEx(this.iX+40,this.iY+40+50+40+25,"根据号码",4279324257,20,101,1,1,0,0,-2),c.default.frame_type4("8号框20_20",this.in_id.iX,this.in_id.iY,this.in_id.iW,50,20,20),this.in_id.DrawText(),this.btn_id.Draw(),this.in_name.onscr(),this.in_id.onscr()}},{key:"ProcTouch",value:function(t,e,i){return this.in_name.ProcTouch(t,e,i),this.in_id.ProcTouch(t,e,i),this.btn_name.ProcTouch(t,e,i)&&this.btn_name.bCheck()&&(this.in_name.sDetail.length<=0?m.default.easymsg.AddMessage("请先输入玩家名字"):h.default.gi().s_WatchOn(4,0,0,this.in_name.sDetail)),this.btn_id.ProcTouch(t,e,i)&&this.btn_id.bCheck()&&(this.in_id.sDetail.length<=0?m.default.easymsg.AddMessage("请先输入号码"):h.default.gi().s_WatchOn(0,parseInt(this.in_id.sDetail),0,"")),3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||d.default.gi().PopStat(1),!1}}]),FindFriend}();i.default=g},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XInput":18,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86}],121:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../zero/Interface/GameVersion")),s=_interopRequireDefault(t("../../../../zero/Interface/PublicInterface")),r=_interopRequireDefault(t("../../../../config/GmConfig")),o=(_interopRequireDefault(t("../../../../config/XDefine")),_interopRequireDefault(t("../../../../engine/BaseClass"))),u=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButton"))),l=(_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),f=(_interopRequireDefault(t("../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../engine/control/XInputNumber"))),h=(_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),d=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),c=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),m=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),g=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),_=(_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"))),p=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),b=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),D=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),y=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var w=function(){function _SHOPGOODS(){_classCallCheck(this,_SHOPGOODS)}return a(_SHOPGOODS,[{key:"_SHOPGOODS",value:function(){}}]),_SHOPGOODS}(),S=function(t){function IngotMall(t){_classCallCheck(this,IngotMall);var e,i,a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(IngotMall.__proto__||Object.getPrototypeOf(IngotMall)).call(this));for(a.pani=t,a.pm3f=t.pm3f,a.iW=920,a.iH=550,a.iX=(r.default.SCRW-a.iW)/2,a.iY=(r.default.SCRH-a.iH)/2,a.btn_close=new l.default(d.default.xani_nui2),a.btn_close.InitButton("关闭按钮"),a.btn_close.Move(a.iX+a.iW-35,a.iY-25,60,60),a.sgs=new Array(20),e=0;e<20;e++)a.sgs[e]=new w;for(a.btn_page=new Array(8),e=0;e<8;e++)a.btn_page[e]=new u.default(d.default.xani_nui2),a.btn_page[e].InitButton("按钮2");for(a.in_num=new f.default(d.default.xani_nui2),a.in_num.MinMax(1,10),a.in_num.iNumber=1,a.btn_buy=new l.default(d.default.xani_nui2),a.btn_buy.InitButton("按钮1_110"),a.btn_buy.sName="购买",a.btn_charge=new l.default(d.default.xani_nui2),a.btn_charge.InitButton("按钮3"),a.btn_charge.sName="充  值",a.goods=new Array(20),e=0;e<20;e++)a.goods[e]=new D.default,a.goods[e].iPos=e;for(a.iSelect=IngotMall.iLastSelect,IngotMall.iLastSelect=0,a.btn_select=new Array(3),e=0;e<3;e++)a.btn_select[e]=new l.default(d.default.xani_nui2),a.btn_select[e].InitButton("右侧标签");for(a.btn_pay=new Array(8),i=0;i<2;i++)for(e=0;e<4;e++)a.btn_pay[4*i+e]=new u.default(d.default.xani_nui3),a.btn_pay[4*i+e].Move(a.iX+67+410*i,a.iY+50+100*e,376,94),a.btn_pay[4*i+e].InitButton("充值大按钮");return a.btn_pay1=new l.default(d.default.xani_nui2),a.btn_pay1.InitButton("按钮1"),a.btn_pay1.Move(a.iX+a.iW-67-161,a.iY+a.iH-30-53,161,53),a.btn_pay1.sName="自定义额度",a.in_price=new f.default(d.default.xani_nui2),a.in_price.iNumber=1,a.in_price.MinMax(1,1e3),a.btn_act=new l.default(d.default.xani_nui2),a.btn_act.InitButton("感叹提示"),a.btn_act.Move(a.iX+67,a.iY+a.iH-30-26-32,65,65),a.bShowAct=!1,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(IngotMall,o.default),a(IngotMall,[{key:"Draw_0",value:function(){var t,e,i,a,n;for(this.btn_page[0].sName="热卖品",this.btn_page[1].sName="装备相关",this.btn_page[2].sName="宠物相关",this.btn_page[3].sName="二级丹药",this.btn_page[4].sName="三级草药",this.btn_page[5].sName="其他",this.btn_page[6].sName="铜币区",g.default.new_framein(this.iX+30,this.iY+30,185,this.iH-60),t=0;t<7;t++)this.btn_page[t].Move(this.iX+30+20,this.iY+30+20+67*t,145,56),this.iPage==t&&(this.btn_page[t].bMouseIn=!0,this.btn_page[t].bMouseDown=!0),this.btn_page[t].Draw();e=this.iX+30+145+40+20,i=this.iY+30,a=this.iW-60-145-40-20,g.default.new_framein(e,i,a,385),this.iGx=e+20,this.iGy=i+20,y.default.new_DrawGoods(this.iGx,this.iGy,this.goods,null,null),e+=465,i+=20,null!=this.lockgoods&&(g.default.new_TagText2(e,i,100,"名称",d.default.de_goods.strValue(this.lockgoods.iTid,0,4)),i+=50,0==this.sgs[this.lockgoods.iPos].iPrice&&this.sgs[this.lockgoods.iPos].iMoney>0?(t=this.sgs[this.lockgoods.iPos].iMoney,g.default.new_TagText2(e,i,100,"单价",t%1e4==0?t/1e4+"万铜币":t+"铜币")):g.default.new_TagText2(e,i,100,"单价",this.sgs[this.lockgoods.iPos].iPrice+"元宝"),i+=50,h.default.gi().DrawTextEx(e,i+25,"数量:",4278206039,30,101,1,1,0,0,-2),this.in_num.Move(e+67,i,100),this.in_num.Draw(),i+=70,0==this.sgs[this.lockgoods.iPos].iPrice&&this.sgs[this.lockgoods.iPos].iMoney>0?(t=this.sgs[this.lockgoods.iPos].iMoney*this.in_num.iNumber,g.default.new_TagText2(e,i,100,"总价",t%1e4==0?t/1e4+"万铜币":t+"铜币")):g.default.new_TagText2(e,i,100,"总价",this.sgs[this.lockgoods.iPos].iPrice*this.in_num.iNumber+"元宝"),i+=100,this.btn_buy.Move(e+57,i,110,52),this.btn_buy.Draw()),e=this.iX+30+40+145+20,i=this.iY+30+20+345+20+20,n=this.iH-60-345-40-20,g.default.new_framein(e,i,a,n),g.default.new_TagText2(e+20,i+(n-32)/2,150,"元宝",""+b.default.me.rbs.iInGot),g.default.new_TagText2(e+20+235,i+(n-32)/2,150,"铜币",""+b.default.me.rbs.iMoney),this.btn_charge.Move(e+490,i+(n/2-24.5),141,49),this.btn_charge.Draw(),null!=this.lockgoods&&y.default.new_DrawRect(this.iGx,this.iGy,this.goods,this.lockgoods,0),y.default.bShowDetail()&&y.default.new_DrawDetail(null,-1,-1,0)}},{key:"Draw_1",value:function(){var t;for(t=0;t<8;t++)this.btn_pay[t].Draw(),d.default.xani_nui3.DrawAnima(this.btn_pay[t].iX+7,this.btn_pay[t].iY+7,"充值图标",t),h.default.gi().DrawText_2(this.btn_pay[t].iX+7+80+7,this.btn_pay[t].iY+12+17,"￥"+IngotMall.amount[t]+"="+10*IngotMall.amount[t]+"元宝",4294967295,28,101,1,1,0,0,-2,1,4278190080),1==IngotMall.iAddType&&t>=4&&(d.default.xani_nui3.DrawAnima(this.btn_pay[t].iX,this.btn_pay[t].iY,"加送标签",t-4),h.default.gi().DrawTextEx(this.btn_pay[t].iX+7+80+7,this.btn_pay[t].iY+12+17+38,"加送"+IngotMall.addmount[t]+"元宝",4294902015,28,101,1,1,0,0,-2)),2==IngotMall.iAddType&&t>=4&&(d.default.xani_nui3.DrawAnima(this.btn_pay[t].iX,this.btn_pay[t].iY,"加送标签",4),h.default.gi().DrawTextEx(this.btn_pay[t].iX+7+80+7,this.btn_pay[t].iY+12+17+38,"送：充值礼包 x "+IngotMall.addlibao[t],4294902015,28,101,1,1,0,0,-2));this.btn_act.Move(this.btn_pay[0].iX,this.iY+this.iH-30-26-32,65,65),this.btn_act.Draw(),h.default.gi().DrawTextEx(this.btn_pay[0].iX+70,this.btn_act.iY+32,"充值活动",4278206039,30,101,1,1,0,0,-2),this.bShowAct,this.CanDefine(n.default.QUDAO)&&(h.default.gi().DrawTextEx(this.btn_pay1.iX-130-190,this.btn_pay1.iY+12,"充值金额(元):",4278206039,30,101,1,1,0,0,0),this.in_price.Move(this.btn_pay1.iX-130,this.btn_pay1.iY+2,120),this.in_price.Draw(),this.btn_pay1.Draw())}},{key:"CanDefine",value:function(t){return!0}},{key:"Draw_2",value:function(){var t,e,i,a,n;for(this.btn_page[0].sName="储备区",g.default.new_framein(this.iX+30,this.iY+30,185,this.iH-60),t=0;t<1;t++)this.btn_page[t].Move(this.iX+30+20,this.iY+30+20+67*t,145,56),this.iPage==t&&(this.btn_page[t].bMouseIn=!0,this.btn_page[t].bMouseDown=!0),this.btn_page[t].Draw();e=this.iX+30+145+40+20,i=this.iY+30,a=this.iW-60-145-40-20,g.default.new_framein(e,i,a,385),this.iGx=e+20,this.iGy=i+20,y.default.new_DrawGoods(this.iGx,this.iGy,this.goods,null,null),e+=465,i+=20,null!=this.lockgoods&&(g.default.new_TagText2(e,i,100,"名称",d.default.de_goods.strValue(this.lockgoods.iTid,0,4)),i+=50,0==this.sgs[this.lockgoods.iPos].iPrice&&0==this.sgs[this.lockgoods.iPos].iMoney&&this.sgs[this.lockgoods.iPos].iReserve>0?(t=this.sgs[this.lockgoods.iPos].iReserve,g.default.new_TagText2(e,i,100,"单价",t%1e4==0?t/1e4+"万储备金":t+"储备金")):0==this.sgs[this.lockgoods.iPos].iPrice&&this.sgs[this.lockgoods.iPos].iMoney>0?(t=this.sgs[this.lockgoods.iPos].iMoney,g.default.new_TagText2(e,i,100,"单价",t%1e4==0?t/1e4+"万铜币":t+"铜币")):g.default.new_TagText2(e,i,100,"单价",this.sgs[this.lockgoods.iPos].iPrice+"元宝"),i+=50,h.default.gi().DrawTextEx(e,i+25,"数量:",4278206039,30,101,1,1,0,0,-2),this.in_num.Move(e+67,i,100),this.in_num.Draw(),i+=70,0==this.sgs[this.lockgoods.iPos].iPrice&&0==this.sgs[this.lockgoods.iPos].iMoney&&this.sgs[this.lockgoods.iPos].iReserve>0?(t=this.sgs[this.lockgoods.iPos].iReserve*this.in_num.iNumber,g.default.new_TagText2(e,i,100,"总价",t%1e4==0?t/1e4+"万储备金":t+"储备金")):0==this.sgs[this.lockgoods.iPos].iPrice&&this.sgs[this.lockgoods.iPos].iMoney>0?(t=this.sgs[this.lockgoods.iPos].iMoney*this.in_num.iNumber,g.default.new_TagText2(e,i,100,"总价",t%1e4==0?t/1e4+"万铜币":t+"铜币")):g.default.new_TagText2(e,i,100,"总价",this.sgs[this.lockgoods.iPos].iPrice*this.in_num.iNumber+"元宝"),this.sgs[this.lockgoods.iPos].iBuyLimit>0&&h.default.gi().DrawTextEx(e,i+60,"每日限购:"+this.sgs[this.lockgoods.iPos].iBuyLimit,4278206039,30,101,1,1,0,0,-2),i+=100,this.btn_buy.Move(e+57,i,110,52),this.btn_buy.Draw()),e=this.iX+30+40+145+20,i=this.iY+30+20+345+20+20,n=this.iH-60-345-40-20,g.default.new_framein(e,i,a,n),g.default.new_TagText2(e+20,i+(n-32)/2,150,"元宝",""+b.default.me.rbs.iInGot),g.default.new_TagText2(e+20+235,i+(n-32)/2,150,"储备金",""+b.default.me.rbs.iReserve),this.btn_charge.Move(e+490,i+(n/2-24.5),141,49),this.btn_charge.Draw(),null!=this.lockgoods&&y.default.new_DrawRect(this.iGx,this.iGy,this.goods,this.lockgoods,0),y.default.bShowDetail()&&y.default.new_DrawDetail(null,-1,-1,0)}},{key:"Draw",value:function(){var t;for(0==this.iSelect?g.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"商","城"):1==this.iSelect?g.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"绑","定","商","城"):g.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"充","值"),this.btn_close.Draw(),t=0;t<3;t++)this.btn_select[t].Move(this.iX+this.iW-15,this.iY+40+130*t,50,130),this.iSelect==t&&(this.btn_select[t].bMouseDown=!0),this.btn_select[t].Draw(),0==t?g.default.new_lableword2(this.iX+this.iW-15,this.iY+40+130*t,40,130,this.iSelect==t,"商","城"):1==t?g.default.new_lableword4(this.iX+this.iW-15,this.iY+46+130*t,40,70,this.iSelect==t,"绑","定","商","城"):g.default.new_lableword2(this.iX+this.iW-15,this.iY+40+130*t,40,130,this.iSelect==t,"充","值");switch(this.iSelect){case 0:this.Draw_0();break;case 1:this.Draw_2();break;case 2:this.Draw_1()}}},{key:"ProcTouch",value:function(t,e,i){if(this.bShowAct=!1,2==this.iSelect&&this.CanDefine(n.default.QUDAO)&&this.in_price.ProcTouch(t,e,i))return!0;var a;if(0==this.iSelect){if(null!=this.lockgoods){if(this.in_num.ProcTouch(t,e,i))return!0;if(this.btn_buy.ProcTouch(t,e,i)){if(this.btn_buy.bCheck()&&this.in_num.iNumber>=1&&this.in_num.iNumber<=10)if(0==this.sgs[this.lockgoods.iPos].iPrice&&this.sgs[this.lockgoods.iPos].iMoney>0)if(b.default.me.rbs.iMoney<this.sgs[this.lockgoods.iPos].iMoney*this.in_num.iNumber)_.default.easymsg.AddMessage("现金不足");else{for(a=0;a<this.in_num.iNumber;a++)c.default.gi().s_IngotMallBuy(this.iShopId,this.sgs[this.lockgoods.iPos].iTid,this.sgs[this.lockgoods.iPos].iCount);m.default.gi().PushStat(m.default.GS_LOADING1)}else if(b.default.me.rbs.iInGot<this.sgs[this.lockgoods.iPos].iPrice*this.in_num.iNumber)_.default.easymsg.AddMessage("元宝不足");else{for(a=0;a<this.in_num.iNumber;a++)s.default.gi().mta_record(5,this.sgs[this.lockgoods.iPos].iPrice,d.default.de_goods.strValue(this.lockgoods.iTid,0,4)),c.default.gi().s_IngotMallBuy(this.iShopId,this.sgs[this.lockgoods.iPos].iTid,this.sgs[this.lockgoods.iPos].iCount);m.default.gi().PushStat(m.default.GS_LOADING1)}return!0}}else this.in_num.iNumber=1;for(this.lockgoods=y.default.new_LockGoods(e,i,this.iGx,this.iGy,this.goods,t),y.default.NoMove(),null!=this.lockgoods&&(121==this.lockgoods.iTid?(this.in_num.MinMax(1,1),this.in_num.iNumber=1):this.in_num.MinMax(1,10)),this.btn_charge.ProcTouch(t,e,i)&&this.btn_charge.bCheck()&&(this.iSelect=2),a=0;a<7;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&(this.iPage=a,c.default.gi().s_IngotMall(this.iPage,0))}if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&m.default.gi().PopStat(1),!0;for(a=0;a<3;a++)this.btn_select[a].ProcTouch(t,e,i)&&this.btn_select[a].bCheck()&&a!=this.iSelect&&(this.iSelect=a,this.iPage=0,0==this.iSelect&&c.default.gi().s_IngotMall(this.iPage,0),1==this.iSelect&&c.default.gi().s_IngotMall(10+this.iPage,1));if(1==this.iSelect){if(null!=this.lockgoods){if(this.in_num.ProcTouch(t,e,i))return!0;if(this.btn_buy.ProcTouch(t,e,i)){if(this.btn_buy.bCheck()&&this.in_num.iNumber>=1&&this.in_num.iNumber<=10)if(0==this.sgs[this.lockgoods.iPos].iPrice&&0==this.sgs[this.lockgoods.iPos].iMoney&&this.sgs[this.lockgoods.iPos].iReserve>0)if(b.default.me.rbs.iReserve<this.sgs[this.lockgoods.iPos].iReserve*this.in_num.iNumber)_.default.easymsg.AddMessage("储备金不足");else{for(a=0;a<this.in_num.iNumber;a++)c.default.gi().s_IngotMallBuy(this.iShopId,this.sgs[this.lockgoods.iPos].iTid,this.sgs[this.lockgoods.iPos].iCount);m.default.gi().PushStat(m.default.GS_LOADING1)}else if(0==this.sgs[this.lockgoods.iPos].iPrice&&this.sgs[this.lockgoods.iPos].iMoney>0)if(b.default.me.rbs.iMoney<this.sgs[this.lockgoods.iPos].iMoney*this.in_num.iNumber)_.default.easymsg.AddMessage("现金不足");else{for(a=0;a<this.in_num.iNumber;a++)c.default.gi().s_IngotMallBuy(this.iShopId,this.sgs[this.lockgoods.iPos].iTid,this.sgs[this.lockgoods.iPos].iCount);m.default.gi().PushStat(m.default.GS_LOADING1)}else if(b.default.me.rbs.iInGot<this.sgs[this.lockgoods.iPos].iPrice*this.in_num.iNumber)_.default.easymsg.AddMessage("元宝不足");else{for(a=0;a<this.in_num.iNumber;a++)s.default.gi().mta_record(5,this.sgs[this.lockgoods.iPos].iPrice,d.default.de_goods.strValue(this.lockgoods.iTid,0,4)),c.default.gi().s_IngotMallBuy(this.iShopId,this.sgs[this.lockgoods.iPos].iTid,this.sgs[this.lockgoods.iPos].iCount);m.default.gi().PushStat(m.default.GS_LOADING1)}return!0}}else this.in_num.iNumber=1;for(this.lockgoods=y.default.new_LockGoods(e,i,this.iGx,this.iGy,this.goods,t),y.default.NoMove(),null!=this.lockgoods&&(121==this.lockgoods.iTid?(this.in_num.MinMax(1,1),this.in_num.iNumber=1):this.in_num.MinMax(1,10)),this.btn_charge.ProcTouch(t,e,i)&&this.btn_charge.bCheck()&&(this.iSelect=2),a=0;a<1;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&(this.iPage=a,c.default.gi().s_IngotMall(this.iPage+10,1))}if(2==this.iSelect){for(a=0;a<8;a++)this.btn_pay[a].ProcTouch(t,e,i)&&this.btn_pay[a].bCheck()&&s.default.gi().Pay(IngotMall.amount[a]);this.btn_act.ProcTouch(t,e,i)&&this.btn_act.bCheck()&&(this.bShowAct=!this.bShowAct,p.default.fm.Open("1，单次充值50元可参与神兽抽奖活动，详情请在西阳城神兽使者处查询")),this.CanDefine(n.default.QUDAO)&&this.btn_pay1.ProcTouch(t,e,i)&&this.btn_pay1.bCheck()&&((a=this.in_price.iNumber)<1||a>1e3?_.default.easymsg.AddMessage("充值额度为1~1000"):s.default.gi().Pay(a))}return!1}}]),IngotMall}();i.default=S,S.iAddType=0,S.iLastSelect=0,S.amount=[10,20,30,50,100,300,500,1e3],S.addmount=[0,0,0,0,50,300,750,2e3],S.addlibao=[0,0,0,0,1,4,8,20],S.OpenEx=function(){c.default.gi().s_IngotMall(0,2)},S.OPEN=function(t){var e,i;m.default.gi().iXStat!=m.default.GS_INGOTMALL&&m.default.gi().PushStat(m.default.GS_INGOTMALL);var a=m.default.gi().LastStat(0);for(a.iShopId=t.GetNextInt(),a.sShopName=t.GetNextString(),e=0;e<20;e++)a.goods[e].iGid=-1;for(e=0;a.sgs[e].iTid=t.GetNextInt(),-1!=a.sgs[e].iTid;){for(a.sgs[e].iCount=t.GetNextInt(),a.sgs[e].iPrice=t.GetNextInt(),a.sgs[e].iMoney=t.GetNextInt(),a.sgs[e].iReserve=t.GetNextInt(),a.sgs[e].iBuyLimit=t.GetNextByte(),a.goods[e].iGid=1,a.goods[e].iTid=a.sgs[e].iTid,a.goods[e].iCount=a.sgs[e].iCount,i=0;i<8;i++)a.goods[e].iAtts[i]=0;d.default.xani_ngoods.InitAnimaWithName(d.default.de_goods.strValue(a.goods[e].iTid,-1,10),a.goods[e].aa),e++}a.iSgCount=e,a.lockgoods=null,a.sTitle=t.GetNextString(),S.iAddType=t.GetNextByte(),a.iPage=t.GetNextByte(),a.iSelect=t.GetNextByte()}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XButtonEx2":16,"../../../../engine/control/XInput":18,"../../../../engine/control/XInputNumber":19,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../zero/Interface/GameVersion":317,"../../../../zero/Interface/PublicInterface":318}],122:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/gov/MyGov")),_=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),p=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var b=function(t){function LianDanShu(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LianDanShu);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LianDanShu.__proto__||Object.getPrototypeOf(LianDanShu)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=950,i.iH=475,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_goods=new Array(8),i.gmake=new Array(8),i.igsub=new Array(8),e=0;e<8;e++)i.btn_goods[e]=new r.default(l.default.xani_nui3),i.btn_goods[e].InitButton("物品格子"),i.gmake[e]=null,i.igsub[e]=1;return i.btn_goods[0].Move(i.iX+30+200-40,i.iY+120-60,80,80),i.btn_goods[1].Move(i.iX+30+200-40,i.iY+120+60,80,80),i.btn_goods[2].Move(i.iX+30+200-40-100,i.iY+120-80,80,80),i.btn_goods[3].Move(i.iX+30+200-40+100,i.iY+120-80,80,80),i.btn_goods[4].Move(i.iX+30+200-40-100,i.iY+120+80,80,80),i.btn_goods[5].Move(i.iX+30+200-40+100,i.iY+120+80,80,80),i.btn_make=new o.default(l.default.xani_nui2),i.btn_make.InitButton("按钮1_110"),i.btn_make.sName="炼药",i.btn_close=new r.default(l.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LianDanShu,s.default),a(LianDanShu,[{key:"Draw",value:function(){var t,e,i;for(d.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"炼","丹"),this.btn_close.Draw(),l.default.xani_nui3.DrawAnima(this.iX+230,this.iY+200,"炼丹炉背景",0),e=this.iX+this.iW-30-430-40,i=this.iY+30,d.default.new_framein(e,i,470,this.iH-60),u.default.gi().DrawTextEx(e+20,i+20,"双击选择丹方：",4278206039,30,101,1,1,0,0,0),this.iGx=e+20,this.iGy=i+20+30,_.default.new_DrawGoods(this.iGx,this.iGy,p.default.gi().goods[2],this.gmake,this.igsub),null!=this.lockgoods&&_.default.new_DrawRect(this.iGx,this.iGy,p.default.gi().goods[2],this.lockgoods,0),t=0;t<6;t++)this.btn_goods[t].Draw(),null!=this.gmake[t]&&_.default.new_DrawOneGoods_ext(this.btn_goods[t].iX,this.btn_goods[t].iY,this.gmake[t],1);i=this.iY+this.iH-30-160,d.default.new_framein(this.iX+30,i,400,160);var a=this.Check();c.default.gi().FormatEx(a,360,25,0,0,30),c.default.gi().Draw(this.iX+30+20,i+20),l.default.sop("aaa="+a),this.bCanMake&&(this.btn_make.Move(this.iX+30+400-20-110,i+160-20-52,110,52),this.btn_make.Draw()),_.default.bShowDetail()&&_.default.new_DrawDetail(null,-1,-1,0)}},{key:"Check",value:function(){var t,e,i,a,n=[0,0,0,0,0,0,0,0,0,0],s="#c003e57";if(this.bCanMake=!1,null==this.gmake[0])return"请先放入丹方";for(a=0,t=3;t<7&&!((e=this.gmake[0].iAtts[t])<=0);t++){for(i=2;i<6;i++)if(null!=this.gmake[i]&&this.gmake[i].iTid==e&&0==n[i]){n[i]=1;break}i>=6&&(s=s+"缺少草药："+l.default.de_goods.strValue(e,-1,4)+"#e",a++)}return a>0?s:(t=60,s="#e炼药成功率"+(t=195==this.gmake[0].iTid?60:328==this.gmake[0].iTid?50:329==this.gmake[0].iTid?40:330==this.gmake[0].iTid?10:5)+"%",null!=this.gmake[1]&&this.gmake[1].iGid>0&&(s+="#e炼丹炉提高成功率"+this.gmake[1].iAtts[3]+"%"),g.default.mg.iZhuQueLev>0&&(t=g.default.mg.iZhuQueLev/5,s+="#e朱雀堂提高成功率"+(t*=5)/10+"."+t%10+"%"),this.bCanMake=!0,"#c00ff00材料齐备"+s)}},{key:"ProcTouch",value:function(t,e,i){var a,n,s,r;if(this.bCanMake&&this.btn_make.ProcTouch(t,e,i)&&this.btn_make.bCheck()){var o=[0,0,0,0,0,0,0,0];for(a=0;a<8;a++)null!=this.gmake[a]&&(o[a]=this.gmake[a].iGid,(n=l.default.de_goods.intValue(this.gmake[a].iTid,0,28))>1?(this.gmake[a].iCount--,this.gmake[a].iCount<=0&&(this.gmake[a].iGid=-1)):this.gmake[a].iGid=-1,this.gmake[a]=null);f.default.gi().s_UseSkill(8,o[0],o[1],o[2],o[3],o[4],o[5])}if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0;if(this.lockgoods=_.default.new_LockGoods(e,i,this.iGx,this.iGy,p.default.gi().goods[2],t),3==t&&null!=this.lockgoods&&_.default.bCanProc()){if(n=l.default.de_goods.intValue(this.lockgoods.iTid,-1,27),195==this.lockgoods.iTid||328==this.lockgoods.iTid||329==this.lockgoods.iTid||330==this.lockgoods.iTid||331==this.lockgoods.iTid){for(this.gmake[0]=this.lockgoods,r=2,a=3;a<7;a++)if((n=this.lockgoods.iAtts[a])>0)for(s=0;s<20;s++)if(p.default.gi().goods[2][s].iGid>0&&p.default.gi().goods[2][s].iTid==n){this.gmake[r++]=p.default.gi().goods[2][s];break}}else if(this.lockgoods.iTid>=342&&this.lockgoods.iTid<=343)this.gmake[1]=this.lockgoods;else if(-1!=n||this.lockgoods.iTid>=337&&this.lockgoods.iTid<=341){for(a=2;a<6;a++)if(null==this.gmake[a]){this.gmake[a]=this.lockgoods;break}}else m.default.easymsg.AddMessage("请选择丹方");this.lockgoods=null}for(a=0;a<6;a++)this.btn_goods[a].ProcTouch(t,e,i)&&this.btn_goods[a].bCheck()&&(this.gmake[a]=null);return!1}},{key:"AutoPutGoods",value:function(t){var e,i,a,n;for(n=2,e=3;e<7;e++)if((i=t.iAtts[e])>0)for(a=0;a<20;a++)if(p.default.gi().goods[2][a].iGid>0&&p.default.gi().goods[2][a].iTid==i){this.gmake[n++]=p.default.gi().goods[2][a];break}}}]),LianDanShu}();i.default=b,b.Open=function(t,e){var i=h.default.gi().PushStat(h.default.GS_LIANDANSHU);i.gmake[0]=t,i.gmake[1]=e,null!=t&&i.AutoPutGoods(t),f.default.gi().s_NewGovOperate(22,0,0,0,0,"")}},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],123:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../map/FindWay")),o=_interopRequireDefault(t("../../../../map/MapManager")),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),f=_interopRequireDefault(t("../../../../engtst/mgm/gameing/Gameing")),h=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame")),d=_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/JQMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/shop/MySell")),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/MyTeam")),_=_interopRequireDefault(t("./SystemOperate"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(){function SteeringWheel(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SteeringWheel)}return a(SteeringWheel,[{key:"SteeringWheel",value:function(){this.iW=160,this.iH=160,this.pm3f=u.default.xm3f}},{key:"Draw",value:function(){if(!o.default.gi().vbk.mapdialog.bHideUI()&&!d.default.jq.bJQLock()&&1!=_.default.iWheel){var t,e,i;if(this.iX=this.iW/2,h.default.gi().bOpen?this.iY=n.default.SCRH-h.default.gi().iModifyH-this.iH/2-70:this.iY=n.default.SCRH-this.iH/2,this.iY>n.default.SCRH-this.iH/2&&(this.iY=n.default.SCRH-this.iH/2),l.default.xani_ui.DrawAnima(this.iX,this.iY,"方向盘",0),this.bLocked){this.iLockTime++,t=s.default.llength(this.iLockX,this.iLockY,this.iX,this.iY);var a=s.default.GetAngleXY(this.iLockX,this.iLockY,this.iX,this.iY);if(e=50*Math.cos(a*Math.PI/180),i=50*Math.sin(a*Math.PI/180),f.default.iFindWayOnce<=0&&(f.default.iFindWayOnce++,g.default.bNoTeam()||g.default.bTeamLeader()||g.default.bAway()))if(o.default.gi().mfy.findway1(c.default.me.iX,c.default.me.iY,c.default.me.iX+e,c.default.me.iY+i)){if(r.default.bAutoBoom&&this.bAutoRun)return this.bAutoRun=!1,this.bLocked=!1,void l.default.xani_ui.DrawAnima(this.iX,this.iY,"方向盘",1);o.default.gi().mfy.checkagain()&&(o.default.gi().vbk.iGoToNpcFlag=-1,o.default.gi().vbk.iGoToNpcId=-1,c.default.me.start(o.default.gi().mfy.iPath,o.default.gi().mfy.iPathDeep))}else if(this.bAutoRun)return this.bAutoRun=!1,this.bLocked=!1,void l.default.xani_ui.DrawAnima(this.iX,this.iY,"方向盘",1);t>50?(e=50*Math.cos(a*Math.PI/180),i=50*Math.sin(a*Math.PI/180)):(e=this.iLockX-this.iX,i=this.iLockY-this.iY)}else e=0,i=0;this.bAutoRun&&(e=0,i=0),l.default.xani_ui.DrawAnima(this.iX+e,this.iY+i,"方向盘",1)}}},{key:"ProcTouch",value:function(t,e,i){return!o.default.gi().vbk.mapdialog.bHideUI()&&!d.default.jq.bJQLock()&&(!m.default.gi().bSelling&&(1!=_.default.iWheel&&(1==t&&(this.bAutoRun&&(this.bAutoRun=!1,this.bLocked=!1),s.default.llength(e,i,this.iX,this.iY)<=80&&(this.iLockTime=0,this.bLocked=!0,this.iLockX=e,this.iLockY=i)),!(!this.bLocked||this.bAutoRun)&&(2==t&&(this.iLockX=e,this.iLockY=i),3!=t||((this.iLockTime>=6||s.default.llength(e,i,this.iX,this.iY)<=80)&&(this.bLocked=!1),!0)))))}}]),SteeringWheel}();i.default=p,p.sw=new p},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/gameing/Gameing":91,"../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame":111,"../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/shop/MySell":259,"../../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../../map/FindWay":284,"../../../../map/MapManager":286,"./SystemOperate":124}],124:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../zero/Interface/GameVersion")),s=_interopRequireDefault(t("../../../../zero/Interface/PublicInterface")),r=(_interopRequireDefault(t("../../../../config/GameData")),_interopRequireDefault(t("../../../../config/GmConfig"))),o=_interopRequireDefault(t("../../../../engine/BaseClass")),u=_interopRequireDefault(t("../../../../engine/control/XAdjust")),l=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),f=_interopRequireDefault(t("../../../../engine/control/XCheckBox")),h=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),d=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),c=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),m=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),g=_interopRequireDefault(t("../../../../engtst/mgm/History/XRecordFast")),_=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),p=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),b=(_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/Gameing"))),D=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/privatechat/FriendList")),y=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame")),w=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),S=_interopRequireDefault(t("../../../../config/XDefine"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var x=function(t){function SystemOperate(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SystemOperate);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SystemOperate.__proto__||Object.getPrototypeOf(SystemOperate)).call(this));for(i.pani=t,i.pm3f=t.pm3f,SystemOperate.iW=980,SystemOperate.iH=640,SystemOperate.iX=(r.default.SCRW-SystemOperate.iW)/2,SystemOperate.iY=(r.default.SCRH-SystemOperate.iH)/2,i.btn_close=new l.default(d.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(SystemOperate.iX+SystemOperate.iW-35,SystemOperate.iY-25,60,60),i.btn_page=new Array(3),e=0;e<3;e++)i.btn_page[e]=new l.default(d.default.xani_nui2),i.btn_page[e].InitButton("按钮2");for(i.btn_page[0].sName="显示",i.btn_page[1].sName="声音",i.btn_page[2].sName="其他",i.iPage=0,i.chk_show=new Array(8),e=0;e<8;e++)i.chk_show[e]=new f.default(d.default.xani_nui3),i.chk_show[e].InitBox("统一勾选"),i.chk_show[e].Move(SystemOperate.iX+SystemOperate.iW-25-50-60,SystemOperate.iY+25+55*e,50,50),i.chk_show[e].bTrue=!0;for(i.chk_show[0].sDetail="显示人物",i.chk_show[1].sDetail="显示坐骑",i.chk_show[2].sDetail="显示武器",i.chk_show[3].sDetail="显示换色",i.chk_show[4].sDetail="显示跟随宠物",i.chk_show[5].sDetail="显示名字",i.chk_show[6].sDetail="显示称谓",i.chk_show[7].sDetail="显示摊位",i.chk_show[0].bTrue=SystemOperate.bShowRole,i.chk_show[1].bTrue=SystemOperate.bShowMount,i.chk_show[2].bTrue=SystemOperate.bShowWeapon,i.chk_show[3].bTrue=SystemOperate.bShowColor,i.chk_show[4].bTrue=SystemOperate.bShowFollow,i.chk_show[5].bTrue=SystemOperate.bShowName,i.chk_show[6].bTrue=SystemOperate.bShowTitle,i.chk_show[7].bTrue=SystemOperate.bShowSell,i.btn_resetrate=new l.default(d.default.xani_nui2),i.btn_resetrate.InitButton("按钮1_110"),i.btn_resetrate.sName="重置",i.adj_ls=new u.default(d.default.xani_nui3),i.adj_ls.InitAdjust("左右调节"),i.adj_ls.SetPos(0,400,SystemOperate.iScreenLS),i.btn_pq=new Array(3),e=0;e<3;e++)i.btn_pq[e]=new f.default(d.default.xani_nui3),i.btn_pq[e].InitBox("圆形选中"),i.btn_pq[e].bTrue=!1;return S.default.sop("SystemOperate.iPictureQuality"+SystemOperate.iPictureQuality),S.default.sop("SystemOperate.iMusic"+SystemOperate.iMusic),i.btn_pq[SystemOperate.iPictureQuality].bTrue=!0,i.btn_pq[0].sDetail="高",i.btn_pq[1].sDetail="中",i.btn_pq[2].sDetail="低",i.adj_pb=new u.default(d.default.xani_nui3),i.adj_pb.InitAdjust("左右调节"),i.adj_pb.SetPos(0,50,SystemOperate.iPictureBuffer),i.adj_nrc=new u.default(d.default.xani_nui3),i.adj_nrc.InitAdjust("左右调节"),i.adj_nrc.SetPos(10,50,SystemOperate.iNearRoleCount),i.chk_music=new f.default(d.default.xani_nui3),i.chk_music.InitBox("统一勾选"),1==SystemOperate.iMusic?i.chk_music.bTrue=!0:i.chk_music.bTrue=!1,i.chk_music.sDetail="音乐",i.chk_sound=new f.default(d.default.xani_nui3),i.chk_sound.InitBox("统一勾选"),1==SystemOperate.iSound?i.chk_sound.bTrue=!0:i.chk_sound.bTrue=!1,i.chk_sound.sDetail="音效",i.chk_wheel=new f.default(d.default.xani_nui3),i.chk_wheel.InitBox("统一勾选"),0==SystemOperate.iWheel?i.chk_wheel.bTrue=!0:i.chk_wheel.bTrue=!1,i.chk_wheel.sDetail="方向盘控制",i.chk_exthelp=new f.default(d.default.xani_nui3),i.chk_exthelp.InitBox("统一勾选"),1==g.default.iExtHelp?i.chk_exthelp.bTrue=!0:i.chk_exthelp.bTrue=!1,i.chk_exthelp.sDetail="开启新手引导",SystemOperate.bAllowTeam=(256&w.default.me.iFlag[2])>0,SystemOperate.bAllowGoods=(512&w.default.me.iFlag[2])>0,SystemOperate.bAllowTrade=(1024&w.default.me.iFlag[2])>0,SystemOperate.bAllowChat=(128&w.default.me.iFlag[2])>0,i.chk_allowteam=new f.default(d.default.xani_nui3),i.chk_allowteam.InitBox("统一勾选"),i.chk_allowteam.bTrue=SystemOperate.bAllowTeam,i.chk_allowteam.sDetail="拒绝其他玩家发起的组队邀请",i.chk_allowgoods=new f.default(d.default.xani_nui3),i.chk_allowgoods.InitBox("统一勾选"),i.chk_allowgoods.bTrue=SystemOperate.bAllowGoods,i.chk_allowgoods.sDetail="拒绝接受其他玩家给予的物品",i.chk_allowtrade=new f.default(d.default.xani_nui3),i.chk_allowtrade.InitBox("统一勾选"),i.chk_allowtrade.bTrue=SystemOperate.bAllowTrade,i.chk_allowtrade.sDetail="屏蔽其他玩家发起的交易",i.chk_allowchat=new f.default(d.default.xani_nui3),i.chk_allowchat.InitBox("统一勾选"),i.chk_allowchat.bTrue=SystemOperate.bAllowChat,i.chk_allowchat.sDetail="屏蔽陌生人的私聊信息",i.btn_logout=new l.default(d.default.xani_button),i.btn_logout.InitButton("1号按钮150_60"),i.btn_logout.sName="注销登录",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SystemOperate,o.default),a(SystemOperate,[{key:"ResetAnima",value:function(){var t;for(t=0;t<b.default.iNearMax;t++)b.default.gameing.nrs[t].bUseing&&(b.default.gameing.nrs[t].bfc8=!0);w.default.me.bfc8=!0}},{key:"Draw",value:function(){var t,e,i,a,s;for(SystemOperate.iX=(r.default.SCRW-SystemOperate.iW)/2,SystemOperate.iY=(r.default.SCRH-SystemOperate.iH)/2,_.default.new_baseframe2(SystemOperate.iX,SystemOperate.iY,SystemOperate.iW,SystemOperate.iH,"系","统"),this.btn_close.Draw(),i=SystemOperate.iX+30,e=SystemOperate.iY+30,a=185,s=SystemOperate.iH-60,_.default.new_framein(i,e,a,s),t=0;t<3;t++)this.iPage==t&&(this.btn_page[t].bMouseDown=!0,this.btn_page[t].bMouseIn=!0),this.btn_page[t].Move(i+20,e+20+76*t,145,56),this.btn_page[t].Draw();if(i+=a+20,a=SystemOperate.iW-60-20-a,_.default.new_framein(i,e,a,s),0==this.iPage){for(i+=20,e+=20,i+=15,e+=15,this.chk_show[0].Move(i,e,50,50),this.chk_show[1].Move(i+200,e,50,50),this.chk_show[2].Move(i+400,e,50,50),e+=60,this.chk_show[3].Move(i+200,e,50,50),this.chk_show[4].Move(i+400,e,50,50),e+=60,this.chk_show[5].Move(i,e,50,50),this.chk_show[6].Move(i+200,e,50,50),this.chk_show[7].Move(i+400,e,50,50),t=0;t<8;t++)this.chk_show[t].Draw();for(SystemOperate.bShowRole!=this.chk_show[0].bTrue&&(SystemOperate.bShowRole=this.chk_show[0].bTrue,this.ResetAnima()),SystemOperate.bShowMount!=this.chk_show[1].bTrue&&(SystemOperate.bShowMount=this.chk_show[1].bTrue,this.ResetAnima()),SystemOperate.bShowWeapon!=this.chk_show[2].bTrue&&(SystemOperate.bShowWeapon=this.chk_show[2].bTrue,this.ResetAnima()),SystemOperate.bShowColor!=this.chk_show[3].bTrue&&(SystemOperate.bShowColor=this.chk_show[3].bTrue,this.ResetAnima()),SystemOperate.bShowFollow!=this.chk_show[4].bTrue&&(SystemOperate.bShowFollow=this.chk_show[4].bTrue,this.ResetAnima()),SystemOperate.bShowName!=this.chk_show[5].bTrue&&(SystemOperate.bShowName=this.chk_show[5].bTrue,this.ResetAnima()),SystemOperate.bShowTitle!=this.chk_show[6].bTrue&&(SystemOperate.bShowTitle=this.chk_show[6].bTrue,this.ResetAnima()),SystemOperate.bShowSell!=this.chk_show[7].bTrue&&(SystemOperate.bShowSell=this.chk_show[7].bTrue,this.ResetAnima()),i-=15,e+=75,i+=15,SystemOperate.iSameRate=0,i-=15,i+=15,e+=15,h.default.gi().DrawTextEx(i,e+10,"画面缓存",4278206039,30,101,1,1,0,0,0),_.default.new_numberframe(i+150,e,70,""+parseInt(this.adj_pb.iPos)),this.adj_pb.Move(i+150+100,e+10,350,30),this.adj_pb.Draw(),e+=50,h.default.gi().DrawTextEx(i,e+10,"画面质量",4278206039,30,101,1,1,0,0,0),t=0;t<3;t++)this.btn_pq[t].bTrue,this.btn_pq[t].Move(i+150+180*t,e,50,50),this.btn_pq[t].Draw();e+=50,h.default.gi().DrawTextEx(i,e+10,"周围玩家数",4278206039,30,101,1,1,0,0,0),_.default.new_numberframe(i+150,e,70,""+parseInt(this.adj_nrc.iPos)),this.adj_nrc.Move(i+150+100,e+10,350,30),this.adj_nrc.Draw(),this.btn_logout.Move(SystemOperate.iX+SystemOperate.iW-150-50,SystemOperate.iY+SystemOperate.iH-60-50,150,60),4!=n.default.QUDAO&&6!=n.default.QUDAO&&this.btn_logout.Draw()}1==this.iPage&&(i+=20,e+=20,this.chk_music.Move(i,e,50,50),this.chk_music.bTrue?SystemOperate.iMusic=1:SystemOperate.iMusic=0,this.chk_music.Draw(),this.chk_sound.Move(i+200,e,50,50),this.chk_sound.bTrue?SystemOperate.iSound=1:SystemOperate.iSound=0,this.chk_sound.Draw()),2==this.iPage&&(i+=20,e+=20,this.chk_wheel.Move(i,e,50,50),this.chk_wheel.bTrue?SystemOperate.iWheel=0:SystemOperate.iWheel=1,this.chk_wheel.Draw(),e+=70,this.chk_exthelp.Move(i,e,50,50),this.chk_exthelp.bTrue?g.default.iExtHelp=1:g.default.iExtHelp=3,this.chk_exthelp.Draw(),e+=70,this.chk_allowteam.Move(i,e,50,50),SystemOperate.bAllowTeam!=this.chk_allowteam.bTrue&&(SystemOperate.bAllowTeam=this.chk_allowteam.bTrue,c.default.gi().s_setflag(2,8,SystemOperate.bAllowTeam?1:0),SystemOperate.bAllowTeam?w.default.me.iFlag[2]=256|w.default.me.iFlag[2]:w.default.me.iFlag[2]=-257&w.default.me.iFlag[2]),this.chk_allowteam.Draw(),e+=70,this.chk_allowgoods.Move(i,e,50,50),SystemOperate.bAllowGoods!=this.chk_allowgoods.bTrue&&(SystemOperate.bAllowGoods=this.chk_allowgoods.bTrue,c.default.gi().s_setflag(2,9,SystemOperate.bAllowGoods?1:0),SystemOperate.bAllowGoods?w.default.me.iFlag[2]=512|w.default.me.iFlag[2]:w.default.me.iFlag[2]=-513&w.default.me.iFlag[2]),this.chk_allowgoods.Draw(),e+=70,this.chk_allowtrade.Move(i,e,50,50),SystemOperate.bAllowTrade!=this.chk_allowtrade.bTrue&&(SystemOperate.bAllowTrade=this.chk_allowtrade.bTrue,c.default.gi().s_setflag(2,10,SystemOperate.bAllowTrade?1:0),SystemOperate.bAllowTrade?w.default.me.iFlag[2]=1024|w.default.me.iFlag[2]:w.default.me.iFlag[2]=-1025&w.default.me.iFlag[2]),this.chk_allowtrade.Draw(),e+=70,this.chk_allowchat.Move(i,e,50,50),SystemOperate.bAllowChat!=this.chk_allowchat.bTrue&&(SystemOperate.bAllowChat=this.chk_allowchat.bTrue,c.default.gi().s_setflag(2,7,SystemOperate.bAllowChat?1:0),SystemOperate.bAllowChat?w.default.me.iFlag[2]=128|w.default.me.iFlag[2]:w.default.me.iFlag[2]=-129&w.default.me.iFlag[2]),this.chk_allowchat.Draw(),e+=70)}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<3;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&(this.iPage=a);if(0==this.iPage){for(a=0;a<8;a++)this.chk_show[a].ProcTouch(t,e,i);if(this.adj_pb.ProcTouch(t,e,i))return SystemOperate.iPictureBuffer=parseInt(this.adj_pb.iPos),!0;for(a=0;a<3;a++)this.btn_pq[a].ProcTouch(t,e,i)&&3==t&&(this.btn_pq[0].bTrue=!1,this.btn_pq[1].bTrue=!1,this.btn_pq[2].bTrue=!1,this.btn_pq[a].bTrue=!0,p.default.easymsg.AddMessage("调整画面质量需重启游戏后才生效"),SystemOperate.iPictureQuality=a,0==SystemOperate.iPictureQuality?SystemOperate.iPictureBuffer=50:1==SystemOperate.iPictureQuality?SystemOperate.iPictureBuffer=25:SystemOperate.iPictureBuffer=0,this.adj_pb.SetPos(0,50,SystemOperate.iPictureBuffer));if(this.adj_nrc.ProcTouch(t,e,i))return SystemOperate.iNearRoleCount=parseInt(this.adj_nrc.iPos),!0;if(4!=n.default.QUDAO&&6!=n.default.QUDAO&&this.btn_logout.ProcTouch(t,e,i)&&this.btn_logout.bCheck())return y.default.gi().iMessageCount=0,D.default.gi().Clean(),s.default.gi().Logout(),!0}return 1==this.iPage&&(this.chk_music.ProcTouch(t,e,i),this.chk_sound.ProcTouch(t,e,i)),2==this.iPage&&(this.chk_wheel.ProcTouch(t,e,i),this.chk_exthelp.ProcTouch(t,e,i),this.chk_allowteam.ProcTouch(t,e,i),this.chk_allowgoods.ProcTouch(t,e,i),this.chk_allowtrade.ProcTouch(t,e,i),this.chk_allowchat.ProcTouch(t,e,i)),!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&m.default.gi().PopStat(1),!0)}}]),SystemOperate}();i.default=x,x.iX=0,x.iY=0,x.iW=0,x.iH=0,x.bShowRole=!0,x.bShowMount=!0,x.bShowWeapon=!0,x.bShowColor=!0,x.bShowFollow=!0,x.bShowName=!0,x.bShowSell=!0,x.bShowTitle=!0,x.bAllowTeam=!0,x.bAllowGoods=!0,x.bAllowTrade=!0,x.bAllowChat=!0,x.iSameRate=0,x.iScreenLS=0,x.iPictureQuality=0,x.iPictureBuffer=50,x.iNearRoleCount=25,x.iMusic=1,x.iSound=1,x.iWheel=1,x.iFPS,x.iRenderType=1,x.BASEW=1280,x.BASEH=720,x.MAXW=1280,x.MAXH=720,x.iWordRate=1e3,x.SetScreenMode=function(t){m.default.gi().bGameing()&&(x.BASEH=x.BASEW*r.default.SYSH/r.default.SYSW,x.MAXH=x.BASEH),r.default.SCRW=x.BASEW,r.default.SCRH=x.BASEH,r.default.REALW=r.default.SYSW,r.default.REALH=r.default.SYSH,r.default.OFFX=(r.default.SYSW-r.default.REALW)/2,r.default.OFFY=(r.default.SYSH-r.default.REALH)/2,x.iX=(r.default.SCRW-x.iW)/2,x.iY=(r.default.SCRH-x.iH)/2},x.WordSize=function(t){return t*x.iWordRate/1e3}},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XAdjust":13,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/control/XCheckBox":17,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/History/XRecordFast":67,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/gameing/Gameing":91,"../../../../engtst/mgm/gameing/chat/privatechat/FriendList":102,"../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame":111,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../zero/Interface/GameVersion":317,"../../../../zero/Interface/PublicInterface":318}],125:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),l=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/FireworksEffect"))),h=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),d=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),c=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),g=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/privatechat/FriendList")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/privatechat/MyFriends")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send"))),_=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/MyAttFrame")),p=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),b=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw")),D=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets")),y=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/Pets")),w=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/PetsFrame"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var S=function(t){function WatchOn(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,WatchOn);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(WatchOn.__proto__||Object.getPrototypeOf(WatchOn)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=530,e.iH=340,e.iX=(s.default.SCRW-e.iW)/2,e.iY=(s.default.SCRH-e.iH)/2,e.goods=new p.default,e.goods.iGid=-1,e.pet=new y.default,e.pet.iPid=-1,e.btn_send=new u.default(h.default.xani_button),e.btn_send.InitButton("1号按钮90_60"),e.btn_send.sName="发送",e.btn_friend=new u.default(h.default.xani_button),e.btn_friend.InitButton("1号按钮90_60"),e.btn_friend.sName="好友",e.bInited=!1,e.iRankCount=0,e.sRankDetail=new Array(10),e.btn_close=new u.default(h.default.xani_button),e.btn_close.InitButton("关闭按钮"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(WatchOn,o.default),a(WatchOn,[{key:"Draw_Pet",value:function(){var t,e,i,a,r;for(this.iW=915,this.iH=610,this.iX=(s.default.SCRW-this.iW)/2,this.iY=(s.default.SCRH-this.iH)/2,m.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),e=this.iX+28,i=this.iY+28,a=406,r=553,m.default.new_framein(e,i,a,r),e=e+a+15,a=440,r=553,m.default.new_framein(e,i,a,r),this.btn_close.Move(this.iX+this.iW-35,this.iY-25,60,60),this.btn_close.Draw(),h.default.xani_nui2.DrawAnima(this.iX+28+203-130,this.iY+50,"宠物背景",0),f.default.DrawAura(0,this.iX+28+203,this.iY+240,null,0),this.pet.aa_body.Draw(this.iX+28+203,this.iY+240),this.pet.aa_body.NextFrame(),w.default.wordframe(this.iX+28+203-100,this.iY+50,200),l.default.gi().DrawText_2(this.iX+28+203,this.iY+50+16,this.pet.sName,4294967295,22,101,1,1,0,-2,-2,3,4278190080),this.pet.CalcPetScore(),l.default.gi().DrawText_2(this.iX+28+203,this.iY+50+16+50,"评分:"+this.pet.iScore,4294967295,26,101,1,1,0,-2,-2,3,4278190080),t=0;t<5;t++)t<this.pet.iStar?h.default.xani_nui2.DrawAnima(this.iX+54,this.iY+60+40*t,"宠物进阶星星",1):h.default.xani_nui2.DrawAnima(this.iX+54,this.iY+60+40*t,"宠物进阶星星",0);h.default.xani_nui2.DrawAnima(this.iX+380,this.iY+128,"宠物类型红印",3&this.pet.iBaobao),l.default.gi().DrawText_2(this.iX+130,this.iY+239,this.pet.iLev+"级",4294967295,20,101,1,1,0,-2,-2,3,4278190080),l.default.gi().DrawText_2(this.iX+350,this.iY+239,"仙露仙桃："+this.pet.iFlag%100,4294967295,20,101,1,1,0,-2,-2,3,4278190080);var o,d,c=this.iX+45,g=this.iY+285;for(t=0;t<12;t++)o=c+t%4*97,d=g+t/4*97,h.default.xani_nui2.DrawAnima(o,d,"技能框",0),t<this.pet.iSkillBlock&&this.pet.jn[t]>0&&h.default.xani_nicon.DrawAnima_aa(o,d,h.default.de_skill.strValue(this.pet.jn[t],0,5),0),t>=this.pet.iSkillBlock&&h.default.xani_nui2.DrawAnima(o,d,"技能框",1);for(t=0;t<12;t++)o=c+t%4*97,d=g+t/4*97,null==WatchOn.btn_skilllist[t]&&(WatchOn.btn_skilllist[t]=new u.default(h.default.xani_nui2),WatchOn.btn_skilllist[t].bSingleButton=!0),WatchOn.btn_skilllist[t].Move(o,d,92,92),WatchOn.btn_skilllist[t].bMouseDown&&this.pet.jn[t]>0&&_.default.Skill_Detail(this.pet.jn[t],o,d,-1);c=this.iX+470+10,g=this.iY+49,h.default.xani_nui2.DrawAnima(c,g,"提示1",0),l.default.gi().DrawText_2(c+33.5,g+16,"气血",4294967295,20,101,1,1,0,-2,-2,3,4278190080),h.default.xani_nui2.DrawAnima(c,g+38,"提示1",0),l.default.gi().DrawText_2(c+33.5,g+38+16,"魔法",4294967295,20,101,1,1,0,-2,-2,3,4278190080),h.default.xani_nui2.DrawAnima(c,g+76,"提示1",0),l.default.gi().DrawText_2(c+33.5,g+76+16,"经验",4294967295,20,101,1,1,0,-2,-2,3,4278190080);var p=67;h.default.xani_nui2.DrawAnima(c+p,g,"宠物大血条",0),h.default.xani_nui2.DrawAnima(c+p,g+36,"宠物大血条",0),h.default.xani_nui2.DrawAnima(c+p,g+72,"宠物大血条",0),l.default.gi().SetViewClip(c,g,c+p+311*this.pet.iHp/this.pet.iMaxHp,g+480),h.default.xani_nui2.DrawAnima(c+p+2,g+3,"宠物大血条",1),l.default.gi().NoClip(),l.default.gi().SetViewClip(c,g,c+p+311*this.pet.iMp/this.pet.iMaxMp,g+480),h.default.xani_nui2.DrawAnima(c+p+2,g+36+3,"宠物大血条",2),l.default.gi().NoClip(),l.default.gi().SetViewClip(c,g,c+p+311*this.pet.iExp/(n.default.iUpgradeExp[this.pet.iLev]/3),g+480),h.default.xani_nui2.DrawAnima(c+p+2,g+72+3,"宠物大血条",3),l.default.gi().NoClip(),l.default.gi().DrawTextEx(c+p+155.5,g+15,this.pet.iHp+"/"+this.pet.iMaxHp,4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(c+p+155.5,g+40+13,this.pet.iMp+"/"+this.pet.iMaxMp,4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(c+p+155.5,g+80+12,this.pet.iExp+"/"+n.default.iUpgradeExp[this.pet.iLev]/3,4294967295,20,101,1,1,0,-2,-2),c=this.iX+470+10,g=this.iY+176,g+=105,m.default.ui3_Text1_(c,g-60-45,67,100,"体质",""+this.pet.tz),m.default.ui3_Text1_(c,g-20-45-2,67,100,"法力",""+this.pet.fl),m.default.ui3_Text1_(c,g+20-45-4,67,100,"力量",""+this.pet.ll),m.default.ui3_Text1_(c,g+60-45-6,67,100,"耐力",""+this.pet.nl),m.default.ui3_Text1_(c,g+100-45-8,67,100,"敏捷",""+this.pet.mj),m.default.ui3_Text1_(c+220,g-60-45,67,100,"灵力",""+this.pet.iSpirit),m.default.ui3_Text1_(c+220,g-20-45-2,67,100,"伤害",""+this.pet.iAttack),m.default.ui3_Text1_(c+220,g+20-45-4,67,100,"防御",""+this.pet.iDefence),m.default.ui3_Text1_(c+220,g+60-45-6,67,100,"速度",""+this.pet.iSpeed),m.default.ui3_Text1_(c+220,g+100-45-8,67,100,"潜能",""+this.pet.nut),c=this.iX+470+10,g=this.iY+378,m.default.ui3_Text1_4word(c,g,110,100,"体质资质",""+this.pet.zz[0]),m.default.ui3_Text1_4word(c,g+40-2,110,100,"法力资质",""+this.pet.zz[1]),m.default.ui3_Text1_4word(c,g+80-4,110,100,"力量资质",""+this.pet.zz[2]),m.default.ui3_Text1_4word(c,g+120-6,110,100,"耐力资质",""+this.pet.zz[3]),m.default.ui3_Text1_4word(c,g+160-8,110,100,"敏捷资质",""+this.pet.zz[4]),m.default.ui3_Text1_(c+220,g,67,100,"成长",""+D.default.swapcz(this.pet.cz)),this.pet.iLife>3e4?m.default.ui3_Text1_(c+220,g+40-2,67,100,"寿命","永生"):m.default.ui3_Text1_(c+220,g+40-2,67,100,"寿命",""+this.pet.iLife)}},{key:"Draw_Role",value:function(){var t;if(this.iW=500,this.iH=335,this.iX=(s.default.SCRW-this.iW)/2,this.iY=(s.default.SCRH-this.iH)/2,m.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),h.default.xani_head.DrawAnima(this.iX+20+350+20,this.iY+20,"新头像"+this.r_head,0),this.btn_send.Move(this.iX+20+350+20-5,this.iY+20+60+20+50,90,60),this.btn_send.Draw(),this.btn_friend.Move(this.iX+20+350+20-5,this.iY+20+60+20+60+20+70,90,60),this.btn_friend.Draw(),t=260,m.default.frame_type4("11号框20_20",this.iX+20,this.iY+20,350,295,20,20),m.default.ui3_Text1(this.iX+30,this.iY+30,70,t,"名字",this.r_name),m.default.ui3_Text1(this.iX+30,this.iY+30+35,70,t,"号码",""+this.r_rid),m.default.ui3_Text1(this.iX+30,this.iY+30+70,70,t,"等级",""+this.r_lev),m.default.ui3_Text1(this.iX+30,this.iY+30+105,70,t,"门派",n.default.sSchools[this.r_school]),this.r_title.length<=0?m.default.ui3_Text1(this.iX+30,this.iY+30+140,70,t,"称谓","无"):m.default.ui3_Text1(this.iX+30,this.iY+30+140,70,t,"称谓",this.r_title),m.default.ui3_Text1(this.iX+30,this.iY+30+175,70,t,"帮派",this.r_gov),0==this.r_relation)m.default.ui3_Text1(this.iX+30,this.iY+30+210,70,t,"关系","陌生人");else{var e="";0==(2&this.r_relation)&&0==(8&this.r_relation)||(e+="徒弟"),0!=(4&this.r_relation)&&(e+="师傅"),e.length<=0&&(e="普通朋友"),m.default.ui3_Text1(this.iX+30,this.iY+30+210,70,t,"关系",e)}m.default.ui3_Text1(this.iX+30,this.iY+30+245,70,t,"友好度",""+this.r_amity)}},{key:"Draw_Goods",value:function(){this.iX=(s.default.SCRW+270)/2,this.iY=s.default.SCRH/2,this.iW=270,this.iH=270,b.default.new_DrawDetail(this.goods,this.iX,this.iY,0),this.iX-=270,this.iY-=135}},{key:"Draw",value:function(){if(this.bInited)switch(this.iType){case 0:case 4:this.Draw_Role();break;case 1:this.Draw_Goods();break;case 2:this.Draw_Pet();break;case 10:case 11:case 12:case 13:this.Draw_Rank()}}},{key:"Draw_Rank",value:function(){var t;for(this.iW=300,this.iH=350,this.iX=(s.default.SCRW-this.iW)/2,this.iY=(s.default.SCRH-this.iH)/2,m.default.Frame2_MD(this.iX,this.iY,this.iW,this.iH),10==this.iType?l.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+30,"~~~实力排行榜~~~",4278190080,30,101,1,1,0,-2,-2):11==this.iType?l.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+30,"~~~财富排行榜~~~",4278190080,30,101,1,1,0,-2,-2):12==this.iType?l.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+30,"~~~帮派排行榜~~~",4278190080,30,101,1,1,0,-2,-2):13==this.iType&&l.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+30,this.sRankTitle,4278190080,30,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.iX+50,this.iY+30+40,"排名",4278190080,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.iX+200,this.iY+30+40,"名称",4278190080,20,101,1,1,0,-2,-2),t=0;t<this.iRankCount;t++)t%2==0&&l.default.gi().FillRect_2D(this.iX+20,this.iY+30+40+30+25*t-13,this.iX+this.iW-20,this.iY+30+40+30+25*t+13,536870912),l.default.gi().DrawTextEx(this.iX+50,this.iY+30+40+30+25*t,""+(t+1),4278190080,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.iX+200,this.iY+30+40+30+25*t,this.sRankDetail[t],4278190080,20,101,1,1,0,-2,-2)}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.btn_close.ProcTouch(t,e,i)&&this.btn_close.bCheck())return c.default.gi().PopStat(1),!0;if(3==t&&!r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))return c.default.gi().PopStat(1),!0;switch(this.iType){case 0:case 4:if(this.btn_send.ProcTouch(t,e,i))return this.btn_send.bCheck()&&(c.default.gi().PopStat(1),g.default.OpenChat(this.r_rid,this.r_name,this.r_head)),!0;if(this.btn_friend.ProcTouch(t,e,i))return this.btn_friend.bCheck()&&(d.default.gi().s_FriendOperate(0,this.r_rid,0),c.default.gi().PopStat(1)),!0;break;case 1:break;case 2:for(a=0;a<12;a++)null!=WatchOn.btn_skilllist[a]&&WatchOn.btn_skilllist[a].ProcTouch(t,e,i)}return!1}},{key:"InitData",value:function(t){var e,i;if(this.iType=t.GetNextByte(),this.iId=t.GetNextInt(),this.iFlag=t.GetNextInt(),0==this.iType||4==this.iType)this.r_name=t.GetNextString(),this.r_rid=t.GetNextInt(),this.r_lev=t.GetNextInt(),this.r_school=t.GetNextByte(),this.r_head=t.GetNextByte(),this.r_gov=t.GetNextString(),this.r_relation=t.GetNextByte(),this.r_amity=t.GetNextInt(),this.r_title=t.GetNextString();else if(1==this.iType){for(this.goods.iGid=t.GetNextInt(),this.goods.iTid=t.GetNextShort(),t.GetNextInt(),t.GetNextByte(),t.GetNextByte(),this.goods.iCount=t.GetNextByte(),e=0;e<8;e++)this.goods.iAtts[e]=t.GetNextInt();h.default.xani_ngoods.InitAnimaWithName(h.default.de_goods.strValue(this.goods.iTid,-1,10),this.goods.aa)}else if(2==this.iType){for(this.pet.iPid=t.GetNextInt(),this.pet.iTid=t.GetNextShort(),this.pet.sName=t.GetNextString()+"("+h.default.de_pet.strValue(this.pet.iTid,0,1)+")",this.pet.iLev=t.GetNextShort(),this.pet.iExp=t.GetNextInt(),this.pet.iHp=t.GetNextShort(),this.pet.iMp=t.GetNextShort(),this.pet.iLife=t.GetNextShort(),i=0;i<5;i++)this.pet.iBaseAtt[i]=t.GetNextShort();for(i=0;i<5;i++)this.pet.zz[i]=t.GetNextShort();for(this.pet.cz=t.GetNextShort(),i=0;i<8;i++)this.pet.jn[i]=t.GetNextShort();this.pet.iAddAtt=t.GetNextByte(),this.pet.iBaobao=t.GetNextByte(),this.pet.iFlag=t.GetNextShort(),this.pet.jn[8]=t.GetNextShort(),this.pet.jn[9]=t.GetNextShort(),this.pet.jn[10]=t.GetNextShort(),this.pet.jn[11]=t.GetNextShort(),0==(2&this.pet.iBaobao)?h.default.xani_pets[this.pet.iTid].InitAnimaWithName("站立_右下",this.pet.aa_body):h.default.xani_pets[this.pet.iTid].InitAnimaWithName("变异_站立_右下",this.pet.aa_body),D.default.CalcFightAtt(this.pet)}else if(10==this.iType)for(this.iRankCount=t.GetNextInt(),i=0;i<this.iRankCount;i++)this.sRankDetail[i]=t.GetNextString();else if(11==this.iType)for(this.iRankCount=t.GetNextInt(),i=0;i<this.iRankCount;i++)this.sRankDetail[i]=t.GetNextString();else if(12==this.iType)for(this.iRankCount=t.GetNextInt(),i=0;i<this.iRankCount;i++)this.sRankDetail[i]=t.GetNextString();else if(13==this.iType)for(this.sRankTitle=t.GetNextString(),this.iRankCount=t.GetNextInt(),i=0;i<this.iRankCount;i++)this.sRankDetail[i]=t.GetNextString();else c.default.gi().PopStat(1);this.bInited=!0}}]),WatchOn}();i.default=S,S.btn_skilllist=new Array(12),S.Init_Pet=function(t){c.default.gi().PushStat(c.default.GS_WATCHON);var e=c.default.gi().LastStat(0);e.pet.copyfrom(t),e.pet.sName=t.sName+"("+h.default.de_pet.strValue(t.iTid,0,1)+")",0==(2&e.pet.iBaobao)?h.default.xani_pets[e.pet.iTid].InitAnimaWithName("站立_右下",e.pet.aa_body):h.default.xani_pets[e.pet.iTid].InitAnimaWithName("变异_站立_右下",e.pet.aa_body),D.default.CalcFightAtt(e.pet),e.iType=2,e.bInited=!0}},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/FireworksEffect":64,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/gameing/chat/privatechat/FriendList":102,"../../../../engtst/mgm/gameing/chat/privatechat/MyFriends":104,"../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../engtst/mgm/gameing/me/pet/Pets":247,"../../../../engtst/mgm/gameing/me/pet/PetsFrame":248}],126:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),u=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),l=(_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(){function AutoFightFrame(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,AutoFightFrame),this.iAutoFightLast=0,this.iW=83,this.iH=83,this.wsize=22}return a(AutoFightFrame,[{key:"Draw",value:function(){this.iAutoFightLast<=0||(null==this.btn_cancel&&(this.btn_cancel=new r.default(u.default.xani_nui4),this.btn_cancel.InitButton("战斗_自动")),this.iX=n.default.SCRW-80,this.iY=n.default.SCRH-80-10,this.btn_cancel.Move(this.iX,this.iY,this.iW,this.iH),this.btn_cancel.Draw(),l.default.me.iFlag[20]>0?(this.iAutoFightLast=AutoFightFrame.AUTOLAST,o.default.gi().DrawText_2(this.btn_cancel.iX+40,this.btn_cancel.iY+80,"无限",4294967295,this.wsize,101,1,1,0,-2,-3,3,4278190080)):o.default.gi().DrawText_2(this.btn_cancel.iX+40,this.btn_cancel.iY+80,""+this.iAutoFightLast,4294967295,this.wsize,101,1,1,0,-2,-3,3,4278190080))}},{key:"ProcTouch",value:function(t,e,i){return!(this.iAutoFightLast<=0)&&(null!=this.btn_cancel&&this.btn_cancel.ProcTouch(t,e,i)?(this.btn_cancel.bCheck()&&(this.iAutoFightLast=0),!0):!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))}}]),AutoFightFrame}();i.default=f,f.AUTOLAST=100,f.aff=new f},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/gameing/me/GmMe":211}],127:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/gov/MyGov")),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),_=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/MyAttFrame")),p=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mounts/MyMounts")),b=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets")),D=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/TeamCreate")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function DiePrompt(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,DiePrompt);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(DiePrompt.__proto__||Object.getPrototypeOf(DiePrompt)).call(this));for(i.btn_ids=new Int32Array(15),i.btn_open=new Array(4),e=0;e<4;e++)i.btn_open[e]=new o.default(l.default.xani_nui4);return i.InitButton(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(DiePrompt,r.default),a(DiePrompt,[{key:"InitButton",value:function(){var t,e=0;if(this.iBtnCount=0,this.btn_ids[e++]=0,this.btn_ids[e++]=1,g.default.me.rbs.iLev<20){if(this.btn_ids[e++]=2,g.default.me.rbs.nut>0&&(this.btn_ids[e++]=3),g.default.me.iFightPid<=0)this.btn_ids[e++]=4;else{var i=b.default.mp.FindPet(g.default.me.iFightPid);null==i?this.btn_ids[e++]=4:i.nut>0&&(this.btn_ids[e++]=4)}this.btn_ids[e++]=5}else g.default.me.rbs.iLev<30?(m.default.mg.iRealGid>0&&(this.btn_ids[e++]=6,this.btn_ids[e++]=7),this.btn_ids[e++]=8,this.btn_ids[e++]=9):(p.default.mm.iMountsCount>0&&(this.btn_ids[e++]=10),m.default.mg.iRealGid>0&&(this.btn_ids[e++]=11,this.btn_ids[e++]=12),this.btn_ids[e++]=13,this.btn_ids[e++]=14);for(e>4&&(e=4),t=0;t<e;t++)this.btn_open[t].InitButton("提示"+DiePrompt._PROMPTS[this.btn_ids[t]][1]),this.btn_open[t].Move(n.default.SCRW/2-85-170-40+170*t,340,80,80),this.btn_open[t].sAnimaName=DiePrompt._PROMPTS[this.btn_ids[t]][1];this.iBtnCount=e}},{key:"Draw",value:function(){var t;if(u.default.gi().FillRect_2D(0,0,n.default.SCRW,n.default.SCRH,2147483648),l.default.xani_nui4.DrawAnima(n.default.SCRW/2,280,"死亡提示框",0),DiePrompt.iLostExp>0||DiePrompt.iLostMoney>0){var e="死亡损失";DiePrompt.iLostExp>0&&(e+=DiePrompt.iLostExp+"经验，"),DiePrompt.iLostMoney>0&&(e+=DiePrompt.iLostMoney+"金钱"),u.default.gi().DrawTextEx(n.default.SCRW/2,300,e,4288207341,20,101,1,1,0,-2,0)}else u.default.gi().DrawTextEx(n.default.SCRW/2,300,DiePrompt.sDetail,4288207341,20,101,1,1,0,-2,0);for(t=0;t<this.iBtnCount;t++)this.btn_open[t].Draw(),u.default.gi().DrawText_2(this.btn_open[t].iX+40,this.btn_open[t].iY+80,this.btn_open[t].sAnimaName,4294967295,26,101,1,1,0,-2,-2,3,4278190080),u.default.gi().DrawTextEx(this.btn_open[t].iX+40,this.btn_open[t].iY+80+22,DiePrompt._PROMPTS[this.btn_ids[t]][2],4288332473,15,101,1,1,0,-2,-2);u.default.gi().DrawTextEx(n.default.SCRW/2,460,"胜败乃江湖常事，少侠请提升实力再战",4294967295,20,101,1,1,0,-2,0),u.default.gi().DrawTextEx(n.default.SCRW/2,538,"点击空白处消失",4288332473,20,101,1,1,0,-2,-2)}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<this.iBtnCount;a++)if(this.btn_open[a].ProcTouch(t,e,i)&&this.btn_open[a].bCheck())switch(this.btn_ids[a]){case 0:f.default.gi().s_PromptActivity(0,0),h.default.gi().PushStat(h.default.GS_LOADING1);break;case 1:D.default.Open();break;case 2:case 8:0==g.default.me.rbs.iSchoolId?c.default.fm.Open("拜师之后才能学习门派技能"):h.default.gi().PushStat(h.default.GS_LEARNSKILL);break;case 3:_.default.Open(0);break;case 4:case 9:case 14:b.default.mp.iPetCount>0?h.default.gi().PushStat(h.default.GS_PETSFRAME):c.default.fm.Open("你还没有宠物");break;case 5:case 13:_.default.Open(3);break;case 6:case 11:f.default.gi().s_GovOperateFrame(0);break;case 7:case 12:f.default.gi().s_GovOperateFrame(1);break;case 10:p.default.mm.iMountsCount>0?h.default.gi().PushStat(h.default.GS_MOUNTSFRAME):d.default.easymsg.AddMessage("你还没有坐骑")}return s.default.bInRect(e,i,300,280,680,220)||h.default.gi().PopStat(1),!1}}]),DiePrompt}();i.default=y,y.bOpen=!1,y.iLostExp,y.iLostMoney,y.sDetail="",y._PROMPTS=[["0","升级","参加活动升级"],["1","组队","组队再战"],["2","技能","人物技能升级"],["3","人物","升级加点"],["4","宝宝","增强宝宝"],["5","VIP","更多福利"],["6","帮派技能","提升帮派技能"],["7","帮派修炼","提升修炼等级"],["8","技能","人物技能升级"],["9","宝宝","学习宝宝技能"],["10","坐骑","加强坐骑"],["11","帮派技能","提升修炼等级"],["12","帮派修炼","提升帮派技能"],["13","VIP","更多福利"],["14","宝宝","炼出更强宝宝"]],y.Open=function(){if(y.bOpen){if(y.bOpen=!1,g.default.me.rbs.iLev<10)return;if(g.default.me.rbs.iLev>=40)return;h.default.gi().PushStat(h.default.GS_DIEPROMPT),c.default.fm.bShow&&(c.default.fm.bShow=!1)}}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../engtst/mgm/gameing/me/mounts/MyMounts":243,"../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../engtst/mgm/gameing/me/pet/Pets":247,"../../../../engtst/mgm/gameing/me/team/TeamCreate":267}],128:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../zero/Interface/GameVersion")),_interopRequireDefault(t("../../../../config/GmConfig"))),s=_interopRequireDefault(t("../../../../config/SortAnima")),r=_interopRequireDefault(t("../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../map/DrawBuffer")),u=_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/FireworksEffect"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),h=(_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString"))),d=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/NearRole")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/fast/SystemOperate"))),c=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(){function FightMember(){var t,e;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FightMember),this.iWeapTid=-1,this.aa_body=new u.default,this.aa_weapon=new u.default,this.iStatus=new Int32Array(FightMember.iMaxStatusCount),this.aa_status=new Array(FightMember.iMaxStatusCount),t=0;t<FightMember.iMaxStatusCount;t++)this.aa_status[t]=null;for(this.ianPoint=0,this.bActed=!0,this.an_list=new Array(this.MAXLIST),this.aa_cls=new Array(6),this.iColor=new Int32Array(6),t=0;t<6;t++){for(this.aa_cls[t]=new Array(5),e=0;e<5;e++)this.aa_cls[t][e]=new u.default;this.iColor[t]=0}this.rotajd=0}return a(FightMember,[{key:"FaceTo",value:function(t){t?this.iPos<20?(this.sFaceTo="_左上",this.sSkillFaceTo="_左"):(this.sFaceTo="_右下",this.sSkillFaceTo="_右"):this.iPos<20?(this.sFaceTo="_右下",this.sSkillFaceTo="_右"):(this.sFaceTo="_左上",this.sSkillFaceTo="_左")}},{key:"Clear",value:function(){var t;for(t=0;t<FightMember.iMaxStatusCount;t++)this.iStatus[t]=0,this.aa_status[t]=null;this.bUseing=!1,this.iMaxHp=1,this.iWeapTid=-1,this.nr=null,this.bMe=!1,this.iActDelay=0,this.iFlying=0,this.ianPoint=0,this.bActed=!1,this.iPopoDelay=0,this.iRace_Sex=-1,this.iShowSNDelay=0}},{key:"ChangeStatus",value:function(t,e){t>=0&&t<FightMember.iMaxStatusCount&&(this.iStatus[t]=e)}},{key:"ActionStatus",value:function(){var t;for(t=0;t<FightMember.iMaxStatusCount;t++)this.iStatus[t]>0&&this.iStatus[t]--}},{key:"AddAnima",value:function(t){this.bUseing&&(1==this.iType&&0!=parseInt(this.iTid/1e4)?this.an_list[this.ianPoint]="变异_"+t:2==this.iType&&2==this.iSpecialType&&0!=parseInt(this.iTid/1e4)?this.an_list[this.ianPoint]="变异_"+t:this.an_list[this.ianPoint]=t,this.ianPoint++)}},{key:"PopAnima",value:function(){if(0!=this.ianPoint){this.ianPoint--;for(var t=0;t<this.ianPoint;t++)this.an_list[t]=this.an_list[t+1]}}},{key:"SetBaseAnima",value:function(t){1==this.iType&&0!=parseInt(this.iTid/1e4)?this.an_base="变异_"+t:2==this.iType&&2==this.iSpecialType&&0!=parseInt(this.iTid/1e4)?this.an_base="变异_"+t:this.an_base=t,this.bBaseWaiting&&this.ChangeAnima(this.an_base)}},{key:"ChangeAnima",value:function(t){if(0==this.iType||2==this.iType&&1==this.iSpecialType)return r.default.sop(""+this.iRace_Sex),f.default.xani_newrole[this.iRace_Sex].InitAnimaWithName(t+this.sFaceTo,this.aa_body),this.ChangeColor(this.iRace_Sex,t+this.sFaceTo,0),void(this.iWeapTid>0&&f.default.xani_weap[this.iRace_Sex][s.default.WeapFlag(this.iWeapTid)].InitAnimaWithName(t+this.sFaceTo,this.aa_weapon));this.xani.InitAnimaWithName(t+this.sFaceTo,this.aa_body)}},{key:"NextAnima",value:function(){this.ianPoint>0?(this.ChangeAnima(this.an_list[0]),this.PopAnima(),this.bBaseWaiting=!1):(this.ChangeAnima(this.an_base),this.bBaseWaiting=!0)}},{key:"NextFrame",value:function(){this.bBaseWaiting&&this.ianPoint>0?this.NextAnima():this.aa_body.NextFrame()?this.NextAnima():this.iWeapTid>0&&(this.aa_weapon.iFrame=this.aa_body.iFrame)}},{key:"InitSN",value:function(t){this.sShowSNDetail=f.default.de_skill.strValue(t,0,6),"-1"!=this.sShowSNDetail&&(this.iShowSNDelay=100)}},{key:"ShowSN",value:function(){this.iShowSNDelay}},{key:"FightPopo",value:function(t,e,i){if(!(this.iPopoDelay<=0)){this.iPopoDelay--,h.default.gi().Format(this.sPopoString,151,25),t-=h.default.gi().iW/2;var a=e+i+40-h.default.gi().iH;o.default.gi().FillRect(e,t,a,t+h.default.gi().iW,a+h.default.gi().iH,1342177280),h.default.gi().DrawToBuffer(e+1,t,a)}}},{key:"ChangeColor",value:function(t,e,i){var a;if(d.default.bShowColor)for(a=0;a<s.default._CHANGECOLOR[t].length;a++)this.iColor[a]<=0||this.iColor[a]>=6||(f.default.xani_color[t][this.iColor[a]-1].InitAnimaWithName(s.default._CHANGECOLOR[t][a]+"_"+e,this.aa_cls[i][a]),f.default.sop(s.default._CHANGECOLOR[t][a]+"_"+e))}},{key:"DrawColor",value:function(t,e,i,a,n,r){var u;if(d.default.bShowColor)for(u=0;u<s.default._CHANGECOLOR[t].length;u++)this.iColor[u]<=0||this.iColor[u]>=6||(this.aa_cls[r][u].iFrame=e,o.default.gi().DrawAnimaEx(i,a,n,this.aa_cls[r][u],this.iStatus[38]>0?50:101,1,1,0,0,0))}},{key:"frame_type1",value:function(t,e,i,a,n){f.default.xani_frame.InitAnimaWithName(t,f.default.aaa),a<2*n?(f.default.aaa.iFrame=0,o.default.gi().DrawAnimaEx(this.iY+5,e,i,f.default.aaa,101,1*a/2/n,1,0,0,0),f.default.aaa.iFrame=2,o.default.gi().DrawAnimaEx(this.iY+5,e+a/2,i,f.default.aaa,101,1*a/2/n,1,0,0,0)):(f.default.aaa.iFrame=1,o.default.gi().DrawAnimaEx(this.iY+5,e+n/2,i,f.default.aaa,101,1*(a-n)/n,1,0,0,0),f.default.aaa.iFrame=0,o.default.gi().DrawAnimaEx(this.iY+5,e,i,f.default.aaa,101,1,1,0,0,0),f.default.aaa.iFrame=2,o.default.gi().DrawAnimaEx(this.iY+5,e+a-n,i,f.default.aaa,101,1,1,0,0,0))}},{key:"Draw",value:function(){var t,e,i,a,s,u;if(5!=this.iPos&&25!=this.iPos){i=72*this.iHp/this.iMaxHp,115,(this.iPos<20||this.iStatus[16]>0)&&(f.default.xani_frame.InitAnimaWithName("血条外框76_13",f.default.aaa),o.default.gi().DrawAnima_aa(this.iY+4,null,this.iX-38,this.iY-115-10,f.default.aaa),this.frame_type1("血条10_9",this.iX-38+2,this.iY-115-10+2,i,10),this.bActed||o.default.gi().DrawAnima_aa(this.iY+5,null,this.iX,this.iY-115-15,f.default.aa_fightready)),this.iShowSNDelay>0&&(this.iShowSNDelay-=5,f.default.xani_skills[0].InitAnimaWithName("技能名称背景",f.default.aaa),t=this.iShowSNDelay>75?30-(this.iShowSNDelay-75):30,e=this.iShowSNDelay<25?4*this.iShowSNDelay:101,o.default.gi().DrawAnimaEx(this.iY+5,this.iX-60,this.iY-115-20,f.default.aaa,e,1*t/30,1*t/30,0,0,0),e=this.iShowSNDelay<25?10*this.iShowSNDelay:255,o.default.gi().DrawText(this.iY+6,0,this.iX-60,this.iY-115-20-t,this.sShowSNDetail,e<<24|16777215,t));l.default.DrawAura(0,this.iX,this.iY,o.default.gi(),this.iY-2),this.bActed?(o.default.gi().DrawText_2(this.iY+1,1,this.iX,this.iY+20,this.sName,4286644096,20,1,4278190080),o.default.gi().DrawText(this.iY+n.default.SCRH,1,this.iX,this.iY+20,this.sName,1619066752,20)):(o.default.gi().DrawText_2(this.iY+1,1,this.iX,this.iY+20,this.sName,4294934528,20,1,4278190080),o.default.gi().DrawText(this.iY+n.default.SCRH,1,this.iX,this.iY+20,this.sName,1627369600,20)),this.iFlying>10&&(this.iFlying%2==0?(this.FaceTo(!0),this.SetBaseAnima("被攻击")):(this.FaceTo(!1),this.SetBaseAnima("被攻击"))),t=0,i=0,this.iStatus[18]>0&&(t=r.default.GetRand(-2,2),i=r.default.GetRand(-2,2)),o.default.gi().DrawAnimaEx(this.iY,this.iX+t,this.iY+i,this.aa_body,this.iStatus[38]>0?50:101,1,1,0,0,0),(0==this.iType||2==this.iType&&1==this.iSpecialType)&&(this.DrawColor(this.iRace_Sex,this.aa_body.iFrame,this.iY+1,this.iX+t,this.iY+i,0),this.iWeapTid>0&&o.default.gi().DrawAnima_aa(this.iY+2,this.xani,this.iX+t,this.iY+i,this.aa_weapon)),this.bActed?this.NextFrame():this.iActDelay%2==0&&this.NextFrame(),this.iActDelay++,this.bMe?c.default.me.DrawPopo(this.iX,this.iY+10):null!=this.nr&&(this.nr.sName==this.sName?this.nr.DrawPopo(this.iX,this.iY+10):this.nr=null),this.FightPopo(this.iX,this.iY+10,this.xani.iAnimaY(this.aa_body)-30)}for(this.rotajd+=.1,t=0;t<FightMember.iMaxStatusCount;t++)if(this.iStatus[t]>0)switch(t){case 0:case 1:case 2:case 3:case 4:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_ui.InitAnimaWithName("祝福标记"+this.sSkillFaceTo,null)),this.aa_status[t].iFrame=t,this.iPos<20?o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX+30,this.iY-90,this.aa_status[t]):o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX-30,this.iY-90,this.aa_status[t]);break;case 5:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[4].InitAnimaWithName("狂暴_持续",null)),o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 6:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[4].InitAnimaWithName("定心诀_持续",null)),o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 7:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[4].InitAnimaWithName("魔甲术"+this.sSkillFaceTo,null)),"_左"==this.sSkillFaceTo?o.default.gi().DrawAnima(this.iY-3,this.xani,this.iX,this.iY,this.aa_status[t]):o.default.gi().DrawAnima_aa(this.iY+3,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 8:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[4].InitAnimaWithName("壁垒_持续",null)),o.default.gi().DrawAnimaEx(this.iY+1,this.iX,this.iY,this.aa_status[t],101,2,2,0,-1,-1),this.aa_status[t].NextFrame();break;case 10:case 11:case 12:case 13:case 14:case 15:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_ui.InitAnimaWithName("诅咒标记"+this.sSkillFaceTo,null)),this.aa_status[t].iFrame=t-10,this.iPos<20?o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX+30,this.iY-90,this.aa_status[t]):o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX-30,this.iY-90,this.aa_status[t]);break;case 20:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[2].InitAnimaWithName("陷阱_持续",null)),o.default.gi().DrawAnimaEx(this.iY-2,this.iX,this.iY,this.aa_status[t],101,2,2,0,0,0),this.aa_status[t].NextFrame();break;case 21:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[5].InitAnimaWithName("火牢_持续",null)),o.default.gi().DrawAnimaEx(this.iY-2,this.iX,this.iY,this.aa_status[t],101,1,1,0,0,0),this.aa_status[t].NextFrame();break;case 22:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[6].InitAnimaWithName("飞箝术_持续",null)),o.default.gi().DrawAnima_aa(this.iY-1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 23:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[8].InitAnimaWithName("仙绫缚_持续",null)),o.default.gi().DrawAnima_aa(this.iY-1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 24:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skill.InitAnimaWithName("眩晕"+this.sSkillFaceTo,null)),o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 25:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[11].InitAnimaWithName("流沙_持续",null)),o.default.gi().DrawAnimaEx(this.iY+1,this.iX,this.iY,this.aa_status[t],101,2,2,0,0,0),this.aa_status[t].NextFrame();break;case 27:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[11].InitAnimaWithName("巫毒_持续",null)),o.default.gi().DrawAnimaEx(this.iY+1,this.iX,this.iY,this.aa_status[t],101,2,2,0,0,0),this.aa_status[t].NextFrame();break;case 28:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[12].InitAnimaWithName("心如止水"+this.sSkillFaceTo,null)),o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 29:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[12].InitAnimaWithName("幽冥鬼眼"+this.sSkillFaceTo,null)),o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 30:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[5].InitAnimaWithName("火甲术"+this.sSkillFaceTo,null)),"_左"==this.sSkillFaceTo?o.default.gi().DrawAnimaEx(this.iY-3,this.iX,this.iY,this.aa_status[t],101,1,1,0,0,0):o.default.gi().DrawAnimaEx(this.iY+3,this.iX,this.iY,this.aa_status[t],101,1,1,0,0,0),this.aa_status[t].NextFrame();break;case 31:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[5].InitAnimaWithName("火灵诀_持续",null)),o.default.gi().DrawAnimaEx(this.iY+2,this.iX,this.iY,this.aa_status[t],101,1,1,0,0,0),this.aa_status[t].NextFrame();break;case 32:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[6].InitAnimaWithName("凝神诀"+this.sSkillFaceTo,null)),o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 34:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[9].InitAnimaWithName("五行甲"+this.sSkillFaceTo,null)),o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 35:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[8].InitAnimaWithName("定天弓"+this.sSkillFaceTo,null)),"_左"==this.sSkillFaceTo?o.default.gi().DrawAnima(this.iY-2,this.xani,this.iX,this.iY,this.aa_status[t]):o.default.gi().DrawAnima_aa(this.iY+2,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 36:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[8].InitAnimaWithName("灵动九天_持续"+this.sSkillFaceTo,null)),"_左"==this.sSkillFaceTo?o.default.gi().DrawAnima(this.iY+3,this.xani,this.iX,this.iY,this.aa_status[t]):o.default.gi().DrawAnima_aa(this.iY-3,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 37:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[1].InitAnimaWithName("凝神聚气_持续",null)),s=60*Math.cos(this.rotajd),u=30*Math.sin(this.rotajd),o.default.gi().DrawAnima_aa(this.iY+u,this.xani,this.iX+s,this.iY+u,this.aa_status[t]),s=60*Math.cos(this.rotajd+2*r.default.PI/3),u=30*Math.sin(this.rotajd+2*r.default.PI/3),o.default.gi().DrawAnima_aa(this.iY+u,this.xani,this.iX+s,this.iY+u,this.aa_status[t]),s=60*Math.cos(this.rotajd+4*r.default.PI/3),u=30*Math.sin(this.rotajd+4*r.default.PI/3),o.default.gi().DrawAnima_aa(this.iY+u,this.xani,this.iX+s,this.iY+u,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 39:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[12].InitAnimaWithName("天魔甲"+this.sSkillFaceTo,null)),o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 40:for(null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[2].InitAnimaWithName("迷雾_左",null)),e=a=5==this.iPos?0:2;e<a+2;e++)for(i=0;i<5;i++)o.default.gi().DrawAnimaEx(n.default.SCRH,XFight.gi().fat[e][i].iOx,XFight.gi().fat[e][i].iOy-100,this.aa_status[t],101,3,3,0,0,0);this.aa_status[t].NextFrame();break;case 41:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[2].InitAnimaWithName("兵诡_左",null)),a=5==this.iPos?0:2,e=(XFight.gi().fat[a][0].iOx+XFight.gi().fat[a][1].iOx+XFight.gi().fat[a+1][0].iOx+XFight.gi().fat[a+1][1].iOx)/4,i=(XFight.gi().fat[a][0].iOy+XFight.gi().fat[a][1].iOy+XFight.gi().fat[a+1][0].iOy+XFight.gi().fat[a+1][1].iOy)/4,o.default.gi().DrawAnimaEx(i,e,i,this.aa_status[t],101,2,2,0,0,0),e=(XFight.gi().fat[a][0].iOx+XFight.gi().fat[a][2].iOx+XFight.gi().fat[a+1][0].iOx+XFight.gi().fat[a+1][2].iOx)/4,i=(XFight.gi().fat[a][0].iOy+XFight.gi().fat[a][2].iOy+XFight.gi().fat[a+1][0].iOy+XFight.gi().fat[a+1][2].iOy)/4,o.default.gi().DrawAnimaEx(i,e,i,this.aa_status[t],101,2,2,0,0,0),this.aa_status[t].NextFrame();break;case 42:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[9].InitAnimaWithName("天阵"+this.sSkillFaceTo,null)),o.default.gi().DrawAnimaEx(1,this.iX,this.iY,this.aa_status[t],101,2,2,0,0,0),this.aa_status[t].NextFrame();break;case 43:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[9].InitAnimaWithName("地阵"+this.sSkillFaceTo,null)),o.default.gi().DrawAnimaEx(1,this.iX,this.iY,this.aa_status[t],101,2,2,0,0,0),this.aa_status[t].NextFrame();break;case 44:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[12].InitAnimaWithName("神灵护佑"+this.sSkillFaceTo,null)),o.default.gi().DrawAnimaEx(0,this.iX,this.iY,this.aa_status[t],101,2,2,0,0,0),this.aa_status[t].NextFrame();break;case 18:break;case 19:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[2].InitAnimaWithName("奇谋_持续",null)),o.default.gi().DrawAnimaEx(this.iY+1,this.iX,this.iY,this.aa_status[t],101,2,2,0,0,0),this.aa_status[t].NextFrame();break;case 17:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[11].InitAnimaWithName("撕裂"+this.sSkillFaceTo,null)),o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 33:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[7].InitAnimaWithName("灵智术"+this.sSkillFaceTo,null)),o.default.gi().DrawAnima_aa(this.iY+1,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 50:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[7].InitAnimaWithName("仙甲术"+this.sSkillFaceTo,null)),"_左"==this.sSkillFaceTo?o.default.gi().DrawAnima(this.iY-3,this.xani,this.iX,this.iY,this.aa_status[t]):o.default.gi().DrawAnima_aa(this.iY+3,this.xani,this.iX,this.iY,this.aa_status[t]),this.aa_status[t].NextFrame();break;case 100:case 101:case 102:case 103:case 104:null==this.aa_status[t]&&(this.aa_status[t]=f.default.xani_skills[0].InitAnimaWithName("五行灵体"+(t-100),null)),o.default.gi().DrawAnimaEx(this.iY+1,this.iX,this.iY,this.aa_status[t],101,2,2,0,0,0),this.aa_status[t].NextFrame()}}}]),FightMember}();i.default=m,m.iMaxStatusCount=200},{"../../../../config/GmConfig":5,"../../../../config/SortAnima":6,"../../../../config/XDefine":7,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/FireworksEffect":64,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/NearRole":93,"../../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../map/DrawBuffer":283,"../../../../zero/Interface/GameVersion":317}],129:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function NumberEffectOle(){_classCallCheck(this,NumberEffectOle)}return a(NumberEffectOle,[{key:"NumberEffectOle",value:function(){bUseing=!1}}]),NumberEffectOle}(),r=function(){function NumberEffect(){var t;for(_classCallCheck(this,NumberEffect),this.MAXNUMBEREFFECT=20,this.neo=new Array(this.MAXNUMBEREFFECT),t=0;t<this.MAXNUMBEREFFECT;t++)this.neo[t]=new s;this.nlist=new Int8Array(8)}return a(NumberEffect,[{key:"AddEffect",value:function(t,e,i){var a;if(0!=i)for(a=0;a<this.MAXNUMBEREFFECT;a++)if(!this.neo[a].bUseing)return i>0?(this.neo[a].iNumber=i,this.neo[a].iType=0):(this.neo[a].iNumber=-i,this.neo[a].iType=1),this.neo[a].iX=t,this.neo[a].iY=e,this.neo[a].iProc=0,void(this.neo[a].bUseing=!0)}},{key:"DrawNeo11",value:function(t){var e,i;null==this.aa_add&&(this.aa_add=n.default.xani_ui.InitAnimaWithName("加血数字",null),this.aa_sub=n.default.xani_ui.InitAnimaWithName("减血数字",null));var a=0;for(e=t.iNumber;e>0;)this.nlist[a++]=e%10,e/=10;0==a&&(this.nlist[0]=0,a=1);var s;for(i=t.iProc,e=a-1;e>=0;e--)s=i>=0&&i<3?5*-i:i>=3&&i<6?5*-(6-i):0,i-=2,0==t.iType?(this.aa_add.iFrame=this.nlist[e],this.aa_add.Draw(t.iX+12*(a-1)/2-12*e,t.iY+s)):(this.aa_sub.iFrame=this.nlist[e],this.aa_sub.Draw(t.iX+12*(a-1)/2-12*e,t.iY+s));t.iProc++,t.iProc>=6*a+5&&(t.bUseing=!1)}},{key:"DrawNeo",value:function(t){var e,i;null==this.aa_add&&(this.aa_add=n.default.xani_ui4.InitAnimaWithName("加血数字",null),this.aa_sub=n.default.xani_ui4.InitAnimaWithName("掉血数字",null));var a=0;for(e=t.iNumber;e>0;)this.nlist[a++]=e%10,e=parseInt(e/10);0==a&&(this.nlist[0]=0,a=1);var s;for(i=t.iProc,e=a-1;e>=0;e--)s=i>=0&&i<3?10*-i:i>=3&&i<6?10*-(6-i):0,i-=2,0==t.iType?(this.aa_add.iFrame=this.nlist[e],this.aa_add.Draw(t.iX+20*(a-1)/2-20*e,t.iY+s)):(this.aa_sub.iFrame=this.nlist[e],this.aa_sub.Draw(t.iX+20*(a-1)/2-20*e,t.iY+s));t.iProc++,t.iProc>=6*a+6&&(t.bUseing=!1)}},{key:"Draw",value:function(){var t;for(t=0;t<this.MAXNUMBEREFFECT;t++)this.neo[t].bUseing&&this.DrawNeo(this.neo[t])}},{key:"Draw_TimeNumber",value:function(t,e,i){i<10?n.default.xani_nui4.DrawAnimaEx(t,e,"倒计时数字",i,101,1,1,0,0,0):i<100&&(n.default.xani_nui4.DrawAnimaEx(t-25,e,"倒计时数字",i/10,101,1,1,0,0,0),n.default.xani_nui4.DrawAnimaEx(t+25,e,"倒计时数字",i%10,101,1,1,0,0,0))}},{key:"Draw_RoundNumber",value:function(t,e,i){i<10?n.default.xani_nui4.DrawAnimaEx(t,e,"回合数字",i,101,1,1,0,0,0):i<100?(n.default.xani_nui4.DrawAnimaEx(t-15,e,"回合数字",i/10,101,1,1,0,0,0),n.default.xani_nui4.DrawAnimaEx(t+15,e,"回合数字",i%10,101,1,1,0,0,0)):i<1e3&&(n.default.xani_nui4.DrawAnimaEx(t-30,e,"回合数字",i/100,101,1,1,0,0,0),n.default.xani_nui4.DrawAnimaEx(t,e,"回合数字",i/10%10,101,1,1,0,0,0),n.default.xani_nui4.DrawAnimaEx(t+30,e,"回合数字",i%10,101,1,1,0,0,0))}}]),NumberEffect}();i.default=r,r.ne=new r},{"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65}],130:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../config/GameData")),_interopRequireDefault(t("../../../../config/GmConfig"))),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../map/DrawBuffer")),o=(_interopRequireDefault(t("../../../../map/MapManager")),_interopRequireDefault(t("../../../../map/VisualBlock")),_interopRequireDefault(t("../../../../engine/PackageTools"))),u=_interopRequireDefault(t("../../../../engine/TouchManager")),l=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),f=_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),h=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),d=(_interopRequireDefault(t("../../../../engine/graphics/M3DMath")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engine/graphics/_POINT")),_interopRequireDefault(t("../../../../engine/graphics/_VERTEX")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),c=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),g=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),_=_interopRequireDefault(t("../../../../engtst/mgm/gameing/Gameing")),p=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/privatechat/FriendList")),b=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame")),D=_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/JQMode")),y=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),w=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets"))),S=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("./FightMember"))),x=_interopRequireDefault(t("./XFightRoleSkill")),P=_interopRequireDefault(t("./XFightSpecialSkill")),v=_interopRequireDefault(t("./XFightEffect")),R=_interopRequireDefault(t("./NumberEffect")),M=_interopRequireDefault(t("./AutoFightFrame")),C=_interopRequireDefault(t("./DiePrompt")),k=_interopRequireDefault(t("./XFightGoods")),T=_interopRequireDefault(t("./XFightCallPet")),A=_interopRequireDefault(t("./XFightPetSkill"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var G=function FightData(){_classCallCheck(this,FightData),this.aa=new f.default,this.sValue="",this.iValues=new Int32Array(5)},E=function _UPDATEBUFFER(){_classCallCheck(this,_UPDATEBUFFER),this.bUseing=!1,this.sBuffer=new Uint8Array(64)},X=function(){function XFight(){var t,e;for(_classCallCheck(this,XFight),this.MAXFIGHTDATA=1024,this.FIGHTACTION_NORMAL=0,this.FIGHTACTION_DEFENCE=1,this.FIGHTACTION_ESCAPE=2,this.FIGHTACTION_CATCH=3,this.FIGHTACTION_CALLBB=4,this.FIGHTACTION_CALLBACKBB=5,this.FIGHTACTION_MAGIC=6,this.FIGHTACTION_USEGOODS=7,this.FIGHTACTION_PROTECT=8,this.FIGHTACTION_SPECIAL=9,this.iCmd=new Int32Array(10),this.iLastRoleCmd=new Int32Array(10),this.iLastPetCmd=new Int32Array(10),this.iShiQi=[0,0],this.iZhen=[0,0],this.iUsedPetsId=new Int32Array(8),this.fat=new Array(4),t=0;t<4;t++)for(this.fat[t]=new Array(y.default.MAXTEAMOLE),e=0;e<y.default.MAXTEAMOLE;e++)this.fat[t][e]=new S.default;for(this.aa_select1=d.default.xani_nui4.InitAnimaWithName("选择敌人",null),this.aa_select2=d.default.xani_nui4.InitAnimaWithName("选择队友",null),this.fat_base=new Array(2),this.fat_base[0]=new S.default,this.fat_base[1]=new S.default,this.fat_base[0].iPos=5,this.fat_base[0].sFaceTo="_左",this.fat_base[1].iPos=25,this.fat_base[1].sFaceTo="_右",this.btn_operate=new Array(10),t=0;t<9;t++)this.btn_operate[t]=new l.default(d.default.xani_nui4),this.btn_operate[t].Move(n.default.SCRW-170-40+t%2*85,n.default.SCRH/3+t/2*80,80,80);for(this.btn_operate[0].InitButton("战斗_法术"),this.btn_operate[0].sAnimaName="法术",this.btn_operate[1].InitButton("战斗_道具"),this.btn_operate[1].sAnimaName="道具",this.btn_operate[2].InitButton("战斗_保护"),this.btn_operate[2].sAnimaName="保护",this.btn_operate[3].InitButton("战斗_防御"),this.btn_operate[3].sAnimaName="防御",this.btn_operate[7].InitButton("战斗_逃跑"),this.btn_operate[7].sAnimaName="逃跑",this.btn_operate[4].InitButton("战斗_召唤"),this.btn_operate[4].sAnimaName="召唤",this.btn_operate[8].InitButton("战斗_捕捉"),this.btn_operate[8].sAnimaName="捕捉",this.btn_operate[5].InitButton("战斗_召还"),this.btn_operate[5].sAnimaName="召还",this.btn_operate[6].InitButton("战斗_自动"),this.btn_operate[6].sAnimaName="自动",this.btn_operate[9]=new l.default(d.default.xani_nui4),this.btn_operate[9].InitButton("战斗_特技"),this.btn_operate[9].sAnimaName="特技",this.btn_petoperate=new Array(7),t=0;t<7;t++)this.btn_petoperate[t]=new l.default(d.default.xani_nui4),this.btn_petoperate[t].Move(n.default.SCRW/2+t%2*85,n.default.SCRH/3+t/2*80,80,80);for(this.btn_petoperate[0].InitButton("战斗_法术"),this.btn_petoperate[0].sAnimaName="法术",this.btn_petoperate[1].InitButton("战斗_道具"),this.btn_petoperate[1].sAnimaName="道具",this.btn_petoperate[2].InitButton("战斗_保护"),this.btn_petoperate[2].sAnimaName="保护",this.btn_petoperate[3].InitButton("战斗_防御"),this.btn_petoperate[3].sAnimaName="防御",this.btn_petoperate[4].InitButton("战斗_逃跑"),this.btn_petoperate[4].sAnimaName="逃跑",this.btn_petoperate[5].InitButton("战斗_自动"),this.btn_petoperate[5].sAnimaName="自动",this.btn_cancel=new l.default(d.default.xani_nui4),this.btn_cancel.InitButton("战斗_自动"),this.btn_cancel.sAnimaName="取消",this.btnmov(),this.fds=new Array(this.MAXFIGHTDATA),t=0;t<this.MAXFIGHTDATA;t++)this.fds[t]=new G;for(t=0;t<2;t++)for(e=0;e<5;e++)XFight.basepos[t][e][0]*=80,XFight.basepos[t][e][1]*=80;for(t=0;t<12;t++)for(e=0;e<5;e++)XFight.zhenpos[t][e][0]*=80,XFight.zhenpos[t][e][1]*=25;for(this.iLastRoleCmd[0]=this.FIGHTACTION_NORMAL,this.iLastRoleCmd[1]=0,this.iLastRoleCmd[2]=-1,this.iLastPetCmd[0]=this.FIGHTACTION_NORMAL,this.iLastPetCmd[1]=0,this.iLastPetCmd[2]=-1,this.btn_leavewatch=new l.default(d.default.xani_nui4),this.btn_leavewatch.InitButton("战斗_自动"),this.btn_leavewatch.sAnimaName="离开",this.ub=new Array(10),t=0;t<10;t++)this.ub[t]=new E;this.bShowHpDetail=!1,this.wsize=22,this.jdjd=0}return a(XFight,[{key:"btnmov",value:function(){var t=10;this.btn_operate[0].Move(n.default.SCRW-80-425,n.default.SCRH-80-t,80,80),this.btn_operate[1].Move(n.default.SCRW-80-340,n.default.SCRH-80-t,80,80),this.btn_operate[2].Move(n.default.SCRW-80-255,n.default.SCRH-80-t,80,80),this.btn_operate[3].Move(n.default.SCRW-80-170,n.default.SCRH-80-t,80,80),this.btn_operate[7].Move(n.default.SCRW-80-85,n.default.SCRH-80-t,80,80),this.btn_operate[6].Move(n.default.SCRW-80,n.default.SCRH-80-t,80,80),this.btn_operate[5].Move(n.default.SCRW-80,n.default.SCRH-80-85-t,80,80),this.btn_operate[4].Move(n.default.SCRW-80,n.default.SCRH-80-170-t,80,80),this.btn_operate[8].Move(n.default.SCRW-80,n.default.SCRH-80-255-t,80,80),this.btn_operate[9].Move(n.default.SCRW-80-80,n.default.SCRH-80-80-t,80,80),this.btn_petoperate[0].Move(n.default.SCRW-80-425,n.default.SCRH-80-t,80,80),this.btn_petoperate[1].Move(n.default.SCRW-80-340,n.default.SCRH-80-t,80,80),this.btn_petoperate[2].Move(n.default.SCRW-80-255,n.default.SCRH-80-t,80,80),this.btn_petoperate[3].Move(n.default.SCRW-80-170,n.default.SCRH-80-t,80,80),this.btn_petoperate[4].Move(n.default.SCRW-80-85,n.default.SCRH-80-t,80,80),this.btn_petoperate[5].Move(n.default.SCRW-80,n.default.SCRH-80-t,80,80),this.btn_cancel.Move(n.default.SCRW-80,n.default.SCRH-80-t,80,80)}}]),a(XFight,[{key:"InitPos",value:function(){var t,e,i,a,r,o,u,l,f,h;if(this.myfat=null,this.bSwap)for(t=0;t<2;t++)for(e=0;e<y.default.MAXTEAMOLE;e++)l=this.fat[t][e],this.fat[t][e]=this.fat[t+2][e],this.fat[t+2][e]=l;for(630,360,170,200,this.fat_base[0].iX=630*n.default.SCRW/800,this.fat_base[0].iY=360*n.default.SCRH/480,this.fat_base[1].iX=170*n.default.SCRW/800,this.fat_base[1].iY=200*n.default.SCRH/480,this.fat_base[0].FaceTo(!0),this.fat_base[1].FaceTo(!0),t=0;t<4;t++)for(e=0;e<y.default.MAXTEAMOLE;e++)f=XFight.basepos[t%2][e][0]+XFight.zhenpos[t%2+2*this.iZhen[parseInt(t/2)]][e][0],h=XFight.basepos[t%2][e][1]+XFight.zhenpos[t%2+2*this.iZhen[parseInt(t/2)]][e][1],i=s.default.GetAngleXY_ext(f,h,0,0),a=s.default.llength(f,h,0,0),t<2?(i+=125*s.default.PI/180,r=630,o=360):(i-=55*s.default.PI/180,r=170,o=200),this.fat[t][e].iOx=r+Math.cos(i)*a*1.2,this.fat[t][e].iOy=o+Math.sin(i)*a*.7,this.fat[t][e].iOx=this.fat[t][e].iOx*n.default.SCRW/800,this.fat[t][e].iOy=this.fat[t][e].iOy*n.default.SCRH/480,this.fat[t][e].iX=this.fat[t][e].iOx,this.fat[t][e].iY=this.fat[t][e].iOy,this.fat[t][e].iPos=10*t+e,t<2?(this.fat[t][e].FaceTo(!0),this.fat[t][e].iMoveOffX=100*Math.cos(20*s.default.PI/180),this.fat[t][e].iMoveOffY=100*Math.sin(20*s.default.PI/180)):(this.fat[t][e].FaceTo(!0),this.fat[t][e].iMoveOffX=-100*Math.cos(20*s.default.PI/180),this.fat[t][e].iMoveOffY=-100*Math.sin(20*s.default.PI/180)),this.fat[t][e].bUseing&&(u=this.fat[t][e],this.fat[t][e].SetBaseAnima("战斗站立"),this.fat[t][e].iHp<=0&&this.fat[t][e].SetBaseAnima("死亡"),u.NextAnima(),u.iPos==this.iMyPos&&(u.bMe=!0,this.myfat=u))}},{key:"SwapPos",value:function(t){return this.bSwap?t<20?t+20:t-20:t}},{key:"SwapZhen",value:function(){if(this.bSwap){var t=this.iZhen[0];this.iZhen[0]=this.iZhen[1],this.iZhen[1]=t}}},{key:"SwapShiQi",value:function(){if(this.bSwap){var t=this.iShiQi[0];this.iShiQi[0]=this.iShiQi[1],this.iShiQi[1]=t}}},{key:"setpetused",value:function(t){var e=t.GetNextInt();y.default.me.iFightPid=e;for(var i=0;i<8;i++)if(this.iUsedPetsId[i]<=0){this.iUsedPetsId[i]=e;break}}},{key:"updatefat",value:function(t){var e;for(e=0;e<10;e++)if(!this.ub[e].bUseing){s.default.arraycopy(t.databuf,3,this.ub[e].sBuffer,0,t.iLength-3),this.ub[e].iLen=t.iLength-3,this.ub[e].iPos=t.GetNextByte(),this.ub[e].iPos=this.SwapPos(this.ub[e].iPos),this.ub[e].bUseing=!0;break}d.default.sop1("len="+t.iLength+",,offset="+t.iOffset)}},{key:"DoUpdate",value:function(t){var e;for(e=0;e<10;e++)if(this.ub[e].bUseing&&this.ub[e].iPos==t){var i=new o.default(256);return i.SetDataAndOffset(this.ub[e].sBuffer,0,this.ub[e].iLen),this._updatefat(i),void(this.ub[e].bUseing=!1)}}},{key:"_updatefat",value:function(t){var e,i,a,n=t.GetNextByte();n=this.SwapPos(n);var s=this.fat[parseInt(n/10)][n%10];if(s.Clear(),w.default.mp.CalcAll(),n==this.iMyPos+10){var r=w.default.mp.GetUseingPet();null!=r&&r.iHp<=0&&(r.iHp=r.iMaxHp,r.iMp=r.iMaxMp)}s.bUseing=!0,s.sName=t.GetNextString(),s.iMaxHp=t.GetNextInt(),s.iHp=t.GetNextInt(),s.iMaxMp=t.GetNextInt(),s.iMp=t.GetNextInt(),s.iType=t.GetNextByte(),e=t.GetNextByte(),i=t.GetNextInt(),a=t.GetNextInt(),s.iColor[0]=7&a,s.iColor[1]=a>>3&7,s.iColor[2]=a>>6&7,s.iColor[3]=a>>9&7,s.iColor[4]=a>>12&7,0==s.iType?(s.iRace_Sex=e,s.iWeapTid=i,s.nr=_.default.gameing.findnrsbyname(s.sName),s.xani=d.default.xani_newrole[s.iRace_Sex],s.iSex=s.iRace_Sex%2):1==s.iType?(s.iTid=i,s.xani=d.default.xani_pets[s.iTid%1e4]):2==s.iType&&(s.iSpecialType=e,1==e?(s.iWeapTid=i%1e4,s.iRace_Sex=parseInt(i/1e4),s.xani=d.default.xani_newrole[s.iRace_Sex],s.iSex=s.iRace_Sex%2):(s.iTid=i,s.xani=d.default.xani_pets[s.iTid%1e4])),s.iX=s.iOx,s.iY=s.iOy,s.FaceTo(!0),s.SetBaseAnima("战斗站立"),s.NextAnima()}},{key:"InitFight",value:function(t){var e,i,a,n,s;for(this.btnmov(),t.bCompress=!0,e=0;e<4;e++)for(i=0;i<y.default.MAXTEAMOLE;i++)this.fat[e][i].Clear();for(e=0;e<10;e++)this.ub[e].bUseing=!1;for(e=0;e<2;e++)this.fat_base[e].Clear();for(this.iFightType=t.GetNextByte();100!=(n=t.GetNextByte());)(s=this.fat[parseInt(n/10)][n%10]).bUseing=!0,s.sName=t.GetNextString(),s.iMaxHp=t.GetNextInt(),s.iHp=t.GetNextInt(),s.iMaxMp=t.GetNextInt(),s.iMp=t.GetNextInt(),s.iType=t.GetNextByte(),e=t.GetNextByte(),i=t.GetNextInt(),a=t.GetNextInt(),s.iColor[0]=7&a,s.iColor[1]=a>>3&7,s.iColor[2]=a>>6&7,s.iColor[3]=a>>9&7,s.iColor[4]=a>>12&7,0==s.iType?(s.iRace_Sex=e,s.iWeapTid=i,s.nr=_.default.gameing.findnrsbyname(s.sName),s.xani=d.default.xani_newrole[s.iRace_Sex],s.iSex=s.iRace_Sex%2):1==s.iType?(s.iTid=i,s.xani=d.default.xani_pets[i%1e4]):2==s.iType&&(s.iSpecialType=e,1==e?(s.iWeapTid=i%1e4,s.iRace_Sex=parseInt(i/1e4),s.xani=d.default.xani_newrole[s.iRace_Sex],s.iSex=s.iRace_Sex%2):(s.iTid=i,s.xani=d.default.xani_pets[i%1e4]));if(this.iMyPos=t.GetNextByte(),this.bSwap=!1,this.iMyPos>=100)100==this.iMyPos?this.iMyTeam=0:(this.iMyTeam=1,this.bSwap=!0);else{for(this.iMyPos<20?this.iMyTeam=0:(this.iMyTeam=1,this.bSwap=!0,this.iMyPos-=20),e=0;e<8;e++)this.iUsedPetsId[e]=t.GetNextInt();x.default.xfs.InitFightSkill(),P.default.xss.InitSpecialSkill()}this.iShiQi[0]=t.GetNextShort(),this.iShiQi[1]=t.GetNextShort(),this.iRound=t.GetNextShort(),this.iZhen[0]=t.GetNextByte(),this.iZhen[1]=t.GetNextByte(),this.SwapShiQi(),this.SwapZhen(),XFight.bFighting=!0,this.iAlphaEffect=0,this.iFightStat=0,this.InitPos(),this.bFightFinished=!1,this.iWaited=0,t.bCompress=!1}},{key:"DrawHpDetail",value:function(){if(this.iMyPos>=100)y.default.me.DrawHpDetail();else{var t=this.getfm(this.iMyPos),e=n.default.SCRW-88-60-150;h.default.gi().FillRect_2D(e,0,e+150,60,2147483648),h.default.gi().DrawTextEx(e,0,"气血:"+t.iHp+"/"+t.iMaxHp,4294967295,20,101,1,1,0,0,0),h.default.gi().DrawTextEx(e,20,"魔法:"+t.iMp+"/"+t.iMaxMp,4294967295,20,101,1,1,0,0,0),h.default.gi().DrawTextEx(e,40,"愤怒:"+y.default.me.rbs.iAnger+"/150",4294967295,20,101,1,1,0,0,0)}}},{key:"DrawHead",value:function(){if(this.iMyPos>=100)y.default.me.DrawHead();else{var t=this.getfm(this.iMyPos),e=this.getfm(this.iMyPos+10),i=w.default.mp.GetUseingPet();null==i?y.default.me.DrawHeadEx(t.iHp,y.default.me.rbs.iMaxHp,t.iMp,y.default.me.rbs.iMaxMp,y.default.me.rbs.iAnger,y.default.me.rbs.iLev,-1,0,0,0,0,0,0):y.default.me.DrawHeadEx(t.iHp,y.default.me.rbs.iMaxHp,t.iMp,y.default.me.rbs.iMaxMp,y.default.me.rbs.iAnger,y.default.me.rbs.iLev,i.iTid,e.iHp,i.iMaxHp,e.iMp,i.iMaxMp,i.iLev,i.iExp)}this.bShowHpDetail&&this.DrawHpDetail()}},{key:"Draw_UI1",value:function(){h.default.gi().FillRect_2D(0,0,this.iAlphaEffect,n.default.SCRH,2684356120),this.DrawHead(),this.iAlphaEffect>=n.default.SCRW&&d.default.xani_nui2.DrawAnimaEx(n.default.SCRW/2-365,(n.default.SCRH-327)/2+80,"背景图案",1,101,2,1,0,0,0)}},{key:"Draw",value:function(){var t,e,i=!1;for((t=this.iAlphaEffect)<n.default.SCRW&&(h.default.gi().SetViewClip(0,0,t<=0?1:t,n.default.SCRH),i=!0),r.default.gi().ClearBuffer(),t=0;t<4;t++)for(e=0;e<y.default.MAXTEAMOLE;e++)this.fat[t][e].bUseing&&(this.iFightStat>100&&(this.fat[t][e].bActed=!0),this.fat[t][e].Draw(),4!=this.iFightStat&&14!=this.iFightStat||t>=2&&r.default.gi().DrawAnima_aa(this.fat[t][e].iY+1,null,this.fat[t][e].iX,this.fat[t][e].iY-40,this.aa_select1),5!=this.iFightStat&&15!=this.iFightStat||t<2&&r.default.gi().DrawAnima_aa(this.fat[t][e].iY+1,null,this.fat[t][e].iX,this.fat[t][e].iY-40,this.aa_select2));this.aa_select1.NextFrame(),this.aa_select2.NextFrame(),this.fat_base[0].Draw(),this.fat_base[1].Draw(),v.default.fe.DrawGround(),r.default.gi().SortAndDraw(),R.default.ne.Draw(),i&&h.default.gi().NoClip()}},{key:"Draw_UI2",value:function(){var t;switch(this.iAlphaEffect<n.default.SCRW&&h.default.gi().SetViewClip(0,0,this.iAlphaEffect<=0?1:this.iAlphaEffect,n.default.SCRH),this.btnmov(),p.default.gi().Draw(),this.iMyPos>=100&&(this.iFightStat<100&&(this.iFightStat=100),this.btn_leavewatch.Move(n.default.SCRW-83,n.default.SCRH-83,83,83),this.btn_leavewatch.Draw(),h.default.gi().DrawText_2(this.btn_leavewatch.iX+40,this.btn_leavewatch.iY+80,this.btn_leavewatch.sAnimaName,4294967295,this.wsize,101,1,1,0,-2,-3,3,4278190080)),this.iFightStat<=100&&this.bFightFinished&&(this.iFightStat=300,this.iTimeOut=0),this.iFightStat){case 0:if(D.default.jq.bJQLock()){this.iCmd[0]=this.FIGHTACTION_DEFENCE,this.iCmd[1]=0,this.iCmd[2]=0,this.FinishRoleOperate(),this.iCmd[0]=this.FIGHTACTION_DEFENCE,this.iCmd[1]=0,this.iCmd[2]=0,this.FinishPetOperate();break}if(M.default.aff.iAutoFightLast>0){(this.iWaited/20>=3||this.iRound>1||this.iFightType!=XFight.FIGHTWITH_DARK)&&(this.iCmd[0]=this.iLastRoleCmd[0],this.iCmd[1]=this.iLastRoleCmd[1],this.iCmd[2]=this.iLastRoleCmd[2],this.FinishRoleOperate(),this.iCmd[0]=this.iLastPetCmd[0],this.iCmd[1]=this.iLastPetCmd[1],this.iCmd[2]=this.iLastPetCmd[2],this.FinishPetOperate(),M.default.aff.iAutoFightLast--);break}for(t=0;t<8;t++)this.btn_operate[t].Draw(),h.default.gi().DrawText_2(this.btn_operate[t].iX+40,this.btn_operate[t].iY+80,this.btn_operate[t].sAnimaName,4294833640,this.wsize,101,1,1,0,-2,-3,3,4279894016);(this.iFightType==XFight.FIGHTWITH_DARK||this.iFightType==XFight.FIGHTWITH_NPC&&this.fat[2][0].bUseing&&"野猪"==this.fat[2][0].sName)&&(this.btn_operate[8].Draw(),t=8,h.default.gi().DrawText_2(this.btn_operate[t].iX+40,this.btn_operate[t].iY+80,this.btn_operate[t].sAnimaName,4294833640,this.wsize,101,1,1,0,-2,-3,3,4279894016)),P.default.xss.iSkillCount>0&&(this.btn_operate[9].Draw(),t=9,h.default.gi().DrawText_2(this.btn_operate[t].iX+40,this.btn_operate[t].iY+80,this.btn_operate[t].sAnimaName,4294833640,this.wsize,101,1,1,0,-2,-3,3,4279894016)),m.default.end(m.default.CONFIRM_ESCAPE)&&m.default.bConfirm&&(this.iCmd[0]=this.FIGHTACTION_ESCAPE,this.iCmd[1]=0,this.iCmd[2]=0,this.FinishRoleOperate());break;case 6:P.default.xss.DrawSpecialSkill();break;case 1:x.default.xfs.DrawFightSkill();break;case 2:case 12:k.default.xfg.DrawFightGoods();break;case 3:T.default.xfcp.DrawCallPet();break;case 10:for(t=0;t<6;t++)this.btn_petoperate[t].Draw(),h.default.gi().DrawText_2(this.btn_petoperate[t].iX+40,this.btn_petoperate[t].iY+80,this.btn_petoperate[t].sAnimaName,4294833640,this.wsize,101,1,1,0,-2,-3,3,4279894016);M.default.aff.iAutoFightLast>0&&(this.iCmd[0]=this.iLastPetCmd[0],this.iCmd[1]=this.iLastPetCmd[1],this.iCmd[2]=this.iLastPetCmd[2],this.FinishPetOperate(),M.default.aff.iAutoFightLast--),m.default.end(m.default.CONFIRM_ESCAPE)&&m.default.bConfirm&&(this.iCmd[0]=this.FIGHTACTION_ESCAPE,this.iCmd[1]=0,this.iCmd[2]=0,this.FinishPetOperate());break;case 11:A.default.xfps.Draw();break;case 4:case 5:case 14:case 15:this.btn_cancel.Draw(),h.default.gi().DrawText_2(this.btn_cancel.iX+40,this.btn_cancel.iY+80,this.btn_cancel.sAnimaName,4294967295,this.wsize,101,1,1,0,-2,-3,3,4278190080);break;case 100:break;case 200:this.ProcFightData();break;case 300:this.iTimeOut++,this.iTimeOut>15&&(this.iAlphaEffect-=n.default.SCRW/4),this.iTimeOut>23&&(XFight.bFighting=!1,this.ClearPopo(),C.default.Open())}XFight.bFighting&&(t=20,this.iFightStat<100?(this.iWaited<30*t?this.iWaited++:this.iFightStat=100,R.default.ne.Draw_TimeNumber(n.default.SCRW/2,150,30-this.iWaited/t)):100==this.iFightStat&&d.default.xani_nui4.DrawAnima(n.default.SCRW/2,150,"倒计时等待",0)),d.default.xani_nui4.DrawAnima(n.default.SCRW/2,0,"战斗顶部UI",0),d.default.xani_nui4.DrawAnimaEx(n.default.SCRW/2-49+(120*(1-this.iShiQi[1]/120)-3),1,"战斗顶部UI",1,101,1*this.iShiQi[1]/120,1,0,0,0),d.default.xani_nui4.DrawAnimaEx(n.default.SCRW/2+49,1,"战斗顶部UI",2,101,1*this.iShiQi[0]/120,1,0,0,0),h.default.gi().DrawTextEx(n.default.SCRW/2+82,45,""+this.iShiQi[0],4278223103,28,101,1,1,0,-2,-3),h.default.gi().DrawTextEx(n.default.SCRW/2-82,45,""+this.iShiQi[1],4294901760,28,101,1,1,0,-2,-3),R.default.ne.Draw_RoundNumber(n.default.SCRW/2,45,this.iRound),this.iAlphaEffect<n.default.SCRW&&(h.default.gi().NoClip(),this.iAlphaEffect+=n.default.SCRW/8)}},{key:"ClearPopo",value:function(){_.default.gameing.ClearPopo()}},{key:"bHavePet",value:function(t){return d.default.sop("pos="+t),this.fat[parseInt(t/10)+1][t%10].bUseing}},{key:"SelectOur",value:function(t,e){var i,a;for(i=0;i<2;i++)for(a=0;a<y.default.MAXTEAMOLE;a++)if(this.fat[i][a].bUseing&&s.default.bInRect(t,e,this.fat[i][a].iX-30,this.fat[i][a].iY-40-30,60,60))return 10*i+a;for(i=0;i<2;i++)for(a=0;a<y.default.MAXTEAMOLE;a++)if(this.fat[i][a].bUseing&&this.fat[i][a].xani.bInAnima(this.fat[i][a].aa_body,this.fat[i][a].iOx,this.fat[i][a].iOy,t,e))return 10*i+a;return-1}},{key:"SelectEnemy",value:function(t,e){var i,a;for(i=2;i<4;i++)for(a=0;a<y.default.MAXTEAMOLE;a++)if(this.fat[i][a].bUseing&&s.default.bInRect(t,e,this.fat[i][a].iX-30,this.fat[i][a].iY-40-30,60,60))return 10*i+a;for(i=2;i<4;i++)for(a=0;a<y.default.MAXTEAMOLE;a++)if(this.fat[i][a].bUseing&&this.fat[i][a].xani.bInAnima(this.fat[i][a].aa_body,this.fat[i][a].iOx,this.fat[i][a].iOy,t,e))return 10*i+a;return-1}},{key:"ProcTouch",value:function(t,e,i){if(this.bShowHpDetail=!1,this.iAlphaEffect<n.default.SCRW)return u.default.gi().clear(),!0;if(this.iMyPos>=100)return this.btn_leavewatch.ProcTouch(t,e,i)&&this.btn_leavewatch.bCheck()&&(this.btn_leavewatch.SetNormal(),c.default.gi().s_WatchFight(1,0),this.iFightStat=300,this.iTimeOut=0),!0;var a;switch(this.iFightStat){case 0:if(M.default.aff.iAutoFightLast>0)break;for(a=0;a<10;a++)if((9!=a||P.default.xss.iSkillCount>0)&&(8!=a||this.iFightType==XFight.FIGHTWITH_DARK||this.iFightType==XFight.FIGHTWITH_NPC&&"野猪"==this.fat[2][0].sName)&&this.btn_operate[a].ProcTouch(t,e,i)&&this.btn_operate[a].bCheck())switch(this.btn_operate[a].SetNormal(),a){case 0:this.iCmd[0]=this.FIGHTACTION_MAGIC,this.iFightStat=1,x.default.xfs.iShowPoint=-1;break;case 1:this.iCmd[0]=this.FIGHTACTION_USEGOODS,this.iFightStat=2,k.default.xfg.InitFightGoods();break;case 2:this.iCmd[0]=this.FIGHTACTION_PROTECT,this.iFightStat=5;break;case 3:this.iCmd[0]=this.FIGHTACTION_DEFENCE,this.iCmd[1]=0,this.iCmd[2]=0,this.FinishRoleOperate();break;case 4:T.default.xfcp.InitCallPet()<=0?g.default.easymsg.AddMessage("当前没有宠物可召唤"):(this.iCmd[0]=this.FIGHTACTION_CALLBB,this.iCmd[1]=0,this.iFightStat=3);break;case 5:this.iCmd[0]=this.FIGHTACTION_CALLBACKBB,this.FinishRoleOperate();break;case 6:this.iWaited+=60,M.default.aff.iAutoFightLast=M.default.AUTOLAST;break;case 7:m.default.start(m.default.CONFIRM_ESCAPE,"是否确定逃跑？");break;case 8:this.iCmd[0]=this.FIGHTACTION_CATCH,this.iCmd[1]=0,this.iFightStat=4;break;case 9:this.iCmd[0]=this.FIGHTACTION_SPECIAL,this.iFightStat=6,P.default.xss.iShowPoint=-1}this.iEnemyPoint=this.SelectEnemy(e,i),3==t&&-1!=this.iEnemyPoint&&(this.iCmd[0]=this.FIGHTACTION_NORMAL,this.iCmd[1]=0,this.iCmd[2]=this.iEnemyPoint,this.FinishRoleOperate());break;case 6:P.default.xss.ProcTouch(t,e,i)&&(-1==P.default.xss.iUseSkillId?this.iFightStat=0:(this.iCmd[1]=P.default.xss.iUseSkillId,P.default.xss.iSelectTarget<=0?(this.iCmd[2]=0,this.FinishRoleOperate()):1==P.default.xss.iSelectTarget?this.iFightStat=5:this.iFightStat=4));break;case 1:x.default.xfs.ProcTouch(t,e,i)&&(-1==x.default.xfs.iUseSkillId?this.iFightStat=0:(this.iCmd[1]=x.default.xfs.iUseSkillId,x.default.xfs.iSelectTarget<=0?(this.iCmd[2]=0,this.FinishRoleOperate()):1==x.default.xfs.iSelectTarget?this.iFightStat=5:this.iFightStat=4));break;case 2:k.default.xfg.ProcTouch(t,e,i),k.default.xfg.bReturn?this.iFightStat=0:k.default.xfg.bSelectFinished&&(this.lastusegoods1=k.default.xfg.lockgoods,this.iCmd[1]=k.default.xfg.lockgoods.iGid,k.default.xfg.bUseToDest?this.iFightStat=4:k.default.xfg.bFood?(this.iCmd[2]=0,this.FinishRoleOperate()):this.iFightStat=5);break;case 3:T.default.xfcp.ProcTouch(t,e,i)&&(-1==T.default.xfcp.iCallPetId?this.iFightStat=0:(this.iCmd[1]=T.default.xfcp.iCallPetId,this.iCmd[2]=T.default.xfcp.iCallPetId,this.FinishRoleOperate()));break;case 4:if(this.btn_cancel.ProcTouch(t,e,i)){this.btn_cancel.bCheck()&&(this.iFightStat=0,this.btn_cancel.SetNormal());break}this.iEnemyPoint=this.SelectEnemy(e,i),3==t&&-1!=this.iEnemyPoint&&(this.iCmd[2]=this.iEnemyPoint,this.FinishRoleOperate());break;case 5:if(this.btn_cancel.ProcTouch(t,e,i)){this.btn_cancel.bCheck()&&(this.btn_cancel.SetNormal(),this.iFightStat=0);break}this.iOurPoint=this.SelectOur(e,i),3==t&&-1!=this.iOurPoint&&(this.iCmd[2]=this.iOurPoint,this.FinishRoleOperate());break;case 10:for(a=0;a<6;a++)if(this.btn_petoperate[a].ProcTouch(t,e,i)&&this.btn_petoperate[a].bCheck())switch(this.btn_petoperate[a].SetNormal(),a){case 0:A.default.xfps.InitPetSkill(w.default.mp.GetUseingPet())<=0?g.default.easymsg.AddMessage("当前宠物没有主动技能"):(this.iCmd[0]=this.FIGHTACTION_MAGIC,this.iFightStat=11);break;case 1:this.iCmd[0]=this.FIGHTACTION_USEGOODS,this.iFightStat=12,k.default.xfg.InitFightGoods();break;case 2:this.iCmd[0]=this.FIGHTACTION_PROTECT,this.iFightStat=15;break;case 3:this.iCmd[0]=this.FIGHTACTION_DEFENCE,this.iCmd[1]=0,this.iCmd[2]=0,this.FinishPetOperate();break;case 4:m.default.start(m.default.CONFIRM_ESCAPE,"宠物是否确定逃跑？");break;case 5:M.default.aff.iAutoFightLast=M.default.AUTOLAST}this.iEnemyPoint=this.SelectEnemy(e,i),3==t&&-1!=this.iEnemyPoint&&(this.iCmd[0]=this.FIGHTACTION_NORMAL,this.iCmd[1]=0,this.iCmd[2]=this.iEnemyPoint,this.FinishPetOperate());break;case 11:A.default.xfps.ProcTouch(t,e,i)&&(A.default.xfps.bReturn&&(this.iFightStat=10),A.default.xfps.bUsed&&(this.iCmd[1]=A.default.xfps.iUseSkillId,this.iFightStat=14));break;case 12:k.default.xfg.ProcTouch(t,e,i),k.default.xfg.bReturn?this.iFightStat=10:k.default.xfg.bSelectFinished&&(this.lastusegoods2=k.default.xfg.lockgoods,this.iCmd[1]=k.default.xfg.lockgoods.iGid,this.iFightStat=15);break;case 14:if(this.btn_cancel.ProcTouch(t,e,i)){this.btn_cancel.bCheck()&&(this.btn_cancel.SetNormal(),this.iFightStat=10);break}this.iEnemyPoint=this.SelectEnemy(e,i),3==t&&-1!=this.iEnemyPoint&&(this.iCmd[2]=this.iEnemyPoint,this.FinishPetOperate());break;case 15:if(this.btn_cancel.ProcTouch(t,e,i)){this.btn_cancel.bCheck()&&(this.btn_cancel.SetNormal(),this.iFightStat=10);break}this.iOurPoint=this.SelectOur(e,i),3==t&&-1!=this.iOurPoint&&(this.iCmd[2]=this.iOurPoint,this.FinishPetOperate())}return(0==this.iFightStat||this.iFightStat>=100)&&1==t&&-1==(a=this.SelectOur(e,i))&&(a=this.SelectEnemy(e,i)),!(2!=t&&1!=t||!s.default.bInRect(e,i,n.default.SCRW-191,0,108,80))&&(this.bShowHpDetail=!0,!0)}},{key:"FinishPetOperate",value:function(){this.iCmd[0]==this.FIGHTACTION_USEGOODS&&-1==this.lastusegoods2.iGid&&(this.iCmd[0]=this.FIGHTACTION_NORMAL,this.iCmd[1]=0,this.iCmd[2]=-1),this.iLastPetCmd[0]=this.iCmd[0],this.iLastPetCmd[1]=this.iCmd[1],this.iLastPetCmd[2]=this.iCmd[2],this.iCmd[2]=this.SwapPos(this.iCmd[2]),c.default.gi().s_FightOperate(1,this.iCmd),this.iFightStat=100}},{key:"FinishRoleOperate",value:function(){this.iCmd[0]==this.FIGHTACTION_USEGOODS&&-1==this.lastusegoods1.iGid&&(this.iCmd[0]=this.FIGHTACTION_NORMAL,this.iCmd[1]=0,this.iCmd[2]=-1),this.iLastRoleCmd[0]=this.iCmd[0],this.iLastRoleCmd[1]=this.iCmd[1],this.iLastRoleCmd[2]=this.iCmd[2],this.iCmd[2]=this.SwapPos(this.iCmd[2]),c.default.gi().s_FightOperate(0,this.iCmd),this.bHavePet(this.iMyPos)?this.iFightStat=10:this.iFightStat=100}},{key:"getfm",value:function(t){return t%10==5?parseInt(t/10)<2?this.fat_base[0]:this.fat_base[1]:this.fat[parseInt(t/10)][t%10]}},{key:"ProcFightData",value:function(){for(var t,e,i,a,n=!1;this.fds[this.iFDPoint].iTimeStamp<=this.iTimeStamp&&this.iFDPoint<this.iFDCount;){switch((i=this.fds[this.iFDPoint]).iActType){case 0:i.bActing=!0,i.iValues[1]=0,this.getfm(i.iAPos).iDx=this.getfm(i.iValues[0]).iOx+this.getfm(i.iAPos).iMoveOffX,this.getfm(i.iAPos).iDy=this.getfm(i.iValues[0]).iOy+this.getfm(i.iAPos).iMoveOffY;break;case 18:i.bActing=!0,i.iValues[1]=0,this.getfm(i.iAPos).iDx=this.getfm(i.iValues[0]).iOx-this.getfm(i.iAPos).iMoveOffX/2,this.getfm(i.iAPos).iDy=this.getfm(i.iValues[0]).iOy-this.getfm(i.iAPos).iMoveOffY/2;break;case 1:(a=this.getfm(i.iAPos)).AddAnima("普通攻击"),0==a.iType||2==a.iType&&1==a.iSpecialType?0==a.iSex?d.default.x_wav.StartWav("role0_attack",!1):d.default.x_wav.StartWav("role1_attack",!1):(1==a.iType||2==a.iType&&1!=a.iSpecialType)&&d.default.x_wav.StartWav_Pet(a.iTid%1e4,0);break;case 2:(a=this.getfm(i.iAPos)).AddAnima("被攻击"),0==a.iType||2==a.iType&&1==a.iSpecialType?0==a.iSex?d.default.x_wav.StartWav("role0_hurt",!1):d.default.x_wav.StartWav("role1_hurt",!1):(1==a.iType||2==a.iType&&1!=a.iSpecialType)&&d.default.x_wav.StartWav_Pet(a.iTid%1e4,2);break;case 3:(a=this.getfm(i.iAPos)).AddAnima("防御"),d.default.x_wav.StartWav("defence",!1),v.default.fe.AddEffect2(a.iX,a.iY,10,"防御",!(i.iAPos/10<2));break;case 4:i.bActing=!0,i.iValues[1]=0;break;case 5:if(this.iDelay++,this.iDelay<i.iAPos){n=!0;break}this.iDelay=0;break;case 6:this.iTimeStamp=0;break;case 7:a=this.getfm(i.iAPos),0==i.iValues[0]?(a.AddAnima("死亡过程"),a.SetBaseAnima("死亡"),0==a.iType||2==a.iType&&1==a.iSpecialType?0==a.iSex?d.default.x_wav.StartWav("role0_die",!1):d.default.x_wav.StartWav("role1_die",!1):(1==a.iType||2==a.iType&&1!=a.iSpecialType)&&d.default.x_wav.StartWav_Pet(a.iTid%1e4,3)):a.SetBaseAnima("战斗站立");break;case 8:case 25:this.getfm(i.iAPos).iDx=this.getfm(i.iAPos).iOx+6*this.getfm(i.iAPos).iMoveOffX,this.getfm(i.iAPos).iDy=this.getfm(i.iAPos).iOy+6*this.getfm(i.iAPos).iMoveOffY,this.getfm(i.iAPos).SetBaseAnima("逃跑"),i.iValues[1]=0,i.bActing=!0,d.default.x_wav.StartWav("escape",!1);break;case 21:a=this.getfm(i.iAPos),i.iAPos==i.iValues[0]?(this.getfm(i.iAPos).iDx=this.getfm(i.iValues[0]).iOx,this.getfm(i.iAPos).iDy=this.getfm(i.iValues[0]).iOy):(this.getfm(i.iAPos).iDx=this.getfm(i.iValues[0]).iOx+this.getfm(i.iAPos).iMoveOffX,this.getfm(i.iAPos).iDy=this.getfm(i.iValues[0]).iOy+this.getfm(i.iAPos).iMoveOffY),a.iPos<20&&a.iDx>a.iX&&a.FaceTo(!1),a.iPos>=20&&a.iDx<a.iX&&a.FaceTo(!1),this.getfm(i.iAPos).iTx=this.getfm(i.iAPos).iX,this.getfm(i.iAPos).iTy=this.getfm(i.iAPos).iY,this.getfm(i.iAPos).SetBaseAnima("跑步"),i.iValues[3]=0,i.bActing=!0;break;case 19:i.iValues[1]=0,i.bActing=!0,this.getfm(i.iAPos).iFlying=1;break;case 17:i.iValues[1]=0,i.bActing=!0;break;case 9:this.getfm(i.iAPos).ChangeStatus(i.iValues[0],i.iValues[1]);break;case 24:this.getfm(i.iAPos).bMe&&(y.default.me.rbs.iAnger=i.iValues[0]);break;case 12:R.default.ne.AddEffect(this.getfm(i.iAPos).iX,this.getfm(i.iAPos).iY-80,i.iValues[0]-this.getfm(i.iAPos).iHp),this.getfm(i.iAPos).iHp=i.iValues[0],this.getfm(i.iAPos).iMp=i.iValues[1],this.getfm(i.iAPos).iHp<0&&(this.getfm(i.iAPos).iHp=0),this.getfm(i.iAPos).iMp<0&&(this.getfm(i.iAPos).iMp=0);break;case 13:this.getfm(i.iAPos).bUseing=!1;break;case 14:(a=this.getfm(i.iAPos)).AddAnima("施法"),0==a.iType||2==a.iType&&1==a.iSpecialType?0==a.iSex?d.default.x_wav.StartWav("role0_magic",!1):d.default.x_wav.StartWav("role1_magic",!1):(1==a.iType||2==a.iType&&1!=a.iSpecialType)&&d.default.x_wav.StartWav_Pet(a.iTid%1e4,1);break;case 26:a=this.getfm(i.iValues[0]),d.default.sop("目标:"+i.iValues[0]),v.default.fe.AddDarts(this.getfm(i.iAPos).iX,this.getfm(i.iAPos).iY,a.iX,a.iY,i.iValues[1],i.iValues[2]);break;case 27:(a=this.getfm(i.iAPos)).InitSN(i.iValues[0]);break;case 15:a=this.getfm(i.iValues[0]),v.default.fe.AddEffect(a.iX,a.iY,i.iValues[1],!(i.iAPos/10<2));break;case 23:a=this.getfm(i.iValues[0]),v.default.fe.AddEffect2(a.iX,a.iY,i.iValues[1],i.sValue,!(i.iAPos/10<2));break;case 16:this.iShiQi[0]=i.iValues[0],this.iShiQi[1]=i.iValues[1],this.SwapShiQi();break;case 20:(a=this.getfm(i.iAPos)).iPopoDelay=200,a.sPopoString=i.sValue,b.default.gi().AddMessage(0,0,a.sName,6,0,i.sValue,null);break;case 22:this.DoUpdate(i.iAPos);break;case 100:for(t=0;t<this.iFDPoint&&(!(i=this.fds[t]).bActing||19!=i.iActType);t++);if(t<this.iFDPoint){n=!0;break}for(this.iFightStat=0,this.iRound++,t=0;t<4;t++)for(e=0;e<y.default.MAXTEAMOLE;e++)this.fat[t][e].ActionStatus();this.fat_base[0].ActionStatus(),this.fat_base[1].ActionStatus(),this.bFightFinished&&(this.iFightStat=300,this.iTimeOut=0)}if(n)break;this.iFDPoint++}for(this.iTimeStamp++,t=0;t<this.iFDPoint;t++)if((i=this.fds[t]).bActing)switch(i.iActType){case 0:case 18:i.iValues[1]++,(a=this.getfm(i.iAPos)).iX=a.iOx+(a.iDx-a.iOx)*i.iValues[1]/3,a.iY=a.iOy+(a.iDy-a.iOy)*i.iValues[1]/3,i.iValues[1]>=3&&(i.bActing=!1);break;case 4:e=3-i.iValues[1],(a=this.getfm(i.iAPos)).iX=a.iOx+(a.iX-a.iOx)/e,a.iY=a.iOy+(a.iY-a.iOy)/e,i.iValues[1]++,i.iValues[1]>=3&&(a.iX=a.iOx,a.iY=a.iOy,i.bActing=!1);break;case 8:case 25:if(i.iValues[1]++,i.iValues[1]<10)break;if(e=i.iValues[1]-10,a=this.getfm(i.iAPos),8==i.iActType&&(a.iX=a.iOx+(a.iDx-a.iOx)*e/40,a.iY=a.iOy+(a.iDy-a.iOy)*e/40),25==i.iActType){0==e&&(a.FaceTo(!0),a.SetBaseAnima("战斗站立")),e>0&&(e%2==0?a.FaceTo(!0):a.FaceTo(!1),e>10&&(a.FaceTo(!0),i.bActing=!1),a.SetBaseAnima("战斗站立"));break}e>=40&&(i.bActing=!1,a.bUseing=!1,a.iPos==this.iMyPos&&(this.iFightStat=0,this.bFightFinished&&(this.iFightStat=300,this.iTimeOut=0)));break;case 21:i.iValues[3]++,(a=this.getfm(i.iAPos)).iX=a.iTx+(a.iDx-a.iTx)*i.iValues[3]/i.iValues[1],a.iY=a.iTy+(a.iDy-a.iTy)*i.iValues[3]/i.iValues[1],i.iValues[3]>=i.iValues[2]&&(a.FaceTo(!0),a.SetBaseAnima("战斗站立"),i.bActing=!1);break;case 19:if(0==(a=this.getfm(i.iAPos)).iFlying){i.bActing=!1;break}a.iFlying<10||(10==a.iFlying?(this.getfm(i.iAPos).ianPoint=0,this.getfm(i.iAPos).NextAnima(),this.getfm(i.iAPos).SetBaseAnima("被攻击")):(e=a.iFlying-10,i.iAPos<20?e<8?(a.iX+=30,a.iY-=15):(a.iX-=30,a.iY-=15):e<8?(a.iX-=30,a.iY-=15):(a.iX+=30,a.iY-=15))),a.iY<=0&&(i.bActing=!1,a.bUseing=!1),a.iFlying++;break;case 17:a=this.getfm(i.iAPos),i.iValues[1]>=0&&i.iValues[1]<=3&&(a.iX+=a.iMoveOffX/8),i.iValues[1]>=4&&i.iValues[1]<=7&&(a.iX-=a.iMoveOffX/8),i.iValues[1]++,i.iValues[1]>8&&(a.iX=a.iOx,i.bActing=!1)}}},{key:"getfightdata",value:function(t){t.bCompress=!0;var e,i=0,a=t.GetNextByte();for(d.default.sop("Fight Data Length : "+t.iLength);101!=a;){switch(a=this.SwapPos(a),this.fds[i].bActing=!1,this.fds[i].iAPos=a,e=t.GetNextByte(),this.fds[i].iTimeStamp=e<0?256+e:e,this.fds[i].iActType=t.GetNextByte(),d.default.sop("iActType="+this.fds[i].iActType+"stamp="+this.fds[i].iTimeStamp),this.fds[i].iActType){case 5:this.fds[i].iAPos=this.SwapPos(a);break;case 0:case 18:this.fds[i].iValues[0]=t.GetNextByte(),this.fds[i].iValues[0]=this.SwapPos(this.fds[i].iValues[0]);break;case 7:this.fds[i].iValues[0]=t.GetNextByte();break;case 9:this.fds[i].iValues[0]=t.GetNextByte(),this.fds[i].iValues[1]=t.GetNextByte();break;case 24:this.fds[i].iValues[0]=t.GetNextShort();break;case 12:case 16:this.fds[i].iValues[0]=t.GetNextShort(),this.fds[i].iValues[1]=t.GetNextShort();break;case 15:this.fds[i].iValues[0]=t.GetNextByte(),this.fds[i].iValues[0]=this.SwapPos(this.fds[i].iValues[0]),this.fds[i].iValues[1]=t.GetNextShort();break;case 20:this.fds[i].sValue=t.GetNextString();break;case 21:this.fds[i].iValues[0]=t.GetNextByte(),this.fds[i].iValues[0]=this.SwapPos(this.fds[i].iValues[0]),this.fds[i].iValues[1]=t.GetNextByte(),this.fds[i].iValues[2]=t.GetNextByte();break;case 22:break;case 23:this.fds[i].iValues[0]=t.GetNextByte(),this.fds[i].iValues[0]=this.SwapPos(this.fds[i].iValues[0]),this.fds[i].iValues[1]=t.GetNextShort(),this.fds[i].sValue=t.GetNextString();break;case 26:this.fds[i].iValues[0]=t.GetNextByte(),this.fds[i].iValues[0]=this.SwapPos(this.fds[i].iValues[0]),this.fds[i].iValues[1]=t.GetNextByte(),this.fds[i].iValues[2]=t.GetNextByte();break;case 27:this.fds[i].iValues[0]=t.GetNextShort()}i++,a=t.GetNextByte()}this.iFDPoint=0,this.iFDCount=i,this.iFightStat=200,this.iTimeStamp=0,this.iDelay=0,this.iWaited=0,t.bCompress=!1}},{key:"getfightflag",value:function(t){var e,i,a,n;if(!(this.iFightStat>100)){for(e=0;e<4;e++)for(i=0;i<5;i++)this.fat[e][i].bActed=!1;for(e=0;e<4;e++)for(n=e,this.bSwap&&(n=n<2?e+2:e-2),i=t.GetNextByte(),a=0;a<5;a++)0!=(i&1<<a)&&(this.fat[n][a].bActed=!0)}}}]),XFight}();i.default=X,X.FIGHTWITH_DARK=1,X.FIGHTWITH_USER=2,X.FIGHTWITH_NPC=3,X.FIGHTWITH_SPECIAL=4,X.zhenpos=[[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,-1],[0,1],[0,1],[0,1],[0,1]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,-1],[0,-1],[0,-1],[0,1],[0,1]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,1],[0,-1],[0,-1],[0,1],[0,1]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,-1],[0,1],[0,1],[0,-1],[0,-1]],[[0,0],[0,0],[0,0],[0,0],[0,0]],[[0,-2],[0,1],[0,1],[-1,-2],[1,-2]],[[0,0],[0,0],[0,0],[0,0],[0,0]]],X.basepos=[[[0,0],[1,0],[-1,0],[2,0],[-2,0]],[[0,1],[1,1],[-1,1],[2,1],[-2,1]]],X.bFighting=!1,X.ft=null,X.gi=function(){return null==X.ft&&(X.ft=new X),X.ft}},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/PackageTools":9,"../../../../engine/TouchManager":10,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/M3DMath":29,"../../../../engine/graphics/XAnima":30,"../../../../engine/graphics/_POINT":31,"../../../../engine/graphics/_VERTEX":32,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/Gameing":91,"../../../../engtst/mgm/gameing/chat/privatechat/FriendList":102,"../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_SmallFrame":111,"../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../engtst/mgm/gameing/me/pet/Pets":247,"../../../../map/DrawBuffer":283,"../../../../map/MapManager":286,"../../../../map/VisualBlock":290,"./AutoFightFrame":126,"./DiePrompt":127,"./FightMember":128,"./NumberEffect":129,"./XFightCallPet":131,"./XFightEffect":132,"./XFightGoods":133,"./XFightPetSkill":134,"./XFightRoleSkill":135,"./XFightSpecialSkill":136}],131:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../config/GameData")),_interopRequireDefault(t("../../../../config/GmConfig"))),s=_interopRequireDefault(t("../../../../config/XDefine")),r=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),u=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),l=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),f=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),h=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/MyAttFrame")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets"))),d=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/school/LearnSkill")),_interopRequireDefault(t("./XFight")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(){function XFightCallPet(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XFightCallPet),this.MAXPETCOUNT=10,this.pets=new Array(this.MAXPETCOUNT),this.btn_pets=new Array(this.MAXPETCOUNT),this.iW=510,this.iH=330,this.iX=n.default.SCRW-this.iW-20,this.iY=n.default.SCRH-this.iH-20}return a(XFightCallPet,[{key:"InitCallPet",value:function(){var t;for(this.iW=530,this.iH=330,this.iX=n.default.SCRW-this.iW-20,this.iY=n.default.SCRH-this.iH-20,this.btn_pets[0]=null,t=0;t<this.MAXPETCOUNT;t++)this.pets[t]=null;for(this.iPetCount=0,t=0;t<h.default.mp.iPetCount;t++)h.default.mp.pets[t].iPid>0&&(this.pets[this.iPetCount++]=h.default.mp.pets[t]);return this.btn_pets[0]=null,this.iPetCount}},{key:"DrawCallPet",value:function(){var t,e,i;if(this.iW=530,this.iH=330,this.iX=n.default.SCRW-this.iW-20,this.iY=n.default.SCRH-this.iH-20,this.iPetCount>0&&null==this.btn_pets[0])for(t=0;t<this.iPetCount;t++)this.btn_pets[t]=new r.default(u.default.xani_head),this.btn_pets[t].InitButton(u.default.de_pet.strValue(this.pets[t].iTid,0,1)),this.btn_pets[t].Move(this.iX+30+t%4*130,this.iY+30+150*parseInt(t/4),80,80);for(l.default.new_framepc(this.iX,this.iY,this.iW,this.iH),t=0;t<this.iPetCount;t++){for(u.default.xani_nui2.DrawAnimaEx(this.btn_pets[t].iX-80*(this.btn_pets[t].fScale-1)/2,this.btn_pets[t].iY-80*(this.btn_pets[t].fScale-1)/2,"宠物头像框",0,101,this.btn_pets[t].fScale,this.btn_pets[t].fScale,0,0,0),this.btn_pets[t].Draw(),e=0;e<8&&this.pets[t].iPid!=d.default.gi().iUsedPetsId[e];e++);i=e<8?4294901760:4294897374,o.default.gi().DrawTextEx(this.btn_pets[t].iX+40,this.btn_pets[t].iY+80+15,this.pets[t].sName,i,22,101,1,1,0,-2,0),o.default.gi().DrawTextEx(this.btn_pets[t].iX+40,this.btn_pets[t].iY+80+15+24,this.pets[t].iLev+"级",i,20,101,1,1,0,-2,0)}}},{key:"ProcTouch",value:function(t,e,i){var a,n;for(a=0;a<this.iPetCount;a++)if(this.btn_pets[a].ProcTouch(t,e,i)&&this.btn_pets[a].bCheck()){for(n=0;n<8&&this.pets[a].iPid!=d.default.gi().iUsedPetsId[n];n++);if(!(n<8))return this.iCallPetId=this.pets[a].iPid,this.btn_pets[a].SetNormal(),!0;f.default.easymsg.AddMessage("出战过的宠物，不能再次出战")}return 3==t&&!s.default.bInRect(e,i,this.iX-20,this.iY-20,this.iW+40,this.iH+40)&&(this.iCallPetId=-1,!0)}}]),XFightCallPet}();i.default=c,c.xfcp=new c},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../engtst/mgm/gameing/me/pet/Pets":247,"../../../../engtst/mgm/gameing/me/school/LearnSkill":256,"./XFight":130}],132:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../map/DrawBuffer")),o=_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),u=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function _EFFECT(){_classCallCheck(this,_EFFECT),this.bUseing=!1,this.aa=new o.default,this.aa1=new o.default},f=function(){function XFightEffect(){var t;for(_classCallCheck(this,XFightEffect),this.list_middle=new Array(XFightEffect.MAXEFFECT),t=0;t<XFightEffect.MAXEFFECT;t++)this.list_middle[t]=new l}return a(XFightEffect,[{key:"AddDarts",value:function(t,e,i,a,n,r){var o;for(o=0;o<XFightEffect.MAXEFFECT;o++)if(!this.list_middle[o].bUseing){switch(this.list_middle[o].bUseing=!0,this.list_middle[o].iX=t,this.list_middle[o].iY=e-60,this.list_middle[o].iRate=10,this.list_middle[o].iSkillId=n,this.list_middle[o].iType=1,this.list_middle[o].iTFrame=r,this.list_middle[o].iTX=i,this.list_middle[o].iTY=a-60,this.list_middle[o].iRa=s.default.GetAngleXY(t,e,i,a),this.list_middle[o].iRa<0&&(this.list_middle[o].iRa+=360),n){case 0:u.default.xani_skills[0].InitAnimaWithName("飞刀",this.list_middle[o].aa);break;case 1:case 2:case 3:case 4:case 5:u.default.xani_skills[0].InitAnimaWithName("五行攻击"+n,this.list_middle[o].aa);break;case 6:u.default.xani_skills[8].InitAnimaWithName("穿云箭",this.list_middle[o].aa);break;default:u.default.xani_skills[0].InitAnimaWithName("飞刀",this.list_middle[o].aa)}break}}},{key:"AddEffect",value:function(t,e,i,a){var n;if(!(i>=XFightEffect.EFFECTNAME.length))for(n=0;n<XFightEffect.MAXEFFECT;n++)if(!this.list_middle[n].bUseing){switch(this.list_middle[n].bUseing=!0,this.list_middle[n].iX=t,this.list_middle[n].iY=e,this.list_middle[n].iRate=10,this.list_middle[n].iSkillId=i,this.list_middle[n].iType=0,i){case 9:case 11:break;case 54:case 61:case 62:u.default.xani_skills[0].InitAnimaWithName(XFightEffect.EFFECTNAME[i],this.list_middle[n].aa);break;case 0:case 1:case 2:case 57:case 3:case 4:case 5:u.default.xani_skills[1].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=20;break;case 6:case 8:case 10:u.default.xani_skills[2].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=20;break;case 7:u.default.xani_skills[2].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"1_右":"1_左"),this.list_middle[n].aa),u.default.xani_skills[2].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"2_右":"2_左"),this.list_middle[n].aa1),this.list_middle[n].iRate=20;break;case 12:case 15:case 16:case 17:u.default.xani_skills[3].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=20;break;case 13:case 14:u.default.xani_skills[3].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"1_右":"1_左"),this.list_middle[n].aa),u.default.xani_skills[3].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"2_右":"2_左"),this.list_middle[n].aa1),this.list_middle[n].iRate=20;break;case 18:case 19:case 20:case 21:case 23:u.default.xani_skills[4].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=20;break;case 24:u.default.xani_skills[5].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"1_右":"1_左"),this.list_middle[n].aa),u.default.xani_skills[5].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"2_右":"2_左"),this.list_middle[n].aa1),this.list_middle[n].iRate=20;break;case 25:case 26:case 27:case 28:case 29:u.default.xani_skills[5].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=20,28==i&&(this.list_middle[n].iRate=10);break;case 30:case 32:case 33:case 34:case 35:u.default.xani_skills[6].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=20;break;case 60:u.default.xani_skills[7].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=30;break;case 36:case 40:case 41:u.default.xani_skills[7].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=20;break;case 37:case 38:case 39:u.default.xani_skills[7].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa);break;case 42:case 43:break;case 44:case 46:case 47:u.default.xani_skills[9].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=20;break;case 48:case 50:case 51:case 52:case 53:u.default.xani_skills[8].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=20;break;case 56:case 63:case 64:case 65:case 66:case 67:case 68:case 69:u.default.xani_skills[11].InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa),this.list_middle[n].iRate=20;break;case 58:case 59:u.default.xani_skills[0].InitAnimaWithName(XFightEffect.EFFECTNAME[i],this.list_middle[n].aa),this.list_middle[n].iRate=20;break;default:u.default.xani_skill.InitAnimaWithName(XFightEffect.EFFECTNAME[i]+(a?"_右":"_左"),this.list_middle[n].aa)}break}}},{key:"AddEffect2",value:function(t,e,i,a,n){var s;for(s=0;s<XFightEffect.MAXEFFECT;s++)if(!this.list_middle[s].bUseing){this.list_middle[s].bUseing=!0,this.list_middle[s].iX=t,this.list_middle[s].iY=e,this.list_middle[s].iRate=i%100,u.default.xani_skills[parseInt(i/100)].InitAnimaWithName(a+(n?"_右":"_左"),this.list_middle[s].aa),this.list_middle[s].iSkillId=-1,this.list_middle[s].iType=0;break}}},{key:"DrawGround",value:function(){var t;for(t=0;t<XFightEffect.MAXEFFECT;t++)if(this.list_middle[t].bUseing){if(1==this.list_middle[t].iType){r.default.gi().DrawAnimaEx(n.default.SCRH,this.list_middle[t].iX,this.list_middle[t].iY,this.list_middle[t].aa,101,.1*this.list_middle[t].iRate,.1*this.list_middle[t].iRate,this.list_middle[t].iRa,-2,-2),this.list_middle[t].iX=this.list_middle[t].iTX+(this.list_middle[t].iX-this.list_middle[t].iTX)*this.list_middle[t].iTFrame/(this.list_middle[t].iTFrame+1),this.list_middle[t].iY=this.list_middle[t].iTY+(this.list_middle[t].iY-this.list_middle[t].iTY)*this.list_middle[t].iTFrame/(this.list_middle[t].iTFrame+1),this.list_middle[t].iTFrame<=0?this.list_middle[t].bUseing=!1:this.list_middle[t].iTFrame--,this.list_middle[t].aa.NextFrame();continue}7==this.list_middle[t].iSkillId||13==this.list_middle[t].iSkillId||14==this.list_middle[t].iSkillId||24==this.list_middle[t].iSkillId?(r.default.gi().DrawAnimaEx(this.list_middle[t].iY-1,this.list_middle[t].iX,this.list_middle[t].iY,this.list_middle[t].aa,101,.1*this.list_middle[t].iRate,.1*this.list_middle[t].iRate,0,-2,-2),r.default.gi().DrawAnimaEx(n.default.SCRH,this.list_middle[t].iX,this.list_middle[t].iY,this.list_middle[t].aa1,101,.1*this.list_middle[t].iRate,.1*this.list_middle[t].iRate,0,-2,-2),this.list_middle[t].aa1.NextFrame()):r.default.gi().DrawAnimaEx(n.default.SCRH,this.list_middle[t].iX,this.list_middle[t].iY,this.list_middle[t].aa,101,.1*this.list_middle[t].iRate,.1*this.list_middle[t].iRate,0,-2,-2),this.list_middle[t].aa.NextFrame()&&(this.list_middle[t].bUseing=!1)}}},{key:"DrawMiddle",value:function(){}},{key:"DrawSky",value:function(){}}]),XFightEffect}();i.default=f,f.EFFECTNAME=["浩然剑气","无双剑法","幻影剑法1","凝神聚气","虎啸","先发制人","陷阱","烈焰阵","轮轴术","迷雾","奇谋","兵诡","推功过血","起死回生","练气化神","气功","知己知彼","针灸","狂暴前奏","连环刀","乱舞","定心诀","魔甲术","壁垒","火流星","毒火术","火牢","炎爆术","火甲术","火灵诀","飞箝术","凝神诀","鬼谷刀法","散势法","清心咒","鬼符","呼风","唤雨","天雷封魔","仙甲术","天神助威","灵智术前奏","天阵","地阵","五行击","五行甲","孤虚法","归元法","穿云箭爆","定天弓","驱魔符","天地同寿","灵动九天","仙绫缚","普通攻击","暴击","生死决","幻影剑法2","出场烟雾","五行攻击爆炸","唤雨新","加血效果","加蓝效果","奋力一击","烈火","水箭","风刃","流沙","巫毒","招魂"],f.MAXEFFECT=64,f.fe=new f},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/graphics/AnimaAction":25,"../../../../engtst/mgm/GmPlay":65,"../../../../map/DrawBuffer":283}],133:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=(_interopRequireDefault(t("../../../../engine/TouchManager")),_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),o=(_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"))),u=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),l=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(){function XFightGoods(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XFightGoods)}return a(XFightGoods,[{key:"XFightGoods",value:function(){}},{key:"InitFightGoods",value:function(){this.bReturn=!1,this.bSelectFinished=!1,this.lockgoods=null}},{key:"DrawFightGoods",value:function(){this.iW=430,this.iH=345,this.iX=n.default.SCRW-this.iW-20,this.iY=n.default.SCRH-this.iH-20,u.default.new_DrawGoods(this.iX,this.iY,l.default.gi().goods[2],null,null),null!=this.lockgoods&&u.default.new_DrawRect(this.iX,this.iY,l.default.gi().goods[2],this.lockgoods,0),u.default.bShowDetail()&&u.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){var a;return this.bFood=!1,this.bUseToDest=!1,this.lockgoods=u.default.new_LockGoods(e,i,this.iX,this.iY,l.default.gi().goods[2],t),u.default.NoMove(),3==t&&null!=this.lockgoods&&u.default.bCanProc()&&(4==(a=r.default.de_goods.intValue(this.lockgoods.iTid,0,30))?2!=XFight.gi().iFightStat?o.default.easymsg.AddMessage("宠物不能使用"):(this.bUseToDest=!0,this.bSelectFinished=!0):1==(a=r.default.de_goods.intValue(this.lockgoods.iTid,0,26))||2==a?this.bSelectFinished=!0:2==(a=r.default.de_goods.intValue(this.lockgoods.iTid,0,34))||3==a?2!=XFight.gi().iFightStat?o.default.easymsg.AddMessage("宠物不能使用烹饪"):(this.bFood=!0,this.bSelectFinished=!0):o.default.easymsg.AddMessage("所选物品不能在战斗中使用")),3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||(this.bReturn=!0),!0}}]),XFightGoods}();i.default=f,f.xfg=new f},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/TouchManager":10,"../../../../engine/control/XButton":14,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],134:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),u=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),l=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),f=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/MyAttFrame"));_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("./XFight"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var h=function(){function XFightPetSkill(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XFightPetSkill),this.MAXSKILLCOUNT=9,this.iFightSkillId=new Int32Array(this.MAXSKILLCOUNT),this.btn_skills=new Array(this.MAXSKILLCOUNT)}return a(XFightPetSkill,[{key:"InitPetSkill",value:function(t){var e;for(this.iW=380,this.iH=345,this.iX=n.default.SCRW-this.iW-20,this.iY=n.default.SCRH-this.iH-20,this.btn_skills[0]=null,this.pet=t,this.iFightSkillCount=0,e=0;e<this.MAXSKILLCOUNT;e++)t.jn[e]>0&&0==u.default.de_skill.intValue(t.jn[e],0,32)&&(this.iFightSkillId[this.iFightSkillCount]=t.jn[e],this.iFightSkillCount++);return this.bReturn=!1,this.bUsed=!1,this.iPoint=-1,this.iW=400,this.iFightSkillCount>2?this.iH=330:this.iH=180,this.iX=n.default.SCRW-this.iW-20,this.iY=n.default.SCRH-this.iH-20,this.iFightSkillCount}},{key:"Draw",value:function(){var t;if(this.iW=400,this.iFightSkillCount>2?this.iH=330:this.iH=180,this.iX=n.default.SCRW-this.iW-20,this.iY=n.default.SCRH-this.iH-20,this.iFightSkillCount>0&&null==this.btn_skills[0])for(t=0;t<this.iFightSkillCount;t++)this.btn_skills[t]=new r.default(u.default.xani_nicon),this.btn_skills[t].InitButton(u.default.de_skill.strValue(this.iFightSkillId[t],0,5)),this.btn_skills[t].Move(this.iX+30+t%3*130,this.iY+30+150*parseInt(t/3),80,80);l.default.new_framepc(this.iX,this.iY,this.iW,this.iH);var e=-1;for(t=0;t<this.iFightSkillCount;t++)this.btn_skills[t].Draw(),this.btn_skills[t].bMouseDown&&(e=t),4294897374,o.default.gi().DrawTextEx(this.btn_skills[t].iX+40,this.btn_skills[t].iY+80+15,u.default.de_skill.strValue(this.iFightSkillId[t],0,6),4294897374,25,101,1,1,0,-2,0);e>=0&&f.default.Skill_Detail(this.iFightSkillId[e]%1e3,this.btn_skills[e].iX,this.btn_skills[e].iY,-1)}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<this.iFightSkillCount;a++)if(this.btn_skills[a].ProcTouch(t,e,i)&&this.btn_skills[a].bCheck())return this.btn_skills[a].SetNormal(),this.iPoint=a,this.bUsed=!0,this.iUseSkillId=this.iFightSkillId[a],!0;return 3==t&&!s.default.bInRect(e,i,this.iX-20,this.iY-20,this.iW+40,this.iH+40)&&(this.bReturn=!0,!0)}}]),XFightPetSkill}();i.default=h,h.xfps=new h},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../engtst/mgm/gameing/me/pet/Pets":247,"./XFight":130}],135:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../config/XDefine")),o=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),f=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),d=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),c=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/MyAttFrame")),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/school/LearnSkill")),g=_interopRequireDefault(t("./XFight"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(){function XFightRoleSkill(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XFightRoleSkill),this.MAXSKILLCOUNT=10,this.iFightSkillId=new Int32Array(this.MAXSKILLCOUNT),this.btn_skills=new Array(this.MAXSKILLCOUNT),this.iW=510,this.iH=345,this.iX=s.default.SCRW-this.iW-20,this.iY=s.default.SCRH-this.iH-20}return a(XFightRoleSkill,[{key:"InitFightSkill",value:function(){var t,e,i,a,r,o;for(this.iW=530,this.iH=330,this.iX=s.default.SCRW-this.iW-20,this.iY=s.default.SCRH-this.iH-20,this.btn_skills[0]=null,t=0;t<this.MAXSKILLCOUNT;t++)this.iFightSkillId[t]=-1;if(this.iFightSkillCount=0,d.default.me.rbs.iLev<30&&(this.iFightSkillId[this.iFightSkillCount++]=1201,this.iShowPoint=-1),0!=d.default.me.rbs.iSchoolId){for(t=0;t<m.default.MAXSKILLCOUNT;t++)for(e=n.default.iSchoolSkillId[d.default.me.rbs.iSchoolId][t],i=0;i<10&&!((a=l.default.de_skill.intValue(e,i,4))<=0);i++)r=l.default.de_skill.intValue(a,0,9),o=l.default.de_skill.intValue(a,0,7),d.default.me.rbs.iSchoolSkill[t]>=r&&(a+=1e3),0!=o&&(this.iFightSkillId[this.iFightSkillCount++]=a);t=d.default.me.iFlag[33]%10,g.default.gi().iFightType==g.default.FIGHTWITH_DARK&&t>0&&(this.iFightSkillId[this.iFightSkillCount++]=1203),this.iShowPoint=-1}}},{key:"DrawFightSkill",value:function(){var t,e;if(this.iW=530,this.iH=330,this.iX=s.default.SCRW-this.iW-20,this.iY=s.default.SCRH-this.iH-20,this.iFightSkillCount>0&&null==this.btn_skills[0])for(t=0;t<this.iFightSkillCount;t++)this.btn_skills[t]=new o.default(l.default.xani_nicon),this.btn_skills[t].InitButton(l.default.de_skill.strValue(this.iFightSkillId[t]%1e3,0,5)),this.btn_skills[t].Move(this.iX+30+t%4*130,this.iY+30+150*parseInt(t/4),80,80);f.default.new_framepc(this.iX,this.iY,this.iW,this.iH);var i=-1;for(t=0;t<this.iFightSkillCount;t++)l.default.xani_nicon.DrawAnimaEx(this.btn_skills[t].iX-80*(this.btn_skills[t].fScale-1)/2,this.btn_skills[t].iY-80*(this.btn_skills[t].fScale-1)/2,"技能外框",0,101,this.btn_skills[t].fScale,this.btn_skills[t].fScale,0,0,0),this.btn_skills[t].Draw(),this.btn_skills[t].bMouseDown&&(i=t),e=this.iFightSkillId[t]>1e3?4294897374:4294901760,u.default.gi().DrawTextEx(this.btn_skills[t].iX+40,this.btn_skills[t].iY+80+15,l.default.de_skill.strValue(this.iFightSkillId[t]%1e3,0,6),e,25,101,1,1,0,-2,0);i>=0&&c.default.Skill_Detail(this.iFightSkillId[i]%1e3,this.btn_skills[i].iX,this.btn_skills[i].iY,-1)}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<this.iFightSkillCount;a++)if(this.btn_skills[a].ProcTouch(t,e,i)&&this.btn_skills[a].bCheck()){if(this.iShowPoint=a,!(this.iFightSkillId[a]<=1e3))return this.iUseSkillId=this.iFightSkillId[a]%1e3,this.iSelectTarget=l.default.de_skill.intValue(this.iUseSkillId,0,23),this.btn_skills[a].SetNormal(),!0;h.default.easymsg.AddMessage("技能等级不足无法使用")}return 3==t&&!r.default.bInRect(e,i,this.iX-20,this.iY-20,this.iW+40,this.iH+40)&&(this.iUseSkillId=-1,!0)}}]),XFightRoleSkill}();i.default=_,_.xfs=new _},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../engtst/mgm/gameing/me/school/LearnSkill":256,"./XFight":130}],136:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),o=(_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),u=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),l=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),f=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),h=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),d=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/MyAttFrame")),c=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(){function XFightSpecialSkill(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XFightSpecialSkill),this.MAXSKILLCOUNT=10,this.iGoodsSkillId=new Int32Array(this.MAXSKILLCOUNT),this.btn_skills=new Array(this.MAXSKILLCOUNT)}return a(XFightSpecialSkill,[{key:"InitSpecialSkill",value:function(){var t,e;for(t=0;t<this.MAXSKILLCOUNT;t++)this.iGoodsSkillId[t]=-1,this.btn_skills[t]=new r.default(u.default.xani_ngoods);for(this.iSkillCount=0,t=0;t<6;t++)c.default.gi().goods[1][t].iGid<=0||(e=1023&c.default.gi().goods[1][t].iAtts[4])<=0||(this.btn_skills[this.iSkillCount].InitButton(u.default.de_goods.strValue(c.default.gi().goods[1][t].iTid,-1,10)),this.iGoodsSkillId[this.iSkillCount++]=e);this.iShowPoint=-1,this.iW=400,this.iSkillCount>2?this.iH=330:this.iH=180,this.iX=n.default.SCRW-this.iW-20,this.iY=n.default.SCRH-this.iH-20}},{key:"DrawSpecialSkill",value:function(){var t,e,i;for(this.iW=400,this.iSkillCount>2?this.iH=330:this.iH=180,this.iX=n.default.SCRW-this.iW-20,this.iY=n.default.SCRH-this.iH-20,l.default.new_framepc(this.iX,this.iY,this.iW,this.iH),t=0;t<this.iSkillCount;t++)this.btn_skills[t].Move(this.iX+30+t%3*130,this.iY+30+t/3*150,80,80),u.default.xani_nicon.DrawAnimaEx(this.btn_skills[t].iX-80*(this.btn_skills[t].fScale-1)/2,this.btn_skills[t].iY-80*(this.btn_skills[t].fScale-1)/2,"技能外框",0,101,this.btn_skills[t].fScale,this.btn_skills[t].fScale,0,0,0),this.btn_skills[t].Draw(),e=u.default.de_skill.intValue(this.iGoodsSkillId[t],0,35),c.default.gi().goods[1][4].iGid>0&&267==(c.default.gi().goods[1][4].iAtts[4]>>10&1023)&&(e=8*e/10),i=e<=h.default.me.rbs.iAnger?4294897374:4294901760,o.default.gi().DrawTextEx(this.btn_skills[t].iX+40,this.btn_skills[t].iY+80+15,u.default.de_skill.strValue(this.iGoodsSkillId[t],0,6),i,22,101,1,1,0,-2,0),o.default.gi().DrawTextEx(this.btn_skills[t].iX+40,this.btn_skills[t].iY+80+15+24,"SP:"+e+"/"+h.default.me.rbs.iAnger,i,20,101,1,1,0,-2,0);this.iShowPoint>=0&&this.iShowPoint<this.iSkillCount&&d.default.Skill_Detail(this.iGoodsSkillId[this.iShowPoint],this.iX,this.iY+60*this.iShowPoint+30,-1)}},{key:"ProcTouch",value:function(t,e,i){var a,n;for(a=0;a<this.iSkillCount;a++)if(this.btn_skills[a].ProcTouch(t,e,i)&&this.btn_skills[a].bCheck())return this.btn_skills[a].SetNormal(),this.iShowPoint=a,n=u.default.de_skill.intValue(this.iGoodsSkillId[a],0,35),c.default.gi().goods[1][4].iGid>0&&267==(c.default.gi().goods[1][4].iAtts[4]>>10&1023)&&(n=8*n/10),n>h.default.me.rbs.iAnger?(f.default.easymsg.AddMessage("怒气不足，可能使用失败"),this.iUseSkillId=this.iGoodsSkillId[a],this.iSelectTarget=u.default.de_skill.intValue(this.iUseSkillId,0,36),!0):(this.iUseSkillId=this.iGoodsSkillId[a],this.iSelectTarget=u.default.de_skill.intValue(this.iUseSkillId,0,36),!0);return 3==t&&!s.default.bInRect(e,i,this.iX-20,this.iY-20,this.iW+40,this.iH+40)&&(this.iUseSkillId=-1,!0)}}]),XFightSpecialSkill}();i.default=m,m.xss=new m},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],137:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),u=_interopRequireDefault(t("../../../../engine/control/XInput")),l=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function CreateFT(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,CreateFT);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(CreateFT.__proto__||Object.getPrototypeOf(CreateFT)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=400,e.iH=410,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.in_ftname=new u.default(l.default.xani_frame),e.in_ftname.Move(e.iX+20,e.iY+100,e.iW-40,60),e.in_ftname.bHideText=!0,e.in_ftdetail=new u.default(l.default.xani_frame),e.in_ftdetail.Move(e.iX+20,e.iY+200,e.iW-40,120),e.in_ftdetail.bHideText=!0,e.btn_create=new o.default(l.default.xani_button),e.btn_create.Move(e.iX+e.iW-20-90,e.iY+e.iH-20-60,90,60),e.btn_create.InitButton("1号按钮90_60"),e.btn_create.sName="创建",e.btn_cancel=new o.default(l.default.xani_button),e.btn_cancel.Move(e.iX+20,e.iY+e.iH-20-60,90,60),e.btn_cancel.InitButton("1号按钮90_60"),e.btn_cancel.sName="取消",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(CreateFT,r.default),a(CreateFT,[{key:"Draw",value:function(){d.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+20,"创建战队",4294896766,32,101,1,1,0,-2,0,2,4278261038),this.pm3f.DrawText_2(this.in_ftname.iX,this.in_ftname.iY-30,"输入战队名称：",4294896766,28,101,1,1,0,0,0,2,4278261038),d.default.frame_type4("8号框20_20",this.in_ftname.iX,this.in_ftname.iY,this.in_ftname.iW,this.in_ftname.iH,20,20),c.default.gi().Format("#c114e61"+this.in_ftname.sDetail,this.in_ftname.iW-10,30),c.default.gi().Draw(this.in_ftname.iX+5,this.in_ftname.iY+5),this.pm3f.DrawText_2(this.in_ftdetail.iX,this.in_ftdetail.iY-30,"输入战队简介：",4294896766,28,101,1,1,0,0,0,2,4278261038),d.default.frame_type4("8号框20_20",this.in_ftdetail.iX,this.in_ftdetail.iY,this.in_ftdetail.iW,this.in_ftdetail.iH,20,20),c.default.gi().Format("#c114e61"+this.in_ftdetail.sDetail,this.in_ftdetail.iW-10,30),c.default.gi().Draw(this.in_ftdetail.iX+5,this.in_ftdetail.iY+5),this.btn_create.Draw(),this.btn_cancel.Draw(),this.in_ftname.onscr(),this.in_ftdetail.onscr()}},{key:"ProcTouch",value:function(t,e,i){if(this.in_ftname.ProcTouch(t,e,i),this.in_ftdetail.ProcTouch(t,e,i),this.btn_create.ProcTouch(t,e,i)){if(this.btn_create.bCheck()){var a=this.in_ftname.sDetail.getBytes("GBK");if(a.length<4||a.length>16)return m.default.easymsg.AddMessage("战队名称2-8个字"),!0;if((a=this.in_ftdetail.sDetail.getBytes("GBK")).length<4||a.length>80)return m.default.easymsg.AddMessage("战队宗旨2-40个字"),!0;f.default.gi().s_CreateFT(this.in_ftname.sDetail,this.in_ftdetail.sDetail),h.default.gi().PopStat(1)}return!0}return this.btn_cancel.ProcTouch(t,e,i)?(this.btn_cancel.bCheck()&&h.default.gi().PopStat(1),!0):!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)}}]),CreateFT}();i.default=g,g.Open=function(){h.default.gi().PushStat(h.default.GS_CREATEFT)}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XInput":18,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86}],138:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../engine/control/XInput")),u=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"));_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function FTChallenge(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FTChallenge);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FTChallenge.__proto__||Object.getPrototypeOf(FTChallenge)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=500,e.iH=350,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.in_money=new o.default(u.default.xani_ui),e.in_money.sDetail="100000",e.in_money.bNumber=!0,e.in_money.iTextSize=20,e.in_money.iMaxNumber=2e7,e.in_money.iTextColor=4279324257,e.btn_ok=new r.default(u.default.xani_button),e.btn_ok.Move(e.iX+330,e.iY+60+50+10,150,60),e.btn_ok.InitButton("1号按钮150_60"),e.btn_ok.sName="确定挑战",e.btn_close=new r.default(u.default.xani_button),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_close.InitButton("关闭按钮"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FTChallenge,s.default),a(FTChallenge,[{key:"Draw",value:function(){var t;t=this.iY+15,h.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),this.pm3f.DrawText_2(this.iX+this.iW/2,t,"发起挑战",4294896766,40,101,1,1,0,-2,0,2,4278261038),t+=60,this.pm3f.DrawText_2(this.iX+20,t,"挑战战队:"+this.sDName,4294896766,30,101,1,1,0,0,0,2,4278261038),t+=60,this.pm3f.DrawText_2(this.iX+20,t,"挑战金",4294896766,30,101,1,1,0,0,0,2,4278261038),this.in_money.Move(this.iX+120,t-10,155,50),h.default.frame_type4("8号框20_20",this.in_money.iX,this.in_money.iY,this.in_money.iW,50,20,20),this.in_money.DrawText(),this.in_money.onscr(),t+=60,d.default.gi().Format("#c114e61说明：挑战金从战队资金支出，最低10万，扣除挑战金后，战队资金不能低于100万，否则挑战无效。#e如同一战队被多个战队挑战，挑战金高者配对成功#e配对成功后，系统将扣除10%挑战金#e挑战胜利，剩余90%挑战金归还挑战方；#e挑战失败，挑战金归被挑战方所有",this.iW-40,20),d.default.gi().Draw(this.iX+20,t),this.btn_ok.Draw(),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;return this.btn_ok.ProcTouch(t,e,i)?(this.btn_ok.bCheck()&&this.in_money.sDetail.length>0&&((a=parseInt(this.in_money.sDetail))<1e5?c.default.easymsg.AddMessage("挑战金不能低于10万"):(l.default.gi().s_FTChallenge(1,a,this.iDFid),f.default.gi().PopStat(1))),!0):this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):(this.in_money.ProcTouch(t,e,i),!1)}}]),FTChallenge}();i.default=m,m.Open=function(t,e){var i;(i=f.default.gi().iXStat==f.default.GS_FTCHALLENGE?f.default.gi().oCurrentView:f.default.gi().PushStat(f.default.GS_FTCHALLENGE)).sDName=t,i.iDFid=e}},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XButtonEx2":16,"../../../../engine/control/XInput":18,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/GmMe":211}],139:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m=function _FTRANK(){_classCallCheck(this,_FTRANK)},g=function(t){function FTRank(t){_classCallCheck(this,FTRank);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FTRank.__proto__||Object.getPrototypeOf(FTRank)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=600,e.iH=480,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_pageup=new o.default(l.default.xani_button),e.btn_pageup.Move(e.iX+30,e.iY+e.iH-30-60,120,60),e.btn_pageup.InitButton("1号按钮120_60"),e.btn_pageup.sName="上一页",e.btn_pagedown=new o.default(l.default.xani_button),e.btn_pagedown.Move(e.iX+e.iW-30-120,e.iY+e.iH-30-60,120,60),e.btn_pagedown.InitButton("1号按钮120_60"),e.btn_pagedown.sName="下一页",e.btn_fight=new o.default(l.default.xani_button),e.btn_fight.Move(e.iX+e.iW/2-60,e.iY+e.iH-30-60,120,60),e.btn_fight.InitButton("1号按钮120_60"),e.btn_fight.sName="挑战",e.btn_close=new o.default(l.default.xani_button),e.btn_close.Move(e.iX+e.iW-30,e.iY-20,60,60),e.btn_close.InitButton("关闭按钮"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FTRank,r.default),a(FTRank,[{key:"Draw",value:function(){var t,e,i,a;for(d.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+15,"战队排行",4294896766,40,101,1,1,0,-2,0,2,4278261038),t=0;t<10;t++)e=this.iX+20+t/5*this.iW/2,i=this.iY+60+t%5*65,this.iPoint==t?this.pm3f.FillRect_2D(e,i,e+this.iW/2-40,i+60,2147483776):t<this.iCount&&this.ranklist[t].fid==MyFT.mft.iFTid?this.pm3f.FillRect_2D(e,i,e+this.iW/2-40,i+60,2147516416):d.default.frame_type4("2号框20_20",e,i,this.iW/2-40,60,20,20);for(a=this.iW/2-40,t=0;t<this.iCount;t++)e=this.iX+20+t/5*this.iW/2,i=this.iY+60+t%5*65,this.pm3f.DrawText_2(e+15,i+30,""+this.ranklist[t].rank,4294952960,50,101,1,1,0,0,-2,2,4278190080),this.pm3f.DrawTextEx(e+a-10,i+5,"队名:"+this.ranklist[t].name,4294967295,20,101,1,1,0,-3,0),this.pm3f.DrawTextEx(e+a-10,i+5+30,"队长:"+this.ranklist[t].leader,4294967295,20,101,1,1,0,-3,0),this.ranklist[t].nowar>0&&u.default.gi().DrawTextEx(e+a/2-50,i+30-25,"免战",4294901760,50,101,1,1,30,e+a/2,i+30),this.ranklist[t].fid==FTRank.iDFid&&u.default.gi().DrawTextEx(e+a/2-50,i+30-25,"挑战",4294901760,50,101,1,1,30,e+a/2,i+30);this.iNoWar>0?this.pm3f.DrawTextEx(this.btn_fight.iX,this.btn_fight.iY,"免战中",4294967295,20,101,1,1,0,0,0):2==FTRank.iFTStat?(this.btn_fight.sName="挑战查询",this.btn_fight.Draw()):1==FTRank.iFTStat&&(0==FTRank.iDFid?(this.btn_fight.sName="发起挑战",this.iPoint>=0&&this.iPoint<this.iCount&&this.ranklist[this.iPoint].rank<this.iMyRank&&this.ranklist[this.iPoint].fid!=MyFT.mft.iFTid&&0==this.ranklist[this.iPoint].nowar&&this.btn_fight.Draw()):(this.btn_fight.sName="取消挑战",this.btn_fight.Draw())),l.default.sop("ftstat="+FTRank.iFTStat),this.btn_pageup.Draw(),this.btn_pagedown.Draw(),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a,n,r;if(2==FTRank.iFTStat){if(this.btn_fight.ProcTouch(t,e,i))return this.btn_fight.bCheck()&&f.default.gi().s_FTChallenge(3,0,0),!0}else if(1==FTRank.iFTStat)if(0==FTRank.iDFid){if(this.iPoint>=0&&this.iPoint<this.iCount&&this.ranklist[this.iPoint].rank<this.iMyRank&&this.ranklist[this.iPoint].fid!=MyFT.mft.iFTid&&0==this.ranklist[this.iPoint].nowar&&this.btn_fight.ProcTouch(t,e,i))return this.btn_fight.bCheck()&&FTChallenge.Open(this.ranklist[this.iPoint].name,this.ranklist[this.iPoint].fid),!0}else if(this.btn_fight.ProcTouch(t,e,i))return this.btn_fight.bCheck()&&f.default.gi().s_FTChallenge(2,0,0),!0;for(this.iPoint=-1,a=0;a<10;a++)n=this.iX+20+a/5*this.iW/2,r=this.iY+60+a%5*65,s.default.bInRect(e,i,n,r,this.iW/2-40,60)&&(this.iPoint=a);return this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0):this.btn_pageup.ProcTouch(t,e,i)?(this.btn_pageup.bCheck()&&(this.iPage>0?(this.iPage--,f.default.gi().s_FTChallenge(0,this.iPage,0)):c.default.easymsg.AddMessage("已到首页")),!0):this.btn_pagedown.ProcTouch(t,e,i)?(this.btn_pagedown.bCheck()&&(this.iPage++,f.default.gi().s_FTChallenge(0,this.iPage,0)),!0):!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)}}]),FTRank}();i.default=g,g.iFTStat,g.iDFid,g.iDMoney,g._2506c=function(t){g.iFTStat=t.GetNextInt(),g.iDFid=t.GetNextInt(),g.iDMoney=t.GetNextInt(),g.iDMoney<=0&&(g.iDFid=0)},g.Open=function(t){var e,i;if(h.default.gi().iXStat==h.default.GS_LOADING1&&h.default.gi().PopStat(1),h.default.gi().iXStat==h.default.GS_FTRANK)i=h.default.gi().oCurrentView;else for((i=h.default.gi().PushStat(h.default.GS_FTRANK)).ranklist=new Array(10),e=0;e<10;e++)i.ranklist[e]=new m;for(i.iNoWar=t.GetNextInt(),i.iMyRank=t.GetNextInt(),i.iPage=t.GetNextInt(),i.iCount=t.GetNextInt(),e=0;e<i.iCount;e++)i.ranklist[e].rank=t.GetNextInt(),i.ranklist[e].fid=t.GetNextInt(),i.ranklist[e].name=t.GetNextString(),i.ranklist[e].leader=t.GetNextString(),i.ranklist[e].nowar=t.GetNextInt();i.iPoint=-1}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86}],140:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function MyFT(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyFT),this.iFTid=0};i.default=a,a.mft=new a},{}],141:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fteam/MyFT"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function FTFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FTFrame);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FTFrame.__proto__||Object.getPrototypeOf(FTFrame)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=590,e.iH=420,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_putin=new o.default(u.default.xani_button),e.btn_putin.Move(e.iX+30,e.iY+e.iH-30-60-10-60,150,60),e.btn_putin.InitButton("1号按钮150_60"),e.btn_putin.sName="存入资金",e.btn_getout=new o.default(u.default.xani_button),e.btn_getout.Move(e.iX+30,e.iY+e.iH-30-60,150,60),e.btn_getout.InitButton("1号按钮150_60"),e.btn_getout.sName="提取资金",e.btn_nowar=new o.default(u.default.xani_button),e.btn_nowar.Move(e.iX+e.iW/2-75,e.iY+e.iH-30-60-10-60,150,60),e.btn_nowar.InitButton("1号按钮150_60"),e.btn_nowar.sName="免战",e.btn_sw=new o.default(u.default.xani_button),e.btn_sw.Move(e.iX+e.iW/2-75,e.iY+e.iH-30-60,150,60),e.btn_sw.InitButton("1号按钮150_60"),e.btn_sw.sName="领取声望",e.btn_secret=new o.default(u.default.xani_button),e.btn_secret.Move(e.iX+e.iW-30-150,e.iY+e.iH-30-60-10-60,150,60),e.btn_secret.InitButton("1号按钮150_60"),e.btn_secret.sName="战队秘境",e.btn_dismiss=new o.default(u.default.xani_button),e.btn_dismiss.Move(e.iX+e.iW-30-150,e.iY+e.iH-30-60,150,60),e.btn_dismiss.InitButton("1号按钮150_60"),0==m.default.mft.iFTJob?e.btn_dismiss.sName="解散战队":e.btn_dismiss.sName="退出战队",e.btn_close=new o.default(u.default.xani_button),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_close.InitButton("关闭按钮"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FTFrame,r.default),a(FTFrame,[{key:"Draw",value:function(){d.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),d.default.ui3_Text1(this.iX+30,this.iY+40,80,160,"名称",this.sName),d.default.ui3_Text1(this.iX+30,this.iY+40+40,80,160,"队长",this.sLeader),d.default.ui3_Text1(this.iX+30,this.iY+40+80,80,160,"号码",""+this.iRid),d.default.ui3_Text1(this.iX+30,this.iY+40+120,80,160,"荣誉",""+this.iRy),d.default.ui3_Text1(this.iX+30,this.iY+40+160,80,160,"声望",""+this.iSw),this.iRank>=1e5?d.default.ui3_Text1(this.iX+30+250,this.iY+40,120,160,"战队排名","暂无"):d.default.ui3_Text1(this.iX+30+250,this.iY+40,120,160,"战队排名",""+this.iRank),d.default.ui3_Text1(this.iX+30+250,this.iY+40+40,120,160,"胜利场次",""+this.iWin),d.default.ui3_Text1(this.iX+30+250,this.iY+40+80,120,160,"失败场次",""+this.iLost),d.default.ui3_Text1(this.iX+30+250,this.iY+40+120,120,160,"放弃场次",""+this.iGiveup),d.default.ui3_Text1(this.iX+30+250,this.iY+40+160,120,160,"战队资金",""+this.iMoney),0==m.default.mft.iFTJob&&(this.btn_putin.Draw(),this.btn_getout.Draw(),0==this.iNoWar?this.btn_nowar.sName="免战：关":this.btn_nowar.sName="免战：开",this.btn_nowar.Draw(),this.iSwAdd>0&&(this.btn_sw.Draw(),h.default.end(h.default.CONFIRM_SWADD)&&h.default.bConfirm&&(l.default.gi().s_FTOperate(4,this.iSwAdd,0),this.iSwAdd=0)),h.default.end(h.default.CONFIRM_NOWAR)&&h.default.bConfirm&&(0==this.iNoWar?this.iNoWar=1:this.iNoWar=0,l.default.gi().s_FTOperate(3,this.iNoWar,0))),this.btn_secret.Draw(),this.btn_dismiss.Draw(),h.default.end(h.default.CONFIRM_FTDISMISS)&&h.default.bConfirm&&(l.default.gi().s_FTOperate(5,m.default.mft.iFTJob,0),f.default.gi().PopStat(1)),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){if(0==m.default.mft.iFTJob){if(this.btn_putin.ProcTouch(t,e,i))return this.btn_putin.bCheck()&&(this.iMoney>=2e7?c.default.easymsg.AddMessage("战队资金已达2000万"):FTPutIn.Open(this.iMoney)),!0;if(this.btn_getout.ProcTouch(t,e,i))return this.btn_getout.bCheck()&&(this.iMoney<=1e6?c.default.easymsg.AddMessage("战队资金不能低于100万"):FTGetOut.Open(this.iMoney)),!0;if(this.btn_nowar.ProcTouch(t,e,i))return this.btn_nowar.bCheck()&&h.default.start(h.default.CONFIRM_NOWAR,"每天20:00:00~24:00:00之间可切换免战状态#e免战开启后，可免受其他战队的挑战(每天0点将扣除10万战队资金)#e是否确定切换免战状态？"),!0;if(this.iSwAdd>0&&this.btn_sw.ProcTouch(t,e,i))return this.btn_sw.bCheck()&&h.default.start(h.default.CONFIRM_SWADD,"每天18:00:00之前可领取当日战队声望奖励#e当前可领"+this.iSwAdd+"点战队声望，战队排名越靠前，每日可领取声望越多#e是否确定领取？"),!0}return this.btn_secret.ProcTouch(t,e,i)?(this.btn_secret.bCheck()&&f.default.gi().PushStat(f.default.GS_FTMIJING),!0):this.btn_dismiss.ProcTouch(t,e,i)?(this.btn_dismiss.bCheck()&&(0==m.default.mft.iFTJob?h.default.start(h.default.CONFIRM_FTDISMISS,"战队解散后，战队资金将消失#e是否确定解散战队？"):h.default.start(h.default.CONFIRM_FTDISMISS,"是否确定离开战队？")),!0):this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)}}]),FTFrame}();i.default=g,g.Open=function(t){var e;(e=f.default.gi().iXStat==f.default.GS_FTFRAME?f.default.gi().oCurrentView:f.default.gi().PushStat(f.default.GS_FTFRAME)).sName=t.GetNextString(),e.iRank=t.GetNextInt(),e.iMoney=t.GetNextInt(),e.iWin=t.GetNextInt(),e.iLost=t.GetNextInt(),e.iGiveup=t.GetNextInt(),e.iSw=t.GetNextInt(),e.iSwAdd=t.GetNextInt(),e.iRy=t.GetNextInt(),e.iNoWar=t.GetNextInt(),e.sLeader=t.GetNextString(),e.iRid=t.GetNextInt()}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/fteam/MyFT":140}],142:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../../engine/control/XInput")),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"));_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fteam/FTChallenge")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function FTGetOut(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FTGetOut);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FTGetOut.__proto__||Object.getPrototypeOf(FTGetOut)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=430,e.iH=160,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.in_money=new o.default(u.default.xani_ui),e.in_money.sDetail="0",e.in_money.bNumber=!0,e.in_money.iTextSize=20,e.in_money.iMaxNumber=2e7,e.in_money.iTextColor=4279324257,e.btn_ok=new r.default(u.default.xani_button),e.btn_ok.Move(e.iX+30+200+20,e.iY+30-5,150,60),e.btn_ok.InitButton("1号按钮150_60"),e.btn_ok.sName="取出",e.btn_close=new r.default(u.default.xani_button),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_close.InitButton("关闭按钮"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FTGetOut,s.default),a(FTGetOut,[{key:"Draw",value:function(){h.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),this.in_money.Move(this.iX+30,this.iY+30,200,50),h.default.frame_type4("8号框20_20",this.in_money.iX,this.in_money.iY,this.in_money.iW,this.in_money.iH,20,20),this.in_money.DrawText(),this.in_money.onscr(),d.default.gi().Format("#c000000说明：从战队资金中取出现金，战队剩余资金不能低于100万",this.iW-40,20),d.default.gi().Draw(this.iX+30,this.iY+30+50+10),this.btn_ok.Draw(),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.btn_ok.ProcTouch(t,e,i)){if(this.btn_ok.bCheck()&&this.in_money.sDetail.length>0){if((a=parseInt(this.in_money.sDetail))<=0)return c.default.easymsg.AddMessage("取出资金不能为0"),!0;l.default.gi().s_FTOperate(2,a,0),f.default.gi().PopStat(1)}return!0}return this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):(this.in_money.ProcTouch(t,e,i),!1)}}]),FTGetOut}();i.default=m,m.Open=function(t){(f.default.gi().iXStat==f.default.GS_FTGETOUT?f.default.gi().oCurrentView:f.default.gi().PushStat(f.default.GS_FTGETOUT)).in_money.iMaxNumber=t-1e6}},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/fteam/FTChallenge":138,"../../../../../engtst/mgm/gameing/me/GmMe":211}],143:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"))),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fteam/MyFT"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function FTMiJing(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FTMiJing);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FTMiJing.__proto__||Object.getPrototypeOf(FTMiJing)).call(this));e.pani=t,pm3f=t.pm3f,e.iW=500,e.iH=415,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_open=new Array(5);for(var i=0;i<3;i++)e.btn_open[i]=new o.default(u.default.xani_button),e.btn_open[i].InitButton("1号按钮90_60"),e.btn_open[i].sName="开启";return e.btn_close=new o.default(u.default.xani_button),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_close.InitButton("关闭按钮"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FTMiJing,r.default),a(FTMiJing,[{key:"Draw",value:function(){var t,e,i;d.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),pm3f.DrawText_2(this.iX+this.iW/2,this.iY+15,"战队秘境",4294896766,40,101,1,1,0,-2,0,2,4278261038),t=this.iX+20,e=this.iY+60,i=this.iW-40,d.default.frame_type4("2号框20_20",t,e,i,100,20,20),pm3f.DrawText_2(t+5,e+5,"封印之地1",4294896766,30,101,1,1,0,0,0,2,4278261038),pm3f.DrawTextEx(t+5,e+5+30,"进入条件：本战队成员且等级>=40",4294967295,20,101,1,1,0,0,0),pm3f.DrawTextEx(t+5,e+5+50,"消耗：100声望",4294967295,20,101,1,1,0,0,0),pm3f.DrawTextEx(t+5,e+5+70,"通关掉落：一级封印兽魂",4294967295,20,101,1,1,0,0,0),this.btn_open[0].Move(t+i-20-90,e+50-30,90,60),this.btn_open[0].Draw(),e+=105,d.default.frame_type4("2号框20_20",t,e,i,100,20,20),pm3f.DrawText_2(t+5,e+5,"封印之地2",4294896766,30,101,1,1,0,0,0,2,4278261038),pm3f.DrawTextEx(t+5,e+5+30,"进入条件：本战队成员且等级>=40",4294967295,20,101,1,1,0,0,0),pm3f.DrawTextEx(t+5,e+5+50,"消耗：200声望",4294967295,20,101,1,1,0,0,0),pm3f.DrawTextEx(t+5,e+5+70,"通关掉落：二级封印兽魂",4294967295,20,101,1,1,0,0,0),this.btn_open[1].Move(t+i-20-90,e+50-30,90,60),this.btn_open[1].Draw(),e+=105,d.default.frame_type4("2号框20_20",t,e,i,100,20,20),pm3f.DrawText_2(t+5,e+5,"封印之地3",4294896766,30,101,1,1,0,0,0,2,4278261038),pm3f.DrawTextEx(t+5,e+5+30,"进入条件：本战队成员且等级>=60",4294967295,20,101,1,1,0,0,0),pm3f.DrawTextEx(t+5,e+5+50,"消耗：400声望",4294967295,20,101,1,1,0,0,0),pm3f.DrawTextEx(t+5,e+5+70,"通关掉落：三级封印兽魂",4294967295,20,101,1,1,0,0,0),this.btn_open[2].Move(t+i-20-90,e+50-30,90,60),this.btn_open[2].Draw(),pm3f.DrawTextEx(t,this.iY+this.iH-40,"注：加入战队七天以上才能参与秘境",4279324257,20,101,1,1,0,0,0),this.btn_close.Draw(),h.default.end(h.default.CONFIRM_FTMJ1)&&h.default.bConfirm&&(l.default.gi().s_FTOperate(7,1,0),f.default.gi().PopStat(2)),h.default.end(h.default.CONFIRM_FTMJ2)&&h.default.bConfirm&&(l.default.gi().s_FTOperate(7,2,0),f.default.gi().PopStat(2)),h.default.end(h.default.CONFIRM_FTMJ3)&&h.default.bConfirm&&(l.default.gi().s_FTOperate(7,3,0),f.default.gi().PopStat(2))}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<3;a++)this.btn_open[a].ProcTouch(t,e,i)&&this.btn_open[a].bCheck()&&(0==m.default.mft.iFTJob?h.default.start(h.default.CONFIRM_FTMJ1+a,"战队秘境开启后只能持续一小时，未完成计算为失败，是否确定开启？"):c.default.easymsg.AddMessage("队长才能开启秘境"));return this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)}}]),FTMiJing}();i.default=g,g.Open=function(){f.default.gi().iXStat==f.default.GS_FTMIJING?f.default.gi().oCurrentView:f.default.gi().PushStat(f.default.GS_FTMIJING)}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/fteam/MyFT":140}],144:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../../engine/control/XInput")),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),m=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fteam/FTChallenge")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function FTPutIn(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FTPutIn);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FTPutIn.__proto__||Object.getPrototypeOf(FTPutIn)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=430,e.iH=160,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.in_money=new o.default(u.default.xani_ui),e.in_money.sDetail="0",e.in_money.bNumber=!0,e.in_money.iTextSize=20,e.in_money.iMaxNumber=2e7,e.in_money.iTextColor=4279324257,e.btn_ok=new r.default(u.default.xani_button),e.btn_ok.Move(e.iX+30+200+20,e.iY+30-5,150,60),e.btn_ok.InitButton("1号按钮150_60"),e.btn_ok.sName="存入",e.btn_close=new r.default(u.default.xani_button),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_close.InitButton("关闭按钮"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FTPutIn,s.default),a(FTPutIn,[{key:"Draw",value:function(){h.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),this.in_money.Move(this.iX+30,this.iY+30,200,50),h.default.frame_type4("8号框20_20",this.in_money.iX,this.in_money.iY,this.in_money.iW,this.in_money.iH,20,20),this.in_money.DrawText(),this.in_money.onscr(),d.default.gi().Format("#c000000说明：将你的现金存入到战队资金，战队资金总额最高不能超过2000万",this.iW-40,20),d.default.gi().Draw(this.iX+30,this.iY+30+50+10),this.btn_ok.Draw(),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.btn_ok.ProcTouch(t,e,i)){if(this.btn_ok.bCheck()&&this.in_money.sDetail.length>0){if((a=parseInt(this.in_money.sDetail))<=0)return c.default.easymsg.AddMessage("存入资金不能为0"),!0;if(a>m.default.me.rbs.iMoney)return c.default.easymsg.AddMessage("存入资金不能超过上限"),!0;l.default.gi().s_FTOperate(1,a,0),f.default.gi().PopStat(1)}return!0}return this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):(this.in_money.ProcTouch(t,e,i),!1)}}]),FTPutIn}();i.default=g,g.Open=function(t){var e;(e=f.default.gi().iXStat==f.default.GS_FTPUTIN?f.default.gi().oCurrentView:f.default.gi().PushStat(f.default.GS_FTPUTIN)).in_money.iMaxNumber=2e7-t,e.in_money.iMaxNumber>m.default.me.rbs.iMoney&&(e.in_money.iMaxNumber=m.default.me.rbs.iMoney)}},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/fteam/FTChallenge":138,"../../../../../engtst/mgm/gameing/me/GmMe":211}],145:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/UIList"));_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function _FTAGREE(){_classCallCheck(this,_FTAGREE)},m=function(t){function FTAgree(t){_classCallCheck(this,FTAgree);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FTAgree.__proto__||Object.getPrototypeOf(FTAgree)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=560,e.iH=640,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_refuse=new o.default(u.default.xani_button),e.btn_refuse.Move(e.iX+30,e.iY+e.iH-30-60,150,60),e.btn_refuse.InitButton("1号按钮150_60"),e.btn_refuse.sName="拒绝",e.btn_agree=new o.default(u.default.xani_button),e.btn_agree.Move(e.iX+e.iW/2-75,e.iY+e.iH-30-60,150,60),e.btn_agree.InitButton("1号按钮150_60"),e.btn_agree.sName="同意",e.btn_watch=new o.default(u.default.xani_button),e.btn_watch.Move(e.iX+e.iW-30-150,e.iY+e.iH-30-60,150,60),e.btn_watch.InitButton("1号按钮150_60"),e.btn_watch.sName="查看",e.btn_close=new o.default(u.default.xani_button),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_close.InitButton("关闭按钮"),e.ui_mlist=new d.default(0,4,500,450),e.ui_mlist.SetTitle(0,"序号",80,!1),e.ui_mlist.SetTitle(1,"名字",200,!1),e.ui_mlist.SetTitle(2,"等级",80,!1),e.ui_mlist.SetTitle(3,"是否在线",140,!1),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FTAgree,r.default),a(FTAgree,[{key:"Draw",value:function(){var t;for(h.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+30+25,"申请列表",4294896766,36,101,1,1,0,-2,-2,2,4278261038),this.ui_mlist.BeginDraw(this.iX+30,this.iY+30+50),t=0;t<this.iAppCount;t++)this.ui_mlist.DrawUnit(0,t,""+(t+1)),this.ui_mlist.DrawUnit(1,t,this.applist[t].name),this.ui_mlist.DrawUnit(2,t,""+this.applist[t].lev),0!=this.applist[t].online&&this.ui_mlist.DrawUnit(3,t,"在线");this.ui_mlist.FinishDraw(),this.iPoint>=0&&this.iPoint<this.iAppCount&&(this.btn_agree.Draw(),this.btn_refuse.Draw(),this.btn_watch.Draw()),this.btn_close.Draw(),this.iPoint=this.ui_mlist.iLockPoint}},{key:"ProcTouch",value:function(t,e,i){if(this.ui_mlist.ProcTouch(t,e,i))return!0;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0;if(this.iPoint>=0&&this.iPoint<this.iAppCount){if(this.btn_agree.ProcTouch(t,e,i))return this.btn_agree.bCheck()&&(l.default.gi().s_FTAgree(0,this.applist[this.iPoint].rid),f.default.gi().PopStat(1),f.default.gi().PushStat(f.default.GS_LOADING1)),!0;if(this.btn_refuse.ProcTouch(t,e,i))return this.btn_refuse.bCheck()&&(l.default.gi().s_FTAgree(1,this.applist[this.iPoint].rid),f.default.gi().PopStat(1),f.default.gi().PushStat(f.default.GS_LOADING1)),!0;if(this.btn_watch.ProcTouch(t,e,i))return this.btn_watch.bCheck()&&l.default.gi().s_WatchOn(0,this.applist[this.iPoint].rid,0,""),!0}return!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)}}]),FTAgree}();i.default=m,m.Open=function(t){var e,i;if(f.default.gi().iXStat==f.default.GS_LOADING1&&f.default.gi().PopStat(1),f.default.gi().iXStat==f.default.GS_FTAGREE)i=f.default.gi().oCurrentView;else for((i=f.default.gi().PushStat(f.default.GS_FTAGREE)).applist=new Array(10),e=0;e<10;e++)i.applist[e]=new c;for(i.iAppCount=t.GetNextInt(),e=0;e<i.iAppCount;e++)i.applist[e].rid=t.GetNextInt(),i.applist[e].online=t.GetNextByte(),i.applist[e].name=t.GetNextString(),i.applist[e].lev=t.GetNextInt();i.iPoint=-1}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/UIList":80,"../../../../../engtst/mgm/frame/message/EasyMessage":86}],146:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/UIList")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m=function _FTAPPLIST(){_classCallCheck(this,_FTAPPLIST)},g=function(t){function FTApply(t){_classCallCheck(this,FTApply);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FTApply.__proto__||Object.getPrototypeOf(FTApply)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=560,e.iH=640,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_pageup=new o.default(u.default.xani_button),e.btn_pageup.Move(e.iX+30,e.iY+e.iH-30-60,120,60),e.btn_pageup.InitButton("1号按钮120_60"),e.btn_pageup.sName="上一页",e.btn_pagedown=new o.default(u.default.xani_button),e.btn_pagedown.Move(e.iX+e.iW-30-120,e.iY+e.iH-30-60,120,60),e.btn_pagedown.InitButton("1号按钮120_60"),e.btn_pagedown.sName="下一页",e.btn_apply=new o.default(u.default.xani_button),e.btn_apply.Move(e.iX+e.iW/2-60,e.iY+e.iH-30-60,120,60),e.btn_apply.InitButton("1号按钮120_60"),e.btn_apply.sName="申请",e.btn_close=new o.default(u.default.xani_button),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_close.InitButton("关闭按钮"),e.ui_mlist=new d.default(0,3,500,450),e.ui_mlist.SetTitle(0,"序号",100,!1),e.ui_mlist.SetTitle(1,"战队名称",200,!1),e.ui_mlist.SetTitle(2,"队长",200,!1),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FTApply,r.default),a(FTApply,[{key:"Draw",value:function(){var t;for(h.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+30+25,"申请加入战队",4294896766,36,101,1,1,0,-2,-2,2,4278261038),this.ui_mlist.BeginDraw(this.iX+30,this.iY+30+50),t=0;t<this.iFtCount;t++)this.ui_mlist.DrawUnit(0,t,""+(10*this.iPage+1+t)),this.ui_mlist.DrawUnit(1,t,this.ftlist[t].name),this.ui_mlist.DrawUnit(2,t,this.ftlist[t].header);this.ui_mlist.FinishDraw(),this.iPoint=this.ui_mlist.iLockPoint,this.iPoint>=0&&this.iPoint<this.iFtCount&&this.btn_apply.Draw(),this.btn_pageup.Draw(),this.btn_pagedown.Draw(),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){return!!this.ui_mlist.ProcTouch(t,e,i)||(this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):this.iPoint>=0&&this.iPoint<this.iFtCount&&this.btn_apply.ProcTouch(t,e,i)?(this.btn_apply.bCheck()&&l.default.gi().s_ApplyFT(this.ftlist[this.iPoint].fid),!0):this.btn_pageup.ProcTouch(t,e,i)?(this.btn_pageup.bCheck()&&(this.iPage>0?(this.iPage--,l.default.gi().s_SeverEvent(18,2,this.iPage,0,0)):c.default.easymsg.AddMessage("已到首页")),!0):this.btn_pagedown.ProcTouch(t,e,i)?(this.btn_pagedown.bCheck()&&(this.iFtCount>=10?(this.iPage++,l.default.gi().s_SeverEvent(18,2,this.iPage,0,0)):c.default.easymsg.AddMessage("已到末页")),!0):!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))}}]),FTApply}();i.default=g,g.Open=function(t){var e,i;if(f.default.gi().iXStat==f.default.GS_FTAPPLY)i=f.default.gi().oCurrentView;else for((i=f.default.gi().PushStat(f.default.GS_FTAPPLY)).ftlist=new Array(10),e=0;e<10;e++)i.ftlist[e]=new m;for(i.iPage=t.GetNextShort(),i.iFtCount=t.GetNextByte(),e=0;e<i.iFtCount;e++)i.ftlist[e].fid=t.GetNextInt(),i.ftlist[e].rank=t.GetNextInt(),i.ftlist[e].name=t.GetNextString(),i.ftlist[e].header=t.GetNextString();i.iPoint=-1}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/UIList":80,"../../../../../engtst/mgm/frame/message/EasyMessage":86}],147:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/UIList")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send")),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fteam/MyFT"));_interopRequireDefault(t("../../../../../engtst/mgm/gameing/gov/MyGov"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=function _FTMEMBER(){_classCallCheck(this,_FTMEMBER)},b=function(t){function FTMember(t){_classCallCheck(this,FTMember);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FTMember.__proto__||Object.getPrototypeOf(FTMember)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=660,e.iH=640,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_watch=new o.default(u.default.xani_button),e.btn_watch.Move(e.iX+30,e.iY+e.iH-30-60,90,60),e.btn_watch.InitButton("1号按钮90_60"),e.btn_watch.sName="查看",e.btn_tranfer=new o.default(u.default.xani_button),e.btn_tranfer.Move(e.iX+30+110,e.iY+e.iH-30-60,90,60),e.btn_tranfer.InitButton("1号按钮90_60"),e.btn_tranfer.sName="转让",e.btn_kick=new o.default(u.default.xani_button),e.btn_kick.Move(e.iX+30+220,e.iY+e.iH-30-60,90,60),e.btn_kick.InitButton("1号按钮90_60"),e.btn_kick.sName="踢出",e.btn_agree=new o.default(u.default.xani_button),e.btn_agree.Move(e.iX+e.iW-30-90-20-150,e.iY+e.iH-30-60,150,60),e.btn_agree.InitButton("1号按钮150_60"),e.btn_agree.sName="申请列表",e.btn_message=new o.default(u.default.xani_button),e.btn_message.Move(e.iX+e.iW-30-90,e.iY+e.iH-30-60,90,60),e.btn_message.InitButton("1号按钮90_60"),e.btn_message.sName="群邮",e.btn_close=new o.default(u.default.xani_button),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_close.InitButton("关闭按钮"),e.ui_mlist=new c.default(0,5,600,450),e.ui_mlist.SetTitle(0,"序号",80,!1),e.ui_mlist.SetTitle(1,"名字",200,!1),e.ui_mlist.SetTitle(2,"贡献",120,!1),e.ui_mlist.SetTitle(3,"职位",80,!1),e.ui_mlist.SetTitle(4,"是否在线",120,!1),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FTMember,r.default),a(FTMember,[{key:"Draw",value:function(){var t;for(d.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+30+25,"战队成员",4294896766,36,101,1,1,0,-2,-2,2,4278261038),this.ui_mlist.BeginDraw(this.iX+30,this.iY+30+50),t=0;t<this.iMemberCount;t++)this.ui_mlist.DrawUnit(0,t,""+(t+1)),this.ui_mlist.DrawUnit(1,t,this.ftmember[t].name),this.ui_mlist.DrawUnit(2,t,this.ftmember[t].tick+"/"+this.ftmember[t].maxtick),0!=this.ftmember[t].online&&this.ui_mlist.DrawUnit(4,t,"在线"),0==this.ftmember[t].job?this.ui_mlist.DrawUnit(3,t,"队长"):1==this.ftmember[t].job?this.ui_mlist.DrawUnit(3,t,"副队长"):this.ui_mlist.DrawUnit(3,t,"队员");this.ui_mlist.FinishDraw(),this.btn_close.Draw(),this.iPoint=this.ui_mlist.iLockPoint,this.iPoint>=0&&this.iPoint<this.iMemberCount&&this.btn_watch.Draw(),this.btn_message.Draw(),_.default.mft.iFTid>0&&0==_.default.mft.iFTJob&&(this.iPoint>0&&this.iPoint<this.iMemberCount&&(this.btn_kick.Draw(),this.btn_tranfer.Draw()),this.btn_agree.Draw(),h.default.end(h.default.CONFIRM_FTKICK)&&h.default.bConfirm&&this.iPoint>=0&&this.iPoint<this.iMemberCount&&l.default.gi().s_FTOperate(6,this.ftmember[this.iPoint].rid,0),h.default.end(h.default.CONFIRM_FTTRANFER)&&h.default.bConfirm&&this.iPoint>=0&&this.iPoint<this.iMemberCount&&(l.default.gi().s_FTOperate(9,this.ftmember[this.iPoint].rid,0),f.default.gi().PopStat(1)))}},{key:"ProcTouch",value:function(t,e,i){if(this.ui_mlist.ProcTouch(t,e,i))return!0;if(_.default.mft.iFTid>0&&0==_.default.mft.iFTJob){if(this.btn_agree.ProcTouch(t,e,i))return this.btn_agree.bCheck()&&(f.default.gi().PopStat(1),l.default.gi().s_GetApply(0)),!0;if(this.iPoint>=0&&this.iPoint<this.iMemberCount){if(this.btn_kick.ProcTouch(t,e,i))return this.btn_kick.bCheck()&&h.default.start(h.default.CONFIRM_FTKICK,"是否确定将"+this.ftmember[this.iPoint].name+"("+this.ftmember[this.iPoint].rid+")踢出战队？"),!0;if(this.btn_tranfer.ProcTouch(t,e,i))return this.btn_tranfer.bCheck()&&h.default.start(h.default.CONFIRM_FTTRANFER,"是否确定将战队转让给"+this.ftmember[this.iPoint].name+"("+this.ftmember[this.iPoint].rid+")？(转让战队需要扣除20万战队资金)"),!0}}return this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):this.iPoint>=0&&this.iPoint<this.iMemberCount&&this.btn_watch.ProcTouch(t,e,i)?(this.btn_watch.bCheck()&&l.default.gi().s_WatchOn(0,this.ftmember[this.iPoint].rid,0,""),!0):(this.btn_message.ProcTouch(t,e,i)&&this.btn_message.bCheck()&&(g.default.OpenChat(10001,"战队群邮",6),m.default.easymsg.AddMessage("发送收取1万现金")),!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))}}]),FTMember}();i.default=b,b.Open=function(t){var e,i;if(f.default.gi().iXStat==f.default.GS_FTMEMBER)i=f.default.gi().oCurrentView;else for((i=f.default.gi().PushStat(f.default.GS_FTMEMBER)).ftmember=new Array(10),e=0;e<10;e++)i.ftmember[e]=new p;for(i.iMemberCount=t.GetNextByte(),e=0;e<i.iMemberCount;e++)i.ftmember[e].rid=t.GetNextInt(),i.ftmember[e].online=t.GetNextByte(),i.ftmember[e].name=t.GetNextString(),i.ftmember[e].job=t.GetNextInt(),i.ftmember[e].tick=t.GetNextInt(),i.ftmember[e].maxtick=t.GetNextInt();i.iPoint=-1}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/UIList":80,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../../../engtst/mgm/gameing/fteam/MyFT":140,"../../../../../engtst/mgm/gameing/gov/MyGov":160}],148:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=(_interopRequireDefault(t("../../../../config/XDefine")),_interopRequireDefault(t("../../../../engine/BaseClass"))),r=_interopRequireDefault(t("../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),u=(_interopRequireDefault(t("../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/UIList")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function ApplyFuBen(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ApplyFuBen);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ApplyFuBen.__proto__||Object.getPrototypeOf(ApplyFuBen)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=950,i.iH=610,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new r.default(l.default.xani_button),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.fblist=new Array(10),e=0;e<10;e++)i.fblist[e]=new Object;return i.iCount=0,i.btn_apply=new o.default(l.default.xani_button),i.btn_apply.InitButton("1号按钮150_60"),i.btn_apply.Move(i.iX+i.iW-40-150,i.iY+i.iH-40-60,150,60),i.btn_apply.sName="申 请",i.btn_up=new o.default(l.default.xani_button),i.btn_up.InitButton("1号按钮150_60"),i.btn_up.Move(i.iX+50,i.iY+i.iH-40-60,150,60),i.btn_up.sName="上一页",i.btn_down=new o.default(l.default.xani_button),i.btn_down.InitButton("1号按钮150_60"),i.btn_down.Move(i.iX+50+520-150,i.iY+i.iH-40-60,150,60),i.btn_down.sName="下一页",i.ui_fblist=new c.default(0,4,520,450),i.ui_fblist.SetTitle(0,"副本名",100,!1),i.ui_fblist.SetTitle(1,"团长",200,!1),i.ui_fblist.SetTitle(2,"团长等级",120,!1),i.ui_fblist.SetTitle(3,"状态",100,!1),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ApplyFuBen,s.default),a(ApplyFuBen,[{key:"Draw",value:function(){var t;for(d.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"加","入","副","本"),d.default.new_framein(this.iX+25,this.iY+25,this.iW-50,this.iH-50),this.btn_close.Draw(),this.ui_fblist.BeginDraw(this.iX+50,this.iY+50),t=0;t<10;t++)t>=this.iCount||(this.ui_fblist.DrawUnit(0,t,l.default.de_fuben.strValue(this.fblist[t].iType,0,1)),this.ui_fblist.DrawUnit(1,t,this.fblist[t].sName),this.ui_fblist.DrawUnit(2,t,""+this.fblist[t].iLev),this.ui_fblist.DrawUnit(3,t,"招募中"));this.ui_fblist.FinishDraw(),u.default.gi().DrawText_2(this.iX+50+260,this.iY+this.iH-40-30,this.iPage+1+" / "+this.iTotalPage,4294959264,20,101,1,1,0,-2,-2,3,4278190080),this.btn_up.Draw(),this.btn_down.Draw(),this.ui_fblist.iLockPoint>=0&&this.ui_fblist.iLockPoint<this.iCount&&(d.default.ui3_Text1(this.iX+590,this.iY+50,100,220,"副本名",l.default.de_fuben.strValue(this.fblist[this.ui_fblist.iLockPoint].iType,0,1)),d.default.ui3_Text1(this.iX+590,this.iY+50+35,100,220,"团长",this.fblist[this.ui_fblist.iLockPoint].sName),d.default.ui3_Text1(this.iX+590,this.iY+50+70,100,220,"团长号码",this.fblist[this.ui_fblist.iLockPoint].iRid+"("+(0==this.fblist[this.ui_fblist.iLockPoint].iOnLine?"离线":"在线")+")"),d.default.ui3_Text1(this.iX+590,this.iY+50+105,100,220,"人数限制",l.default.de_fuben.strValue(this.fblist[this.ui_fblist.iLockPoint].iType,0,3)+"~"+l.default.de_fuben.strValue(this.fblist[this.ui_fblist.iLockPoint].iType,0,4)),d.default.ui3_Text1(this.iX+590,this.iY+50+140,100,220,"等级限制",l.default.de_fuben.strValue(this.fblist[this.ui_fblist.iLockPoint].iType,0,5)+"~"+l.default.de_fuben.strValue(this.fblist[this.ui_fblist.iLockPoint].iType,0,6)),d.default.ui3_Text1(this.iX+590,this.iY+50+175,100,220,"创建时间",l.default.de_fuben.strValue(this.fblist[this.ui_fblist.iLockPoint].iType,0,5)+"~"+l.default.de_fuben.strValue(this.fblist[this.ui_fblist.iLockPoint].iType,0,6)),u.default.gi().DrawText_2(this.iX+590,this.iY+50+210+5,"团队简介:",4294959264,28,101,1,1,0,0,0,3,4278190080),d.default.frame_type4("2号框20_20",this.iX+590,this.iY+50+245,320,205,20,20),m.default.gi().Format(this.fblist[this.ui_fblist.iLockPoint].sDetail,300,20),m.default.gi().Draw(this.iX+600,this.iY+50+245+10),this.btn_apply.Draw())}},{key:"ProcTouch",value:function(t,e,i){return!!this.ui_fblist.ProcTouch(t,e,i)||(this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0):(this.btn_apply.ProcTouch(t,e,i)&&this.btn_apply.bCheck()&&f.default.gi().s_ApplyFuBen(this.fblist[this.ui_fblist.iLockPoint].iFid),this.btn_up.ProcTouch(t,e,i)&&this.btn_up.bCheck()&&this.iPage>0&&(this.iPage--,f.default.gi().s_FuBen(2,this.iPage),h.default.gi().PushStat(h.default.GS_LOADING1)),this.btn_down.ProcTouch(t,e,i)&&this.btn_down.bCheck()&&this.iPage<this.iTotalPage-1&&(this.iPage++,f.default.gi().s_FuBen(2,this.iPage),h.default.gi().PushStat(h.default.GS_LOADING1)),!1))}}]),ApplyFuBen}();i.default=g},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XInput":18,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/UIList":80,"../../../../engtst/mgm/frame/format/FormatString":81}],149:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),u=_interopRequireDefault(t("../../../../engine/control/XInput")),l=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString"));_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function CreateFuBen(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,CreateFuBen);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(CreateFuBen.__proto__||Object.getPrototypeOf(CreateFuBen)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=800,i.iH=480,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new r.default(f.default.xani_ui3),i.btn_close.InitButton("统一关闭按钮"),i.btn_close.Move(i.iX+748,i.iY,60,60),i.ifblist=new Int32Array(16),i.btn_fuben=new Array(8),e=0;e<8;e++)i.btn_fuben[e]=new r.default(f.default.xani_ui3),i.btn_fuben[e].InitButton("统一按钮2"),i.btn_fuben[e].Move(i.iX+60,i.iY+40+50*e,128,32),i.btn_fuben[e].iNameSize=20;return i.iPoint=0,i.btn_create=new o.default(f.default.xani_ui3),i.btn_create.InitButton("统一按钮1"),i.btn_create.Move(i.iX+620,i.iY+390,117,40),i.btn_create.sName="创 建",i.btn_detail=new o.default(f.default.xani_ui3),i.btn_detail.InitButton("统一按钮1"),i.btn_detail.Move(i.iX+620,i.iY+310,117,40),i.btn_detail.sName="修改简介",i.btn_detail.iNameSize=25,i.sDetail="无",i.in_detail=new u.default(f.default.xani_frame),i.in_detail.Move(n.default.SCRW,n.default.SCRH,10,10),i.in_detail.sDetail="",i.bEditingName=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(CreateFuBen,s.default),a(CreateFuBen,[{key:"Draw",value:function(){var t;for(c.default.ui3_BaseFrame4(this.iX,this.iY,"创","建","副","本"),this.btn_close.Draw(),t=0;t<this.iCount;t++)this.iPoint==t&&f.default.xani_ui3.DrawAnimaEx(this.iX+45,this.iY+30+50*t+5,"选中背景",0,101,.9,.71,0,0,0),this.btn_fuben[t].sName=f.default.de_fuben.strValue(this.ifblist[t],0,1),this.btn_fuben[t].Draw();f.default.xani_ui3.DrawAnima(this.iX+200,this.iY,"大框分割线",0),c.default.ui3_Frame2(this.iX+230,this.iY+40,500,120),m.default.gi().Format(f.default.de_fuben.strValue(this.ifblist[this.iPoint],0,2),480,20),m.default.gi().Draw(this.iX+230+10,this.iY+40+10),c.default.ui3_Text1(this.iX+230,this.iY+180,100,130,"人数限制",f.default.de_fuben.strValue(this.ifblist[this.iPoint],0,3)+"~"+f.default.de_fuben.strValue(this.ifblist[this.iPoint],0,4)),c.default.ui3_Text1(this.iX+230+270,this.iY+180,100,130,"等级限制",f.default.de_fuben.strValue(this.ifblist[this.iPoint],0,5)+"~"+f.default.de_fuben.strValue(this.ifblist[this.iPoint],0,6)),c.default.ui3_Text1(this.iX+230,this.iY+180+50,100,130,"创建花费",f.default.de_fuben.strValue(this.ifblist[this.iPoint],0,8)+"金钱"),l.default.gi().DrawText_2(this.iX+230,this.iY+180+100,"团队简介:",4294959264,20,101,1,1,0,0,0,3,4278190080),c.default.ui3_Frame2(this.iX+230,this.iY+180+100+30,350,120),m.default.gi().Format(this.sDetail,330,20),m.default.gi().Draw(this.iX+230+10,this.iY+180+100+30+10),this.btn_detail.Draw(),this.btn_create.Draw(),this.bEditingName&&(this.in_detail.onscr(),this.sDetail=this.in_detail.sDetail,this.in_detail.bFinished&&(this.bEditingName=!1,this.in_detail.bFinished=!1))}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<this.iCount;a++)if(this.btn_fuben[a].ProcTouch(t,e,i))return this.btn_fuben[a].bCheck()&&(this.iPoint=a),!0;return this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&d.default.gi().PopStat(1),!0):(this.btn_create.ProcTouch(t,e,i)&&this.btn_create.bCheck()&&(h.default.gi().s_CreateFuBen(this.ifblist[this.iPoint],this.sDetail),d.default.gi().PopStat(1)),this.btn_detail.ProcTouch(t,e,i)&&this.btn_detail.bCheck()&&(this.in_detail.Move(this.btn_detail.iX,this.btn_detail.iY,this.btn_detail.iW,this.btn_detail.iH),this.in_detail.sDetail=this.sDetail,this.in_detail.OpenInput(),this.in_detail.ProcTouch(3,n.default.SCRW+1,n.default.SCRH+1),this.bEditingName=!0),!1)}}]),CreateFuBen}();i.default=g},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XInput":18,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/me/pet/MyPets":245}],150:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../zero/Interface/GameVersion")),_interopRequireDefault(t("../../../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../../../config/GmConfig"))),s=(_interopRequireDefault(t("../../../../config/XDefine")),_interopRequireDefault(t("../../../../engine/BaseClass"))),r=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),o=(_interopRequireDefault(t("../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),u=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),d=(_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"))),c=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _=function _SHOPGOODS(){_classCallCheck(this,_SHOPGOODS)},p=function(t){function FubenMall(t){_classCallCheck(this,FubenMall);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FubenMall.__proto__||Object.getPrototypeOf(FubenMall)).call(this));for(i.sTitle="",i.pani=t,i.pm3f=t.pm3f,i.iW=800,i.iH=405,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new r.default(u.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.sgs=new Array(20),e=0;e<20;e++)i.sgs[e]=new _;for(i.btn_buy=new r.default(u.default.xani_nui2),i.btn_buy.InitButton("按钮1_110"),i.btn_buy.sName="兑换",i.goods=new Array(20),e=0;e<20;e++)i.goods[e]=new m.default,i.goods[e].iPos=e;return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FubenMall,s.default),a(FubenMall,[{key:"Draw_0",value:function(){var t,e;t=this.iX+30,e=this.iY+30,g.default.new_DrawGoods(t,e,this.goods,null,null),o.default.gi().DrawTextEx(t+430+20,e+10,"拥有:"+c.default.me.iFlag[25]+"积分",4278206039,30,101,1,1,0,0,0),null!=this.lockgoods&&(o.default.gi().DrawTextEx(t+430+20,e+10+50,"名称:"+u.default.de_goods.strValue(this.lockgoods.iTid,0,4),4278206039,30,101,1,1,0,0,0),o.default.gi().DrawTextEx(t+430+20,e+10+100,"数量:1",4278206039,30,101,1,1,0,0,0),o.default.gi().DrawTextEx(t+430+20,e+10+150,"价格:"+this.sgs[this.lockgoods.iPos].iPrice+"积分",4278206039,30,101,1,1,0,0,0),this.btn_buy.Move(this.iX+this.iW-110-30,this.iY+this.iH-30-52,110,52),this.btn_buy.Draw(),g.default.new_DrawRect(t,e,this.goods,this.lockgoods,0)),g.default.bShowDetail()&&g.default.new_DrawDetail(null,-1,-1,0)}},{key:"Draw",value:function(){h.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),this.btn_close.Draw(),this.Draw_0()}},{key:"ProcTouch",value:function(t,e,i){return this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):(a=this.iX+30,n=this.iY+30,null!=this.lockgoods&&this.btn_buy.ProcTouch(t,e,i)?(this.btn_buy.bCheck()&&(c.default.me.iFlag[25]<this.sgs[this.lockgoods.iPos].iPrice?d.default.easymsg.AddMessage("积分不足"):(l.default.gi().s_FubenMallBuy(this.sgs[this.lockgoods.iPos].iFlag,this.sgs[this.lockgoods.iPos].iTid,this.sgs[this.lockgoods.iPos].iPrice),f.default.gi().PushStat(f.default.GS_LOADING1))),!0):(this.lockgoods=g.default.new_LockGoods(e,i,a,n,this.goods,t),g.default.NoMove(),!1));var a,n}}]),FubenMall}();i.default=p,p.OPEN=function(t){var e,i;f.default.gi().iXStat!=f.default.GS_FUBENMALL&&f.default.gi().PushStat(f.default.GS_FUBENMALL);var a=f.default.gi().LastStat(0);if(a.iShopId=t.GetNextInt(),a.sShopName=t.GetNextString(),0==a.iShopId){for(e=0;e<20;e++)a.goods[e].iGid=-1;for(e=0;a.sgs[e].iFlag=t.GetNextInt(),-1!=a.sgs[e].iFlag;){for(a.sgs[e].iTid=t.GetNextInt(),a.sgs[e].iPrice=t.GetNextInt(),a.sgs[e].iCount=1,a.goods[e].iGid=1,a.goods[e].iTid=a.sgs[e].iTid,a.goods[e].iCount=a.sgs[e].iCount,i=0;i<8;i++)a.goods[e].iAtts[i]=0;u.default.xani_ngoods.InitAnimaWithName(u.default.de_goods.strValue(a.goods[e].iTid,-1,10),a.goods[e].aa),e++}a.iSgCount=e,a.lockgoods=null,a.sTitle=t.GetNextString()}else f.default.gi().PopStat(1)}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XButtonEx2":16,"../../../../engine/control/XInput":18,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../zero/Interface/GameVersion":317,"../../../../zero/Interface/PublicInterface":318}],151:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButton")),u=_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),l=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),_=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=function _FUBENMEMBER(){_classCallCheck(this,_FUBENMEMBER)},b=function(t){function ManageFuBen(t){_classCallCheck(this,ManageFuBen);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ManageFuBen.__proto__||Object.getPrototypeOf(ManageFuBen)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=880,i.iH=550,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new o.default(f.default.xani_button),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.fuben=new Object,i.members=new Array(128),i.applyers=new Array(128),e=0;e<128;e++)i.members[e]=new p,i.applyers[e]=new p;return i.btn_leave=new u.default(f.default.xani_button),i.btn_leave.InitButton("1号按钮150_60"),i.btn_leave.Move(i.iX+i.iW-40-320,i.iY+i.iH-40-60,150,60),i.btn_leave.sName="离开团队",i.btn_start=new u.default(f.default.xani_button),i.btn_start.InitButton("1号按钮150_60"),i.btn_start.Move(i.iX+i.iW-40-150,i.iY+i.iH-40-60,150,60),i.btn_start.sName="开始副本",i.btn_watch=new u.default(f.default.xani_button),i.btn_watch.InitButton("1号按钮120_60"),i.btn_watch.sName="查看",i.btn_agree=new u.default(f.default.xani_button),i.btn_agree.InitButton("1号按钮120_60"),i.btn_agree.sName="同意",i.btn_refuse=new u.default(f.default.xani_button),i.btn_refuse.InitButton("1号按钮120_60"),i.btn_refuse.sName="拒绝",i.btn_kick=new u.default(f.default.xani_button),i.btn_kick.InitButton("1号按钮120_60"),i.btn_kick.sName="踢出",i.iSelectPoint=-1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ManageFuBen,r.default),a(ManageFuBen,[{key:"Draw",value:function(){var t,e,i;for(m.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"管","理","副","本"),this.btn_close.Draw(),m.default.new_framein(this.iX+25,this.iY+25,this.iW-50,this.iH-50),e=this.iX+50,i=this.iY+40,l.default.gi().DrawText_2(e+105,i,"申请列表",4294896766,28,101,1,1,0,-2,0,3,4278261038),m.default.frame_type4("2号框20_20",e,i+30,210,360,20,20),this.iSelectPoint>=0&&0==this.iSelectPage&&m.default.frame_type1("12号框20_30",e+5,i+50+20*this.iSelectPoint-15,200,20),t=0;t<this.iApplyCount;t++)l.default.gi().DrawText_2(e+10,i+50+20*t,this.applyers[t].sName,4294967295,20,101,1,1,0,0,-2,0,4278190080),1==this.applyers[t].iOnLine&&l.default.gi().DrawText_2(e+200,i+50+20*t,"在线",4294959264,20,101,1,1,0,-3,-2,3,4278190080);for(e=this.iX+60+210+20,i=this.iY+40,l.default.gi().DrawText_2(e+105,i,"团队成员",4294896766,28,101,1,1,0,-2,0,3,4278261038),m.default.frame_type4("2号框20_20",e,i+30,210,360,20,20),this.iSelectPoint>=0&&1==this.iSelectPage&&m.default.frame_type1("12号框20_30",e+5,i+50+20*this.iSelectPoint-15,200,20),t=0;t<this.iMemberCount;t++)l.default.gi().DrawText_2(e+10,i+50+20*t,this.members[t].sName,4294967295,20,101,1,1,0,0,-2,0,4278190080),1==this.members[t].iOnLine&&this.pm3f.DrawText_2(e+200,i+50+20*t,"在线",4294959264,20,101,1,1,0,-3,-2,3,4278190080);m.default.ui3_Text1(this.iX+520,this.iY+70,100,220,"副本名",f.default.de_fuben.strValue(this.fuben.iType,0,1)),m.default.ui3_Text1(this.iX+520,this.iY+70+35,100,220,"团长",this.fuben.sName),m.default.ui3_Text1(this.iX+520,this.iY+70+70,100,220,"团长号码",this.fuben.iRid+"("+(0==this.fuben.iOnLine?"离线":"在线")+")"),m.default.ui3_Text1(this.iX+520,this.iY+70+105,100,220,"人数限制",f.default.de_fuben.strValue(this.fuben.iType,0,3)+"~"+f.default.de_fuben.strValue(this.fuben.iType,0,4)),m.default.ui3_Text1(this.iX+520,this.iY+70+140,100,220,"等级限制",f.default.de_fuben.strValue(this.fuben.iType,0,5)+"~"+f.default.de_fuben.strValue(this.fuben.iType,0,6)),m.default.ui3_Text1(this.iX+520,this.iY+70+175,100,220,"创建时间",this.fuben.tm),l.default.gi().DrawText_2(this.iX+520,this.iY+70+210+5,"团队简介:",4294896766,28,101,1,1,0,0,0,3,4278261038),m.default.frame_type4("2号框20_20",this.iX+520,this.iY+70+245,320,115,20,20),g.default.gi().Format(this.fuben.sDetail,300,20),g.default.gi().Draw(this.iX+530,this.iY+70+245+10),this.fuben.iRid==_.default.me.iRid?(this.btn_leave.Move(this.iX+this.iW-40-320,this.iY+this.iH-40-60,150,60),this.btn_leave.sName="解散团队",this.btn_start.Draw(),this.iSelectPoint>=0&&(0==this.iSelectPage?(this.btn_watch.Move(this.iX+50,this.iY+this.iH-40-60,120,60),this.btn_watch.Draw(),this.btn_agree.Move(this.iX+50+45+120,this.iY+this.iH-40-60,120,60),this.btn_agree.Draw(),this.btn_refuse.Move(this.iX+50+45+120+45+120,this.iY+this.iH-40-60,120,60),this.btn_refuse.Draw()):(this.btn_watch.Move(this.iX+50+70,this.iY+this.iH-40-60,120,60),this.btn_watch.Draw(),this.btn_kick.Move(this.iX+50+70+120+70,this.iY+this.iH-40-60,120,60),this.btn_kick.Draw()))):(this.btn_leave.Move(this.iX+this.iW-40-150,this.iY+this.iH-40-60,150,60),this.btn_leave.sName="离开团队",this.iSelectPoint>=0&&1==this.iSelectPage&&(this.btn_watch.Move(this.iX+50+45+120,this.iY+this.iH-40-60,120,60),this.btn_watch.Draw())),this.btn_leave.Draw(),c.default.end(c.default.CONFIRM_LEAVEFUBEN)&&c.default.bConfirm&&(h.default.gi().s_ManageFuBen(0,0,0),d.default.gi().PopStat(1))}},{key:"ProcTouch",value:function(t,e,i){if(this.iSelectPoint>=0&&this.btn_watch.ProcTouch(t,e,i))return this.btn_watch.bCheck()&&(0==this.iSelectPage?h.default.gi().s_WatchOn(0,this.applyers[this.iSelectPoint].iRid,0,""):h.default.gi().s_WatchOn(0,this.members[this.iSelectPoint].iRid,0,"")),!0;if(this.fuben.iRid==_.default.me.iRid){if(this.btn_start.ProcTouch(t,e,i))return this.btn_start.bCheck()&&h.default.gi().s_ManageFuBen(4,0,0),!0;if(this.iSelectPoint>=0)if(0==this.iSelectPage){if(this.btn_agree.ProcTouch(t,e,i))return this.btn_agree.bCheck()&&(h.default.gi().s_ManageFuBen(1,this.applyers[this.iSelectPoint].iRid,0),this.iSelectPoint=-1),!0;if(this.btn_refuse.ProcTouch(t,e,i))return this.btn_refuse.bCheck()&&(h.default.gi().s_ManageFuBen(3,this.applyers[this.iSelectPoint].iRid,0),this.iSelectPoint=-1),!0}else if(this.btn_kick.ProcTouch(t,e,i))return this.btn_kick.bCheck()&&(h.default.gi().s_ManageFuBen(2,this.members[this.iSelectPoint].iRid,0),this.iSelectPoint=-1),!0}if(this.btn_leave.ProcTouch(t,e,i))return this.btn_leave.bCheck()&&(this.fuben.iRid==_.default.me.iRid?c.default.start(c.default.CONFIRM_LEAVEFUBEN,"是否确定解散团队？"):c.default.start(c.default.CONFIRM_LEAVEFUBEN,"是否确定退出团队？")),!0;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&d.default.gi().PopStat(1),!0;var a,n,r,o,u;for(this.btn_leave.ProcTouch(t,e,i)&&this.btn_leave.bCheck()&&d.default.gi().PopStat(1),this.iSelectPoint=-1,o=this.iX+60,u=this.iY+40,a=0;a<this.iApplyCount;a++)n=o+10,r=u+50+20*a,s.default.bInRect(e,i,n,r-10,190,20)&&(this.iSelectPage=0,this.iSelectPoint=a);for(o=this.iX+60+210+20,u=this.iY+40,a=0;a<this.iMemberCount;a++)n=o+10,r=u+50+20*a,s.default.bInRect(e,i,n,r-10,190,20)&&(this.iSelectPage=1,this.iSelectPoint=a);return!1}}]),ManageFuBen}();i.default=b},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx1":15,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/me/GmMe":211}],152:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});_interopRequireDefault(t("../../../../engine/PackageTools"));var a=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),n=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var s=function MyFuBen(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyFuBen)};i.default=s,s.OpenCreate=function(t){var e,i;for(a.default.gi().iXStat==a.default.GS_LOADING1&&a.default.gi().PopStat(1),(i=a.default.gi().iXStat==a.default.GS_CREATEFUBEN?a.default.gi().LastStat(0):a.default.gi().PushStat(a.default.GS_CREATEFUBEN)).iCount=t.GetNextByte(),e=0;e<i.iCount;e++)i.ifblist[e]=t.GetNextInt()},s.OpenManage=function(t){var e,i;for(a.default.gi().iXStat==a.default.GS_LOADING1&&a.default.gi().PopStat(1),(i=a.default.gi().iXStat==a.default.GS_MANAGEFUBEN?a.default.gi().LastStat(0):a.default.gi().PushStat(a.default.GS_MANAGEFUBEN)).fuben.iFid=t.GetNextInt(),i.fuben.iType=t.GetNextByte(),i.fuben.iRid=t.GetNextInt(),i.fuben.sName=t.GetNextString(),i.fuben.iLev=t.GetNextShort(),i.fuben.ras=t.GetNextByte(),i.fuben.tm=t.GetNextString(),i.fuben.sDetail=t.GetNextString(),i.fuben.iOnLine=t.GetNextByte(),t.GetNextByte(),i.iMemberCount=t.GetNextShort(),e=0;e<i.iMemberCount;e++)i.members[e].sName=t.GetNextString(),i.members[e].iRid=t.GetNextInt(),i.members[e].iOnLine=t.GetNextByte();for(i.iApplyCount=t.GetNextShort(),e=0;e<i.iApplyCount;e++)i.applyers[e].sName=t.GetNextString(),i.applyers[e].iRid=t.GetNextInt(),i.applyers[e].iOnLine=t.GetNextByte()},s.OpenApply=function(t){var e,i;for(a.default.gi().iXStat==a.default.GS_LOADING1&&a.default.gi().PopStat(1),(i=a.default.gi().iXStat==a.default.GS_APPLYFUBEN?a.default.gi().LastStat(0):a.default.gi().PushStat(a.default.GS_APPLYFUBEN)).iTotalLine=t.GetNextShort(),i.iPage=t.GetNextByte(),i.iCount=t.GetNextByte(),i.iTotalPage=(i.iTotalLine-1)/10+1,e=0;e<i.iCount;e++)i.fblist[e].iFid=t.GetNextInt(),i.fblist[e].iType=t.GetNextByte(),i.fblist[e].iRid=t.GetNextInt(),i.fblist[e].sName=t.GetNextString(),i.fblist[e].iLev=t.GetNextShort(),i.fblist[e].ras=t.GetNextByte(),i.fblist[e].tm=t.GetNextString(),i.fblist[e].sDetail=t.GetNextString(),i.fblist[e].iOnLine=t.GetNextByte()},s.iStat=0,s.GetStat=function(t){s.iStat=t.GetNextShort(),s.iFbid=t.GetNextInt(),s.iFbType=t.GetNextInt(),s.iHead=t.GetNextInt(),s.iFbProc=t.GetNextInt()},s.GetTarget=function(t){s.sDetail=t.GetNextString(),s.sTarget=t.GetNextString(),n.default.fm.Open("#cffffff"+s.sDetail+"#e#c00ff00"+s.sTarget)}},{"../../../../engine/PackageTools":9,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/message/FrameMessage":87}],153:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx1"))),o=_interopRequireDefault(t("../../../../engine/control/XInput")),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function ApplyGovFight(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ApplyGovFight);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ApplyGovFight.__proto__||Object.getPrototypeOf(ApplyGovFight)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=460,e.iH=420,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_ok=new r.default(l.default.xani_button),e.btn_ok.InitButton("1号按钮90_60"),e.btn_ok.Move(e.iX+30,e.iY+e.iH-30-60,90,60),e.btn_ok.sName="报名",e.btn_cancel=new r.default(l.default.xani_button),e.btn_cancel.InitButton("1号按钮90_60"),e.btn_cancel.Move(e.iX+e.iW-30-90,e.iY+e.iH-30-60,90,60),e.btn_cancel.sName="取消",e.in_price=new o.default(l.default.xani_frame),e.in_price.Move(e.iX+180,e.iY+80,200,50),e.in_price.sDetail="500000",e.in_price.bNumber=!0,e.in_price.iTextSize=30,e.in_price.iMaxNumber=99999999,e.in_price.iTextColor=4279324257,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ApplyGovFight,s.default),a(ApplyGovFight,[{key:"Draw",value:function(){d.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),u.default.gi().DrawText_2(this.iX+this.iW/2,this.iY+30,"帮战报名",4294896766,32,100,1,1,0,-2,0,2,4278261038),u.default.gi().DrawText_2(this.iX+35,this.iY+90,"竞选资金:",4294896766,30,100,1,1,0,0,0,2,4278261038),d.default.frame_type4("8号框20_20",this.in_price.iX,this.in_price.iY,this.in_price.iW,this.in_price.iH,20,20),this.in_price.DrawText(),this.in_price.onscr(),c.default.gi().Format("#c114e611,帮战报名时间: 每周四12:00:00~周五18:00:00#e2,竞选要求当前帮派资金>=100万#e3,竞选资金最低为50万，且不能超过[当前帮派资金/3]#e4,周五19:00:00，按竞选资金数额顺序，前8名获得本周帮战资格，系统自动扣除竞选资金(如当前帮派资金低于100万，或低于[竞选资金+(帮派等级+1)*50万]时，取消帮战资格)。",this.iW-40,18),c.default.gi().Draw(this.iX+20,this.iY+160),this.btn_ok.Draw(),this.btn_cancel.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;return this.in_price.ProcTouch(t,e,i),this.btn_ok.ProcTouch(t,e,i)&&this.btn_ok.bCheck()&&((a=parseInt(this.in_price.sDetail))<5e5?m.default.easymsg.AddMessage("竞选资金不能低于50万"):(f.default.gi().s_SeverEvent(10,1,a,0,0),h.default.gi().PopStat(1))),!!this.btn_cancel.ProcTouch(t,e,i)&&(this.btn_cancel.bCheck()&&h.default.gi().PopStat(1),!0)}}]),ApplyGovFight}();i.default=g,g.Open=function(){h.default.gi().PushStat(h.default.GS_APPLYGOVFIGHT)}},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XInput":18,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86}],154:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButton")),u=_interopRequireDefault(t("../../../../engine/control/XInput")),l=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function CreateGov(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,CreateGov);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(CreateGov.__proto__||Object.getPrototypeOf(CreateGov)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=480,e.iH=440,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.in_govname=new u.default(l.default.xani_frame),e.in_govname.Move(e.iX+25+20,e.iY+25+20+30,e.iW-90,50),e.in_govname.bHideText=!0,e.in_govdetail=new u.default(l.default.xani_frame),e.in_govdetail.Move(e.iX+25+20,e.iY+25+20+30+50+20+30,e.iW-90,150),e.in_govdetail.bHideText=!0,e.btn_create=new o.default(l.default.xani_nui2),e.btn_create.Move(e.iX+e.iW-25-20-110,e.iY+e.iH-25-20-52,110,52),e.btn_create.InitButton("按钮1_110"),e.btn_create.sName="创建",e.btn_cancel=new o.default(l.default.xani_nui2),e.btn_cancel.Move(e.iX+25+20,e.iY+e.iH-25-20-52,110,52),e.btn_cancel.InitButton("按钮1_110"),e.btn_cancel.sName="取消",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(CreateGov,r.default),a(CreateGov,[{key:"Draw",value:function(){d.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),d.default.new_framein(this.iX+25,this.iY+25,this.iW-50,this.iH-50),this.pm3f.DrawTextEx(this.in_govname.iX,this.in_govname.iY-30,"输入帮派名称(2~8字)：",4278206039,30,101,1,1,0,0,0),d.default.new_frameon(this.in_govname.iX,this.in_govname.iY,this.in_govname.iW,this.in_govname.iH,1),d.default.new_framepc(this.in_govname.iX,this.in_govname.iY,this.in_govname.iW,this.in_govname.iH),this.pm3f.DrawTextEx(this.in_govname.iX+10,this.in_govname.iY+25,this.in_govname.sDetail,4294967295,30,101,1,1,0,0,-2),this.pm3f.DrawTextEx(this.in_govdetail.iX,this.in_govdetail.iY-30,"输入帮派简介：",4278206039,30,101,1,1,0,0,0),d.default.new_frameon(this.in_govdetail.iX,this.in_govdetail.iY,this.in_govdetail.iW,this.in_govdetail.iH,1),d.default.new_framepc(this.in_govdetail.iX,this.in_govdetail.iY,this.in_govdetail.iW,this.in_govdetail.iH),c.default.gi().Format(this.in_govdetail.sDetail,this.in_govdetail.iW-20,30),c.default.gi().Draw(this.in_govdetail.iX+10,this.in_govdetail.iY+10),this.btn_create.Draw(),this.btn_cancel.Draw(),this.in_govname.onscr(),this.in_govdetail.onscr()}},{key:"ProcTouch",value:function(t,e,i){if(this.in_govname.ProcTouch(t,e,i),this.in_govdetail.ProcTouch(t,e,i),this.btn_create.ProcTouch(t,e,i)){if(this.btn_create.bCheck()){var a=this.in_govname.sDetail.getBytes("GBK");if(a.length<4||a.length>16)return m.default.easymsg.AddMessage("帮派名称2-8个字"),!0;if((a=this.in_govdetail.sDetail.getBytes("GBK")).length<4||a.length>80)return m.default.easymsg.AddMessage("帮派宗旨2-40个字"),!0;f.default.gi().s_CreateGov(this.in_govname.sDetail,this.in_govdetail.sDetail),h.default.gi().PopStat(1)}return!0}return this.btn_cancel.ProcTouch(t,e,i)?(this.btn_cancel.bCheck()&&h.default.gi().PopStat(1),!0):!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)}}]),CreateGov}();i.default=g},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XInput":18,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86}],155:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../config/GameData")),_interopRequireDefault(t("../../../../config/GmConfig"))),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),c=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/ang/PromptActivity")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m=function _EXTSKILL(){_classCallCheck(this,_EXTSKILL)},g=function(t){function ExtLearnSkill(t){_classCallCheck(this,ExtLearnSkill);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ExtLearnSkill.__proto__||Object.getPrototypeOf(ExtLearnSkill)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=800,i.iH=400,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.elist=new Array(8),e=0;e<8;e++)i.elist[e]=new m;for(i.btn_learn=new o.default(u.default.xani_nui2),i.btn_learn.InitButton("按钮1_110"),i.btn_learn.sName="学习",i.btn_select=new Array(8),e=0;e<8;e++)i.btn_select[e]=new o.default(u.default.xani_nui2),i.btn_select[e].InitButton("按钮2");return i.iSelectPoint=0,i.btn_close=new o.default(u.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ExtLearnSkill,r.default),a(ExtLearnSkill,[{key:"Draw",value:function(){var t,e,i,a;for(e=this.iW-185-20-25-25,h.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),h.default.new_framein(this.iX+25,this.iY+25,185,this.iH-25-25),h.default.new_framein(this.iX+25+185+20,this.iY+25,e,this.iH-25-25),t=0;t<this.iCount;t++)i=this.iX+20+25,a=this.iY+25+20+70*t,this.btn_select[t].Move(i,a,145,56),this.btn_select[t].sName=GovFrame.sSkill(this.elist[t].iPoint),this.iSelectPoint==t&&(this.btn_select[t].bMouseDown=!0,this.btn_select[t].bMouseIn=!0),this.btn_select[t].Draw();this.iSelectPoint>=0&&(i=this.iX+25+185+20+20,a=this.iY+25+20,u.default.xani_nicon.DrawAnima_aa(i,a,u.default.de_skill.strValue(this.elist[this.iSelectPoint].iSid,0,6),0),this.pm3f.DrawTextEx(i+90,a+25,u.default.de_skill.strValue(this.elist[this.iSelectPoint].iSid,0,6),4278206039,40,101,1,1,0,0,-2),this.pm3f.DrawTextEx(i+90,a+80,"等级："+this.elist[this.iSelectPoint].iLev+"/"+this.elist[this.iSelectPoint].iMaxLev,4278206039,30,101,1,1,0,0,-3),a+=90,d.default.gi().FormatEx("#c003e57"+u.default.de_skill.strValue(this.elist[this.iSelectPoint].iSid,0,3),e-40,30,0,0,32),d.default.gi().Draw(i,a),a+=d.default.gi().iH+8,this.elist[this.iSelectPoint].iNeedExp<=c.default.me.rbs.iExp?this.pm3f.DrawTextEx(i,a,"升级经验："+this.elist[this.iSelectPoint].iNeedExp+"/"+c.default.me.rbs.iExp,4278255360,30,101,1,1,0,0,0):this.pm3f.DrawTextEx(i,a,"升级经验："+this.elist[this.iSelectPoint].iNeedExp+"/"+c.default.me.rbs.iExp,4294901760,30,101,1,1,0,0,0),a+=35,this.elist[this.iSelectPoint].iNeedMoney<=c.default.me.rbs.iMoney?this.pm3f.DrawTextEx(i,a,"升级金钱:"+this.elist[this.iSelectPoint].iNeedMoney+"/"+c.default.me.rbs.iMoney,4278255360,30,101,1,1,0,0,0):this.pm3f.DrawTextEx(i,a,"升级金钱:"+this.elist[this.iSelectPoint].iNeedMoney+"/"+c.default.me.rbs.iMoney,4294901760,30,101,1,1,0,0,0),a+=35,this.pm3f.DrawTextEx(i,a,"储备金："+c.default.me.rbs.iReserve,4278206039,30,101,1,1,0,0,0),this.btn_learn.Move(this.iX+this.iW-110-25-20,this.iY+this.iH-52-25-20,110,52),this.btn_learn.Draw()),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;if(3==t&&!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))return f.default.gi().PopStat(1),!0;if(this.iSelectPoint>=0&&this.btn_learn.ProcTouch(t,e,i))return this.btn_learn.bCheck()&&(l.default.gi().s_SeverEvent(6,this.stype,this.elist[this.iSelectPoint].iPoint,this.elist[this.iSelectPoint].iSid,0),f.default.gi().PushStat(f.default.GS_LOADING1)),!0;for(a=0;a<this.iCount;a++)this.btn_select[a].ProcTouch(t,e,i)&&this.btn_select[a].bCheck()&&(this.iSelectPoint=a);return!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0)}}]),ExtLearnSkill}();i.default=g,g.Open=function(t){var e,i;for(f.default.gi().iXStat==f.default.GS_LOADING1&&f.default.gi().PopStat(1),(i=f.default.gi().iXStat==f.default.GS_EXTLEARNSKILL?f.default.gi().LastStat(0):f.default.gi().PushStat(f.default.GS_EXTLEARNSKILL)).stype=t.GetNextInt(),i.iCount=t.GetNextByte(),e=0;e<i.iCount;e++)i.elist[e].iPoint=t.GetNextByte(),i.elist[e].iSid=t.GetNextShort(),i.elist[e].iLev=t.GetNextShort(),i.elist[e].iMaxLev=t.GetNextShort(),i.elist[e].iNeedExp=t.GetNextInt(),i.elist[e].iNeedMoney=t.GetNextInt(),i.elist[e].iNeedOther=t.GetNextInt()}},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/help/ang/PromptActivity":201,"../../../../engtst/mgm/gameing/me/GmMe":211}],156:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../config/GameData")),_interopRequireDefault(t("../../../../config/GmConfig"))),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButton"))),u=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send"));_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var g=function _APPLYLIST(){_classCallCheck(this,_APPLYLIST)},_=function _GOVMEMBER(){_classCallCheck(this,_GOVMEMBER)},p=function _GOVBUILDING(){_classCallCheck(this,_GOVBUILDING),this.iBid=-1,this.iLev=0,this.iProc=0},b=function _GOVSKILL(){_classCallCheck(this,_GOVSKILL),this.iSid=-1,this.iLev=0,this.iProc=0},D=function(t){function GovFrame(t){_classCallCheck(this,GovFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(GovFrame.__proto__||Object.getPrototypeOf(GovFrame)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=600,i.iH=400,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new o.default(u.default.xani_ui),i.btn_close.InitButton("统一关闭按钮"),i.btn_close.Move(i.iX+i.iW-60-5,i.iY,60,60),i.btn_base=new Array(6),i.bBaseInited=new Array(6),e=0;e<6;e++)i.btn_base[e]=new o.default(u.default.xani_ui),i.btn_base[e].InitButton("统一中按钮4"),i.btn_base[e].Move(i.iX+10,i.iY+80+50*e,130,40),i.bBaseInited[e]=!1;for(i.btn_base[0].sName="基本属性",i.btn_base[1].sName="帮派成员",i.btn_base[2].sName="帮派建筑",i.btn_base[3].sName="帮派技能",i.btn_base[4].sName="其他功能",i.btn_base[5].sName="申请列表",i.iBasePoint=0,i.bBaseInited[0]=!0,l.default.gi().s_GetBaseGovData(0,0),0==MyGov.mg.iJob||1==MyGov.mg.iJob||2==MyGov.mg.iJob||3==MyGov.mg.iJob||4==MyGov.mg.iJob?i.iBaseCount=6:i.iBaseCount=5,i.iApplyCount=0,i.applylist=new Array(10),i.btn_agree=new Array(10),i.btn_refuse=new Array(10),e=0;e<10;e++)i.applylist[e]=new g,i.btn_agree[e]=new o.default(u.default.xani_ui),i.btn_agree[e].InitButton("统一小按钮2"),i.btn_agree[e].sName="同意",i.btn_refuse[e]=new o.default(u.default.xani_ui),i.btn_refuse[e].InitButton("统一小按钮2"),i.btn_refuse[e].sName="拒绝";for(i.iMemberCount=0,i.govmember=new Array(10),i.govbuilding=new Array(10),i.btn_build=new Array(10),i.govskill=new Array(10),i.btn_skill=new Array(10),e=0;e<10;e++)i.govmember[e]=new _,i.govbuilding[e]=new p,i.btn_build[e]=new o.default(u.default.xani_ui),i.btn_build[e].InitButton("统一小按钮2"),i.btn_build[e].sName="建造",i.govskill[e]=new b,i.btn_skill[e]=new o.default(u.default.xani_ui),i.btn_skill[e].InitButton("统一小按钮2"),i.btn_skill[e].sName="研究";return i.btn_left=new o.default(u.default.xani_ui),i.btn_left.InitButton("统一中按钮3"),i.btn_left.sName="上一页",i.btn_right=new o.default(u.default.xani_ui),i.btn_right.InitButton("统一中按钮3"),i.btn_right.sName="下一页",i.btn_leavegov=new o.default(u.default.xani_ui),i.btn_leavegov.InitButton("统一中按钮4"),i.btn_leavegov.sName="离帮",i.btn_mtlev=new o.default(u.default.xani_ui),i.btn_mtlev.InitButton("统一中按钮4"),i.btn_mtlev.sName="离帮",i.btn_upgrade=new o.default(u.default.xani_ui),i.btn_upgrade.InitButton("统一中按钮4"),i.btn_upgrade.sName="升级帮派",i.btn_swap=new o.default(u.default.xani_ui),i.btn_swap.InitButton("统一中按钮4"),i.btn_swap.sName="帮主转让",i.btn_message=new o.default(u.default.xani_ui),i.btn_message.InitButton("统一中按钮4"),i.btn_message.sName="群发邮件",i.btn_watch=new o.default(u.default.xani_ui),i.btn_watch.InitButton("统一中按钮2"),i.btn_watch.sName="查看",i.iMemberPoint=-1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(GovFrame,r.default),a(GovFrame,[{key:"Draw_0",value:function(t,e,i,a){d.default.Frame1_BR(t+20,e+20,i-40,40),d.default.Data1_BR(t+30,e+30,"我的职位:",sJob(MyGov.mg.iJob),100,70),d.default.Data1_BR(t+220,e+30,"我的帮贡:",""+MyGov.mg.iTick,100,80),e+=60,d.default.Frame1_BR(t+20,e+10,i-40,a-90),d.default.Data1_BR(t+30,e+20,"帮派名称:",MyGov.mg.sName,100,130),d.default.Data1_BR(t+270,e+20,"帮派号码:",""+MyGov.mg.iRealGid,70,60),d.default.Data1_BR(t+30,e+20+25,"帮派等级:",""+this.iLev,100,60),d.default.Data1_BR(t+220,e+20+25,"帮派人数:",this.iAllMemberCount+"/"+this.iMaxMemberCount,100,80),d.default.Data1_BR(t+30,e+20+50,"帮派资金:",this.iMoney+"/"+this.iMaxMoney,100,260),d.default.Data1_BR(t+30,e+20+75,"当前繁荣度:",this.iExp+"/"+this.iMaxExp,120,240),d.default.Data1_BR(t+30,e+20+100,"升级繁荣度:",""+this.iUpgradExp,120,240),d.default.Data1_BR(t+30,e+20+125,"帮派行动力:",this.iTick+"/"+this.iMaxTick,120,240),d.default.Data1_BR(t+30,e+20+150,"当前建造建筑:",sBuilding(this.iBuildingId)+"("+this.iBExp+"/"+this.iBMaxExp+")",140,220),d.default.Data1_BR(t+30,e+20+175,"当前研究科技:",sSkill(this.iResearchId)+"("+this.iRExp+"/"+this.iRMaxExp+")",140,220),0==this.iRMtLev?d.default.Data1_BR(t+30,e+20+200,"当前维护级别:","普通",140,220):1==this.iRMtLev?d.default.Data1_BR(t+30,e+20+200,"当前维护级别:","中级",140,220):2==this.iRMtLev&&d.default.Data1_BR(t+30,e+20+200,"当前维护级别:","高级",140,220)}},{key:"Draw_1",value:function(t,e,i,a){var n,s,r;for(d.default.Frame1_BR(t+20,e+20,i-40,a-40),n=0;n<10;n++)s=t+30,r=e+30+22*n,d.default.Text1_BR(s,r,i-60),n>=this.iMemberCount||(this.pm3f.DrawTextEx(s+10,r+10,this.govmember[n].sName,4294967295,20,101,1,1,0,0,-2),this.pm3f.DrawTextEx(s+160,r,sJob(this.govmember[n].iJob),4294967295,20,101,1,1,0,0,0));this.iMemberPoint>=0&&this.iMemberPoint<this.iMemberCount&&(s=t+30,r=e+30+22*this.iMemberPoint,this.btn_watch.Move(s+300,r-10,70,40),this.btn_watch.Draw()),0==this.iTotalLine?this.iPageCount=1:this.iPageCount=(this.iTotalLine-1)/this.iLineEachPage+1,this.pm3f.DrawTextEx(t+i/2,e+a-50,iPagePoint+1+"/"+this.iPageCount,4294967295,20,101,1,1,0,-2,-2),this.btn_left.Move(t+i/2-100-80,e+a-70,100,40),this.btn_left.Draw(),this.btn_right.Move(t+i/2+80,e+a-70,100,40),this.btn_right.Draw()}},{key:"Draw_2",value:function(t,e,i,a){var n,s,r;for(d.default.Frame1_BR(t+20,e+20,i-40,a-40),n=0;n<8;n++)s=t+30,r=e+38+33*n,d.default.Text1_BR(s,r,i-60),-1!=this.govbuilding[n].iBid&&(this.pm3f.DrawTextEx(s+10,r,sBuilding(n)+this.govbuilding[n].iLev+"级",4294967295,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(s+220,r,this.govbuilding[n].iProc+"/"+MyGov.iBuildingUpgrad[this.govbuilding[n].iLev]/10,4294967295,20,101,1,1,0,-2,0),0!=MyGov.mg.iJob&&1!=MyGov.mg.iJob||(this.iBuildingId==n?this.pm3f.DrawTextEx(s+320,r,"建造中",4294967295,20,101,1,1,0,0,0):(this.btn_build[n].Move(s+320,r-5,60,30),this.btn_build[n].Draw())))}},{key:"Draw_3",value:function(t,e,i,a){var n,s,r;for(d.default.Frame1_BR(t+20,e+20,i-40,a-40),n=0;n<8;n++)s=t+30,r=e+38+33*n,d.default.Text1_BR(s,r,i-60),-1!=this.govskill[n].iSid&&(this.pm3f.DrawTextEx(s+10,r,sSkill(n)+this.govskill[n].iLev+"级",4294967295,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(s+220,r,this.govskill[n].iProc+"/"+MyGov.iBuildingUpgrad[this.govskill[n].iLev],4294967295,20,101,1,1,0,-2,0),0!=MyGov.mg.iJob&&1!=MyGov.mg.iJob||(this.iResearchId==n?this.pm3f.DrawTextEx(s+320,r,"研究中",4294967295,20,101,1,1,0,0,0):(this.btn_skill[n].Move(s+320,r-5,60,30),this.btn_skill[n].Draw())))}},{key:"Draw_4",value:function(t,e,i,a){var n,s;d.default.Frame1_BR(t+20,e+20,i-40,a-40),n=t+30,s=e+30,this.btn_leavegov.Move(n,s,130,40),0==MyGov.mg.iJob?this.btn_leavegov.sName="解散帮派":this.btn_leavegov.sName="离帮",this.btn_leavegov.Draw(),MyGov.mg.iJob<=1&&(s+=60,this.btn_mtlev.Move(n,s,130,40),0==this.iRMtLev?this.btn_mtlev.sName="维护:普通":1==this.iRMtLev?this.btn_mtlev.sName="维护:中级":2==this.iRMtLev&&(this.btn_mtlev.sName="维护:高级"),this.btn_mtlev.Draw(),s+=60,this.btn_upgrade.Move(n,s,130,40),this.btn_upgrade.Draw()),MyGov.mg.iJob<=4&&(s+=60,this.btn_message.Move(n,s,130,40),this.btn_message.Draw()),n=t+30+150,s=e+30-60,0==MyGov.mg.iJob&&(s+=60,this.btn_swap.Move(n,s,130,40),this.btn_swap.Draw()),h.default.end(h.default.CONFIRM_LEAVEGOV)&&h.default.bConfirm&&(l.default.gi().s_LeaveGov(),MyGov.mg.iRealGid=-1,f.default.gi().PopStat(1)),h.default.end(h.default.CONFIRM_UPGRADEGOV)&&h.default.bConfirm&&(l.default.gi().s_GovSet(3,0),f.default.gi().PopStat(1)),h.default.end(h.default.CONFIRM_SWAPGOV)&&h.default.bConfirm&&(l.default.gi().s_GovSet(4,0),f.default.gi().PopStat(1))}},{key:"Draw_5",value:function(t,e,i,a){var n,s,r;for(d.default.Frame1_BR(t+20,e+20,i-40,a-40),n=0;n<this.iApplyCount;n++)s=t+30,r=e+38+33*n,d.default.Text1_BR(s,r,i-60),this.pm3f.DrawTextEx(s+10,r+10,this.applylist[n].sName,4294967295,20,101,1,1,0,0,-2),-1!=this.applylist[n].iRid?-2!=this.applylist[n].iRid?(this.btn_agree[n].Move(s+200,r-5,60,30),this.btn_agree[n].Draw(),this.btn_refuse[n].Move(s+300,r-5,60,30),this.btn_refuse[n].Draw()):this.pm3f.DrawTextEx(s+250,r,"已拒绝",4294901760,20,101,1,1,0,0,0):this.pm3f.DrawTextEx(s+250,r,"已同意",4294901760,20,101,1,1,0,0,0)}},{key:"Draw",value:function(){var t;for(d.default.Frame3_BK(this.iX,this.iY,this.iW,this.iH,"帮派属性"),this.btn_close.Draw(),t=0;t<this.iBaseCount;t++)this.iBasePoint==t&&(this.btn_base[t].bMouseDown=!0,this.btn_base[t].bMouseIn=!0),this.btn_base[t].Draw();switch(d.default.Frame2_MD(this.iX+150,this.iY+65,this.iW-160,this.iH-75),this.iBasePoint){case 0:this.Draw_0(this.iX+150,this.iY+65,this.iW-160,this.iH-75);break;case 1:this.Draw_1(this.iX+150,this.iY+65,this.iW-160,this.iH-75);break;case 2:this.Draw_2(this.iX+150,this.iY+65,this.iW-160,this.iH-75);break;case 3:this.Draw_3(this.iX+150,this.iY+65,this.iW-160,this.iH-75);break;case 4:this.Draw_4(this.iX+150,this.iY+65,this.iW-160,this.iH-75);break;case 5:this.Draw_5(this.iX+150,this.iY+65,this.iW-160,this.iH-75)}}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0;for(a=0;a<this.iBaseCount;a++)if(this.btn_base[a].ProcTouch(t,e,i)&&this.btn_base[a].bCheck())switch(a){case 0:case 4:this.iBasePoint=a;break;case 1:case 2:case 3:case 5:this.iBasePoint=a,0==this.bBaseInited[a]&&(this.bBaseInited[a]=!0,l.default.gi().s_GetBaseGovData(a,0))}if(1==this.iBasePoint){for(MyGov.mg.iJob,a=0;a<10;a++){var n=this.iX+150+30,r=this.iY+65+30+22*a;s.default.bInRect(e,i,n,r,220,22)&&a<this.iMemberCount&&(this.iMemberPoint=a)}if(this.iMemberPoint>=0&&this.btn_watch.ProcTouch(t,e,i))return this.btn_watch.bCheck()&&(l.default.gi().s_GetBaseGovData(6,this.govmember[this.iMemberPoint].iRid),f.default.gi().PushStat(f.default.GS_MEMBERDETAIL)),!0;this.btn_left.ProcTouch(t,e,i)&&this.btn_left.bCheck()&&iPagePoint>0&&(iPagePoint--,l.default.gi().s_GetBaseGovData(1,iPagePoint)),this.btn_right.ProcTouch(t,e,i)&&this.btn_right.bCheck()&&iPagePoint<this.iPageCount-1&&(iPagePoint++,l.default.gi().s_GetBaseGovData(1,iPagePoint))}if(2==this.iBasePoint&&(0==MyGov.mg.iJob||1==MyGov.mg.iJob))for(a=0;a<8;a++)if(a!=this.iBuildingId&&this.btn_build[a].ProcTouch(t,e,i))return this.btn_build[a].bCheck()&&(this.iBuildingId=a,l.default.gi().s_GovSet(0,a)),!0;if(3==this.iBasePoint&&(0==MyGov.mg.iJob||1==MyGov.mg.iJob))for(a=0;a<8;a++)if(a!=this.iResearchId&&this.btn_skill[a].ProcTouch(t,e,i))return this.btn_skill[a].bCheck()&&(this.iResearchId=a,l.default.gi().s_GovSet(1,a)),!0;if(4==this.iBasePoint){if(this.btn_leavegov.ProcTouch(t,e,i))return this.btn_leavegov.bCheck()&&(0==MyGov.mg.iJob?h.default.start(h.default.CONFIRM_LEAVEGOV,"是否确认解散帮派？"):h.default.start(h.default.CONFIRM_LEAVEGOV,"是否确认离帮？")),!0;if(MyGov.mg.iJob<=1&&this.btn_message.ProcTouch(t,e,i)&&this.btn_message.bCheck()&&(m.default.OpenChat(1e4,MyGov.mg.sName,6),c.default.easymsg.AddMessage("发送收取5万现金")),MyGov.mg.iJob<=1){if(this.btn_mtlev.ProcTouch(t,e,i))return this.btn_mtlev.bCheck()&&(this.iRMtLev<2?this.iRMtLev++:this.iRMtLev=0,l.default.gi().s_GovSet(2,this.iRMtLev)),!0;this.btn_upgrade.ProcTouch(t,e,i)&&this.btn_upgrade.bCheck()&&h.default.start(h.default.CONFIRM_UPGRADEGOV,"帮派"+this.iLev+"级升"+(this.iLev+1)+"级，要求2个建筑达到"+10*(this.iLev+1)+"级、帮派资金达到"+80*(this.iLev+1)*15/10+"万、繁荣度达到"+this.iUpgradExp+"#e升级成功消耗"+80*(this.iLev+1)+"万帮派资金#e是否确定升级帮派？"),0==MyGov.mg.iJob&&this.btn_swap.ProcTouch(t,e,i)&&this.btn_swap.bCheck()&&h.default.start(h.default.CONFIRM_SWAPGOV,"是否确定将帮派转让给副帮主？")}}if(5==this.iBasePoint)for(a=0;a<this.iApplyCount;a++)if(!(this.applylist[a].iRid<0)){if(this.btn_agree[a].ProcTouch(t,e,i))return this.btn_agree[a].bCheck()&&(l.default.gi().s_OperateGovMember(this.applylist[a].iRid,0,0),this.applylist[a].iRid=-1),!0;if(this.btn_refuse[a].ProcTouch(t,e,i))return this.btn_refuse[a].bCheck()&&(l.default.gi().s_OperateGovMember(this.applylist[a].iRid,1,0),this.applylist[a].iRid=-2),!0}return!1}},{key:"getgovdata",value:function(t){var e;switch(t.GetNextByte()){case 0:this.iLev=t.GetNextByte(),this.iMoney=t.GetNextInt(),this.iMaxMoney=t.GetNextInt(),this.iExp=t.GetNextInt(),this.iMaxExp=t.GetNextInt(),this.iTick=t.GetNextInt(),this.iMaxTick=t.GetNextInt(),this.iAllMemberCount=t.GetNextInt(),this.iMaxMemberCount=t.GetNextInt(),this.iUpgradExp=t.GetNextInt(),this.iBuildingId=t.GetNextByte(),this.iBExp=t.GetNextInt(),this.iBMaxExp=t.GetNextInt(),this.iResearchId=t.GetNextByte(),this.iRExp=t.GetNextInt(),this.iRMaxExp=t.GetNextInt(),this.iRMtLev=t.GetNextInt();break;case 1:for(this.iTotalLine=t.GetNextInt(),this.iLineEachPage=t.GetNextByte(),iPagePoint=t.GetNextByte(),this.iMemberCount=t.GetNextByte(),e=0;e<this.iMemberCount;e++)this.govmember[e].iRid=t.GetNextInt(),this.govmember[e].iJob=t.GetNextInt(),this.govmember[e].sName=t.GetNextString();break;case 2:for(e=0;e<8;e++)this.govbuilding[e].iBid=e,this.govbuilding[e].iLev=t.GetNextInt(),this.govbuilding[e].iProc=t.GetNextInt();break;case 3:for(e=0;e<8;e++)this.govskill[e].iSid=e,this.govskill[e].iLev=t.GetNextInt(),this.govskill[e].iProc=t.GetNextInt();break;case 5:for(this.iApplyCount=t.GetNextByte(),e=0;e<this.iApplyCount;e++)this.applylist[e].iRid=t.GetNextInt(),this.applylist[e].sName=t.GetNextString()}}}]),GovFrame}();i.default=D,D.iPagePoint,D.sBuilding=function(t){switch(t){case 0:return"青龙堂";case 1:return"白虎堂";case 2:return"朱雀堂";case 3:return"玄武堂";case 4:return"学院";case 5:return"金库";case 6:return"商会";case 7:return"厢房";case 8:return"药房";default:return"未知"+t}},D.sSkill=function(t){switch(t){case 0:return"强身术";case 1:return"炼丹术";case 2:return"烹饪";case 3:return"锻造术";case 4:return"冶金术";case 5:return"剪裁术";case 6:return"健体";case 7:return"修心";default:return"未知"+t}},D.sJob=function(t){switch(t){case 0:return"帮主";case 1:return"副帮主";case 2:return"左护法";case 3:return"右护法";case 4:return"长老";case 5:return"堂主";case 6:return"精英";case 10:return"帮众";default:return"未知"+t}},D.ReloadMember=function(){l.default.gi().s_GetBaseGovData(1,iPagePoint)}},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButton":14,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../../engtst/mgm/gameing/me/GmMe":211}],157:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=(_interopRequireDefault(t("../../../../config/XDefine")),_interopRequireDefault(t("../../../../engine/BaseClass"))),o=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),c=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function GovXiu(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GovXiu);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(GovXiu.__proto__||Object.getPrototypeOf(GovXiu)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=560,i.iH=500,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.btn_close=new o.default(u.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.iDelay=new Int32Array(6),i.btn_xiu=new Array(6),e=0;e<6;e++)i.iDelay[e]=0,i.btn_xiu[e]=new o.default(u.default.xani_nui3),i.btn_xiu[e].InitButton("内框按钮"),i.btn_xiu[e].sName="修炼";return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(GovXiu,r.default),a(GovXiu,[{key:"Draw",value:function(){var t,e,i,a,s,r,o,l;for(h.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"修","炼"),this.btn_close.Draw(),a=this.iX+25,s=this.iY+25,r=this.iW-50,o=this.iH-50-70,h.default.new_framein(a,s,r,o),t=0;t<6;t++)e=a+10,i=s+60*t+10,h.default.new_frameon(e,i,r-20,60,0),l=c.default.me.rbs.iGovXiu[t][0],this.pm3f.DrawTextEx(e+10,i+30,u.default.de_skill.strValue(n.default.iGovXiuId[t],0,6)+l+"级",4294967295,25,101,1,1,0,0,-2),this.pm3f.DrawTextEx(e+r-20-180,i+30,c.default.me.rbs.iGovXiu[t][1]+"/"+MyGov.iBuildingUpgrad[l]/10,4294967295,20,101,1,1,0,-2,-2),this.btn_xiu[t].Move(e+r-20-2-98,i+2.5,98,55),this.iDelay[t]>0?(this.iDelay[t]--,this.btn_xiu[t].bDisable=!0):this.btn_xiu[t].bDisable=!1,this.btn_xiu[t].Draw();this.pm3f.DrawTextEx(this.iX+25,this.iY+this.iH-25-60,"每次修炼花费30000金钱和5点帮贡，并消耗5点帮派行动力",4278206039,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(this.iX+25,this.iY+this.iH-25-30,"如果背包中有修炼丹，优先消耗修炼丹",4278206039,20,101,1,1,0,0,0)}},{key:"ProcTouch",value:function(t,e,i){var a,s,r;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0;for(a=0;a<6;a++)this.btn_xiu[a].ProcTouch(t,e,i)&&this.btn_xiu[a].bCheck()&&((r=c.default.me.rbs.iGovXiu[a][0])>=c.default.me.rbs.iLev/5?d.default.easymsg.AddMessage("修炼不能超过人物等级/5"):MyGov.mg.iTick<5?d.default.easymsg.AddMessage("帮贡不足"):MyGov.mg.iGovTick<5?d.default.easymsg.AddMessage("帮派行动力不足"):c.default.me.rbs.iMoney+c.default.me.rbs.iReserve<3e4?d.default.easymsg.AddMessage("金钱不足"):(this.iDelay[a]=20,c.default.me.rbs.iReserve>=3e4?c.default.me.rbs.iReserve-=3e4:(s=3e4-c.default.me.rbs.iReserve,c.default.me.rbs.iReserve=0,c.default.me.rbs.iMoney-=s),MyGov.mg.iGovTick-=5,MyGov.mg.iTick-=5,c.default.me.rbs.iGovXiu[a][1]+=10,c.default.me.rbs.iGovXiu[a][1]>=MyGov.iBuildingUpgrad[r]/10&&(c.default.me.rbs.iGovXiu[a][0]++,c.default.me.rbs.iGovXiu[a][1]-=MyGov.iBuildingUpgrad[r]/10),l.default.gi().s_GovXiu(n.default.iGovXiuId[a],a)));return!1}}]),GovXiu}();i.default=m},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/GmMe":211}],158:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function LearnGovSkill(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LearnGovSkill);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LearnGovSkill.__proto__||Object.getPrototypeOf(LearnGovSkill)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=800,i.iH=550,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.btn_close=new o.default(u.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_learn=new o.default(u.default.xani_nui2),i.btn_learn.InitButton("按钮1_110"),i.btn_learn.sName="学习",i.btn_select=new Array(10),e=0;e<10;e++)i.btn_select[e]=new o.default(u.default.xani_nui2),i.btn_select[e].InitButton("按钮2");return i.iSelectPoint=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LearnGovSkill,r.default),a(LearnGovSkill,[{key:"Draw",value:function(){var t,e,i,a;for(e=this.iW-185-20-25-25,h.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),h.default.new_framein(this.iX+25,this.iY+25,185,this.iH-25-25),h.default.new_framein(this.iX+25+185+20,this.iY+25,e,this.iH-25-25),this.btn_close.Draw(),t=0;t<8;t++)i=this.iX+20+25,a=this.iY+25+20+56*t,this.btn_select[t].Move(i,a,145,56),this.btn_select[t].sName=GovFrame.sSkill(t),this.iSelectPoint==t&&(this.btn_select[t].bMouseDown=!0,this.btn_select[t].bMouseIn=!0),this.btn_select[t].Draw();this.iSelectPoint>=0&&(i=this.iX+25+185+20+20,a=this.iY+25+20,u.default.xani_nicon.DrawAnima_aa(i,a,u.default.de_skill.strValue(n.default.iGovSkillId[this.iSelectPoint],0,6),0),this.pm3f.DrawTextEx(i+90,a+25,u.default.de_skill.strValue(n.default.iGovSkillId[this.iSelectPoint],0,6),4278206039,40,101,1,1,0,0,-2),this.pm3f.DrawTextEx(i+90,a+80,"等级："+m.default.me.rbs.iGovSkill[this.iSelectPoint]+"/"+MyGov.mg.iGovSkillLev[this.iSelectPoint],4278206039,30,101,1,1,0,0,-3),a+=90,d.default.gi().FormatEx("#c003e57"+u.default.de_skill.strValue(n.default.iGovSkillId[this.iSelectPoint],0,3),e-40,30,0,0,32),d.default.gi().Draw(i,a),a+=d.default.gi().iH+8,parseInt(n.default.iUpgradeExp[m.default.me.rbs.iGovSkill[this.iSelectPoint]]/6)<=m.default.me.rbs.iExp?this.pm3f.DrawTextEx(i,a,"升级经验："+parseInt(n.default.iUpgradeExp[m.default.me.rbs.iGovSkill[this.iSelectPoint]]/6)+"/"+m.default.me.rbs.iExp,4278255360,30,101,1,1,0,0,0):this.pm3f.DrawTextEx(i,a,"升级经验："+parseInt(n.default.iUpgradeExp[m.default.me.rbs.iGovSkill[this.iSelectPoint]]/6)+"/"+m.default.me.rbs.iExp,4294901760,30,101,1,1,0,0,0),a+=35,parseInt(n.default.iUpgradeMoney[m.default.me.rbs.iGovSkill[this.iSelectPoint]]/18)<=m.default.me.rbs.iMoney?this.pm3f.DrawTextEx(i,a,"升级金钱:"+n.default.iUpgradeMoney[m.default.me.rbs.iGovSkill[this.iSelectPoint]]/18+"/"+m.default.me.rbs.iMoney,4278255360,30,101,1,1,0,0,0):this.pm3f.DrawTextEx(i,a,"升级金钱:"+parseInt(n.default.iUpgradeMoney[m.default.me.rbs.iGovSkill[this.iSelectPoint]]/18)+"/"+m.default.me.rbs.iMoney,4294901760,30,101,1,1,0,0,0),a+=35,5*(m.default.me.rbs.iGovSkill[this.iSelectPoint]+1)<=MyGov.mg.iTick?this.pm3f.DrawTextEx(i,a,"升级贡献:"+5*(m.default.me.rbs.iGovSkill[this.iSelectPoint]+1)+"/"+MyGov.mg.iTick,4278255360,30,101,1,1,0,0,0):this.pm3f.DrawTextEx(i,a,"升级贡献:"+5*(m.default.me.rbs.iGovSkill[this.iSelectPoint]+1)+"/"+MyGov.mg.iTick,4294901760,30,101,1,1,0,0,0),a+=35,m.default.me.rbs.iGovSkill[this.iSelectPoint]+1<=MyGov.mg.iGovTick?this.pm3f.DrawTextEx(i,a,"升级行动力:"+(m.default.me.rbs.iGovSkill[this.iSelectPoint]+1)+"/"+MyGov.mg.iGovTick,4278255360,30,101,1,1,0,0,0):this.pm3f.DrawTextEx(i,a,"升级行动力:"+(m.default.me.rbs.iGovSkill[this.iSelectPoint]+1)+"/"+MyGov.mg.iGovTick,4294901760,30,101,1,1,0,0,0),a+=35,this.pm3f.DrawTextEx(i,a,"储备金："+m.default.me.rbs.iReserve,4278206039,30,101,1,1,0,0,0),this.btn_learn.Move(this.iX+this.iW-110-25-20,this.iY+this.iH-52-25-20,110,52),this.btn_learn.Draw())}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0;for(a=0;a<8;a++)this.btn_select[a].ProcTouch(t,e,i)&&this.btn_select[a].bCheck()&&(this.iSelectPoint=a);return this.iSelectPoint>=0&&this.btn_learn.ProcTouch(t,e,i)&&this.btn_learn.bCheck()&&(m.default.me.rbs.iGovSkill[this.iSelectPoint]>=MyGov.mg.iGovSkillLev[this.iSelectPoint]?c.default.easymsg.AddMessage("已达学习上限"):m.default.me.rbs.iGovSkill[this.iSelectPoint]>=m.default.me.rbs.iLev+10?c.default.easymsg.AddMessage("不能超过人物等级10级"):parseInt(n.default.iUpgradeExp[m.default.me.rbs.iGovSkill[this.iSelectPoint]]/6)>m.default.me.rbs.iExp?c.default.easymsg.AddMessage("经验不足"):parseInt(n.default.iUpgradeMoney[m.default.me.rbs.iGovSkill[this.iSelectPoint]]/18)>m.default.me.rbs.iMoney?c.default.easymsg.AddMessage("金钱不足"):5*(m.default.me.rbs.iGovSkill[this.iSelectPoint]+1)>MyGov.mg.iTick?c.default.easymsg.AddMessage("帮派贡献不足"):m.default.me.rbs.iGovSkill[this.iSelectPoint]+1>MyGov.mg.iGovTick?c.default.easymsg.AddMessage("帮派行动力不足"):(l.default.gi().s_LearnGovSkill(n.default.iGovSkillId[this.iSelectPoint],this.iSelectPoint),m.default.me.rbs.iExp-=parseInt(n.default.iUpgradeExp[m.default.me.rbs.iGovSkill[this.iSelectPoint]]/6),m.default.me.rbs.iMoney-=parseInt(n.default.iUpgradeExp[m.default.me.rbs.iGovSkill[this.iSelectPoint]]/18),MyGov.mg.iTick-=5*(m.default.me.rbs.iGovSkill[this.iSelectPoint]+1),MyGov.mg.iGovTick-=m.default.me.rbs.iGovSkill[this.iSelectPoint]+1,m.default.me.rbs.iGovSkill[this.iSelectPoint]++,m.default.me.CalcFightAtt())),!1}}]),LearnGovSkill}();i.default=g},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/GmMe":211}],159:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButton"))),l=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send")),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function MemberDetail(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MemberDetail);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MemberDetail.__proto__||Object.getPrototypeOf(MemberDetail)).call(this));e.iJobList=[0,1,2,3,4,5,10],e.pani=t,e.pm3f=t.pm3f,e.iW=540,e.iH=340,e.iX=(s.default.SCRW-e.iW)/2,e.iY=(s.default.SCRH-e.iH)/2,e.btn_close=new u.default(l.default.xani_ui),e.btn_close.InitButton("统一关闭按钮"),e.btn_close.Move(e.iX+e.iW-60-5,e.iY,60,60);return e.btn_send=new u.default(l.default.xani_ui),e.btn_send.InitButton("统一中按钮4"),e.btn_send.Move(e.iX+e.iW-130-30,e.iY+35+50,130,40),e.btn_send.sName="发送消息",e.btn_add=new u.default(l.default.xani_ui),e.btn_add.InitButton("统一中按钮4"),e.btn_add.Move(e.iX+e.iW-130-30,e.iY+35+100,130,40),e.btn_add.sName="加为好友",e.btn_set=new u.default(l.default.xani_ui),e.btn_set.InitButton("统一中按钮4"),e.btn_set.Move(e.iX+e.iW-130-30,e.iY+35+150,130,40),e.btn_set.sName="职位设置",e.btn_kick=new u.default(l.default.xani_ui),e.btn_kick.InitButton("统一中按钮4"),e.btn_kick.Move(e.iX+e.iW-130-30,e.iY+35+200,130,40),e.btn_kick.sName="踢出帮派",e.bInited=!1,e.bSetJob=!1,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MemberDetail,o.default),a(MemberDetail,[{key:"Draw",value:function(){c.default.Frame3_BK(this.iX,this.iY,this.iW,this.iH,"成员属性"),this.btn_close.Draw(),c.default.Frame2_MD(this.iX+10,this.iY+70-5,this.iW-20,this.iH-80),c.default.Frame1_BR(this.iX+30,this.iY+90-5,340,this.iH-120);var t=this.iX+30,e=this.iY+90-5;if(c.default.Data1_BR(t+10,e+10,"名字",this.sName,60,100),c.default.Data1_BR(t+180,e+10,"号码",""+this.iRid,40,100),c.default.Data1_BR(t+10,e+10+30,"性别",g.default.sSex(this.iSex),60,60),c.default.Data1_BR(t+180,e+10+30,"种族",g.default.sRace(this.iRace),60,80),c.default.Data1_BR(t+10,e+10+60,"等级",""+this.iLev,60,50),c.default.Data1_BR(t+180,e+10+60,"门派",n.default.sSchools[this.iSchoolId],60,80),c.default.Data1_BR(t+10,e+10+90,"职位",GovFrame.sJob(this.iJob),60,80),c.default.Data1_BR(t+180,e+10+90,"贡献",""+this.iTick,60,80),c.default.Data1_BR(t+10,e+10+120,"历史帮贡",""+this.iMaxTick,100,200),c.default.Data1_BR(t+10,e+10+150,"入帮时间",this.sJoinTime,100,200),c.default.Data1_BR(t+10,e+10+180,"登陆时间",this.sLoginTime,100,200),this.btn_send.Draw(),this.btn_add.Draw(),0!=MyGov.mg.iJob&&1!=MyGov.mg.iJob||MyGov.mg.iJob<this.iJob&&(d.default.end(d.default.CONFIRM_GOVKICK)&&d.default.bConfirm&&(f.default.gi().s_OperateGovMember(this.iRid,2,0),h.default.gi().PopStat(1),GovFrame.ReloadMember()),this.btn_kick.Draw(),this.btn_set.Draw()),this.bSetJob){var i,a=(s.default.SCRW-140)/2,r=(s.default.SCRH-265)/2;for(c.default.Frame2_MD(a,r,140,265),c.default.Frame1_BR(a+20,r+20,100,225),i=0;i<7;i++)t=a+30,e=r+30+30*i,i==this.iJobPoint&&this.pm3f.FillRect_2D(t,e,t+140-60,e+30,4278255360),this.iJobList[i]<=MyGov.mg.iJob?this.pm3f.DrawTextEx(t,e,GovFrame.sJob(this.iJobList[i]),4286611584,25,101,1,1,0,0,0):this.pm3f.DrawTextEx(t,e,GovFrame.sJob(this.iJobList[i]),4294967295,25,101,1,1,0,0,0)}}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.bSetJob){var n=(s.default.SCRW-140)/2,o=(s.default.SCRH-265)/2;for(this.iJobPoint=-1,a=0;a<7;a++){var u=n+30,l=o+30+30*a;r.default.bInRect(e,i,u,l,80,30)&&(this.iJobList[a]<MyGov.mg.iJob?this.iJobPoint=-1:this.iJobPoint=a)}return 3==t&&-1!=this.iJobPoint&&(this.iJob=this.iJobList[this.iJobPoint],f.default.gi().s_OperateGovMember(this.iRid,3,this.iJob),this.bSetJob=!1,h.default.gi().PopStat(1),GovFrame.ReloadMember()),1!=t||r.default.bInRect(e,i,n,o,140,265)||(this.bSetJob=!1),!1}if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0;if(this.btn_send.ProcTouch(t,e,i))return this.btn_send.bCheck()&&m.default.OpenChat(this.iRid,this.sName,2*this.iRace+this.iSex),!0;if(this.btn_add.ProcTouch(t,e,i))return this.btn_add.bCheck()&&f.default.gi().s_FriendOperate(0,this.iRid,0),!0;if((0==MyGov.mg.iJob||1==MyGov.mg.iJob||4==MyGov.mg.iJob)&&MyGov.mg.iJob<this.iJob){if(this.btn_kick.ProcTouch(t,e,i))return this.btn_kick.bCheck()&&d.default.start(d.default.CONFIRM_GOVKICK,"是否确定把"+this.sName+"踢出帮派？"),!0;if(this.btn_set.ProcTouch(t,e,i))return this.btn_set.bCheck()&&(this.iJobPoint=-1,this.bSetJob=!0),!0}return!1}},{key:"getgovdata",value:function(t){6==t.GetNextByte()&&(this.iRid=t.GetNextInt(),this.sName=t.GetNextString(),this.iRace=t.GetNextByte(),this.iSex=t.GetNextByte(),this.iLev=t.GetNextInt(),this.iSchoolId=t.GetNextByte(),this.iJob=t.GetNextInt(),this.iTick=t.GetNextInt(),this.sJoinTime=t.GetNextString(),this.sLoginTime=t.GetNextString(),this.iMaxTick=t.GetNextInt(),this.bInited=!0)}}]),MemberDetail}();i.default=_},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButton":14,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../../engtst/mgm/gameing/me/GmMe":211}],160:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),_interopRequireDefault(t("../../../../engtst/mgm/XStat")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var s=function(){function MyGov(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyGov),this.sName="",this.iGovSkillLev=new Int32Array(10),this.GOVPOWER_0=0,this.GOVPOWER_1=1,this.GOVPOWER_2=2,this.iRealGid=-1,t=0;t<MyGov.MAXGOVBUILDINGLEV;t++)MyGov.iBuildingUpgrad[t]=0==t?1500:MyGov.iBuildingUpgrad[t-1]+200*(t-1)+600,MyGov.iBuildingTotal[t]=0==t?MyGov.iBuildingUpgrad[t]:MyGov.iBuildingTotal[t-1]+MyGov.iBuildingUpgrad[t];for(t=0;t<21;t++)MyGov.iGovUpgrad[t]=4*MyGov.iBuildingTotal[5*t+4]}return a(MyGov,[{key:"bCheckPower",value:function(t){return!(this.iRealGid<0)&&0!=(this.iPower&1<<t)}},{key:"initmygov",value:function(t){this.iRealGid=t.GetNextInt(),this.iJob=t.GetNextInt(),this.iTick=t.GetNextInt(),this.sName=t.GetNextString(),this.iPower=t.GetNextShort(),this.iZhuQueLev=t.GetNextShort(),this.iShsLev=t.GetNextShort()}},{key:"govoperateframe",value:function(t){var e;switch(t.GetNextByte()){case 0:for(this.iGovTick=t.GetNextInt(),e=0;e<8;e++)this.iGovSkillLev[e]=t.GetNextInt();n.default.gi().iXStat!=n.default.GS_LEARNGOVSKILL&&n.default.gi().PushStat(n.default.GS_LEARNGOVSKILL);break;case 1:this.iGovTick=t.GetNextInt(),n.default.gi().iXStat!=n.default.GS_GOVXIU&&n.default.gi().PushStat(n.default.GS_GOVXIU)}}}]),MyGov}();i.default=s,s.MAXGOVBUILDINGLEV=120,s.MAXGOVLEV=25,s.iBuildingUpgrad=new Int32Array(s.MAXGOVBUILDINGLEV),s.iBuildingTotal=new Int32Array(s.MAXGOVBUILDINGLEV),s.iGovUpgrad=new Int32Array(s.MAXGOVLEV),s.mg=new s,s._GOVBUILDINGS=["青龙堂","白虎堂","朱雀堂","玄武堂","学院","金库","商会","厢房","药房"],s._GOVSKILLS=["强身术","炼丹术","烹饪","锻造","冶金","剪裁","健体","修心"],s._GOVMTLEV=["低级维护","中级维护","高级维护"],s._GOVJOBS=["帮主","副帮主","左护法","右护法","长老","堂主","精英","帮众"],s._JOBIDS=[0,1,2,3,4,5,6,10],s.sJob=function(t){switch(t){case 0:return"帮主";case 1:return"副帮主";case 2:return"左护法";case 3:return"右护法";case 4:return"长老";case 5:return"堂主";case 6:return"精英";case 10:return"帮众";default:return"未知"+t}}},{"../../../../engine/PackageTools":9,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/XStat":70}],161:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),l=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function PetXiu(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PetXiu);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PetXiu.__proto__||Object.getPrototypeOf(PetXiu)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=540,e.iH=350,e.iX=(s.default.SCRW-e.iW)/2,e.iY=(s.default.SCRH-e.iH)/2,e.btn_close=new u.default(l.default.xani_button),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.iDelay=0,e.btn_xiu=new u.default(l.default.xani_button),e.btn_xiu.InitButton("1号按钮90_60"),e.btn_xiu.sName="修炼",e.iXiuPoint=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PetXiu,o.default),a(PetXiu,[{key:"Draw",value:function(){var t,e,i,a,s;for(d.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),this.btn_close.Draw(),this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+30,"宠物修炼",4294896766,36,101,1,1,0,-2,0,2,4278261038),d.default.frame_type4("11号框20_20",this.iX+20,this.iY+70,this.iW-40,150,20,20),t=0;t<4;t++)e=this.iX+30,i=this.iY+65+20+30*t,s=4279324257,this.iXiuPoint==t&&(d.default.frame_type1("12号框20_30",e,i,this.iW-60,20),this.iDelay>0?(this.iDelay--,this.btn_xiu.bDisable=!0):this.btn_xiu.bDisable=!1),a=m.default.me.rbs.iGovXiu[t+6][0],this.pm3f.DrawTextEx(e+10,i+15,""+l.default.de_skill.strValue(n.default.iGovXiuId[t+6],0,6)+a+"级",s,20,101,1,1,0,0,-2),this.pm3f.DrawTextEx(this.iX+this.iW-40,i+15,m.default.me.rbs.iGovXiu[t+6][1]+"/"+MyGov.iBuildingUpgrad[a]/10,s,20,101,1,1,0,-3,-2);this.btn_xiu.Move(this.iX+this.iW-20-90,this.iY+this.iH-20-60,90,60),this.btn_xiu.Draw(),d.default.frame_type4("11号框20_20",this.iX+20,this.iY+70+150+20,this.iW-40-90-20,90,20,20),this.pm3f.DrawTextEx(this.iX+40,this.iY+260,"当前拥有修炼积分:"+m.default.me.iFlag[13],4279324257,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(this.iX+40,this.iY+290,"每次修炼花费10点修炼积分",4279324257,20,101,1,1,0,0,0)}},{key:"ProcTouch",value:function(t,e,i){var a,s;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0;for(a=0;a<4;a++){var o=this.iX+30,u=this.iY+65+20+30*a;r.default.bInRect(e,i,o,u,this.iW-60,30)&&(this.iXiuPoint=a)}return this.iXiuPoint>=0&&this.iXiuPoint<4&&this.iDelay<=0&&(a=this.iXiuPoint,this.btn_xiu.ProcTouch(t,e,i)&&this.btn_xiu.bCheck()&&((s=m.default.me.rbs.iGovXiu[a+6][0])>=m.default.me.rbs.iLev/5?c.default.easymsg.AddMessage("修炼不能超过人物等级/5"):m.default.me.iFlag[13]<10?c.default.easymsg.AddMessage("宠修积分不足"):(m.default.me.iFlag[13]-=10,m.default.me.rbs.iGovXiu[a+6][1]+=10,m.default.me.rbs.iGovXiu[a+6][1]>=MyGov.iBuildingUpgrad[s]/10&&(m.default.me.rbs.iGovXiu[a+6][0]++,m.default.me.rbs.iGovXiu[a+6][1]-=MyGov.iBuildingUpgrad[s]/10),f.default.gi().s_GovXiu(n.default.iGovXiuId[a+6],a+6)))),!1}}]),PetXiu}();i.default=g},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/GmMe":211}],162:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function HireTraderWorker(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,HireTraderWorker);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(HireTraderWorker.__proto__||Object.getPrototypeOf(HireTraderWorker)).call(this));for(i.iW=750,i.iH=480,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.iCount=new Int32Array(3),i.btn_hire=new Array(3),e=0;e<3;e++)i.btn_hire[e]=new o.default(l.default.xani_button),i.btn_hire[e].sName="雇佣",i.btn_hire[e].InitButton("普通按钮140_55");return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(HireTraderWorker,r.default),a(HireTraderWorker,[{key:"Draw",value:function(){d.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),0==this.iType?this.Draw_0():this.Draw_1()}},{key:"Draw_0",value:function(){var t,e;u.default.gi().DrawTextEx(this.iX+30,this.iY+30,"我这里的工人无所不能！",4278410564,30,101,1,1,0,0,0),u.default.gi().DrawTextEx(this.iX+30,this.iY+30+40,"当前正在工作的普通工人"+this.iCount[0]+"名，高级工人"+this.iCount[1]+"名，特殊工人"+this.iCount[2]+"名",4279586904,20,101,1,1,0,0,0),u.default.gi().DrawTextEx(this.iX+30,this.iY+30+80,"维护时增加"+this.iAdd+"建筑进度",4279586904,20,101,1,1,0,0,0),t=this.iX+30,e=this.iY+150,this.DrawEntry(0,t,e,"普通工人","6万现金(获得60帮贡)"),this.DrawEntry(1,t,e+100,"高级工人","12万现金(获得90帮贡)"),this.DrawEntry(2,t,e+200,"特殊工人","20元宝(获得120帮贡)")}},{key:"Draw_1",value:function(){var t,e;u.default.gi().DrawTextEx(this.iX+30,this.iY+30,"我这里的商人个个都是好手！",4278410564,30,101,1,1,0,0,0),u.default.gi().DrawTextEx(this.iX+30,this.iY+30+40,"当前正在工作的普通商人"+this.iCount[0]+"名，高级商人"+this.iCount[1]+"名，特殊商人"+this.iCount[2]+"名",4279586904,20,101,1,1,0,0,0),u.default.gi().DrawTextEx(this.iX+30,this.iY+30+80,"维护时恢复"+this.iAdd+"帮派资金",4279586904,20,101,1,1,0,0,0),t=this.iX+30,e=this.iY+150,this.DrawEntry(0,t,e,"普通商人","6万现金(获得60帮贡)"),this.DrawEntry(1,t,e+100,"高级商人","12万现金(获得90帮贡)"),this.DrawEntry(2,t,e+200,"特殊商人","20元宝(获得120帮贡)")}},{key:"DrawEntry",value:function(t,e,i,a,n){d.default.frame_type1("帮派福利条a20_92",e,i,690,20),l.default.xani_icon.DrawAnima_aa(e+20,i+9.5,a,0),u.default.gi().DrawText_2(e+20+73+20,i+46,a,4294967040,30,101,1,1,0,0,-2,4,4289034305),n.length>0&&u.default.gi().DrawTextEx(e+20+73+20+160,i+46,n,4278190080,20,101,1,1,0,0,-2),this.btn_hire[t].Move(e+690-20-140,i+18.5,140,55),this.btn_hire[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<3;a++)if(this.btn_hire[a].ProcTouch(t,e,i)){this.btn_hire[a].bCheck()&&(f.default.gi().s_HireWorker(this.iType,a,24),h.default.gi().PopStat(1));break}return s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||h.default.gi().PopStat(1),!1}}]),HireTraderWorker}();i.default=c,c.Open=function(t){if(0==t.GetNextInt()){var e=h.default.gi().PushStat(h.default.GS_HIRETRADERWORKER);e.iType=t.GetNextInt(),e.iCount[0]=t.GetNextInt(),e.iCount[1]=t.GetNextInt(),e.iCount[2]=t.GetNextInt(),e.iAdd=t.GetNextInt()}}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72}],163:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../../engine/control/XInputNumber")),l=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/gov/MyGov")),g=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/gov/ext/mission/EntrustMission")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"))),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),p=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"));_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/shop/NpcShop"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var b=function(){function _MYPRICE(){_classCallCheck(this,_MYPRICE),this.Clear()}return a(_MYPRICE,[{key:"Clear",value:function(){this.iMoney=0,this.iIngot=0,this.iGovTick=0}}]),_MYPRICE}(),D=function(t){function NewShop(t){_classCallCheck(this,NewShop);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(NewShop.__proto__||Object.getPrototypeOf(NewShop)).call(this));for(i.goods=new Array(20),i.price=new Array(20),i.iOnceBuyCount=new Int32Array(20),e=0;e<20;e++)i.goods[e]=new _.default,i.goods[e].iPos=e,i.price[e]=new b;return i.pani=t,i.pm3f=t.pm3f,i.iW=710,i.iH=405,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.lockgoods=null,i.btn_close=new o.default(l.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_buy=new o.default(l.default.xani_nui2),i.btn_buy.InitButton("按钮1_110"),i.btn_buy.sName="购买",i.btn_buy.Move(i.iX+i.iW-110-30,i.iY+i.iH-52-30,110,52),i.in_count=new u.default(l.default.xani_nui3),i.in_count.iNumber=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(NewShop,r.default),a(NewShop,[{key:"_Open",value:function(t){var e,i,a;for(this.iShopId=t.GetNextInt(),this.sName=t.GetNextString(),e=0;e<20;e++)if(this.goods[e].iGid=-1,this.goods[e].iTid=t.GetNextInt(),0!=this.goods[e].iTid){for(this.goods[e].iGid=1,this.goods[e].iCount=t.GetNextByte(),this.iOnceBuyCount[e]=t.GetNextByte(),a=t.GetNextByte(),i=0;i<8;i++)0!=(a&1<<i)&&(this.goods[e].iAtts[i]=t.GetNextInt());l.default.xani_ngoods.InitAnimaWithName(l.default.de_goods.strValue(this.goods[e].iTid,0,10),this.goods[e].aa),a=t.GetNextShort(),this.price[e].iFlag=a,0!=(1&a)&&(this.price[e].iMoney=t.GetNextInt()),0!=(2&a)&&(this.price[e].iIngot=t.GetNextInt()),0!=(4&a)&&(this.price[e].iGovTick=t.GetNextInt()),0!=(8&a)&&t.GetNextInt(),0!=(16&a)&&t.GetNextInt(),0!=(32&a)&&t.GetNextInt(),0!=(64&a)&&t.GetNextInt(),0!=(128&a)&&t.GetNextInt(),0!=(256&a)&&t.GetNextInt(),0!=(512&a)&&t.GetNextInt(),0!=(1024&a)&&t.GetNextInt(),0!=(2048&a)&&t.GetNextInt(),0!=(4096&a)&&t.GetNextInt(),0!=(8192&a)&&t.GetNextInt(),0!=(16384&a)&&t.GetNextInt(),0!=(32768&a)&&t.GetNextInt(),this.price[e].iLable=t.GetNextByte()}null!=this.lockgoods&&this.lockgoods.iGid<=0&&(this.lockgoods=null,p.default.Reset())}}]),a(NewShop,[{key:"Draw",value:function(){var t,e,i,a,n,s;for(d.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),this.btn_close.Draw(),this.pm3f.DrawTextEx(this.iX+430+30+15,this.iY+35,this.sName,4278206039,30,101,1,1,0,0,0),p.default.new_DrawGoods(this.iX+30,this.iY+30,this.goods,null,null),n=this.iX+30+5,s=this.iY+30+5,t=0;t<5;t++)for(e=0;e<4;e++)i=n+85*t,a=s+85*e,-1!=this.goods[5*e+t].iGid&&this.price[5*e+t].iLable>0&&l.default.xani_other.DrawAnima(i,a,"商店标签"+this.price[5*e+t].iLable,0);null!=this.lockgoods&&(p.default.new_DrawRect(this.iX+30,this.iY+30,this.goods,this.lockgoods,0),n=this.iX+430+30+15,s=this.iY+80,this.pm3f.DrawTextEx(n,s,"名称："+l.default.de_goods.strValue(this.lockgoods.iTid,0,4),4278206039,25,101,1,1,0,0,0),s+=30,this.pm3f.DrawTextEx(n,s,"单价：",4278206039,25,101,1,1,0,0,0),s+=30,e=this.lockgoods.iPos,0!=(1&this.price[e].iFlag)&&(this.pm3f.DrawTextEx(n+20,s,"现金："+this.price[e].iMoney,4278206039,25,101,1,1,0,0,0),s+=30),0!=(2&this.price[e].iFlag)&&(this.pm3f.DrawTextEx(n+20,s,"元宝："+this.price[e].iIngot,4278206039,25,101,1,1,0,0,0),s+=30),0!=(4&this.price[e].iFlag)&&(this.pm3f.DrawTextEx(n+20,s,"帮贡："+this.price[e].iGovTick,4278206039,25,101,1,1,0,0,0),s+=30),this.pm3f.DrawTextEx(n,s,"数量：",4278206039,25,101,1,1,0,0,0),s+=30,this.in_count.Move(n+20,s,100),this.in_count.Draw()),this.btn_buy.bDisable&&(this.iBuyDelay--,this.iBuyDelay<=0&&(this.btn_buy.bDisable=!1)),this.btn_buy.Draw(),p.default.bShowDetail()&&p.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){var a,n;if(null!=this.lockgoods){if(this.in_count.ProcTouch(t,e,i))return!0;if(this.btn_buy.ProcTouch(t,e,i))return this.btn_buy.bCheck()&&(a=this.lockgoods.iPos,this.in_count.iNumber<=0?c.default.easymsg.AddMessage("购买数量不能为0"):this.in_count.iNumber>this.iOnceBuyCount[a]?c.default.easymsg.AddMessage("购买数量超过单次可购买上限"):this.in_count.iNumber>this.lockgoods.iCount?c.default.easymsg.AddMessage("购买数量超过上限"):0!=(1&this.price[a].iFlag)&&g.default.me.rbs.iMoney<this.price[a].iMoney*this.in_count.iNumber?c.default.easymsg.AddMessage("现金不足"):0!=(2&this.price[a].iFlag)&&g.default.me.rbs.iInGot<this.price[a].iIngot*this.in_count.iNumber?c.default.easymsg.AddMessage("现金不足"):0!=(4&this.price[a].iFlag)&&m.default.mg.iTick<this.price[a].iGovTick*this.in_count.iNumber?c.default.easymsg.AddMessage("帮贡不足"):(f.default.gi().s_NewShopBuy(this.iShopId,this.lockgoods.iPos,this.lockgoods.iTid,this.in_count.iNumber),this.btn_buy.bDisable=!0,this.iBuyDelay=30)),!0}return n=p.default.new_LockGoods(e,i,this.iX+30,this.iY+30,this.goods,t),p.default.NoMove(),3==t&&null!=n?(n!=this.lockgoods&&(this.in_count.iNumber=1),this.lockgoods=n,(a=this.lockgoods.iCount)>this.iOnceBuyCount[this.lockgoods.iPos]&&(a=this.iOnceBuyCount[this.lockgoods.iPos]),this.in_count.MinMax(1,a)):null==n&&(this.lockgoods=null),this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0):(3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||h.default.gi().PopStat(1),!1)}}]),NewShop}();i.default=D,D.Open=function(t){var e;null==(e=h.default.gi().FindStat(h.default.GS_NEWSHOP))&&(e=h.default.gi().PushStat(h.default.GS_NEWSHOP)),e._Open(t)}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInputNumber":19,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../../engtst/mgm/gameing/gov/ext/mission/EntrustMission":178,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/shop/NpcShop":260}],164:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=(_interopRequireDefault(t("../../../../../config/XDefine")),_interopRequireDefault(t("../../../../../engine/BaseClass"))),r=_interopRequireDefault(t("../../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),g=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function RemedyMerge(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,RemedyMerge);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(RemedyMerge.__proto__||Object.getPrototypeOf(RemedyMerge)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=950,i.iH=475,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new r.default(l.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_goods=new Array(8),i.gmake=new Array(8),i.igsub=new Array(8),e=0;e<8;e++)i.btn_goods[e]=new r.default(l.default.xani_ui),i.btn_goods[e].InitButton("物品格"),i.gmake[e]=null,i.igsub[e]=1;return i.btn_goods[0].Move(i.iX+35+80,i.iY+120,80,80),i.btn_goods[1].Move(i.iX+35+80+140,i.iY+120,80,80),i.btn_make=new o.default(l.default.xani_nui2),i.btn_make.InitButton("按钮1_110"),i.btn_make.sName="合并",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(RemedyMerge,s.default),a(RemedyMerge,[{key:"Draw",value:function(){var t,e,i;for(d.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"丹","方","合","并"),this.btn_close.Draw(),l.default.xani_nui3.DrawAnima(this.iX+230,this.iY+200,"炼丹炉背景",0),e=this.iX+this.iW-30-430-40,i=this.iY+30,d.default.new_framein(e,i,470,this.iH-60),u.default.gi().DrawTextEx(e+20,i+20,"双击选择丹方：",4278206039,30,101,1,1,0,0,0),this.iGx=e+20,this.iGy=i+20+30,g.default.new_DrawGoods(this.iGx,this.iGy,_.default.gi().goods[2],this.gmake,this.igsub),null!=this.lockgoods&&g.default.new_DrawRect(this.iGx,this.iGy,_.default.gi().goods[2],this.lockgoods,0),t=0;t<2;t++)l.default.xani_nui3.DrawAnima(this.btn_goods[t].iX,this.btn_goods[t].iY,"物品格子",0),null!=this.gmake[t]&&g.default.new_DrawOneGoods_ext(this.btn_goods[t].iX,this.btn_goods[t].iY,this.gmake[t],1);i=this.iY+this.iH-30-160,d.default.new_framein(this.iX+30,i,400,160);var a="#c003e57"+this.Check();c.default.gi().FormatEx(a,360,25,0,0,30),c.default.gi().Draw(this.iX+30+20,i+20),this.btn_make.Move(this.iX+30+400-20-110,i+160-20-52,110,52),1==this.iCanMake?(this.btn_make.sName="合并",this.btn_make.Draw()):2==this.iCanMake?(this.btn_make.sName="镶嵌",this.btn_make.Draw()):3==this.iCanMake&&(this.btn_make.sName="使用",this.btn_make.Draw()),g.default.bShowDetail()&&g.default.new_DrawDetail(null,-1,-1,0)}},{key:"Check",value:function(){return this.iCanMake=0,null==this.gmake[0]?"请先放入需要合并的丹方":-1==l.default.de_goods.intValue(this.gmake[0].iTid,-1,16)?null==this.gmake[1]?"请先放入同等级丹方进行合并":this.gmake[1].iTid!=this.gmake[0].iTid?"丹方等级不同，不能合成":(this.iCanMake=1,"#c00ff00可以合并"):"#c00ff00放入物品错误"}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.iCanMake>0&&this.btn_make.ProcTouch(t,e,i)&&this.btn_make.bCheck()){var n=[0,0,0,0,0,0,0,0];for(a=0;a<8;a++)null!=this.gmake[a]&&(n[a]=this.gmake[a].iGid,l.default.de_goods.intValue(this.gmake[a].iTid,0,28)>1?(this.gmake[a].iCount--,this.gmake[a].iCount<=0&&(this.gmake[a].iGid=-1)):this.gmake[a].iGid=-1,this.gmake[a]=null);f.default.gi().s_UseSkill(10,n[0],n[1],n[2],n[3],n[4],n[5])}if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0;for(this.lockgoods=g.default.new_LockGoods(e,i,this.iGx,this.iGy,_.default.gi().goods[2],t),3==t&&null!=this.lockgoods&&g.default.bCanProc()&&(195==this.lockgoods.iTid||328==this.lockgoods.iTid||329==this.lockgoods.iTid||330==this.lockgoods.iTid||331==this.lockgoods.iTid?null==this.gmake[0]?this.gmake[0]=this.lockgoods:null==this.gmake[1]&&this.gmake[0]!=this.lockgoods&&(this.gmake[0].iTid==this.lockgoods.iTid?this.gmake[1]=this.lockgoods:m.default.easymsg.AddMessage("请放入同等级丹方")):m.default.easymsg.AddMessage("请放入丹方进行合并"),this.lockgoods=null),a=0;a<2;a++)this.btn_goods[a].ProcTouch(t,e,i)&&this.btn_goods[a].bCheck()&&(this.gmake[a]=null);return!1}}]),RemedyMerge}();i.default=p,p.Open=function(){h.default.gi().PushStat(h.default.GS_GOV_REMEDYMERGE)}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],165:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../../../engine/control/XInput")),u=(_interopRequireDefault(t("../../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast"))),l=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/UIList")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/format/FormatString")),g=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/EasyMessage")),_=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage")),p=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send")),b=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov")),D=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var y=function _GOVLIST(){_classCallCheck(this,_GOVLIST)},w=function(t){function ApplyForGov(t){_classCallCheck(this,ApplyForGov);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ApplyForGov.__proto__||Object.getPrototypeOf(ApplyForGov)).call(this));for(i.MAXGOVLIST=32,i.pani=t,i.pm3f=t.pm3f,i.govlist=new Array(i.MAXGOVLIST),e=0;e<i.MAXGOVLIST;e++)i.govlist[e]=new y;return i.Init(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ApplyForGov,s.default),a(ApplyForGov,[{key:"ApplyedGovs",value:function(t){var e,i,a,n;for(i=t.GetNextInt(),e=0;e<i;e++)for(n=t.GetNextShort(),a=0;a<this.iGovCount;a++)null!=this.govlist[a]&&this.govlist[a].iGovId==n&&(this.govlist[a].bApplyed=!0)}},{key:"GetGovDetail",value:function(t){for(var e=t.GetNextInt(),i=t.GetNextByte(),a=0;a<this.iGovCount;a++)if(null!=this.govlist[a]&&this.govlist[a].iGovId==e){1==this.govlist[a].iInitStat&&(0==i?this.govlist[a].iInitStat=3:(this.govlist[a].iInitStat=2,this.govlist[a].sGovName=t.GetNextString(),this.govlist[a].iGovLev=t.GetNextInt(),this.govlist[a].iMemberCount=t.GetNextInt(),this.govlist[a].iMaxMemberCount=t.GetNextInt(),this.govlist[a].sMaster=t.GetNextString(),this.govlist[a].iMasterId=t.GetNextInt(),this.govlist[a].sDetail=t.GetNextString()));break}}},{key:"GetIdList",value:function(t){var e,i;for(e=t.GetNextInt(),0==(i=t.GetNextShort())&&(this.iGovCount=e,this.govlist=new Array(this.iGovCount),this.iOffY=0);!(3e4==(e=t.GetNextShort())||t.iOffset>1024||i>=this.iGovCount);)null==this.govlist[i]&&(this.govlist[i]=new y),this.govlist[i].iGovId=e,this.govlist[i].iInitStat=0,this.govlist[i].bApplyed=!1,i++}},{key:"Init",value:function(){this.iW=920,this.iH=620,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.ui_govlist=new c.default(0,6,this.iW-90,330),this.ui_govlist.SetTitle(0,"序号",90,!1),this.ui_govlist.SetTitle(1,"名称",200,!1),this.ui_govlist.SetTitle(2,"帮派号码",130,!1),this.ui_govlist.SetTitle(3,"等级",90,!1),this.ui_govlist.SetTitle(4,"人数",140,!1),this.ui_govlist.SetTitle(5,"帮主",180,!1),this.btn_close=new r.default(l.default.xani_nui2),this.btn_close.InitButton("关闭按钮"),this.btn_close.Move(this.iX+this.iW-35,this.iY-25,60,60),this.govlist=null,this.iGovCount=-1,this.in_govni=new o.default(l.default.xani_ui),this.in_govni.sDetail="",this.in_govni.sBackPrompt="点击这里输入帮派号码或名称",this.in_govni.iBackSize=24,this.in_govni.iTextSize=30,this.btn_find=new r.default(l.default.xani_button),this.btn_find.InitButton("查找按钮60_60"),this.btn_callmaster=new r.default(l.default.xani_button),this.btn_callmaster.InitButton("普通按钮195_55"),this.btn_callmaster.sName="联系帮主",this.btn_applyall=new r.default(l.default.xani_button),this.btn_applyall.InitButton("普通按钮195_55"),this.btn_applyall.sName="一键申请",this.btn_applyone=new r.default(l.default.xani_button),this.btn_applyone.InitButton("普通按钮195_55"),this.btn_applyone.sName="申请加入",this.btn_creategov=new r.default(l.default.xani_button),this.btn_creategov.InitButton("普通按钮195_55"),this.btn_creategov.sName="创建帮派",this.btn_getingov=new r.default(l.default.xani_button),this.btn_getingov.InitButton("普通按钮195_55"),this.btn_getingov.sName="进入帮派",this.aa_applyed=l.default.xani_frame.InitAnimaWithName("选中勾a43_36",null),this.bApplyAll=!1}},{key:"Draw",value:function(){var t,e,i,a,n;for(d.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"帮","派","列","表"),this.btn_close.Draw(),e=this.iX+25,i=this.iY+25,a=this.iW-50,n=this.iH-50,d.default.new_framein(e,i,a,n),e+=20,i+=20,this.ui_govlist.BeginDraw(e,i),t=0;t<this.iGovCount;t++)this.ui_govlist.DrawUnit(0,t,""+(t+1)),this.ui_govlist.bShow(t)&&null!=this.govlist[t]&&(0==this.govlist[t].iInitStat?(this.govlist[t].iInitStat=1,f.default.gi().s_NewGovOperate(1,this.govlist[t].iGovId,0,0,0,"")):1==this.govlist[t].iInitStat?this.ui_govlist.DrawUnit(1,t,"获取中..."):2==this.govlist[t].iInitStat&&(this.govlist[t].bApplyed?this.ui_govlist.DrawUnitEx_Anima(0,t,this.aa_applyed,60,2):this.bApplyAll&&(f.default.gi().s_ApplyForGov(this.govlist[t].iGovId),this.govlist[t].bApplyed=!this.govlist[t].bApplyed),this.ui_govlist.DrawUnit(1,t,this.govlist[t].sGovName),this.ui_govlist.DrawUnit(2,t,""+this.govlist[t].iGovId),this.ui_govlist.DrawUnit(3,t,""+(this.govlist[t].iGovLev+1)),this.ui_govlist.DrawUnit(4,t,this.govlist[t].iMemberCount+"/"+this.govlist[t].iMaxMemberCount),this.ui_govlist.DrawUnit(5,t,this.govlist[t].sMaster)));this.ui_govlist.FinishDraw(),e=this.iX+25+20,i=this.iY+25+20+330+20,d.default.frame_type3("纯色b10_10",e,i,400,180,10,10),d.default.frame_type2("外边框a10_10",e,i,400,180,10,10),d.default.frame_type1("帮派宣言a20_44",e+200-60,i+20,120,20),u.default.gi().DrawTextEx(e+200,i+20+22,"帮派宣言",4278190080,25,101,1,1,0,-2,-2),this.ui_govlist.iLockPoint>=0&&this.ui_govlist.iLockPoint<this.iGovCount?(t=this.ui_govlist.iLockPoint,2==this.govlist[t].iInitStat&&(m.default.gi().FormatEx("#c000000"+this.govlist[t].sDetail,360,20,0,0,20),m.default.gi().Draw(e+20,i+80)),this.btn_callmaster.bDisable=!1,this.btn_applyone.bDisable=!1,this.govlist[t].bApplyed?this.btn_applyone.sName="撤销申请":this.btn_applyone.sName="申请加入",this.btn_getingov.bDisable=!1):(this.btn_callmaster.bDisable=!0,this.btn_applyone.bDisable=!0,this.btn_getingov.bDisable=!0),e+=420,this.in_govni.Move(e,i,300,47),d.default.frame_type1("输入框a20_47",e,i,300,20),this.in_govni.DrawText(),this.btn_find.Move(e+300+30,i-6.5,60,60),this.btn_find.Draw(),this.in_govni.onscr(),i+=67,this.btn_callmaster.Move(e,i,195,55),this.btn_callmaster.Draw(),-1==b.default.mg.iRealGid?(this.btn_applyall.Move(e+205,i,195,55),this.btn_applyall.Draw(),this.btn_applyone.Move(e,i+60,195,55),this.btn_applyone.Draw(),this.btn_creategov.Move(e+205,i+60,195,55),this.btn_creategov.Draw()):(this.btn_getingov.Move(e+205,i,195,55),this.btn_getingov.Draw()),this.bApplyAll=!1}},{key:"ProcTouch",value:function(t,e,i){if(this.ui_govlist.ProcTouch(t,e,i))return!0;if(this.in_govni.ProcTouch(t,e,i))return!0;if(this.btn_find.ProcTouch(t,e,i))return this.btn_find.bCheck()&&(this.in_govni.sDetail.length>0?(f.default.gi().s_NewGovOperate(0,0,0,0,0,this.in_govni.sDetail),f.default.gi().s_NewGovOperate(2,0,0,0,0,""),this.ui_govlist.iLockPoint=-1):g.default.easymsg.AddMessage("请先输入搜索内容")),!0;if(this.ui_govlist.iLockPoint>=0&&this.ui_govlist.iLockPoint<this.iGovCount){var a=this.ui_govlist.iLockPoint;if(this.btn_callmaster.ProcTouch(t,e,i))return this.btn_callmaster.bCheck()&&p.default.OpenChat(this.govlist[a].iMasterId,this.govlist[a].sMaster,6),!0;if(-1==b.default.mg.iRealGid){if(this.btn_applyone.ProcTouch(t,e,i))return this.btn_applyone.bCheck()&&(D.default.me.rbs.iLev<20?_.default.fm.Open("达到20级才能申请入帮"):(f.default.gi().s_ApplyForGov(this.govlist[a].iGovId),this.govlist[a].bApplyed=!this.govlist[a].bApplyed)),!0}else if(this.btn_getingov.ProcTouch(t,e,i))return this.btn_getingov.bCheck()&&(h.default.gi().PopStat(1),f.default.gi().s_GetIntoGov(this.govlist[a].iGovId)),!0}if(-1==b.default.mg.iRealGid){if(this.btn_applyall.ProcTouch(t,e,i))return this.btn_applyall.bCheck()&&(D.default.me.rbs.iLev<20?_.default.fm.Open("达到20级才能申请入帮"):this.bApplyAll=!0),!0;if(this.btn_creategov.ProcTouch(t,e,i))return this.btn_creategov.bCheck()&&_.default.fm.Open("集齐七国旗后可以找郢城的帮派总管创建帮派"),!0}return this.btn_close.ProcTouch(t,e,i)&&this.btn_close.bCheck()&&h.default.gi().PopStat(1),!1}}]),ApplyForGov}();i.default=w,w.Applyed=function(t){var e;null!=(e=h.default.gi().FindStat(h.default.GS_APPLYFORGOV))&&e.ApplyedGovs(t)},w.Get=function(t){var e;null!=(e=h.default.gi().FindStat(h.default.GS_APPLYFORGOV))&&e.GetGovDetail(t)},w.Open=function(t){(h.default.gi().iXStat!=h.default.GS_APPLYFORGOV?h.default.gi().PushStat(h.default.GS_APPLYFORGOV):h.default.gi().LastStat(0)).GetIdList(t)}},{"../../../../../../config/GmConfig":5,"../../../../../../engine/BaseClass":8,"../../../../../../engine/PackageTools":9,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/control/XInput":18,"../../../../../../engine/graphics/AnimaAction":25,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/UIList":80,"../../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../../../engtst/mgm/gameing/me/GmMe":211}],166:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../../../engine/control/XInputNumber")),l=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function GetInGov(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GetInGov);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(GetInGov.__proto__||Object.getPrototypeOf(GetInGov)).call(this));return e.iW=500,e.iH=240,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.in_govid=new u.default(f.default.xani_nui3),e.in_govid.iNumber=0,e.in_govid.MinMax(0,3e4),e.btn_go=new o.default(f.default.xani_button),e.btn_go.InitButton("普通按钮195_55"),e.btn_go.sName="前往",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(GetInGov,r.default),a(GetInGov,[{key:"Draw",value:function(){var t,e,i,a;c.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),t=this.iX+25,e=this.iY+25,i=this.iW-50,a=this.iH-50,c.default.frame_type4("中等框a52_50",t,e,i,a,52,50),l.default.gi().DrawTextEx(t+10,e+35,"请输入想要前往的帮派号码",4278190080,25,101,1,1,0,0,0),this.in_govid.Move(t+275+10,e+35-11,140),this.in_govid.Draw(),this.btn_go.Move(this.iX+this.iW-50-195,this.iY+this.iH-50-55,195,55),this.btn_go.Draw()}},{key:"ProcTouch",value:function(t,e,i){return!!this.in_govid.ProcTouch(t,e,i)||(this.btn_go.ProcTouch(t,e,i)?(this.btn_go.bCheck()&&(d.default.gi().PopStat(1),h.default.gi().s_GetIntoGov(this.in_govid.iNumber)),!0):(3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||d.default.gi().PopStat(1),!1))}}]),GetInGov}();i.default=m,m.Open=function(){d.default.gi().iXStat!=d.default.GS_GETINGOV&&d.default.gi().PushStat(d.default.GS_GETINGOV)}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/PackageTools":9,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/control/XInputNumber":19,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72}],167:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),d=(_interopRequireDefault(t("../../../../../../engtst/mgm/frame/Confirm1")),_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode"))),c=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov")),g=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function ConfirmApply(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ConfirmApply);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ConfirmApply.__proto__||Object.getPrototypeOf(ConfirmApply)).call(this));for(i.iW=312,i.iH=254,i.iX=(n.default.SCRW-i.iW)/2+150,i.iY=(n.default.SCRH-i.iH)/2,i.btn_operates=new Array(4),e=0;e<4;e++)i.btn_operates[e]=new o.default(l.default.xani_button),i.btn_operates[e].InitButton("成员操作131_52");return i.btn_operates[0].sName="聊天",i.btn_operates[1].sName="好友",i.btn_operates[2].sName="同意",i.btn_operates[3].sName="拒绝",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ConfirmApply,r.default),a(ConfirmApply,[{key:"Draw",value:function(){var t;for(d.default.new_framepc(this.iX,this.iY,this.iW,this.iH),l.default.xani_head.DrawAnima(this.iX+20,this.iY+20,"新头像"+this.pgm.iRas,0),u.default.gi().DrawTextEx(this.iX+20+80+10,this.iY+20+20,this.pgm.sName,4294967295,25,101,1,1,0,0,-2),u.default.gi().DrawTextEx(this.iX+20+80+10,this.iY+20+20+40,"号码："+this.pgm.iRid,4294967295,25,101,1,1,0,0,-2),t=0;t<(m.default.mg.bCheckPower(0)?4:2);t++)this.btn_operates[t].Move(this.iX+20+t%2*141,this.iY+20+80+20+t/2*62,131,52),this.btn_operates[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<(m.default.mg.bCheckPower(0)?4:2);a++)if(this.btn_operates[a].ProcTouch(t,e,i)){if(this.btn_operates[a].bCheck())switch(a){case 0:h.default.gi().PopStat(1),c.default.OpenChat(this.pgm.iRid,this.pgm.sName,this.pgm.iRas);break;case 1:f.default.gi().s_FriendOperate(0,this.pgm.iRid,0),h.default.gi().PopStat(1);break;case 2:f.default.gi().s_NewGovOperate(11,this.pgm.iRid,1,0,0,this.pgm.sName),h.default.gi().PopStat(1);break;case 3:f.default.gi().s_NewGovOperate(11,this.pgm.iRid,0,0,0,this.pgm.sName),h.default.gi().PopStat(1)}return!0}return s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||h.default.gi().PopStat(1),!1}}]),ConfirmApply}();i.default=_,_.Open=function(t){var e;t.iRid!=g.default.me.iRid&&((e=h.default.gi().iXStat!=h.default.GS_CONFIRMAPPLY?h.default.gi().PushStat(h.default.GS_CONFIRMAPPLY):h.default.gi().LastStat(0)).pgm=t,m.default.mg.bCheckPower(0)?e.iH=254:e.iH=192)}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../../../engtst/mgm/gameing/me/GmMe":211}],168:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/control/XInput")),l=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/format/FormatString")),g=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/EasyMessage"));_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function Gov_SetDetail(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Gov_SetDetail);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Gov_SetDetail.__proto__||Object.getPrototypeOf(Gov_SetDetail)).call(this));return e.iW=500,e.iH=400,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_ok=new o.default(f.default.xani_button),e.btn_ok.InitButton("普通按钮140_55"),e.btn_ok.Move(e.iX+e.iW-30-140,e.iY+e.iH-30-55,140,55),e.btn_ok.sName="修改",e.btn_cancel=new o.default(f.default.xani_button),e.btn_cancel.InitButton("普通按钮140_55"),e.btn_cancel.Move(e.iX+30,e.iY+e.iH-30-55,140,55),e.btn_cancel.sName="取消",e.in_name=new u.default(f.default.xani_ui),e.in_name.sDetail="",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Gov_SetDetail,r.default),a(Gov_SetDetail,[{key:"Draw",value:function(){var t,e;c.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),c.default.frame_type1("帮派宣言a20_44",this.iX+this.iW/2-60,this.iY+30,120,20),l.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+30+22,"帮派宣言",4278190080,25,101,1,1,0,-2,-2),t=this.iX+30,e=this.iY+20+44+20+5,this.in_name.Move(t,e,this.iW-60,200),c.default.new_framepc(t,e,this.iW-60,200),this.in_name.onscr(),this.in_name.sDetail.length<=0?l.default.gi().DrawTextEx(t+10,e+10,"点击这里输入新的帮派宣言",1627389951,24,101,1,1,0,0,0):(m.default.gi().FormatEx(this.in_name.sDetail,this.iW-60-20,25,0,0,30),m.default.gi().Draw(t+10,e+10)),this.btn_ok.Draw(),this.btn_cancel.Draw()}},{key:"ProcTouch",value:function(t,e,i){if(this.in_name.ProcTouch(t,e,i))return!0;if(this.btn_cancel.ProcTouch(t,e,i))return this.btn_cancel.bCheck()&&d.default.gi().PopStat(1),!0;if(this.btn_ok.ProcTouch(t,e,i)){if(this.btn_ok.bCheck())if(this.in_name.sDetail.length>0){var a=this.in_name.sDetail.getBytes("GBK");if(a.length<4||a.length>80)return g.default.easymsg.AddMessage("帮派宣言2-40个字"),!0;h.default.gi().s_NewGovOperate(19,0,0,0,0,this.in_name.sDetail),d.default.gi().PopStat(1)}else g.default.easymsg.AddMessage("请输入新的帮派宣言");return!0}return s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||d.default.gi().PopStat(1),!1}}]),Gov_SetDetail}();i.default=_,_.Open=function(t){d.default.gi().PushStat(d.default.GS_GOV_SETDETAIL).in_name.sDetail=t}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/control/XInput":18,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../../engtst/mgm/gameing/gov/MyGov":160}],169:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/Confirm1")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage")),g=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send")),_=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov")),p=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var b=function(t){function MemberOperate(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MemberOperate);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MemberOperate.__proto__||Object.getPrototypeOf(MemberOperate)).call(this));for(i.iW=312,i.iH=316,i.iX=(n.default.SCRW-i.iW)/2+150,i.iY=(n.default.SCRH-i.iH)/2,i.btn_operates=new Array(6),e=0;e<6;e++)i.btn_operates[e]=new o.default(l.default.xani_button),i.btn_operates[e].InitButton("成员操作131_52");for(i.btn_operates[0].sName="聊天",i.btn_operates[1].sName="好友",i.btn_operates[2].sName="任命",i.btn_operates[3].sName="踢出",i.btn_operates[4].sName="权限",i.jW=292,i.jH=258,i.jX=i.iX-i.jW-20,i.jY=i.iY+70,i.btn_joblist=new Array(10),e=0;e<8;e++)i.btn_joblist[e]=new o.default(l.default.xani_button),i.btn_joblist[e].Move(i.jX+10+e%2*141,i.jY+10+e/2*62,131,52),i.btn_joblist[e].InitButton("成员操作131_52"),i.btn_joblist[e].sName=_.default._GOVJOBS[e];return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MemberOperate,r.default),a(MemberOperate,[{key:"Draw",value:function(){var t,e;if(c.default.new_framepc(this.iX,this.iY,this.iW,this.iH),l.default.xani_head.DrawAnima(this.iX+20,this.iY+20,"新头像"+this.pgm.iRas,0),u.default.gi().DrawTextEx(this.iX+20+80+10,this.iY+20+20,this.pgm.sName,4294967295,25,101,1,1,0,0,-2),u.default.gi().DrawTextEx(this.iX+20+80+10,this.iY+20+20+40,"号码："+this.pgm.iRid,4294967295,25,101,1,1,0,0,-2),t=0,e=0,this.btn_operates[e].Move(this.iX+20+t%2*141,this.iY+20+80+20+t/2*62,131,52),this.btn_operates[e].Draw(),t++,e++,this.btn_operates[e].Move(this.iX+20+t%2*141,this.iY+20+80+20+t/2*62,131,52),this.btn_operates[e].Draw(),t++,e++,this.pgm.iJob>_.default.mg.iJob&&_.default.mg.bCheckPower(0)?(this.btn_operates[e].Move(this.iX+20+t%2*141,this.iY+20+80+20+t/2*62,131,52),this.btn_operates[e].Draw(),t++):this.btn_operates[e].Move(-100,-100,5,5),e++,this.pgm.iJob>_.default.mg.iJob&&_.default.mg.bCheckPower(0)?(this.btn_operates[e].Move(this.iX+20+t%2*141,this.iY+20+80+20+t/2*62,131,52),this.btn_operates[e].Draw(),t++):this.btn_operates[e].Move(-100,-100,5,5),e++,0==_.default.mg.iJob?(this.btn_operates[e].Move(this.iX+20+t%2*141,this.iY+20+80+20+t/2*62,131,52),this.btn_operates[e].Draw(),t++):this.btn_operates[e].Move(-100,-100,5,5),e++,this.bAppoint){for(c.default.new_framepc(this.jX,this.jY,this.jW,this.jH),t=0;t<8;t++)this.btn_joblist[t].Draw();d.default.end(d.default.CONFIRM_GOVAPPOINT)&&d.default.bConfirm&&(f.default.gi().s_NewGovOperate(7,this.pgm.iRid,this.iTmpJob,0,0,this.pgm.sName),h.default.gi().PopStat(1))}d.default.end(d.default.CONFIRM_GOVKICKMEMBER)&&d.default.bConfirm&&(f.default.gi().s_NewGovOperate(7,this.pgm.iRid,100,0,0,this.pgm.sName),h.default.gi().PopStat(1))}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.bAppoint){for(a=0;a<8;a++)this.btn_joblist[a].ProcTouch(t,e,i)&&this.btn_joblist[a].bCheck()&&(this.iTmpJob=_.default._JOBIDS[a],_.default._JOBIDS[a]<_.default.mg.iJob?m.default.fm.Open("不能任命高于自己的职位"):_.default._JOBIDS[a]==_.default.mg.iJob?d.default.start(d.default.CONFIRM_GOVAPPOINT,"确定将自己的帮派职位转让给他（转让后自己将成为帮众）？"):(f.default.gi().s_NewGovOperate(7,this.pgm.iRid,this.iTmpJob,0,0,this.pgm.sName),h.default.gi().PopStat(1)));if(s.default.bInRect(e,i,this.jX,this.jY,this.jW,this.jH))return!0}for(a=0;a<5;a++)if(this.btn_operates[a].ProcTouch(t,e,i)){if(this.btn_operates[a].bCheck())switch(a){case 0:h.default.gi().PopStat(1),g.default.OpenChat(this.pgm.iRid,this.pgm.sName,this.pgm.iRas);break;case 1:f.default.gi().s_FriendOperate(0,this.pgm.iRid,0),h.default.gi().PopStat(1);break;case 2:this.bAppoint=!0;break;case 3:d.default.start(d.default.CONFIRM_GOVKICKMEMBER,"是否确定将#e"+this.pgm.sName+"("+this.pgm.iRid+")#e踢出帮派？");break;case 4:h.default.gi().PopStat(1),SetGovPower.Open(this.pgm)}return!0}return s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||h.default.gi().PopStat(1),!1}}]),MemberOperate}();i.default=b,b.Open=function(t){if(t.iRid!=p.default.me.iRid){var e;(e=h.default.gi().iXStat!=h.default.GS_MEMBEROPERATE?h.default.gi().PushStat(h.default.GS_MEMBEROPERATE):h.default.gi().LastStat(0)).pgm=t;var i=2;t.iJob>_.default.mg.iJob&&_.default.mg.bCheckPower(0)&&(i+=2),0==_.default.mg.iJob&&i++,e.iH=1==i||2==i?192:3==i||4==i?254:316}}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../../../engtst/mgm/gameing/me/GmMe":211}],170:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../../../../../config/GameData"))),s=_interopRequireDefault(t("../../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2"))),l=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/Confirm1")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/UIList")),_=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/format/FormatString")),p=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/EasyMessage")),b=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage")),D=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/PromptMessage")),y=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send")),w=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/GovFrame")),S=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov")),x=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/help/BeginersGuide"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var P=function GOV_MEMBER(){_classCallCheck(this,GOV_MEMBER),this.iRid=0},v=function GOV_APPLYED(){_classCallCheck(this,GOV_APPLYED)},R=function GOV_EVENT(){_classCallCheck(this,GOV_EVENT)},M=function(t){function NewGovFrame(t){_classCallCheck(this,NewGovFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(NewGovFrame.__proto__||Object.getPrototypeOf(NewGovFrame)).call(this));for(i.sBuildingDetail=["青龙堂：可提升青龙任务的效率以及雇佣工人的收益","白虎堂：可降低维护的安定度消耗，安定度影响技能研究效率","朱雀堂：可提高成员炼丹成功率和副产品率","玄武堂：可提升行动力上限和帮派维护增加的守护兽经验","学院：可提升帮派维护增加的技能经验","金库：可提升帮派资金上限","商会：可增加帮派商店出产道具种类和数量","厢房：可提升帮派人数上限","药房：可增加帮派药房出产道具种类和数量"],i._GOVWELFARE=[["帮派修炼","提升修炼，战斗更加得心应手","#c0000001.\t物理攻击修炼#e# # 每级提升2%物理攻击的伤害效果#e2.\t法术攻击修炼#e# # 每级提升2%法术攻击的伤害效果#e3.\t物理防御修炼#e# # 每级降低2%受到的物理伤害效#e4.\t法术防御修炼#e# # 每级降低2%受到的法术伤害效果#e5.\t封印修炼#e# # 每级提升2%封印命中几率#e6.\t抗封修炼#e# # 每级降低2%被封印命中几率"],["帮派技能","学习辅助技能，升级赚钱两不误","#c0000001.\t强身术#e# # 学习后能增加气血上限#e2.\t修心#e# # 学习后能增加魔法上限#e3.\t健体术#e# # 学习后能增加体力上限#e4.\t炼丹术#e# # 学习后可以提高炼丹的能力#e5.\t烹饪#e# #  学习后可以提高制作食物的能力#e6.\t锻造术#e# # 学习后可以提高制作头盔和腰带的能力#e7.\t冶金术#e# # 学习后可以提高制作武器和项链的能力#e8.\t剪裁术#e# # 学习后可以提高制作衣服和靴子的能力"],["帮派商店","限时折扣，特色产品，仅此一家","#c000000帮派招商，商人们都在帮里开店了，我们有特殊渠道进货，价格有优惠哦#e#e每日11:00,15:00,19:00,23:00，帮派商店会刷新一定数量商品，种类繁多，价格优惠。#e#e升级商会可以增加帮派商店出产种类和数量#e#e"],["帮派药房","卖治病的药，售炼心的炉","#c000000江湖人士，过得都是刀口舔血的日子，楚王感怀，允许各帮各派建立帮派药房。#e#e每日12:00,15:00,18:00,21:00，帮派药房刷新一定数量物品，包括药材，丹方，\t以及丹炉。玩家可消耗现金，元宝或者帮贡选择购买。可能会有惊喜打折物品哦。#e#e升级药房可以增加帮派药房出产种类和数量#e#e"]],i._GOVACTIVITY=[["帮派竞赛","风云起，群帮争霸，狼烟升，万雄交锋。","#c000000# # 帮派竞赛每周周一至周五帮主消耗帮派资金进行报名，报名资金排名前8的帮派入选帮战。#e# # 帮派成功入选后，入帮3天以上等级达到20级的玩家，可于周五周六周日的19:30~20:00由咸阳帮战接引人进入帮战地图。#e# # 帮派竞赛分为粮草争夺战和场地对战，周五周六为粮草争夺战，周日为场地对战。#e# # 粮草争夺战双方初始粮草为100，任意一方粮草归零或者成员全部离开场地为负。#e# # 场地对战以成员全部离开场地者为负。#e帮派竞赛期间每次死亡，损失部分体力，体力为0，自动离场。#e# # 帮派竞赛期间每次赢得战斗或者成功运送粮草获得帮贡等奖励；体力归零自动离场获得经验帮贡，可能获得道具奖励；胜利帮派会在己方场地内刷新10个大宝箱以供捡取。"],["帮派副本","一段传奇，一个故事，探索小千世界之谜。","#c000000# # 拟定帮派守护兽达到30级时，帮派副本由帮主或拥有开启副本权限的成员消耗200万帮派资金，1000行动力开启，在开启时间内，加入帮派大于5天等级达到35的帮众方可参加，帮派副本开启时间持续2小时。#e#e# # 副本内玩家每三分钟将获得一次经验与帮贡奖励。#e#e# # 完成副本后，副本内所有玩家将获得侠义礼盒，惊喜多多"],["朱雀任务","访朱雀总管，寻神秘丹方。可获得帮贡，丹方","#c000000# # 玩家达到20后可以在帮派领地里找朱雀堂总管领取朱雀任务，完成任务可获得大量经验，金钱和帮贡，并且在第十次任务完成时获得丹方，丹方是炼丹的必需品。"],["青龙任务","倾众人之力，为帮派建设。可获得海量帮贡","#c000000# # 玩家达到20后可以在帮派领地里找朱雀堂总管领取青龙任务，完成任务可获得大量经验，金钱和帮贡。#e#e# # 青龙任务可以为帮派提供大量帮派建筑进度。"],["玄武任务","劳心劳力，为帮派谋取资金。可获得海量帮贡","#c000000# # 玩家达到20后可以在帮派领地里找朱雀堂总管领取玄武任务，完成任务可获得大量经验，金钱和帮贡。#e#e# # 玄武任务可以为帮派提供安定度以及大量帮派资金。"],["白虎任务","攘外安内，稳固帮内安定。可获得海量帮贡","#c000000# # 玩家达到20后可以在帮派领地里找朱雀堂总管领取白虎任务，完成任务可获得大量经验，金钱和帮贡。#e#e# # 白虎任务可以为帮派提供大量安定度。"]],i.iW=1100,i.iH=620,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.btn_close=new u.default(f.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.iPage=0,i.btn_page=new Array(4),e=0;e<4;e++)i.btn_page[e]=new u.default(f.default.xani_nui2),i.btn_page[e].InitButton("右侧标签"),i.btn_page[e].Move(i.iX+i.iW-15,i.iY+40+125*e,50,140);for(i.btn0_fastback=new u.default(f.default.xani_button),i.btn0_fastback.InitButton("普通按钮170_55"),i.btn0_fastback.Move(i.iX+i.iW-25-20-170,i.iY+25+20,170,55),i.btn0_fastback.sName="快速回帮",i.btn0_govstatus=new u.default(f.default.xani_button),i.btn0_govstatus.bSingleButton=!0,i.btn0_govbuilding=new u.default(f.default.xani_button),i.btn0_govbuilding.bSingleButton=!0,i.btn0_editdetail=new u.default(f.default.xani_button),i.btn0_editdetail.bSingleButton=!0,i.i0Table=0,i.i0ShowExplain=-1,i.btn1_page=new Array(3),i.btn1_page[0]=new u.default(f.default.xani_button),i.btn1_page[0].InitButton("选择按钮145_56"),i.btn1_page[0].sName="成员列表",i.btn1_page[1]=new u.default(f.default.xani_button),i.btn1_page[1].InitButton("选择按钮145_56"),i.btn1_page[1].sName="申请列表",i.btn1_page[2]=new u.default(f.default.xani_button),i.btn1_page[2].InitButton("选择按钮145_56"),i.btn1_page[2].sName="帮派事件",i.btn1_message=new u.default(f.default.xani_button),i.btn1_message.InitButton("喇叭按钮60_60"),i.btn1_leavegov=new u.default(f.default.xani_button),i.btn1_leavegov.InitButton("普通按钮170_55"),i.btn1_leavegov.sName="脱离帮派",i.ui1a_memberlist=new g.default(0,9,i.iW-90,450),i.ui1a_memberlist.SetTitle(0,"编号",70,!1),i.ui1a_memberlist.SetTitle(1,"名字",180,!0),i.ui1a_memberlist.SetTitle(2,"门派",80,!0),i.ui1a_memberlist.SetTitle(3,"等级",70,!0),i.ui1a_memberlist.SetTitle(4,"职位",80,!0),i.ui1a_memberlist.SetTitle(5,"剩余帮贡",110,!0),i.ui1a_memberlist.SetTitle(6,"历史帮贡",110,!0),i.ui1a_memberlist.SetTitle(7,"入帮时间",155,!0),i.ui1a_memberlist.SetTitle(8,"离线时间",155,!0),i.ui1b_applylist=new g.default(0,6,i.iW-90,450),i.ui1b_applylist.SetTitle(0,"序号",70,!1),i.ui1b_applylist.SetTitle(1,"名字",180,!1),i.ui1b_applylist.SetTitle(2,"门派",80,!1),i.ui1b_applylist.SetTitle(3,"等级",70,!1),i.ui1b_applylist.SetTitle(4,"号码",120,!1),i.ui1b_applylist.SetTitle(5,"申请时间",490,!1),i.ui1c_govevent=new g.default(0,2,i.iW-90,450),i.ui1c_govevent.SetTitle(0,"日期",250,!1),i.ui1c_govevent.SetTitle(1,"事件",760,!1),i.ui1c_govevent.iTitleHeight=0,i.ui1c_govevent.iAlign[1]=0,i.iSortType=-1,i.iSortUD=0,i.btn2_go=new Array(4),i.btn2_detail=new Array(4),e=0;e<4;e++)i.btn2_go[e]=new u.default(f.default.xani_button),i.btn2_go[e].InitButton("普通按钮140_55"),i.btn2_go[e].sName="前往",i.btn2_detail[e]=new u.default(f.default.xani_button),i.btn2_detail[e].bSingleButton=!0;for(i.bLock2=!1,i.iOffY2=0,i.btn3_go=new Array(6),i.btn3_detail=new Array(6),e=0;e<6;e++)i.btn3_go[e]=new u.default(f.default.xani_button),i.btn3_go[e].InitButton("普通按钮140_55"),i.btn3_go[e].sName="前往",i.btn3_detail[e]=new u.default(f.default.xani_button),i.btn3_detail[e].bSingleButton=!0;return i.bLock3=!1,i.iOffY3=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(NewGovFrame,o.default),a(NewGovFrame,[{key:"_InitMemberDetail",value:function(t){var e,i=t.GetNextInt();for(e=0;e<this.iMCount;e++)if(2==this.gov_members[e].iInitStat&&this.gov_members[e].iRid==i)return this.gov_members[e].sName=t.GetNextString(),this.gov_members[e].iSchoolId=t.GetNextByte(),this.gov_members[e].iLev=t.GetNextShort(),this.gov_members[e].iJob=t.GetNextShort(),this.gov_members[e].iTick=t.GetNextInt(),this.gov_members[e].iMaxTick=t.GetNextInt(),this.gov_members[e].sJoinDate=t.GetNextString(),this.gov_members[e].sLoginTime=t.GetNextString(),this.gov_members[e].iPower=t.GetNextShort(),this.gov_members[e].iRas=t.GetNextByte(),this.gov_members[e].iOnLine=t.GetNextByte(),void(this.gov_members[e].iInitStat=3)}},{key:"_ApplyDetail",value:function(t){var e,i=t.GetNextInt();for(e=0;e<this.iACount;e++)if(2==this.gov_applys[e].iInitStat&&this.gov_applys[e].iRid==i){this.gov_applys[e].sName=t.GetNextString(),this.gov_applys[e].iSchoolId=t.GetNextInt(),this.gov_applys[e].iRas=t.GetNextInt(),this.gov_applys[e].iLev=t.GetNextInt(),this.gov_applys[e].sATime=t.GetNextString(),this.gov_applys[e].iInitStat=3;break}}},{key:"_ApplyList",value:function(t){var e;if(this.iACount=t.GetNextShort(),!(this.iACount<=0))for(this.gov_applys=new Array(this.iACount),e=0;e<this.iACount;e++)this.gov_applys[e]=new v,this.gov_applys[e].iRid=t.GetNextInt(),this.gov_applys[e].iInitStat=1}},{key:"_InitEventDetail",value:function(t){for(var e=t.GetNextInt(),i=0;i<this.iECount;i++)this.gov_events[i].iEid==e&&(this.gov_events[i].sTime=t.GetNextString(),this.gov_events[i].sDetail=t.GetNextString(),this.gov_events[i].iInitStat=3)}},{key:"_InitGovEvent",value:function(t){this.iECount=t.GetNextInt(),this.gov_events=new Array(this.iECount);for(var e=0;e<this.iECount;e++)this.gov_events[e]=new R,this.gov_events[e].iEid=t.GetNextInt(),this.gov_events[e].iInitStat=1}},{key:"_InitMemberList",value:function(t){var e,i=t.GetNextByte(),a=t.GetNextShort(),n=t.GetNextShort();if(0==n){for(this.gov_members=new Array(a),e=0;e<a;e++)this.gov_members[e]=new P,this.gov_members[e].iInitStat=0;this.iMCount=a,this.iSortType=i}for(;n<this.iMCount&&0!=(e=t.GetNextInt());)this.gov_members[n].iRid=e,this.gov_members[n].iInitStat=1,n++}},{key:"GetBase",value:function(t){this.iLev=t.GetNextInt(),this.sMasterName=t.GetNextString(),this.iMasterId=t.GetNextInt(),this.sFightGovName=t.GetNextString(),this.iFightGovId=t.GetNextShort(),this.sDetail=t.GetNextString(),this.iMemberCount=t.GetNextInt(),this.iMaxMemberCount=t.GetNextInt(),this.iMoney=t.GetNextInt(),this.iMaxMoney=t.GetNextInt(),this.iExp=t.GetNextInt(),this.iMaxExp=t.GetNextInt(),this.iUpgradeExp=t.GetNextInt(),this.iStable=t.GetNextInt(),this.iMaxStable=t.GetNextInt(),this.iTick=t.GetNextInt(),this.iMaxTick=t.GetNextInt(),this.iBuildingId=t.GetNextByte(),this.iBuildingProc=t.GetNextInt(),this.iBuildingUpgrade=t.GetNextInt(),this.iReserchId=t.GetNextByte(),this.iReserchProc=t.GetNextInt(),this.iReserchUpgrade=t.GetNextInt(),this.iMtLev=t.GetNextInt(),this.iBuildingLevs=new Int32Array(9),this.iBuildingProcs=new Int32Array(9);for(var e=0;e<9;e++)t.GetNextByte(),this.iBuildingLevs[e]=t.GetNextShort(),this.iBuildingProcs[e]=t.GetNextInt()}},{key:"Draw",value:function(){var t;for(m.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"帮","派","列","表"),this.btn_close.Draw(),t=0;t<4;t++)this.iPage==t&&(this.btn_page[t].bMouseIn=!0,this.btn_page[t].bMouseDown=!0),this.btn_page[t].Draw();switch(m.default.new_lableword4(this.iX+this.iW-15,this.iY+50+0-4,40,70,0==this.iPage,"帮","派","信","息"),m.default.new_lableword4(this.iX+this.iW-15,this.iY+50+130-8,40,70,1==this.iPage,"帮","派","成","员"),m.default.new_lableword4(this.iX+this.iW-15,this.iY+50+260-12,40,70,2==this.iPage,"帮","派,","福","利"),m.default.new_lableword4(this.iX+this.iW-15,this.iY+50+390-16,40,70,3==this.iPage,"帮","派","活","动"),this.iPage){case 0:this.Draw_0();break;case 1:this.Draw_1();break;case 2:this.Draw_2();break;case 3:this.Draw_3()}}},{key:"Draw_0",value:function(){var t,e,i,a,n;if(e=this.iX+25,i=this.iY+25,a=this.iW-50,n=this.iH-50,m.default.new_framein(e,i,a,n),e=this.iX+25+20,i=this.iY+25+20,m.default.frame_type4("淡蓝色a30_30",e,i,500,440,30,30),e+=10,i+=20,this.DrawMessage(e,i,160,300,"帮派名称",S.default.mg.sName),this.DrawMessage(e,i+50,160,80,"帮派等级",""+(this.iLev+1)),this.DrawMessage(e+160+80,i+50,140,80,"帮派号码",""+S.default.mg.iRealGid),this.DrawMessage(e,i+100,160,300,"帮      主",this.sMasterName),this.DrawMessage(e,i+150,160,300,"敌对帮派",0==this.iFightGovId?"无":this.sFightGovName),e+=20,i+=200,this.btn0_editdetail.Move(e,i,440,200),m.default.frame_type3("纯色b10_10",e,i,440,200,10,10),m.default.frame_type2("外边框a10_10",e,i,440,200,10,10),m.default.frame_type1("帮派宣言a20_44",e+220-60,i+20,120,20),l.default.gi().DrawTextEx(e+220,i+20+22,"帮派宣言",4278190080,25,101,1,1,0,-2,-2),_.default.gi().FormatEx("#c000000"+this.sDetail,400,20,0,0,20),_.default.gi().Draw(e+20,i+80),e=this.iX+25+20,i=this.iY+25+20+440+10,m.default.frame_type4("淡蓝色a30_30",e,i,500,80,30,30),e+=10,i+=20,this.DrawMessage(e,i,160,100,"我的职位",w.default.sJob(S.default.mg.iJob)),this.DrawMessage(e+180+80,i,100,100,"帮贡",""+S.default.mg.iTick),e=this.iX+25+20+500+10,i=this.iY+25+20,this.btn0_fastback.Draw(),this.btn0_govstatus.Move(e+30,i,140,70),this.btn0_govbuilding.Move(e+30+145,i,140,70),m.default.frame_type4(0==this.i0Table?"淡蓝色a30_30":"蓝色a30_30",e+30,i,140,90,30,30),m.default.frame_type4(1==this.i0Table?"淡蓝色a30_30":"蓝色a30_30",e+30+145,i,140,90,30,30),m.default.frame_type4("淡蓝色a30_30",e,i+60,500,470,30,30),e+=10,i+=75,t=45,0==this.i0Table)l.default.gi().DrawText_2(this.btn0_govstatus.iX+this.btn0_govstatus.iW/2,this.btn0_govstatus.iY+this.btn0_govstatus.iH/2,"帮派状态",4294967040,30,101,1,1,0,-2,-2,4,4278199373),l.default.gi().DrawTextEx(this.btn0_govbuilding.iX+this.btn0_govbuilding.iW/2,this.btn0_govbuilding.iY+this.btn0_govbuilding.iH/2,"帮派建筑",4278190080,30,101,1,1,0,-2,-2),m.default.frame_type3("纯色c30_30",this.btn0_govstatus.iX+2,this.btn0_govstatus.iY+60,136,30,30,30),this.DrawMessage1(e,i+0*t,200,260,r.default.CalcRate(this.iMemberCount,this.iMaxMemberCount,260),"成员数量",this.iMemberCount+"/"+this.iMaxMemberCount),this.DrawMessage1(e,i+1*t,200,260,r.default.CalcRate(this.iMoney,this.iMaxMoney,260),"帮派资金",this.iMoney+"/"+this.iMaxMoney),this.DrawMessage1(e,i+2*t,200,260,r.default.CalcRate(this.iExp,this.iMaxExp,260),"当前繁荣度",this.iExp+"/"+this.iMaxExp),this.DrawMessage1(e,i+3*t,200,260,0,"升级繁荣度",""+this.iUpgradeExp),this.DrawMessage1(e,i+4*t,200,260,r.default.CalcRate(this.iStable,this.iMaxStable,260),"安定度",this.iStable+"/"+this.iMaxStable),this.DrawMessage1(e,i+5*t,200,260,r.default.CalcRate(this.iTick,this.iMaxTick,260),"帮派行动力",this.iTick+"/"+this.iMaxTick),this.DrawMessage1(e,i+6*t,200,260,r.default.CalcRate(this.iBuildingProc,this.iBuildingUpgrade,260),"当前建造建筑",w.default.sBuilding(this.iBuildingId)+"("+this.iBuildingProc+"/"+this.iBuildingUpgrade+")"),this.DrawMessage1(e,i+7*t,200,260,r.default.CalcRate(this.iReserchProc,this.iReserchUpgrade,260),"当前研究科技",w.default.sSkill(this.iReserchId)+"("+this.iReserchProc+"/"+this.iReserchUpgrade+")"),this.DrawMessage1(e,i+8*t,200,260,0,"当前维护级别",0==this.iMtLev?"低":1==this.iMtLev?"中":"高"),this.DrawMessage1(e,i+9*t,200,260,0,"守护兽等级",""+S.default.mg.iShsLev);else for(l.default.gi().DrawTextEx(this.btn0_govstatus.iX+this.btn0_govstatus.iW/2,this.btn0_govstatus.iY+this.btn0_govstatus.iH/2,"帮派状态",4278190080,30,101,1,1,0,-2,-2),l.default.gi().DrawText_2(this.btn0_govbuilding.iX+this.btn0_govbuilding.iW/2,this.btn0_govbuilding.iY+this.btn0_govbuilding.iH/2,"帮派建筑",4294967040,30,101,1,1,0,-2,-2,4,4278199373),m.default.frame_type3("纯色c30_30",this.btn0_govbuilding.iX+2,this.btn0_govbuilding.iY+60,136,30,30,30),t=0;t<9;t++)this.DrawMessage1(e,i+50*t,200,260,r.default.CalcRate(this.iBuildingProcs[t],S.default.iBuildingUpgrad[this.iBuildingLevs[t]]/10,260),w.default.sBuilding(t),this.iBuildingProcs[t]+"/"+S.default.iBuildingUpgrad[this.iBuildingLevs[t]]/10),l.default.gi().DrawTextEx(e+10+110,i+20+50*t,this.iBuildingLevs[t]+"级",4294967295,30,101,1,1,0,0,-2);this.i0Lx=e,this.i0Ly=i,this.i0ShowExplain>=0&&(_.default.gi().FormatEx(this.sBuildingDetail[this.i0ShowExplain],260,20,0,0,25),m.default.frame_type4("蓝色a30_30",e-300,i+50*this.i0ShowExplain-_.default.gi().iH/2,300,40+_.default.gi().iH,30,30),_.default.gi().Draw(e-300+20,i+50*this.i0ShowExplain-_.default.gi().iH/2+20)),c.default.end(c.default.CONFIRM_BACKGOV)&&c.default.bConfirm&&(h.default.gi().s_NewGovOperate(4,0,0,0,0,""),d.default.gi().PopStat(1))}},{key:"DrawMessage1",value:function(t,e,i,a,n,s,o){l.default.gi().DrawTextEx(t+10,e+20,s,4278190080,30,101,1,1,0,0,-2),m.default.frame_type1("进度条背景a20_38",t+i,e+1,a,20);(n=r.default.CalcRate(n,a,a-3-3))>0&&(l.default.gi().SetViewClip(t+i+3,e,t+i+n/2+3,e+50),f.default.xani_frame.DrawAnima(t+i+3,e+5,"进度条a150_30",0),l.default.gi().NoClip(),l.default.gi().SetViewClip(t+i+n/2+3,e,t+i+n+3,e+50),f.default.xani_frame.DrawAnima(t+i-150+n+3,e+5,"进度条a150_30",1),l.default.gi().NoClip()),l.default.gi().DrawTextEx(t+i+a/2,e+20,o,4294967295,20,101,1,1,0,-2,-2)}},{key:"DrawMessage",value:function(t,e,i,a,n,s){l.default.gi().DrawTextEx(t+i/2,e+20,n,4278190080,30,101,1,1,0,-2,-2),m.default.frame_type1("文本框a20_40",t+i,e,a,20),l.default.gi().DrawTextEx(t+i+a/2,e+20,s,4294967295,25,101,1,1,0,-2,-2)}},{key:"Draw_1",value:function(){var t,e,i,a,n;for(e=this.iX+25,i=this.iY+25,a=this.iW-50,n=this.iH-50,m.default.new_framein(e,i,a,n),e+=20,i+=20,this.btn1_page[this.i1Page].bMouseIn=!0,this.btn1_page[this.i1Page].bMouseDown=!0,t=0;t<3;t++)this.btn1_page[t].Move(e+165*t,i,145,56),this.btn1_page[t].Draw();switch(this.i1Page){case 0:this.Draw_1a(e,i);break;case 1:this.Draw_1b(e,i);break;case 2:this.Draw_1c(e,i)}}},{key:"Draw_1a",value:function(t,e){var i,a;for(S.default.mg.bCheckPower(3)&&(this.btn1_message.Move(t+600,e,60,60),this.btn1_message.Draw()),this.btn1_leavegov.Move(this.iX+this.iW-25-20-170,e,170,55),this.btn1_leavegov.Draw(),e+=75,this.ui1a_memberlist.BeginDraw(t,e),a=0;a<this.iMCount;a++)i=0==this.iSortUD?a:this.iMCount-a-1,this.ui1a_memberlist.DrawUnit(0,a,""+(a+1)),this.ui1a_memberlist.bShow(a)&&null!=this.gov_members[i]&&(1==this.gov_members[i].iInitStat?(h.default.gi().s_NewGovOperate(6,this.gov_members[i].iRid,0,0,0,""),this.gov_members[i].iInitStat=2):2==this.gov_members[i].iInitStat?this.ui1a_memberlist.DrawUnit(1,a,"获取中..."):3==this.gov_members[i].iInitStat&&(this.ui1a_memberlist.DrawUnit(1,a,this.gov_members[i].sName),this.ui1a_memberlist.DrawUnit(2,a,n.default.sSchools[this.gov_members[i].iSchoolId]),this.ui1a_memberlist.DrawUnit(3,a,""+this.gov_members[i].iLev),this.ui1a_memberlist.DrawUnit(4,a,w.default.sJob(this.gov_members[i].iJob)),this.ui1a_memberlist.DrawUnit(5,a,""+this.gov_members[i].iTick),this.ui1a_memberlist.DrawUnit(6,a,""+this.gov_members[i].iMaxTick),this.ui1a_memberlist.DrawUnit(7,a,this.gov_members[i].sJoinDate),this.ui1a_memberlist.DrawUnit(8,a,0==this.gov_members[i].iOnLine?this.gov_members[i].sLoginTime:"在线")));this.ui1a_memberlist.FinishDraw(),this.iSortType==this.ui1a_memberlist.iSortType?this.iSortUD!=this.ui1a_memberlist.iSortUD&&(this.iSortUD=this.ui1a_memberlist.iSortUD):(this.iSortType=this.ui1a_memberlist.iSortType,this.iSortUD=0,this.iSortType>=1&&this.iSortType<=8&&(h.default.gi().s_NewGovOperate(5,this.iSortType,0,0,0,""),this.iMCount=0,this.ui1a_memberlist.iOffY=0)),(i=this.ui1a_memberlist.iChecked())>=0&&(0==this.iSortUD||(i=this.iMCount-i-1),MemberOperate.Open(this.gov_members[i])),c.default.end(c.default.CONFIRM_LEAVEGOV)&&c.default.bConfirm&&(h.default.gi().s_LeaveGov(),S.default.mg.iRealGid=-1,d.default.gi().PopStat(1))}},{key:"Draw_1b",value:function(t,e){var i,a;for(e+=75,this.ui1b_applylist.BeginDraw(t,e),a=0;a<this.iACount;a++)i=a,this.ui1b_applylist.DrawUnit(0,a,""+(a+1)),this.ui1b_applylist.bShow(a)&&null!=this.gov_applys[i]&&(1==this.gov_applys[i].iInitStat?(h.default.gi().s_NewGovOperate(10,this.gov_applys[i].iRid,0,0,0,""),this.gov_applys[i].iInitStat=2):2==this.gov_applys[i].iInitStat?this.ui1b_applylist.DrawUnit(1,a,"获取中..."):3==this.gov_applys[i].iInitStat&&(this.ui1b_applylist.DrawUnit(1,a,this.gov_applys[i].sName),this.ui1b_applylist.DrawUnit(2,a,n.default.sSchools[this.gov_applys[i].iSchoolId]),this.ui1b_applylist.DrawUnit(3,a,""+this.gov_applys[i].iLev),this.ui1b_applylist.DrawUnit(4,a,""+this.gov_applys[i].iRid),this.ui1b_applylist.DrawUnit(5,a,this.gov_applys[i].sATime)));this.ui1b_applylist.FinishDraw(),(i=this.ui1b_applylist.iChecked())>=0&&i<this.iACount&&ConfirmApply.Open(this.gov_applys[i])}},{key:"Draw_1c",value:function(t,e){var i,a;for(e+=75,this.ui1c_govevent.BeginDraw(t,e),a=0;a<this.iECount;a++)i=a,this.ui1c_govevent.bShow(a)&&null!=this.gov_events[i]&&(1==this.gov_events[i].iInitStat?(h.default.gi().s_NewGovOperate(13,this.gov_events[i].iEid,0,0,0,""),this.gov_events[i].iInitStat=2):2==this.gov_events[i].iInitStat?this.ui1c_govevent.DrawUnit(1,a,"获取中..."):3==this.gov_events[i].iInitStat&&(this.ui1c_govevent.DrawUnit(0,a,this.gov_events[i].sTime),this.ui1c_govevent.DrawUnit(1,a,this.gov_events[i].sDetail)));this.ui1c_govevent.FinishDraw()}},{key:"Draw_2",value:function(){var t;for(m.default.new_framein(this.iX+25,this.iY+25,this.iW-50,this.iH-50),l.default.gi().SetViewClip(this.iX+25+20,this.iY+25+20,this.iX+this.iW-25-20,this.iY+this.iH-25-20),t=0;t<4;t++)this.Draw2Entry(t,this.iX+25+20,this.iY+25+20+100*t+this.iOffY2,this._GOVWELFARE[t][0],this._GOVWELFARE[t][1]);for(l.default.gi().NoClip(),this.bLock2||(this.iOffY2>0||this.iOffY2<0)&&(this.iOffY2/=2),t=0;t<4;t++)c.default.end(c.default.CONFIRM_GOVCONVEY1[t])&&c.default.bConfirm&&(h.default.gi().s_NewGovOperate(4,1,t,0,0,""),d.default.gi().PopStat(1))}},{key:"Draw2Entry",value:function(t,e,i,a,n){m.default.frame_type1("帮派福利条a20_92",e,i,1010,20),f.default.xani_icon.DrawAnima_aa(e+20,i+9.5,a,0),l.default.gi().DrawText_2(e+20+73+20,i+46,a,4294967040,30,101,1,1,0,0,-2,4,4289034305),l.default.gi().DrawTextEx(e+20+73+20+160,i+46,n,4278190080,20,101,1,1,0,0,-2),this.btn2_go[t].Move(e+1010-20-140,i+18.5,140,55),this.btn2_go[t].Draw(),this.btn2_detail[t].Move(e+20,i+9.5,73,73)}},{key:"Draw_3",value:function(){var t;for(m.default.new_framein(this.iX+25,this.iY+25,this.iW-50,this.iH-50),l.default.gi().SetViewClip(this.iX+25+20,this.iY+25+20,this.iX+this.iW-25-20,this.iY+this.iH-25-20),t=0;t<6;t++)this.Draw3Entry(t,this.iX+25+20,this.iY+25+20+100*t+this.iOffY3,this._GOVACTIVITY[t][0],this._GOVACTIVITY[t][1]);for(l.default.gi().NoClip(),this.bLock3||(t=592-(this.iH-90),this.iOffY3>0&&(this.iOffY3/=2),t<=0?this.iOffY3<0&&(this.iOffY3/=2):this.iOffY3<-t&&(t+=this.iOffY3,t/=2,this.iOffY3-=t)),t=0;t<6;t++)c.default.end(c.default.CONFIRM_GOVCONVEY2[t])&&c.default.bConfirm&&(h.default.gi().s_NewGovOperate(4,2,t,0,0,""),d.default.gi().PopStat(1))}},{key:"Draw3Entry",value:function(t,e,i,a,n){m.default.frame_type1("帮派福利条a20_92",e,i,1010,20),f.default.xani_icon.DrawAnima_aa(e+20,i+9.5,a,0),l.default.gi().DrawText_2(e+20+73+20,i+46,a,4294967040,30,101,1,1,0,0,-2,4,4289034305),l.default.gi().DrawTextEx(e+20+73+20+160,i+46,n,4278190080,20,101,1,1,0,0,-2),this.btn3_go[t].Move(e+1010-20-140,i+18.5,140,55),this.btn3_go[t].Draw(),this.btn3_detail[t].Move(e+20,i+9.5,73,73)}},{key:"ProcTouch",value:function(t,e,i){var a;for(3==t&&(this.bLock2=!1,this.bLock3=!1),a=0;a<4;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&this.iPage!=a&&(this.iPage=a,1==a&&(h.default.gi().s_NewGovOperate(5,0,0,0,0,""),this.iMCount=0,this.i1Page=0,this.ui1a_memberlist.Clean(),this.iSortType=-1,this.iSortUD=0));switch(this.iPage){case 0:if(this.i0ShowExplain=-1,(1==t||2==t&&this.i0ShowExplain>=0)&&1==this.i0Table)for(this.i0ShowExplain=-1,a=0;a<9;a++)r.default.bInRect(e,i,this.i0Lx,this.i0Ly+50*a,120,40)&&(this.i0ShowExplain=a);else this.i0ShowExplain=-1;if(this.btn0_govstatus.ProcTouch(t,e,i)&&this.btn0_govstatus.bCheck()&&(this.i0Table=0),this.btn0_govbuilding.ProcTouch(t,e,i)&&this.btn0_govbuilding.bCheck()&&(this.i0Table=1),this.btn0_fastback.ProcTouch(t,e,i))return this.btn0_fastback.bCheck()&&(x.default.gi().bCheckGuideExt(100)?c.default.start(c.default.CONFIRM_BACKGOV,"每次使用快速回帮需要花费6000游戏币，是否确定快速回帮？"):(h.default.gi().s_NewGovOperate(4,0,0,0,0,""),d.default.gi().PopStat(1))),!0;this.btn0_editdetail.ProcTouch(t,e,i)&&this.btn0_editdetail.bCheck()&&0==S.default.mg.iJob&&Gov_SetDetail.Open(this.sDetail);break;case 1:for(a=0;a<3;a++)this.btn1_page[a].ProcTouch(t,e,i)&&this.btn1_page[a].bCheck()&&this.i1Page!=a&&(0==a&&(h.default.gi().s_NewGovOperate(5,0,0,0,0,""),this.iMCount=0,this.ui1a_memberlist.Clean(),this.iSortType=-1,this.iSortUD=0),1==a&&(h.default.gi().s_NewGovOperate(9,0,0,0,0,""),this.iACount=0,this.ui1b_applylist.Clean()),2==a&&(h.default.gi().s_NewGovOperate(12,0,0,0,0,""),this.iECount=0,this.ui1c_govevent.Clean()),this.i1Page=a);switch(this.i1Page){case 0:if(this.ui1a_memberlist.ProcTouch(t,e,i))return!0;if(S.default.mg.bCheckPower(3)&&this.btn1_message.ProcTouch(t,e,i))return this.btn1_message.bCheck()&&(y.default.OpenChat(1e4,S.default.mg.sName,6),p.default.easymsg.AddMessage("发送收取5万现金")),!0;if(this.btn1_leavegov.ProcTouch(t,e,i))return this.btn1_leavegov.bCheck()&&(0==S.default.mg.iJob?b.default.fm.Open("请先任命其他人为帮主后再脱离帮派"):c.default.start(c.default.CONFIRM_LEAVEGOV,"是否确认脱离帮派？")),!0;break;case 1:this.ui1b_applylist.ProcTouch(t,e,i);break;case 2:this.ui1c_govevent.ProcTouch(t,e,i)}break;case 2:for(a=0;a<4;a++){if(this.btn2_go[a].ProcTouch(t,e,i))return this.btn2_go[a].bCheck()&&(x.default.gi().bCheckGuideExt(101+a)?c.default.start(c.default.CONFIRM_GOVCONVEY1[a],"每次传送需要花费8000游戏币，是否确定传送？"):(h.default.gi().s_NewGovOperate(4,1,a,0,0,""),d.default.gi().PopStat(1))),!0;if(this.btn2_detail[a].ProcTouch(t,e,i))return this.btn2_detail[a].bCheck()&&D.default.Open(this._GOVWELFARE[a][0],this._GOVWELFARE[a][2]),!0}if(this.bLock2&&2==t&&(this.iOffY2+=i-this.iLock2Y,this.iLock2Y=i),r.default.bInRect(e,i,this.iX+25,this.iY+25,this.iW-50,this.iH-50)&&1==t)return this.bLock2=!0,this.iLock2Y=i,!0;break;case 3:for(a=0;a<6;a++){if(this.btn3_go[a].ProcTouch(t,e,i))return this.btn3_go[a].bCheck()&&(x.default.gi().bCheckGuideExt(105+a)?c.default.start(c.default.CONFIRM_GOVCONVEY2[a],"每次传送需要花费8000游戏币，是否确定传送？"):(h.default.gi().s_NewGovOperate(4,2,a,0,0,""),d.default.gi().PopStat(1))),!0;if(this.btn3_detail[a].ProcTouch(t,e,i))return this.btn3_detail[a].bCheck()&&D.default.Open(this._GOVACTIVITY[a][0],this._GOVACTIVITY[a][2]),!0}if(this.bLock3&&2==t&&(this.iOffY3+=i-this.iLock3Y,this.iLock3Y=i),r.default.bInRect(e,i,this.iX+25,this.iY+25,this.iW-50,this.iH-50)&&1==t)return this.bLock3=!0,this.iLock3Y=i,!0}return this.btn_close.ProcTouch(t,e,i)&&this.btn_close.bCheck()&&d.default.gi().PopStat(1),!1}}]),NewGovFrame}();i.default=M},{"../../../../../../config/GameData":4,"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/PackageTools":9,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/UIList":80,"../../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/frame/message/PromptMessage":89,"../../../../../../engtst/mgm/gameing/chat/privatechat/PrivateChat_Send":107,"../../../../../../engtst/mgm/gameing/gov/GovFrame":156,"../../../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../../../engtst/mgm/gameing/help/BeginersGuide":181,"../../../../../../zero/Interface/PublicInterface":318}],171:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/control/XCheckBox")),l=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),m=(_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage")),_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/PromptMessage"))),g=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov"));_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function SetGovPower(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SetGovPower);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SetGovPower.__proto__||Object.getPrototypeOf(SetGovPower)).call(this));for(i.iW=500,i.iH=400,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.chk_powers=new Array(4),e=0;e<4;e++)i.chk_powers[e]=new u.default(f.default.xani_button),i.chk_powers[e].InitBox("复选框50_53"),i.chk_powers[e].bTrue=!1,i.chk_powers[e].Move(i.iX+50+e%2*200,i.iY+50+80+20+e/2*70,50,50);return i.chk_powers[0].sDetail="人员管理",i.chk_powers[1].sDetail="帮派管理",i.chk_powers[2].sDetail="开启副本",i.chk_powers[3].sDetail="群发消息",i.btn_ok=new o.default(f.default.xani_button),i.btn_ok.InitButton("普通按钮140_55"),i.btn_ok.sName="确定",i.btn_ok.Move(i.iX+i.iW/2-70,i.iY+i.iH-50-55,140,55),i.btn_question=new o.default(f.default.xani_button),i.btn_question.InitButton("问号按钮60_60"),i.btn_question.Move(i.iX+i.iW-50-60,i.iY+i.iH-50-60,60,60),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SetGovPower,r.default),a(SetGovPower,[{key:"Draw",value:function(){var t;for(c.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),f.default.xani_head.DrawAnima(this.iX+50,this.iY+50,"新头像"+this.pgm.iRas,0),l.default.gi().DrawTextEx(this.iX+50+80+10,this.iY+50+20,this.pgm.sName,4278190080,25,101,1,1,0,0,-2),l.default.gi().DrawTextEx(this.iX+50+80+10,this.iY+50+20+40,g.default.sJob(this.pgm.iJob),4278190080,25,101,1,1,0,0,-2),t=0;t<4;t++)this.chk_powers[t].Draw();this.btn_ok.Draw(),this.btn_question.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<4;a++)if(this.chk_powers[a].ProcTouch(t,e,i))return!0;return this.btn_ok.ProcTouch(t,e,i)?(this.btn_ok.bCheck()&&(this.pgm.iPower=0,this.chk_powers[0].bTrue&&(this.pgm.iPower|=1),this.chk_powers[1].bTrue&&(this.pgm.iPower|=2),this.chk_powers[2].bTrue&&(this.pgm.iPower|=4),this.chk_powers[3].bTrue&&(this.pgm.iPower|=8),h.default.gi().s_NewGovOperate(8,this.pgm.iRid,this.pgm.iPower,0,0,this.pgm.sName),d.default.gi().PopStat(1)),!0):this.btn_question.ProcTouch(t,e,i)?(this.btn_question.bCheck()&&m.default.Open("界面说明","#c000000# # 权限系统可以让帮主管理各个帮派官员所拥有的管理权限。#e#e1.人员管理#e# # 授予该管理人员任命权限，以及加入帮众与踢出帮众的权限#e#e2.帮派管理#e# # 授予该管理人员管理帮派建筑，帮派技能，帮派维护等级和帮派升级的权限#e#e3.开启副本#e# # 授予该管理人员主动开启帮派副本的权限#e#e4.群发消息#e# # 授予该管理人员群发消息的权限"),!0):!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)&&3==t&&(d.default.gi().PopStat(1),!0)}}]),SetGovPower}();i.default=_,_.Open=function(t){var e;0==g.default.mg.iJob&&((e=d.default.gi().iXStat!=d.default.GS_SETGOVPOWER?d.default.gi().PushStat(d.default.GS_SETGOVPOWER):d.default.gi().LastStat(0)).pgm=t,e.chk_powers[0].bTrue=0!=(1&t.iPower),e.chk_powers[1].bTrue=0!=(2&t.iPower),e.chk_powers[2].bTrue=0!=(4&t.iPower),e.chk_powers[3].bTrue=0!=(8&t.iPower))}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/control/XCheckBox":17,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/frame/message/PromptMessage":89,"../../../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../../../engtst/mgm/gameing/me/GmMe":211}],172:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=(_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function Gov_SetBuilding(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Gov_SetBuilding);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Gov_SetBuilding.__proto__||Object.getPrototypeOf(Gov_SetBuilding)).call(this));for(140,60,i.iW=471,i.iH=232,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_building=new o.default(9),e=0;e<9;e++)i.btn_building[e]=new o.default(u.default.xani_button),i.btn_building[e].InitButton("成员操作131_52"),i.btn_building[e].Move(i.iX+30+e%3*140,i.iY+30+e/3*60,131,52),i.btn_building[e].sName=d.default._GOVBUILDINGS[e];return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Gov_SetBuilding,r.default),a(Gov_SetBuilding,[{key:"Draw",value:function(){var t;for(h.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),t=0;t<9;t++)this.btn_building[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<9;a++)if(this.btn_building[a].ProcTouch(t,e,i))return this.btn_building[a].bCheck()&&(l.default.gi().s_NewGovOperate(18,1,a,0,0,""),l.default.gi().s_NewGovOperate(18,0,0,0,0,""),f.default.gi().PopStat(1)),!0;return s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||f.default.gi().PopStat(1),!1}}]),Gov_SetBuilding}();i.default=c,c.Open=function(){f.default.gi().PushStat(f.default.GS_GOV_SETBUILDING)}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/gameing/gov/MyGov":160}],173:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/control/XInput")),l=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/EasyMessage"));_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function Gov_SetHostility(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Gov_SetHostility);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Gov_SetHostility.__proto__||Object.getPrototypeOf(Gov_SetHostility)).call(this));return e.iW=360,e.iH=260,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_ok=new o.default(f.default.xani_button),e.btn_ok.InitButton("普通按钮140_55"),e.btn_ok.Move(e.iX+e.iW-30-140,e.iY+e.iH-30-55,140,55),e.btn_ok.sName="确定",e.btn_cancel=new o.default(f.default.xani_button),e.btn_cancel.InitButton("普通按钮140_55"),e.btn_cancel.Move(e.iX+30,e.iY+e.iH-30-55,140,55),e.btn_cancel.sName="取消",e.in_hid=new u.default(f.default.xani_ui),e.in_hid.sDetail="",e.in_hid.sBackPrompt="点击这里输入帮派会员",e.in_hid.iBackSize=24,e.in_hid.iTextSize=30,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Gov_SetHostility,r.default),a(Gov_SetHostility,[{key:"Draw",value:function(){var t,e;c.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),c.default.frame_type1("帮派宣言a20_44",this.iX+this.iW/2-60,this.iY+30,120,20),l.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+30+22,"设置敌对",4278190080,25,101,1,1,0,-2,-2),t=this.iX+30,e=this.iY+20+44+30,this.in_hid.Move(t,e,300,47),c.default.frame_type1("输入框a20_47",t,e,300,20),this.in_hid.DrawText(),this.in_hid.onscr(),this.btn_ok.Draw(),this.btn_cancel.Draw()}},{key:"ProcTouch",value:function(t,e,i){return!!this.in_hid.ProcTouch(t,e,i)||(this.btn_cancel.ProcTouch(t,e,i)?(this.btn_cancel.bCheck()&&d.default.gi().PopStat(1),!0):this.btn_ok.ProcTouch(t,e,i)?(this.btn_ok.bCheck()&&(this.in_hid.sDetail.length>0?(h.default.gi().s_NewGovOperate(18,5,0,0,0,this.in_hid.sDetail),h.default.gi().s_NewGovOperate(18,0,0,0,0,""),d.default.gi().PopStat(1)):m.default.easymsg.AddMessage("请先输入敌对帮派会员")),!0):(s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||d.default.gi().PopStat(1),!1))}}]),Gov_SetHostility}();i.default=g,g.Open=function(){d.default.gi().PushStat(d.default.GS_GOV_SETHOSTILITY)}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/control/XInput":18,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../../engtst/mgm/gameing/gov/MyGov":160}],174:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=(_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function Gov_SetMtLev(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Gov_SetMtLev);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Gov_SetMtLev.__proto__||Object.getPrototypeOf(Gov_SetMtLev)).call(this));for(140,60,i.iW=471,i.iH=112,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_mt=new o.default(8),e=0;e<3;e++)i.btn_mt[e]=new o.default(u.default.xani_button),i.btn_mt[e].InitButton("成员操作131_52"),i.btn_mt[e].Move(i.iX+30+e%3*140,i.iY+30+e/3*60,131,52),i.btn_mt[e].sName=d.default._GOVMTLEV[e];return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Gov_SetMtLev,r.default),a(Gov_SetMtLev,[{key:"Draw",value:function(){var t;for(h.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),t=0;t<3;t++)this.btn_mt[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<3;a++)if(this.btn_mt[a].ProcTouch(t,e,i))return this.btn_mt[a].bCheck()&&(l.default.gi().s_NewGovOperate(18,3,a,0,0,""),l.default.gi().s_NewGovOperate(18,0,0,0,0,""),f.default.gi().PopStat(1)),!0;return s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||f.default.gi().PopStat(1),!1}}]),Gov_SetMtLev}();i.default=c,c.Open=function(){f.default.gi().PushStat(f.default.GS_GOV_SETMTLEV)}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/gameing/gov/MyGov":160}],175:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/control/XInput")),l=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/EasyMessage"));_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function Gov_SetName(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Gov_SetName);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Gov_SetName.__proto__||Object.getPrototypeOf(Gov_SetName)).call(this));return e.iW=360,e.iH=260,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_ok=new o.default(f.default.xani_button),e.btn_ok.InitButton("普通按钮140_55"),e.btn_ok.Move(e.iX+e.iW-30-140,e.iY+e.iH-30-55,140,55),e.btn_ok.sName="确定",e.btn_cancel=new o.default(f.default.xani_button),e.btn_cancel.InitButton("普通按钮140_55"),e.btn_cancel.Move(e.iX+30,e.iY+e.iH-30-55,140,55),e.btn_cancel.sName="取消",e.in_name=new u.default(f.default.xani_ui),e.in_name.sDetail="",e.in_name.sBackPrompt="点击这里输入新的帮派名字",e.in_name.iBackSize=24,e.in_name.iTextSize=30,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Gov_SetName,r.default),a(Gov_SetName,[{key:"Draw",value:function(){var t,e;c.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),c.default.frame_type1("帮派宣言a20_44",this.iX+this.iW/2-60,this.iY+30,120,20),l.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+30+22,"帮派改名",4278190080,25,101,1,1,0,-2,-2),t=this.iX+30,e=this.iY+20+44+30,this.in_name.Move(t,e,300,47),c.default.frame_type1("输入框a20_47",t,e,300,20),this.in_name.DrawText(),this.in_name.onscr(),this.btn_ok.Draw(),this.btn_cancel.Draw()}},{key:"ProcTouch",value:function(t,e,i){if(this.in_name.ProcTouch(t,e,i))return!0;if(this.btn_cancel.ProcTouch(t,e,i))return this.btn_cancel.bCheck()&&d.default.gi().PopStat(1),!0;if(this.btn_ok.ProcTouch(t,e,i)){if(this.btn_ok.bCheck())if(this.in_name.sDetail.length>0){var a=this.in_name.sDetail.getBytes("GBK");if(a.length<4||a.length>16)return m.default.easymsg.AddMessage("帮派名称2-8个字"),!0;h.default.gi().s_NewGovOperate(18,6,0,0,0,this.in_name.sDetail),h.default.gi().s_NewGovOperate(18,0,0,0,0,""),d.default.gi().PopStat(1)}else m.default.easymsg.AddMessage("请先输入新的帮派名称");return!0}return s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||d.default.gi().PopStat(1),!1}}]),Gov_SetName}();i.default=g,g.Open=function(){d.default.gi().PushStat(d.default.GS_GOV_SETNAME)}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/control/XInput":18,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../../engtst/mgm/gameing/gov/MyGov":160}],176:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=(_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function Gov_SetResearch(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Gov_SetResearch);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Gov_SetResearch.__proto__||Object.getPrototypeOf(Gov_SetResearch)).call(this));for(140,60,i.iW=471,i.iH=232,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_research=new Array(8),e=0;e<8;e++)i.btn_research[e]=new o.default(u.default.xani_button),i.btn_research[e].InitButton("成员操作131_52"),i.btn_research[e].Move(i.iX+30+e%3*140,i.iY+30+e/3*60,131,52),i.btn_research[e].sName=d.default._GOVSKILLS[e];return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Gov_SetResearch,r.default),a(Gov_SetResearch,[{key:"Draw",value:function(){var t;for(h.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),t=0;t<8;t++)this.btn_research[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<8;a++)if(this.btn_research[a].ProcTouch(t,e,i))return this.btn_research[a].bCheck()&&(l.default.gi().s_NewGovOperate(18,2,a,0,0,""),l.default.gi().s_NewGovOperate(18,0,0,0,0,""),f.default.gi().PopStat(1)),!0;return s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||f.default.gi().PopStat(1),!1}}]),Gov_SetResearch}();i.default=c,c.Open=function(){f.default.gi().PushStat(f.default.GS_GOV_SETRESEARCH)}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/gameing/gov/MyGov":160}],177:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/Confirm1")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),m=(_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/EasyMessage")),_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage"))),g=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/PromptMessage")),_=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/MyGov"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function NewGovManage(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NewGovManage);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(NewGovManage.__proto__||Object.getPrototypeOf(NewGovManage)).call(this));e.iW=1100,e.iH=620,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_close=new o.default(l.default.xani_nui2),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_detail=new Array(7),e.btn_set=new Array(7);for(var i=0;i<7;i++)e.btn_detail[i]=new o.default(l.default.xani_button),e.btn_detail[i].bSingleButton=!0,e.btn_set[i]=new o.default(l.default.xani_button),e.btn_set[i].InitButton("普通按钮140_55"),e.btn_set[i].sName="设置";return e.bLock3=!1,e.iOffY3=0,e._GOVMANAGE=[["帮派建筑","","#c0000001.青龙堂：#e# # 升级后可提高青龙任务效率以及雇佣工人的收益#e2.白虎堂：#e# # 升级后可降低维护的安定度消耗#e3.朱雀堂：#e# # 升级后可提高成员炼丹成功率和副产品率#e4.玄武堂：#e# # 升级后可提升行动力上限和帮派维护增加的守护兽经验#e5.学院：#e# # 升级后可提升帮派维护增加的技能经验#e6.金库：#e# # 升级后可提升帮派资金上限#e7.商会：#e# # 升级后可增加出产道具种类和数量#e8.药房：#e# # 升级后可增加出产药品种类和数量#e9.厢房：#e# # 升级后可提升帮派人数上限"],["帮派技能","","#c0000001.强身术#e# # 学习后能增加气血上限#e2.修心#e# # 学习后能增加魔法上限#e3.健体术#e# # 学习后能增加体力上限#e4.炼丹术#e# # 学习后可以提高炼丹的能力#e5.烹饪#e# # 学习后可以提高制作食物的能力#e6.锻造术#e# # 学习后可以提高制作头盔和腰带的能力#e7.冶金术#e# # 学习后可以提高制作武器和项链的能力#e8.剪裁术#e# # 学习后可以提高制作衣服和靴子的能力"],["维护等级","","#c0000001.初级维护#e# # 提供基础维护效果#e2.中级维护#e# # 消耗150%基础维护资金，提供150%基础维护效果#e3.高级维护#e# # 消耗200%基础维护资金，提供200%基础维护效果"],["帮派升级","","#c000000# # 帮派升级可以提高帮派建筑的等级上限#e#e# # 帮派升级需要消耗繁荣度，繁荣度根据时间恢复，繁荣度上限通过建造建筑提高"],["设置敌对","","#c000000# # 设置敌对会使得白虎任务有极高的概率随机到敌对帮派#e#e# # 敌对设置只能由帮主进行。"],["帮派改名","",""],["解散帮派","",""]],e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(NewGovManage,r.default),a(NewGovManage,[{key:"_GetSet",value:function(t){var e;if(0==t.GetNextInt()){for(this.building=new Array(4),e=0;e<4;e++)this.building[e]=t.GetNextInt();for(this._GOVMANAGE[0][1]="当前正在建造"+_.default._GOVBUILDINGS[this.building[0]]+this.building[1]+"级("+this.building[2]+"/"+this.building[3]+")",this.research=new Array(4),e=0;e<4;e++)this.research[e]=t.GetNextInt();this._GOVMANAGE[1][1]="当前正在研究"+_.default._GOVSKILLS[this.research[0]]+this.research[1]+"级("+this.research[2]+"/"+this.research[3]+")",this.mtlev=t.GetNextInt(),this._GOVMANAGE[2][1]="当前帮派维护等级："+_.default._GOVMTLEV[this.mtlev],this.iExp=t.GetNextInt(),this.iMaxExp=t.GetNextInt(),this.iUpgradeExp=t.GetNextInt(),this._GOVMANAGE[3][1]="升级需要繁荣度："+this.iExp+"/"+this.iUpgradeExp,this.iHostilityId=t.GetNextInt(),this.sHostilityName=t.GetNextString(),0==this.iHostilityId?this._GOVMANAGE[4][1]="当前没有敌对帮派":this._GOVMANAGE[4][1]="当前敌对帮派："+this.sHostilityName}}},{key:"Draw",value:function(){var t;for(c.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"帮","派","管","理"),this.btn_close.Draw(),c.default.new_framein(this.iX+25,this.iY+25,this.iW-50,this.iH-50),u.default.gi().SetViewClip(this.iX+25+20,this.iY+25+20,this.iX+this.iW-25-20,this.iY+this.iH-25-20),t=0;t<7;t++)this.DrawEntry(t,this.iX+25+20,this.iY+25+20+100*t+this.iOffY3,this._GOVMANAGE[t][0],this._GOVMANAGE[t][1]);u.default.gi().NoClip(),this.bLock3||(t=692-(this.iH-90),this.iOffY3>0&&(this.iOffY3/=2),t<=0?this.iOffY3<0&&(this.iOffY3/=2):this.iOffY3<-t&&(t+=this.iOffY3,t/=2,this.iOffY3-=t)),d.default.end(d.default.CONFIRM_GOVUPGRADE)&&d.default.bConfirm&&(f.default.gi().s_NewGovOperate(18,4,0,0,0,""),f.default.gi().s_NewGovOperate(18,0,0,0,0,"")),d.default.end(d.default.CONFIRM_GOVDISBAND)&&d.default.bConfirm&&(f.default.gi().s_NewGovOperate(18,7,0,0,0,""),h.default.gi().PopStat(1))}},{key:"DrawEntry",value:function(t,e,i,a,n){c.default.frame_type1("帮派福利条a20_92",e,i,1010,20),l.default.xani_icon.DrawAnima_aa(e+20,i+9.5,a,0),u.default.gi().DrawText_2(e+20+73+20,i+46,a,4294967040,30,101,1,1,0,0,-2,4,4289034305),n.length>0&&u.default.gi().DrawTextEx(e+20+73+20+160,i+46,n,4278190080,20,101,1,1,0,0,-2),this.btn_set[t].Move(e+1010-20-140,i+18.5,140,55),this.btn_set[t].Draw(),this.btn_detail[t].Move(e+20,i+9.5,73,73)}},{key:"ProcTouch",value:function(t,e,i){var a;if(3==t&&(this.bLock3=!1),this.bLock3&&2==t&&(this.iOffY3+=i-this.iLock3Y,this.iLock3Y=i),s.default.bInRect(e,i,this.iX+50,this.iY+50,this.iW-100,this.iH-100)){for(a=0;a<7;a++){if(this.btn_detail[a].ProcTouch(t,e,i))return this.btn_detail[a].bCheck()&&this._GOVMANAGE[a][2].length>0&&g.default.Open(this._GOVMANAGE[a][0],this._GOVMANAGE[a][2]),!0;if(this.btn_set[a].ProcTouch(t,e,i)){if(this.btn_set[a].bCheck())switch(a){case 0:_.default.mg.bCheckPower(1)?Gov_SetBuilding.Open():m.default.fm.Open("你没有帮派管理权限");break;case 1:_.default.mg.bCheckPower(1)?Gov_SetResearch.Open():m.default.fm.Open("你没有帮派管理权限");break;case 2:_.default.mg.bCheckPower(1)?Gov_SetMtLev.Open():m.default.fm.Open("你没有帮派管理权限");break;case 3:0==_.default.mg.iJob?d.default.start(d.default.CONFIRM_GOVUPGRADE,"是否确定升级帮派？"):m.default.fm.Open("帮主才能升级帮派");break;case 4:0==_.default.mg.iJob?0==this.iHostilityId?Gov_SetHostility.Open():(f.default.gi().s_NewGovOperate(18,5,0,0,0,"0"),f.default.gi().s_NewGovOperate(18,0,0,0,0,"")):m.default.fm.Open("帮主才能设置敌对");break;case 5:0==_.default.mg.iJob?Gov_SetName.Open():m.default.fm.Open("帮主才能修改帮派名称");break;case 6:0==_.default.mg.iJob?d.default.start(d.default.CONFIRM_GOVDISBAND,"是否确定解散帮派？"):m.default.fm.Open("帮主才能解散帮派")}return!0}}if(s.default.bInRect(e,i,this.iX+25,this.iY+25,this.iW-50,this.iH-50)&&1==t)return this.bLock3=!0,this.iLock3Y=i,!0}return this.btn_close.ProcTouch(t,e,i)&&this.btn_close.bCheck()&&h.default.gi().PopStat(1),!1}}]),NewGovManage}();i.default=p,p.Open=function(){h.default.gi().iXStat!=h.default.GS_NEWGOVMANAGE?h.default.gi().PushStat(h.default.GS_NEWGOVMANAGE):h.default.gi().LastStat(0),f.default.gi().s_NewGovOperate(18,0,0,0,0,"")},p.GetSet=function(t){var e;null!=(e=h.default.gi().FindStat(h.default.GS_NEWGOVMANAGE))&&e._GetSet(t)}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/PackageTools":9,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/frame/message/PromptMessage":89,"../../../../../../engtst/mgm/gameing/gov/MyGov":160}],178:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2"))),o=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),u=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),l=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),f=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/Confirm1")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/UIList")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage")),m=(_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/ext/base/MemberOperate")),_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/gov/ext/base/NewGovFrame")),_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/GmMe")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var g=function GOV_ENTRUST(){_classCallCheck(this,GOV_ENTRUST)},_=function(t){function EntrustMission(t){_classCallCheck(this,EntrustMission);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(EntrustMission.__proto__||Object.getPrototypeOf(EntrustMission)).call(this));for(i._MSTAT=["等待领取","进行中","已过期","已完成"],i.iW=1100,i.iH=620,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new r.default(o.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.iPage=0,i.btn_page=new Array(2),e=0;e<2;e++)i.btn_page[e]=new r.default(o.default.xani_nui2),i.btn_page[e].InitButton("右侧标签"),i.btn_page[e].Move(i.iX+i.iW-15,i.iY+40+125*e,50,140);for(i.iSelect=0,i.btn_select=new Array(4),e=0;e<4;e++)i.btn_select[e]=new r.default(o.default.xani_button),i.btn_select[e].InitButton("选择按钮145_56"),i.btn_select[e].Move(i.iX+25+20+160*e,i.iY+25+20,145,55);return i.btn_select[0].sName="朱雀任务",i.btn_select[1].sName="青龙任务",i.btn_select[2].sName="白虎任务",i.btn_select[3].sName="玄武任务",i.btn_addmission=new r.default(o.default.xani_button),i.btn_addmission.InitButton("普通按钮170_55"),i.btn_addmission.Move(i.iX+i.iW-25-20-170,i.iY+25+20,170,55),i.btn_addmission.sName="发布委托",i.ui0_missionlist=new d.default(0,9,i.iW-90,450),i.ui0_missionlist.SetTitle(0,"任务佣金",300,!1),i.ui0_missionlist.SetTitle(1,"发布人",200,!0),i.ui0_missionlist.SetTitle(2,"发布时间",510,!0),i.ui1_missionlist=new d.default(0,9,i.iW-90,450),i.ui1_missionlist.SetTitle(0,"任务佣金",300,!1),i.ui1_missionlist.SetTitle(1,"任务状态",200,!0),i.ui1_missionlist.SetTitle(2,"发布时间",510,!0),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(EntrustMission,s.default),a(EntrustMission,[{key:"_GetMyDetail",value:function(t){var e,i=t.GetNextInt(),a=t.GetNextInt();if(100==i)for(e=0;e<this.iM1Count;e++)2==this.ets1[e].iInitStat&&this.ets1[e].iMid==a&&(this.ets1[e].iStat=t.GetNextByte(),this.ets1[e].iSIngot=t.GetNextShort(),this.ets1[e].iSMoney=t.GetNextInt(),this.ets1[e].sSTime=t.GetNextString(),this.ets1[e].iType=t.GetNextByte(),this.ets1[e].sSName=t.GetNextString(),this.ets1[e].iInitStat=3);else for(e=0;e<this.iM0Count;e++)2==this.ets0[e].iInitStat&&this.ets0[e].iMid==a&&(this.ets0[e].iStat=t.GetNextByte(),this.ets0[e].iSIngot=t.GetNextShort(),this.ets0[e].iSMoney=t.GetNextInt(),this.ets0[e].sSTime=t.GetNextString(),this.ets0[e].iType=t.GetNextByte(),this.ets0[e].sSName=t.GetNextString(),this.ets0[e].iInitStat=3)}},{key:"_GetMyMission",value:function(t){var e;if(100==t.GetNextInt()){for(this.iM1Count=t.GetNextInt(),this.ets1=new Array(this.iM1Count),e=0;e<this.iM1Count;e++)this.ets1[e]=new g,this.ets1[e].iMid=t.GetNextInt(),this.ets1[e].iInitStat=1;this.iAlreadyEntrusted=t.GetNextInt()}else for(this.iM0Count=t.GetNextInt(),this.ets0=new Array(this.iM0Count),e=0;e<this.iM0Count;e++)this.ets0[e]=new g,this.ets0[e].iMid=t.GetNextInt(),this.ets0[e].iInitStat=1}},{key:"Draw",value:function(){var t,e,i,a,n;for(h.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"委","托","任","务"),this.btn_close.Draw(),t=0;t<2;t++)this.iPage==t&&(this.btn_page[t].bMouseIn=!0,this.btn_page[t].bMouseDown=!0),this.btn_page[t].Draw();switch(h.default.new_lableword4(this.iX+this.iW-15,this.iY+50+0-4,40,70,0==this.iPage,"委","托","任","务"),h.default.new_lableword4(this.iX+this.iW-15,this.iY+50+130-8,40,70,1==this.iPage,"我","的","委","托"),e=this.iX+25,i=this.iY+25,a=this.iW-50,n=this.iH-50,h.default.new_framein(e,i,a,n),this.iPage){case 0:this.Draw_0(e+20,i+20);break;case 1:this.Draw_1(e+20,i+20)}}},{key:"Draw_0",value:function(t,e){var i;for(i=0;i<4;i++)this.iSelect==i&&(this.btn_select[i].bMouseIn=!0,this.btn_select[i].bMouseDown=!0),this.btn_select[i].Draw();for(this.ui0_missionlist.BeginDraw(t,e+55+20),i=0;i<this.iM0Count;i++)this.ui0_missionlist.bShow(i)&&null!=this.ets0[i]&&(1==this.ets0[i].iInitStat?(u.default.gi().s_NewGovOperate(15,this.iSelect,this.ets0[i].iMid,0,0,""),this.ets0[i].iInitStat=2):2==this.ets0[i].iInitStat?this.ui0_missionlist.DrawUnit(0,i,"获取中"):3==this.ets0[i].iInitStat&&(this.ui0_missionlist.DrawUnit(0,i,this.ets0[i].iSIngot+"元宝+"+this.ets0[i].iSMoney+"现金"),this.ui0_missionlist.DrawUnit(1,i,this.ets0[i].sSName),this.ui0_missionlist.DrawUnit(2,i,this.ets0[i].sSTime)));this.ui0_missionlist.FinishDraw(),(i=this.ui0_missionlist.iChecked())>=0&&(this.pge=this.ets0[i],f.default.start(f.default.CONFIRM_GOVGETENTRUST,ReleaseGovMission._FOUR[this.pge.iType]+"#e#e委托人:"+this.pge.sSName+"#e#e接受委托任务后半小时内未完成则任务失败#e#e是否确定接受委托？")),f.default.end(f.default.CONFIRM_GOVGETENTRUST)&&f.default.bConfirm&&(u.default.gi().s_NewGovOperate(17,1,this.pge.iMid,this.pge.iType,0,""),this.ui0_missionlist.Clean())}},{key:"Draw_1",value:function(t,e){var i,a,n,s;for(i=0;i<4;i++)this.iSelect==i&&(this.btn_select[i].bMouseIn=!0,this.btn_select[i].bMouseDown=!0),this.btn_select[i].Draw();for(this.btn_addmission.Draw(),s=this.ui1_missionlist.iChecked(),this.ui1_missionlist.BeginDraw(t,e+55+20),a=0,n=0,i=0;i<this.iM1Count;i++)if(1==this.ets1[i].iInitStat)n<6&&(u.default.gi().s_NewGovOperate(15,100,this.ets1[i].iMid,0,0,""),this.ets1[i].iInitStat=2),n++;else if(2==this.ets1[i].iInitStat)n++;else if(3==this.ets1[i].iInitStat&&this.ets1[i].iType==this.iSelect){if(this.ui1_missionlist.DrawUnit(0,a,this.ets1[i].iSIngot+"元宝+"+this.ets1[i].iSMoney+"现金"),this.ui1_missionlist.DrawUnit(1,a,this._MSTAT[this.ets1[i].iStat]),this.ui1_missionlist.DrawUnit(2,a,this.ets1[i].sSTime),s==a)switch(this.pge=this.ets1[i],this.pge.iStat){case 0:f.default.start(f.default.CONFIRM_GOVCANCELENTRUST,ReleaseGovMission._FOUR[this.pge.iType]+"#e#e委托任务持续一天，一天后未完成的委托任务失效#e撤销任务返还佣金，手续费不返还#e#e是否确认撤销所选委托？");break;case 1:c.default.fm.Open(ReleaseGovMission._FOUR[this.pge.iType]+"#e#e委托任务持续一天，一天后未完成的委托任务失效#e撤销任务返还佣金，手续费不返还");break;case 2:f.default.start(f.default.CONFIRM_GOVCANCELENTRUST,ReleaseGovMission._FOUR[this.pge.iType]+"#e#e委托任务持续一天，一天后未完成的委托任务失效#e撤销任务返还佣金，手续费不返还#e#e是否确认撤销所选委托？")}a++}this.ui1_missionlist.FinishDraw(),f.default.end(f.default.CONFIRM_GOVCANCELENTRUST)&&f.default.bConfirm&&(u.default.gi().s_NewGovOperate(17,0,this.pge.iMid,this.pge.iType,0,""),this.ui1_missionlist.Clean())}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&l.default.gi().PopStat(1),!0;for(a=0;a<2;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&this.iPage!=a&&(this.iPage=a,1==a&&(u.default.gi().s_NewGovOperate(14,100,0,0,0,""),this.ui1_missionlist.Clean(),this.iSelect=0,this.iM1Count=0),0==a&&(u.default.gi().s_NewGovOperate(14,0,0,0,0,""),this.ui0_missionlist.Clean(),this.iSelect=0,this.iM0Count=0));switch(this.iPage){case 0:for(a=0;a<4;a++)this.btn_select[a].ProcTouch(t,e,i)&&this.btn_select[a].bCheck()&&this.iSelect!=a&&(this.iSelect=a,u.default.gi().s_NewGovOperate(14,a,0,0,0,""),this.ui0_missionlist.Clean(),this.iM0Count=0);this.ui0_missionlist.ProcTouch(t,e,i);break;case 1:for(a=0;a<4;a++)this.btn_select[a].ProcTouch(t,e,i)&&this.btn_select[a].bCheck()&&(this.iSelect=a);this.btn_addmission.ProcTouch(t,e,i)&&this.btn_addmission.bCheck()&&((a=m.default.me.rbs.iLev/2)>20&&(a=20),this.iAlreadyEntrusted>=a?c.default.fm.Open("发布任务次数已达上限"):ReleaseGovMission.Open(this.iSelect,a-this.iAlreadyEntrusted,a)),this.ui1_missionlist.ProcTouch(t,e,i)}return!1}}]),EntrustMission}();i.default=_,_.Open=function(){l.default.gi().iXStat!=l.default.GS_ENTRUSTMISSION?l.default.gi().PushStat(l.default.GS_ENTRUSTMISSION):l.default.gi().LastStat(0),u.default.gi().s_NewGovOperate(14,0,0,0,0,"")},_.CancelEntrust=function(t){var e;if(null!=(e=l.default.gi().FindStat(l.default.GS_ENTRUSTMISSION))){var i=t.GetNextInt();if(0==i){var a=t.GetNextInt(),n=0;for(i=0;i<e.iM1Count-1;i++)e.ets1[i].iMid==a&&(n=1),1==n&&(e.ets1[i]=e.ets1[i+1]);1==n&&e.iM1Count--}else{a=t.GetNextInt(),n=0;for(i=0;i<e.iM0Count-1;i++)e.ets0[i].iMid==a&&(n=1),1==n&&(e.ets0[i]=e.ets0[i+1]);1==n&&e.iM0Count--}}},_.GetMyDetail=function(t){var e;null!=(e=l.default.gi().FindStat(l.default.GS_ENTRUSTMISSION))&&e._GetMyDetail(t)},_.GetMyMission=function(t){var e;null!=(e=l.default.gi().FindStat(l.default.GS_ENTRUSTMISSION))&&e._GetMyMission(t)}},{"../../../../../../config/GmConfig":5,"../../../../../../engine/BaseClass":8,"../../../../../../engine/PackageTools":9,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/UIList":80,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/gameing/gov/ext/base/MemberOperate":169,"../../../../../../engtst/mgm/gameing/gov/ext/base/NewGovFrame":170,"../../../../../../engtst/mgm/gameing/me/GmMe":211}],179:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/control/XInputNumber")),l=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/Confirm1")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/EasyMessage")),_=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage")),p=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var b=function(t){function ReleaseGovMission(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ReleaseGovMission);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ReleaseGovMission.__proto__||Object.getPrototypeOf(ReleaseGovMission)).call(this));for(i.iW=640,i.iH=560,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_select=new Array(4),e=0;e<4;e++)i.btn_select[e]=new o.default(f.default.xani_icon),i.btn_select[e].InitButton(_FOUR[e]);return i.btn_ok=new o.default(f.default.xani_button),i.btn_ok.InitButton("普通按钮140_55"),i.btn_ok.sName="确定",i.btn_cancel=new o.default(f.default.xani_button),i.btn_cancel.InitButton("普通按钮140_55"),i.btn_cancel.sName="取消",i.in_ingot=new u.default(f.default.xani_nui3),i.in_ingot.iNumber=0,i.in_ingot.MinMax(0,200),i.in_money=new u.default(f.default.xani_nui3),i.in_money.iNumber=0,i.in_money.MinMax(0,2e6),i.in_count=new u.default(f.default.xani_nui3),i.in_count.iNumber=1,i.in_count.MinMax(1,20),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ReleaseGovMission,r.default),a(ReleaseGovMission,[{key:"Draw",value:function(){var t,e,i;for(m.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),l.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+20+15,"发布委托",4278213441,30,101,1,1,0,-2,-2),e=this.iX+30,i=this.iY+20+30+20,l.default.gi().DrawTextEx(e,i,"任务类型:",4278190080,25,101,1,1,0,0,0),i+=35,t=0;t<4;t++)this.btn_select[t].Move(e+50+130*t,i,73,73),this.btn_select[t].Draw(),l.default.gi().DrawTextEx(this.btn_select[t].iX+this.btn_select[t].iW/2,this.btn_select[t].iY+this.btn_select[t].iH+5,_FOUR[t],4278190080,25,101,1,1,0,-2,0),this.iMissionType==t&&m.default.frame_type2("黄色透明框a25_25",this.btn_select[t].iX,this.btn_select[t].iY,73,73,25,25);i+=123,l.default.gi().DrawTextEx(e,i,"委托花费:",4278190080,25,101,1,1,0,0,0),i+=40,l.default.gi().DrawTextEx(e+40,i,"元宝:",4278190080,25,101,1,1,0,0,0),this.in_ingot.Move(e+40+70,i+-11,140),this.in_ingot.Draw(),t=(t=5*this.in_ingot.iNumber/100)<1?1:t,0==this.in_ingot.iNumber&&(t=0),l.default.gi().DrawTextEx(e+40+70+150,i,"(额外收取手续费"+t+"元宝)",4278190080,25,101,1,1,0,0,0),i+=55,t=(t=5*this.in_money.iNumber/100)<1e4?1e4:t,0==this.in_money.iNumber&&(t=0),l.default.gi().DrawTextEx(e+40+70+150,i,"(额外收取手续费"+t+"现金)",4278190080,25,101,1,1,0,0,0),l.default.gi().DrawTextEx(e+40,i,"现金:",4278190080,25,101,1,1,0,0,0),this.in_money.Move(e+40+70,i+-11,140),this.in_money.Draw(),i+=60,l.default.gi().DrawTextEx(e,i,"委托轮数:",4278190080,25,101,1,1,0,0,0),i+=40,l.default.gi().DrawTextEx(e+40,i,"数量:",4278190080,25,101,1,1,0,0,0),this.in_count.Move(e+40+70,i+-11,140),this.in_count.Draw(),l.default.gi().DrawTextEx(e+40+70+150,i,"(当前可发布"+this.iCanEntrust+"轮)",4278190080,25,101,1,1,0,0,0),this.btn_ok.Move(this.iX+this.iW-30-140,this.iY+this.iH-30-55,140,55),this.btn_ok.Draw(),this.btn_cancel.Move(this.iX+30,this.iY+this.iH-30-55,140,55),this.btn_cancel.Draw(),c.default.end(c.default.CONFIRM_GOVRELEASEENTRUST)&&c.default.bConfirm&&(h.default.gi().s_NewGovOperate(16,this.iMissionType,this.in_count.iNumber,this.in_ingot.iNumber,this.in_money.iNumber,""),d.default.gi().PopStat(1),h.default.gi().s_NewGovOperate(14,100,0,0,0,""))}},{key:"ProcTouch",value:function(t,e,i){var a,n;if(this.in_count.ProcTouch(t,e,i))return this.in_money.bShow=!1,this.in_ingot.bShow=!1,!0;if(this.in_money.ProcTouch(t,e,i))return this.in_count.bShow=!1,this.in_ingot.bShow=!1,!0;if(this.in_ingot.ProcTouch(t,e,i))return this.in_count.bShow=!1,this.in_money.bShow=!1,!0;for(a=0;a<4;a++)if(this.btn_select[a].ProcTouch(t,e,i))return this.btn_select[a].bCheck()&&(this.iMissionType=a),!0;return this.btn_ok.ProcTouch(t,e,i)&&this.btn_ok.bCheck()&&(0==this.in_ingot.iNumber?a=0:((a=5*this.in_ingot.iNumber/100)<1&&(a=1),a+=this.in_ingot.iNumber,a*=this.in_count.iNumber),0==this.in_money.iNumber?n=0:((n=5*this.in_money.iNumber/100)<1e4&&(n=1e4),n+=this.in_money.iNumber,n*=this.in_count.iNumber),0==a&&0==n?g.default.easymsg.AddMessage("请先设置委托奖励"):p.default.me.rbs.iInGot<a?_.default.fm.Open("元宝不足"):p.default.me.rbs.iMoney<n?_.default.fm.Open("现金不足"):c.default.start(c.default.CONFIRM_GOVRELEASEENTRUST,"发布"+this.in_count.iNumber+"轮"+_FOUR[this.iMissionType]+"共需花费"+a+"元宝，"+n+"现金#e#e撤销委托不退还手续费，是否确定发布？")),this.btn_cancel.ProcTouch(t,e,i)&&this.btn_cancel.bCheck()&&d.default.gi().PopStat(1),s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||d.default.gi().PopStat(1),!1}}]),ReleaseGovMission}();i.default=b,b._FOUR=["朱雀任务","青龙任务","白虎任务","玄武任务"],b.Open=function(t,e,i){var a;d.default.gi().iXStat!=d.default.GS_RELEASEGOVMISSION&&((a=d.default.gi().PushStat(d.default.GS_RELEASEGOVMISSION)).iMissionType=t,a.iCanEntrust=e,a.iMaxCanEntrust=i,a.in_count.MinMax(1,e))}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/control/XInputNumber":19,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/gameing/me/GmMe":211}],180:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),o=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),u=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),l=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),f=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=function _GOVFBTARGET(){_classCallCheck(this,_GOVFBTARGET)},d=function(t){function GovFBTarget(t){_classCallCheck(this,GovFBTarget);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(GovFBTarget.__proto__||Object.getPrototypeOf(GovFBTarget)).call(this));return e.iW=700,e.iH=400,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(GovFBTarget,s.default),a(GovFBTarget,[{key:"Draw",value:function(){var t,e=(this.iW-30-30-20)/2,i=this.iH-30-30-30-20;l.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),r.default.gi().DrawText_2(this.iX+30+e/2,this.iY+30+15,"进度描述",4294967040,30,101,1,1,0,-2,-2,3,4278190080),r.default.gi().DrawText_2(this.iX+30+e+20+e/2,this.iY+30+15,"进度目标",4294967040,30,101,1,1,0,-2,-2,3,4278190080),l.default.frame_type4("单色内框b20_20",this.iX+30,this.iY+30+30+20,e,i,20,20),l.default.frame_type4("单色内框b20_20",this.iX+30+e+20,this.iY+30+30+20,e,i,20,20),f.default.gi().FormatEx(GovFBTarget.sDetail,e-30,20,0,0,25),f.default.gi().Draw(this.iX+30+15,this.iY+30+30+20+15);var a=this.iX+30+e+20,n=this.iY+30+30+20;for(t=0;t<GovFBTarget.iTargetCount;t++)r.default.gi().DrawTextEx(a+15,n+15,GovFBTarget.mTargets[t].sTarget,4294967295,20,101,1,1,0,0,0),r.default.gi().DrawTextEx(a+e-15,n+15,GovFBTarget.mTargets[t].sProc,4294967295,20,101,1,1,0,-3,0),n+=25}},{key:"ProcTouch",value:function(t,e,i){return 3==t&&u.default.gi().PopStat(1),!1}}]),GovFBTarget}();i.default=d,d.sDetail,d.iTargetCount,d.mTargets,d.iPlanId,d.Open=function(){u.default.gi().iXStat!=u.default.GS_GOVFBTARGET&&u.default.gi().PushStat(u.default.GS_GOVFBTARGET)},d.GetData=function(t){var e;if(null==d.mTargets)for(d.mTargets=new Array(10),e=0;e<10;e++)d.mTargets[e]=new h;for(d.sDetail=t.GetNextString(),d.iTargetCount=t.GetNextByte(),e=0;e<d.iTargetCount;e++)d.mTargets[e].iStat=t.GetNextByte(),d.mTargets[e].iType=t.GetNextByte(),d.mTargets[e].sTarget=t.GetNextString(),d.mTargets[e].sProc=t.GetNextString();d.iPlanId=t.GetNextInt(),o.default.sop("GovFBTarget.iPlanId="+d.iPlanId+"GovFBTarget.iTargetCount"+d.iTargetCount)}},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81}],181:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../map/MapManager")),s=_interopRequireDefault(t("../../../../map/SmallMap")),r=_interopRequireDefault(t("../../../../config/GameData")),o=_interopRequireDefault(t("../../../../config/GmConfig")),u=_interopRequireDefault(t("../../../../config/XDefine")),l=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),f=_interopRequireDefault(t("../../../../engine/xms/XmsEngine")),h=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),d=(_interopRequireDefault(t("../../../../engtst/mgm/MyAI")),_interopRequireDefault(t("../../../../engtst/mgm/XStat"))),c=_interopRequireDefault(t("../../../../engtst/mgm/History/XRecordFast")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),g=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessageEx")),_=_interopRequireDefault(t("../../../../engtst/mgm/gameing/chat/privatechat/FriendList")),p=_interopRequireDefault(t("../../../../engtst/mgm/gameing/equip/MakeEquip")),b=_interopRequireDefault(t("../../../../engtst/mgm/gameing/fast/FastButton")),D=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/fast/FastOperate")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/fight/AutoFightFrame"))),y=_interopRequireDefault(t("../../../../engtst/mgm/gameing/fight/XFight")),w=_interopRequireDefault(t("../../../../engtst/mgm/gameing/fight/XFightGoods")),S=_interopRequireDefault(t("../../../../engtst/mgm/gameing/fight/XFightRoleSkill")),x=_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/ExtHelp/ExtHelp")),P=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/AddPoint")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"))),v=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/MyAttFrame")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/xms_AddPoint")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"))),R=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoodsFrame")),M=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mission/MissionFrame")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mission/MissionLead"))),C=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mission/MyMission")),k=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mounts/MountsFrame")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mounts/MyMounts"))),T=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets")),A=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/PetsFrame")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/TeamOperate")),_interopRequireDefault(t("./JQMode")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var G=function(){function BeginersGuide(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BeginersGuide),this.iGuideing=-1,this.aa_fx=new Array(8),t=0;t<8;t++)this.aa_fx[t]=null;this.iStartDelay=1,this.iTime=0}return a(BeginersGuide,[{key:"DrawTextFrame",value:function(t,e,i){h.default.xani_nui3.DrawAnima(t,e,"指示内容框",0),i>120&&h.default.xani_nui3.DrawAnimaEx(t+60,e,"指示内容框",1,101,1*(i-120)/60,1,0,0,0),h.default.xani_nui3.DrawAnima(t+i-60,e,"指示内容框",2)}},{key:"_DrawText",value:function(t,e,i,a){this.DrawTextFrame(t-(a+30)/2,e-33,a+30),l.default.gi().DrawText_2(t,e,i,4294967040,36,101,1,1,0,-2,-2,3,4278190080)}},{key:"DrawGuide",value:function(t,e,i,a,n,s){this.iGuideDelay;if(h.default.xani_nui3.DrawAnima(t,e,"指示框1",h.default.iDelay/2),h.default.xani_nui3.DrawAnima(t+i,e,"指示框2",h.default.iDelay/2),h.default.xani_nui3.DrawAnima(t+i,e+a,"指示框3",h.default.iDelay/2),h.default.xani_nui3.DrawAnima(t,e+a,"指示框4",h.default.iDelay/2),!(s<0)){var r=l.default.gi().GetTextWidth(n,36);4294967040;var o=0,u=0;switch(s){case 0:o=t+i/2,u=e+a,h.default.xani_nui3.DrawAnimaEx(o,u,"指示箭头",h.default.iDelay/2,101,1,1,270,o,u),this._DrawText(o,u+60+33,n,r);break;case 1:o=t+i,u=e+a,h.default.xani_nui3.DrawAnimaEx(o,u,"指示箭头",h.default.iDelay/2,101,1,1,225,o,u),this._DrawText(o+42+(r+30)/2,u+42+33,n,r);break;case 2:o=t+i,u=e+a/2,h.default.xani_nui3.DrawAnimaEx(o,u,"指示箭头",h.default.iDelay/2,101,1,1,180,o,u),this._DrawText(o+60+(r+30)/2,u,n,r);break;case 3:o=t+i,u=e,h.default.xani_nui3.DrawAnimaEx(o,u,"指示箭头",h.default.iDelay/2,101,1,1,135,o,u),this._DrawText(o+42+(r+30)/2,u-42-33,n,r);break;case 4:o=t+i/2,u=e,h.default.xani_nui3.DrawAnimaEx(o,u,"指示箭头",h.default.iDelay/2,101,1,1,90,o,u),this._DrawText(o,u-60-33,n,r);break;case 5:o=t,u=e,h.default.xani_nui3.DrawAnimaEx(o,u,"指示箭头",h.default.iDelay/2,101,1,1,45,o,u),this._DrawText(o-42-(r+30)/2,u-42-33,n,r);break;case 6:o=t,u=e+a/2,h.default.xani_nui3.DrawAnimaEx(o,u,"指示箭头",h.default.iDelay/2,101,1,1,0,o,u),this._DrawText(o-60-(r+30)/2,u,n,r);break;case 7:o=t,u=e+a,h.default.xani_nui3.DrawAnimaEx(o,u,"指示箭头",0,101,1,1,315,o,u),this._DrawText(o-42-(r+30)/2,u+42+33,n,r)}}}},{key:"Draw",value:function(){var t;if(-1!=this.iGuideing){for(m.default.fm.bShow&&(m.default.fm.bShow=!1),t=0;t<8;t++)null==this.aa_fx[t]&&(this.aa_fx[t]=h.default.xani_ui.InitAnimaWithName("引导指向_"+t,null));switch(this.DrawGuide(this.iX,this.iY,this.iW,this.iH,this.sMessage,this.iFx),this.iGuideStat){case 0:this.iGuideDelay+=16,this.iGuideDelay>=128&&(this.iGuideStat=1,this.iDelay=0);break;case 1:this.iDelay++,this.iDelay>30&&(this.iGuideStat=2);break;case 3:this.iGuideDelay-=16,this.iGuideDelay<=0&&(this.iGuideing=-1)}}}},{key:"bCheckGuideExt",value:function(t){return 0==(c.default.iGuideFlags[parseInt(t/10)]&1<<t%10)&&(c.default.iGuideFlags[parseInt(t/10)]|=1<<t%10,!0)}},{key:"bCheckGuide",value:function(t){return 0!=(c.default.iGuideFlags[parseInt(t/10)]&1<<t%10)}},{key:"SetGuideExt",value:function(t,e,i,a,n,s){this.iX=t,this.iY=e,this.iW=i,this.iH=a,this.iFx=n,this.iFx>=0&&(this.sMessage=s),this.iGuideing=9999,this.iGuideStat=0,this.iGuideDelay=0,this.bForce=!1}},{key:"SetGuide",value:function(t){if(this.bCheckGuide(t))return!1;this.iGuideing=t,c.default.iGuideFlags[parseInt(t/10)]|=1<<t%10,h.default.x_record.SaveTo(u.default.RECORDFILENAME),h.default.sop("打开gd="+t);var e,i,a=d.default.gi().LastStat(0);switch(BeginersGuide.iEventGuide=0,this.bForce=!0,t){case 1:this.iX=a.btn_prompt.iX,this.iY=a.btn_prompt.iY,this.iW=a.btn_prompt.iW,this.iH=a.btn_prompt.iH,this.sMessage="点击打开任务详细提示",this.iFx=4;break;case 2:this.iX=0,this.iY=0,this.iW=118,this.iH=83,this.sMessage="点击打开小地图",this.iFx=1;break;case 3:this.iX=s.default.x_x,this.iY=s.default.x_y,this.iW=s.default.x_w,this.iH=s.default.x_h,this.sMessage="点击自动前往",this.iFx=6;break;case 4:this.iX=M.default.gi().iX,this.iY=M.default.gi().iY,this.iW=M.default.gi().iW,this.iH=80,this.sMessage="点击前往完成任务",this.iFx=7;break;case 5:case 6:this.iX=o.default.SCRW-255,this.iY=M.default.gi().iY,this.iW=M.default.gi().iW,this.iH=80,this.sMessage="点击继续任务",this.iFx=7;break;case 10:this.iX=o.default.SCRW-83,this.iY=0,this.iW=83,this.iH=83,this.sMessage="点击头像打开属性页面",this.iFx=7;break;case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 58:case 59:case 60:this.iX=o.default.SCRW-83,this.iY=0,this.iW=83,this.iH=83,this.sMessage="经验足够，点击头像/升级按钮",this.iFx=7;break;case 50:x.default.Initex("经验已足够升入下一级，点击右上角人物头像打开属性栏，点击#cff0000升级按钮#o升级",0,0,"",0,0,"",2,0,"确定"),this.iGuideing=-1;break;case 11:this.iX=a.btn_upgrade.iX,this.iY=a.btn_upgrade.iY,this.iW=a.btn_upgrade.iW,this.iH=a.btn_upgrade.iH,this.sMessage="你的经验以足够升级，点击升级按钮",this.iFx=6;break;case 12:this.iX=a.btn_addpoint.iX,this.iY=a.btn_addpoint.iY,this.iW=a.btn_addpoint.iW,this.iH=a.btn_addpoint.iH,this.sMessage="每次升级有5点属性可自由分配",this.iFx=6;break;case 13:this.iX=a.btn_add[2].iX,this.iY=a.btn_add[2].iY,this.iW=a.btn_add[2].iW,this.iH=a.btn_add[2].iH,this.sMessage="新玩家建议加力量，以便前期杀怪",this.iFx=0;break;case 14:this.iX=_.default.gi().btn_chat1.iX,this.iY=_.default.gi().btn_chat1.iY,this.iW=_.default.gi().btn_chat1.iW,this.iH=_.default.gi().btn_chat1.iH,this.sMessage="收到新的消息，点击查看",this.iFx=6;break;case 20:this.iX=b.default.gi().btn_bag.iX,this.iY=b.default.gi().btn_bag.iY,this.iW=80,this.iH=80,this.sMessage="点击打开背包",this.iFx=5;break;case 21:for(i=0;i<20;i++)if(v.default.gi().goods[2][i].iGid>0&&2==h.default.de_goods.intValue(v.default.gi().goods[2][i].iTid,0,16)&&h.default.de_goods.intValue(v.default.gi().goods[2][i].iTid,0,19)==P.default.me.iRace&&0==h.default.de_goods.intValue(v.default.gi().goods[2][i].iTid,0,9)){this.iX=R.default.iGx+5+i%5*85,this.iY=R.default.iGy+5+i/5*85,this.iW=80,this.iH=80,this.sMessage="双击装备穿戴",this.iFx=7;break}i>=20&&(this.iGuideing=-1);break;case 22:this.iX=v.default.iX+395,this.iY=v.default.iY+155,this.iW=60,this.iH=60,this.sMessage="双击使用/穿戴",this.iFx=0;break;case 30:this.iX=b.default.gi().btn_team.iX,this.iY=b.default.gi().btn_team.iY,this.iW=b.default.gi().btn_team.iW,this.iH=b.default.gi().btn_team.iH,this.sMessage="组队打怪可以事半功倍",this.iFx=5;break;case 31:this.iX=b.default.gi().btn_team.iX,this.iY=b.default.gi().btn_team.iY,this.iW=b.default.gi().btn_team.iW,this.iH=b.default.gi().btn_team.iH,this.sMessage="闪烁时有玩家申请入队",this.iFx=5;break;case 32:this.iX=a.btn_roles[0].iX,this.iY=a.btn_roles[0].iY,this.iW=a.btn_roles[0].iW,this.iH=a.btn_roles[0].iH,this.sMessage="点击玩家，同意入队",this.iFx=2;break;case 33:this.iX=y.default.gi().fat[2][0].iX-30,this.iY=y.default.gi().fat[2][0].iY-60,this.iW=60,this.iH=60,this.sMessage="直接点击敌人攻击",this.iFx=2,D.default.aff.iAutoFightLast=0;break;case 34:case 95:this.iX=y.default.gi().btn_operate[0].iX,this.iY=y.default.gi().btn_operate[0].iY,this.iW=80,this.iH=80,this.sMessage="点击法术选择技能",this.iFx=4,D.default.aff.iAutoFightLast=0;break;case 35:this.iX=y.default.gi().btn_operate[3].iX,this.iY=y.default.gi().btn_operate[3].iY,this.iW=80,this.iH=80,this.sMessage="点击防御可以减少伤害",this.iFx=5,D.default.aff.iAutoFightLast=0;break;case 36:this.iX=y.default.gi().btn_operate[1].iX,this.iY=y.default.gi().btn_operate[1].iY,this.iW=80,this.iH=80,this.sMessage="点击道具后使用一个止血草",this.iFx=5,D.default.aff.iAutoFightLast=0;break;case 37:this.iX=y.default.gi().btn_operate[7].iX,this.iY=y.default.gi().btn_operate[7].iY,this.iW=80,this.iH=80,this.sMessage="打不过可以选择逃跑",this.iFx=5,D.default.aff.iAutoFightLast=0;break;case 38:this.iX=y.default.gi().btn_operate[8].iX,this.iY=y.default.gi().btn_operate[8].iY,this.iW=80,this.iH=80,this.sMessage="点击捕捉后选择目标",this.iFx=6,D.default.aff.iAutoFightLast=0;break;case 39:this.iX=y.default.gi().btn_operate[1].iX,this.iY=y.default.gi().btn_operate[1].iY,this.iW=80,this.iH=80,this.sMessage="点击道具后使用一个薄荷",this.iFx=5,D.default.aff.iAutoFightLast=0;break;case 61:x.default.Initex("点击下方任务按钮，可以查看当前已领的任务，和任务完成条件",0,0,"",0,0,"",5,75,"确定"),this.iGuideing=-1;break;case 62:case 63:case 64:case 65:case 66:case 67:case 68:case 69:case 70:x.default.Initex("您有未分配的属性点，可点击#cff0000人物头像/加点#o按钮进行加点，前期建议加力量，加入门派后会自动洗点一次",0,0,"",0,0,"",2,0,"确定"),this.iGuideing=-1;break;case 71:x.default.Initex("您当前气血不满，可以打开右下角#cff0000快捷/快捷恢复#o按钮恢复，也可以使用#cff0000红池#o战斗结束自动恢复满气血",0,0,"",0,0,"",2,0,"确定"),this.iGuideing=-1;break;case 72:x.default.Initex("您当前魔法不满，可以打开右下角#cff0000快捷/快捷恢复#o按钮恢复，也可以使用#cff0000蓝池#o战斗结束自动恢复满魔法",0,0,"",0,0,"",2,0,"确定"),this.iGuideing=-1;break;case 73:x.default.Initex("在野外行走时，怪物会自动与你战斗，可以打开右下角#cff0000快捷/遇怪:开/关#o按钮来屏蔽野外怪物",0,0,"",0,0,"",2,0,"确定"),this.iGuideing=-1;break;case 74:this.iX=b.default.gi().btn_qq.iX,this.iY=b.default.gi().btn_qq.iY,this.iW=b.default.gi().btn_qq.iW,this.iH=b.default.gi().btn_qq.iH,this.sMessage="点击这里可打开上次提示",this.iFx=2;break;case 75:this.iX=b.default.gi().btn_mission.iX-40,this.iY=b.default.gi().btn_mission.iY-80,this.iW=80,this.iH=80,this.sMessage="点击打开任务，可以看到当前任务提示",this.iFx=5;break;case 76:for(i=0;i<20;i++)if(v.default.gi().goods[2][i].iGid>0&&97==v.default.gi().goods[2][i].iTid){this.iX=p.default.iGx+5+i%5*85,this.iY=p.default.iGy+5+i/5*85,this.iW=80,this.iH=80,this.sMessage="双击图纸",this.iFx=4;break}i>=20&&(this.iGuideing=-1);break;case 79:this.iX=p.default.iX+30+400-20-110,this.iY=p.default.iY+p.default.iH-30-160+160-20-52,this.iW=110,this.iH=52,this.sMessage="点击制造装备",this.iFx=0;break;case 77:x.default.Initex("点击上方宠物头像，可以查看#cff0000宠物属性，资质，成长，技能#o",0,0,"",0,0,"",5,78,"确定"),this.iGuideing=-1;break;case 78:this.iX=o.default.SCRW-83-104-83,this.iY=0,this.iW=83,this.iH=83,this.sMessage="点击宠物头像，查看宠物属性",this.iFx=7;break;case 80:case 82:this.iX=b.default.gi().btn_fast.iX,this.iY=b.default.gi().btn_fast.iY,this.iW=b.default.gi().btn_fast.iW,this.iH=b.default.gi().btn_fast.iH,this.sMessage="点击打开快捷",this.iFx=5;break;case 81:this.iX=a.btn_dundi.iX,this.iY=a.btn_dundi.iY,this.iW=a.btn_dundi.iW,this.iH=a.btn_dundi.iH,this.sMessage="点击使用遁地术",this.iFx=6;break;case 83:this.iX=a.btn_dark.iX,this.iY=a.btn_dark.iY,this.iW=a.btn_dark.iW,this.iH=a.btn_dark.iH,this.sMessage="点击关闭遇怪，在野外地图不再碰到怪物",this.iFx=6;break;case 84:this.iX=S.default.xfs.btn_skills[0].iX,this.iY=S.default.xfs.btn_skills[0].iY,this.iW=S.default.xfs.btn_skills[0].iW,this.iH=S.default.xfs.btn_skills[0].iH,this.sMessage="点击技能",this.iFx=5;break;case 85:for(e=0;e<20;e++)if(v.default.gi().goods[2][e].iGid>0&&70==v.default.gi().goods[2][e].iTid&&v.default.gi().goods[2][e].iCount>=1){this.iX=w.default.xfg.iX+5+e%5*85,this.iY=w.default.xfg.iY+5+e/5*85,this.iW=80,this.iH=80,this.sMessage="双击使用止血草",this.iFx=5;break}break;case 86:this.iX=b.default.gi().btn_act.iX,this.iY=b.default.gi().btn_act.iY,this.iW=80,this.iH=80,this.sMessage="看看有什么活动可以做",this.iFx=2;break;case 87:case 96:this.iX=S.default.xfs.btn_skills[0].iX,this.iY=S.default.xfs.btn_skills[0].iY,this.iW=80,this.iH=80,this.sMessage="选择花拳绣腿",this.iFx=5;break;case 88:case 97:this.iX=y.default.gi().fat[2][0].iX-30,this.iY=y.default.gi().fat[2][0].iY-60,this.iW=60,this.iH=60,this.sMessage="选择攻击目标",this.iFx=2;break;case 89:this.iX=P.default.me.btn_petatt.iX,this.iY=P.default.me.btn_petatt.iY,this.iW=P.default.me.btn_petatt.iW,this.iH=P.default.me.btn_petatt.iH,this.sMessage="点击打开宠物界面",this.iFx=0;break;case 90:this.iX=a.btn_joinfight.iX,this.iY=a.btn_joinfight.iY,this.iW=a.btn_joinfight.iW,this.iH=a.btn_joinfight.iH,this.sMessage="点击设置宠物出战",this.iFx=4;break;case 91:this.iX=P.default.me.btn_att.iX,this.iY=0,this.iW=83,this.iH=83,this.sMessage="点击头像打开人物属性面板",this.iFx=7;break;case 92:this.iX=a.btn_addpoint.iX,this.iY=a.btn_addpoint.iY,this.iW=a.btn_addpoint.iW,this.iH=a.btn_addpoint.iH,this.sMessage="点击加点，可以分配剩余潜力点",this.iFx=6;break;case 93:this.iX=a.pbtn_recommend.iOffX+a.pbtn_recommend.iX,this.iY=a.pbtn_recommend.iOffY+a.pbtn_recommend.iY,this.iW=a.pbtn_recommend.iW,this.iH=a.pbtn_recommend.iH,this.sMessage="看看怎么加点更合适",this.iFx=6;break;case 94:case 99:this.iX=y.default.gi().btn_operate[6].iX,this.iY=y.default.gi().btn_operate[6].iY,this.iW=y.default.gi().btn_operate[6].iW,this.iH=y.default.gi().btn_operate[6].iH,this.sMessage="选择自动模式，即可自动战斗哦~",this.iFx=5;break;case 98:this.iX=y.default.gi().fat[2][0].iX-30,this.iY=y.default.gi().fat[2][0].iY-60,this.iW=60,this.iH=60,this.sMessage="点击目标攻击",this.iFx=2;break;case 100:g.default.fm.Open("有一只萌萌的宠物可以跟你一起战斗啦~小心~宠物也会死的哦~"),this.iGuideing=-1;break;case 101:g.default.fm.Open("分配好潜能点以后不要忘记点击确认保存哦"),this.iGuideing=-1;break;case 102:this.iX=b.default.gi().btn_mounts.iX,this.iY=b.default.gi().btn_mounts.iY,this.iW=b.default.gi().btn_mounts.iW,this.iH=b.default.gi().btn_mounts.iH,this.sMessage="点击打开坐骑界面",this.iFx=5;break;case 103:this.iX=a.btn_joinfight.iX,this.iY=a.btn_joinfight.iY,this.iW=a.btn_joinfight.iW,this.iH=a.btn_joinfight.iH,this.sMessage="点击骑乘坐骑",this.iFx=5}return this.iX<=0&&this.iY<=0&&(this.iGuideing=-1,h.default.sop("error guide = "+this.iGuideing)),this.iGuideDelay=0,this.iGuideStat=0,!0}},{key:"InitGuide",value:function(){if(3!=c.default.iExtHelp)if(this.iStartDelay>0)d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&this.iStartDelay--;else if(!(P.default.me.rbs.iLev>40)&&!(this.iGuideing>=0)&&!m.default.fm.bShow&&!n.default.gi().vbk.mapdialog.bDialoging&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||y.default.bFighting||A.default.jq.bJQLock()||!C.default.m.bCheckDoing(48)||!this.SetGuide(4))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||y.default.bFighting||A.default.jq.bJQLock()||!C.default.m.bCheckDoing(49)||!this.SetGuide(5))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||y.default.bFighting||A.default.jq.bJQLock()||!C.default.m.bCheckDoing(50)||!this.SetGuide(6))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||y.default.bFighting||A.default.jq.bJQLock()||g.default.fm.bShow||!C.default.m.bCheckDoing(147)||!this.SetGuide(4))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||y.default.bFighting||A.default.jq.bJQLock()||!M.default.gi().bOpen||!C.default.m.bCheckDoing(148)||!this.SetGuide(5))&&!(d.default.gi().LastStatType(0)==d.default.GS_MYATTFRAME&&P.default.me.rbs.iExp>=r.default.iUpgradeExp[P.default.me.rbs.iLev]&&this.SetGuide(11))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||!_.default.gi().bPrivateChatFlash||!this.SetGuide(14))&&(d.default.gi().LastStatType(0)!=d.default.GS_MYGOODSFRAME||!this.SetGuide(21))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||2!=n.default.gi().iCurrentMapId||!this.SetGuide(30))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||!b.default.gi().bRequestFlash||!this.SetGuide(31))&&!(d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&P.default.me.iFlag[3]<=0&&P.default.me.rbs.iHp<P.default.me.rbs.iMaxHp&&this.SetGuide(71))&&!(d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&P.default.me.iFlag[4]<=0&&P.default.me.rbs.iMp<P.default.me.rbs.iMaxMp&&this.SetGuide(72))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||!y.default.bFighting||1==n.default.gi().iCurrentMapId||!this.SetGuide(73))&&!(d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&T.default.mp.iPetCount>0&&this.SetGuide(77))&&(d.default.gi().LastStatType(0)!=d.default.GS_MAKEEQUIP||!this.SetGuide(76))&&(d.default.gi().LastStatType(0)!=d.default.GS_MAKEEQUIP||!p.default.bCanMake||!this.SetGuide(79))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||!C.default.m.bCheckDoing(143)||!this.SetGuide(80))&&!(d.default.gi().LastStatType(0)==d.default.GS_FASTOPERATE&&this.bCheckGuide(80)&&C.default.m.bCheckDoing(143)&&this.SetGuide(81))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||y.default.bFighting||!C.default.m.bCheckDoing(23)||!this.SetGuide(86))&&!(y.default.bFighting&&0==y.default.gi().iFightStat&&C.default.m.bCheckDoing(150)&&this.SetGuide(34))&&!(y.default.bFighting&&1==y.default.gi().iFightStat&&C.default.m.bCheckDoing(150)&&this.SetGuide(87))&&!(y.default.bFighting&&4==y.default.gi().iFightStat&&C.default.m.bCheckDoing(150)&&this.SetGuide(88))&&!(y.default.bFighting&&0==y.default.gi().iFightStat&&C.default.m.bCheckDoing(150)&&this.bCheckGuide(88)&&this.SetGuide(94))&&!(y.default.bFighting&&0==y.default.gi().iFightStat&&C.default.m.bCheckDoing(157)&&this.SetGuide(95))&&!(y.default.bFighting&&1==y.default.gi().iFightStat&&C.default.m.bCheckDoing(157)&&this.SetGuide(96))&&!(y.default.bFighting&&4==y.default.gi().iFightStat&&C.default.m.bCheckDoing(157)&&this.SetGuide(97))&&!(y.default.bFighting&&10==y.default.gi().iFightStat&&C.default.m.bCheckDoing(157)&&this.SetGuide(98))&&!(y.default.bFighting&&0==y.default.gi().iFightStat&&C.default.m.bCheckDoing(157)&&this.bCheckGuide(97)&&this.SetGuide(99))&&(d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||y.default.bFighting||!C.default.m.bCheckDoing(157)||!this.SetGuide(89))&&(d.default.gi().LastStatType(0)!=d.default.GS_PETSFRAME||!this.bCheckGuide(89)||!this.SetGuide(90))&&(!this.bCheckGuide(90)||!this.SetGuide(100))&&(!y.default.bFighting||0!=y.default.gi().iFightStat||1!=y.default.gi().iFightType||!this.SetGuide(38))&&(y.default.bFighting||d.default.gi().LastStatType(0)!=d.default.GS_GAMEING||!this.bCheckGuide(38)||!this.SetGuide(82))&&(y.default.bFighting||d.default.gi().LastStatType(0)!=d.default.GS_FASTOPERATE||!this.bCheckGuide(82)||!this.SetGuide(83))&&!(P.default.me.rbs.iLev>=10&&P.default.me.rbs.iSchoolId>0&&d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&P.default.me.rbs.nut>0&&this.SetGuide(91)||P.default.me.rbs.iLev>=10&&P.default.me.rbs.iSchoolId>0&&d.default.gi().LastStatType(0)==d.default.GS_MYATTFRAME&&P.default.me.rbs.nut>0&&this.SetGuide(92)||P.default.me.rbs.iLev>=10&&P.default.me.rbs.iSchoolId>0&&f.default.pxe.IsStat("人物加点")&&this.SetGuide(93)||this.bCheckGuide(93)&&this.SetGuide(101)||P.default.me.rbs.iLev>=30&&k.default.mm.iMountsCount>0&&this.SetGuide(102)||d.default.gi().LastStatType(0)==d.default.GS_MOUNTSFRAME&&P.default.me.iFightMid<=0&&this.bCheckGuide(102)&&this.SetGuide(103)||y.default.bFighting&&2==y.default.gi().iFightStat&&v.default.bHaveGoods(70,1)&&this.bCheckGuide(36)&&this.SetGuide(85))){if(BeginersGuide.iEventGuide>0){if(33==BeginersGuide.iEventGuide&&y.default.bFighting&&0==y.default.gi().iFightStat&&this.SetGuide(33))return;if(34==BeginersGuide.iEventGuide&&y.default.bFighting&&0==y.default.gi().iFightStat&&this.SetGuide(34))return;if(35==BeginersGuide.iEventGuide&&y.default.bFighting&&0==y.default.gi().iFightStat&&this.SetGuide(35))return;if(36==BeginersGuide.iEventGuide&&y.default.bFighting&&0==y.default.gi().iFightStat&&this.SetGuide(36))return;if(37==BeginersGuide.iEventGuide&&y.default.bFighting&&0==y.default.gi().iFightStat&&this.SetGuide(37))return;if(38==BeginersGuide.iEventGuide&&y.default.bFighting&&0==y.default.gi().iFightStat&&this.SetGuide(38))return;if(39==BeginersGuide.iEventGuide&&y.default.bFighting&&0==y.default.gi().iFightStat&&this.SetGuide(39))return;if(20==BeginersGuide.iEventGuide&&d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&!b.default.gi().bOpening&&b.default.gi().bShow&&this.SetGuide(20))return;if(61==BeginersGuide.iEventGuide&&d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&this.SetGuide(61))return;if(74==BeginersGuide.iEventGuide&&d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&this.SetGuide(74))return;if(75==BeginersGuide.iEventGuide&&d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&!b.default.gi().bOpening&&b.default.gi().bShow&&this.SetGuide(75))return;if(78==BeginersGuide.iEventGuide&&d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&this.SetGuide(78))return}this.iTime++,this.iTime%4500==0&&d.default.gi().LastStatType(0)==d.default.GS_GAMEING&&P.default.me.rbs.iLev<20&&P.default.me.rbs.nut>0&&(0==P.default.me.rbs.iSchoolId&&x.default.Initex("您有未分配的属性点，可点击#cff0000人物头像/加点#o按钮进行加点，前期建议加力量，加入门派后会自动洗点一次",0,0,"",0,0,"",2,0,"确定"),this.iGuideing=-1)}}},{key:"InitGuideFromSever",value:function(t){var e=t.GetNextInt();BeginersGuide.iEventGuide=e}},{key:"ProcTouch",value:function(t,e,i){return this.iGuideing>=0&&(this.bForce||2==this.iGuideStat&&3==t&&(this.iGuideStat=3),!u.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||(3==t&&(this.iGuideing=-1),!1))}}]),BeginersGuide}();i.default=G,G.bg=null,G.gi=function(){return null==G.bg&&(G.bg=new G),G.bg},G.iEventGuide=0},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/PackageTools":9,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engine/xms/XmsEngine":40,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/History/XRecordFast":67,"../../../../engtst/mgm/MyAI":68,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/frame/message/FrameMessageEx":88,"../../../../engtst/mgm/gameing/chat/privatechat/FriendList":102,"../../../../engtst/mgm/gameing/equip/MakeEquip":116,"../../../../engtst/mgm/gameing/fast/FastButton":118,"../../../../engtst/mgm/gameing/fast/FastOperate":119,"../../../../engtst/mgm/gameing/fight/AutoFightFrame":126,"../../../../engtst/mgm/gameing/fight/XFight":130,"../../../../engtst/mgm/gameing/fight/XFightGoods":133,"../../../../engtst/mgm/gameing/fight/XFightRoleSkill":135,"../../../../engtst/mgm/gameing/help/ExtHelp/ExtHelp":183,"../../../../engtst/mgm/gameing/me/AddPoint":209,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../engtst/mgm/gameing/me/goods/MyGoodsFrame":223,"../../../../engtst/mgm/gameing/me/mission/MissionFrame":231,"../../../../engtst/mgm/gameing/me/mission/MissionLead":232,"../../../../engtst/mgm/gameing/me/mission/MyMission":233,"../../../../engtst/mgm/gameing/me/mounts/MountsFrame":242,"../../../../engtst/mgm/gameing/me/mounts/MyMounts":243,"../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../engtst/mgm/gameing/me/pet/PetsFrame":248,"../../../../engtst/mgm/gameing/me/team/TeamOperate":269,"../../../../engtst/mgm/gameing/me/xms_AddPoint":276,"../../../../map/MapManager":286,"../../../../map/SmallMap":288,"./JQMode":187}],182:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButton"))),l=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),g=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function DayAttend(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,DayAttend);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(DayAttend.__proto__||Object.getPrototypeOf(DayAttend)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=460,e.iH=350,e.iX=(s.default.SCRW-e.iW)/2,e.iY=(s.default.SCRH-e.iH)/2,e.btn_get=new u.default(f.default.xani_button),e.btn_get.InitButton("统一大按钮2"),e.btn_get.Move(e.iX+e.iW-60-5,e.iY,60,60),e.btn_get.sName="签到",e.iNeedDay=new Int32Array(6),e.sGiveDetail=new Array(6),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(DayAttend,o.default),a(DayAttend,[{key:"Draw",value:function(){var t,e,i,a,s,r,o,u;for(c.default.Frame2_MD(this.iX,this.iY,this.iW,this.iH),s=this.iX+20,r=this.iY+20,o=200,u=230,l.default.gi().FillRect_2D(s,r,s+o,r+u,536870912),i=0==this.iWeek?7:this.iWeek,a=0,t=0;t<7;t++)(e=0==t?7:t)<i?(l.default.gi().DrawTextEx(s+10,r+10+30*e-30,"周"+n.default.sWeek[e],4278190080,20,101,1,1,0,0,0),0==(this.iFlag19&1<<t)?l.default.gi().DrawTextEx(s+10+120,r+10+30*e-30,"未签到",4294901760,20,101,1,1,0,0,0):(l.default.gi().DrawTextEx(s+10+120,r+10+30*e-30,"已签到",4278255360,20,101,1,1,0,0,0),a++)):i==e?(l.default.gi().FillRect_2D(s+10,r+10+30*e-30,s+o-10,r+10+30*e-30+20,536870912),l.default.gi().DrawTextEx(s+10,r+10+30*e-30,"周"+n.default.sWeek[e],4278190080,20,101,1,1,0,0,0),0!=(this.iFlag19&1<<t)&&(l.default.gi().DrawTextEx(s+10+120,r+10+30*e-30,"已签到",4278255360,20,101,1,1,0,0,0),a++)):l.default.gi().DrawTextEx(s+10,r+10+30*e-30,"周"+n.default.sWeek[e],4278190080,20,101,1,1,0,0,0);r+=u,l.default.gi().DrawTextEx(s+10,r+10,"当前活跃度"+this.iAct,4278190080,30,101,1,1,0,0,0),l.default.gi().DrawTextEx(s+10,r+50,"活跃度达到"+this.iNeedAct+"可签到",4278190080,20,101,1,1,0,0,0),s+=220,r=this.iY+20,l.default.gi().FillRect_2D(s,r,s+o,r+u,536870912);var f="#cffff00本周已累计签到"+a+"次#e#e#c000000";for(t=0;t<this.iGiveCount;t++)f+="累计签到"+this.iNeedDay[t]+"次可获得:#e"+this.sGiveDetail[t],f+="#e#e";m.default.gi().Format(f,180,20),m.default.gi().Draw(s+10,r+10),r+=u,this.btn_get.Move(s+100-40,r+20,80,50),this.btn_get.Draw()}},{key:"ProcTouch",value:function(t,e,i){return this.btn_get.ProcTouch(t,e,i)?(this.btn_get.bCheck()&&(this.iAct<this.iNeedAct?g.default.easymsg.AddMessage("活跃度未达不能签到"):(h.default.gi().s_GetCodeReward(3,""),d.default.gi().PopStat(1))),!0):(3!=t||r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||d.default.gi().PopStat(1),!1)}}]),DayAttend}();i.default=_,_.Open=function(t){var e,i=d.default.gi().PushStat(d.default.GS_DAYATTEND);for(i.iWeek=t.GetNextByte(),i.iFlag19=t.GetNextInt(),i.iAct=t.GetNextInt(),i.iNeedAct=t.GetNextInt(),i.iGiveCount=t.GetNextByte(),e=0;e<i.iGiveCount;e++)i.iNeedDay[e]=t.GetNextByte(),i.sGiveDetail[e]=t.GetNextString()}},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButton":14,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86}],183:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../map/VisualBlock")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton"))),l=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),f=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../engtst/mgm/MyAI")),d=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../engtst/mgm/History/XRecordFast")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage")),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fight/XFight")),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/BeginersGuide"));_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/GamePost"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var y=function _EXTBUF(){_classCallCheck(this,_EXTBUF)},w=function(t){function ExtHelp(t){_classCallCheck(this,ExtHelp);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ExtHelp.__proto__||Object.getPrototypeOf(ExtHelp)).call(this));for(i.extsel=new Array(3),i.extsel[0]=new _EXTSEL,i.extsel[1]=new _EXTSEL,i.extsel[2]=new _EXTSEL,i.iX=s.default.SCRW/4,i.iW=3*s.default.SCRW/5,i.iH=5*s.default.SCRH/16,i.iY=s.default.SCRH-i.iH,720==s.default.SCRH?i.fRate=1:i.fRate=1*s.default.SCRH/720,i.fRate=1,i.aa=f.default.xani_ui4.InitAnimaWithName("琴清",null),i.btn1_aa=f.default.xani_ui4.InitAnimaWithName("引导按钮1",null),i.btn2_aa=f.default.xani_ui4.InitAnimaWithName("引导按钮2",null),i.btn_sel=new Array(3),e=0;e<3;e++)i.btn_sel[e]=new u.default(f.default.xani_ui),i.btn_sel[e].bSingleButton=!0;return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ExtHelp,o.default),a(ExtHelp,[{key:"Draw",value:function(){var t,e,i;for(p.default.fm.bShow=!1,_.default.easymsg.Clear(),t=1,m.default.ui4_FrameDown(this.iX,this.iY,this.iW,this.iH),this.aa.DrawEx(this.iX,s.default.SCRH,101,this.fRate,this.fRate,0,0,0),g.default.gi().FormatEx("#c00ff00"+this.sDetail,this.iW-100*this.fRate,this.fRate*ExtHelp.iWordSize,1,4278190080,this.fRate*(ExtHelp.iWordSize+ExtHelp.iWordSize/6));g.default.gi().iH>this.iH-54*this.fRate-20;)ExtHelp.iWordSize--,g.default.gi().FormatEx("#c00ff00"+this.sDetail,this.iW-100*this.fRate,this.fRate*ExtHelp.iWordSize,1,4278190080,this.fRate*(ExtHelp.iWordSize+ExtHelp.iWordSize/6));for(g.default.gi().Draw(this.iX+90*this.fRate,this.iY+10),e=168*this.fRate,i=54*this.fRate,t=0;t<3;t++)0!=this.extsel[t].type&&(this.btn_sel[t].Move(this.iX+180*this.fRate+(e+10)*t,s.default.SCRH-i-10,e,i),this.btn_sel[t].bMouseDown?(this.btn1_aa.iFrame=1,this.btn2_aa.iFrame=1):(this.btn1_aa.iFrame=0,this.btn2_aa.iFrame=0),t<2?this.btn1_aa.DrawEx(this.btn_sel[t].iX,this.btn_sel[t].iY,101,this.fRate,this.fRate,0,0,0):this.btn2_aa.DrawEx(this.btn_sel[t].iX,this.btn_sel[t].iY,101,this.fRate,this.fRate,0,0,0),l.default.gi().DrawText_2(this.btn_sel[t].iX+this.btn_sel[t].iW/2,this.btn_sel[t].iY+this.btn_sel[t].iH/2,this.extsel[t].sel,2147483648,38*this.fRate,101,1,1,0,-2,-2,1,4294967295))}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<3;a++)if(this.btn_sel[a].ProcTouch(t,e,i)){if(this.btn_sel[a].bCheck())switch(this.extsel[a].type){case 1:1==this.extsel[a].cs&&(D.default.iEventGuide=74),c.default.iExtHelp=this.extsel[a].cs,f.default.x_record.SaveTo(r.default.RECORDFILENAME),d.default.gi().PopStat(1);break;case 2:d.default.gi().PopStat(1);break;case 3:d.default.gi().PopStat(1),n.default.iLastProcBase=-1,h.default.gi().FindNpc(this.extsel[a].cs,!1,!1);break;case 4:PreviousHelp();break;case 5:D.default.iEventGuide=this.extsel[a].cs,d.default.gi().PopStat(1)}return!0}return!0}}]),ExtHelp}();i.default=w,w.iWordSize,w.iShowDelay=0,w.iHead,w.iTall,w.iPrev,w.extbuf=null,w.eh,w.Open=function(){var t,e;if(null==w.extbuf)for(w.iHead=0,w.iTall=0,w.iPrev=0,w.extbuf=new Array(8),t=0;t<8;t++)w.extbuf[t]=new y;d.default.gi().iXStat!=d.default.GS_GAMEING&&d.default.gi().iXStat!=d.default.GS_MYGOODSFRAME||b.default.bFighting||-1==D.default.gi().iGuideing&&(d.default.gi().bHaveStat(d.default.GS_EXTHELP)||(w.iShowDelay>0?w.iShowDelay--:w.iHead<w.iTall&&(e=w.iHead%8,w.iHead++,w.eh=d.default.gi().PushStat(d.default.GS_EXTHELP),_Init(w.extbuf[e].detail,w.extbuf[e].type1,w.extbuf[e].cs1,w.extbuf[e].s1,w.extbuf[e].type2,w.extbuf[e].cs2,w.extbuf[e].s2,w.extbuf[e].type3,w.extbuf[e].cs3,w.extbuf[e].s3),w.iShowDelay=20)))},w.PreviousHelp=function(){if(d.default.gi().iXStat==d.default.GS_EXTHELP&&!(w.iPrev<=0||w.iPrev<=w.iTall-6)){w.iPrev--;var t=w.iPrev%8;0==w.extbuf[t].type1&&(w.extbuf[t].type1=4,w.extbuf[t].s1="上一条"),_Init(w.extbuf[t].detail,w.extbuf[t].type1,w.extbuf[t].cs1,w.extbuf[t].s1,w.extbuf[t].type2,w.extbuf[t].cs2,w.extbuf[t].s2,w.extbuf[t].type3,w.extbuf[t].cs3,w.extbuf[t].s3)}},w.Init=function(t){},w.Initex=function(t,e,i,a,n,s,r,o,u,l){},w._Init=function(t,e,i,a,n,s,r,o,u,l){w.eh.sDetail=t,w.eh.extsel[0].type=e,w.eh.extsel[0].cs=i,w.eh.extsel[0].sel=a,w.eh.extsel[1].type=n,w.eh.extsel[1].cs=s,w.eh.extsel[1].sel=r,w.eh.extsel[2].type=o,w.eh.extsel[2].cs=u,w.eh.extsel[2].sel=l,w.iWordSize=38}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/History/XRecordFast":67,"../../../../../engtst/mgm/MyAI":68,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../engtst/mgm/gameing/fight/XFight":130,"../../../../../engtst/mgm/gameing/help/BeginersGuide":181,"../../../../../engtst/mgm/gameing/help/GamePost":186,"../../../../../map/VisualBlock":290}],184:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../map/MapManager")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../config/XDefine")),o=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/MyAI")),d=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/fast/LianDanShu")),_=_interopRequireDefault(t("../../../../engtst/mgm/gameing/fight/XFight")),p=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),b=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),D=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/GoodsDraw")),y=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods")),w=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/SmallSpeaker")),S=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/PetsFrame")),x=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/WashPet")),_interopRequireDefault(t("./JQMode")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var P=function(){function _GOODSLIST(){_classCallCheck(this,_GOODSLIST),this.iStat=0}return a(_GOODSLIST,[{key:"copyfrom",value:function(t){this.iStat=t.iStat,this.iX=t.iX,this.iY=t.iY,this.iDX=t.iDX,this.iDY=t.iDY,this.iGid=t.iGid,this.iTid=t.iTid}}]),_GOODSLIST}(),v=function(){function FastGoods(){var t;for(_classCallCheck(this,FastGoods),this.glist=new Array(FastGoods.MAXCOUNT),t=0;t<FastGoods.MAXCOUNT;t++)this.glist[t]=new P;this.iListPoint=0,this.btn_use=new o.default(l.default.xani_nui2),this.btn_use.InitButton("按钮1_110"),this.btn_use.sName="使用",this.btn_close=new o.default(l.default.xani_nui2),this.btn_close.InitButton("关闭按钮"),this.bTouch=!1,this.bShowDetail=!1}return a(FastGoods,[{key:"PushGoods",value:function(t){h.default.gi().iLogicStat>0||this.iListPoint>=FastGoods.MAXCOUNT||(this.glist[this.iListPoint].iStat=1,this.glist[this.iListPoint].iGid=t.GetNextInt(),this.glist[this.iListPoint].iTid=t.GetNextShort(),this.iListPoint++,this.iX=s.default.SCRW-230-54,this.iY=s.default.SCRH-310-30,this.iW=188,this.iH=256,this.iGx=this.iX+54,this.iGy=this.iY+30)}},{key:"RemoveGoods",value:function(t){for(;t<this.iListPoint-1;t++)this.glist[t].copyfrom(this.glist[t+1]);this.iListPoint--}},{key:"CheckGoods",value:function(){var t,e;for(t=0;t<this.iListPoint;t++){for(e=0;e<20&&(y.default.gi().goods[2][e].iGid<=0||y.default.gi().goods[2][e].iGid!=this.glist[t].iGid);e++);e>=20&&this.RemoveGoods(t)}}},{key:"FindGoods",value:function(t){var e;for(e=0;e<20;e++)if(!(y.default.gi().goods[2][e].iGid<=0)&&y.default.gi().goods[2][e].iGid==t)return y.default.gi().goods[2][e];return null}},{key:"Draw",value:function(){if(this.bTouch=!1,!(p.default.me.rbs.iLev>30||_.default.bFighting||n.default.gi().vbk.mapdialog.bHideUI()||x.default.jq.bJQLock()||this.iListPoint<=0||(this.CheckGoods(),this.iListPoint<=0))){var t,e,i,a=0,r=0;for(t=0;t<this.iListPoint;t++)1==this.glist[t].iStat&&a++,2==this.glist[t].iStat&&r++;for(e=s.default.SCRW/2-100+50*a,i=s.default.SCRW/2-20+10*a,t=0;t<this.iListPoint;t++)switch(this.glist[t].iStat){case 1:this.glist[t].iStat=2,this.glist[t].iX=e+10,this.glist[t].iDX=i,this.glist[t].iY=s.default.SCRH/2-40,this.glist[t].iDY=this.glist[t].iY,this.glist[t].iDelay=10,e-=100,i-=20;break;case 2:this.glist[t].iDelay--,this.glist[t].iDelay<=0&&(r<=1?(this.glist[t].iDelay=10,this.glist[t].iStat=4,d.default.gi().iXStat==d.default.GS_GAMEING?(this.glist[t].iDX=s.default.SCRW-230,this.glist[t].iDY=s.default.SCRH-310,this.iMoveType=0):(this.glist[t].iDX=s.default.SCRW-100,this.glist[t].iDY=s.default.SCRH-100,this.iMoveType=1,this.fMoveScal=1)):(this.glist[t].iDelay=10,this.glist[t].iStat=3)),l.default.xani_nui3.DrawAnima(this.glist[t].iX,this.glist[t].iY,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(this.glist[t].iX,this.glist[t].iY,l.default.de_goods.strValue(this.glist[t].iTid,0,10),0);break;case 3:this.glist[t].iDelay--,this.glist[t].iDelay<=0?(this.glist[t].iDelay=10,this.glist[t].iStat=4,d.default.gi().iXStat==d.default.GS_GAMEING?(this.glist[t].iDX=s.default.SCRW-230,this.glist[t].iDY=s.default.SCRH-310,this.iMoveType=0):(this.glist[t].iDX=s.default.SCRW-100,this.glist[t].iDY=s.default.SCRH-100,this.iMoveType=1,this.fMoveScal=1)):(this.glist[t].iX+=(this.glist[t].iDX-this.glist[t].iX)/this.glist[t].iDelay,this.glist[t].iY+=(this.glist[t].iDY-this.glist[t].iY)/this.glist[t].iDelay),l.default.xani_nui3.DrawAnima(this.glist[t].iX,this.glist[t].iY,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(this.glist[t].iX,this.glist[t].iY,l.default.de_goods.strValue(this.glist[t].iTid,0,10),0);break;case 4:this.glist[t].iDelay--,this.glist[t].iDelay<=0?(this.glist[t].iStat=5,this.glist[t].iX=this.glist[t].iDX,this.glist[t].iY=this.glist[t].iDY):(this.glist[t].iX+=(this.glist[t].iDX-this.glist[t].iX)/this.glist[t].iDelay,this.glist[t].iY+=(this.glist[t].iDY-this.glist[t].iY)/this.glist[t].iDelay),0==this.iMoveType?(l.default.xani_nui3.DrawAnima(this.glist[t].iX,this.glist[t].iY,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(this.glist[t].iX,this.glist[t].iY,l.default.de_goods.strValue(this.glist[t].iTid,0,10),0)):(l.default.xani_nui3.DrawAnimaEx(this.glist[t].iX,this.glist[t].iY,"物品格子",0,101,this.fMoveScal,this.fMoveScal,0,0,0),l.default.xani_ngoods.DrawAnimaEx(this.glist[t].iX,this.glist[t].iY,l.default.de_goods.strValue(this.glist[t].iTid,0,10),0,101,this.fMoveScal,this.fMoveScal,0,0,0),this.fMoveScal*=.9,l.default.sop("sdfsdf"));break;case 5:if(d.default.gi().iXStat!=d.default.GS_GAMEING)break;if(_.default.bFighting)break;e=s.default.SCRW-230-54,i=s.default.SCRH-310-30,l.default.xani_nui5.DrawAnima(e,i,"快捷使用物品大框",0),l.default.xani_nui3.DrawAnima(e+54,i+30,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(e+54,i+30,l.default.de_goods.strValue(this.glist[t].iTid,0,10),0),u.default.gi().DrawTextEx(e+54+40,i+30+90,l.default.de_goods.strValue(this.glist[t].iTid,0,4),4294967295,25,101,1,1,0,-2,0),this.btn_use.Move(e+94-55,i+30+90+50,110,52),this.btn_use.Draw(),this.btn_close.Move(e+188-35,i-25,60,60),this.btn_close.Draw(),this.bShowDetail&&t==this.iListPoint-1&&D.default.new_DrawDetail(this.FindGoods(this.glist[t].iGid),this.iGx,this.iGy,0),this.bTouch=!0}}}},{key:"ProcTouch",value:function(t,e,i){if(p.default.me.rbs.iLev>30)return!1;if(_.default.bFighting)return!1;if(n.default.gi().vbk.mapdialog.bHideUI()||x.default.jq.bJQLock())return!1;if(!this.bTouch)return!1;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&this.iListPoint>0&&this.iListPoint--,!0;if(this.iListPoint>0&&(this.bShowDetail=!1,1!=t&&2!=t||!r.default.bInRect(e,i,this.iGx,this.iGy,80,80)||(this.bShowDetail=!0),this.btn_use.ProcTouch(t,e,i)&&this.btn_use.bCheck())){for(var a=0;a<20;a++)if(!(y.default.gi().goods[2][a].iGid<=0)&&y.default.gi().goods[2][a].iGid==this.glist[this.iListPoint-1].iGid){c.default.easymsg.snapatt(),this.UseGoods(y.default.gi().goods[2][a]),c.default.easymsg.calcattchanged();break}this.iListPoint--}return!!r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)}},{key:"MoveGoods",value:function(t,e){var i,a;if((1!=e.iOid||y.default.bCheckEquipment(t,e.iPos))&&(1!=t.iOid||-1==e.iGid||y.default.bCheckEquipment(e,t.iPos)))if(318!=t.iTid&&319!=t.iTid&&320!=t.iTid&&321!=t.iTid&&322!=t.iTid&&323!=t.iTid||2!=t.iOid||2==e.iOid){if(f.default.gi().s_MoveGoods(t.iGid,t.iOid,t.iPos,e.iGid,e.iOid,e.iPos),-1==e.iGid)e.copyfrom(t),t.iGid=-1;else if(i=l.default.de_goods.intValue(t.iTid,0,28),t.iTid==e.iTid&&i>1)e.iCount>=i||(t.iCount+e.iCount<=i?(e.iCount+=t.iCount,t.iGid=-1):(a=t.iCount+e.iCount,e.iCount=i,t.iCount=a-i));else{var n=new b.default;n.copyfrom(e),e.copyfrom(t),t.copyfrom(n)}1!=t.iOid&&1!=e.iOid||((1==t.iOid&&2==t.iPos||1==e.iOid&&2==e.iPos)&&(p.default.me.bwc=!0),p.default.me.CalcFightAtt())}else m.default.fm.Open("礼包不能移动到行囊和仓库")}},{key:"UseGoods",value:function(t){var e,i;if(null!=t&&2==t.iOid)if(-1==(i=l.default.de_goods.intValue(t.iTid,-1,16))){if(-1!=(i=l.default.de_goods.intValue(t.iTid,-1,27))){e=0;for(var a=1,s=l.default.de_goods.intValue(t.iTid,0,1),r=l.default.de_goods.intValue(t.iTid,0,2);(-1!=s&&p.default.me.rbs.iHp<p.default.me.rbs.iMaxHp||-1!=r&&p.default.me.rbs.iMp<p.default.me.rbs.iMaxMp)&&!(a<=0);)-1!=s&&(p.default.me.rbs.iHp+=s),-1!=r&&(p.default.me.rbs.iMp+=r),a--,e++;return 3==i&&(e=1),void(e<=0&&i<3?c.default.easymsg.AddMessage("您的状态很好，不需要恢复"):(f.default.gi().s_UseGoods(t.iGid,e,""),t.iCount-=e,t.iCount<=0&&(t.iGid=-1,t=null),p.default.me.CalcFightAtt()))}if(-1==(i=l.default.de_goods.intValue(t.iTid,-1,33)))if(-1==(i=l.default.de_goods.intValue(t.iTid,-1,30)))if(-1==(i=l.default.de_goods.intValue(t.iTid,-1,31))){if(-1!=(i=l.default.de_goods.intValue(t.iTid,-1,34)))return 1!=i&&3!=i?void c.default.easymsg.AddMessage("不能直接使用"):void f.default.gi().s_UseGoods(t.iGid,1,"");c.default.easymsg.AddMessage("未知物品使用失败")}else c.default.easymsg.AddMessage("不能直接使用");else if(1==i)if(195==t.iTid||328==t.iTid||329==t.iTid||330==t.iTid||331==t.iTid)p.default.me.rbs.iGovSkill[1]>0?g.default.Open(t,null):c.default.easymsg.AddMessage("还未学习炼丹术");else if(t.iTid>=342&&t.iTid<=346)p.default.me.rbs.iGovSkill[1]>0?(d.default.gi().PopStat(1),g.default.Open(null,t)):c.default.easymsg.AddMessage("还未学习炼丹术");else if(160==t.iTid||161==t.iTid){var o=S.default.Open();null!=o&&(o.iPage=1)}else 122==t.iTid?w.default.Open(t):(f.default.gi().s_UseGoods(t.iGid,1,""),119==t.iTid&&0!=t.iAtts[0]&&(n.default.gi().iMapChangeing=100));else c.default.easymsg.AddMessage("不能直接使用");else f.default.gi().s_UseGoods(t.iGid,1,"")}else this.MoveGoods(t,y.default.gi().goods[1][i])}}]),FastGoods}();i.default=v,v.MAXCOUNT=32,v.fg=null,v.gi=function(){return null==v.fg&&(v.fg=new v),v.fg}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/PackageTools":9,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/MyAI":68,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/gameing/fast/LianDanShu":122,"../../../../engtst/mgm/gameing/fight/XFight":130,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../engtst/mgm/gameing/me/goods/SmallSpeaker":224,"../../../../engtst/mgm/gameing/me/pet/PetsFrame":248,"../../../../engtst/mgm/gameing/me/pet/WashPet":249,"../../../../map/MapManager":286,"./JQMode":187}],185:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),s=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),r=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/Gameing")),o=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/JQMode")),u=_interopRequireDefault(t("../../../../../map/MapManager"));_interopRequireDefault(t("../../../../../mgm/newmainmenu/StarEffect"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(){function FuYuan(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FuYuan)}return a(FuYuan,[{key:"FuYuan",value:function(){this.bInited=!1,this.bShow=!1,this.bShowEffect=!0,this.bShowFrame=!1}},{key:"Draw",value:function(){if(!u.default.gi().vbk.mapdialog.bHideUI()&&!o.default.jq.bJQLock()&&this.bShow){var t=r.default.iTopIconOffX;this.bInited||(this.btn_open=new n.default(s.default.xani_nui6),this.btn_open.InitButton("首充图标"),this.aa_effect=s.default.xani_nui6.InitAnimaWithName("转圈效果",null),this.bInited=!0),this.btn_open.Move(t,0,80,80),this.btn_open.Draw(),this.bShowEffect&&(this.aa_effect.Draw(t+40,40),this.aa_effect.NextFrame()),this.bShowFrame,r.default.iTopIconOffX+=90}}},{key:"ProcTouch",value:function(t,e,i){return!1}}]),FuYuan}();i.default=l,l.fy=new l},{"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/gameing/Gameing":91,"../../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../../map/MapManager":286,"../../../../../mgm/newmainmenu/StarEffect":311}],186:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../config/GameData")),_interopRequireDefault(t("../../../../config/GmConfig"))),s=_interopRequireDefault(t("../../../../config/XDefine")),r=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),u=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),l=_interopRequireDefault(t("../../../../engtst/mgm/History/XRecordFast")),f=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),d=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),c=(_interopRequireDefault(t("../../../../mgm/mainmenu/MainMenu")),_interopRequireDefault(t("../../../../mgm/mainmenu/download/_DOWNFILE"))),m=_interopRequireDefault(t("../../../../mgm/mainmenu/download/_DOWNLOAD")),g=_interopRequireDefault(t("../../../../mgm/newmainmenu/LeadPage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _=function _POST(){_classCallCheck(this,_POST)},p=function(){function GamePost(){_classCallCheck(this,GamePost),this.iStat=200,this.down_post=new c.default,this.down_post.InitData("post.dat",null,0),this.btn_close=new r.default(u.default.xani_nui2),this.btn_close.InitButton("关闭按钮"),this.btn_up=new r.default(u.default.xani_nui2),this.btn_up.InitButton("按钮1"),this.btn_up.sName="上一条",this.btn_down=new r.default(u.default.xani_nui2),this.btn_down.InitButton("按钮1"),this.btn_down.sName="下一条",this.bLock=!1}return a(GamePost,[{key:"Draw",value:function(){var t,e;if(!(d.default.me.iRid<=0))switch(this.iStat){case 0:g.default.bProcThread=!0,this.dproc=new m.default,this.dproc.downloadstart(g.default.sResSeverList[g.default.iResSeverPoint],this.down_post),this.iStat=10;break;case 10:if(this.down_post.bSuccress())if((e=u.default.gp.pls).InitDataFromSD(this.down_post.sWriteTo)){for(e.GetNextByte(),this.iPostCount=e.GetNextInt(),this.posts=new Array(this.iPostCount),t=0;t<this.iPostCount;t++)this.posts[t]=new _,this.posts[t].sTitle=e.GetNextString(),e.GetNextData(),this.posts[t].sDetail=e.DataToString(),this.posts[t].sDate=e.GetNextString(),this.posts[t].sAuthor=e.GetNextString(),this.posts[t].iSeverID=e.GetNextInt(),0!=this.posts[t].iSeverID&&this.posts[t].iSeverID!=l.default.iLastSever&&(t--,this.iPostCount--);this.iPostCount>0?(this.iStat=20,this.iPostPoint=this.iPostCount-1,this.iW=400,this.iH=400,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.iTextOff=0,d.default.me.rbs.iLev<25&&(this.iStat=200)):this.iStat=200}else this.iStat=200;this.down_post.bFailed()&&(this.iStat=200),this.down_post.bProcing();break;case 20:this.DrawDetail();break;case 200:g.default.bProcThread=!1,this.iStat=300}}},{key:"Clear",value:function(){this.iStat<200&&(this.iStat=200)}},{key:"DrawDetail",value:function(){var t,e,i,a;this.iW=800,this.iH=480,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,f.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),f.default.new_framein(this.iX+25,this.iY+35,this.iW-50,this.iH-65),u.default.xani_nui2.DrawAnima(this.iX+this.iW/2,this.iY,"公告栏标题",0),o.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+70,this.posts[this.iPostPoint].sTitle,4294901760,32,101,1,1,0,-2,-2),t=this.iX+25,e=this.iY+95,i=this.iW-50,a=this.iH-200,o.default.gi().SetViewClip(t,e+5,t+i,e+a-5),h.default.gi().FormatEx("#c1e5c6b"+this.posts[this.iPostPoint].sDetail,i-50,25,0,4278190080,32),this.iTextH=h.default.gi().iH,this.iTextH+this.iTextOff<a-10&&(this.iTextOff=a-10-this.iTextH),this.iTextOff>0&&(this.iTextOff=0),h.default.gi().Draw(t+25,e+5+this.iTextOff),o.default.gi().NoClip(),this.btn_up.Move(this.iX+100,this.iY+this.iH-100,161,53),this.btn_up.Draw(),this.btn_down.Move(this.iX+this.iW-100-161,this.iY+this.iH-100,161,53),this.btn_down.Draw(),this.btn_close.Move(this.iX+this.iW-35,this.iY-25,60,60),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){if(20==this.iStat){if(this.btn_up.ProcTouch(t,e,i))return this.btn_up.bCheck()&&this.iPostPoint>0&&this.iPostPoint--,!0;if(this.btn_down.ProcTouch(t,e,i))return this.btn_down.bCheck()&&this.iPostPoint<this.iPostCount-1&&this.iPostPoint++,!0;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&(this.iStat=200),!0;if(2==t&&this.bLock)return this.iTextOff+=i-this.iLockY,this.iLockY=i,!0;if(3==t&&this.bLock)return this.bLock=!1,!0;var a,n,r,o;if(s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))a=this.iX+20,n=this.iY+60,r=this.iW-40,o=this.iH-60-40-20-10,s.default.bInRect(e,i,a,n,r,o)&&1==t&&(this.bLock=!0,this.iLockY=i);else this.iStat=200;return!0}return!1}}]),GamePost}();i.default=p,p.gp=null,p.gi=function(){return null==p.gp&&(p.gp=new p),p.gp}},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/PackageTools":9,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/History/XRecordFast":67,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../mgm/mainmenu/MainMenu":303,"../../../../mgm/mainmenu/download/_DOWNFILE":305,"../../../../mgm/mainmenu/download/_DOWNLOAD":306,"../../../../mgm/newmainmenu/LeadPage":308}],187:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../map/MapManager")),r=_interopRequireDefault(t("../../../../map/VisualBlock")),o=(_interopRequireDefault(t("../../../../map/_VISUALBLOCK")),_interopRequireDefault(t("../../../../engine/data/E_DATA")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),u=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/MyAI")),h=(_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/fight/XFight"))),d=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),c=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/TeamOperate"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(){function JQMode(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,JQMode),this.iStat=0}return a(JQMode,[{key:"bNearToNpc",value:function(t){var e=u.default.de_npc.fdata(t);if(null==e)return!1;var i=e.intValue(4),a=e.intValue(5),n=e.intValue(6);return!(i!=s.default.gi().iCurrentMapId||!r.default.bInCircle(d.default.me.iX,d.default.me.iY,a,n,60))}},{key:"StartJQ",value:function(t){this.iStat=t,this.iProc=0,this.iGoToNpc=0,this.sGoToDetail="",this.iTalkNpc=0,this.iTalkDelay=0,this.iFightId=0,this.iCSID=0}},{key:"JQLogic",value:function(){switch(this.iStat){case 0:56!=s.default.gi().iCurrentMapId||this.bJQ1Finished||this.StartJQ(1);break;case 1:this.JQProc1(),this.JQDraw1();break;case 2:var t,e,i;this.iProc<(n.default.SCRW-1100)/2&&(this.iProc=(n.default.SCRW-1100)/2),this.iProc<n.default.SCRW+255?(t=255,e=101):(i=this.iProc-n.default.SCRW-255)<255?(t=255-i,e=100-100*i/255):(t=0,e=0),o.default.gi().FillRect_2D(0,0,n.default.SCRW,n.default.SCRH,t<<24),this.iProc<n.default.SCRW&&o.default.gi().SetViewClip(0,0,this.iProc,n.default.SCRH),u.default.xani_other.DrawAnimaEx((n.default.SCRW-1100)/2,(n.default.SCRH-54)/2,"首次登陆黑屏提示语",0,e,1,1,0,0,0),this.iProc<n.default.SCRW&&o.default.gi().NoClip(),o.default.gi().DrawTextEx(n.default.SCRW-20,5,"点击屏幕继续 》",4285443272,30,101,1,1,0,-3,0),this.iProc+=10,this.iProc>=n.default.SCRW+255+255&&(this.iProc=n.default.SCRW,this.iStat=0)}}},{key:"JQDraw1",value:function(){0!=this.iStat&&(u.default.xani_nui4.DrawAnimaEx(0,-100,"阴影",1,101,1*n.default.SCRW/20,1,0,0,0),u.default.xani_nui4.DrawAnimaEx(0,n.default.SCRH+100+100,"阴影",0,101,1*n.default.SCRW/20,1,0,0,0),1==s.default.gi().iCurrentMapId&&(this.iStat=0),this.iTalkNpc>0&&o.default.gi().DrawTextEx(n.default.SCRW-20,5,"点击屏幕跳过对话 》",4285443272,30,101,1,1,0,-3,0),this.iGoToNpc>0&&this.sGoToDetail.length>0&&o.default.gi().DrawTextEx(n.default.SCRW/2,5,this.sGoToDetail,4291359731,28,101,1,1,0,-2,0))}},{key:"ProcTouch",value:function(t,e,i){return 0!=this.iStat&&(3==t&&(this.iTalkNpc>0&&(500==this.iTalkNpc?d.default.me.iPopoDelay=0:s.default.gi().vbk._npctalk(0,this.iTalkNpc,"",0),this.iTalkNpc=0,this.iTalkDelay=0),2==this.iStat&&(this.iProc<n.default.SCRW?this.iProc=n.default.SCRW:this.iProc=2*n.default.SCRW)),!0)}},{key:"bJQLock",value:function(){return 0!=this.iStat}},{key:"JQProc1",value:function(){if(this.iGoToNpc>0)this.bNearToNpc(this.iGoToNpc)&&(this.iGoToNpc=0);else{if(this.iTalkNpc>0){if(this.iTalkDelay--,!(this.iTalkDelay<=0))return;this.iTalkNpc=0,this.iTalkDelay=0}if(this.iFightId>0)return h.default.bFighting&&0==this.iFightStat&&(this.iFightStat=1),void(h.default.bFighting||1!=this.iFightStat||(this.iFightId=0));if(this.iCSID>0)this.iNowMap!=s.default.gi().iCurrentMapId&&(this.iCSID=0);else if("start"==JQMode.JQ1[this.iProc][0])this.iProc++;else if("end"==JQMode.JQ1[this.iProc][0])this.iStat=0,this.bJQ1Finished=!0;else if("gotonpc"==JQMode.JQ1[this.iProc][0])this.iGoToNpc=parseInt(JQMode.JQ1[this.iProc][1]),f.default.gi().FindNpc(this.iGoToNpc,!1,!1),JQMode.JQ1[this.iProc].length>2?this.sGoToDetail=JQMode.JQ1[this.iProc][2]:this.sGoToDetail="",this.iProc++;else if("talk"==JQMode.JQ1[this.iProc][0]){this.iTalkNpc=parseInt(JQMode.JQ1[this.iProc][1]);var t=JQMode.JQ1[this.iProc][2];JQMode.JQ1[this.iProc].length>3&&1==d.default.me.iSex&&(t=JQMode.JQ1[this.iProc][3]),500==this.iTalkNpc?(d.default.me.sPopoString=t,d.default.me.iPopoDelay=100):s.default.gi().vbk._npctalk(0,this.iTalkNpc,t,100),this.iTalkDelay=98,this.iProc++}else"fight"==JQMode.JQ1[this.iProc][0]?(this.iFightId=parseInt(JQMode.JQ1[this.iProc][1]),l.default.gi().s_SeverEvent(24,0,this.iFightId,0,0),this.iFightStat=0,this.iProc++):"cs"==JQMode.JQ1[this.iProc][0]?(this.iNowMap=s.default.gi().iCurrentMapId,this.iCSID=parseInt(JQMode.JQ1[this.iProc][1]),l.default.gi().s_ChangeMapNew(2,this.iCSID),this.iProc++):"special"==JQMode.JQ1[this.iProc][0]&&(this.DoSpecial(parseInt(JQMode.JQ1[this.iProc][1])),this.iProc++)}}},{key:"DoSpecial",value:function(t){switch(t){case 1:this.DoSpecial1()}}},{key:"DoSpecial1",value:function(){var t;d.default.me.iDx=d.default.me.iSx+1,d.default.me.iDy=d.default.me.iSy-1,d.default.me.FaceTo(),d.default.me.bfc4=!1,d.default.me.bfc6=!1,d.default.me.bfc8=!1,u.default.xani_newrole[0].InitAnimaWithName("站立_右上",d.default.me.aa_body),d.default.me.iWeapTid=291,d.default.me.aa_weapon=c.default.ResetWeapon(d.default.me.iWeapTid,0,"站立_右上",d.default.me.aa_weapon),this.pnpc1=r.default.pvb.AddVoidNpc(),this.pnpc1.bCurrentBlock=!0,this.pnpc1.iNpcId=1,this.pnpc1.iSid=0,this.pnpc1.iX=831,this.pnpc1.iY=1007,this.pnpc1.iDx=this.pnpc1.iX,this.pnpc1.iDy=this.pnpc1.iY,this.pnpc1.sNpcName="猪妖",this.pnpc1.iAnimaType=200003,this.pnpc1.sAniName="站立_右下",this.pnpc1.iR=30,this.pnpc1.iStandFlag=-1,this.pnpc1.iWeapId=this.pnpc1.iAnimaType%1e4,t=this.pnpc1.iAnimaType/1e4%10,u.default.xani_pets[this.pnpc1.iWeapId].InitAnimaWithName((0==t?"":"变异_")+this.pnpc1.sAniName,this.pnpc1.aa_body),this.pnpc2=r.default.pvb.AddVoidNpc(),this.pnpc2.bCurrentBlock=!0,this.pnpc2.iNpcId=2,this.pnpc2.iSid=0,this.pnpc2.iX=1109,this.pnpc2.iY=987,this.pnpc2.iDx=this.pnpc2.iX,this.pnpc2.iDy=this.pnpc2.iY,this.pnpc2.sNpcName="秦雪涧",this.pnpc2.iAnimaType=100291,this.pnpc2.sAniName="站立_上",this.pnpc2.iR=30,this.pnpc2.iStandFlag=-1,this.pnpc2.iWeapId=291,u.default.xani_newrole[0].InitAnimaWithName(this.pnpc2.sAniName,this.pnpc2.aa_body),this.pnpc2.iWeapId>0&&c.default.ResetWeapon(this.pnpc2.iWeapId,0,this.pnpc2.sAniName,this.pnpc2.aa_weapon),this.pnpc3=r.default.pvb.AddVoidNpc(),this.pnpc3.bCurrentBlock=!0,this.pnpc3.iNpcId=2,this.pnpc3.iSid=0,this.pnpc3.iX=1234,this.pnpc3.iY=985,this.pnpc3.iDx=this.pnpc3.iX,this.pnpc3.iDy=this.pnpc3.iY,this.pnpc3.sNpcName="沈无名",this.pnpc3.iAnimaType=150295,this.pnpc3.sAniName="站立_左上",this.pnpc3.iR=30,this.pnpc3.iStandFlag=-1,this.pnpc3.iWeapId=295,u.default.xani_newrole[5].InitAnimaWithName(this.pnpc3.sAniName,this.pnpc3.aa_body),this.pnpc3.iWeapId>0&&c.default.ResetWeapon(this.pnpc3.iWeapId,1,this.pnpc3.sAniName,this.pnpc3.aa_weapon),this.pnpc4=r.default.pvb.AddVoidNpc(),this.pnpc4.bCurrentBlock=!0,this.pnpc4.iNpcId=2,this.pnpc4.iSid=0,this.pnpc4.iX=1300,this.pnpc4.iY=898,this.pnpc4.iDx=this.pnpc4.iX,this.pnpc4.iDy=this.pnpc4.iY,this.pnpc4.sNpcName="王沐风",this.pnpc4.iAnimaType=130293,this.pnpc4.sAniName="站立_左",this.pnpc4.iR=30,this.pnpc4.iStandFlag=-1,this.pnpc4.iWeapId=293,u.default.xani_newrole[3].InitAnimaWithName(this.pnpc4.sAniName,this.pnpc4.aa_body),this.pnpc4.iWeapId>0&&c.default.ResetWeapon(this.pnpc4.iWeapId,1,this.pnpc4.sAniName,this.pnpc4.aa_weapon)}}]),JQMode}();i.default=m,m.JQ1=[["start"],["special","1"],["end"],["gotonpc","84"],["talk","84","看你这迷茫的小眼神，真让人心疼！"],["talk","500","你是谁？这里是哪里？我的心为何这般痛！"],["talk","84","因为死亡都无法令你忘怀的那个人曾经就在这里等你，爱情本来就是最伤人的东西！"],["talk","500","不！爱情是这世上最美妙的，你是无论如何都不能理解的！"],["talk","84","那么你还坚持宁可经受一季冰寒，再忍一季炙烤，宁可忘记自己也要记住那个人么？"],["talk","500","我意已决，绝不更改！"],["gotonpc","85","要经受转生的煎熬，只为能记住那个心跳，去桃花岛岛主那里渡过劫难！"],["talk","85","如果你的爱不够真挚，你会元神幻灭，魂飞魄散！你要三思！"],["talk","500","这世上没有他活着可笑，来吧！","这世上没有她活着可笑，来吧！"],["talk","85","我敬你重情义，但是我并不会手下留情，接受考验吧！"],["fight","1"],["talk","85","你有姐妹厚意，更有英雄情深！感情真挚日月可鉴，现在我为你转生，重新开始新的生命旅程吧！","你有兄弟厚意，更有佳人情深！感情真挚日月可鉴，现在我为你转生，重新开始新的生命旅程吧！"],["cs","96"],["end"]],m.jq=new m},{"../../../../config/GmConfig":5,"../../../../engine/data/E_DATA":21,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/MyAI":68,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/fight/XFight":130,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/team/TeamOperate":269,"../../../../map/MapManager":286,"../../../../map/VisualBlock":290,"../../../../map/_VISUALBLOCK":292}],188:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=(_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),c=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/MyAttFrame")),m=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function MainHelp(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MainHelp);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MainHelp.__proto__||Object.getPrototypeOf(MainHelp)).call(this));for(i.sType=["成长历程","装备大全","技能大全","宠物大全","宝石大全"],i.s0_levs=["0~9级","10~19级","20~29级","30~39级","40~49级"],i.s0_detail=[["1.背包中有新手大礼包，打开后获得丰厚的奖励","2.找到乡水镇铁匠，打造适合自己的装备"],["1.【为民除害任务】：【西阳城】的【西阳城守卫】 接取任务，完成后获得大量经验奖励。","2.【门派任务】：每10次任务为一轮，每天前两轮任务双倍奖励，完成任务获得大量经验铜币","3.【每日签到】：根据提示完成所有加活跃的任务，当活跃度满20以后，方可签到。奖励有强化符等商城道具，会员获得奖励更多哦。","4.【手艺任务】：【郢城】的【铁匠】接取任务，每10次为一轮，完成后获得大量经验和铜币，一轮任务后可随机获得一项手艺","5.【每日赛跑】：【临淄城】的【田忌】接取任务，完成后获得大量经验和铜币，并获得一个三级草药。前10名可额外获得商城道具奖励。","6.【师徒任务】：师徒二人组队至【临淄城】的【慎到】处领取。完成后师傅获得宠物修炼积分，徒弟获得大量经验和铜币。","7.【活动答题】：每周一至周五中午12点至1点可参与，答题可获得大量经验和储备。","8.【世界答题】：答出世界频道刷新的题目，即有机会获得丰厚的奖励。","9.【智者答题】：找到城镇中的【智者】，答对他提出的问题，有几率获得宝石奖励。"],["1.【强盗任务】：【郢城】的【栾千盛】处接取任务。10次为一轮，完成后获得大量经验和铜币。","2.【护法任务】：【咸阳】的【商鞅】处接取任务，10次为一轮，完成后获得大量的经验和铜币","3.【帮派山贼】：周一至周五13:00至13:40，打败帮派内刷出的山贼，获得大量帮贡。","4.【押镖任务】：【临淄城】的【程镖头】处接取任务，完成后获得大量铜币奖励，并有一定几率获得阵法书，还有可能获得红包（里面有200元宝哦）。","5.【帮派任务】：【青龙任务】【朱雀任务】【玄武任务】，【郢城】的【帮派总管】处进入帮派，完成任务可获取大量帮贡。"],["1.【门派闯关】，每周四晚上8点在【咸阳】、【临淄】或者【郢城】的【门派使者】处领取任务，挑战门派护卫。每过一关都有丰厚的奖励，过关最快的队伍更有高等级宝石领取","2.【山贼宝图】，山贼于每个整点在野外地图刷出，组队3人或3人以上前往挑战。战斗胜利后获得大量经验和铜币，并有一定几率获得藏宝图","3.【妖怪叔叔】，可以组队3人或3人以上前往野外挑战妖怪叔叔。战斗胜利后获得大量经验和铜币，并有一定几率获得一级宝石。","4.【坐骑任务】，咸阳城坐骑仙子处领取。完成后获得酷炫坐骑一只"],["1.【嚣张任务】：在城镇中找到嚣张， 必须5人组队才能进行战斗。战斗胜利后获得大量经验、铜钱、高级宠书、宝石等等 。","2.【匈奴入侵】：每周一至周四，19:00~20:00，在长城，阴山，云蒙山，匈奴营寨，打败匈奴后获得大量经验和金钱奖励，和一些物品奖励，可能获得匈奴情报，上交还能获得奖励。","3.【执法任务】：【咸阳城】的【商鞅】接取任务，10次为一轮，任务完成后可以得到1级或2级材料。","4.【副本】：【咸阳】的【副本官】处创建副本，打败副本主怪可获得大量经验和副本积分，副本积分可以换取高等级装备图纸，二级材料，三级材料，宠物修炼果。","5.【战队竞技】：在【咸阳】的【神威将军】处创建战队后，战队队长可以挑战比自己排名高的战队，挑战胜利可以提升战队排名。排名越靠前，战队每日声望增长越多。","6.【战队秘境】：在【咸阳】的【神威将军】处，点击【战队属性】中的【战队秘境】进入秘境，击败秘境主怪可以获得不同等级的封印兽魂（兽魂用于宠物进阶）。","7.【比武大会】：每周五中午12点~周六中午12点，玩家可以在【咸阳】的【比武接引人】报名，周六和周日下午13点~15点之间分别进行两场比武，比武获胜方可领取宝箱，即使失败也有其他丰厚奖励。"]],i.i0LevPoint=0,i.s1_levs=["0级装备","10级装备","20级装备","30级装备","40级装备","50级装备","60级装备","70级装备","80级装备"],i.s1_setids=[[9,1,10,3,4,5,6,7,8],[47,53,59,11,19,25,31,37,13],[48,54,60,12,20,26,32,38,14],[49,55,61,43,21,27,33,39,15],[50,56,62,44,22,28,34,40,16],[51,57,63,45,23,29,35,41,17],[52,58,64,46,24,30,36,42,18],[248,249,250,244,245,251,252,253,254],[290,291,292,293,294,295,296,297,298,299,300,301]],i.s2_page=["门派技能","宠物技能","装备特效","装备特技","辅助技能"],i.s2_sort1=["剑侠居","茅蓬坞","庐医崖","武安阁","溶洞","鬼谷","封神台","仙人洞","神女峰"],i.s2_skills1=[[7,8,9,10,11,13],[21,22,23,24,25,26],[34,35,36,37,38,39],[47,48,49,50,51,52],[60,61,62,63,64,65],[73,74,75,76,77,78],[86,87,88,89,90,91],[99,100,101,102,103,104],[112,113,114,115,116,117]],i.s2_sort2=["主动技能","被动技能"],i.s2_skills2=[[192,193,194,195,196,284,206,283],[134,137,140,143,146,149,152,155,158,161,164,167,170,173,176,179,182,185,188,191,205,209,212,215,218,221,224,276,279,282]],i.s2_2ext=[[["烈火","以法术攻击一人","嚣张任务、交易、商店购买宠物技能包"],["水剑","以法术攻击二人","嚣张任务、交易、商店购买宠物技能包"],["风刃","以法术攻击三人","嚣张任务、交易、商店购买宠物技能包"],["流沙","以法术攻击单人,同时有20%几率将其困住一回合","嚣张任务、交易、商店购买宠物技能包"],["招魂","对处于龟息状态的怪物使用,可使其离开战场,如果目标未死亡,吸取其部分气血和魔法","嚣张任务、交易、商店购买宠物技能包"],["奋力一击","物理攻击技能,对目标造成110%物理伤害,忽视目标防御状态","蛮将特有技能,福缘积分兑换"],["生死决","物理攻击技能,70%几率造成双倍伤害,30%几率恢复其气血。消耗等级*2+30魔法","仙女特有技能,福缘积分兑换"],["巫毒","以法术攻击单人,并有几率降低目标物理和法术抗性持续三回合","萨满特有技能,福缘积分兑换"]],[["死守","低级宠物技能书：降低5%所受法术和物理伤害，同时降低5%自身法术和物理伤害#e中级宠物技能书：降低10%所受法术和物理伤害，同时降低10%自身法术和物理伤害#e高级宠物技能书：降低20%所受法术和物理伤害，同时降低20%自身法术和物理伤害，","嚣张活动、交易、商店购买宠物技能书"],["致命","低级宠物技能书：物理攻击时增加5%几率出现伤害结果加倍#e中级宠物技能书：物理攻击时增加10%几率出现伤害结果加倍#e高级宠物技能书：物理攻击时增加20%几率出现伤害结果加倍","嚣张活动、交易、商店购买宠物技能书"],["追击","低级宠物技能书：45%几率连续两次物理攻击，物理伤害降低25%#e中级宠物技能书：55%几率连续两次物理攻击，物理伤害降低25%#e高级宠物技能书：60%几率连续两次物理攻击，物理伤害降低20%","嚣张活动、交易、商店购买宠物技能书"],["急袭","低级宠物技能书：物理攻击效果提高5%#e中级宠物技能书：物理攻击效果提高10%#e高级宠物技能书：物理攻击效果提高20%","嚣张活动、交易、商店购买宠物技能书"],["嗜杀","低级宠物技能书：物理攻击伤害会在85%-115%之间波动#e中级宠物技能书：物理攻击伤害会在85%-120%之间波动#e高级宠物技能书：物理攻击伤害会在90%-120%之间波动","嚣张活动、交易、商店购买宠物技能书"],["吸血","低级宠物技能书：可以将物理攻击效果的10%转化为自身气血#e中级宠物技能书：可以将物理攻击效果的20%转化为自身气血#e高级宠物技能书：可以将物理攻击效果的30%转化为自身气血","嚣张活动、交易、商店购买宠物技能书"],["聚灵","低级宠物技能书：法术攻击时增加5%几率出现伤害结果1.5倍#e中级宠物技能书：法术攻击时增加10%几率出现伤害结果1.5倍#e高级宠物技能书：法术攻击时增加20%几率出现伤害结果1.5倍","嚣张活动、交易、商店购买宠物技能书"],["逆灵","低级宠物技能书：5%几率连续两次法术攻击#e中级宠物技能书：10%几率连续两次法术攻击#e高级宠物技能书：20%几率连续两次法术攻击","嚣张活动、交易、商店购买宠物技能书"],["灵体","低级宠物技能书：法术攻击效果提高5%#e中级宠物技能书：法术攻击效果提高10%#e高级宠物技能书：法术攻击效果提高20%","嚣张活动、交易、商店购买宠物技能书"],["魔魂","低级宠物技能书：法术攻击伤害会在85%-115%之间波动#e中级宠物技能书：法术攻击伤害会在85%-120%之间波动#e高级宠物技能书：法术攻击伤害会在90%-120%之间波动","嚣张活动、交易、商店购买宠物技能书"],["吞灵","低级宠物技能书：受到法术攻击时，有10%几率将所受法术伤害转化为气血#e中级宠物技能书：受到法术攻击时，有20%几率将所受法术伤害转化为气血#e高级宠物技能书：受到法术攻击时，有30%几率将所受法术伤害转化为气血","嚣张活动、交易、商店购买宠物技能书"],["隐身","低级宠物技能书：进入战斗时能隐身2-3回合，拥有此技能物理和法术伤害降低25%#e中级宠物技能书：进入战斗时能隐身3-4回合，拥有此技能物理和法术伤害降低20%#e高级宠物技能书：进入战斗时能隐身4-5回合，拥有此技能物理和法术伤害降低15%","嚣张活动、交易、商店购买宠物技能书"],["火眼","低级宠物技能书：能识破敌人的隐身#e中级宠物技能书：能识破敌人的隐身，同时增加10%的物理命中率#e高级宠物技能书：能识破敌人的隐身，同时增加20%的物理命中率","嚣张活动、交易、商店购买宠物技能书"],["反击","低级宠物技能书：受到物理攻击时有10%几率反击，反击伤害为正常伤害的50%#e中级宠物技能书：受到物理攻击时有20%几率反击，反击伤害为正常伤害的75%#e高级宠物技能书：受到物理攻击时有30%几率反击，反击伤害为正常伤害的100%","嚣张活动、交易、商店购买宠物技能书"],["反噬","低级宠物技能书：受到物理攻击时有20%几率反噬，反噬伤害为所受伤害的20%#e中级宠物技能书：受到物理攻击时有30%几率反噬，反噬伤害为所受伤害的30%#e高级宠物技能书：受到物理攻击时有40%几率反噬，反噬伤害为所受伤害的40%","嚣张活动、交易、商店购买宠物技能书"],["龟息","低级宠物技能书：战斗死亡时不会离开战场#e中级宠物技能书：战斗死亡时不会离开战场，10回合后复活#e高级宠物技能书：战斗死亡时不会离开战场，5回合后复活","嚣张活动、交易、商店购买宠物技能书"],["神恩","低级宠物技能书：战斗死亡时有10%几率复活，恢复50%气血#e中级宠物技能书：战斗死亡时有20%几率复活，恢复75%气血#e高级宠物技能书：战斗死亡时有30%几率复活，恢复100%气血","嚣张活动、交易、商店购买宠物技能书"],["凝神","低级宠物技能书：抵御封印类技能，降低30%自身物理和法术伤害#e中级宠物技能书：抵御封印类技能，降低20%自身物理和法术伤害#e高级宠物技能书：抵御封印类技能，降低10%自身物理和法术伤害","嚣张活动、交易、商店购买宠物技能书"],["幸运","低级宠物技能书：不会受到聚灵攻击，法术攻击能力降低5%#e中级宠物技能书：不会受到聚灵和逆灵攻击，法术攻击能力降低10%#e高级宠物技能书：不会受到聚灵和逆灵攻击，20%几率躲避法术攻击，法术攻击能力降低20%","嚣张活动、交易、商店购买宠物技能书"],["专注","低级宠物技能书：不会受到致命攻击，物理攻击能力降低5%#e中级宠物技能书：不会受到致命和追击攻击，物理攻击能力降低10%#e高级宠物技能书：不会受到致命和追击攻击，20%几率躲避物理攻击，物理攻击能力降低20%","嚣张活动、交易、商店购买宠物技能书"],["迟钝","低级宠物技能书：速度降低5%#e中级宠物技能书：速度降低10%#e高级宠物技能书：速度降低20%","嚣张活动、交易、商店购买宠物技能书"],["敏捷","低级宠物技能书：速度提升5%#e中级宠物技能书：速度提升10%#e高级宠物技能书：速度提升20%","嚣张活动、交易、商店购买宠物技能书"],["防御","低级宠物技能书：防御力增加等级*0.6，法术伤害降低20%#e中级宠物技能书：防御力增加等级*1.2，法术伤害降低15%#e高级宠物技能书：防御力增加等级*1.8，法术伤害降低10%","嚣张活动、交易、商店购买宠物技能书"],["巨力","低级宠物技能书：攻击力增加等级*0.5，如果对方有防御技能，伤害减少20%#e中级宠物技能书：攻击力增加等级*1，如果对方有防御技能，伤害减少20%#e高级宠物技能书：攻击力增加等级*1.5，如果对方有防御技能，伤害减少20%","嚣张活动、交易、商店购买宠物技能书"],["撕裂","低级宠物技能书：物理攻击时，有5%几率使对方流血不止#e中级宠物技能书：物理攻击时，有10%几率使对方流血不止#e高级宠物技能书：物理攻击时，有20%几率使对方流血不止","嚣张活动、交易、商店购买宠物技能书"],["冥思","低级宠物技能书：每回合结束时，自动恢复等级/4魔法#e中级宠物技能书：每回合结束时，自动恢复等级/3魔法#e高级宠物技能书：每回合结束时，自动恢复等级/1.5魔法","嚣张活动、交易、商店购买宠物技能书"],["自愈","低级宠物技能书：每回合结束时，自动恢复等级/2气血#e中级宠物技能书：每回合结束时，自动恢复等级/1.5气血#e高级宠物技能书：每回合结束时，自动恢复等级/1气血","嚣张活动、交易、商店购买宠物技能书"],["招架","低级宠物技能书：有30%的几率招架物理攻击，降低30%所受物理伤害#e中级宠物技能书：有40%的几率招架物理攻击，降低40%所受物理伤害#e高级宠物技能书：有50%的几率招架物理攻击，降低50%所受物理伤害","嚣张活动、交易、商店购买宠物技能书"],["噬魂","低级宠物技能书：对带有龟息术技能怪物的物理、法术伤害效果提高125%#e中级宠物技能书：对带有龟息术技能怪物的物理、法术伤害效果提高150%#e高级宠物技能书：对带有龟息术技能怪物的物理、法术伤害效果提高200%","噬魂豹特有技能、福缘积分兑换"],["血魄","低级宠物技能书：气血增加等级*1.2，物理伤害降低20%#e中级宠物技能书：气血增加等级*1.2，物理伤害降低15%#e高级宠物技能书：气血增加等级*3.6，物理伤害降低10%","嚣张活动、交易、商店购买宠物技能书"]]],i.s2_skills3=[267,268,269,270,271,272,273],i.s2_3ext=["腰带","武器"," 项链","鞋子","鞋子","衣服","帽子"],i.s2_skills4=[225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266],i.s2_skills5=[122,121,123,119,118,120,124,125],i.s2_details=[["冶金术","学习后可以提高制作武器和项链的能力#e可在【快捷】按钮中使用,使用需消耗体力,且不同等级的锻造术消耗的体力也不同,每使用一次,会增加相应的熟练度,熟练度越高,越容易打造出好的装备。","郢城铁匠-手艺制作技巧、帮派学院-学技能 "],["锻造术","学习后可以提高锻造头盔和腰带的能力#e可在【快捷】按钮中使用,使用需消耗体力,且不同等级的锻造术消耗的体力也不同,每使用一次,会增加相应的熟练度,熟练度越高,越容易打造出好的装备。","郢城铁匠-手艺制作技巧、帮派学院-学技能"],["裁剪术","学习后可以提高制作衣服和靴子的能力#e可在【快捷】按钮中使用,使用需消耗体力,且不同等级的锻造术消耗的体力也不同,每使用一次,会增加相应的熟练度,熟练度越高,越容易打造出好的装备","郢城铁匠-手艺制作技巧、帮派学院-学技能"],["炼丹术","学习后可以提高炼丹的能力#e可在【快捷】按钮中使用,炼丹术等级越高,炼丹成功率也越高,丹药品质也越高","郢城铁匠-手艺制作技巧、帮派学院-学技能"],["强身术","学习后能增加气血上限","郢城陈子枫-辅助技能、帮派学院-学技能"],["烹饪","学习后可以提高制作食物的能力#e可在【快捷】按钮中使用,使用需消耗体力","郢城陈子枫-辅助技能、帮派学院-学技能"],["健体","学习后能增加体力上限","郢城陈子枫-辅助技能、帮派学院-学技能"],["修心","学习后能增加魔法上限","郢城陈子枫-辅助技能、帮派学院-学技能"]],i.s3_type=["物攻宠物","法攻宠物","辅助宠物","神兽"],i.s3_petids=[[1,10,4,7,14,6,18,20,24,22,27],[11,13,5,15,6,19,21,26,27],[3,8,9,12,2,4,5,7,14,15,6,18,19,20,21,24,22,23,25,26],[16,28]],i.s3_details=[[["攻","攻","攻血","攻速","攻防","攻法血","攻血防","攻速","攻速","攻血","攻法"],["法","法","法血","法血","攻法血","法速","法速","法速","法血","攻法"],["防","速","血","血速","血","攻血","法血","攻速","攻防","法血","攻法血","攻血防","法速","攻速","法速","攻速","攻血","法防","血防","法血"],["攻法","攻法"]],[["5力","5力","5力,3耐2血","5力,4力1速","5力,3耐2血","5力,5法,3血2耐","5力,3耐2血,3血2耐","5力,2血2耐1速","5力,2耐2血1速","5力,3血2耐","5力,5法"],["5法","5法","5法,3血2耐","5法,3血2耐","5力,5法,3血2耐","5法,2血2耐1速","5法,2血2耐1速","5法,3血2耐","5力,5法"],["4耐1血","3敏2耐","3血2耐","3耐2血,3速2血","3血2耐","5力,3耐2血","5法,3血2耐","5力,4力1速","5力,3耐2血","5法,3血2耐","5力,5法,3血2耐","5力,3耐2血,3血2耐","5法,2血2耐1速","5力,2血2耐1速","5法,2血2耐1速","5力,2耐2血1速","5力,3血2耐","5法,3耐2血","3血2耐,3耐2血","5法,3血2耐"],["5力,5法","5力,5法"]],[["郊外、西阳山道抓获，交易","大禹水道、平原山陵抓获，交易","云蒙山、烈焰峰抓获，交易","函谷关、长城抓获，交易","长城、阴山抓获，交易","阴山抓获，交易","地下藏宝洞一层、地下藏宝洞二层抓获，交易","古战场抓获，交易","古战场抓获，交易","匈奴营寨、古战场抓获，交易","蜀山抓获，交易"],["平原山陵、巫山抓获，交易","巫山抓获，交易","烈焰峰、函谷关抓获，交易","阴山、地下藏宝洞一层抓获，交易","阴山抓获，交易","地下藏宝洞二层抓获，交易","匈奴营寨抓获，交易","蜀山抓获，交易","蜀山抓获，交易"],["乡水镇郊抓获，交易","西阳山道、渡口抓获，交易","渡口、大禹水道抓获，交易","巫山、太行山抓获，交易","太行山、云蒙山抓获，交易","云蒙山、烈焰峰抓获，交易","烈焰峰、函谷关抓获，交易","函谷关、长城抓获，交易","长城、阴山抓获，交易","阴山、地下藏宝洞一层抓获，交易","阴山抓获，交易","地下藏宝洞一层、地下藏宝洞二层抓获，交易","地下藏宝洞二层抓取，交易","古战场抓获，交易","匈奴营寨抓获，交易","古战场抓获，交易","匈奴营寨、古战场抓获，交易","泰山抓获，交易","泰山、蜀山抓获，交易","蜀山抓获，交易"],["神兽抽奖活动、新区充值活动、福袋兑换","神兽抽奖活动"]]],i.i4_ids=[103,105,104,101,102],i.s4_detail=["基础属性：1级宝石，血量+40#e升级效果：每升一级血量+40，宝石等级没有上限#e镶嵌部位：衣服，腰带#e合成宝石有概率失败，失败后损失一颗宝石#e郢城铁匠处进行宝石合成和镶嵌操作","基础属性：1级宝石，灵力+6#e升级效果：每升一级灵力+6，宝石等级没有上限#e镶嵌部位：项链，鞋子#e合成宝石有概率失败，失败后损失一颗宝石#e郢城铁匠处进行宝石合成和镶嵌操作","基础属性：1级宝石，速度+8#e升级效果：每升一级速度+8，宝石等级没有上限#e镶嵌部位：腰带，靴子#e合成宝石有概率失败，失败后损失一颗宝石#e郢城铁匠处进行宝石合成和镶嵌操作","基础属性：1级宝石，攻击力+8#e升级效果：每升一级攻击力+8，宝石等级没有上限#e镶嵌部位：武器，头盔#e合成宝石有概率失败，失败后损失一颗宝石#e郢城铁匠处进行宝石合成和镶嵌操作","基础属性：1级宝石，防御+12#e升级效果：每升一级防御+12，宝石等级没有上限#e镶嵌部位：衣服，头盔#e合成宝石有概率失败，失败后损失一颗宝石#e郢城铁匠处进行宝石合成和镶嵌操作"],i.pani=t,i.pm3f=t.pm3f,i.iW=950,i.iH=550,i.iX=(n.default.SCRW-i.iW)/2+50,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new o.default(l.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_type=new Array(5),e=0;e<5;e++)i.btn_type[e]=new o.default(l.default.xani_nui5),i.btn_type[e].Move(i.iX-100+1,i.iY+40+90*e,110,90),i.btn_type[e].InitButton(i.sType[e]);return i.iTypePoint=0,i.Init_0(),i.Init_1(),i.Init_2(),i.Init_3(),i.Init_4(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MainHelp,r.default),a(MainHelp,[{key:"Draw",value:function(){var t;for(t=0;t<5;t++)this.btn_type[t].Draw(),this.pm3f.DrawText_2(this.btn_type[t].iX+54,this.btn_type[t].iY+68,this.sType[t],4284523697,22,101,1,1,0,-2,-2,4,4278403121),this.pm3f.DrawText_2(this.btn_type[t].iX+54,this.btn_type[t].iY+68,this.sType[t],4286629073,22,101,1,1,0,-2,-2,4,4278403121);switch(h.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),t=this.iTypePoint,l.default.xani_nui5.DrawAnima_aa(this.btn_type[t].iX,this.btn_type[t].iY,this.sType[t],1),this.pm3f.DrawText_2(this.btn_type[t].iX+54,this.btn_type[t].iY+68,this.sType[t],4294967040,24,101,1,1,0,-2,-2,4,4278403121),this.bScorlling=!1,this.iTypePoint){case 0:u.default.gi().FillRect_2D(this.iX+25,this.iY+25,this.iX+this.iW-25,this.iY+this.iH-25,2155787942),this.DrawPublicFrame(this.iX+25,this.iY+25,this.iW-50,this.iH-50,this.aa_f4,20,20),this.Draw_0();break;case 1:u.default.gi().FillRect_2D(this.iX+25,this.iY+25,this.iX+this.iW-25,this.iY+this.iH-25,2155787942),this.DrawPublicFrame(this.iX+25,this.iY+25,this.iW-50,this.iH-50,this.aa_f4,20,20),this.Draw_1();break;case 2:this.Draw_2();break;case 3:u.default.gi().FillRect_2D(this.iX+25,this.iY+25,this.iX+this.iW-25,this.iY+this.iH-25,2155787942),this.DrawPublicFrame(this.iX+25,this.iY+25,this.iW-50,this.iH-50,this.aa_f4,20,20),this.Draw_3();break;case 4:this.Draw_4()}this.btn_close.Draw()}},{key:"Init_0",value:function(){var t;for(this.btn0_levs=new Array(5),t=0;t<5;t++)this.btn0_levs[t]=new o.default(l.default.xani_nui5),this.btn0_levs[t].Move(this.iX+50,this.iY+50+65*t,146,57),this.btn0_levs[t].InitButton("新大按钮"),this.btn0_levs[t].sName=this.s0_levs[t];this.aa_f1=l.default.xani_frame.InitAnimaWithName("单色内框a20_20",null),this.aa_f2=l.default.xani_frame.InitAnimaWithName("单色内框b20_20",null),this.aa_f3=l.default.xani_nui5.InitAnimaWithName("内框3",null),this.aa_f4=l.default.xani_nui5.InitAnimaWithName("内框4",null),this.i0LevPoint=0}},{key:"Draw_0",value:function(){var t,e,i;for(t=0;t<5;t++)this.i0LevPoint==t&&(this.btn0_levs[t].bMouseDown=!0),this.btn0_levs[t].Draw();for(this.DrawPublicFrame(this.iX+220,this.iY+50,680,450,this.aa_f1,20,20),this.iSRX=this.iX+220+20,this.iSRY=this.iY+50+20,this.iSRW=640,this.iSRH=410,this.pm3f.SetViewClip(this.iSRX,this.iSRY,this.iSRX+this.iSRW,this.iSRY+this.iSRH),this.iSHeight=94*this.s0_detail[this.i0LevPoint].length,this.bScorlling=!0,t=0;t<this.s0_detail[this.i0LevPoint].length;t++)e=this.iX+220+20,(i=this.iY+50+20+94*t-this.iSOffY)+94<this.iY+50||i>this.iY+50+450||(this.DrawPublicFrame(e,i,640,90,this.aa_f2,20,20),l.default.xani_nui5.DrawAnima_aa(e+10,i+5,this.s0_levs[this.i0LevPoint],t),d.default.gi().Format(this.s0_detail[this.i0LevPoint][t],500,20),d.default.gi().Draw(e+110,i+45-d.default.gi().iH/2));this.pm3f.NoClip()}},{key:"Init_1",value:function(){var t;for(this.i1LevPoint=0,this.bChangeLev=!1,this.btn1_clev=new o.default(l.default.xani_nui5),this.btn1_clev.Move(this.iX+170,this.iY+50,109,61),this.btn1_clev.InitButton("新中按钮"),this.btn1_clev.sName=this.s1_levs[0],this.btn1_clev.iNameSize=20,this.btn1_levs=new Array(9),t=0;t<9;t++)this.btn1_levs[t]=new o.default(l.default.xani_nui5),this.btn1_levs[t].Move(this.iX+170+t%3*114,this.iY+50+66*parseInt(t/3),109,61),this.btn1_levs[t].InitButton("新中按钮"),this.btn1_levs[t].sName=this.s1_levs[t],this.btn1_levs[t].iNameSize=20;for(this.btn1_sets=new Array(12),t=0;t<12;t++)this.btn1_sets[t]=new o.default(l.default.xani_nui5),this.btn1_sets[t].InitButton("最大按钮");this.i1SetPoint=0}},{key:"Draw_1",value:function(){var t,e,i,a,n;for(this.iSRX=this.iX+50,this.iSRY=this.iY+130,this.iSRW=236,this.iSRH=380,this.pm3f.SetViewClip(this.iSRX,this.iSRY,this.iSRX+this.iSRW,this.iSRY+this.iSRH),this.iSHeight=92*this.s1_setids[this.i1LevPoint].length,this.bScorlling=!0,t=0;t<this.s1_setids[this.i1LevPoint].length;t++)a=this.iX+50,n=this.iY+130+92*t-this.iSOffY,this.btn1_sets[t].Move(a,n,236,87),n+94<this.iSRY||n>this.iSRY+this.iSRH||(this.i1SetPoint==t&&(this.btn1_sets[t].bMouseDown=!0),this.btn1_sets[t].Draw(),l.default.xani_nui3.DrawAnima(a+4,n+3,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(a+4,n+3,l.default.de_goods.strValue(this.s1_setids[this.i1LevPoint][t],0,10),0),this.pm3f.DrawTextEx(a+100,n+43.5,l.default.de_goods.strValue(this.s1_setids[this.i1LevPoint][t],0,4),4294967295,25,101,1,1,0,0,-2));this.pm3f.NoClip(),this.DrawPublicFrame(this.iX+290,this.iY+45,610,460,this.aa_f1,20,20),a=this.iX+290,n=this.iY+45,l.default.xani_nui3.DrawAnima(a+15,n+15,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(a+15,n+15,l.default.de_goods.strValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],0,10),0),this.pm3f.DrawTextEx(a+110,n+15+40,l.default.de_goods.strValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],0,4),4294967295,30,101,1,1,0,0,-2),l.default.xani_nui5.DrawAnimaEx(a+15,n+15+80+15,"分隔线",0,101,55,1,0,0,0),n+=125;var s="未知";t=l.default.de_goods.intValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],-1,16),e=l.default.de_goods.intValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],-1,19),i=l.default.de_goods.intValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],-1,20),0==t?s="头盔":1==t?s="饰品":2==t?0==e?s="剑":1==e?s="刀":2==e&&(s="枪"):3==t?s=0==i?"女衣":"铠甲":4==t?s="腰带":5==t&&(s="鞋子"),s="类型："+s;if(this.pm3f.DrawTextEx(a+15,n,s,4278190080,25,101,1,1,0,0,0),n+=31,this.pm3f.DrawTextEx(a+15,n,"基础属性范围：",4278190080,25,101,1,1,0,0,0),n+=31,e=l.default.de_goods.intValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],-1,9),this.pm3f.DrawTextEx(a+15,n,"等级："+e,4278190080,25,101,1,1,0,0,0),n+=31,(t=l.default.de_goods.intValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],-1,21))>0&&(this.pm3f.DrawTextEx(a+15,n,"防御：+"+t+"~"+2*t+"（图纸打造+"+11*t/10+"~"+11*t/5+"）",4278190080,25,101,1,1,0,0,0),n+=31),(t=l.default.de_goods.intValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],-1,22))>0&&(this.pm3f.DrawTextEx(a+15,n,"魔法：+"+t+"~"+2*t+"（图纸打造+"+11*t/10+"~"+11*t/5+"）",4278190080,25,101,1,1,0,0,0),n+=31),(t=l.default.de_goods.intValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],-1,23))>0&&(this.pm3f.DrawTextEx(a+15,n,"灵力：+"+t+"~"+2*t+"（图纸打造+"+11*t/10+"~"+11*t/5+"）",4278190080,25,101,1,1,0,0,0),n+=31),(t=l.default.de_goods.intValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],-1,24))>0&&(this.pm3f.DrawTextEx(a+15,n,"气血：+"+t+"~"+2*t+"（图纸打造+"+11*t/10+"~"+11*t/5+"）",4278190080,25,101,1,1,0,0,0),n+=31),(t=l.default.de_goods.intValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],-1,25))>0&&(this.pm3f.DrawTextEx(a+15,n,"速度：+"+t+"~"+2*t+"（图纸打造+"+11*t/10+"~"+11*t/5+"）",4278190080,25,101,1,1,0,0,0),n+=31),(t=l.default.de_goods.intValue(this.s1_setids[this.i1LevPoint][this.i1SetPoint],-1,3))>0&&(this.pm3f.DrawTextEx(a+15,n,"攻击：+"+t+"~"+2*t+"（图纸打造+"+11*t/10+"~"+11*t/5+"）",4278190080,25,101,1,1,0,0,0),n+=31),i=5*e+100,this.pm3f.DrawTextEx(a+15,n,"耐久度："+i+"/"+i,4278190080,25,101,1,1,0,0,0),n=this.iY+this.iH-150,this.pm3f.DrawTextEx(a+15,n-20-15,"【郢城】【铁匠】处强化装备，可提升装备属性",4278190080,25,101,1,1,0,0,0),l.default.xani_nui5.DrawAnimaEx(a+15,n,"分隔线",0,101,55,1,0,0,0),n+=10,this.pm3f.DrawTextEx(a+15,n,"主要获取途径",4294967295,20,101,1,1,0,0,0),n+=30,this.DrawPublicFrame(a+15,n,580,50,this.aa_f2,20,20),0==e?this.pm3f.DrawTextEx(a+15+290,n+25,"装备打造，乡水镇装备店购买，交易",4294967295,20,101,1,1,0,-2,-2):10==e?this.pm3f.DrawTextEx(a+15+290,n+25,"装备打造，西阳城装备店购买，交易",4294967295,20,101,1,1,0,-2,-2):20==e?this.pm3f.DrawTextEx(a+15+290,n+25,"装备打造，郢城装备店购买，交易",4294967295,20,101,1,1,0,-2,-2):30==e?this.pm3f.DrawTextEx(a+15+290,n+25,"装备打造，临淄装备店购买，交易",4294967295,20,101,1,1,0,-2,-2):40==e?this.pm3f.DrawTextEx(a+15+290,n+25,"装备打造，咸阳装备店购买，交易",4294967295,20,101,1,1,0,-2,-2):50==e||60==e?this.pm3f.DrawTextEx(a+15+290,n+25,"装备打造，挖宝，交易",4294967295,20,101,1,1,0,-2,-2):this.pm3f.DrawTextEx(a+15+290,n+25,"装备打造，交易",4294967295,20,101,1,1,0,-2,-2),this.pm3f.DrawTextEx(this.btn1_clev.iX-120,this.btn1_clev.iY+30.5,"选择等级",4294967295,25,101,1,1,0,0,-2),this.DrawPublicFrame(this.btn1_clev.iX-5,this.btn1_clev.iY-5,119,71,this.aa_f3,20,20),this.btn1_clev.sName=this.s1_levs[this.i1LevPoint],this.btn1_clev.Draw(),this.bChangeLev)for(this.DrawPublicFrame(this.btn1_clev.iX-5,this.btn1_clev.iY-5,347,203,this.aa_f3,20,20),t=0;t<9;t++)this.btn1_levs[t].Draw()}},{key:"Init_2",value:function(){var t;for(this.btn2_page=new Array(5),t=0;t<5;t++)this.btn2_page[t]=new o.default(l.default.xani_nui5),this.btn2_page[t].Move(this.iX+230+130*t,this.iY+20,130,44),this.btn2_page[t].InitButton("标签按钮"),this.btn2_page[t].sName=this.s2_page[t],this.btn2_page[t].iNameSize=20;for(this.i2PagePoint=0,this.btn2_cschool=new o.default(l.default.xani_nui5),this.btn2_cschool.Move(this.iX+170,this.iY+80,109,61),this.btn2_cschool.InitButton("新中按钮"),this.btn2_cschool.sName=this.s2_sort1[0],this.btn2_cschool.iNameSize=20,this.i2SchoolPoint=0,this.btn2_schools=new Array(9),t=0;t<9;t++)this.btn2_schools[t]=new o.default(l.default.xani_nui5),this.btn2_schools[t].Move(this.iX+170+t%3*114,this.iY+80+66*parseInt(t/3),109,61),this.btn2_schools[t].InitButton("新中按钮"),this.btn2_schools[t].sName=this.s2_sort1[t],this.btn2_schools[t].iNameSize=20;for(this.bChangeSchool=!1,this.btn2_czb=new o.default(l.default.xani_nui5),this.btn2_czb.Move(this.iX+170,this.iY+80,109,61),this.btn2_czb.InitButton("新中按钮"),this.btn2_czb.sName=this.s2_sort1[0],this.btn2_czb.iNameSize=20,this.i2ZbPoint=0,this.btn2_zbs=new Array(9),t=0;t<2;t++)this.btn2_zbs[t]=new o.default(l.default.xani_nui5),this.btn2_zbs[t].Move(this.iX+170+t%3*114,this.iY+80+66*parseInt(t/3),109,61),this.btn2_zbs[t].InitButton("新中按钮"),this.btn2_zbs[t].sName=this.s2_sort2[t],this.btn2_zbs[t].iNameSize=20;for(this.bChangeZb=!1,this.btn2_jnlist=new Array(64),t=0;t<64;t++)this.btn2_jnlist[t]=new o.default(l.default.xani_nui5),this.btn2_jnlist[t].InitButton("最大按钮");this.i2SkillPoint=0}},{key:"Draw_2",value:function(){var t,e,i;for(t=0;t<5;t++)this.btn2_page[t].Draw();switch(e=this.iX+25,i=this.iY+20+35,this.DrawPublicFrame(e,i,this.iW-50,this.iH-20-35-25,this.aa_f4,20,20),t=this.i2PagePoint,this.btn2_page[t].bMouseDown=!0,this.btn2_page[t].Draw(),this.i2PagePoint){case 0:for(this.iSRX=this.iX+50,this.iSRY=this.iY+160,this.iSRW=236,this.iSRH=350,this.pm3f.SetViewClip(this.iSRX,this.iSRY,this.iSRX+this.iSRW,this.iSRY+this.iSRH),this.iSHeight=92*this.s2_skills1[this.i2SchoolPoint].length,this.bScorlling=!0,t=0;t<this.s2_skills1[this.i2SchoolPoint].length;t++)e=this.iX+50,i=this.iY+160+92*t-this.iSOffY,this.btn2_jnlist[t].Move(e,i,236,87),i+94<this.iSRY||i>this.iSRY+this.iSRH||(this.i2SkillPoint==t&&(this.btn2_jnlist[t].bMouseDown=!0),this.btn2_jnlist[t].Draw(),l.default.xani_nui2.DrawAnimaEx(e+4+6,i+3+7,"技能框",0,101,.85,.85,0,0,0),l.default.xani_nicon.DrawAnimaEx(e+4+6,i+3+7,l.default.de_skill.strValue(this.s2_skills1[this.i2SchoolPoint][t],0,5),0,101,.85,.85,0,0,0),this.pm3f.DrawTextEx(e+100,i+43.5,l.default.de_skill.strValue(this.s2_skills1[this.i2SchoolPoint][t],0,6),4294967295,25,101,1,1,0,0,-2));if(this.pm3f.NoClip(),t=this.i2SkillPoint,e=this.iX+290,i=this.iY+75,this.DrawPublicFrame(e,i,610,430,this.aa_f1,20,20),l.default.xani_nui2.DrawAnimaEx(e+20,i+20,"技能框",0,101,1,1,0,0,0),l.default.xani_nicon.DrawAnimaEx(e+20,i+20,l.default.de_skill.strValue(this.s2_skills1[this.i2SchoolPoint][t],0,5),0,101,1,1,0,0,0),this.pm3f.DrawTextEx(e+120,i+20+40,l.default.de_skill.strValue(this.s2_skills1[this.i2SchoolPoint][t],0,6),4294967295,30,101,1,1,0,0,-2),l.default.xani_nui5.DrawAnimaEx(e+15,i+20+80+20,"分隔线",0,101,55,1,0,0,0),this.pm3f.DrawTextEx(e+20,i+20+80+20+20,"技能描述：",4278190080,25,101,1,1,0,0,0),d.default.gi().FormatEx("#c000000"+l.default.de_skill.strValue(this.s2_skills1[this.i2SchoolPoint][t],0,3),570,25,0,0,40),d.default.gi().Draw(e+20,i+20+80+20+40),i=this.iY+this.iH-150,l.default.xani_nui5.DrawAnimaEx(e+15,i,"分隔线",0,101,55,1,0,0,0),i+=10,this.pm3f.DrawTextEx(e+15,i,"主要获取途径",4294967295,20,101,1,1,0,0,0),i+=30,this.DrawPublicFrame(e+15,i,580,50,this.aa_f2,20,20),this.pm3f.DrawTextEx(e+15+290,i+25,"使用遁地术回门派学习",4294967295,20,101,1,1,0,-2,-2),this.pm3f.DrawTextEx(this.btn2_cschool.iX-120,this.btn2_cschool.iY+30.5,"选择门派",4294967295,25,101,1,1,0,0,-2),this.DrawPublicFrame(this.btn2_cschool.iX-5,this.btn2_cschool.iY-5,119,71,this.aa_f3,20,20),this.btn2_cschool.sName=this.s2_sort1[this.i2SchoolPoint],this.btn2_cschool.Draw(),this.bChangeSchool)for(this.DrawPublicFrame(this.btn2_cschool.iX-5,this.btn2_cschool.iY-5,347,203,this.aa_f3,20,20),t=0;t<9;t++)this.btn2_schools[t].Draw();break;case 1:for(this.iSRX=this.iX+50,this.iSRY=this.iY+160,this.iSRW=236,this.iSRH=350,this.pm3f.SetViewClip(this.iSRX,this.iSRY,this.iSRX+this.iSRW,this.iSRY+this.iSRH),this.iSHeight=92*this.s2_skills2[this.i2ZbPoint].length,this.bScorlling=!0,t=0;t<this.s2_skills2[this.i2ZbPoint].length;t++)e=this.iX+50,i=this.iY+160+92*t-this.iSOffY,this.btn2_jnlist[t].Move(e,i,236,87),i+94<this.iSRY||i>this.iSRY+this.iSRH||(this.i2SkillPoint==t&&(this.btn2_jnlist[t].bMouseDown=!0),this.btn2_jnlist[t].Draw(),l.default.xani_nui2.DrawAnimaEx(e+4+6,i+3+7,"技能框",0,101,.85,.85,0,0,0),l.default.xani_nicon.DrawAnimaEx(e+4+6,i+3+7,l.default.de_skill.strValue(this.s2_skills2[this.i2ZbPoint][t],0,5),0,101,.85,.85,0,0,0),this.pm3f.DrawTextEx(e+100,i+43.5,this.s2_2ext[this.i2ZbPoint][t][0],4294967295,25,101,1,1,0,0,-2));if(this.pm3f.NoClip(),t=this.i2SkillPoint,e=this.iX+290,i=this.iY+75,this.DrawPublicFrame(e,i,610,430,this.aa_f1,20,20),l.default.xani_nui2.DrawAnimaEx(e+20,i+20,"技能框",0,101,1,1,0,0,0),l.default.xani_nicon.DrawAnimaEx(e+20,i+20,l.default.de_skill.strValue(this.s2_skills2[this.i2ZbPoint][t],0,5),0,101,1,1,0,0,0),this.pm3f.DrawTextEx(e+120,i+20+40,this.s2_2ext[this.i2ZbPoint][t][0],4294967295,30,101,1,1,0,0,-2),l.default.xani_nui5.DrawAnimaEx(e+15,i+20+80+20,"分隔线",0,101,55,1,0,0,0),i+=130,d.default.gi().FormatEx("#c000000"+this.s2_2ext[this.i2ZbPoint][t][1],570,25,0,0,30),d.default.gi().Draw(e+20,i),i=this.iY+this.iH-150,l.default.xani_nui5.DrawAnimaEx(e+15,i,"分隔线",0,101,55,1,0,0,0),i+=10,this.pm3f.DrawTextEx(e+15,i,"主要获取途径",4294967295,20,101,1,1,0,0,0),i+=30,this.DrawPublicFrame(e+15,i,580,50,this.aa_f2,20,20),this.pm3f.DrawTextEx(e+15+290,i+25,this.s2_2ext[this.i2ZbPoint][t][2],4294967295,20,101,1,1,0,-2,-2),this.pm3f.DrawTextEx(this.btn2_czb.iX-120,this.btn2_czb.iY+30.5,"选择分类",4294967295,25,101,1,1,0,0,-2),this.DrawPublicFrame(this.btn2_czb.iX-5,this.btn2_czb.iY-5,119,71,this.aa_f3,20,20),this.btn2_czb.sName=this.s2_sort2[this.i2ZbPoint],this.btn2_czb.Draw(),this.bChangeZb)for(this.DrawPublicFrame(this.btn2_czb.iX-5,this.btn2_czb.iY-5,233,71,this.aa_f3,20,20),t=0;t<2;t++)this.btn2_zbs[t].Draw();break;case 2:for(this.iSRX=this.iX+50,this.iSRY=this.iY+80,this.iSRW=236,this.iSRH=430,this.pm3f.SetViewClip(this.iSRX,this.iSRY,this.iSRX+this.iSRW,this.iSRY+this.iSRH),this.iSHeight=92*this.s2_skills3.length,this.bScorlling=!0,t=0;t<this.s2_skills3.length;t++)e=this.iX+50,i=this.iY+80+92*t-this.iSOffY,this.btn2_jnlist[t].Move(e,i,236,87),i+94<this.iSRY||i>this.iSRY+this.iSRH||(this.i2SkillPoint==t&&(this.btn2_jnlist[t].bMouseDown=!0),this.btn2_jnlist[t].Draw(),l.default.xani_nui2.DrawAnimaEx(e+4+6,i+3+7,"技能框",0,101,.85,.85,0,0,0),l.default.xani_nicon.DrawAnimaEx(e+4+6,i+3+7,l.default.de_skill.strValue(this.s2_skills3[t],0,5),0,101,.85,.85,0,0,0),this.pm3f.DrawTextEx(e+100,i+43.5,l.default.de_skill.strValue(this.s2_skills3[t],0,6),4294967295,25,101,1,1,0,0,-2));this.pm3f.NoClip(),t=this.i2SkillPoint,e=this.iX+290,i=this.iY+75,this.DrawPublicFrame(e,i,610,430,this.aa_f1,20,20),l.default.xani_nui2.DrawAnimaEx(e+20,i+20,"技能框",0,101,1,1,0,0,0),l.default.xani_nicon.DrawAnimaEx(e+20,i+20,l.default.de_skill.strValue(this.s2_skills3[t],0,5),0,101,1,1,0,0,0),this.pm3f.DrawTextEx(e+120,i+20+40,l.default.de_skill.strValue(this.s2_skills3[t],0,6),4294967295,30,101,1,1,0,0,-2),l.default.xani_nui5.DrawAnimaEx(e+15,i+20+80+20,"分隔线",0,101,55,1,0,0,0),i+=140,this.pm3f.DrawTextEx(e+20,i,"对应装备："+this.s2_3ext[t],4278190080,25,101,1,1,0,0,0),i+=40,this.pm3f.DrawTextEx(e+20,i,"技能描述：",4278190080,25,101,1,1,0,0,0),i+=20,d.default.gi().FormatEx("#c000000"+l.default.de_skill.strValue(this.s2_skills3[t],0,3),570,25,0,0,40),d.default.gi().Draw(e+20,i),i=this.iY+this.iH-150,l.default.xani_nui5.DrawAnimaEx(e+15,i,"分隔线",0,101,55,1,0,0,0),i+=10,this.pm3f.DrawTextEx(e+15,i,"主要获取途径",4294967295,20,101,1,1,0,0,0),i+=30,this.DrawPublicFrame(e+15,i,580,50,this.aa_f2,20,20),this.pm3f.DrawTextEx(e+15+290,i+25,"装备打造",4294967295,20,101,1,1,0,-2,-2);break;case 3:for(this.iSRX=this.iX+50,this.iSRY=this.iY+80,this.iSRW=236,this.iSRH=430,this.pm3f.SetViewClip(this.iSRX,this.iSRY,this.iSRX+this.iSRW,this.iSRY+this.iSRH),this.iSHeight=92*this.s2_skills4.length,this.bScorlling=!0,t=0;t<this.s2_skills4.length;t++)e=this.iX+50,i=this.iY+80+92*t-this.iSOffY,this.btn2_jnlist[t].Move(e,i,236,87),i+94<this.iSRY||i>this.iSRY+this.iSRH||(this.i2SkillPoint==t&&(this.btn2_jnlist[t].bMouseDown=!0),this.btn2_jnlist[t].Draw(),l.default.xani_nui2.DrawAnimaEx(e+4+6,i+3+7,"技能框",0,101,.85,.85,0,0,0),l.default.xani_nicon.DrawAnimaEx(e+4+6,i+3+7,l.default.de_skill.strValue(this.s2_skills4[t],0,5),0,101,.85,.85,0,0,0),this.pm3f.DrawTextEx(e+100,i+43.5,l.default.de_skill.strValue(this.s2_skills4[t],0,6),4294967295,25,101,1,1,0,0,-2));this.pm3f.NoClip(),t=this.i2SkillPoint,e=this.iX+290,i=this.iY+75,this.DrawPublicFrame(e,i,610,430,this.aa_f1,20,20),l.default.xani_nui2.DrawAnimaEx(e+20,i+20,"技能框",0,101,1,1,0,0,0),l.default.xani_nicon.DrawAnimaEx(e+20,i+20,l.default.de_skill.strValue(this.s2_skills4[t],0,5),0,101,1,1,0,0,0),this.pm3f.DrawTextEx(e+120,i+20+40,l.default.de_skill.strValue(this.s2_skills4[t],0,6),4294967295,30,101,1,1,0,0,-2),l.default.xani_nui5.DrawAnimaEx(e+15,i+20+80+20,"分隔线",0,101,55,1,0,0,0),i+=140,this.pm3f.DrawTextEx(e+20,i,"消耗愤怒："+l.default.de_skill.strValue(this.s2_skills4[t],0,35),4278190080,25,101,1,1,0,0,0),i+=40,this.pm3f.DrawTextEx(e+20,i,"技能描述：",4278190080,25,101,1,1,0,0,0),i+=20,d.default.gi().FormatEx("#c000000"+l.default.de_skill.strValue(this.s2_skills4[t],0,3),570,25,0,0,40),d.default.gi().Draw(e+20,i),i=this.iY+this.iH-150,l.default.xani_nui5.DrawAnimaEx(e+15,i,"分隔线",0,101,55,1,0,0,0),i+=10,this.pm3f.DrawTextEx(e+15,i,"主要获取途径",4294967295,20,101,1,1,0,0,0),i+=30,this.DrawPublicFrame(e+15,i,580,50,this.aa_f2,20,20),this.pm3f.DrawTextEx(e+15+290,i+25,"装备打造",4294967295,20,101,1,1,0,-2,-2);break;case 4:for(this.iSRX=this.iX+50,this.iSRY=this.iY+80,this.iSRW=236,this.iSRH=430,this.pm3f.SetViewClip(this.iSRX,this.iSRY,this.iSRX+this.iSRW,this.iSRY+this.iSRH),this.iSHeight=92*this.s2_skills5.length,this.bScorlling=!0,t=0;t<this.s2_skills5.length;t++)e=this.iX+50,i=this.iY+80+92*t-this.iSOffY,this.btn2_jnlist[t].Move(e,i,236,87),i+94<this.iSRY||i>this.iSRY+this.iSRH||(this.i2SkillPoint==t&&(this.btn2_jnlist[t].bMouseDown=!0),this.btn2_jnlist[t].Draw(),l.default.xani_nui2.DrawAnimaEx(e+4+6,i+3+7,"技能框",0,101,.85,.85,0,0,0),l.default.xani_nicon.DrawAnimaEx(e+4+6,i+3+7,l.default.de_skill.strValue(this.s2_skills5[t],0,5),0,101,.85,.85,0,0,0),this.pm3f.DrawTextEx(e+100,i+43.5,l.default.de_skill.strValue(this.s2_skills5[t],0,6),4294967295,25,101,1,1,0,0,-2));this.pm3f.NoClip(),t=this.i2SkillPoint,e=this.iX+290,i=this.iY+75,this.DrawPublicFrame(e,i,610,430,this.aa_f1,20,20),l.default.xani_nui2.DrawAnimaEx(e+20,i+20,"技能框",0,101,1,1,0,0,0),l.default.xani_nicon.DrawAnimaEx(e+20,i+20,l.default.de_skill.strValue(this.s2_skills5[t],0,5),0,101,1,1,0,0,0),this.pm3f.DrawTextEx(e+120,i+20+40,l.default.de_skill.strValue(this.s2_skills5[t],0,6),4294967295,30,101,1,1,0,0,-2),l.default.xani_nui5.DrawAnimaEx(e+15,i+20+80+20,"分隔线",0,101,55,1,0,0,0),i+=140,this.pm3f.DrawTextEx(e+20,i,"技能描述：",4278190080,25,101,1,1,0,0,0),i+=20,d.default.gi().FormatEx("#c000000"+this.s2_details[t][1],570,25,0,0,40),d.default.gi().Draw(e+20,i),i=this.iY+this.iH-150,l.default.xani_nui5.DrawAnimaEx(e+15,i,"分隔线",0,101,55,1,0,0,0),i+=10,this.pm3f.DrawTextEx(e+15,i,"主要获取途径",4294967295,20,101,1,1,0,0,0),i+=30,this.DrawPublicFrame(e+15,i,580,50,this.aa_f2,20,20),this.pm3f.DrawTextEx(e+15+290,i+25,this.s2_details[t][2],4294967295,20,101,1,1,0,-2,-2)}}},{key:"Init_3",value:function(){var t;for(this.i3Type=0,this.bChangePT=!1,this.btn3_cpt=new o.default(l.default.xani_nui5),this.btn3_cpt.Move(this.iX+170,this.iY+50,109,61),this.btn3_cpt.InitButton("新中按钮"),this.btn3_cpt.sName=this.s3_type[0],this.btn3_cpt.iNameSize=20,this.btn3_pts=new Array(4),t=0;t<4;t++)this.btn3_pts[t]=new o.default(l.default.xani_nui5),this.btn3_pts[t].Move(this.iX+170+t%2*114,this.iY+50+66*parseInt(t/2),109,61),this.btn3_pts[t].InitButton("新中按钮"),this.btn3_pts[t].sName=this.s3_type[t],this.btn3_pts[t].iNameSize=20;for(this.btn3_pets=new Array(36),t=0;t<36;t++)this.btn3_pets[t]=new o.default(l.default.xani_nui5),this.btn3_pets[t].InitButton("最大按钮");for(this.i3PetPoint=0,this.btn3_skills=new Array(5),t=0;t<5;t++)this.btn3_skills[t]=new o.default(l.default.xani_nui5),this.btn3_skills[t].bSingleButton=!0;this.i3ShowSkillDetail=-1}},{key:"Draw_3",value:function(){var t,e,i,a,n;for(this.iSRX=this.iX+50,this.iSRY=this.iY+130,this.iSRW=236,this.iSRH=380,this.pm3f.SetViewClip(this.iSRX,this.iSRY,this.iSRX+this.iSRW,this.iSRY+this.iSRH),this.iSHeight=92*this.s3_petids[this.i3Type].length,this.bScorlling=!0,t=0;t<this.s3_petids[this.i3Type].length;t++)a=this.iX+50,n=this.iY+130+92*t-this.iSOffY,this.btn3_pets[t].Move(a,n,236,87),n+94<this.iSRY||n>this.iSRY+this.iSRH||(this.i3PetPoint==t&&(this.btn3_pets[t].bMouseDown=!0),this.btn3_pets[t].Draw(),l.default.xani_nui2.DrawAnima(a+7,n+5,"宠物头像框",0),l.default.xani_head.DrawAnima_aa(a+7,n+5,l.default.de_pet.strValue(this.s3_petids[this.i3Type][t],0,1),0),this.pm3f.DrawTextEx(a+100,n+43.5,l.default.de_pet.strValue(this.s3_petids[this.i3Type][t],0,1),4294967295,25,101,1,1,0,0,-2));this.pm3f.NoClip(),this.DrawPublicFrame(this.iX+290,this.iY+45,610,460,this.aa_f1,20,20),a=this.iX+290,n=this.iY+45,this.DrawPublicFrame(a+15,n+15,130,180,this.aa_f2,20,20),this.pm3f.DrawTextEx(a+15+65,n+15+20,l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,1),4278190080,20,101,1,1,0,-2,-2),l.default.xani_nui2.DrawAnima(a+15+65-40,n+15+40,"宠物头像框",0),l.default.xani_head.DrawAnima_aa(a+15+65-40,n+15+40,l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,1),0),this.pm3f.DrawTextEx(a+15+65,n+15+20+80+35,"培养方向:"+this.s3_details[0][this.i3Type][this.i3PetPoint],4278190080,20,101,1,1,0,-2,-2),this.pm3f.DrawTextEx(a+15+65,n+15+20+80+35+25,"携带等级:"+l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,2),4278190080,20,101,1,1,0,-2,-2),a+=145,this.pm3f.DrawTextEx(a+120,n+5,"普通资质",4278190080,25,101,1,1,0,-2,0),h.default.ui3_Text1_4word(a+10,n+30,110,110,"体质资质",l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,3)+"~"+l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,24)),h.default.ui3_Text1_4word(a+10,n+30+38,110,110,"法力资质",l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,9)+"~"+l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,25)),h.default.ui3_Text1_4word(a+10,n+30+76,110,110,"力量资质",l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,10)+"~"+l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,22)),h.default.ui3_Text1_4word(a+10,n+30+114,110,110,"耐力资质",l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,11)+"~"+l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,23)),h.default.ui3_Text1_4word(a+10,n+30+152,110,110,"敏捷资质",l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,12)+"~"+l.default.de_pet.strValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,36)),h.default.ui3_Text1_4word(a+10,n+30+190,110,110,"成长",m.default.swapcz(l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,13))+"~"+m.default.swapcz(l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,21))),a+=225,this.pm3f.DrawTextEx(a+110,n+5,"变异资质",4278190080,25,101,1,1,0,-2,0),t=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,3),e=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,24),h.default.ui3_Text1_4word(a+10,n+30,110,110,"体质资质",t+(e-t)/2+"~"+(e+300)),t=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,9),e=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,25),h.default.ui3_Text1_4word(a+10,n+30+38,110,110,"法力资质",t+(e-t)/2+"~"+(e+200)),t=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,10),e=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,22),h.default.ui3_Text1_4word(a+10,n+30+76,110,110,"力量资质",t+(e-t)/2+"~"+(e+100)),t=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,11),e=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,23),h.default.ui3_Text1_4word(a+10,n+30+114,110,110,"耐力资质",t+(e-t)/2+"~"+(e+100)),t=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,12),e=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,36),h.default.ui3_Text1_4word(a+10,n+30+152,110,110,"敏捷资质",t+(e-t)/2+"~"+(e+100)),h.default.ui3_Text1_4word(a+10,n+30+190,110,110,"成长",m.default.swapcz(l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,13))+"~"+m.default.swapcz(l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,21))),a=this.iX+290,n+=238,this.pm3f.DrawTextEx(a+15,n-5,"可能携带技能：",4278190080,20,101,1,1,0,0,0),this.DrawPublicFrame(a+15,n+25,580,100,this.aa_f2,20,20),i=0;var s=-1,r=-1,o=-1;for(t=0;t<5;t++)(e=l.default.de_pet.intValue(this.s3_petids[this.i3Type][this.i3PetPoint],0,14+t))<=0||(l.default.xani_nui2.DrawAnimaEx(a+20+95*i+5,n+35,"技能框",0,101,1,1,0,0,0),l.default.xani_nicon.DrawAnimaEx(a+20+95*i+5,n+35,l.default.de_skill.strValue(e,0,5),0,101,1,1,0,0,0),this.btn3_skills[t].Move(a+20+95*i+5,n+35,90,90),this.btn3_skills[t].bMouseDown&&(o=e,s=a+20+95*i+5,r=n+35),i++);if(this.i3SkillCount=i,n+=107,this.pm3f.DrawTextEx(a+15,n+35,"加点推荐：",4278190080,20,101,1,1,0,0,0),this.DrawPublicFrame(a+15+130,n+30,450,30,this.aa_f2,20,20),this.pm3f.DrawTextEx(a+15+130+225,n+30+15,this.s3_details[1][this.i3Type][this.i3PetPoint],4294967295,20,101,1,1,0,-2,-2),n+=42,this.pm3f.DrawTextEx(a+15,n+35,"宠物获取途径：",4278190080,20,101,1,1,0,0,0),this.DrawPublicFrame(a+15+130,n+30,450,30,this.aa_f2,20,20),this.pm3f.DrawTextEx(a+15+130+225,n+30+15,this.s3_details[2][this.i3Type][this.i3PetPoint],4294967295,20,101,1,1,0,-2,-2),this.pm3f.DrawTextEx(this.btn3_cpt.iX-120,this.btn3_cpt.iY+30.5,"选择类型",4294967295,25,101,1,1,0,0,-2),this.DrawPublicFrame(this.btn3_cpt.iX-5,this.btn3_cpt.iY-5,119,71,this.aa_f3,20,20),this.btn3_cpt.sName=this.s3_type[this.i3Type],this.btn3_cpt.Draw(),this.bChangePT)for(this.DrawPublicFrame(this.btn3_cpt.iX-5,this.btn3_cpt.iY-5,233,137,this.aa_f3,20,20),t=0;t<4;t++)this.btn3_pts[t].Draw();o>=0&&c.default.Skill_Detail(o,s,r,-1)}},{key:"Init_4",value:function(){var t;for(this.btn4_stone=new Array(5),t=0;t<5;t++)this.btn4_stone[t]=new o.default(l.default.xani_nui5),this.btn4_stone[t].InitButton("最大按钮");this.i4StonePoint=0}},{key:"Draw_4",value:function(){var t,e,i;for(this.iSRX=this.iX+50,this.iSRY=this.iY+50,this.iSRW=236,this.iSRH=460,this.pm3f.SetViewClip(this.iSRX,this.iSRY,this.iSRX+this.iSRW,this.iSRY+this.iSRH),this.iSHeight=92*this.i4_ids.length,this.bScorlling=!0,t=0;t<this.i4_ids.length;t++)e=this.iX+50,i=this.iY+50+92*t-this.iSOffY,this.btn4_stone[t].Move(e,i,236,87),i+94<this.iSRY||i>this.iSRY+this.iSRH||(this.i4StonePoint==t&&(this.btn4_stone[t].bMouseDown=!0),this.btn4_stone[t].Draw(),l.default.xani_nui3.DrawAnima(e+4,i+3,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(e+4,i+3,l.default.de_goods.strValue(this.i4_ids[t],0,10),0),this.pm3f.DrawTextEx(e+100,i+43.5,l.default.de_goods.strValue(this.i4_ids[t],0,4),4294967295,25,101,1,1,0,0,-2));this.pm3f.NoClip(),this.DrawPublicFrame(this.iX+290,this.iY+45,610,460,this.aa_f1,20,20);var a=this.i4_ids[this.i4StonePoint];e=this.iX+290,i=this.iY+45,l.default.xani_nui3.DrawAnima(e+15,i+15,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(e+15,i+15,l.default.de_goods.strValue(a,0,10),0),this.pm3f.DrawTextEx(e+110,i+15+40,l.default.de_goods.strValue(a,0,4),4294967295,30,101,1,1,0,0,-2),l.default.xani_nui5.DrawAnimaEx(e+15,i+15+80+15,"分隔线",0,101,55,1,0,0,0),i+=125,d.default.gi().FormatEx("#c000000"+this.s4_detail[this.i4StonePoint],570,25,0,0,40),d.default.gi().Draw(e+20,i),i=this.iY+this.iH-150,l.default.xani_nui5.DrawAnimaEx(e+15,i,"分隔线",0,101,55,1,0,0,0),i+=10,this.pm3f.DrawTextEx(e+15,i,"主要获取途径",4294967295,20,101,1,1,0,0,0),i+=30,this.DrawPublicFrame(e+15,i,580,50,this.aa_f2,20,20),this.pm3f.DrawTextEx(e+15+290,i+25,"封印叔叔任务，保卫西阳活动，交易",4294967295,20,101,1,1,0,-2,-2)}},{key:"DrawPublicFrame",value:function(t,e,i,a,n,s,r){n!=this.aa_f1?n!=this.aa_f2?n!=this.aa_f3?n!=this.aa_f4?(n.iFrame=0,n.DrawEx(-t,e,101,1,1,0,-2,-2),n.iFrame=1,n.DrawEx(t+i/2-s/2,e,101,1*(i-2*s)/s,1,0,-2,-2),n.iFrame=2,n.DrawEx(t+i-s,e,101,1,1,0,-2,-2),n.iFrame=3,n.DrawEx(t+i-s,e+a/2-r/2,101,1,1*(a-2*r)/r,0,-2,-2),n.iFrame=4,n.DrawEx(-(t+i-s),e+a-r,101,1,1,0,-2,-2),n.iFrame=5,n.DrawEx(t+i/2-s/2,e+a-r,101,1*(i-2*s)/s,1,0,-2,-2),n.iFrame=6,n.DrawEx(t,e+a-r,101,1,1,0,-2,-2),n.iFrame=7,n.DrawEx(-t,e+a/2-r/2,101,1,1*(a-2*r)/r,0,-2,-2),n==this.aa_f1?u.default.gi().FillRect_2D(t,e,t+i,e+a,4285052333):(n.iFrame=8,n.DrawEx(t+s-1,e+r-1,101,1*(i-2*s+2)/s,1*(a-2*r+2)/r,0,-1,-1))):u.default.gi().FillRect_2D(t,e,t+i,e+a,4288401112):u.default.gi().FillRect_2D(t,e,t+i,e+a,4278190080):u.default.gi().FillRect_2D(t,e,t+i,e+a,4281844424):u.default.gi().FillRect_2D(t,e,t+i,e+a,4285052333)}},{key:"ProcTouch",value:function(t,e,i){var a,n;if(this.bScorlling&&this.iSHeight>this.iSRH){if(1==t&&s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH)&&(0==this.iTypePoint&&(this.bLockScorll=!0),this.iLockX=e,this.iLockY=i),2==t&&1==this.iTypePoint&&Math.abs(this.iLockY-i)>10&&s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(this.bLockScorll=!0,a=0;a<this.s1_setids[this.i1LevPoint].length;a++)this.btn1_sets[a].SetNormal();if(2==t&&2==this.iTypePoint&&Math.abs(this.iLockY-i)>10&&s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(this.bLockScorll=!0,a=0;a<64;a++)this.btn2_jnlist[a].SetNormal();if(2==t&&3==this.iTypePoint&&Math.abs(this.iLockY-i)>10&&s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(this.bLockScorll=!0,a=0;a<36;a++)this.btn3_pets[a].SetNormal();if(2==t&&4==this.iTypePoint&&Math.abs(this.iLockY-i)>10&&s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(this.bLockScorll=!0,a=0;a<5;a++)this.btn4_stone[a].SetNormal();if(this.bLockScorll)return 2==t&&(n=this.iSHeight-this.iSRH,this.iSOffY-=i-this.iLockY,this.iLockX=e,this.iLockY=i,this.iSOffY<0&&(this.iSOffY=0),this.iSOffY>n&&(this.iSOffY=n)),3==t&&(this.bLockScorll=!1),!0}switch(this.iTypePoint){case 0:for(a=0;a<5;a++)this.btn0_levs[a].ProcTouch(t,e,i)&&this.btn0_levs[a].bCheck()&&(this.i0LevPoint=a,this.iSOffY=0);break;case 1:if(this.bChangeLev){for(a=0;a<9;a++)this.btn1_levs[a].ProcTouch(t,e,i)&&this.btn1_levs[a].bCheck()&&(this.btn1_levs[a].SetNormal(),this.bChangeLev=!1,this.i1LevPoint=a,this.i1SetPoint=0,this.iSOffY=0);return s.default.bInRect(e,i,this.btn1_clev.iX,this.btn1_clev.iY,342,198)||(this.bChangeLev=!1),!0}if(s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(a=0;a<this.s1_setids[this.i1LevPoint].length;a++)this.btn1_sets[a].ProcTouch(t,e,i)&&this.btn1_sets[a].bCheck()&&(this.i1SetPoint=a);if(this.btn1_clev.ProcTouch(t,e,i))return this.btn1_clev.bCheck()&&(this.btn1_clev.SetNormal(),this.bChangeLev=!0),!0;break;case 2:for(a=0;a<5;a++)this.btn2_page[a].ProcTouch(t,e,i)&&this.btn2_page[a].bCheck()&&(this.i2PagePoint=a,this.i2SkillPoint=0,this.iSOffY=0);switch(this.i2PagePoint){case 0:if(this.bChangeSchool){for(a=0;a<9;a++)this.btn2_schools[a].ProcTouch(t,e,i)&&this.btn2_schools[a].bCheck()&&(this.btn2_schools[a].SetNormal(),this.bChangeSchool=!1,this.i2SchoolPoint=a,this.i2SkillPoint=0,this.iSOffY=0);return s.default.bInRect(e,i,this.btn2_cschool.iX,this.btn2_cschool.iY,342,198)||(this.bChangeSchool=!1),!0}if(s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(a=0;a<this.s2_skills1[this.i2SchoolPoint].length;a++)this.btn2_jnlist[a].ProcTouch(t,e,i)&&this.btn2_jnlist[a].bCheck()&&(this.i2SkillPoint=a);this.btn2_cschool.ProcTouch(t,e,i)&&this.btn2_cschool.bCheck()&&(this.btn2_cschool.SetNormal(),this.bChangeSchool=!0);break;case 1:if(this.bChangeZb){for(a=0;a<2;a++)this.btn2_zbs[a].ProcTouch(t,e,i)&&this.btn2_zbs[a].bCheck()&&(this.btn2_zbs[a].SetNormal(),this.bChangeZb=!1,this.i2ZbPoint=a,this.i2SkillPoint=0,this.iSOffY=0);return s.default.bInRect(e,i,this.btn2_czb.iX,this.btn2_czb.iY,228,66)||(this.bChangeZb=!1),!0}if(s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(a=0;a<this.s2_skills2[this.i2ZbPoint].length;a++)this.btn2_jnlist[a].ProcTouch(t,e,i)&&this.btn2_jnlist[a].bCheck()&&(this.i2SkillPoint=a);this.btn2_czb.ProcTouch(t,e,i)&&this.btn2_czb.bCheck()&&(this.btn2_czb.SetNormal(),this.bChangeZb=!0);break;case 2:if(s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(a=0;a<this.s2_skills3.length;a++)this.btn2_jnlist[a].ProcTouch(t,e,i)&&this.btn2_jnlist[a].bCheck()&&(this.i2SkillPoint=a);break;case 3:if(s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(a=0;a<this.s2_skills4.length;a++)this.btn2_jnlist[a].ProcTouch(t,e,i)&&this.btn2_jnlist[a].bCheck()&&(this.i2SkillPoint=a);break;case 4:if(s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(a=0;a<this.s2_skills5.length;a++)this.btn2_jnlist[a].ProcTouch(t,e,i)&&this.btn2_jnlist[a].bCheck()&&(this.i2SkillPoint=a)}break;case 3:if(this.i3ShowSkillDetail=-1,this.bChangePT){for(a=0;a<4;a++)this.btn3_pts[a].ProcTouch(t,e,i)&&this.btn3_pts[a].bCheck()&&(this.btn3_pts[a].SetNormal(),this.bChangePT=!1,this.i3Type=a,this.i3PetPoint=0,this.iSOffY=0);return s.default.bInRect(e,i,this.btn3_cpt.iX,this.btn3_cpt.iY,228,132)||(this.bChangePT=!1),!0}if(s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(a=0;a<this.s3_petids[this.i3Type].length;a++)this.btn3_pets[a].ProcTouch(t,e,i)&&this.btn3_pets[a].bCheck()&&(this.i3PetPoint=a);for(a=0;a<this.i3SkillCount;a++)this.btn3_skills[a].ProcTouch(t,e,i)&&this.btn3_skills[a].bCheck()&&(this.i3ShowSkillDetail=a);if(this.btn3_cpt.ProcTouch(t,e,i))return this.btn3_cpt.bCheck()&&(this.btn3_cpt.SetNormal(),this.bChangePT=!0),!0;break;case 4:if(s.default.bInRect(e,i,this.iSRX,this.iSRY,this.iSRW,this.iSRH))for(a=0;a<this.i4_ids.length;a++)this.btn4_stone[a].ProcTouch(t,e,i)&&this.btn4_stone[a].bCheck()&&(this.i4StonePoint=a)}for(a=0;a<5;a++)if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0;for(a=0;a<5;a++)this.btn_type[a].ProcTouch(t,e,i)&&this.btn_type[a].bMouseDown&&(this.iTypePoint=a,this.iSOffY=0);return!1}}]),MainHelp}();i.default=g,g.Open=function(){f.default.gi().PushStat(f.default.GS_MAINHELP)}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../engtst/mgm/gameing/me/pet/MyPets":245}],189:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButton"))),o=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),u=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function MySelect(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MySelect);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MySelect.__proto__||Object.getPrototypeOf(MySelect)).call(this));e.xm3f=o.default.xm3f,e.iW=700,e.iH=320,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.sAnswer=new Array(6),e.iCs=new Int32Array(6),e.btn_ans=new Array(6);for(var i=0;i<6;i++)e.btn_ans[i]=new r.default(u.default.xani_button),e.btn_ans[i].InitButton("普通按钮200_55"),e.btn_ans[i].Move(e.iX+e.iW-30-200,e.iY+30+65*i,200,55);return e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MySelect,s.default),a(MySelect,[{key:"InitDialog",value:function(t){var e;for(this.iMType=t.GetNextByte(),this.iSType=t.GetNextByte(),this.sQuestion=t.GetNextString(),this.iCount=t.GetNextByte(),e=0;e<this.iCount;e++)this.sAnswer[e]=t.GetNextString(),this.iCs[e]=t.GetNextInt(),this.btn_ans[e].sName=this.sAnswer[e]}},{key:"Draw",value:function(){var t;for(h.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),h.default.frame_type4("单色内框a20_20",this.iX+30,this.iY+30,430,this.iH-60,20,20),d.default.gi().FormatEx(this.sQuestion,400,25,0,0,35),d.default.gi().Draw(this.iX+30+15,this.iY+30+15),t=0;t<this.iCount;t++)this.btn_ans[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){if(MySelect.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))for(var a=0;a<this.iCount;a++)this.btn_ans[a].ProcTouch(t,e,i)&&this.btn_ans[a].bCheck()&&(l.default.gi().s_SeverSelect(this.iMType,this.iSType,this.iCs[a]),f.default.gi().PopStat(1));else 3==t&&f.default.gi().PopStat(1);return!0}}]),MySelect}();i.default=c,c.Open=function(t){var e=f.default.gi().FindStat(f.default.GS_MYSELECT);null==e&&(e=f.default.gi().PushStat(f.default.GS_MYSELECT)),e.InitDialog(t)},c.bInRect=function(t,e,i,a,n,s){return!(t<=i)&&(!(e<=a)&&(!(t>=i+n)&&!(e>=a+s)))}},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButton":14,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81}],190:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../map/DrawBuffer")),_interopRequireDefault(t("../../../../map/MapManager")),_interopRequireDefault(t("../../../../mgm/newmainmenu/StarEffect")),_interopRequireDefault(t("../../../../config/GmConfig"))),s=_interopRequireDefault(t("../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),o=(_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast"))),u=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/FireworksEffect"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode"));_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mission/MyMission"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function SelectNewPet(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SelectNewPet);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SelectNewPet.__proto__||Object.getPrototypeOf(SelectNewPet)).call(this));for(i.iW=530,i.iH=475,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_select=new Array(3),e=0;e<2;e++)i.btn_select[e]=new r.default(l.default.xani_button),i.btn_select[e].InitButton("普通按钮140_55"),i.btn_select[e].sName="选择";return i.aa_np=new Array(2),i.aa_np[0]=l.default.xani_pets[29].InitAnimaWithName("站立_右下",null),i.aa_np[1]=l.default.xani_pets[30].InitAnimaWithName("站立_右下",null),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SelectNewPet,s.default),a(SelectNewPet,[{key:"Draw",value:function(){d.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),o.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+45,"选择宠物",4280766287,30,101,1,1,0,-2,-2),d.default.frame_type4("蓝色a30_30",this.iX+50,this.iY+70,200,260,30,30),u.default.DrawAura(0,this.iX+50+100,this.iY+80+200-50,null,0),this.aa_np[0].Draw(this.iX+50+100,this.iY+80+200-50),this.aa_np[0].NextFrame(),o.default.gi().DrawTextEx(this.iX+50+100,this.iY+80+200,"耳兔",4294967295,25,101,1,1,0,-2,-2),d.default.frame_type4("蓝色a30_30",this.iX+50+200+30,this.iY+70,200,260,30,30),u.default.DrawAura(0,this.iX+50+200+30+100,this.iY+80+200-50,null,0),this.aa_np[1].Draw(this.iX+50+200+30+100,this.iY+80+200-50),this.aa_np[1].NextFrame(),o.default.gi().DrawTextEx(this.iX+50+200+30+100,this.iY+80+200,"猁猁",4294967295,25,101,1,1,0,-2,-2),this.btn_select[0].Move(this.iX+50+100-70,this.iY+70+260+20,140,55),this.btn_select[0].Draw(),this.btn_select[1].Move(this.iX+50+200+30+100-70,this.iY+70+260+20,140,55),this.btn_select[1].Draw(),o.default.gi().DrawTextEx(this.iX+this.iW/2,this.iY+70+260+20+55+35,"除了外形它们没有任何区别",4280766287,20,101,1,1,0,-2,-2)}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<2;a++)if(this.btn_select[a].ProcTouch(t,e,i))return this.btn_select[a].bCheck()&&(f.default.gi().s_SeverEvent(33,a,0,0,0),h.default.gi().PopStat(1)),!0;return!1}}]),SelectNewPet}();i.default=c,c.Open=function(){h.default.gi().PushStat(h.default.GS_SELECTNEWPET)}},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/FireworksEffect":64,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/mission/MyMission":233,"../../../../map/DrawBuffer":283,"../../../../map/MapManager":286,"../../../../mgm/newmainmenu/StarEffect":311}],191:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../mgm/newmainmenu/StarEffect")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),m=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/ang/PromptActivity")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"))),g=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mission/MyMission"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function SelectSchool(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SelectSchool);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SelectSchool.__proto__||Object.getPrototypeOf(SelectSchool)).call(this));for(i.iW=800,i.iH=550,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.btn_school=new Array(3),e=0;e<3;e++)i.btn_school[e]=new o.default(l.default.xani_nui2),i.btn_school[e].InitButton(SelectSchool._ADetail[4][e+3*m.default.me.iRace][0]),i.btn_school[e].sName="";return i.se=new n.default,i.se.Init3(0,0,50,50),i.btn_go=new o.default(l.default.xani_nui2),i.btn_go.InitButton("按钮1_110"),i.btn_go.sName="前往",i.btn_close=new o.default(l.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SelectSchool,r.default),a(SelectSchool,[{key:"Draw",value:function(){var t,e,i,a;for(d.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),e=this.iX+30,i=this.iY+30,a=165,d.default.new_framein(e,i,this.iW-60,a),u.default.gi().DrawTextEx(e+30,i+30+50,"选择门派：",4278206039,40,101,1,1,0,0,-2),t=0;t<3;t++)this.btn_school[t].Move(e+30+130*t+200,i+30,100,100),this.btn_school[t].Draw(),this.iSchoolPoint==t+3*m.default.me.iRace&&this.iSchoolPoint>=0&&(this.se.Logic(),this.se.Draw(this.btn_school[t].iX+50,this.btn_school[t].iY+50));i+=a+20,a=this.iH-a-60-20,d.default.new_framein(e,i,this.iW-60,a),this.iSchoolPoint>=0&&(c.default.gi().FormatEx("#c003e57"+SelectSchool._ADetail[4][this.iSchoolPoint][1],this.iW-60-40,25,0,0,30),c.default.gi().Draw(e+20,i+20),this.btn_go.Move(this.iX+this.iW-30-20-110,this.iY+this.iH-30-20-52,110,52),this.btn_go.Draw()),this.btn_close.Move(this.iX+this.iW-35,this.iY-25,60,60),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<3;a++)if(this.btn_school[a].ProcTouch(t,e,i))return this.btn_school[a].bCheck()&&(this.iSchoolPoint=a+3*m.default.me.iRace),!0;return this.iSchoolPoint>=0&&this.btn_go.ProcTouch(t,e,i)?(this.btn_go.bCheck()&&(f.default.gi().s_ChangeMapNew(2,34+this.iSchoolPoint),g.default.m.bCheckDoing(138)&&f.default.gi().s_FinishMission(0,138,0,0),h.default.gi().PopStat(1)),!0):!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0)}}]),SelectSchool}();i.default=_,_.Open=function(){h.default.gi().PushStat(h.default.GS_SELECTSCHOOL)},_._ADetail=[[["门派任务","人物等级>=10级#e10级加入门派后，找门派师傅领取任务，每天的前两轮（会员三轮）任务获得双倍奖励。"],["为民除害","人物等级>=10级#e在[西阳城守卫]处领取，任务完成后会获得大量的经验奖励。"],["每日赛跑","人物等级>=20级#e在[临淄城]的[田忌]处领取，完成可获得大量经验和金钱奖励，并获得一个三级草药。每天前十名更能额外获得道具奖励。#e任务可自动寻路完成"],["护法任务","人物等级>=20级#e在[咸阳]的[商鞅]处领取任务，完成获得大量的经验和金钱，10次为一轮，完成每轮的第十次任务可获得制作装备的材料。"],["追捕强盗","人物等级>=20级#e可以在[郢城]的[栾千盛]处领取追捕强盗任务，要求至少3人组队才能领取，完成获取经验金钱奖励，10次为一轮，第10次队长必定获得装备制造图纸，其他队员有几率获得道具奖励。"],["擂台切磋","在西阳城中间的擂台，跟其他玩家切磋一下，不管输赢都会获得2点活跃哦。"],["手艺任务","在郢城的铁匠接取任务，完成任务后会获得大量的经验和金钱，以及高熟练的打造手艺！"],["押镖任务","人物等级>=20级#e可前往[临淄城]找[程镖头]领取押镖任务，完成获得大量金钱奖励，并有一定几率获取阵法书，还有可能获得红包（#cff0000里面有200元宝哦#o）。"],["消灭山贼","人物等级>=30级#e每天整点，在随机野外地图刷出10只山贼，至少3人组队才能与山贼战斗，打败山贼获得大量的经验和金钱奖励，并有较大几率获得藏宝图。"],["帮派青龙","人物等级>=20级#e在[郢城]的[帮派总管]处加入帮派，进入帮派领地，在帮派的领地里面去找青龙堂总管，领取任务，完成任务可获得大量的经验、金钱和帮贡"],["帮派玄武","人物等级>=20级#e在帮派的领地里面去找玄武堂总管，领取任务，完成任务可获得大量的经验、金钱和帮贡（帮贡可在学院点帮派修炼）"],["帮派朱雀","人物等级>=20级#e在帮派的领地里面去找朱雀堂总管，领取任务，完成任务可获得大量的经验、金钱和帮贡，在第10次并能获取丹方，是炼丹的必备品。"]],[["门派闯关","每周四20:00点在[咸阳]或[临淄]的[门派活动使者]处领取任务，然后根据任务挑战门派护卫。每闯过一关都有丰厚的奖励，闯关速度最快的队伍更有高等级稀有宝石领取。"],["保卫西阳","每周一20:00点在大禹水道，平原山陵，函谷关，太行山四个地图刷新怪物向西阳城进攻，玩家阻挡怪物，阻止怪物进入西阳城，打败怪物会获得丰厚的奖励，保卫西阳城成功，在西阳城更有稀有宝箱出现。"],["比武大会","每周五中午12点~周六中午12点，玩家可以在[咸阳]的[比武接引人]报名，周六和周日下午13点~15点之间分别进行两场比武，比武获胜方可领取宝箱，即使失败也有其他丰厚奖励"],["帮派之战","每周五，周六，周日的19点~20点在[咸阳]的[帮战接引先锋]处进入帮战场地（帮主需提前报名），获胜帮派的成员将会获得100点帮贡和大量经验，并在帮战场地内刷出大量宝箱"],["封印叔叔","在挖宝时，有一定几率挖出妖怪叔叔，玩家组队去封印妖怪叔叔，会获得稀有的宝石和大量的经验金钱。"],["挑战嚣张","每天系统会在城市中刷新出4种嚣张妖怪（有点嚣张、比较嚣张、很嚣张、太嚣张）每种怪物每天可挑战一次，挑战成功，有几率获取丰厚的奖励（如高级宠物技能包）"],["战队竞技","在[咸阳]的[神威将军]处创建战队后，战队队长可以挑战比自己排名高的战队，挑战胜利可以提升战队排名。排名越靠前，战队每日声望增长越多"],["跑环","玩家在郢城的吉祥处领取跑环任务，完成跑环任务可获得相应等级的装备图纸。"]],[["门派任务","人物等级>=10级#e10级加入门派后，找门派师傅领取任务，每天的前两轮（会员三轮）任务获得双倍奖励。"],["为民除害","人物等级>=10级#e在[西阳城守卫]处领取，任务完成后会获得大量的经验奖励。"],["每日赛跑","人物等级>=10级#e在[临淄城]的[田忌]处领取，完成获得大量经验和金钱奖励，并获得一个三级草药。每天前十名更能额外获得道具奖励。#e任务可自动寻路完成"],["世界抢答","人物等级>=10级#e每隔一段时间，系统会发出一道题目，可在世界频道回答，最先答对的两名玩家各获得一颗宝石，并从前二十名答对的玩家中抽取4名给予66666铜币奖励"],["智者答题","无等级要求#e在各城市，每隔一段时间会随机出现一个智者，第一个答对智者问题的人可获得经验和金钱奖励，并有一定几率获得一颗宝石"],["押镖任务","人物等级>=20级#e可前往[临淄城]找[程镖头]领取押镖任务，完成获得大量金钱奖励，并有一定几率获取阵法书，还有可能获得红包（#cff0000里面有200元宝哦#o）。"],["追捕强盗","人物等级>=20级#e可以在[郢城]的[栾千盛]处领取追捕强盗任务，要求至少3人组队才能领取，完成获取经验金钱奖励，10次为一轮，第10次队长必定获得装备制造图纸，其他队员有几率获得道具奖励。"],["护法任务","人物等级>=20级#e在[咸阳]的[商鞅]处领取任务，完成获得大量的经验和金钱，10次为一轮，完成每轮的第十次任务可获得制作装备的材料。"],["帮派任务","人物等级>=20级#e在[郢城]的[帮派总管]处加入帮派，进入帮派领地，在帮派领地内可领取各种帮派任务，完成获得经验、金钱和帮贡，不同任务还有额外奖励"]],[["消灭山贼","人物等级>=30级#e每天整点，在随机野外地图刷出10只山贼，至少3人组队才能与山贼战斗，打败山贼获得大量的经验和金钱奖励，并有较大几率获得藏宝图。"],["封印叔叔","在挖宝时，有一定几率挖出妖怪叔叔，玩家组队去封印妖怪叔叔，会获得稀有的宝石和大量的经验金钱。"],["挑战嚣张","每天系统会在城市中刷新出4种嚣张妖怪（有点嚣张、比较嚣张、很嚣张、太嚣张）每种怪物每天可挑战一次，挑战成功，有几率获取丰厚的奖励（如高级宠物技能包）"],["门派闯关","每周二20:00点在[咸阳]或[临淄]的[门派活动使者]处领取任务，然后根据任务挑战门派护卫。每闯过一关都有丰厚的奖励，闯关速度最快的队伍更有高等级稀有宝石领取。"],["保卫西阳","每周三20:00点在大禹水道，平原山陵，函谷关，太行山四个地图刷新怪物向西阳城进攻，玩家阻挡怪物，阻止怪物进入西阳城，打败怪物会获得丰厚的奖励，保卫西阳城成功，在西阳城更有稀有宝箱出现。"],["比武大会","每周五中午12点~周六中午12点，玩家可以在[咸阳]的[比武接引人]报名，周六和周日下午13点~15点之间分别进行两场比武，比武获胜方可领取宝箱，即使失败也有其他丰厚奖励"],["帮派之战","每周五，周六，周日的19点~20点在[咸阳]的[帮战接引先锋]处进入帮战场地（帮主需提前报名），获胜帮派的成员将会获得100点帮贡和大量经验，并在帮战场地内刷出大量宝箱"],["战队竞技","在[咸阳]的[神威将军]处创建战队后，战队队长可以挑战比自己排名高的战队，挑战胜利可以提升战队排名。排名越靠前，战队每日声望增长越多"],["战队秘境","战队队长可在[咸阳]的[神威将军]处开启秘境，需要消耗战队声望，战队秘境里掉落大量的稀有道具，以及宠物进阶所必须的封印兽魂"],["副本挑战","人物等级>=40级#e在[咸阳]的[副本官]处创建自己的副本，也可申请加入其他玩家创建的副本。副本会掉落大量的稀有物品道具。"],["跑环","人物等级>=50级#e在[郢城]的[吉祥]处领取跑环任务，完成跑环任务可获得大量经验快速升级，每50环还可获得相应等级的装备图纸和手艺。"],["师徒任务","在[临淄]的[慎到]处拜师或收徒，师徒二人组队在慎到处领取师徒任务，任务会给与大量的经验和金钱奖励。徒弟出师后，师傅可获得宠物修炼积分"]],[["剑侠居","要求种族：人族#e门派特色：物理攻击型，具有超高物理输出、点杀能力。 #e推荐加点：5力、4力1敏、4力1体。#e●剑侠居算是最热门的一个门派，容易上手，输出可观，是练级不可缺少的一员，相对的装备也比较贵，后期的剑侠居，拥有较高的暴击率，在竞技玩法中更是点杀的一大利器。"],["茅棚坞","要求种族：人族#e门派特色：辅助型，具有高速度和强大的封印能力。 #e推荐加点：3敏2体、2敏3体、2敏2体1耐。#e●引以为傲的是速度，同样配置的情况下，先出手的绝对是茅棚，速度决定了竞技玩法的主动权，轮轴术也能很好的利用在卡敏战术中，迷雾让己方的胜率几率更大化，练级时，一个奇谋也能加快脚步。"],["庐医崖","要求种族：人族#e门派特色：辅助型、具有强大的加血和救人技能。#e推荐加点：3体2耐、2体2耐1法、2体2敏1耐。#e●作为七国里唯一的纯奶妈，具有强大的加血技能和救人技能，是各种高端任务、活动，竞技玩法不可缺少的一员。"],["溶洞","要求种族：魔族#e门派特色：法术攻击型，具有最高法系伤害。#e推荐加点：5法、4法1体#e●输出比封神高，但是目标数量比封神少，总伤害算起来反而不如封神了，不过做为七国的两大法系门派，溶洞更注重于多手段控制，相比封神来说没那么单调。"],["鬼谷","要求种族：魔族#e门派特色：辅助型，具有强大的封印和解封技能。#e推荐加点：3敏2体、2敏3体。#e●作为封系，鬼谷最大的特点就是可以为己方解封，还有增加封印几率的增益，在竞技玩法中也是一大强将。"],["武安阁","要求种族：魔族#e门派特色：物理攻击型、具有强大的物理攻击能力。#e推荐加点：5力、4力1敏、4力1体。#e●两大物理伤害的武安阁，点杀能力一点都不比剑侠居低，乱舞后还不用休息，单缺点就是太消耗蓝，续航能力不足。在竞技玩法和练级中，与剑侠居有同等的地位。"],["封神台","要求种族：仙族#e门派特点：法术伤害型、具有强大群秒技能#e推荐加点：5法、4法1体#e●两大法系之一，练级最受欢迎的门派，当然你要有一定的装备，不然小心免费回城。七国里的NPC怪物理攻击较高，所以很多玩家都注重于物理防御，导致在竞技玩法中，法系的输出也相当的可观。"],["仙人洞","要求种族：仙族#e门派特点：辅助攻击型，具有固定伤害和持续恢复，以及各种增益。#e推荐加点：3体2耐、2体2耐1速#e●在前期，玩家伤害普遍不高，血量也低的时候，仙人洞的固定伤害就是一大利器，又肉又能输出，是前期练级最重要的一员。"],["神女峰","要求种族：仙族#e门派特点：辅助攻击型，具有单体高伤、复活、持续蓝恢复、封印#e推荐加点：4力1体、3力2法(攻击型)、3体2耐(辅助型)#e●神女是又能输出又能复活又能封的门派，绝对可以省下奶妈与控制的位置，多加一个输出，大大加快练级速度。"]],[["人物升级",""],["装备打造",""],["修炼提升",""],["宠物进阶",""],["坐骑养成",""]],[["辅助技能",""],["剧情技能",""],["家园种植",""]]]},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/gameing/help/ang/PromptActivity":201,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/mission/MyMission":233,"../../../../mgm/newmainmenu/StarEffect":311}],192:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/XDefine")),s=(_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),r=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe")),o=_interopRequireDefault(t("../../../../map/DrawBuffer")),u=_interopRequireDefault(t("../../../../map/MapManager"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(){function ShowPath(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ShowPath),this.bShow=!1,this.paths=new Array(256);for(var t=0;t<256;t++)this.paths[t]=new Int32Array(3);this.aa_direct=null,this.icmid=-1}return a(ShowPath,[{key:"InitPath",value:function(t,e){if(u.default.gi().mfy.findway(r.default.me.iX,r.default.me.iY,t,e)){var i,a,o,l,f,h,d,c,m=0;for(l=u.default.gi().mfy.iPath[0][0],f=u.default.gi().mfy.iPath[0][1],i=1;i<u.default.gi().mfy.iPathDeep;i++){for(h=u.default.gi().mfy.iPath[i][0],d=u.default.gi().mfy.iPath[i][1],c=n.default.llength(l,f,h,d),a=1==i?0:60;a<c;a+=60)this.paths[m][0]=l+(h-l)*a/c,this.paths[m][1]=f+(d-f)*a/c,m>0&&(o=n.default.GetAngleXY(this.paths[m][0],this.paths[m][1],this.paths[m-1][0],this.paths[m-1][1]),this.paths[m][2]=o<11?12:o<34?11:o<56?10:o<79?9:o<101?8:o<124?7:o<146?6:o<169?5:o<191?4:o<214?3:o<236?2:o<259?1:o<281?0:o<304?15:o<326?14:o<349?13:12),m++;m>0?(l=this.paths[m-1][0],f=this.paths[m-1][1]):(l=h,f=d)}this.iPathSize=m,this.bShow=!0,null==this.aa_direct&&(this.aa_direct=s.default.xani_nui5.InitAnimaWithName("步行指向",null)),this.icmid=u.default.gi().iCurrentMapId}}},{key:"Draw",value:function(){if(this.bShow){if(this.icmid!=u.default.gi().iCurrentMapId)return void(this.bShow=!1);for(var t=1;t<this.iPathSize-1;t++)this.aa_direct.iFrame=this.paths[t][2],o.default.gi().DrawAnima_aa(u.default.gi().iOffy+this.paths[t][1]-50,null,u.default.gi().iOffx+this.paths[t][0],u.default.gi().iOffy+this.paths[t][1],this.aa_direct)}}}]),ShowPath}();i.default=l,l.psp=new l},{"../../../../config/XDefine":7,"../../../../engine/graphics/AnimaAction":25,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../map/DrawBuffer":283,"../../../../map/MapManager":286}],193:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../map/MapManager")),o=(_interopRequireDefault(t("../../../../../mgm/newmainmenu/StarEffect")),_interopRequireDefault(t("../../../../../engine/control/XButton"))),u=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),l=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),d=(_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/Gameing"))),c=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/IngotMall")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/JQMode")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),_=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/MyAttFrame")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods"))),p=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var b=function(){function FirstCharge(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FirstCharge),this.bInited=!1,this.bShow=!1,this.btn_charge=null,this.bShowEffect=!0,this.bShowFrame=!1,this.iW=742,this.iH=486,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2}return a(FirstCharge,[{key:"SetStatByFlag",value:function(){this.bShow=!1,g.default.me.iFlag[59]/1e8==0&&(this.bShow=!0,this.iChargeProc=g.default.me.iFlag[59]%1e8,this.iChargeProc/=10,this.iChargeProc>60&&(this.iChargeProc=60))}},{key:"Draw",value:function(){if(!r.default.gi().vbk.mapdialog.bHideUI()&&!m.default.jq.bJQLock()&&this.bShow&&!(g.default.me.rbs.iLev<20)){var t,e,i=d.default.iTopIconOffX;if(null==this.btn_charge){for(this.btn_charge=new u.default(f.default.xani_nui2),this.btn_charge.InitButton("礼包按钮"),this.btn_charge.sName="充  值",this.btn_open=new u.default(f.default.xani_icon),this.btn_open.InitButton("首充图标"),this.gs=new Array(2),this.btn_gs=new Array(2),t=0;t<2;t++)for(this.gs[t]=new Array(4),this.btn_gs[t]=new Array(4),e=0;e<4;e++)this.gs[t][e]=new _.default,this.btn_gs[t][e]=new o.default(f.default.xani_nui3),this.btn_gs[t][e].bSingleButton=!0;this.gs[0][0].SetAtt(0,116,1,0,0,0,0,0,0,0,1),this.gs[0][1].SetAtt(0,117,1,0,0,0,0,0,0,0,1),this.gs[0][2].SetAtt(0,118,1,0,0,0,0,0,0,0,1),this.gs[0][3].SetAtt(0,236,1,0,0,0,0,0,0,0,1),this.gs[1][0].SetAtt(0,208,1,0,0,0,0,0,0,0,1),this.gs[1][1].SetAtt(0,119,1,0,0,0,0,0,0,0,1),this.gs[1][2].SetAtt(0,240,1,1e5,0,0,0,0,0,0,1),this.aa_effect=f.default.xani_nui6.InitAnimaWithName("转圈效果",null),this.bInited=!0}if(this.btn_open.Move(i,10,72,72),this.btn_open.Draw(),l.default.gi().DrawText_2(this.btn_open.iX+36,this.btn_open.iY+71,"首充礼包",4294833640,22,101,1,1,0,-2,-3,3,4279894016),this.bShowEffect&&f.default.xani_icon.DrawAnima(i+48,2,"红点提示",0),this.bShowFrame){this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2;var a=-1,s=-1;for(f.default.xani_nui6.DrawAnima(this.iX,this.iY,"首充背景框",0),f.default.xani_nui6.DrawAnima(this.iX,this.iY,"首充背景框",1),f.default.xani_nui6.DrawAnima(this.iX,this.iY,"首充背景框",2),f.default.xani_nui2.DrawAnima(this.iX+this.iW-12,this.iY+12,"梅竹",0),f.default.xani_nui2.DrawAnima(this.iX+12,this.iY+this.iH-12,"梅竹",1),f.default.xani_nui6.DrawAnima(this.iX,this.iY,"首充背景框",3),t=0;t<2;t++)for(e=0;e<4;e++)this.btn_gs[t][e].Move(this.iX+361+85*e,this.iY+203+85*t,75,76),1!=t||3!=e?(this.gs[t][e].aa.Draw(this.iX+361+85*e,this.iY+203+85*t),this.btn_gs[t][e].bMouseDown&&(a=t,s=e)):f.default.xani_head.DrawAnimaEx(this.iX+361+85*e+5,this.iY+203+85*t+5,"花魅",0,101,.9,.9,0,0,0);for(l.default.gi().DrawText_2(this.iX+366,this.iY+75,"豪华大礼包，升级助力，极品宝宝",4294967295,20,101,1,1,0,0,0,4,4285739818),l.default.gi().DrawText_2(this.iX+386,this.iY+115,"坠入凡间的花魅，伴您纵情仙侠。",4294967295,20,101,1,1,0,0,0,4,4285739818),l.default.gi().DrawTextEx(this.iX+83-8,this.iY+402-6,""+this.iChargeProc,4278190080,16,101,.8,1,0,-2,-2),l.default.gi().DrawTextEx(this.iX+83,this.iY+402,"/",4278190080,26,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.iX+83+8,this.iY+402+6,"60",4278190080,16,101,.8,1,0,-2,-2),t=0;t<this.iChargeProc/10;t++)f.default.xani_nui6.DrawAnima(this.iX,this.iY,"首充进度条",t);f.default.xani_nui1.DrawAnimaEx(this.iX+210,this.iY+395,"选中角色底",f.default.iDelay,101,.6,.6,0,0,0),f.default.xani_pets[11].DrawAnimaEx(this.iX+210,this.iY+395-10,"变异_站立_右下",f.default.iDelay/3,101,1.3,1.3,0,0,0),this.iChargeProc<60?this.btn_charge.sName="立即充值":this.btn_charge.sName="领  取",this.btn_charge.Move(this.iX+460,this.iY+385,134,44),this.btn_charge.Draw(),a>=0&&this.gs[a][s].iGid>=0&&p.default.new_DrawDetail(this.gs[a][s],this.btn_gs[a][s].iX,this.btn_gs[a][s].iY,0)}d.default.iTopIconOffX+=90}}},{key:"ProcTouch",value:function(t,e,i){if(r.default.gi().vbk.mapdialog.bHideUI()||m.default.jq.bJQLock())return!1;if(!this.bShow)return!1;if(g.default.me.rbs.iLev<20)return!1;if(!this.bInited)return!1;if(this.btn_open.ProcTouch(t,e,i))return this.btn_open.bCheck()&&(this.bShowEffect=!1,this.bShowFrame=!0),!0;if(this.bShowFrame){var a,n;if(this.btn_charge.ProcTouch(t,e,i))return this.btn_charge.bCheck()&&(this.iChargeProc<60?(h.default.gi().s_IngotMall(0,0),c.default.iLastSelect=1):h.default.gi().s_SeverEvent(28,0,0,0,0),this.bShowFrame=!1),!0;for(a=0;a<2;a++)for(n=0;n<4;n++)this.btn_gs[a][n].ProcTouch(t,e,i);if(s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t)return!0;this.bShowFrame=!1}return!1}}]),FirstCharge}();i.default=b,b.fg=new b},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/gameing/Gameing":91,"../../../../../engtst/mgm/gameing/fast/IngotMall":121,"../../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../map/MapManager":286,"../../../../../mgm/newmainmenu/StarEffect":311}],194:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),u=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),d=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/Gameing")),c=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/JQMode")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw")),p=_interopRequireDefault(t("../../../../../map/MapManager"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var b=function(){function FiveGift(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FiveGift),this.sGetDetail=["今日可领","明日可领","两天后领","三天后领","四天后领"],this.bInited=!1,this.bShow=!1,this.btn_open=null,this.bShowEffect=!1,this.bShowFrame=!1,this.iW=905,this.iH=585}return a(FiveGift,[{key:"SetStatByFlag",value:function(){if(this.bShow=!1,(31&m.default.me.iFlag[36])<=0){var t=m.default.me.iFlag[36]>>5;t<31&&(0==(2048&m.default.me.iFlag[24])&&(this.bShowEffect=!0),this.bShow=!0,this.iGetStat=t)}}},{key:"Draw",value:function(){if(!p.default.gi().vbk.mapdialog.bHideUI()&&!c.default.jq.bJQLock()&&this.bShow){var t,e,i,a,s=d.default.iTopIconOffX;if(null==this.btn_open){for(this.btn_open=new o.default(l.default.xani_icon),this.btn_open.InitButton("五日礼包"),this.btn_get=new o.default(l.default.xani_nui6),this.btn_get.InitButton("领取按钮"),this.btn_get.sName="今日可领",this.btn_get.iNameSize=20,this.gs=new Array(5),this.btn_gs=new Array(5),e=0;e<5;e++)for(this.gs[e]=new Array(3),this.btn_gs[e]=new Array(3),i=0;i<3;i++)this.gs[e][i]=new g.default,this.btn_gs[e][i]=new r.default(l.default.xani_nui3),this.btn_gs[e][i].bSingleButton=!0;this.gs[0][0].SetAtt(0,88,1,0,0,0,0,0,0,0,1),this.gs[0][1].SetAtt(0,21,1,13,20051005,0,2e4,0,g.default.GetSetNJ(30),0,1),this.gs[0][2].SetAtt(0,240,1,1e4,0,0,0,0,0,0,1),0==m.default.me.iRace?this.gs[1][0].SetAtt(0,49,1,46,20054005,0,2e4,0,g.default.GetSetNJ(30),0,1):1==m.default.me.iRace?this.gs[1][0].SetAtt(0,55,1,46,20054005,0,2e4,0,g.default.GetSetNJ(30),0,1):this.gs[1][0].SetAtt(0,61,1,46,20054005,0,2e4,0,g.default.GetSetNJ(30),0,1),this.gs[1][1].SetAtt(0,237,1,0,0,0,0,0,0,0,1),this.gs[1][2].SetAtt(0,240,1,5e4,0,0,0,0,0,0,1),this.gs[2][0].SetAtt(0,15,1,60004,30051005,0,2e4,0,g.default.GetSetNJ(30),0,1),this.gs[2][1].SetAtt(0,118,1,0,0,0,0,0,0,0,1),this.gs[2][2].SetAtt(0,240,1,1e5,0,0,0,0,0,0,1),this.gs[3][0].SetAtt(0,208,1,0,0,0,0,0,0,0,1),this.gs[3][1].SetAtt(0,106,1,0,0,0,0,0,0,0,1),this.gs[3][2].SetAtt(0,122,1,0,0,0,0,0,0,0,1),0==m.default.me.iRace?this.gs[4][0].SetAtt(0,50,1,46,20064006,0,3e4,0,g.default.GetSetNJ(40),0,1):1==m.default.me.iRace?this.gs[4][0].SetAtt(0,56,1,46,20064006,0,3e4,0,g.default.GetSetNJ(40),0,1):this.gs[4][0].SetAtt(0,62,1,46,20064006,0,3e4,0,g.default.GetSetNJ(40),0,1),this.gs[4][1].SetAtt(0,312,1,0,0,0,0,0,0,0,1),this.gs[4][2].SetAtt(0,240,1,2e5,0,0,0,0,0,0,1),this.aa_effect=l.default.xani_nui6.InitAnimaWithName("转圈效果",null),this.bInited=!0,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2}if(this.btn_open.Move(s,10,72,72),this.btn_open.Draw(),u.default.gi().DrawText_2(this.btn_open.iX+36,this.btn_open.iY+71,"五日礼包",4294833640,22,101,1,1,0,-2,-3,3,4279894016),this.bShowEffect&&l.default.xani_icon.DrawAnima(s+48,2,"红点提示",0),this.bShowFrame){for(l.default.xani_nui6.DrawAnima(this.iX,this.iY,"五日礼包背景框",0),l.default.xani_nui6.DrawAnima(this.iX,this.iY,"五日礼包背景框",1),l.default.xani_nui6.DrawAnima(this.iX,this.iY,"五日礼包背景框",2),l.default.xani_nui2.DrawAnima(this.iX+this.iW-12,this.iY+12,"梅竹",0),l.default.xani_nui2.DrawAnima(this.iX+12,this.iY+this.iH-12,"梅竹",1),l.default.xani_nui6.DrawAnima(this.iX,this.iY,"五日礼包背景框",3),s=280,t=97,h.default.gi().FormatEx("# 储备物资，临时提升，享仙侠之游！",200,18,4,4279717474,25),h.default.gi().Draw(this.iX+s,this.iY+t),h.default.gi().FormatEx("# 高阶武器，贵宾身份，让你畅行三界！",200,18,4,4279717474,25),h.default.gi().Draw(this.iX+s,this.iY+t+97),h.default.gi().FormatEx("# 双倍经验，光速升级，通往强者之路！",200,18,4,4279717474,25),h.default.gi().Draw(this.iX+s,this.iY+t+194),h.default.gi().FormatEx("# 替身木偶，悍不畏死，为你阻灾挡祸！",200,18,4,4279717474,25),h.default.gi().Draw(this.iX+s,this.iY+t+291),h.default.gi().FormatEx("# 绝世神兵，稀有彩果，助你叱咤风云！",200,18,4,4279717474,25),h.default.gi().Draw(this.iX+s,this.iY+t+388),s=this.iX+490,t=this.iY+87,a=0,this.iLockX=-1,this.iLockY=-1,e=0;e<5;e++){for(i=0;i<3;i++)1==i||4==e&&0==i?l.default.xani_nui6.DrawAnima(s+87*i,t+97*e,"主打物品框",0):l.default.xani_nui3.DrawAnima(s+87*i,t+97*e,"物品格子",0),this.gs[e][i].iGid>=0&&(this.gs[e][i].aa.Draw(s+87*i,t+97*e),this.btn_gs[e][i].Move(s+87*i,t+97*e,80,80),this.btn_gs[e][i].bMouseDown&&(this.iLockX=e,this.iLockY=i));0==a?0==(this.iGetStat&1<<e)?(a=1,0==(2048&m.default.me.iFlag[24])?(this.btn_get.Move(s+272,t+97*e+15,104,48),this.btn_get.Draw()):u.default.gi().DrawTextEx(s+270,t+97*e+40,this.sGetDetail[a++],4278190080,28,101,1,1,0,0,-2)):l.default.xani_nui6.DrawAnima(s+272,t+97*e+12,"已领取",0):u.default.gi().DrawTextEx(s+270,t+97*e+40,this.sGetDetail[a++],4278190080,28,101,1,1,0,0,-2)}this.iLockX>=0&&this.gs[this.iLockX][this.iLockY].iGid>=0&&_.default.new_DrawDetail(this.gs[this.iLockX][this.iLockY],this.btn_gs[this.iLockX][this.iLockY].iX,this.btn_gs[this.iLockX][this.iLockY].iY,0)}d.default.iTopIconOffX+=90}}},{key:"ProcTouch",value:function(t,e,i){if(p.default.gi().vbk.mapdialog.bHideUI()||c.default.jq.bJQLock())return!1;if(!this.bShow)return!1;if(!this.bInited)return!1;if(this.btn_open.ProcTouch(t,e,i))return this.btn_open.bCheck()&&(this.bShowEffect=!1,this.bShowFrame=!0),!0;if(this.bShowFrame){var a,n;if(0==(2048&m.default.me.iFlag[24])&&this.btn_get.ProcTouch(t,e,i))return this.btn_get.bCheck()&&(f.default.gi().s_SeverEvent(14,0,0,0,0),this.bShowFrame=!1),!0;for(a=0;a<5;a++)for(n=0;n<3;n++)this.btn_gs[a][n].ProcTouch(t,e,i);if(s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t)return!0;this.bShowFrame=!1}return!1}}]),FiveGift}();i.default=b,b.fg=new b},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/gameing/Gameing":91,"../../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../map/MapManager":286}],195:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),s=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),r=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),o=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),u=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/Gameing"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(){function LeaderBoard(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LeaderBoard),this.btn_open=null}return a(LeaderBoard,[{key:"Draw",value:function(){var t=u.default.iTopIconOffX;u.default.iTopIconOffX+=90,null==this.btn_open&&(this.btn_open=new n.default(r.default.xani_icon),this.btn_open.InitButton("排行榜")),this.btn_open.Move(t,10,72,72),this.btn_open.Draw(),s.default.gi().DrawText_2(this.btn_open.iX+36,this.btn_open.iY+71,"排行榜",4294833640,22,101,1,1,0,-2,-3,3,4279894016)}},{key:"ProcTouch",value:function(t,e,i){return!!this.btn_open.ProcTouch(t,e,i)&&(this.btn_open.bCheck()&&(l.default.me.CalcUserScore(),o.default.gi().PushStat(o.default.GS_LEADERBOARDFRAME)),!0)}}]),LeaderBoard}();i.default=f,f.lb=new f},{"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../engtst/mgm/gameing/Gameing":91,"../../../../../engtst/mgm/gameing/me/GmMe":211}],196:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GameData")),s=_interopRequireDefault(t("../../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2"))),l=(_interopRequireDefault(t("../../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast"))),f=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/UIList")),g=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage")),_=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=function _EQUIPLIST(){_classCallCheck(this,_EQUIPLIST)},b=function _ROLELIST(){_classCallCheck(this,_ROLELIST),this.iComplexScore=0,this.iScore=0},D=function _PETLIST(){_classCallCheck(this,_PETLIST)},y=function(t){function LeaderBoardFrame(t){_classCallCheck(this,LeaderBoardFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LeaderBoardFrame.__proto__||Object.getPrototypeOf(LeaderBoardFrame)).call(this));for(i._titles=[["七国第一","七国英杰","七国才俊"],["独占鳌头","超群绝伦","出类拔萃"],["驯兽大师","驯兽达人","驯兽有方"],["会当凌绝顶","山高我为峰","高处不胜寒"],["锻器大师","锻器达人","锻器有方"],["富甲天下","富可敌国","家财万贯"],["壕气冲天","威风壕壕","英雄壕杰"]],i.iLW=660,i.iW=340+i.iLW,i.iH=530,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.iShowH=i.iH-80,i.iDestH=0,i.btn_close=new u.default(f.default.xani_button),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_grsl=new u.default(f.default.xani_button),i.btn_grsl.InitButton("6号按钮210_60"),i.btn_grsl.sName="个人实力",i.btn_zhpf=new u.default(f.default.xani_button),i.btn_zhpf.InitButton("7号按钮180_60"),i.btn_zhpf.sName="综合评分",i.btn_rwpf=new u.default(f.default.xani_button),i.btn_rwpf.InitButton("7号按钮180_60"),i.btn_rwpf.sName="人物评分",i.btn_cwpf=new u.default(f.default.xani_button),i.btn_cwpf.InitButton("7号按钮180_60"),i.btn_cwpf.sName="宠物评分",i.btn_dj=new u.default(f.default.xani_button),i.btn_dj.InitButton("7号按钮180_60"),i.btn_dj.sName="等级",i.btn_jssb=new u.default(f.default.xani_button),i.btn_jssb.InitButton("6号按钮210_60"),i.btn_jssb.sName="绝世神兵",i.btn_wq=new u.default(f.default.xani_button),i.btn_wq.InitButton("7号按钮180_60"),i.btn_wq.sName="武器",i.btn_xl=new u.default(f.default.xani_button),i.btn_xl.InitButton("7号按钮180_60"),i.btn_xl.sName="项链",i.btn_yf=new u.default(f.default.xani_button),i.btn_yf.InitButton("7号按钮180_60"),i.btn_yf.sName="衣服",i.btn_tk=new u.default(f.default.xani_button),i.btn_tk.InitButton("7号按钮180_60"),i.btn_tk.sName="头盔",i.btn_yd=new u.default(f.default.xani_button),i.btn_yd.InitButton("7号按钮180_60"),i.btn_yd.sName="腰带",i.btn_xz=new u.default(f.default.xani_button),i.btn_xz.InitButton("7号按钮180_60"),i.btn_xz.sName="鞋子",i.btn_bwjfb=new u.default(f.default.xani_button),i.btn_bwjfb.InitButton("6号按钮210_60"),i.btn_bwjfb.sName="比武积分榜",i.btn_49z=new u.default(f.default.xani_button),i.btn_49z.InitButton("7号按钮180_60"),i.btn_49z.sName="上届49组",i.btn_69z=new u.default(f.default.xani_button),i.btn_69z.InitButton("7号按钮180_60"),i.btn_69z.sName="上届69组",i.btn_89z=new u.default(f.default.xani_button),i.btn_89z.InitButton("7号按钮180_60"),i.btn_89z.sName="上届80组",i.btn_qgyh=new u.default(f.default.xani_button),i.btn_qgyh.InitButton("6号按钮210_60"),i.btn_qgyh.sName="七国英豪",i.btn_49t=new u.default(f.default.xani_button),i.btn_49t.InitButton("7号按钮180_60"),i.btn_49t.sName="49组",i.btn_69t=new u.default(f.default.xani_button),i.btn_69t.InitButton("7号按钮180_60"),i.btn_69t.sName="69组",i.btn_89t=new u.default(f.default.xani_button),i.btn_89t.InitButton("7号按钮180_60"),i.btn_89t.sName="80组",i.btn_cfb=new u.default(f.default.xani_button),i.btn_cfb.InitButton("6号按钮210_60"),i.btn_cfb.sName="财富榜",i.btn_money=new u.default(f.default.xani_button),i.btn_money.InitButton("7号按钮180_60"),i.btn_money.sName="铜币榜",i.btn_ingot=new u.default(f.default.xani_button),i.btn_ingot.InitButton("7号按钮180_60"),i.btn_ingot.sName="元宝榜",i.btn_hyb=new u.default(f.default.xani_button),i.btn_hyb.InitButton("6号按钮210_60"),i.btn_hyb.sName="活跃榜",i.btn_thisweek=new u.default(f.default.xani_button),i.btn_thisweek.InitButton("7号按钮180_60"),i.btn_thisweek.sName="本周活跃榜",i.btn_previousweek=new u.default(f.default.xani_button),i.btn_previousweek.InitButton("7号按钮180_60"),i.btn_previousweek.sName="上周活跃榜",i.equip_list=new Array(50),i.role_list=new Array(50),i.pet_list=new Array(50),e=0;e<50;e++)i.equip_list[e]=new p,i.role_list[e]=new b,i.pet_list[e]=new D;for(i.ui_equip=new m.default(0,4,i.iW-25-25-20-240-30,i.iH-50-30),i.ui_equip.SetTitle(0,"排名",160,!1),i.ui_equip.SetTitle(1,"神兵名称",170,!1),i.ui_equip.SetTitle(2,"拥有者",170,!1),i.ui_equip.SetTitle(3,"评分",160,!1),i.ui_role=new m.default(0,4,i.iW-25-25-20-240-30,i.iH-50-30),i.ui_role.SetTitle(0,"排名",160,!1),i.ui_role.SetTitle(1,"角色名称",170,!1),i.ui_role.SetTitle(2,"门派",170,!1),i.ui_role.SetTitle(3,"评分",160,!1),i.ui_pet=new m.default(0,4,i.iW-25-25-20-240-30,i.iH-50-30),i.ui_pet.SetTitle(0,"排名",160,!1),i.ui_pet.SetTitle(1,"宠物名称",170,!1),i.ui_pet.SetTitle(2,"主人名称",170,!1),i.ui_pet.SetTitle(3,"评分",160,!1),i.iSelect1=0,i.iSelect2=0,i.iRoleCount=0,i.iPetCount=0,i.iEquipCount=0,h.default.gi().s_LeaderBoardFresh(0,i.iSelect1,i.iSelect2),_.default.me.CalcUserScore(),i.btn_explain=new Array(3),e=0;e<3;e++)i.btn_explain[e]=new u.default(f.default.xani_button),i.btn_explain[e].InitButton("5号按钮30_30"),i.btn_explain[e].Move(0,0,30,30);return i.btn_getprice=new u.default(f.default.xani_button),i.btn_getprice.InitButton("3号按钮160_42"),i.btn_getprice.sName="领取奖励",i.aa_icon=f.default.xani_frame.InitAnimaWithName("皇冠图标38_32",null),i.btn_self=new u.default(f.default.xani_button),i.btn_self.bSingleButton=!0,i.iOffY=0,i.bLocked1=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LeaderBoardFrame,o.default),a(LeaderBoardFrame,[{key:"Draw",value:function(){var t;c.default.new_baseframe3(this.iX,this.iY,this.iW,this.iH,"排","行","榜"),this.btn_close.Draw(),this.bLocked1||(this.iOffY>0&&(this.iOffY/=2),this.iOffY<0&&this.iDestH<this.iY+this.iH-40&&(t=this.iY+this.iH-40-this.iDestH,this.iOffY+=t/2)),c.default.new_framein(this.iX+25,this.iY+25,240,this.iH-50),l.default.gi().SetViewClip(this.iX+40,this.iY+40,this.iX+40+210,this.iY+this.iH-40);var e=this.iX+25+15,i=this.iY+25+15+this.iOffY;this.btn_grsl.Move(e,i,210,60),0==this.iSelect1&&this.btn_grsl.setdown(),this.btn_grsl.Draw(),i+=60,0==this.iSelect1&&(this.btn_zhpf.Move(e+15,i,180,60),0==this.iSelect2&&this.btn_zhpf.setdown(),this.btn_zhpf.Draw(),i+=60,this.btn_rwpf.Move(e+15,i,180,60),1==this.iSelect2&&this.btn_rwpf.setdown(),this.btn_rwpf.Draw(),i+=60,this.btn_cwpf.Move(e+15,i,180,60),2==this.iSelect2&&this.btn_cwpf.setdown(),this.btn_cwpf.Draw(),i+=60,this.btn_dj.Move(e+15,i,180,60),3==this.iSelect2&&this.btn_dj.setdown(),this.btn_dj.Draw(),i+=60),this.btn_jssb.Move(e,i,210,60),1==this.iSelect1&&this.btn_jssb.setdown(),this.btn_jssb.Draw(),i+=60,1==this.iSelect1&&(this.btn_wq.Move(e+15,i,180,60),0==this.iSelect2&&this.btn_wq.setdown(),this.btn_wq.Draw(),i+=60,this.btn_xl.Move(e+15,i,180,60),1==this.iSelect2&&this.btn_xl.setdown(),this.btn_xl.Draw(),i+=60,this.btn_yf.Move(e+15,i,180,60),2==this.iSelect2&&this.btn_yf.setdown(),this.btn_yf.Draw(),i+=60,this.btn_tk.Move(e+15,i,180,60),3==this.iSelect2&&this.btn_tk.setdown(),this.btn_tk.Draw(),i+=60,this.btn_yd.Move(e+15,i,180,60),4==this.iSelect2&&this.btn_yd.setdown(),this.btn_yd.Draw(),i+=60,this.btn_xz.Move(e+15,i,180,60),5==this.iSelect2&&this.btn_xz.setdown(),this.btn_xz.Draw(),i+=60),this.btn_bwjfb.Move(e,i,210,60),2==this.iSelect1&&this.btn_bwjfb.setdown(),this.btn_bwjfb.Draw(),i+=60,2==this.iSelect1&&(this.btn_49z.Move(e+15,i,180,60),0==this.iSelect2&&this.btn_49z.setdown(),this.btn_49z.Draw(),i+=60,this.btn_69z.Move(e+15,i,180,60),1==this.iSelect2&&this.btn_69z.setdown(),this.btn_69z.Draw(),i+=60,this.btn_89z.Move(e+15,i,180,60),2==this.iSelect2&&this.btn_89z.setdown(),this.btn_89z.Draw(),i+=60),this.btn_qgyh.Move(e,i,210,60),3==this.iSelect1&&this.btn_qgyh.setdown(),this.btn_qgyh.Draw(),i+=60,3==this.iSelect1&&(this.btn_49t.Move(e+15,i,180,60),0==this.iSelect2&&this.btn_49t.setdown(),this.btn_49t.Draw(),i+=60,this.btn_69t.Move(e+15,i,180,60),1==this.iSelect2&&this.btn_69t.setdown(),this.btn_69t.Draw(),i+=60,this.btn_89t.Move(e+15,i,180,60),2==this.iSelect2&&this.btn_89t.setdown(),this.btn_89t.Draw(),i+=60),this.btn_cfb.Move(e,i,210,60),5==this.iSelect1&&this.btn_cfb.setdown(),this.btn_cfb.Draw(),i+=60,5==this.iSelect1&&(this.btn_money.Move(e+15,i,180,60),0==this.iSelect2&&this.btn_money.setdown(),this.btn_money.Draw(),i+=60,this.btn_ingot.Move(e+15,i,180,60),1==this.iSelect2&&this.btn_ingot.setdown(),this.btn_ingot.Draw(),i+=60),this.btn_hyb.Move(e,i,210,60),6==this.iSelect1&&this.btn_hyb.setdown(),this.btn_hyb.Draw(),i+=60,6==this.iSelect1&&(this.btn_thisweek.Move(e+15,i,180,60),0==this.iSelect2&&this.btn_thisweek.setdown(),this.btn_thisweek.Draw(),i+=60,this.btn_previousweek.Move(e+15,i,180,60),1==this.iSelect2&&this.btn_previousweek.setdown(),this.btn_previousweek.Draw(),i+=60),this.iDestH=i,l.default.gi().NoClip();var a=this.iW-25-25-20-240;if(c.default.new_framein(this.iX+25+240+20,this.iY+25,a,this.iH-50),e=this.iX+25+240+20,i=this.iY+25,this.myrank=-1,0==this.iSelect1)if(2!=this.iSelect2){for(3==this.iSelect2?this.ui_role.SetTitle(3,"等级",160,!1):this.ui_role.SetTitle(3,"评分",160,!1),this.ui_role.BeginDraw(e+15,i+15),t=0;t<this.iRoleCount+1;t++)if(t<this.iRoleCount&&this.role_list[t].iRid==_.default.me.iRid&&(this.myrank=t),this.ui_role.bShow(t)){if(t==this.iRoleCount){this.ui_role.DrawUnit(0,t,"");break}switch(this.ui_role.DrawUnit(0,t,""+(t+1)),t<3&&(this.aa_icon.iFrame=t,this.ui_role.DrawUnitEx_Anima(0,t,this.aa_icon,61,4),this.ui_role.DrawUnitEx_Button(0,t,this.btn_explain[t],100,5)),this.role_list[t].iInitProc){case 0:h.default.gi().s_LeaderBoardFresh(2,this.role_list[t].iRid,0),this.role_list[t].iInitProc=1;break;case 1:this.ui_role.DrawUnit(1,t,"获取中...");break;case 2:this.ui_role.DrawUnit(1,t,this.role_list[t].sName),this.ui_role.DrawUnit(2,t,n.default.sSchools[this.role_list[t].iSchoolId]),0==this.iSelect2?this.ui_role.DrawUnit(3,t,""+this.role_list[t].iComplexScore):1==this.iSelect2?this.ui_role.DrawUnit(3,t,""+this.role_list[t].iScore):3==this.iSelect2&&this.ui_role.DrawUnit(3,t,""+this.role_list[t].iLev)}}this.ui_role.FinishDraw(),i+=410,this.btn_self.Move(e+15,i+15,this.iLW,40),c.default.frame_type4("22号框20_20",e+15,i+15,this.iLW,40,20,20),this.myrank>=0?this.myrank<3?this.aa_icon.Draw(this.ui_role.OffX(0)-19,i+15+20-16,this.myrank):l.default.gi().DrawTextEx(this.ui_role.OffX(0),i+15+20,""+(this.myrank+1),4294967295,20,101,1,1,0,-2,-2):l.default.gi().DrawTextEx(this.ui_role.OffX(0),i+15+20,"未上榜",4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(1),i+35,_.default.me.sName,4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(2),i+35,n.default.sSchools[_.default.me.rbs.iSchoolId],4294967295,20,101,1,1,0,-2,-2),0==this.iSelect2&&l.default.gi().DrawTextEx(this.ui_role.OffX(3),i+35,""+_.default.me.iComplexScore,4294967295,20,101,1,1,0,-2,-2),1==this.iSelect2&&l.default.gi().DrawTextEx(this.ui_role.OffX(3),i+35,""+_.default.me.iScore,4294967295,20,101,1,1,0,-2,-2),3==this.iSelect2&&l.default.gi().DrawTextEx(this.ui_role.OffX(3),i+35,""+_.default.me.rbs.iLev,4294967295,20,101,1,1,0,-2,-2)}else{for(this.ui_pet.BeginDraw(e+15,i+15),t=0;t<this.iPetCount+1;t++)if(this.ui_pet.bShow(t))if(t!=this.iPetCount)switch(this.ui_pet.DrawUnit(0,t,""+(t+1)),t<3&&(this.aa_icon.iFrame=t,this.ui_pet.DrawUnitEx_Anima(0,t,this.aa_icon,61,4),this.ui_pet.DrawUnitEx_Button(0,t,this.btn_explain[t],100,5)),this.pet_list[t].iInitProc){case 0:h.default.gi().s_LeaderBoardFresh(3,this.pet_list[t].iPid,0),this.pet_list[t].iInitProc=1;break;case 1:this.ui_pet.DrawUnit(1,t,"获取中...");break;case 2:this.ui_pet.DrawUnit(1,t,f.default.de_pet.strValue(this.pet_list[t].iTid,0,1)),this.ui_pet.DrawUnit(2,t,this.pet_list[t].sOwner),this.ui_pet.DrawUnit(3,t,""+this.pet_list[t].iScore)}else this.ui_pet.DrawUnit(0,t,"");this.ui_pet.FinishDraw()}if(1==this.iSelect1){for(this.ui_equip.BeginDraw(e+15,i+15),t=0;t<this.iEquipCount;t++)if(this.ui_equip.bShow(t))switch(this.ui_equip.DrawUnit(0,t,""+(t+1)),t<3&&(this.aa_icon.iFrame=t,this.ui_equip.DrawUnitEx_Anima(0,t,this.aa_icon,61,4),this.ui_equip.DrawUnitEx_Button(0,t,this.btn_explain[t],100,5)),this.equip_list[t].iInitProc){case 0:h.default.gi().s_LeaderBoardFresh(1,this.equip_list[t].iGid,0),this.equip_list[t].iInitProc=1;break;case 1:this.ui_equip.DrawUnit(1,t,"获取中...");break;case 2:this.ui_equip.DrawUnit(1,t,f.default.de_goods.strValue(this.equip_list[t].iTid,0,4)),this.ui_equip.DrawUnit(2,t,this.equip_list[t].sOwner),this.ui_equip.DrawUnit(3,t,""+this.equip_list[t].iScore)}this.ui_equip.FinishDraw()}if(2==this.iSelect1){for(this.ui_role.SetTitle(3,"积分",160,!1),this.ui_role.BeginDraw(e+15,i+15),t=0;t<this.iRoleCount+1;t++)if(t<this.iRoleCount&&this.role_list[t].iRid==_.default.me.iRid&&(this.myrank=t),this.ui_role.bShow(t)){if(t==this.iRoleCount){this.ui_role.DrawUnit(0,t,"");break}switch(this.ui_role.DrawUnit(0,t,""+(t+1)),t<3&&(this.aa_icon.iFrame=t,this.ui_role.DrawUnitEx_Anima(0,t,this.aa_icon,61,4)),this.role_list[t].iInitProc){case 0:h.default.gi().s_LeaderBoardFresh(2,this.role_list[t].iRid,0),this.role_list[t].iInitProc=1;break;case 1:this.ui_role.DrawUnit(1,t,"获取中...");break;case 2:this.ui_role.DrawUnit(1,t,this.role_list[t].sName),this.ui_role.DrawUnit(2,t,n.default.sSchools[this.role_list[t].iSchoolId]),this.ui_role.DrawUnit(3,t,""+this.role_list[t].iFlag16)}}this.ui_role.FinishDraw(),i+=410,this.btn_self.Move(e+15,i+15,this.iLW,40),c.default.frame_type4("22号框20_20",e+15,i+15,this.iLW,40,20,20),this.myrank>=0?this.myrank<3?this.aa_icon.Draw(this.ui_role.OffX(0)-19,i+15+20-16,this.myrank):l.default.gi().DrawTextEx(this.ui_role.OffX(0),i+15+20,""+(this.myrank+1),4294967295,20,101,1,1,0,-2,-2):l.default.gi().DrawTextEx(this.ui_role.OffX(0),i+15+20,"未上榜",4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(1),i+35,_.default.me.sName,4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(2),i+35,n.default.sSchools[_.default.me.rbs.iSchoolId],4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(3),i+35,""+_.default.me.iFlag[16],4294967295,20,101,1,1,0,-2,-2)}if(3==this.iSelect1){for(this.ui_role.SetTitle(3,"综合评分",160,!1),this.ui_role.BeginDraw(e+15,i+15),t=0;t<this.iRoleCount+1;t++)if(t<this.iRoleCount&&this.role_list[t].iRid==_.default.me.iRid&&(this.myrank=t),this.ui_role.bShow(t)){if(t==this.iRoleCount){this.ui_role.DrawUnit(0,t,"");break}switch(this.ui_role.DrawUnit(0,t,""+(t+1)),t<3&&(this.aa_icon.iFrame=t,this.ui_role.DrawUnitEx_Anima(0,t,this.aa_icon,61,4)),this.role_list[t].iInitProc){case 0:h.default.gi().s_LeaderBoardFresh(2,this.role_list[t].iRid,0),this.role_list[t].iInitProc=1;break;case 1:this.ui_role.DrawUnit(1,t,"获取中...");break;case 2:this.ui_role.DrawUnit(1,t,this.role_list[t].sName),this.ui_role.DrawUnit(2,t,n.default.sSchools[this.role_list[t].iSchoolId]),this.ui_role.DrawUnit(3,t,""+this.role_list[t].iComplexScore)}}this.ui_role.FinishDraw(),i+=410,this.btn_self.Move(e+15,i+15,this.iLW,40),c.default.frame_type4("22号框20_20",e+15,i+15,this.iLW,40,20,20),this.myrank>=0?this.myrank<3?this.aa_icon.Draw(this.ui_role.OffX(0)-19,i+15+20-16,this.myrank):l.default.gi().DrawTextEx(this.ui_role.OffX(0),i+15+20,""+(this.myrank+1),4294967295,20,101,1,1,0,-2,-2):l.default.gi().DrawTextEx(this.ui_role.OffX(0),i+15+20,"未上榜",4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(1),i+35,_.default.me.sName,4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(2),i+35,n.default.sSchools[_.default.me.rbs.iSchoolId],4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(3),i+35,""+_.default.me.iComplexScore,4294967295,20,101,1,1,0,-2,-2)}if(5==this.iSelect1){for(0==this.iSelect2?this.ui_role.SetTitle(3,"铜币",160,!1):this.ui_role.SetTitle(3,"元宝",160,!1),this.ui_role.BeginDraw(e+15,i+15),t=0;t<this.iRoleCount+1;t++)if(t<this.iRoleCount&&this.role_list[t].iRid==_.default.me.iRid&&(this.myrank=t),this.ui_role.bShow(t)){if(t==this.iRoleCount){this.ui_role.DrawUnit(0,t,"");break}switch(this.ui_role.DrawUnit(0,t,""+(t+1)),t<3&&(this.aa_icon.iFrame=t,this.ui_role.DrawUnitEx_Anima(0,t,this.aa_icon,61,4),this.ui_role.DrawUnitEx_Button(0,t,this.btn_explain[t],100,5)),this.role_list[t].iInitProc){case 0:h.default.gi().s_LeaderBoardFresh(2,this.role_list[t].iRid,0),this.role_list[t].iInitProc=1;break;case 1:this.ui_role.DrawUnit(1,t,"获取中...");break;case 2:this.ui_role.DrawUnit(1,t,this.role_list[t].sName),this.ui_role.DrawUnit(2,t,n.default.sSchools[this.role_list[t].iSchoolId]),this.ui_role.DrawUnit(3,t,""+this.role_list[t].iMoney)}}this.ui_role.FinishDraw(),i+=410,this.btn_self.Move(e+15,i+15,this.iLW,40),c.default.frame_type4("22号框20_20",e+15,i+15,this.iLW,40,20,20),this.myrank>=0?this.myrank<3?this.aa_icon.Draw(this.ui_role.OffX(0)-19,i+15+20-16,this.myrank):l.default.gi().DrawTextEx(this.ui_role.OffX(0),i+15+20,""+(this.myrank+1),4294967295,20,101,1,1,0,-2,-2):l.default.gi().DrawTextEx(this.ui_role.OffX(0),i+15+20,"未上榜",4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(1),i+35,_.default.me.sName,4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(2),i+35,n.default.sSchools[_.default.me.rbs.iSchoolId],4294967295,20,101,1,1,0,-2,-2),0==this.iSelect2?l.default.gi().DrawTextEx(this.ui_role.OffX(3),i+35,""+(_.default.me.rbs.iMoney+_.default.me.rbs.iStore),4294967295,20,101,1,1,0,-2,-2):l.default.gi().DrawTextEx(this.ui_role.OffX(3),i+35,""+_.default.me.rbs.iInGot,4294967295,20,101,1,1,0,-2,-2)}if(6==this.iSelect1){for(this.ui_role.SetTitle(3,"活跃度积分",160,!1),this.ui_role.BeginDraw(e+15,i+15),t=0;t<this.iRoleCount+1;t++)if(t<this.iRoleCount&&this.role_list[t].iRid==_.default.me.iRid&&(this.myrank=t),this.ui_role.bShow(t)){if(t==this.iRoleCount){this.ui_role.DrawUnit(0,t,"");break}switch(this.ui_role.DrawUnit(0,t,""+(t+1)),t<3&&(this.aa_icon.iFrame=t,this.ui_role.DrawUnitEx_Anima(0,t,this.aa_icon,61,4),this.ui_role.DrawUnitEx_Button(0,t,this.btn_explain[t],100,5)),this.role_list[t].iInitProc){case 0:h.default.gi().s_LeaderBoardFresh(2,this.role_list[t].iRid,0),this.role_list[t].iInitProc=1;break;case 1:this.ui_role.DrawUnit(1,t,"获取中...");break;case 2:this.ui_role.DrawUnit(1,t,this.role_list[t].sName),this.ui_role.DrawUnit(2,t,n.default.sSchools[this.role_list[t].iSchoolId]),this.ui_role.DrawUnit(3,t,""+this.role_list[t].iMoney)}}this.ui_role.FinishDraw(),i+=410,this.btn_self.Move(e+15,i+15,this.iLW,40),c.default.frame_type4("22号框20_20",e+15,i+15,this.iLW,40,20,20),this.myrank>=0?this.myrank<3?this.aa_icon.Draw(this.ui_role.OffX(0)-19,i+15+20-16,this.myrank):l.default.gi().DrawTextEx(this.ui_role.OffX(0),i+15+20,""+(this.myrank+1),4294967295,20,101,1,1,0,-2,-2):l.default.gi().DrawTextEx(this.ui_role.OffX(0),i+15+20,"未上榜",4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(1),i+35,_.default.me.sName,4294967295,20,101,1,1,0,-2,-2),l.default.gi().DrawTextEx(this.ui_role.OffX(2),i+35,n.default.sSchools[_.default.me.rbs.iSchoolId],4294967295,20,101,1,1,0,-2,-2),0==this.iSelect2?l.default.gi().DrawTextEx(this.ui_role.OffX(3),i+35,""+(_.default.me.iFlagExt[25]+_.default.me.iFlagExt[24]),4294967295,20,101,1,1,0,-2,-2):(l.default.gi().DrawTextEx(this.ui_role.OffX(3),i+35,""+_.default.me.iFlagExt[26],4294967295,20,101,1,1,0,-2,-2),this.myrank>=0&&this.myrank<3&&(this.btn_getprice.Move(this.ui_role.OffX(3)-80,i+15-1,160,42),this.btn_getprice.Draw()))}}},{key:"ProcTouch",value:function(t,e,i){var a;if(3==t&&this.bLocked1)return this.bLocked1=!1,!0;if(2==t&&this.bLocked1)return a=this.iLockY-i,this.iOffY-=a,this.iLockY=i,!0;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&d.default.gi().PopStat(1),!0;if(0==this.iSelect1){if(2!=this.iSelect2){if(this.btn_self.ProcTouch(t,e,i))return this.btn_self.bCheck()&&(0==this.iSelect2&&h.default.gi().s_LeaderBoardFresh(4,_.default.me.iRid,0),1!=this.iSelect2&&3!=this.iSelect2||h.default.gi().s_WatchOn(0,_.default.me.iRid,0,"")),!0;if(this.ui_role.ProcTouch(t,e,i)){for(a=0;a<3;a++)this.btn_explain[a].bCheck()&&g.default.fm.Open("每日0点前排名第"+(a+1)+"的玩家获得称谓"+this._titles[this.iSelect2][a]+"，持续一天");return(a=this.ui_role.iChecked())>=0&&a<this.iRoleCount&&(0==this.iSelect2&&h.default.gi().s_LeaderBoardFresh(4,this.role_list[a].iRid,0),1!=this.iSelect2&&3!=this.iSelect2||h.default.gi().s_WatchOn(0,this.role_list[a].iRid,0,"")),!0}}else if(this.ui_pet.ProcTouch(t,e,i)){for(a=0;a<3;a++)this.btn_explain[a].bCheck()&&g.default.fm.Open("每日0点前排名第"+(a+1)+"的玩家获得称谓"+this._titles[this.iSelect2][a]+"，持续一天");return(a=this.ui_pet.iChecked())>=0&&a<this.iPetCount&&h.default.gi().s_WatchOn(2,this.pet_list[a].iPid,0,""),!0}}else if(1==this.iSelect1){if(this.ui_equip.ProcTouch(t,e,i)){for(a=0;a<3;a++)this.btn_explain[a].bCheck()&&g.default.fm.Open("每日0点前排名第"+(a+1)+"的玩家获得称谓"+this._titles[4][a]+"，持续一天");return(a=this.ui_equip.iChecked())>=0&&a<this.iEquipCount&&h.default.gi().s_WatchOn(1,this.equip_list[a].iGid,0,""),!0}}else if(2==this.iSelect1){if(this.btn_self.ProcTouch(t,e,i))return this.btn_self.bCheck()&&h.default.gi().s_WatchOn(0,_.default.me.iRid,0,""),!0;if(this.ui_role.ProcTouch(t,e,i))return(a=this.ui_role.iChecked())>=0&&a<this.iRoleCount&&h.default.gi().s_WatchOn(0,this.role_list[a].iRid,0,""),!0}else if(3==this.iSelect1){if(this.btn_self.ProcTouch(t,e,i))return this.btn_self.bCheck()&&h.default.gi().s_LeaderBoardFresh(4,_.default.me.iRid,0),!0;if(this.ui_role.ProcTouch(t,e,i))return(a=this.ui_role.iChecked())>=0&&a<this.iRoleCount&&h.default.gi().s_LeaderBoardFresh(4,this.role_list[a].iRid,0),!0}else if(5==this.iSelect1||6==this.iSelect1){if(6==this.iSelect1&&1==this.iSelect2&&this.myrank>=0&&this.myrank<3&&this.btn_getprice.ProcTouch(t,e,i))return this.btn_getprice.bCheck()&&h.default.gi().s_ExtendCmd("领取活跃排行奖励","","","","","","",""),!0;if(this.btn_self.ProcTouch(t,e,i))return this.btn_self.bCheck()&&h.default.gi().s_WatchOn(0,_.default.me.iRid,0,""),!0;if(this.ui_role.ProcTouch(t,e,i)){for(a=0;a<3;a++)this.btn_explain[a].bCheck()&&(5==this.iSelect1?0==this.iSelect2?g.default.fm.Open("每日0点前排名第"+(a+1)+"的玩家获得称谓"+this._titles[5][a]+"，持续一天"):1==this.iSelect2&&g.default.fm.Open("每日0点前排名第"+(a+1)+"的玩家获得称谓"+this._titles[6][a]+"，持续一天"):6==this.iSelect1&&(0==a?g.default.fm.Open("每周活跃第一的玩家将获得活跃礼包，可获得丰厚奖励，更有概率获得特级技能书"):1==a?g.default.fm.Open("每周活跃第二的玩家将获得活跃礼包，可获得丰厚奖励"):g.default.fm.Open("每周活跃第三的玩家将获得活跃礼包，可获得丰厚奖励")));return(a=this.ui_role.iChecked())>=0&&a<this.iRoleCount&&h.default.gi().s_WatchOn(0,this.role_list[a].iRid,0,""),!0}}var n=!1;return this.btn_grsl.ProcTouch(t,e,i)&&this.btn_grsl.bCheck()&&0!=this.iSelect1&&(this.iSelect1=0,this.iSelect2=0,n=!0),0==this.iSelect1&&(this.btn_zhpf.ProcTouch(t,e,i)&&this.btn_zhpf.bCheck()&&0!=this.iSelect2&&(this.iSelect2=0,n=!0),this.btn_rwpf.ProcTouch(t,e,i)&&this.btn_rwpf.bCheck()&&1!=this.iSelect2&&(this.iSelect2=1,n=!0),this.btn_cwpf.ProcTouch(t,e,i)&&this.btn_cwpf.bCheck()&&2!=this.iSelect2&&(this.iSelect2=2,n=!0),this.btn_dj.ProcTouch(t,e,i)&&this.btn_dj.bCheck()&&3!=this.iSelect2&&(this.iSelect2=3,n=!0)),this.btn_jssb.ProcTouch(t,e,i)&&this.btn_jssb.bCheck()&&1!=this.iSelect1&&(this.iSelect1=1,this.iSelect2=0,n=!0),1==this.iSelect1&&(this.btn_wq.ProcTouch(t,e,i)&&this.btn_wq.bCheck()&&0!=this.iSelect2&&(this.iSelect2=0,n=!0),this.btn_xl.ProcTouch(t,e,i)&&this.btn_xl.bCheck()&&1!=this.iSelect2&&(this.iSelect2=1,n=!0),this.btn_yf.ProcTouch(t,e,i)&&this.btn_yf.bCheck()&&2!=this.iSelect2&&(this.iSelect2=2,n=!0),this.btn_tk.ProcTouch(t,e,i)&&this.btn_tk.bCheck()&&3!=this.iSelect2&&(this.iSelect2=3,n=!0),this.btn_yd.ProcTouch(t,e,i)&&this.btn_yd.bCheck()&&4!=this.iSelect2&&(this.iSelect2=4,n=!0),this.btn_xz.ProcTouch(t,e,i)&&this.btn_xz.bCheck()&&5!=this.iSelect2&&(this.iSelect2=5,n=!0)),this.btn_bwjfb.ProcTouch(t,e,i)&&this.btn_bwjfb.bCheck()&&(this.iSelect1=2,this.iSelect2=0,n=!0),2==this.iSelect1&&(this.btn_49z.ProcTouch(t,e,i)&&this.btn_49z.bCheck()&&0!=this.iSelect2&&(this.iSelect2=0,n=!0),this.btn_69z.ProcTouch(t,e,i)&&this.btn_69z.bCheck()&&1!=this.iSelect2&&(this.iSelect2=1,n=!0),this.btn_89z.ProcTouch(t,e,i)&&this.btn_89z.bCheck()&&2!=this.iSelect2&&(this.iSelect2=2,n=!0)),this.btn_qgyh.ProcTouch(t,e,i)&&this.btn_qgyh.bCheck()&&(this.iSelect1=3,this.iSelect2=0,n=!0),3==this.iSelect1&&(this.btn_49t.ProcTouch(t,e,i)&&this.btn_49t.bCheck()&&0!=this.iSelect2&&(this.iSelect2=0,n=!0),this.btn_69t.ProcTouch(t,e,i)&&this.btn_69t.bCheck()&&1!=this.iSelect2&&(this.iSelect2=1,n=!0),this.btn_89t.ProcTouch(t,e,i)&&this.btn_89t.bCheck()&&2!=this.iSelect2&&(this.iSelect2=2,n=!0)),this.btn_cfb.ProcTouch(t,e,i)&&this.btn_cfb.bCheck()&&(this.iSelect1=5,this.iSelect2=0,n=!0),5==this.iSelect1&&(this.btn_money.ProcTouch(t,e,i)&&this.btn_money.bCheck()&&0!=this.iSelect2&&(this.iSelect2=0,n=!0),this.btn_ingot.ProcTouch(t,e,i)&&this.btn_ingot.bCheck()&&1!=this.iSelect2&&(this.iSelect2=1,n=!0)),this.btn_hyb.ProcTouch(t,e,i)&&this.btn_hyb.bCheck()&&(this.iSelect1=6,this.iSelect2=0,n=!0),6==this.iSelect1&&(this.btn_thisweek.ProcTouch(t,e,i)&&this.btn_thisweek.bCheck()&&0!=this.iSelect2&&(this.iSelect2=0,n=!0),this.btn_previousweek.ProcTouch(t,e,i)&&this.btn_previousweek.bCheck()&&1!=this.iSelect2&&(this.iSelect2=1,n=!0)),n&&(this.iRoleCount=0,this.iPetCount=0,this.iEquipCount=0,h.default.gi().s_LeaderBoardFresh(0,this.iSelect1,this.iSelect2),d.default.gi().PushStat(d.default.GS_LOADING1)),r.default.bInRect(e,i,this.iX+40,this.iY+40,210,this.iH-80)&&(1==t&&(this.iLockY=i),2==t&&(this.bLocked1||((a=this.iLockY-i)<-15||a>15)&&(this.bLocked1=!0,this.btn_grsl.SetNormal(),this.btn_zhpf.SetNormal(),this.btn_rwpf.SetNormal(),this.btn_cwpf.SetNormal(),this.btn_dj.SetNormal(),this.btn_jssb.SetNormal(),this.btn_wq.SetNormal(),this.btn_xl.SetNormal(),this.btn_yf.SetNormal(),this.btn_tk.SetNormal(),this.btn_yd.SetNormal(),this.btn_xz.SetNormal(),this.btn_bwjfb.SetNormal(),this.btn_49z.SetNormal(),this.btn_69z.SetNormal(),this.btn_89z.SetNormal(),this.btn_qgyh.SetNormal(),this.btn_49t.SetNormal(),this.btn_69t.SetNormal(),this.btn_89t.SetNormal(),this.btn_cfb.SetNormal(),this.btn_money.SetNormal(),this.btn_ingot.SetNormal(),this.btn_hyb.SetNormal(),this.btn_thisweek.SetNormal(),this.btn_previousweek.SetNormal()))),!1}},{key:"_LeaderBoardFresh",value:function(t){var e,i,a=t.GetNextInt(),n=t.GetNextInt(),s=t.GetNextInt();switch(a){case 0:if(0==n)if(2!=this.iSelect2&&this.iSelect2==s)for(this.iRoleCount=t.GetNextByte(),e=0;e<this.iRoleCount;e++)this.role_list[e].iRid=t.GetNextInt(),this.role_list[e].iInitProc=0;else if(this.iSelect2==s)for(this.iPetCount=t.GetNextByte(),e=0;e<this.iPetCount;e++)this.pet_list[e].iPid=t.GetNextInt(),this.pet_list[e].iInitProc=0;if(1==n&&1==this.iSelect1&&this.iSelect2==s)for(this.iEquipCount=t.GetNextByte(),e=0;e<this.iEquipCount;e++)this.equip_list[e].iGid=t.GetNextInt(),this.equip_list[e].iInitProc=0;if(2==n&&this.iSelect1==n&&this.iSelect2==s)for(this.iRoleCount=t.GetNextByte(),e=0;e<this.iRoleCount;e++)this.role_list[e].iRid=t.GetNextInt(),this.role_list[e].iFlag16=t.GetNextInt(),this.role_list[e].iInitProc=0;if(3==n&&this.iSelect1==n&&this.iSelect2==s)for(this.iRoleCount=t.GetNextByte(),e=0;e<this.iRoleCount;e++)this.role_list[e].iRid=t.GetNextInt(),this.role_list[e].iInitProc=0;if((5==n||6==n)&&this.iSelect1==n&&this.iSelect2==s)for(this.iRoleCount=t.GetNextByte(),e=0;e<this.iRoleCount;e++)this.role_list[e].iRid=t.GetNextInt(),this.role_list[e].iMoney=t.GetNextInt(),this.role_list[e].iInitProc=0;break;case 1:if(1==this.iSelect1)for(e=0;e<this.iEquipCount;e++)1==this.equip_list[e].iInitProc&&this.equip_list[e].iGid==n&&(this.equip_list[e].iTid=t.GetNextInt(),this.equip_list[e].iRid=t.GetNextInt(),this.equip_list[e].iScore=t.GetNextInt(),this.equip_list[e].sOwner=t.GetNextString(),this.equip_list[e].iInitProc=2);break;case 2:if(0==this.iSelect1&&2!=this.iSelect2||2==this.iSelect1||3==this.iSelect1||5==this.iSelect1||6==this.iSelect1)for(e=0;e<this.iRoleCount;e++)1==this.role_list[e].iInitProc&&this.role_list[e].iRid==n&&(this.role_list[e].sName=t.GetNextString(),this.role_list[e].iSchoolId=t.GetNextInt(),this.role_list[e].iComplexScore=t.GetNextInt(),this.role_list[e].iScore=t.GetNextInt(),this.role_list[e].iLev=t.GetNextInt(),this.role_list[e].iInitProc=2);break;case 3:if(0==this.iSelect1&&2==this.iSelect2)for(e=0;e<this.iPetCount;e++)1==this.pet_list[e].iInitProc&&this.pet_list[e].iPid==n&&(this.pet_list[e].iTid=t.GetNextInt(),this.pet_list[e].iScore=t.GetNextInt(),this.pet_list[e].iRid=t.GetNextInt(),this.pet_list[e].sOwner=t.GetNextString(),this.pet_list[e].iInitProc=2);break;case 4:for(e=0;e<this.iRoleCount;e++)if(this.role_list[e].iRid==n){var r=t.GetNextInt(),o=t.GetNextInt(),u=t.GetNextInt();return i=0==e?this.role_list[e].iComplexScore-this.role_list[e+1].iComplexScore:this.role_list[e-1].iComplexScore-this.role_list[e].iComplexScore,void LeaderBoardRole.Open(this.role_list[e].iRid,this.role_list[e].sName,this.role_list[e].iComplexScore,this.role_list[e].iScore,r,o,u,e+1,i)}if(n==_.default.me.iRid){r=t.GetNextInt(),o=t.GetNextInt(),u=t.GetNextInt();LeaderBoardRole.Open(_.default.me.iRid,_.default.me.sName,_.default.me.iComplexScore,_.default.me.iScore,r,o,u,0,0)}}}}]),LeaderBoardFrame}();i.default=y,y.LeaderBoardFresh=function(t){for(;d.default.gi().LastStatType(0)==d.default.GS_LOADING1;)d.default.gi().PopStat(1);d.default.gi().LastStatType(0)==d.default.GS_LEADERBOARDFRAME&&d.default.gi().LastStat(0)._LeaderBoardFresh(t)}},{"../../../../../../config/GameData":4,"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/PackageTools":9,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/AnimaAction":25,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/UIList":80,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/gameing/me/GmMe":211}],197:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../../map/DrawBuffer")),_interopRequireDefault(t("../../../../../../map/MapManager")),_interopRequireDefault(t("../../../../../../config/GmConfig"))),s=_interopRequireDefault(t("../../../../../../config/SortAnima")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/FireworksEffect"))),f=_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function LeaderBoardRole(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LeaderBoardRole);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LeaderBoardRole.__proto__||Object.getPrototypeOf(LeaderBoardRole)).call(this));return e.iW=500,e.iH=320,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_close=new o.default(f.default.xani_button),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.iColor=new Int32Array(6),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LeaderBoardRole,r.default),a(LeaderBoardRole,[{key:"Draw",value:function(){var t,e=200;for(d.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),this.btn_close.Draw(),l.default.DrawAura(0,this.iX+30+100,this.iY+this.iH-30-30-60,null,0),f.default.xani_newrole[this.iRas].DrawAnima(this.iX+30+100,this.iY+this.iH-30-30-60,"站立_下",f.default.iDelay/2),t=0;t<s.default._CHANGECOLOR[this.iRas].length;t++)this.iColor[t]<=0||f.default.xani_color[this.iRas][this.iColor[t]-1].DrawAnima(this.iX+30+100,this.iY+this.iH-30-30-60,s.default._CHANGECOLOR[this.iRas][t]+"_站立_下",f.default.iDelay/2);f.default.xani_weap[this.iRas][s.default.WeapFlag(this.iWeapId)].DrawAnima(this.iX+30+100,this.iY+this.iH-30-30-60,"站立_下",f.default.iDelay/2),d.default.frame_type1("4号框20_30",this.iX+30,this.iY+this.iH-30-30,e,20),u.default.gi().DrawTextEx(this.iX+30+100,this.iY+this.iH-30-15,this.sName,4294967295,24,101,1,1,0,-2,-2),0==this.iRank?u.default.gi().DrawText_2(this.iX+30+e+30,this.iY+30,"未上榜",4294962302,24,101,1,1,0,0,0,3,4278261038):1==this.iRank?u.default.gi().DrawText_2(this.iX+30+e+30,this.iY+30,"超越下一名："+this.iGap,4294962302,24,101,1,1,0,0,0,3,4278261038):u.default.gi().DrawText_2(this.iX+30+e+30,this.iY+30,"距离上一名："+this.iGap,4294962302,24,101,1,1,0,0,0,3,4278261038),u.default.gi().DrawText_2(this.iX+30+e+30,this.iY+30+30,"综合评分："+this.iComplexScore,4294962302,24,101,1,1,0,0,0,3,4278261038),d.default.frame_type4("11号框20_20",this.iX+30+e+30,this.iY+30+60,this.iW-30-e-30-30,(this.iH-30-60-30-20)/2,20,20),u.default.gi().DrawTextEx(this.iX+30+e+30+15,this.iY+30+60+15,"人物评分："+this.iScore,4279389280,20,101,1,1,0,0,0),c.default.gi().Format("#c124c60(与等级，技能，修炼，装备，阵法相关)",this.iW-30-e-30-30-30,16),c.default.gi().Draw(this.iX+30+e+30+15,this.iY+30+60+15+25),d.default.frame_type4("11号框20_20",this.iX+30+e+30,this.iY+30+60+(this.iH-30-60-30-20)/2+20,this.iW-30-e-30-30,(this.iH-30-60-30-20)/2,20,20),u.default.gi().DrawTextEx(this.iX+30+e+30+15,this.iY+30+60+15+(this.iH-30-60-30-20)/2+20,"宠物评分："+(this.iComplexScore-this.iScore),4279389280,20,101,1,1,0,0,0),c.default.gi().Format("#c124c60(与携带评分最高的四只宠物相关)",this.iW-30-e-30-30-30,16),c.default.gi().Draw(this.iX+30+e+30+15,this.iY+30+60+15+25+(this.iH-30-60-30-20)/2+20)}},{key:"ProcTouch",value:function(t,e,i){return!(!this.btn_close.ProcTouch(t,e,i)||!this.btn_close.bCheck())&&(h.default.gi().PopStat(1),!0)}}]),LeaderBoardRole}();i.default=m,m.Open=function(t,e,i,a,n,s,r,o,u){var l=h.default.gi().PushStat(h.default.GS_LEADERBOARDROLE);l.iRid=t,l.sName=e,l.iComplexScore=i,l.iScore=a,l.iPetScore=i-a,l.iRas=n,l.iWeapId=r,l.iRank=o,l.iGap=u,l.iColor[0]=7&s,l.iColor[1]=s>>3&7,l.iColor[2]=s>>6&7,l.iColor[3]=s>>9&7,l.iColor[4]=s>>12&7}},{"../../../../../../config/GmConfig":5,"../../../../../../config/SortAnima":6,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/FireworksEffect":64,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../../map/DrawBuffer":283,"../../../../../../map/MapManager":286}],198:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../map/MapManager")),s=(_interopRequireDefault(t("../../../../../mgm/newmainmenu/StarEffect")),_interopRequireDefault(t("../../../../../config/GmConfig"))),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1"))),u=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),l=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/Gameing")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/JQMode")),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"));_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(){function LoginGift(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LoginGift),this.bInited=!1,this.btn_gift2=null,this.btn_get=null,this.bShow=!1,this.iDelay=0}return a(LoginGift,[{key:"DrawGift2",value:function(){var t,e;if(0==(8&_.default.me.iFlag[24]))t=500*_.default.me.rbs.iLev+100;else if(0==(16&_.default.me.iFlag[24]))t=100*_.default.me.rbs.iLev+100;else if(0==(32&_.default.me.iFlag[24]))t=200*_.default.me.rbs.iLev+100;else if(0==(64&_.default.me.iFlag[24]))t=300*_.default.me.rbs.iLev+100;else{if(0!=(128&_.default.me.iFlag[24]))return void(this.bGet2=!1);t=400*_.default.me.rbs.iLev+100}e=3*t,this.iW=280,this.iH=240,this.iX=(s.default.SCRW-this.iW)/2,this.iY=(s.default.SCRH-this.iH)/2,d.default.new_framewatch(this.iX,this.iY,this.iW,this.iH),f.default.xani_nui3.DrawAnima(this.iX+40,this.iY+30,"物品格子",0),f.default.xani_ngoods.DrawAnima(this.iX+40,this.iY+30,"物品经验",0),l.default.gi().DrawText_2(this.iX+40+40,this.iY+30+80+5,""+e,4294967040,20,101,1,1,0,-2,0,1,4278190080),f.default.xani_nui3.DrawAnima(this.iX+40+80+40,this.iY+30,"物品格子",0),f.default.xani_ngoods.DrawAnima(this.iX+40+80+40,this.iY+30,"物品储备金",0),l.default.gi().DrawText_2(this.iX+40+80+40+40,this.iY+30+80+5,""+t,4294967040,20,101,1,1,0,-2,0,1,4278190080),this.btn_get.Move(this.iX+this.iW/2-49,this.iY+this.iH-50-30,98,50),this.btn_get.Draw()}},{key:"SetStatByFlag",value:function(){this.bGift2=!1,this.bGet2=!1,0!=(8&_.default.me.iFlag[24])&&0!=(16&_.default.me.iFlag[24])&&0!=(32&_.default.me.iFlag[24])&&0!=(64&_.default.me.iFlag[24])&&0!=(128&_.default.me.iFlag[24])||(this.bGift2=!0),this.bShow=!0}},{key:"Draw",value:function(){var t;_.default.me.rbs.iLev<10||(n.default.gi().vbk.mapdialog.bHideUI()||g.default.jq.bJQLock()||this.bShow&&(this.iDelay++,null==this.btn_gift2&&(this.btn_gift2=new u.default(f.default.xani_icon),this.btn_gift2.InitButton("登录礼包"),this.aa_effect=f.default.xani_nui6.InitAnimaWithName("转圈效果",null),this.btn_get=new o.default(f.default.xani_nui3),this.btn_get.InitButton("内框按钮"),this.btn_get.sName="领取",this.bInited=!0),this.iY=10,this.iW=72,this.iH=72,this.iX=m.default.iTopIconOffX,this.bGift2&&_.default.me.rbs.iLev>=10&&(m.default.iTopIconOffX+=90,this.btn_gift2.Move(this.iX,this.iY,this.iW,this.iH),this.btn_gift2.Draw(),_.default.me.iFlag[37]<=0&&f.default.xani_icon.DrawAnima(this.iX+48,2,"红点提示",0),_.default.me.iFlag[37]>0?(t=r.default.get_ms()/1e3,t-=_.default.me.lt1,(t=_.default.me.iFlag[37]-t)<0?_.default.me.iFlag[37]=0:LoginGift.DrawTime(this.iX+36,this.iY+71,t)):l.default.gi().DrawText_2(this.btn_gift2.iX+36,this.btn_gift2.iY+71,"领取",4294833640,22,101,1,1,0,-2,-3,3,4279894016)),this.bGet2&&this.DrawGift2()))}},{key:"ProcTouch",value:function(t,e,i){return!(_.default.me.rbs.iLev<10)&&(!n.default.gi().vbk.mapdialog.bHideUI()&&!g.default.jq.bJQLock()&&(!!this.bShow&&(!!this.bInited&&(this.bGet2?this.btn_get.ProcTouch(t,e,i)?(this.btn_get.bCheck()&&(h.default.gi().s_SeverEvent(14,1,0,0,0),this.bGet2=!1),!0):(r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||3!=t||(this.bGet2=!1),!0):!!(this.bGift2&&_.default.me.rbs.iLev>=10&&this.btn_gift2.ProcTouch(t,e,i))&&(this.btn_gift2.bCheck()&&(0==_.default.me.iFlag[37]?this.bGet2=!0:c.default.easymsg.AddMessage("倒计时结束后可领")),!0)))))}}]),LoginGift}();i.default=p,p.lg=new p,p.DrawNum=function(t,e,i){},p.DrawTime=function(t,e,i){i=parseInt(i);var a="",n=parseInt(i/60/60)%60;a=a+parseInt(n/10)+n%10+":",n=parseInt(i/60)%60,a=a+parseInt(n/10)+n%10+":",n=i%60,a=a+parseInt(n/10)+n%10,l.default.gi().DrawText_2(t,e,a,4294833640,22,101,1,1,0,-2,-3,3,4279894016)}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/Gameing":91,"../../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../map/MapManager":286,"../../../../../mgm/newmainmenu/StarEffect":311}],199:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GameData")),s=_interopRequireDefault(t("../../../../../map/MapManager")),r=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),o=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),u=_interopRequireDefault(t("../../../../../engine/xms/XmsEngine")),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),f=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/Gameing"))),h=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/BeginersGuide")),d=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/JQMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/MyAttFrame")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/MyPets")),_=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/PetsFrame")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(){function StrengthUpgrade(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,StrengthUpgrade),this.bInited=!1,this.bOpen=!1}return a(StrengthUpgrade,[{key:"calcshow",value:function(){if(c.default.me.rbs.nut>0)return!0;if(c.default.me.rbs.iExp>=n.default.iUpgradeExp[c.default.me.rbs.iLev])return!0;var t=g.default.mp.GetUseingPet();return g.default.mp.iPetCount>0&&null==t||null!=t&&t.nut>0}},{key:"Draw",value:function(){if(!s.default.gi().vbk.mapdialog.bHideUI()&&!d.default.jq.bJQLock()&&!(c.default.me.rbs.iLev>=40)&&(this.bShow=this.calcshow(),this.bShow)){this.bInited||(this.btn_upgrade=new r.default(l.default.xani_icon),this.btn_upgrade.InitButton("实力提升"),this.btn_addpoint=new r.default(l.default.xani_button),this.btn_addpoint.InitButton("1号按钮150_60"),this.btn_addpoint.sName="人物加点",this.btn_upgrademe=new r.default(l.default.xani_button),this.btn_upgrademe.InitButton("1号按钮150_60"),this.btn_upgrademe.sName="人物升级",this.btn_petfight=new r.default(l.default.xani_button),this.btn_petfight.InitButton("1号按钮150_60"),this.btn_petfight.sName="宠物出战",this.btn_petpoint=new r.default(l.default.xani_button),this.btn_petpoint.InitButton("1号按钮150_60"),this.btn_petpoint.sName="宠物加点",this.bInited=!0);var t=f.default.iTopIconOffX;if(this.btn_upgrade.Move(t,10,72,72),this.btn_upgrade.Draw(),l.default.xani_icon.DrawAnima(this.btn_upgrade.iX+48,2,"红点提示",0),o.default.gi().DrawText_2(this.btn_upgrade.iX+36,this.btn_upgrade.iY+71,"提升",4294833640,22,101,1,1,0,-2,-3,3,4279894016),this.bOpen){t+=6;var e=90,i=90,a=g.default.mp.GetUseingPet();c.default.me.rbs.nut>0&&(i+=65),c.default.me.rbs.iExp>=n.default.iUpgradeExp[c.default.me.rbs.iLev]&&(i+=65),g.default.mp.iPetCount>0&&null==a&&(i+=65),null!=a&&a.nut>0&&(i+=65),this.frame_type4("17号框20_20",t-50-5,e-5,160,i-e+5,20,20),c.default.me.rbs.nut>0&&(this.btn_addpoint.Move(t-50,e,150,60),this.btn_addpoint.Draw(),e+=65),c.default.me.rbs.iExp>=n.default.iUpgradeExp[c.default.me.rbs.iLev]&&(this.btn_upgrademe.Move(t-50,e,150,60),this.btn_upgrademe.Draw(),e+=65),g.default.mp.iPetCount>0&&null==a&&(this.btn_petfight.Move(t-50,e,150,60),this.btn_petfight.Draw(),e+=65),null!=a&&a.nut>0&&(this.btn_petpoint.Move(t-50,e,150,60),this.btn_petpoint.Draw(),e+=65)}f.default.iTopIconOffX+=90}}},{key:"frame_type4",value:function(t,e,i,a,n,s,r){o.default.gi().FillRect_2D(e,i,e+a,i+n,2147483648),a-s-s>0&&l.default.xani_frame.DrawAnimaEx(e+s-2,i,t,1,101,1*(a-s-s+4)/s,1,0,0,0),n-r-r>0&&l.default.xani_frame.DrawAnimaEx(e+a-s,i+r-2,t,3,101,1,1*(n-r-r+4)/r,0,0,0),a-s-s>0&&l.default.xani_frame.DrawAnimaEx(e+s-2,i+n-r,t,5,101,1*(a-s-s+4)/s,1,0,0,0),n-r-r>0&&l.default.xani_frame.DrawAnimaEx(e,i+r-2,t,7,101,1,1*(n-r-r+4)/r,0,0,0),l.default.xani_frame.DrawAnimaEx(e,i,t,0,101,1,1,0,0,0),l.default.xani_frame.DrawAnimaEx(e+a-1*s,i,t,2,101,1,1,0,0,0),l.default.xani_frame.DrawAnimaEx(e+a-1*s,i+n-1*r,t,4,101,1,1,0,0,0),l.default.xani_frame.DrawAnimaEx(e,i+n-1*r,t,6,101,1,1,0,0,0),l.default.xani_frame.DrawAnimaEx(e+a/2,i+1,t,8,101,1,1,0,0,0)}},{key:"ProcTouch",value:function(t,e,i){if(s.default.gi().vbk.mapdialog.bHideUI()||d.default.jq.bJQLock())return!1;if(c.default.me.rbs.iLev>=40)return!1;if(!this.bShow)return!1;if(!this.bInited)return!1;if(this.bOpen){var a=g.default.mp.GetUseingPet();if(c.default.me.rbs.nut>0&&this.btn_addpoint.ProcTouch(t,e,i))return this.btn_addpoint.bCheck()&&(u.default.pxe.RunXms("人物加点"),this.bOpen=!1),!0;if(c.default.me.rbs.iExp>=n.default.iUpgradeExp[c.default.me.rbs.iLev]&&this.btn_upgrademe.ProcTouch(t,e,i)){if(this.btn_upgrademe.bCheck()){var r=m.default.Open(0);r.Draw(),h.default.gi().SetGuideExt(r.btn_upgrade.iX,r.btn_upgrade.iY,r.btn_upgrade.iW,r.btn_upgrade.iH,-1,""),this.bOpen=!1}return!0}if(g.default.mp.iPetCount>0&&null==a&&this.btn_petfight.ProcTouch(t,e,i)){if(this.btn_petfight.bCheck())(o=_.default.Open()).Draw(),h.default.gi().SetGuideExt(o.btn_joinfight.iX,o.btn_joinfight.iY,o.btn_joinfight.iW,o.btn_joinfight.iH,-1,""),this.bOpen=!1;return!0}if(null!=a&&a.nut>0&&this.btn_petpoint.ProcTouch(t,e,i)){var o;if(this.btn_petpoint.bCheck())(o=_.default.Open()).Draw(),h.default.gi().SetGuideExt(o.btn_addpoint.iX,o.btn_addpoint.iY,o.btn_addpoint.iW,o.btn_addpoint.iH,-1,""),this.bOpen=!1;return!0}}return this.btn_upgrade.ProcTouch(t,e,i)?(this.btn_upgrade.bCheck()&&(this.btn_addpoint.SetNormal(),this.btn_upgrademe.SetNormal(),this.btn_petfight.SetNormal(),this.btn_petpoint.SetNormal(),this.bOpen=!0),!0):(this.bOpen=!1,!1)}}]),StrengthUpgrade}();i.default=p,p.su=new p},{"../../../../../config/GameData":4,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/xms/XmsEngine":40,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/gameing/Gameing":91,"../../../../../engtst/mgm/gameing/help/BeginersGuide":181,"../../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../engtst/mgm/gameing/me/pet/Pets":247,"../../../../../engtst/mgm/gameing/me/pet/PetsFrame":248,"../../../../../map/MapManager":286}],200:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GameData")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),l=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),f=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engine/xms/XmsEngine"))),h=(_interopRequireDefault(t("../../../../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../../../../engine/xms/first/X30_WORD")),_interopRequireDefault(t("../../../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),d=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),c=_interopRequireDefault(t("../../../../../engtst/mgm/MyAI")),m=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),g=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),y=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw")),w=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods")),S=_interopRequireDefault(t("./WeeklyActivity"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var x=function _ACTLIST(){_classCallCheck(this,_ACTLIST)},P=function _ACTPRICE(){_classCallCheck(this,_ACTPRICE)},v=function(t){function NewActivity(t){_classCallCheck(this,NewActivity);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(NewActivity.__proto__||Object.getPrototypeOf(NewActivity)).call(this));for(i.sKeyName=["青铜钥匙","白银钥匙","黄金钥匙"],i.iRoundSpeed=5,i.bwaiting=!1,i.iW=1130,i.iH=600,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.iPage=0,i.btn_close=new u.default(h.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_page=new Array(2),e=0;e<2;e++)i.btn_page[e]=new u.default(h.default.xani_nui2),i.btn_page[e].InitButton("右侧标签");for(i.i0Sort=0,i.btn0_sort=new Array(5),e=0;e<5;e++)i.btn0_sort[e]=new u.default(h.default.xani_button),i.btn0_sort[e].InitButton("选择按钮145_56");for(i.btn0_sort[0].sName="日常活动",i.btn0_sort[1].sName="定时活动",i.btn0_sort[2].sName="活动周历",i.btn0_sort[3].sName="幸运转盘",i.btn0_sort[4].sName="实力提升",i.btn_getact=new Array(6),e=0;e<6;e++)i.btn_getact[e]=new u.default(h.default.xani_button),i.btn_getact[e].bSingleButton=!0;for(i.btn_sign=new Array(31),i.pc_price=new Array(31),e=0;e<31;e++)i.btn_sign[e]=new u.default(h.default.xani_button),i.btn_sign[e].bSingleButton=!0;var a=f.default.pxe.FindMain("七国");for(i.pc_act=a.FindFirst("活动界面资料",5),i.btn0_go=new Array(32),i.btn0_detail=new Array(32),i.alist=new Array(32),i.aprice=new Array(32),e=0;e<32;e++)i.btn0_go[e]=new u.default(h.default.xani_button),i.btn0_go[e].InitButton("普通按钮100_55"),i.btn0_go[e].sName="前往",i.btn0_detail[e]=new u.default(h.default.xani_button),i.btn0_detail[e].bSingleButton=!0,i.alist[e]=new x,i.aprice[e]=new P;for(i.i0GoToNpcIdList=new Int32Array(32),i.pc_detail=new Array(32),i.sExtShow=new Array(32),i.b0LockScroll=!1,i.i0OffY=0,i.ishowdetail=-1,i.gd=new D.default,i.btn_extbuy=new u.default(h.default.xani_button),i.btn_extbuy.InitButton("普通按钮100_55"),i.btn_extbuy.sName="购买",i.btn_extsign=new u.default(h.default.xani_button),i.btn_extsign.InitButton("选择按钮145_56"),i.btn_extsign.sName="补签",i.iShowGet=-1,i.btn_gift=new u.default(h.default.xani_nui2),i.btn_gift.InitButton("礼包按钮"),i.btn_gift.sName="领  取",i.btn_watchprice=new Array(16),e=0;e<16;e++)i.btn_watchprice[e]=new u.default(h.default.xani_ui2),i.btn_watchprice[e].bSingleButton=!0;for(i.aa_point=h.default.xani_skills[0].InitAnimaWithName("物品突出",null),i.btn_lottery=new Array(3),i.iKeyCount=new Int32Array(3),e=0;e<3;e++)i.btn_lottery[e]=new u.default(h.default.xani_button),i.btn_lottery[e].InitButton("抽奖小按钮167_183");return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(NewActivity,o.default),a(NewActivity,[{key:"findactbyname",value:function(t){var e;for(e=0;e<this.iActCount;e++)if(this.alist[e].sName==t)return this.alist[e];return null}},{key:"lottery_startround",value:function(t){this.iLotteryResult=t-1,p.default.easymsg.Clear(),p.default.easymsg.bDisable=!0,NewActivity.iLotteryRound=NewActivity.iLotteryRound%16,NewActivity.iRoundDest=48+this.iLotteryResult,this.iRoundSpeed=1,this.iRoundDelay=this.iRoundSpeed}},{key:"draw_lottery",value:function(t,e){var i;this.iRoundDelay--,this.iRoundDelay<=0&&(NewActivity.iLotteryRound<NewActivity.iRoundDest?(NewActivity.iRoundDest-NewActivity.iLotteryRound<15&&this.iRoundSpeed++,NewActivity.iLotteryRound++):this.iLotteryResult>=0&&(this.iLotteryResult=-1,p.default.easymsg.bDisable=!1,this.bwaiting=!1),this.iRoundDelay=this.iRoundSpeed);var a,n,s,r,o=this.pc_act.FindClass("抽奖物品");o=o.pca.phead;var u,f,d=null,c=0,m=0;for(this.iCjCount=0;null!=o;)a=o.FindNumber("x"),n=o.FindNumber("y"),s=o.FindNumber("物品id"),r=o.FindWord("物品描述"),u=t+20+138*a.iNumber,f=e+20+98*n.iNumber,h.default.xani_frame.DrawAnima(u,f,"抽奖物品框119_85",0),h.default.xani_ngoods.DrawAnima_aa(u+19.5,f+2.5,h.default.de_goods.strValue(s.iNumber,-1,10),0),NewActivity.iLotteryRound%16==this.iCjCount&&g.default.frame_type2("黄色透明框a25_25",u,f,119,85,25,25),this.btn_watchprice[this.iCjCount].Move(u,f,119,85),this.ishowdetail==this.iCjCount&&(d=o,c=u,m=f),o=o.pdown,this.iCjCount++;for(i=0;i<3;i++)this.iKeyCount[i]=0;for(i=0;i<20;i++)w.default.gi().goods[2][i].iGid>0&&(386==w.default.gi().goods[2][i].iTid&&(this.iKeyCount[0]+=w.default.gi().goods[2][i].iCount),387==w.default.gi().goods[2][i].iTid&&(this.iKeyCount[1]+=w.default.gi().goods[2][i].iCount),388==w.default.gi().goods[2][i].iTid&&(this.iKeyCount[2]+=w.default.gi().goods[2][i].iCount));for(i=0;i<3;i++)u=t+20+138+182*i,f=e+20+98,this.btn_lottery[i].Move(u,f,167,183),this.btn_lottery[i].Draw(),h.default.xani_ngoods.DrawAnima_aa(u+83.5-40,f+91.5-40-30,this.sKeyName[i],0),l.default.gi().DrawText_2(u+83.5,f+91.5+40,""+this.iKeyCount[i],4294967040,30,101,1,1,0,-2,-2,3,4278190080);this.ishowdetail>=0&&null!=d&&(s=d.FindNumber("物品id"),null!=(r=d.FindWord("物品描述"))?y.default.new_DrawDetailEx1(s.iNumber,c,m,r.pword):(this.gd.SetAtt(0,s.iNumber,1,0,0,0,0,0,0,0,0),y.default.new_DrawDetail(this.gd,c,m,0)))}},{key:"draw_get",value:function(t){var e,i,a,n,r=0;e=(s.default.SCRW-465)/2,i=(s.default.SCRH-381)/2,h.default.xani_nui2.DrawAnima(e,i,"礼包背景框",0),this.aprice[t].iExp>0&&(a=e+60+r%2*190,n=i+100+r/2*100,h.default.xani_nui2.DrawAnima(a,n,"礼品格子",1),h.default.xani_ngoods.DrawAnima(a,n,"物品经验",0),l.default.gi().DrawTextEx(a+80,n+80,""+this.aprice[t].iExp,4294967295,20,101,1,1,0,-3,-3),h.default.xani_nui2.DrawAnima(a+80+20,n+11,"礼包文本框",0),l.default.gi().DrawTextEx(a+80+20+30,n+11+11,"经验",4294967295,20,101,1,1,0,-2,-2),h.default.xani_nui2.DrawAnima(a+80+20,n+45,"礼包文本框",0),l.default.gi().DrawTextEx(a+80+20+30,n+45+11,"x 1",4294967295,20,101,1,1,0,-2,-2),r++),this.aprice[t].iMoney>0&&(a=e+60+r%2*190,n=i+100+r/2*100,h.default.xani_nui2.DrawAnima(a,n,"礼品格子",1),h.default.xani_ngoods.DrawAnima(a,n,"物品钱",0),l.default.gi().DrawTextEx(a+80,n+80,""+this.aprice[t].iMoney,4294967295,20,101,1,1,0,-3,-3),h.default.xani_nui2.DrawAnima(a+80+20,n+11,"礼包文本框",0),l.default.gi().DrawTextEx(a+80+20+30,n+11+11,"金钱",4294967295,20,101,1,1,0,-2,-2),h.default.xani_nui2.DrawAnima(a+80+20,n+45,"礼包文本框",0),l.default.gi().DrawTextEx(a+80+20+30,n+45+11,"x 1",4294967295,20,101,1,1,0,-2,-2),r++),this.aprice[t].tid1>0&&this.aprice[t].tcount1>0&&(a=e+60+r%2*190,n=i+100+r/2*100,h.default.xani_nui2.DrawAnima(a,n,"礼品格子",1),h.default.xani_ngoods.DrawAnima_aa(a,n,h.default.de_goods.strValue(this.aprice[t].tid1,-1,10),0),h.default.xani_nui2.DrawAnima(a+80+20,n+11,"礼包文本框",0),l.default.gi().DrawTextEx(a+80+20+30,n+11+11,h.default.de_goods.strValue(this.aprice[t].tid1,-1,4),4294967295,20,101,1,1,0,-2,-2),h.default.xani_nui2.DrawAnima(a+80+20,n+45,"礼包文本框",0),l.default.gi().DrawTextEx(a+80+20+30,n+45+11,"x "+this.aprice[t].tcount1,4294967295,20,101,1,1,0,-2,-2),r++),this.aprice[t].tid2>0&&this.aprice[t].tcount2>0&&(a=e+60+r%2*190,n=i+100+r/2*100,h.default.xani_nui2.DrawAnima(a,n,"礼品格子",1),h.default.xani_ngoods.DrawAnima_aa(a,n,h.default.de_goods.strValue(this.aprice[t].tid2,-1,10),0),h.default.xani_nui2.DrawAnima(a+80+20,n+11,"礼包文本框",0),l.default.gi().DrawTextEx(a+80+20+30,n+11+11,h.default.de_goods.strValue(this.aprice[t].tid2,-1,4),4294967295,20,101,1,1,0,-2,-2),h.default.xani_nui2.DrawAnima(a+80+20,n+45,"礼包文本框",0),l.default.gi().DrawTextEx(a+80+20+30,n+45+11,"x "+this.aprice[t].tcount2,4294967295,20,101,1,1,0,-2,-2),r++),this.btn_gift.Move(e+165.5,i+381-44-40,134,44),this.btn_gift.Draw()}},{key:"Draw",value:function(){if(null==m.default.gi().FindStat(m.default.GS_WEEKLYACTIVITY)){var t;for(g.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"活","动"),t=0;t<2;t++)this.btn_page[t].Move(this.iX+this.iW-15,this.iY+40+130*t,50,130),this.iPage==t&&(this.btn_page[t].bMouseDown=!0),this.btn_page[t].Draw(),0==t?g.default.new_lableword4(this.iX+this.iW-15,this.iY+40+130*t,40,130,this.iPage==t,"日","常","活","动"):g.default.new_lableword2(this.iX+this.iW-15,this.iY+40+130*t,40,130,this.iPage==t,"签","到");switch(this.btn_close.Draw(),this.Draw_act(this.iX+35,this.iY+this.iH-90),this.iPage){case 0:this.Draw_0();break;case 1:this.Draw_1()}this.iShowGet>=0&&this.draw_get(this.iShowGet)}}},{key:"Draw_1",value:function(){var t,e,i,a,n,s,r,o;for(i=this.iX+30,a=this.iY+30,n=200,420,g.default.new_framein(i,a,n,420),l.default.gi().DrawTextEx(i+100,a+40,"最新动态",4278206039,30,101,1,1,0,-2,-2),i+=n+20,n=630,g.default.new_framein(i,a,n,420),this.iR0X=i,this.iR0Y=a,this.iR0W=n,this.iR0H=420,s=(s=this.pc_act.FindClass("签到奖励")).pca.phead,this.i0Count=0,l.default.gi().SetViewClip(i+20,a+20,i+n-20,a+420-20),h.default.sop(""+this.iSignCount);null!=s&&(r=s.FindNumber("物品id"),o=s.FindWord("描述"),t=i+25+this.i0Count%6*100,e=a+20+100*parseInt(this.i0Count/6)-this.i0OffY,h.default.xani_nui3.DrawAnima(i+25+this.i0Count%6*100,a+20+100*parseInt(this.i0Count/6)-this.i0OffY,"物品格子",0),h.default.xani_ngoods.DrawAnima_aa(i+25+this.i0Count%6*100,a+20+100*parseInt(this.i0Count/6)-this.i0OffY,h.default.de_goods.strValue(r.iNumber,0,10),0),this.i0Count<this.iSignCount?l.default.gi().FillRect_2D(t,e,t+80,e+80,2147483648):this.i0Count==this.iSignCount&&0==(b.default.me.iFlag[50]&1<<this.iTodayDay-1)&&(this.aa_point.Draw(t,e),this.aa_point.NextFrame()),this.ishowdetail==this.i0Count&&g.default.frame_type2("黄色透明框a25_25",t,e,80,80,25,25),this.pc_price[this.i0Count]=s,this.btn_sign[this.i0Count].Move(i+25+this.i0Count%6*100,a+20+100*parseInt(this.i0Count/6)-this.i0OffY,80,80),s=s.pdown,this.i0Count++,!(this.i0Count>=this.iMaxDay)););l.default.gi().NoClip(),this.i0OffH=100*parseInt((this.i0Count+5)/6)-420+40,this.i0OffH<0&&(this.i0OffH=0),i+=n+20,n=200,g.default.new_framein(i,a,n,420),b.default.me.iFlag[20]>0?this.iExtSignCount=5-b.default.me.iFlag[62]/1e4%10:this.iExtSignCount=0,this.iExtSignCount+=b.default.me.iFlag[62]/1e3%10,this.ishowdetail<0&&(this.iTodayDay-1)%6==1||this.ishowdetail>=0&&this.ishowdetail%6==1?(l.default.gi().DrawTextEx(i+100,a+40,"会员专属",4278206039,30,101,1,1,0,-2,-2),h.default.xani_nui3.DrawAnima(i+100-40,a+40+40,"物品格子",0),h.default.xani_ngoods.DrawAnima_aa(i+100-40,a+40+40,h.default.de_goods.strValue(118,0,10),0),l.default.gi().DrawTextEx(i+100,a+40+40+80+40,"签到额外获得",4278206039,25,101,1,1,0,-2,-2)):this.ishowdetail<0&&(this.iTodayDay-1)%6==3||this.ishowdetail>=0&&this.ishowdetail%6==3?(l.default.gi().DrawTextEx(i+100,a+40,"会员折扣",4278206039,30,101,1,1,0,-2,-2),h.default.xani_nui3.DrawAnima(i+100-40,a+40+40,"物品格子",0),h.default.xani_ngoods.DrawAnima_aa(i+100-40,a+40+40,h.default.de_goods.strValue(161,0,10),0),l.default.gi().DrawTextEx(i+100,a+40+40+80+40,"40元宝",4278206039,25,101,1,1,0,-2,-2),this.btn_extbuy.Move(i+50,a+40+40+80+40+25+20,100,55),this.btn_extbuy.Draw()):(_.default.gi().FormatEx("#c003e57会员拥有5次当月补签次数，连续签到七天可获得一次当月补签次数，每天只能补签一次",165,20,0,0,25),_.default.gi().Draw(i+20,a+20),l.default.gi().DrawTextEx(i+20,a+20+_.default.gi().iH+40,"累计签到"+this.iSignCount+"天",4278206039,20,101,1,1,0,0,-2),l.default.gi().DrawTextEx(i+20,a+20+_.default.gi().iH+40+40,"连续签到"+b.default.me.iFlag[62]%10+"天",4278206039,20,101,1,1,0,0,-2),l.default.gi().DrawTextEx(i+20,a+20+_.default.gi().iH+40+80,"剩余补签次数"+this.iExtSignCount+"次",4278206039,20,101,1,1,0,0,-2)),this.btn_extsign.Move(i+100-72.5,a+420-30-56,145,56),this.btn_extsign.Draw(),this.ishowdetail>=0&&(r=this.pc_price[this.ishowdetail].FindNumber("物品id"),null!=(o=this.pc_price[this.ishowdetail].FindWord("描述"))?y.default.new_DrawDetailEx1(r.iNumber,this.iX+30+220+25+this.ishowdetail%6*100,this.iY+30+20+100*parseInt(this.ishowdetail/6)-this.i0OffY,o.pword):(this.gd.SetAtt(0,r.iNumber,1,0,0,0,0,0,0,0,0),y.default.new_DrawDetail(this.gd,this.iX+30+220+25+this.ishowdetail%6*100,this.iY+30+20+100*parseInt(this.ishowdetail/6)-this.i0OffY,0)))}},{key:"Draw_act",value:function(t,e){var i,a,n=this.iW-150-6;for(l.default.gi().DrawText_2(t,e,"活跃度",4278206039,25,101,1,1,0,0,-2,1,4278190080),t+=80,g.default.frame_type1("活跃进度外框a20_24",t,e-12,this.iW-150,20),g.default.frame_type1("活跃进度内框a10_18",t+3,e-12+3,this.iActNumber*n/120,10),l.default.gi().DrawTextEx(t+n-5,e,""+this.iActNumber,4294967295,20,101,1,1,0,-3,-2),i=0;i<6;i++)a=t+3+n*(15*(i+1))/120,this.iActNumber>=15*(i+1)?h.default.xani_nui2.DrawAnima(a-50,e-50,"礼品包包",i):h.default.xani_nui2.DrawAnima(a-50,e-50,"礼品包包",6),this.btn_getact[i].Move(a-50,e-50,100,100),l.default.gi().DrawText_2(a,e+35,15*(i+1)+"活跃",4294967040,25,101,1,1,0,-2,0,3,4278190080),i<this.iActGetPoint&&h.default.xani_nui6.DrawAnima(a-50,e-25,"已领取",0)}},{key:"Draw_0_lable",value:function(t,e,i,a,n,s,r){g.default.frame_type1("活跃标签框a10_84",t,e,400,10),h.default.xani_frame.DrawAnima(t+5,e+5,"活跃图标框73_73",0),h.default.xani_icon.DrawAnima_aa(t+5,e+5,i,0),l.default.gi().DrawText_2(t+85,e+26,i,4294967040,30,101,1,1,0,0,-2,2,4278190080),l.default.gi().DrawTextEx(t+85,e+64,a+"   "+n,4294967295,18,101,1,1,0,0,-2),null!=s&&(s.Move(t+400-100-20,e+42-27.5,100,55),s.Draw()),r.Move(t+5,e+5,73,73)}},{key:"Draw_0",value:function(){var t,e,i,a,n,s,r,o,u,f,h,d;if(e=this.iX+30,i=this.iY+30,a=850,420,g.default.new_framein(e,i,a,420),this.iR0X=e,this.iR0Y=i,this.iR0W=a,this.iR0H=420,this.i0Count=0,0==this.i0Sort||1==this.i0Sort||4==this.i0Sort){if(0==this.i0Sort)n=this.pc_act.FindClass("日常活动列表");else if(1==this.i0Sort)n=this.pc_act.FindClass("定时活动列表");else{if(4!=this.i0Sort)return;n=this.pc_act.FindClass("实力提升")}for(n=n.pca.phead,l.default.gi().SetViewClip(e+20,i+20,e+a-20,i+420-20);null!=n;)n.FindNumber("开启等级").iNumber>b.default.me.rbs.iLev?n=n.pdown:(s=n.FindNumber("活跃上限"),r=n.FindWord("次数单位"),o=n.FindNumber("次数上限"),u=n.FindNumber("前往npcid"),d=this.findactbyname(n.sName),f=null!=s&&null!=d?"活跃 "+d.add+"/"+s.iNumber:"",null!=r&&null!=d?(h=r.pword+" "+d.proc+"/"+o.iNumber,this.sExtShow[this.i0Count]=d.proc+"/"+o.iNumber):(h="",this.sExtShow[this.i0Count]=""),null!=u&&(this.i0GoToNpcIdList[this.i0Count]=u.iNumber),this.Draw_0_lable(e+20+this.i0Count%2*410,i+25+100*parseInt(this.i0Count/2)-this.i0OffY,n.sName,f,h,null==u?null:this.btn0_go[this.i0Count],this.btn0_detail[this.i0Count]),this.pc_detail[this.i0Count]=n,n=n.pdown,this.i0Count++);l.default.gi().NoClip(),this.i0OffH=(this.i0Count+1)/2*100-420+40,this.i0OffH<0&&(this.i0OffH=0)}for(3==this.i0Sort&&this.draw_lottery(e,i),e+=a+20,a=200,g.default.new_framein(e,i,a,420),t=0;t<5;t++)this.btn0_sort[t].Move(e+27.5,i+30+75*t,145,56),this.i0Sort==t&&(this.btn0_sort[t].bMouseDown=!0),this.btn0_sort[t].Draw()}},{key:"ProcTouch",value:function(t,e,i){var a,o,u,l;if(this.iShowGet>=0)return 465,381,o=(s.default.SCRW-465)/2,u=(s.default.SCRH-381)/2,3!=t||r.default.bInRect(e,i,o,u,465,381)||(this.iShowGet=-1),this.btn_gift.ProcTouch(t,e,i)&&this.btn_gift.bCheck()&&(this.iActNumber<this.aprice[this.iShowGet].iNeed?p.default.easymsg.AddMessage("活跃度未达不能领取"):this.iShowGet<this.iActGetPoint?p.default.easymsg.AddMessage("此档奖励已领过"):this.iShowGet>this.iActGetPoint?p.default.easymsg.AddMessage("按顺序领取奖励"):d.default.gi().s_PromptActivity(1,this.iShowGet),this.iShowGet=-1),!0;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&m.default.gi().PopStat(1),!0;for(a=0;a<2;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&(this.iPage=a,this.i0OffY=0,this.ishowdetail=-1,NewActivity.iLotteryRound=NewActivity.iRoundDest);for(a=0;a<6;a++)if(this.btn_getact[a].ProcTouch(t,e,i))return this.btn_getact[a].bCheck()&&(this.iShowGet=a),!0;switch(this.iPage){case 0:for(a=0;a<5;a++)this.btn0_sort[a].ProcTouch(t,e,i)&&this.btn0_sort[a].bCheck()&&(2==a?S.default.Open(this.pc_act.FindClass("周历")):(this.i0Sort=a,this.i0OffY=0,this.ishowdetail=-1,NewActivity.iLotteryRound=NewActivity.iRoundDest));switch(this.i0Sort){case 0:case 1:case 4:if(this.b0LockScroll)return 2==t&&(this.i0OffY+=this.i0LockY-i,this.i0LockY=i,this.i0OffY<0&&(this.i0OffY=0),this.i0OffY>this.i0OffH&&(this.i0OffY=this.i0OffH)),3==t&&(this.b0LockScroll=!1),!0;if(r.default.bInRect(e,i,this.iR0X,this.iR0Y,this.iR0W,this.iR0H)){for(a=0;a<this.i0Count;a++){if(this.btn0_go[a].ProcTouch(t,e,i))return this.btn0_go[a].bCheck()&&null!=(l=this.pc_detail[a].FindNumber("前往npcid"))&&(m.default.gi().PopStat(1),1e4==l.iNumber?c.default.gi().FindNpc(n.default.iMasterids[b.default.me.rbs.iSchoolId],!0,!0):c.default.gi().FindNpc(l.iNumber,!0,!0)),!0;if(this.btn0_detail[a].ProcTouch(t,e,i))return this.btn0_detail[a].bCheck()&&ShowActivityDetail.Open(this.pc_detail[a],this.i0Sort,this.sExtShow[a]),!0}1==t&&(this.b0LockScroll=!0,this.i0LockY=i)}break;case 3:for(this.ishowdetail=-1,a=0;a<this.iCjCount;a++)if(this.btn_watchprice[a].ProcTouch(t,e,i))return this.btn_watchprice[a].bCheck()&&(this.ishowdetail=a),!0;if(!this.bwaiting)for(a=0;a<3;a++)if(this.btn_lottery[a].ProcTouch(t,e,i))return this.btn_lottery[a].bCheck()&&(1==a&&(b.default.me.iFlag[63]>>8&15)>=5?p.default.easymsg.AddMessage("今日已使用过5次白银钥匙"):2==a&&(b.default.me.iFlag[63]>>12&15)>=5?p.default.easymsg.AddMessage("今日已使用过5次黄金钥匙"):this.iKeyCount[a]>0?(d.default.gi().s_PromptActivity(6,a),this.iLotteryResult=-1,this.bwaiting=!0):p.default.easymsg.AddMessage("背包中没有"+this.sKeyName[a])),!0}break;case 1:if((this.ishowdetail<0&&(this.iTodayDay-1)%6==3||this.ishowdetail>=0&&this.ishowdetail%6==3)&&this.btn_extbuy.ProcTouch(t,e,i))return this.btn_extbuy.bCheck()&&(0!=(8192&b.default.me.iFlag[24])?p.default.easymsg.AddMessage("折扣商品只能购买一次"):d.default.gi().s_PromptActivity(4,0)),!0;if(this.btn_extsign.ProcTouch(t,e,i))return this.btn_extsign.bCheck()&&(this.iExtSignCount<=0?p.default.easymsg.AddMessage("当前没有剩余补签次数"):0!=(16384&b.default.me.iFlag[24])?p.default.easymsg.AddMessage("每天只能补签一次"):d.default.gi().s_PromptActivity(3,0)),!0;if(3==t&&(this.ishowdetail=-1),this.b0LockScroll)if(3==t)this.b0LockScroll=!1;else if(Math.abs(this.i0LockY-i)>=10&&(this.b0Scrolling=!0),this.b0Scrolling){for(2==t&&(this.i0OffY+=this.i0LockY-i,this.i0LockY=i,this.i0OffY<0&&(this.i0OffY=0),this.i0OffY>this.i0OffH&&(this.i0OffY=this.i0OffH)),a=0;a<this.i0Count;a++)this.btn_sign[a].bMouseDown=!1;return!0}if(r.default.bInRect(e,i,this.iR0X,this.iR0Y,this.iR0W,this.iR0H)){for(a=0;a<this.i0Count;a++)this.btn_sign[a].ProcTouch(t,e,i)&&this.btn_sign[a].bCheck()&&(a<this.iSignCount||(a==this.iSignCount&&0==(b.default.me.iFlag[50]&1<<this.iTodayDay-1)?d.default.gi().s_PromptActivity(2,0):this.ishowdetail=a));1==t&&(this.b0LockScroll=!0,this.b0Scrolling=!1,this.i0LockY=i)}}return!0}}]),NewActivity}();i.default=v,v.iLotteryRound=0,v.iRoundDest=0,v.iOpenFlag=0,v.Open=function(t){var e;m.default.gi().iXStat==m.default.GS_LOADING1&&m.default.gi().PopStat(1),e=m.default.gi().iXStat==m.default.GS_PROMPTACTIVITY?m.default.gi().LastStat(0):m.default.gi().PushStat(m.default.GS_PROMPTACTIVITY);for(var i=0;0!=t.GetNextByte();)e.alist[i].sName=t.GetNextString(),e.alist[i].proc=t.GetNextByte(),e.alist[i].max=t.GetNextByte(),e.alist[i].add=t.GetNextByte(),i++;for(e.iActCount=i,h.default.sop("actcount"+i),e.iActNumber=t.GetNextShort(),e.iActGetPoint=t.GetNextByte(),e.iActPriceCount=t.GetNextByte(),i=0;i<e.iActPriceCount;i++)e.aprice[i].iNeed=t.GetNextShort(),e.aprice[i].iExp=t.GetNextInt(),e.aprice[i].iMoney=t.GetNextInt(),e.aprice[i].tid1=t.GetNextShort(),e.aprice[i].tcount1=t.GetNextByte(),e.aprice[i].tid2=t.GetNextShort(),e.aprice[i].tcount2=t.GetNextByte();for(e.iSignCount=0,i=0;i<31;i++)0!=(b.default.me.iFlag[50]&1<<i)&&e.iSignCount++;e.iTodayDay=t.GetNextByte(),e.iMaxDay=t.GetNextByte(),e.iWeekDay=t.GetNextByte(),1==v.iOpenFlag&&(v.iOpenFlag=0,e.i0Sort=3)}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engine/xms/XmsEngine":40,"../../../../../engine/xms/first/X10_NUMBER":56,"../../../../../engine/xms/first/X30_WORD":58,"../../../../../engine/xms/first/X40_CLASS":59,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/MyAI":68,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"./WeeklyActivity":203}],201:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../map/MapManager")),s=_interopRequireDefault(t("../../../../../mgm/newmainmenu/StarEffect")),r=_interopRequireDefault(t("../../../../../config/GameData")),o=_interopRequireDefault(t("../../../../../config/GmConfig")),u=_interopRequireDefault(t("../../../../../config/XDefine")),l=_interopRequireDefault(t("../../../../../engine/BaseClass")),f=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1"))),h=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),d=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),c=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),m=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),g=_interopRequireDefault(t("../../../../../engtst/mgm/MyAI")),_=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),b=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),D=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),y=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage")),w=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),S=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/MyAttFrame")),x=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/team/MyTeam"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var P=function _ALIST(){_classCallCheck(this,_ALIST)},v=function _APRICE(){_classCallCheck(this,_APRICE)},R=function(t){function PromptActivity(t){_classCallCheck(this,PromptActivity);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PromptActivity.__proto__||Object.getPrototypeOf(PromptActivity)).call(this));for(i.MAXALIST=15,i.pani=t,i.pm3f=t.pm3f,i.iW=1100,i.iH=600,i.iX=(o.default.SCRW-i.iW)/2,i.iY=(o.default.SCRH-i.iH)/2,i.iPage=0,i.btn_close=new h.default(c.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_go=new h.default(c.default.xani_nui2),i.btn_go.InitButton("按钮2"),i.btn_go.sName="前往",i.iPoint=0,i.btn_list=new Array(20),e=0;e<20;e++)i.btn_list[e]=new h.default(c.default.xani_nui2);for(i.InitBtnAnima(),i.se=new s.default,i.se.Init3(0,0,50,50),i.btn_get=new Array(3),e=0;e<3;e++)i.btn_get[e]=new h.default(c.default.xani_nui2),i.btn_get[e].bSingleButton=!0;for(i.iShowGet=-1,i.btn_gift=new h.default(c.default.xani_nui2),i.btn_gift.InitButton("礼包按钮"),i.btn_gift.sName="领  取",i.btn_page=new Array(4),e=0;e<4;e++)i.btn_page[e]=new h.default(c.default.xani_nui2),i.btn_page[e].InitButton("右侧标签");for(i.iPoint2=0,i.iCount2=0,i.btn_week=new Array(7),e=0;e<7;e++)i.btn_week[e]=new h.default(c.default.xani_nui2),i.btn_week[e].InitButton("按钮2");for(i.btn_week[0].sName="星期日",i.btn_week[1].sName="星期一",i.btn_week[2].sName="星期二",i.btn_week[3].sName="星期三",i.btn_week[4].sName="星期四",i.btn_week[5].sName="星期五",i.btn_week[6].sName="星期六",i.iWeek=0,i.btn_cont=new Array(7),e=0;e<7;e++)i.btn_cont[e]=new h.default(c.default.xani_nui2),i.btn_cont[e].InitButton("按钮2");for(i.btn_cont[0].sName="游戏背景",i.btn_cont[1].sName="新手玩法",i.btn_cont[2].sName="高手进阶",i.btn_cont[3].sName="门派介绍",i.btn_qd=new h.default(c.default.xani_nui2),i.btn_qd.InitButton("按钮4"),i.btn_qd.sName="签  到",i.btn_vip=new h.default(c.default.xani_nui2),i.btn_vip.InitButton("按钮3"),w.default.me.iFlag[40]<=0?i.btn_vip.sName="开通vip":i.btn_vip.sName="续费vip",i.alist=new Array(i.MAXALIST),i.btn_prompt=new Array(i.MAXALIST),i.aprice=new Array(i.MAXALIST),e=0;e<i.MAXALIST;e++)i.alist[e]=new P,i.btn_prompt[e]=new f.default(c.default.xani_ui3),i.btn_prompt[e].InitButton("统一按钮1"),i.btn_prompt[e].sName="提 示",i.aprice[e]=new v;return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PromptActivity,l.default),a(PromptActivity,[{key:"InitBtnAnima",value:function(){var t;if(0==this.iPage)for(this.iCount=12,t=0;t<this.iCount;t++)this.btn_list[t].InitButton(PromptActivity._ADetail[this.iPage][t][0]);if(1==this.iPage&&(this.iCount2=0,2==this.iWeek&&(this.btn_list[this.iCount2].InitButton(PromptActivity._ADetail[this.iPage][0][0]),this.btn_list[this.iCount2].exts[0]=0,this.iCount2++),3==this.iWeek&&(this.btn_list[this.iCount2].InitButton(PromptActivity._ADetail[this.iPage][1][0]),this.btn_list[this.iCount2].exts[0]=1,this.iCount2++),6!=this.iWeek&&7!=this.iWeek&&0!=this.iWeek||(this.btn_list[this.iCount2].InitButton(PromptActivity._ADetail[this.iPage][2][0]),this.btn_list[this.iCount2].exts[0]=2,this.iCount2++),5!=this.iWeek&&6!=this.iWeek&&7!=this.iWeek&&0!=this.iWeek||(this.btn_list[this.iCount2].InitButton(PromptActivity._ADetail[this.iPage][3][0]),this.btn_list[this.iCount2].exts[0]=3,this.iCount2++),this.btn_list[this.iCount2].InitButton(PromptActivity._ADetail[this.iPage][4][0]),this.btn_list[this.iCount2].exts[0]=4,this.iCount2++,this.btn_list[this.iCount2].InitButton(PromptActivity._ADetail[this.iPage][5][0]),this.btn_list[this.iCount2].exts[0]=5,this.iCount2++,this.btn_list[this.iCount2].InitButton(PromptActivity._ADetail[this.iPage][6][0]),this.btn_list[this.iCount2].exts[0]=6,this.iCount2++,this.btn_list[this.iCount2].InitButton(PromptActivity._ADetail[this.iPage][7][0]),this.btn_list[this.iCount2].exts[0]=7,this.iCount2++),3==this.iPage)if(0==iBtn3);else if(1==iBtn3)for(this.iCount=9,t=0;t<this.iCount;t++)this.btn_list[t].InitButton(PromptActivity._ADetail[2][t][0]);else if(2==iBtn3)for(this.iCount=12,t=0;t<this.iCount;t++)this.btn_list[t].InitButton(PromptActivity._ADetail[3][t][0]);else if(3==iBtn3)for(this.iCount=9,t=0;t<this.iCount;t++)this.btn_list[t].InitButton(PromptActivity._ADetail[4][t][0])}},{key:"Draw_0",value:function(){var t,e,i,a,n,s,r,o,u;for(s=this.iX+30,r=this.iY+30,o=840,u=300,p.default.new_framein(s,r,o,u),r=this.iY+300+30+15,u=220,p.default.new_framein(s,r,o,u),s=this.iX+840+30+15,r=this.iY+30,o=180,u=535,p.default.new_framein(s,r,o,u),t=0;t<this.iCount;t++)s=this.iX+30+20+t%7*117,r=this.iY+30+18+t/7*140,this.btn_list[t].Move(s,r,100,100),this.btn_list[t].Draw(),c.default.xani_nui2.DrawAnima(s+50-39,r+100+3,"活跃进度框",0),this.alist[t].add>0?(d.default.gi().DrawTextEx(s+50-39+5,r+100+3+15,this.alist[t].proc+"/"+this.alist[t].max,4294967295,18,101,1,1,0,-1,-2),d.default.gi().DrawTextEx(s+50+39-5,r+100+3+15,"+"+this.alist[t].add,4278255360,18,101,1,1,0,-3,-2)):d.default.gi().DrawTextEx(s+50,r+100+3+15,this.alist[t].proc+"/"+this.alist[t].max,4294967295,18,101,1,1,0,-2,-2),this.iPoint==t&&(b.default.gi().FormatEx("#c003e57"+PromptActivity._ADetail[this.iPage][t][1],800,30,0,0,40),b.default.gi().Draw(this.iX+30+20,this.iY+300+30+15+20),this.se.Logic(),this.se.Draw(s+50,r+50));for(0!=this.iPoint&&1!=this.iPoint&&2!=this.iPoint&&3!=this.iPoint&&4!=this.iPoint&&6!=this.iPoint&&7!=this.iPoint&&9!=this.iPoint&&10!=this.iPoint&&11!=this.iPoint||(this.btn_go.Move(this.iX+30+840-20-145,this.iY+300+30+15+220-20-56,145,56),this.btn_go.Draw()),s=this.iX+840+30+15,r=this.iY+30,d.default.gi().DrawText_2(s+90,this.iY+60,"今日活跃度",4282245601,25,101,1,1,0,-2,-2,4,4278206039),d.default.gi().DrawText_2(s+90,this.iY+95,""+this.iNumber,4294967040,30,101,1,1,0,-2,-2,4,4278206039),i=this.iAPPoint+2>=this.iAPCount?this.iAPPoint+2-this.iAPCount:0,t=0;t<3;t++)e=t+this.iAPPoint-1-i,this.btn_get[t].SetCheckRect(-1,-1,-1,-1),e>=0&&e<this.iAPCount&&(a=s+90,n=r+90+163*t,d.default.gi().DrawTextEx(a,n-5,"活跃度达到"+this.aprice[e].iNeed+"可领",4278206039,20,101,1,1,0,-2,0),this.btn_get[t].SetCheckRect(s+43,r+110+163*t,94,94),this.btn_get[t].exts[0]=e,c.default.xani_nui2.DrawAnima(s+43+7,r+110+163*t+7,"礼品格子",0),t<2&&c.default.xani_nui2.DrawAnima(s+43,r+110+163*t,"礼品箭头",0),c.default.xani_nui2.DrawAnima(s+43,r+110+163*t,"礼品包包",this.iNumber<this.aprice[e].iNeed?6:e),this.iAPPoint>e&&c.default.xani_nui2.DrawAnima(s+43,r+110+163*t,"已领标记",0))}},{key:"draw_get",value:function(t){var e,i,a,n,s=0;e=(o.default.SCRW-465)/2,i=(o.default.SCRH-381)/2,c.default.xani_nui2.DrawAnima(e,i,"礼包背景框",0),this.aprice[t].iExp>0&&(a=e+60+s%2*190,n=i+100+s/2*100,c.default.xani_nui2.DrawAnima(a,n,"礼品格子",1),c.default.xani_ngoods.DrawAnima(a,n,"物品经验",0),d.default.gi().DrawTextEx(a+80,n+80,""+this.aprice[t].iExp,4294967295,20,101,1,1,0,-3,-3),c.default.xani_nui2.DrawAnima(a+80+20,n+11,"礼包文本框",0),d.default.gi().DrawTextEx(a+80+20+30,n+11+11,"经验",4294967295,20,101,1,1,0,-2,-2),c.default.xani_nui2.DrawAnima(a+80+20,n+45,"礼包文本框",0),d.default.gi().DrawTextEx(a+80+20+30,n+45+11,"x 1",4294967295,20,101,1,1,0,-2,-2),s++),this.aprice[t].iMoney>0&&(a=e+60+s%2*190,n=i+100+s/2*100,c.default.xani_nui2.DrawAnima(a,n,"礼品格子",1),c.default.xani_ngoods.DrawAnima(a,n,"物品钱",0),d.default.gi().DrawTextEx(a+80,n+80,""+this.aprice[t].iMoney,4294967295,20,101,1,1,0,-3,-3),c.default.xani_nui2.DrawAnima(a+80+20,n+11,"礼包文本框",0),d.default.gi().DrawTextEx(a+80+20+30,n+11+11,"金钱",4294967295,20,101,1,1,0,-2,-2),c.default.xani_nui2.DrawAnima(a+80+20,n+45,"礼包文本框",0),d.default.gi().DrawTextEx(a+80+20+30,n+45+11,"x 1",4294967295,20,101,1,1,0,-2,-2),s++),this.aprice[t].tid1>0&&this.aprice[t].tcount1>0&&(a=e+60+s%2*190,n=i+100+s/2*100,c.default.xani_nui2.DrawAnima(a,n,"礼品格子",1),c.default.xani_ngoods.DrawAnima_aa(a,n,c.default.de_goods.strValue(this.aprice[t].tid1,-1,10),0),c.default.xani_nui2.DrawAnima(a+80+20,n+11,"礼包文本框",0),d.default.gi().DrawTextEx(a+80+20+30,n+11+11,c.default.de_goods.strValue(this.aprice[t].tid1,-1,4),4294967295,20,101,1,1,0,-2,-2),c.default.xani_nui2.DrawAnima(a+80+20,n+45,"礼包文本框",0),d.default.gi().DrawTextEx(a+80+20+30,n+45+11,"x "+this.aprice[t].tcount1,4294967295,20,101,1,1,0,-2,-2),s++),this.aprice[t].tid2>0&&this.aprice[t].tcount2>0&&(a=e+60+s%2*190,n=i+100+s/2*100,c.default.xani_nui2.DrawAnima(a,n,"礼品格子",1),c.default.xani_ngoods.DrawAnima_aa(a,n,c.default.de_goods.strValue(this.aprice[t].tid2,-1,10),0),c.default.xani_nui2.DrawAnima(a+80+20,n+11,"礼包文本框",0),d.default.gi().DrawTextEx(a+80+20+30,n+11+11,c.default.de_goods.strValue(this.aprice[t].tid2,-1,4),4294967295,20,101,1,1,0,-2,-2),c.default.xani_nui2.DrawAnima(a+80+20,n+45,"礼包文本框",0),d.default.gi().DrawTextEx(a+80+20+30,n+45+11,"x "+this.aprice[t].tcount2,4294967295,20,101,1,1,0,-2,-2),s++),this.btn_gift.Move(e+165.5,i+381-44-40,134,44),this.btn_gift.Draw()}},{key:"Draw_1",value:function(){var t,e,i,a,n;for(e=this.iX+30,i=this.iY+30,a=840,n=300,p.default.new_framein(e,i,a,n),i=this.iY+300+30+15,n=220,p.default.new_framein(e,i,a,n),e=this.iX+840+30+15,i=this.iY+30,a=180,n=535,p.default.new_framein(e,i,a,n),t=0;t<7;t++)this.btn_week[t].Move(this.iX+903,this.iY+52+73*t,145,56),this.iWeek==t&&(this.btn_week[t].bMouseDown=!0),this.btn_week[t].Draw();for(t=0;t<this.iCount2;t++)e=this.iX+30+20+t%7*117,i=this.iY+30+30+t/7*140,this.btn_list[t].Move(e,i,100,100),this.btn_list[t].Draw(),this.iPoint2==t&&(b.default.gi().FormatEx("#c003e57"+PromptActivity._ADetail[this.iPage][this.btn_list[t].exts[0]][1],800,30,0,0,40),b.default.gi().Draw(this.iX+30+20,this.iY+300+30+15+20),this.se.Logic(),this.se.Draw(e+50,i+50))}},{key:"Draw_3",value:function(){var t,e,i,a,n;for(e=this.iX+840+30+15,i=this.iY+30,a=180,n=535,p.default.new_framein(e,i,a,n),t=0;t<4;t++)this.btn_cont[t].Move(this.iX+903,this.iY+52+73*t,145,56),iBtn3==t&&(this.btn_cont[t].bMouseDown=!0),this.btn_cont[t].Draw();if(0==iBtn3)e=this.iX+30,i=this.iY+30,a=840,n=535,p.default.new_framein(e,i,a,n),d.default.gi().DrawText_2(e+a/2,i+40,"游戏背景",4294967040,50,101,1,1,0,-2,-2,3,4278190080),b.default.gi().FormatEx("# # #c000000春秋战国期间，七雄争霸，豪杰雄起。谋臣运筹帷幄，将士浴血沙场。战争此起彼伏，局势变化跌宕。#e# # 时代赋予三界风云人物神圣使命去掌控国家生死存亡、左右民族荣辱兴衰。#e# # 人族、魔族、仙族率领九大门派弟子卷入了这场声势浩大的征战之中。#e# # 岁月长河涤荡两千余载，那些璀璨的智慧和生命依然熠熠发光，依然动人心魄......",800,30,0,0,45),b.default.gi().Draw(e+20,i+80-15);else if(1==iBtn3||2==iBtn3||3==iBtn3)for(e=this.iX+30,i=this.iY+30,a=840,n=260,p.default.new_framein(e,i,a,n),i=this.iY+260+30+15,n=260,p.default.new_framein(e,i,a,n),t=0;t<this.iCount;t++)e=this.iX+30+20+t%7*117,i=this.iY+30+18+t/7*120,this.btn_list[t].Move(e,i,100,100),this.btn_list[t].Draw(),this.iPoint3==t&&(b.default.gi().FormatEx("#c003e57"+PromptActivity._ADetail[iBtn3+1][t][1],800,30,0,0,40),b.default.gi().Draw(this.iX+30+20,this.iY+260+30+15+10),this.se.Logic(),this.se.Draw(e+50,i+50))}},{key:"Draw_2",value:function(){var t,e,i,a,n,s,o,u,l;for(s=this.iX+30,o=this.iY+30,u=360,l=250,p.default.new_framein(s,o,u,l),c.default.xani_nui2.DrawAnima(s+(u-80)/2,o+5,"月份底",0),d.default.gi().DrawText_2(s+u/2,o+5+16,r.default.sBigNum[this.iMonth]+"月",4282245605,24,101,1,1,0,-2,-2,3,4278206039),e=this.iTodayWeek-this.iTodayDay;;)if(e>=7)e-=7;else{if(!(e<0))break;e+=7}for(t=0;t<7;t++)d.default.gi().DrawTextEx(s+45*t+45,o+55,r.default.sWeek[t],4278206039,20,101,1,1,0,-2,-2);for(this.qdtime=0,t=1;t<=this.iMaxDay;t++)a=s+(i=t+e)%7*45+45,n=o+85+i/7*27-(6==e?27:0),t==this.iTodayDay&&d.default.gi().FillRect_2D(a-15,n-15,a+15,n+15,805306368),d.default.gi().DrawTextEx(a,n,""+t,4278190080,20,101,1,1,0,-2,-2),0!=(w.default.me.iFlag[50]&1<<t-1)&&(c.default.xani_nui2.DrawAnima(a-16,n-15,"签过圈",0),this.qdtime++);for(s+=375,u=380,p.default.new_framein(s,o,u,l),d.default.gi().DrawText_2(s+30,o+42,"当前活跃",4282245605,30,101,1,1,0,0,-2,3,4278206039),d.default.gi().DrawText_2(s+30+120+5,o+42,""+this.iNumber,4294967040,50,101,1,1,0,0,-2,3,4278206039),d.default.gi().DrawTextEx(s+30+120+5+50+10,o+42,"达到20可签到",4278206039,24,101,1,1,0,0,-2),a=s+35,n=o+85,c.default.xani_nui2.DrawAnima(a,n,"礼品格子",0),c.default.xani_ngoods.DrawAnima(a,n,"物品经验",0),d.default.gi().DrawTextEx(a+80,n+80,""+4*w.default.me.rbs.iLev*80*2,4294967295,20,101,1,1,0,-3,-3),a+=115,c.default.xani_nui2.DrawAnima(a,n,"礼品格子",0),c.default.xani_ngoods.DrawAnima(a,n,"物品钱",0),d.default.gi().DrawTextEx(a+80,n+80,""+4*w.default.me.rbs.iLev*80,4294967295,20,101,1,1,0,-3,-3),a+=115,c.default.xani_nui2.DrawAnima(a,n,"礼品格子",0),c.default.xani_ngoods.DrawAnima(a,n,"双倍经验卡",0),d.default.gi().DrawTextEx(a+80,n+80,"x1",4294967295,20,101,1,1,0,-3,-3),0!=(w.default.me.iFlag[50]&1<<this.iTodayDay-1)?d.default.gi().DrawTextEx(s+u/2,o+l-42.5,"已签到",4278206039,40,101,1,1,0,-2,-2):(this.btn_qd.Move(s+(u-141)/2,o+l-42.5-24.5,141,49),this.btn_qd.Draw()),s+=395,u=270,p.default.new_framein(s,o,u,l),t=0;t<7&&!(this.qdtime<PromptActivity._SPECIALDAY[t]);t++);for(t<7&&(1==(e=PromptActivity._SPECIALDAY[t]-this.qdtime)&&0==(w.default.me.iFlag[50]&1<<this.iTodayDay-1)?d.default.gi().DrawTextEx(s+u/2,o+42,"本次签到可获得",4278206039,24,101,1,1,0,-2,-2):d.default.gi().DrawTextEx(s+u/2,o+42,"继续签到"+e+"次后可获得",4278206039,24,101,1,1,0,-2,-2),a=s+35,n=o+85,c.default.xani_nui2.DrawAnima(a,n,"礼品格子",0),0==t?c.default.xani_ngoods.DrawAnima(a,n,"传送符",0):1==t?c.default.xani_ngoods.DrawAnima(a,n,"仙灵果",0):2==t?c.default.xani_ngoods.DrawAnima(a,n,"替身木偶",0):3==t?c.default.xani_ngoods.DrawAnima(a,n,"装备制造图纸",0):4==t?c.default.xani_ngoods.DrawAnima(a,n,"青霜丹",0):5==t?c.default.xani_ngoods.DrawAnima(a,n,"高级仙灵果",0):6==t&&c.default.xani_ngoods.DrawAnima(a,n,"装备制造图纸",0),a+=115,c.default.xani_nui2.DrawAnima(a,n,"礼品格子",0),c.default.xani_ngoods.DrawAnima(a,n,"三倍经验卡",0),c.default.xani_nui2.DrawAnima(a,n,"会员专属",0),this.btn_vip.Move(s+(u-141)/2,o+l-42.5-24.5,141,49),this.btn_vip.Draw()),s=this.iX+30,o+=265,u=this.iW-60,l=280,p.default.new_framein(s,o,u,l),e=18,t=0;t<7;t++)this.DrawSpecial(s+e+(e+128)*t,o+15,t)}},{key:"DrawSpecial",value:function(t,e,i){var a,n;null==PromptActivity.aa_specialframe&&(PromptActivity.aa_specialframe=c.default.xani_nui2.InitAnimaWithName("特殊奖励框",null)),null==PromptActivity.aa_specialframe2&&(PromptActivity.aa_specialframe2=c.default.xani_nui2.InitAnimaWithName("特殊奖励框2",null)),a=128,n=250,this.qdtime<PromptActivity._SPECIALDAY[i]?(d.default.gi().FillRect_2D(t+5,e+5,t+a-10,e+n-10,4281963410),PromptActivity.aa_specialframe.iFrame=0,PromptActivity.aa_specialframe.Draw(t,e),PromptActivity.aa_specialframe.iFrame=1,PromptActivity.aa_specialframe.Draw(t+a,e),PromptActivity.aa_specialframe.iFrame=2,PromptActivity.aa_specialframe.Draw(t+a,e+n),PromptActivity.aa_specialframe.iFrame=3,PromptActivity.aa_specialframe.Draw(t,e+n),PromptActivity.aa_specialframe.iFrame=4,PromptActivity.aa_specialframe.DrawEx(t+20,e,101,4.4,1,0,0,0),PromptActivity.aa_specialframe.iFrame=5,PromptActivity.aa_specialframe.DrawEx(t,e+20,101,1,10.5,0,0,0),PromptActivity.aa_specialframe.iFrame=6,PromptActivity.aa_specialframe.DrawEx(t+a,e+20,101,1,10.5,0,0,0),PromptActivity.aa_specialframe.iFrame=7,PromptActivity.aa_specialframe.DrawEx(t+20,e+n,101,4.4,1,0,0,0),d.default.gi().DrawText_2(t+64,e+20,"签到"+PromptActivity._SPECIALDAY[i]+"次获得",4294967040,20,101,1,1,0,-2,-2,3,4278190080)):(d.default.gi().FillRect_2D(t+5,e+5,t+a-10,e+n-10,4282151834),PromptActivity.aa_specialframe2.iFrame=0,PromptActivity.aa_specialframe2.Draw(t,e),PromptActivity.aa_specialframe2.iFrame=1,PromptActivity.aa_specialframe2.Draw(t+a,e),PromptActivity.aa_specialframe2.iFrame=2,PromptActivity.aa_specialframe2.Draw(t+a,e+n),PromptActivity.aa_specialframe2.iFrame=3,PromptActivity.aa_specialframe2.Draw(t,e+n),PromptActivity.aa_specialframe2.iFrame=4,PromptActivity.aa_specialframe2.DrawEx(t+20,e,101,4.4,1,0,0,0),PromptActivity.aa_specialframe2.iFrame=5,PromptActivity.aa_specialframe2.DrawEx(t,e+20,101,1,10.5,0,0,0),PromptActivity.aa_specialframe2.iFrame=6,PromptActivity.aa_specialframe2.DrawEx(t+a,e+20,101,1,10.5,0,0,0),PromptActivity.aa_specialframe2.iFrame=7,PromptActivity.aa_specialframe2.DrawEx(t+20,e+n,101,4.4,1,0,0,0),d.default.gi().DrawText_2(t+64,e+20,"已获得",4294967040,24,101,1,1,0,-2,-2,3,4278190080)),c.default.xani_nui2.DrawAnima(t+24,e+45,"礼品格子",0),0==i?c.default.xani_ngoods.DrawAnima(t+24,e+45,"传送符",0):1==i?c.default.xani_ngoods.DrawAnima(t+24,e+45,"仙灵果",0):2==i?c.default.xani_ngoods.DrawAnima(t+24,e+45,"替身木偶",0):3==i?c.default.xani_ngoods.DrawAnima(t+24,e+45,"装备制造图纸",0):4==i?c.default.xani_ngoods.DrawAnima(t+24,e+45,"青霜丹",0):5==i?c.default.xani_ngoods.DrawAnima(t+24,e+45,"高级仙灵果",0):6==i&&c.default.xani_ngoods.DrawAnima(t+24,e+45,"装备制造图纸",0),c.default.xani_nui2.DrawAnima(t+24,e+150,"礼品格子",0),c.default.xani_ngoods.DrawAnima(t+24,e+150,"三倍经验卡",0),c.default.xani_nui2.DrawAnima(t+24,e+150,"会员专属",0)}},{key:"Draw",value:function(){var t;for(p.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"活","动"),t=0;t<4;t++)this.btn_page[t].Move(this.iX+this.iW-15,this.iY+40+130*t,50,130),this.iPage==t&&(this.btn_page[t].bMouseDown=!0),this.btn_page[t].Draw(),p.default.new_lableword2(this.iX+this.iW-15,this.iY+40+130*t,40,130,this.iPage==t,PromptActivity._ALable[t][0],PromptActivity._ALable[t][1]);switch(this.btn_close.Move(this.iX+this.iW-35,this.iY-25,60,60),this.btn_close.Draw(),this.iPage){case 0:this.Draw_0();break;case 1:this.Draw_1();break;case 2:this.Draw_2();break;case 3:this.Draw_3()}this.iShowGet>=0&&this.iShowGet<this.iAPCount&&this.draw_get(this.iShowGet)}},{key:"ProcTouch",value:function(t,e,i){var a,s,r;if(this.iShowGet>=0)return 465,381,s=(o.default.SCRW-465)/2,r=(o.default.SCRH-381)/2,3!=t||u.default.bInRect(e,i,s,r,465,381)||(this.iShowGet=-1),this.btn_gift.ProcTouch(t,e,i)&&this.btn_gift.bCheck()&&(this.iNumber<this.aprice[this.iShowGet].iNeed?D.default.easymsg.AddMessage("活跃度未达不能领取"):this.iShowGet<this.iAPPoint?D.default.easymsg.AddMessage("此档奖励已领过"):m.default.gi().s_PromptActivity(1,this.iShowGet),this.iShowGet=-1),!0;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&_.default.gi().PopStat(1),!0;for(a=0;a<4;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&(this.iPage=a,this.iWeek=this.iTodayWeek,iBtn3=0,this.iPoint3=0,this.InitBtnAnima());if(0==this.iPage){for(this.btn_go.ProcTouch(t,e,i)&&this.btn_go.bCheck()&&(0==this.iPoint&&(w.default.me.rbs.iLev<10?y.default.fm.Open("升到10级，加入门派后才能领取师门任务。#e完成引导剧情即可升到10级以上"):0==w.default.me.rbs.iSchoolId?y.default.fm.Open("自动寻路前往门派....#e加入门派后才能领取师门任务"):x.default.bNoTeam()?w.default.me.rbs.iSchoolId>0&&(m.default.gi().s_UseSkill(0,0,0,0,0,0,0),_.default.gi().PopStat(1),n.default.gi().iMapChangeing=100,y.default.fm.Open("点击右下角“快捷”按钮，使用“遁地术”即可快速回到门派")):D.default.easymsg.AddMessage("队伍中不能使用遁地术")),1==this.iPoint&&(g.default.gi().FindNpc(20,!0,!0),_.default.gi().PopStat(1)),2==this.iPoint&&(g.default.gi().FindNpc(56,!0,!0),_.default.gi().PopStat(1)),3==this.iPoint&&(g.default.gi().FindNpc(35,!0,!0),_.default.gi().PopStat(1)),4==this.iPoint&&(g.default.gi().FindNpc(62,!0,!0),_.default.gi().PopStat(1)),6==this.iPoint&&(g.default.gi().FindNpc(74,!0,!0),_.default.gi().PopStat(1)),7==this.iPoint&&(g.default.gi().FindNpc(34,!0,!0),y.default.fm.Open("程镖头每过一段时间会改变位置，要在临淄四处找找哦"),_.default.gi().PopStat(1)),9!=this.iPoint&&10!=this.iPoint&&11!=this.iPoint||(g.default.gi().FindNpc(76,!0,!0),_.default.gi().PopStat(1))),a=0;a<this.iCount;a++)if(this.btn_list[a].ProcTouch(t,e,i))return this.btn_list[a].bCheck()&&(this.iPoint=a),!0;for(a=0;a<3;a++)if(this.btn_get[a].ProcTouch(t,e,i))return this.btn_get[a].bCheck()&&(this.iShowGet=this.btn_get[a].exts[0]),!0}else if(1==this.iPage){for(a=0;a<7;a++)this.btn_week[a].ProcTouch(t,e,i)&&this.btn_week[a].bCheck()&&(this.iPoint2=0,this.iWeek=a,this.InitBtnAnima());for(a=0;a<this.iCount2;a++)if(this.btn_list[a].ProcTouch(t,e,i))return this.btn_list[a].bCheck()&&(this.iPoint2=a),!0}else if(2==this.iPage){if(0==(w.default.me.iFlag[50]&1<<this.iTodayDay-1)&&this.btn_qd.ProcTouch(t,e,i))return this.btn_qd.bCheck()&&(0!=(w.default.me.iFlag[50]&1<<this.iTodayDay-1)?D.default.easymsg.AddMessage("今日已签到过"):m.default.gi().s_GetCodeReward(5,"")),!0;if(this.btn_vip.ProcTouch(t,e,i))return this.btn_vip.bCheck()&&(_.default.gi().PopStat(1),S.default.Open(3)),!0}else if(3==this.iPage){for(a=0;a<4;a++)this.btn_cont[a].ProcTouch(t,e,i)&&this.btn_cont[a].bCheck()&&(this.iPoint3=0,iBtn3=a,this.InitBtnAnima());if(1==iBtn3||2==iBtn3||3==iBtn3)for(a=0;a<this.iCount;a++)if(this.btn_list[a].ProcTouch(t,e,i))return this.btn_list[a].bCheck()&&(this.iPoint3=a),!0}return!1}}]),PromptActivity}();i.default=R,R._ADetail=[[["师门任务","人物等级>=10级#e10级加入门派后，找门派师傅领取任务，每天的前两轮（会员三轮）任务获得双倍奖励。"],["为民除害","人物等级>=10级#e在[西阳城守卫]处领取，任务完成后会获得大量的经验奖励。"],["每日赛跑","人物等级>=20级#e在[临淄城]的[田忌]处领取，完成可获得大量经验和金钱奖励，并获得一个三级草药。每天前十名更能额外获得道具奖励。#e任务可自动寻路完成"],["护法任务","人物等级>=20级#e在[咸阳]的[商鞅]处领取任务，完成获得大量的经验和金钱，10次为一轮，完成每轮的第十次任务可获得制作装备的材料。"],["追捕强盗","人物等级>=20级#e可以在[郢城]的[栾千盛]处领取追捕强盗任务，要求至少3人组队才能领取，完成获取经验金钱奖励，10次为一轮，第10次队长必定获得装备制造图纸，其他队员有几率获得道具奖励。"],["擂台切磋","在西阳城中间的擂台，跟其他玩家切磋一下，不管输赢都会获得2点活跃哦。"],["手艺任务","在郢城的铁匠接取任务，完成任务后会获得大量的经验和金钱，以及高熟练的打造手艺！"],["押镖任务","人物等级>=20级#e可前往[临淄城]找[程镖头]领取押镖任务，完成获得大量金钱奖励，并有一定几率获取阵法书，还有可能获得红包（#cff0000里面有200元宝哦#o）。"],["消灭山贼","人物等级>=30级#e每天整点，在随机野外地图刷出10只山贼，至少3人组队才能与山贼战斗，打败山贼获得大量的经验和金钱奖励，并有较大几率获得藏宝图。"],["帮派青龙","人物等级>=20级#e在[郢城]的[帮派总管]处加入帮派，进入帮派领地，在帮派的领地里面去找青龙堂总管，领取任务，完成任务可获得大量的经验、金钱和帮贡"],["帮派玄武","人物等级>=20级#e在帮派的领地里面去找玄武堂总管，领取任务，完成任务可获得大量的经验、金钱和帮贡（帮贡可在学院点帮派修炼）"],["帮派朱雀","人物等级>=20级#e在帮派的领地里面去找朱雀堂总管，领取任务，完成任务可获得大量的经验、金钱和帮贡，在第10次并能获取丹方，是炼丹的必备品。"]],[["门派闯关","每周四20:00点在[咸阳]或[临淄]的[门派活动使者]处领取任务，然后根据任务挑战门派护卫。每闯过一关都有丰厚的奖励，闯关速度最快的队伍更有高等级稀有宝石领取。"],["保卫西阳","每周一20:00点在大禹水道，平原山陵，函谷关，太行山四个地图刷新怪物向西阳城进攻，玩家阻挡怪物，阻止怪物进入西阳城，打败怪物会获得丰厚的奖励，保卫西阳城成功，在西阳城更有稀有宝箱出现。"],["比武大会","每周五中午12点~周六中午12点，玩家可以在[咸阳]的[比武接引人]报名，周六和周日下午13点~15点之间分别进行两场比武，比武获胜方可领取宝箱，即使失败也有其他丰厚奖励"],["帮派之战","每周五，周六，周日的19点~20点在[咸阳]的[帮战接引先锋]处进入帮战场地（帮主需提前报名），获胜帮派的成员将会获得100点帮贡和大量经验，并在帮战场地内刷出大量宝箱"],["封印叔叔","在挖宝时，有一定几率挖出妖怪叔叔，玩家组队去封印妖怪叔叔，会获得稀有的宝石和大量的经验金钱。"],["挑战嚣张","每天系统会在城市中刷新出4种嚣张妖怪（有点嚣张、比较嚣张、很嚣张、太嚣张）每种怪物每天可挑战一次，挑战成功，有几率获取丰厚的奖励（如高级宠物技能包）"],["战队竞技","在[咸阳]的[神威将军]处创建战队后，战队队长可以挑战比自己排名高的战队，挑战胜利可以提升战队排名。排名越靠前，战队每日声望增长越多"],["跑环","玩家在郢城的吉祥处领取跑环任务，完成跑环任务可获得相应等级的装备图纸。"]],[["师门任务","人物等级>=10级#e10级加入门派后，找门派师傅领取任务，每天的前两轮（会员三轮）任务获得双倍奖励。"],["为民除害","人物等级>=10级#e在[西阳城守卫]处领取，任务完成后会获得大量的经验奖励。"],["每日赛跑","人物等级>=10级#e在[临淄城]的[田忌]处领取，完成获得大量经验和金钱奖励，并获得一个三级草药。每天前十名更能额外获得道具奖励。#e任务可自动寻路完成"],["世界抢答","人物等级>=10级#e每隔一段时间，系统会发出一道题目，可在世界频道回答，最先答对的两名玩家各获得一颗宝石，并从前二十名答对的玩家中抽取4名给予66666铜币奖励"],["智者答题","无等级要求#e在各城市，每隔一段时间会随机出现一个智者，第一个答对智者问题的人可获得经验和金钱奖励，并有一定几率获得一颗宝石"],["押镖任务","人物等级>=20级#e可前往[临淄城]找[程镖头]领取押镖任务，完成获得大量金钱奖励，并有一定几率获取阵法书，还有可能获得红包（#cff0000里面有200元宝哦#o）。"],["追捕强盗","人物等级>=20级#e可以在[郢城]的[栾千盛]处领取追捕强盗任务，要求至少3人组队才能领取，完成获取经验金钱奖励，10次为一轮，第10次队长必定获得装备制造图纸，其他队员有几率获得道具奖励。"],["护法任务","人物等级>=20级#e在[咸阳]的[商鞅]处领取任务，完成获得大量的经验和金钱，10次为一轮，完成每轮的第十次任务可获得制作装备的材料。"],["帮派任务","人物等级>=20级#e在[郢城]的[帮派总管]处加入帮派，进入帮派领地，在帮派领地内可领取各种帮派任务，完成获得经验、金钱和帮贡，不同任务还有额外奖励"]],[["消灭山贼","人物等级>=30级#e每天整点，在随机野外地图刷出10只山贼，至少3人组队才能与山贼战斗，打败山贼获得大量的经验和金钱奖励，并有较大几率获得藏宝图。"],["封印叔叔","在挖宝时，有一定几率挖出妖怪叔叔，玩家组队去封印妖怪叔叔，会获得稀有的宝石和大量的经验金钱。"],["挑战嚣张","每天系统会在城市中刷新出4种嚣张妖怪（有点嚣张、比较嚣张、很嚣张、太嚣张）每种怪物每天可挑战一次，挑战成功，有几率获取丰厚的奖励（如高级宠物技能包）"],["门派闯关","每周二20:00点在[咸阳]或[临淄]的[门派活动使者]处领取任务，然后根据任务挑战门派护卫。每闯过一关都有丰厚的奖励，闯关速度最快的队伍更有高等级稀有宝石领取。"],["保卫西阳","每周三20:00点在大禹水道，平原山陵，函谷关，太行山四个地图刷新怪物向西阳城进攻，玩家阻挡怪物，阻止怪物进入西阳城，打败怪物会获得丰厚的奖励，保卫西阳城成功，在西阳城更有稀有宝箱出现。"],["比武大会","每周五中午12点~周六中午12点，玩家可以在[咸阳]的[比武接引人]报名，周六和周日下午13点~15点之间分别进行两场比武，比武获胜方可领取宝箱，即使失败也有其他丰厚奖励"],["帮派之战","每周五，周六，周日的19点~20点在[咸阳]的[帮战接引先锋]处进入帮战场地（帮主需提前报名），获胜帮派的成员将会获得100点帮贡和大量经验，并在帮战场地内刷出大量宝箱"],["战队竞技","在[咸阳]的[神威将军]处创建战队后，战队队长可以挑战比自己排名高的战队，挑战胜利可以提升战队排名。排名越靠前，战队每日声望增长越多"],["战队秘境","战队队长可在[咸阳]的[神威将军]处开启秘境，需要消耗战队声望，战队秘境里掉落大量的稀有道具，以及宠物进阶所必须的封印兽魂"],["副本挑战","人物等级>=40级#e在[咸阳]的[副本官]处创建自己的副本，也可申请加入其他玩家创建的副本。副本会掉落大量的稀有物品道具。"],["跑环","人物等级>=50级#e在[郢城]的[吉祥]处领取跑环任务，完成跑环任务可获得大量经验快速升级，每50环还可获得相应等级的装备图纸和手艺。"],["师徒任务","在[临淄]的[慎到]处拜师或收徒，师徒二人组队在慎到处领取师徒任务，任务会给与大量的经验和金钱奖励。徒弟出师后，师傅可获得宠物修炼积分"]],[["剑侠居","要求种族：人族#e门派特色：物理攻击型，具有超高物理输出、点杀能力。 #e推荐加点：5力、4力1敏、4力1体。#e●剑侠居算是最热门的一个门派，容易上手，输出可观，是练级不可缺少的一员，相对的装备也比较贵，后期的剑侠居，拥有较高的暴击率，在竞技玩法中更是点杀的一大利器。"],["茅棚坞","要求种族：人族#e门派特色：辅助型，具有高速度和强大的封印能力。 #e推荐加点：3敏2体、2敏3体、2敏2体1耐。#e●引以为傲的是速度，同样配置的情况下，先出手的绝对是茅棚，速度决定了竞技玩法的主动权，轮轴术也能很好的利用在卡敏战术中，迷雾让己方的胜率几率更大化，练级时，一个奇谋也能加快脚步。"],["庐医崖","要求种族：人族#e门派特色：辅助型、具有强大的加血和救人技能。#e推荐加点：3体2耐、2体2耐1法、2体2敏1耐。#e●作为七国里唯一的纯奶妈，具有强大的加血技能和救人技能，是各种高端任务、活动，竞技玩法不可缺少的一员。"],["溶洞","要求种族：魔族#e门派特色：法术攻击型，具有最高法系伤害。#e推荐加点：5法、4法1体#e●输出比封神高，但是目标数量比封神少，总伤害算起来反而不如封神了，不过做为七国的两大法系门派，溶洞更注重于多手段控制，相比封神来说没那么单调。"],["鬼谷","要求种族：魔族#e门派特色：辅助型，具有强大的封印和解封技能。#e推荐加点：3敏2体、2敏3体。#e●作为封系，鬼谷最大的特点就是可以为己方解封，还有增加封印几率的增益，在竞技玩法中也是一大强将。"],["武安阁","要求种族：魔族#e门派特色：物理攻击型、具有强大的物理攻击能力。#e推荐加点：5力、4力1敏、4力1体。#e●两大物理伤害的武安阁，点杀能力一点都不比剑侠居低，乱舞后还不用休息，单缺点就是太消耗蓝，续航能力不足。在竞技玩法和练级中，与剑侠居有同等的地位。"],["封神台","要求种族：仙族#e门派特点：法术伤害型、具有强大群秒技能#e推荐加点：5法、4法1体#e●两大法系之一，练级最受欢迎的门派，当然你要有一定的装备，不然小心免费回城。七国里的怪物理攻击较高，所以很多玩家都注重于物理防御，导致在竞技玩法中，法系的输出也相当的可观。"],["仙人洞","要求种族：仙族#e门派特点：辅助攻击型，具有固定伤害和持续恢复，以及各种增益。#e推荐加点：3体2耐、2体2耐1速#e●在前期，玩家伤害普遍不高，血量也低的时候，仙人洞的固定伤害就是一大利器，又肉又能输出，是前期练级最重要的一员。"],["神女峰","要求种族：仙族#e门派特点：辅助攻击型，具有单体高伤、复活、持续蓝恢复、封印#e推荐加点：4力1体、3力2法(攻击型)、3体2耐(辅助型)#e●神女是又能输出又能复活又能封的门派，绝对可以省下奶妈与控制的位置，多加一个输出，大大加快练级速度。"]],[["人物升级",""],["装备打造",""],["修炼提升",""],["宠物进阶",""],["坐骑养成",""]],[["辅助技能",""],["剧情技能",""],["家园种植",""]]],R.Open=function(t){var e;_.default.gi().iXStat==_.default.GS_LOADING1&&_.default.gi().PopStat(1),e=_.default.gi().iXStat==_.default.GS_PROMPTACTIVITY?_.default.gi().LastStat(0):_.default.gi().PushStat(_.default.GS_PROMPTACTIVITY);for(var i=0;0!=t.GetNextByte();)e.alist[i].sName=t.GetNextString(),e.alist[i].proc=t.GetNextByte(),e.alist[i].max=t.GetNextByte(),e.alist[i].add=t.GetNextByte(),e.alist[i].sDetail=t.GetNextString(),i++;for(e.iACount=i,e.iNumber=t.GetNextShort(),e.iAPPoint=t.GetNextByte(),e.iAPCount=t.GetNextByte(),i=0;i<e.iAPCount;i++)e.aprice[i].iNeed=t.GetNextShort(),e.aprice[i].iExp=t.GetNextInt(),e.aprice[i].iMoney=t.GetNextInt(),e.aprice[i].tid1=t.GetNextShort(),e.aprice[i].tcount1=t.GetNextByte(),e.aprice[i].tid2=t.GetNextShort(),e.aprice[i].tcount2=t.GetNextByte();e.iTodayWeek=t.GetNextByte(),e.iTodayDay=t.GetNextByte(),e.iMaxDay=t.GetNextByte(),e.iMonth=t.GetNextByte()},R._SPECIALDAY=[1,3,7,10,15,20,28],R._SPECIALTID=[],R.aa_specialframe=null,R.aa_specialframe2=null,R._ALable=[["活","跃"],["活","动"],["签","到"],["玩","法"]]},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/MyAI":68,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../../../map/MapManager":286,"../../../../../mgm/newmainmenu/StarEffect":311}],202:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../../../../engine/xms/first/X30_WORD")),_interopRequireDefault(t("../../../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),c=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function ShowActivityDetail(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ShowActivityDetail);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ShowActivityDetail.__proto__||Object.getPrototypeOf(ShowActivityDetail)).call(this));e.iW=650,e.iH=400,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.pc_price=new Array(8),e.btn_price=new Array(8);for(var i=0;i<8;i++)e.btn_price[i]=new o.default(l.default.xani_ui),e.btn_price[i].bSingleButton=!0;return e.ishowdetail=-1,e.gd=new c.default,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ShowActivityDetail,r.default),a(ShowActivityDetail,[{key:"Draw",value:function(){var t,e,i,a,s,r,o;t=this.pc_show.FindClass("详细信息"),h.default.frame_type4("半透明内容框a50_50",this.iX,this.iY,this.iW,this.iH,50,50),l.default.xani_frame.DrawAnima(this.iX+40,this.iY+40,"活跃图标框73_73",0),null==(o=this.pc_show.FindWord("活动名称"))?(l.default.xani_icon.DrawAnima_aa(this.iX+40,this.iY+40,this.pc_show.sName,0),u.default.gi().DrawText_2(this.iX+150,this.iY+55,this.pc_show.sName,4294967040,30,101,1,1,0,0,-2,2,4278190080)):(l.default.xani_icon.DrawAnima_aa(this.iX+40,this.iY+40,o.pword,0),u.default.gi().DrawText_2(this.iX+150,this.iY+55,o.pword,4294967040,30,101,1,1,0,0,-2,2,4278190080));var f=130;if(0==this.iType||1==this.iType){for(u.default.gi().DrawTextEx(this.iX+150,this.iY+50+40,this.sExtShow,4294967295,20,101,1,1,0,0,-2),u.default.gi().DrawTextEx(this.iX+40,this.iY+f,"活动时间：",4294967295,20,101,1,1,0,0,0),i=t.FindWord("活动时间"),u.default.gi().DrawTextEx(this.iX+150,this.iY+f,i.pword,4294967295,20,101,1,1,0,0,0),f+=30,null==(a=t.FindWord("限制单位"))?u.default.gi().DrawTextEx(this.iX+40,this.iY+f,"等级限制：",4294967295,20,101,1,1,0,0,0):u.default.gi().DrawTextEx(this.iX+40,this.iY+f,a.pword+"：",4294967295,20,101,1,1,0,0,0),i=t.FindWord("等级限制"),u.default.gi().DrawTextEx(this.iX+150,this.iY+f,i.pword,4294967295,20,101,1,1,0,0,0),f+=30,u.default.gi().DrawTextEx(this.iX+40,this.iY+f,"任务形式：",4294967295,20,101,1,1,0,0,0),i=t.FindWord("任务形式"),u.default.gi().DrawTextEx(this.iX+150,this.iY+f,i.pword,4294967295,20,101,1,1,0,0,0),f+=30,u.default.gi().DrawTextEx(this.iX+40,this.iY+f,"任务介绍：",4294967295,20,101,1,1,0,0,0),i=t.FindWord("任务介绍"),d.default.gi().FormatEx(i.pword,425,20,0,0,25),d.default.gi().Draw(this.iX+150,this.iY+f),f+=d.default.gi().iH+10,null!=(e=(e=t.FindClass("任务奖励")).pca.phead)?u.default.gi().DrawTextEx(this.iX+40,this.iY+f,"任务奖励：",4294967295,20,101,1,1,0,0,0):f-=100,this.iPriceCount=0;null!=e;)s=e.FindNumber("物品id"),r=e.FindWord("物品介绍"),l.default.xani_nui3.DrawAnima(this.iX+150+100*this.iPriceCount,this.iY+f,"物品格子",0),l.default.xani_ngoods.DrawAnima_aa(this.iX+150+100*this.iPriceCount,this.iY+f,l.default.de_goods.strValue(s.iNumber,0,10),0),this.pc_price[this.iPriceCount]=e,this.btn_price[this.iPriceCount].Move(this.iX+160+100*this.iPriceCount,this.iY+f,80,80),this.iPriceCount++,e=e.pdown;this.ishowdetail>=0&&(s=this.pc_price[this.ishowdetail].FindNumber("物品id"),null!=(r=this.pc_price[this.ishowdetail].FindWord("物品介绍"))?m.default.new_DrawDetailEx1(s.iNumber,this.iX+150+100*this.ishowdetail,this.iY+f,r.pword):(this.gd.SetAtt(0,s.iNumber,1,0,0,0,0,0,0,0,0),m.default.new_DrawDetail(this.gd,this.iX+150+100*this.ishowdetail,this.iY+f,0))),f+=100}else if(4==this.iType)for(e=t.pca.phead;null!=e;)o=e.FindWord("小标题"),r=e.FindWord("详细内容"),null!=o&&(u.default.gi().DrawTextEx(this.iX+40,this.iY+f,o.pword,4294967295,20,101,1,1,0,0,0),f+=30),null!=r&&(d.default.gi().Format(r.pword,this.iW-80,20),d.default.gi().Draw(this.iX+40,this.iY+f),f+=d.default.gi().iH+10),e=e.pdown;this.iH<f+20&&(this.iH=f+20),this.iY=(n.default.SCRH-this.iH)/2}},{key:"ProcTouch",value:function(t,e,i){var a;for(this.ishowdetail=-1,a=0;a<this.iPriceCount;a++)this.btn_price[a].ProcTouch(t,e,i)&&this.btn_price[a].bCheck()&&(this.ishowdetail=a);return 3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||f.default.gi().PopStat(1),!1}}]),ShowActivityDetail}();i.default=g,g.Open=function(t,e,i){var a=f.default.gi().PushStat(f.default.GS_SHOWACTIVITYDETAIL);a.pc_show=t,a.iType=e,a.sExtShow=i}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engine/xms/first/X10_NUMBER":56,"../../../../../engine/xms/first/X30_WORD":58,"../../../../../engine/xms/first/X40_CLASS":59,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218}],203:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),o=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engine/xms/first/X30_WORD")),_interopRequireDefault(t("../../../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),u=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),l=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),f=_interopRequireDefault(t("../../../../../engtst/mgm/frame/UIList"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function WeeklyActivity(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,WeeklyActivity);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(WeeklyActivity.__proto__||Object.getPrototypeOf(WeeklyActivity)).call(this));return e.titles=["时间","星期日","星期一","星期二","星期三","星期四","星期五","星期六"],e.iW=1170,e.iH=440,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.ui_list=new f.default(0,8,1080,350),e.ui_list.SetTitle(0,"活动时间",170,!1),e.ui_list.SetTitle(1,"星期日",130,!0),e.ui_list.SetTitle(2,"星期一",130,!0),e.ui_list.SetTitle(3,"星期二",130,!0),e.ui_list.SetTitle(4,"星期三",130,!0),e.ui_list.SetTitle(5,"星期四",130,!0),e.ui_list.SetTitle(6,"星期五",130,!0),e.ui_list.SetTitle(7,"星期六",130,!0),e.ui_list.iRowHeight=50,e.btn_close=new r.default(o.default.xani_nui2),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(WeeklyActivity,s.default),a(WeeklyActivity,[{key:"Draw",value:function(){var t,e,i,a=0,n=this.pc_weekly.pca.phead;l.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"周","历"),this.btn_close.Draw();var s=this.ui_list.iCheckPoint,r=this.ui_list.iCheckX;for(this.ui_list.iCheckPoint=-1,this.ui_list.iLockPoint=-1,this.ui_list.BeginDraw(this.iX+45,this.iY+45);null!=n;){for(t=0;t<this.titles.length;t++)0==t?null!=(i=n.FindWord(this.titles[t]))&&this.ui_list.DrawUnit(t,a,i.pword):null!=(e=n.FindClass(this.titles[t]))&&null!=(i=e.FindWord("活动名称"))&&(this.ui_list.DrawUnit(t,a,i.pword),s==a&&t==r&&ShowActivityDetail.Open(e,0,""));n=n.pdown,a++}this.ui_list.FinishDraw()}},{key:"ProcTouch",value:function(t,e,i){return this.ui_list.ProcTouch(t,e,i),!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&u.default.gi().PopStat(1),!0)}}]),WeeklyActivity}();i.default=h,h.Open=function(t){u.default.gi().PushStat(u.default.GS_WEEKLYACTIVITY).pc_weekly=t}},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/XAnima":30,"../../../../../engine/xms/first/X30_WORD":58,"../../../../../engine/xms/first/X40_CLASS":59,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/UIList":80}],204:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=(_interopRequireDefault(t("../../../../../config/XDefine")),_interopRequireDefault(t("../../../../../engine/BaseClass"))),r=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton"))),o=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),u=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),l=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),f=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),d=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function NoviceCheckAnswer(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NoviceCheckAnswer);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(NoviceCheckAnswer.__proto__||Object.getPrototypeOf(NoviceCheckAnswer)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=400,e.iH=300,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_yes=new r.default(o.default.xani_ui),e.btn_yes.InitButton("统一中按钮2"),e.btn_yes.sName="解决",e.btn_no=new r.default(o.default.xani_ui),e.btn_no.InitButton("统一中按钮3"),e.btn_no.sName="未解决",e.btn_ts=new r.default(o.default.xani_ui),e.btn_ts.InitButton("统一中按钮2"),e.btn_ts.sName="投诉",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(NoviceCheckAnswer,s.default),a(NoviceCheckAnswer,[{key:"Draw",value:function(){h.default.gi().Format("您提的问题:"+this.sQDetail+"#e#e"+this.sAName+"的回答:"+this.sADetail+"#e#e如果对回答不满意，或者有不和谐文字，点击投诉",this.iW-20,20),this.iH=h.default.gi().iH+20+60,f.default.Frame1_BR(this.iX,this.iY,this.iW,this.iH),h.default.gi().Draw(this.iX+10,this.iY+10),this.btn_yes.Move(this.iX+10,this.iY+this.iH-50,70,40),this.btn_yes.Draw(),this.btn_no.Move(this.iX+this.iW/2-50,this.iY+this.iH-50,100,40),this.btn_no.Draw(),this.btn_ts.Move(this.iX+this.iW-80,this.iY+this.iH-50,70,40),this.btn_ts.Draw()}},{key:"ProcTouch",value:function(t,e,i){return this.btn_yes.ProcTouch(t,e,i)&&this.btn_yes.bCheck()&&(u.default.gi().s_NoviceHelp(4,d.default.me.iRid,this.iQSid,""),l.default.gi().PopStat(1)),this.btn_no.ProcTouch(t,e,i)&&this.btn_no.bCheck()&&(u.default.gi().s_NoviceHelp(5,d.default.me.iRid,this.iQSid,""),l.default.gi().PopStat(1)),this.btn_ts.ProcTouch(t,e,i)&&this.btn_ts.bCheck()&&(u.default.gi().s_NoviceHelp(6,d.default.me.iRid,this.iQSid,""),l.default.gi().PopStat(1)),!1}}]),NoviceCheckAnswer}();i.default=c,c.getanswer=function(t){l.default.gi().LastStatType(0)!=l.default.GS_NOVICECHECKANSWER&&l.default.gi().PushStat(l.default.GS_NOVICECHECKANSWER);var e=l.default.gi().LastStat(0);e.iQSid=t.GetNextInt(),e.sQDetail=t.GetNextString(),e.iARid=t.GetNextInt(),e.sAName=t.GetNextString(),e.sADetail=t.GetNextString()}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/gameing/me/GmMe":211}],205:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GameData")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=(_interopRequireDefault(t("../../../../../config/XDefine")),_interopRequireDefault(t("../../../../../engine/BaseClass"))),o=_interopRequireDefault(t("../../../../../engine/control/XButton")),u=_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),l=(_interopRequireDefault(t("../../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),f=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString"));_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function NoviceHelp(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NoviceHelp);var e,i,a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(NoviceHelp.__proto__||Object.getPrototypeOf(NoviceHelp)).call(this));for(a.pani=t,a.pm3f=t.pm3f,a.iW=800,a.iH=480,a.iX=(s.default.SCRW-a.iW)/2,a.iY=(s.default.SCRH-a.iH)/2,a.btn_help=new Array(10),e=0;e<10;e++)a.btn_help[e]=new o.default(f.default.xani_ui3),a.btn_help[e].InitButton("统一按钮2"),a.btn_help[e].Move(a.iX+50,a.iY+45+50*e,128,32),a.btn_help[e].iNameSize=25;for(a.btn_help[0].sName="游戏介绍",a.btn_help[1].sName="新手玩法",a.btn_help[2].sName="门派介绍",a.btn_help[3].sName="日常活动",a.btn_help[4].sName="游戏公告",a.btn_help[5].sName="新手提问",a.btn_help[6].sName="高手解答",a.btn_btns=new Array(2),e=0;e<2;e++)for(a.btn_btns[e]=new Array(6),i=0;i<6;i++)a.btn_btns[e][i]=new o.default(f.default.xani_ui),a.btn_btns[e][i].Move(a.iX+20+130*e,a.iY+20+60*i,130,60),a.btn_btns[e][i].bSingleButton=!0;for(a.btn_btns[0][0].sName="新手提问",a.btn_btns[1][0].sName="高手解答",a.btn_btns[0][1].sName="0~10级",a.btn_btns[1][1].sName="基本操作",a.btn_btns[0][2].sName="10~20级",a.btn_btns[1][2].sName="门派介绍",a.btn_btns[0][3].sName="20~30级",a.btn_btns[0][4].sName="30~40级",a.btn_close=new u.default(f.default.xani_ui3),a.btn_close.InitButton("统一关闭按钮"),a.btn_close.Move(a.iX+748,a.iY,60,60),a.ip1=0,a.ip2=0,a.btn_rmx=new Array(3),a.btn_mp=new Array(3),e=0;e<3;e++)a.btn_rmx[e]=new u.default(f.default.xani_ui3),a.btn_rmx[e].InitButton("统一按钮3"),a.btn_mp[e]=new u.default(f.default.xani_ui3),a.btn_mp[e].InitButton("统一按钮3");return a.btn_rmx[0].sName="人",a.btn_rmx[1].sName="魔",a.btn_rmx[2].sName="仙",NoviceHelp.sDetail="",a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(NoviceHelp,r.default),a(NoviceHelp,[{key:"Draw_0",value:function(t){var e=this.iX+485,i=t+60;l.default.gi().DrawText_2(e,i,"~~~ 游戏介绍 ~~~",4294952960,25,101,1,1,0,-2,-2,3,4278190080),i+=30,l.default.gi().DrawText_2(e-210+40,i,"春秋战国期间，七雄争霸，豪杰雄起。谋臣",4278190080,20,101,1,1,0,0,-2,0,4278190080),i+=25,l.default.gi().DrawText_2(e-210,i,"运筹帷幄，将士浴血沙场。战争此起彼伏，局势",4278190080,20,101,1,1,0,0,-2,0,4278190080),i+=25,l.default.gi().DrawText_2(e-210,i,"变化跌宕。时代赋予三界风云人物神圣使命去掌",4278190080,20,101,1,1,0,0,-2,0,4278190080),i+=25,l.default.gi().DrawText_2(e-210,i,"控国家生死存亡、左右民族荣辱兴衰。人族、魔",4278190080,20,101,1,1,0,0,-2,0,4278190080),i+=25,l.default.gi().DrawText_2(e-210,i,"族、仙族率领九大门派弟子卷入了这场声势浩大",4278190080,20,101,1,1,0,0,-2,0,4278190080),i+=25,l.default.gi().DrawText_2(e-210,i,"的征战之中。岁月长河涤荡两千余载，那些璀璨",4278190080,20,101,1,1,0,0,-2,0,4278190080),i+=25,l.default.gi().DrawText_2(e-210,i,"的智慧和生命依然熠熠发光，依然动人心魄......",4278190080,20,101,1,1,0,0,-2,0,4278190080)}},{key:"Draw_1",value:function(t){var e=this.iX+485,i=t+60;l.default.gi().DrawText_2(e,i,"0级~10级",4294952960,25,101,1,1,0,-2,-2,3,4278190080),i+=30,l.default.gi().DrawText_2(e,i,"打开任务提示，跟随引导剧情可快速升级",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"剧情战斗难度较高，建议组队完成",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"0~5级可在郊外组队练级",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"5~10级可在西阳山道组队练级",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=30,l.default.gi().DrawText_2(e,i,"10级~20级",4294952960,25,101,1,1,0,-2,-2,3,4278190080),i+=30,l.default.gi().DrawText_2(e,i,"西阳城<门派传送人>处传送加入门派,学门派技能",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"每天前2轮门派任务可获得双倍奖励",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"10~25级之间可拜40级以上玩家为师",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=30,l.default.gi().DrawText_2(e,i,"20级~30级",4294952960,25,101,1,1,0,-2,-2,3,4278190080),i+=30,l.default.gi().DrawText_2(e,i,"郢城<栾千盛>组队进行强盗任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"郢城<帮派总管>处申请加入帮派",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"帮派内可学到打造，强身，炼丹等辅助技能",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"临淄<程镖头>可领取押镖任务，有几率得到阵法书",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"咸阳<商鞅>处领取材料任务(限30次/天)",4278190080,20,101,1,1,0,-2,-2,0,4278190080)}},{key:"Draw_2",value:function(t){var e;for(e=0;e<3;e++)this.btn_rmx[e].Move(this.iX+280+160*e,t+40,110,40),this.btn_rmx[e].Draw(),this.ip1==e&&f.default.xani_ui3.DrawAnima_aa(this.btn_rmx[e].iX,this.btn_rmx[e].iY,"按钮选中框",0),this.btn_mp[e].Move(this.iX+280+160*e,t+40+50,110,40),this.btn_mp[e].sName=n.default.sSchools[3*this.ip1+e+1],this.btn_mp[e].Draw(),this.ip2==e&&f.default.xani_ui3.DrawAnima(this.btn_mp[e].iX,this.btn_mp[e].iY,"按钮选中框",0);if(0==this.ip1)switch(this.ip2){case 0:m.default.fs.FormatEx("#cffff00师父：盖聂#e门派特点：物理型，拥有强大的物理攻击技能。#e门派加点：推荐4力1速、3力1体1耐或全力。#e门派技能",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+150),m.default.fs.FormatEx("浩然剑气:对目标造成伤害的同时以剑气伤害另外两个敌方单位，消耗25魔法。#e无双剑法：连续攻击目标三次，使用后休息一回合，要求当前气血40%以上，消耗10%当前气血。#e幻影剑法：分身攻击后主体攻击，要求当前气血60%以上，不消耗气血和魔法 。#e凝神聚气：临时增加自身攻击，消耗20魔法。#e虎啸：增加我方士气，消耗20魔法。#e先发制人：对目标造成伤害的同时降低目标速度，消耗20魔法。#e遁地术：非战斗时回到门派。",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+230);break;case 1:m.default.fs.FormatEx("#cffff00师父：孙武#e门派特点：辅助型，拥有强大封印技能。#e门派加点：推荐3体2速、2体1耐2速或2体3速。#e门派技能",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+150),m.default.fs.FormatEx("奇谋：临时降低目标防御和法防，消耗30魔法。#e陷阱：有几率控制对方，使对方无法攻击和使用技能，消耗20魔法。#e烈焰阵：攻击全体对方气血和魔法，消耗30魔法。#e轮轴术：临时提高己方单人速度，消耗20魔法。#e迷雾：使己方全体有几率躲避物理伤害，消耗40魔法。#e兵诡：持续降低敌方士气，消耗20魔法。#e遁地术：非战斗时回到门派。",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+230);break;case 2:m.default.fs.FormatEx("#cffff00师父：扁鹊#e门派特点：辅助型，拥有强大的加血技能，是七国唯一的奶妈。#e门派加点：推荐3体1法1耐、3体1耐1速或4体1耐。#e门派技能",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+150),m.default.fs.FormatEx("推功过血：群体恢复气血，恢复人数随着技能等级增加,作用人数（技能等级+10）/20+1，消耗作用人数*15魔法。#e起死回生：救活死亡的队友并恢复一定气血，消耗50魔法。#e练气化神：转化部分气血为魔法，消耗技能等级*1气血。#e浑圆气功：法术攻击2人，消耗20魔法。#e知己知彼：命中后能看到对方当前剩于气血，消耗20魔法。#e针灸：单人加血，并临时提高目标攻击和法防，消耗20魔法。#e神农本草：增加使用药物的效果。",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+230)}else if(1==this.ip1)switch(this.ip2){case 0:m.default.fs.FormatEx("#cffff00师父：白起#e门派特点：物攻型，拥有强大的物理伤害技能。#e门派加点：推荐4力1体或全力。#e门派技能",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+150),m.default.fs.FormatEx("狂暴诀：临时增加自身攻击，减少防御，并进入狂暴状态，无法和定心状态叠加，消耗15魔法。#e连环刀：在狂暴状态下，攻击对方多人。攻击人数=（技能等级+10）/20+1，使用后休息一回合，消耗攻击人数*15魔法。#e乱舞：连续攻击1一3次，狂暴状态下可连续攻击2一4次消耗25魔法。#e定心诀：临时增加防御和法术防御，减少攻击力，并进入定心状态，无法和狂暴状态叠加，消耗15魔法。#e魔甲术：处定心状态下使用，减免受到的法术伤害并有几率躲避对方的法术攻击，消耗20魔法。#e壁垒：使用后受到普通物理攻击时会反击，若处于定心状态则反击伤害加倍消耗25魔法。#e遁地术：非战斗时回到门派。",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+230);break;case 1:m.default.fs.FormatEx("#cffff00师父：祝融#e门派特点：法术攻击型，拥有强大的法术伤害技能。#e门派加点：推荐4法1体、3法2体或全法。#e门派技能",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+150),m.default.fs.FormatEx("火流星：法术攻击对方多人，攻击人数随着技能等级增加，攻击人数=（技能等级+10）/20+1，，消耗攻击人数*15魔法。#e毒火术：攻击单人并临时降低目标防御，消耗30魔法。#e火牢：有几率控制对方，使目标无法使用普通攻击，消耗25魔法。#e炎爆术：法术攻击对方单人，消耗30魔法。#e火甲术：被物理攻击时，对方受到反震伤害，消耗25魔法。#e火灵诀：临时增加法术暴击率和封系法术抗性，消耗40魔法。#e遁地术：非战斗时回到门派",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+230);break;case 2:m.default.fs.FormatEx("#cffff00师父：鬼谷子#e门派特点：辅助型，拥有强大的封印技能。#e门派加点：推荐3体2速或2体3速。#e门派技能",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+150),m.default.fs.FormatEx("飞钳术：有几率控制对方，使对方无法使用普通攻击和法术，消耗20魔法。#e凝神诀：增加飞钳术成功率消耗20魔法。#e鬼谷刀法：连续攻击目标两次，要求当前气血70%以上，消耗25魔法。#e散势法：降低对方士气，消耗20魔法。#e清心咒：解除已方队员封类状态，消耗20魔法。#e鬼符：对中了飞钳术的敌方目标造成固定伤害，并降低法术防御，消耗15魔法。#e遁地术：非战斗时回到门派。",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+230)}else if(2==this.ip1)switch(this.ip2){case 0:m.default.fs.FormatEx("#cffff00师父：姜太公#e门派特点：法术型，拥有强大的法术伤害技能。#e门派加点：推荐4法1耐、3法1体1耐或全法。#e门派技能",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+150),m.default.fs.FormatEx("呼风：法术攻击对方多人，攻击人数随技能等级增加，攻击人数为技能等级/15+2，消耗攻击人数*15魔法。#e唤雨：攻击对方全体气血和魔法，消耗30魔法。#e天雷封魔：法术攻击对方单人，消耗30魔法。#e仙甲术：临时增加自已防御，消耗25魔法。#e天神助威：提高已方士气，消耗20魔法。#e灵智术：临时增加我方单体灵力，消耗25魔法。#e遁地术：非战斗时回到门派。",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+230);break;case 1:m.default.fs.FormatEx("#cffff00师父：风后#e门派特点：辅助攻击型，拥有加血技能与固伤技能。#e门派加点：2体2耐1速、3体1耐1速或3体2耐。#e门派技能",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+150),m.default.fs.FormatEx("天阵：提高已方全体物理和法术攻击，使用后休息2回合，消耗50魔法。#e地阵：提高已方全体物理和法术防御，使用后休息2回合，消耗50魔法。#e五行击：固定伤害攻击随机1一5个目标，消耗40魔法。#e五行甲：临时提高目标法术攻击和防御，并持续恢复气血若干回合，消耗25魔法。#e孤虚法：降低对方士气并增加已方士气，消耗20魔法。#e归元法：解除五行甲效果并立即回复目标五行甲剩余治疗效果的气血，消耗20魔法。#e遁地术：非战斗时回到门派。",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+230);break;case 2:m.default.fs.FormatEx("#cffff00师父：九天玄女#e门派特点：辅助攻击型，拥有封印、恢复和攻击技能。#e门派加点：推荐2体1耐2速或2体2耐1速。#e门派技能",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+150),m.default.fs.FormatEx("穿云箭：加入灵气的箭，伤害受自身灵和攻击的影响，被攻击者降低速度，消耗15魔法。#e定天弓：提高穿云箭伤害，使穿云箭有几率击晕目标，使目标无法进行任何操作。消耗15魔法。#e驱魔符：驱除对方单人状态，并造成一定的伤害，消耗20魔法。#e天地同寿：救活一个队友。#e灵动九天：临时增加己方单体灵力，并持续恢复其魔法，消耗20魔法。#e仙绫缚：有几率束缚目标，使其无法使用技能消耗20魔法。#e遁地术：非战斗时回到门派。",500,18,1,4278190080,20),m.default.gi().Draw(this.iX+240,this.iY+230)}}},{key:"Draw_3",value:function(t){var e=this.iX+485,i=t+60;l.default.gi().DrawText_2(e,i,"~~~ 日常活动 ~~~",4294952960,25,101,1,1,0,-2,-2,3,4278190080),i+=30,l.default.gi().DrawText_2(e,i,"1.师门任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"2.强盗任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"3.师徒任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"4.为民除害",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"5.帮派-朱雀任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"6.帮派-青龙任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"7.帮派-玄武任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"8.商鞅-护法任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"9.商鞅-执法任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"10.押镖任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"11.手艺任务",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"12.周末比武",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"13.准点山贼",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"14.智者答题",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"15.世界抢答",4278190080,20,101,1,1,0,-2,-2,0,4278190080),i+=23,l.default.gi().DrawText_2(e,i,"16.副本",4278190080,20,101,1,1,0,-2,-2,0,4278190080)}},{key:"Draw",value:function(){var t;for(c.default.ui3_BaseFrame2(this.iX,this.iY,"帮","助"),this.btn_close.Draw(),t=0;t<7;t++)this.iPoint==t&&(this.btn_help[t].bMouseIn=!0,this.btn_help[t].bMouseDown=!0,f.default.xani_ui3.DrawAnimaEx(this.iX+40,this.iY+30+50*t+10,"选中背景",0,101,.9,.71,0,0,0)),this.btn_help[t].Draw();switch(f.default.xani_ui3.DrawAnima(this.iX+190,this.iY,"大框分割线",0),this.iPoint){case 0:this.Draw_0(this.iY);break;case 1:this.Draw_1(this.iY);break;case 2:this.Draw_2(this.iY);break;case 3:this.Draw_3(this.iY);break;case 4:l.default.gi().DrawText_2(this.iX+485,this.iY+60,NoviceHelp.sTitle,4294952960,25,101,1,1,0,-2,-2,3,4278190080),m.default.gi().FormatEx(NoviceHelp.sDetail,500,20,1,4278190080,25),m.default.gi().Draw(this.iX+240,this.iY+100)}}},{key:"ProcTouch",value:function(t,e,i){var a;if(2==this.iPoint)for(a=0;a<3;a++){if(this.btn_rmx[a].ProcTouch(t,e,i))return this.btn_rmx[a].bCheck()&&(this.ip1=a),!0;if(this.btn_mp[a].ProcTouch(t,e,i))return this.btn_mp[a].bCheck()&&(this.ip2=a),!0}for(a=0;a<7;a++)if(this.btn_help[a].ProcTouch(t,e,i))return this.btn_help[a].bCheck()&&(5==a?Send_NoviceAsk.Open():6==a?NoviceQuestionList.Open():(4==a&&this.iPoint!=a&&h.default.gi().s_SeverEvent(2,10,0,0,0),this.iPoint=a)),!0;return!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&d.default.gi().PopStat(1),!0)}}]),NoviceHelp}();i.default=g,g.sDetail,g.sTitle},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/FrameMessage":87}],206:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton"))),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m=function _QUESTION(){_classCallCheck(this,_QUESTION)},g=function(t){function NoviceQuestionList(t){_classCallCheck(this,NoviceQuestionList);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(NoviceQuestionList.__proto__||Object.getPrototypeOf(NoviceQuestionList)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=400,i.iH=320,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.iQuestionCount=0,i.qlist=new Array(10),e=0;e<10;e++)i.qlist[e]=new m;return i.iPoint=-1,i.btn_answer=new o.default(l.default.xani_ui),i.btn_answer.InitButton("统一中按钮2"),i.btn_answer.sName="回答",i.btn_delete=new o.default(l.default.xani_ui),i.btn_delete.InitButton("统一中按钮2"),i.btn_delete.sName="去除",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(NoviceQuestionList,r.default),a(NoviceQuestionList,[{key:"Draw",value:function(){var t;for(d.default.Frame1_BR(this.iX,this.iY,this.iW,this.iH),t=0;t<this.iQuestionCount;t++)u.default.gi().FillRect_2D(this.iX+10,this.iY+10+60*t,this.iX+this.iW-10,this.iY+10+60*t+60,t%2==0?1345335344:1343229968),c.default.gi().Format(this.qlist[t].sName+":"+this.qlist[t].sDetail,this.iW-40,20),c.default.gi().Draw(this.iX+20,this.iY+10+60*t+(60-c.default.gi().iH)/2),this.iPoint==t&&(this.btn_answer.Move(this.iX+this.iW-20-70,this.iY+10+60*t+10,70,40),this.btn_answer.Draw(),this.btn_delete.Move(this.iX+this.iW-20-70-80,this.iY+10+60*t+10,70,40),this.btn_delete.Draw())}},{key:"RemoveQuestion",value:function(){var t;for(t=this.iPoint;t<this.iQuestionCount-1;t++)this.qlist[t].iRid=this.qlist[t+1].iRid,this.qlist[t].iSid=this.qlist[t+1].iSid,this.qlist[t].sName=this.qlist[t+1].sName,this.qlist[t].sDetail=this.qlist[t+1].sDetail;this.iQuestionCount--,this.iPoint=-1,this.iQuestionCount<=0&&h.default.gi().PopStat(1)}},{key:"ProcTouch",value:function(t,e,i){var a;for(this.iPoint>=0&&this.iPoint<this.iQuestionCount&&(this.btn_delete.ProcTouch(t,e,i)&&this.btn_delete.bCheck()&&(f.default.gi().s_NoviceHelp(3,this.qlist[this.iPoint].iRid,this.qlist[this.iPoint].iSid,""),this.RemoveQuestion()),this.btn_answer.ProcTouch(t,e,i)&&this.btn_answer.bCheck()&&Send_AceAnswer.Open()),a=0;a<this.iQuestionCount;a++)s.default.bInRect(e,i,this.iX+10,this.iY+10+60*a,this.iW-20,60)&&(this.iPoint=a);return 3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||h.default.gi().PopStat(1),!1}}]),NoviceQuestionList}();i.default=g,g.AnswerTheQuestion=function(t){if(h.default.gi().LastStatType(1)==h.default.GS_NOVICEQUESTIONLIST){var e=h.default.gi().LastStat(1);f.default.gi().s_NoviceHelp(2,e.qlist[e.iPoint].iRid,e.qlist[e.iPoint].iSid,t),e.RemoveQuestion()}},g.Open=function(){h.default.gi().PushStat(h.default.GS_NOVICEQUESTIONLIST),f.default.gi().s_NoviceHelp(1,0,0,"")},g.getquestion=function(t){h.default.gi().LastStatType(0)!=h.default.GS_NOVICEQUESTIONLIST&&h.default.gi().PushStat(h.default.GS_NOVICEQUESTIONLIST);var e,i=h.default.gi().LastStat(0);if(i.iQuestionCount=t.GetNextByte(),0!=i.iQuestionCount)for(e=0;e<i.iQuestionCount;e++)i.qlist[e].iRid=t.GetNextInt(),i.qlist[e].iSid=t.GetNextInt(),i.qlist[e].sName=t.GetNextString(),i.qlist[e].sDetail=t.GetNextString();else h.default.gi().PopStat(1)}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81}],207:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../../engine/control/XInput")),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=(_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),_interopRequireDefault(t("../../../../../engtst/mgm/XStat"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function Send_AceAnswer(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Send_AceAnswer);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Send_AceAnswer.__proto__||Object.getPrototypeOf(Send_AceAnswer)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=600,e.iH=100,e.iX=(n.default.SCRW-e.iW)/2,e.iY=0,e.btn_close=new r.default(u.default.xani_ui),e.btn_close.InitButton("统一关闭按钮"),e.btn_close.Move(e.iX+e.iW-60-20,e.iY+20,60,60),e.btn_send=new r.default(u.default.xani_ui),e.btn_send.InitButton("统一大按钮2"),e.btn_send.Move(e.iX+e.iW-80-100,e.iY+25,80,50),e.btn_send.sName="发送",e.in_speak=new o.default(u.default.xani_ui),e.in_speak.Move(e.iX+20,e.iY+20,e.iW-220,e.iH-40),e.in_speak.bHideText=!0,e.in_speak.OpenInput(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Send_AceAnswer,s.default),a(Send_AceAnswer,[{key:"Draw",value:function(){f.default.Frame2_MD(this.iX,this.iY,this.iW,this.iH),f.default.Frame1_BR(this.iX+20,this.iY+20,this.iW-220,this.iH-40),h.default.gi().Format(this.in_speak.sDetail,this.in_speak.iW-10,20),h.default.gi().Draw(this.in_speak.iX+10,this.in_speak.iY+10),this.btn_send.Draw(),this.btn_close.Draw(),this.in_speak.onscr()}},{key:"ProcTouch",value:function(t,e,i){return this.in_speak.ProcTouch(t,e,i),this.btn_send.ProcTouch(t,e,i)&&this.btn_send.bCheck()&&(this.in_speak.sDetail.length<=0?d.default.easymsg.AddMessage("请先输入内容"):this.in_speak.sDetail.length>=40?d.default.easymsg.AddMessage("内容过长"):(NoviceQuestionList.AnswerTheQuestion(this.in_speak.sDetail),l.default.gi().PopStat(1))),!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&l.default.gi().PopStat(1),!0)}}]),Send_AceAnswer}();i.default=c,c.Open=function(){l.default.gi().PushStat(l.default.GS_SENDACEANSWER)}},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86}],208:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../../engine/control/XInput")),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function Send_NoviceAsk(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Send_NoviceAsk);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Send_NoviceAsk.__proto__||Object.getPrototypeOf(Send_NoviceAsk)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=600,e.iH=100,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_close=new r.default(u.default.xani_ui),e.btn_close.InitButton("统一关闭按钮"),e.btn_close.Move(e.iX+e.iW-60-20,e.iY+20,60,60),e.btn_send=new r.default(u.default.xani_ui),e.btn_send.InitButton("统一大按钮2"),e.btn_send.Move(e.iX+e.iW-80-100,e.iY+25,80,50),e.btn_send.sName="发送",e.in_speak=new o.default(u.default.xani_ui),e.in_speak.Move(e.iX+20,e.iY+20,e.iW-220,e.iH-40),e.in_speak.bHideText=!0,e.in_speak.OpenInput(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Send_NoviceAsk,s.default),a(Send_NoviceAsk,[{key:"Draw",value:function(){h.default.Frame2_MD(this.iX,this.iY,this.iW,this.iH),h.default.Frame1_BR(this.iX+20,this.iY+20,this.iW-220,this.iH-40),d.default.gi().Format(this.in_speak.sDetail,this.in_speak.iW-10,20),d.default.gi().Draw(this.in_speak.iX+10,this.in_speak.iY+10),this.btn_send.Draw(),this.btn_close.Draw(),this.in_speak.onscr()}},{key:"ProcTouch",value:function(t,e,i){return this.in_speak.ProcTouch(t,e,i),this.btn_send.ProcTouch(t,e,i)&&this.btn_send.bCheck()&&(this.in_speak.sDetail.length<=0?c.default.easymsg.AddMessage("请先输入内容"):this.in_speak.sDetail.length>=40?c.default.easymsg.AddMessage("内容过长"):(l.default.gi().s_NoviceHelp(0,0,0,this.in_speak.sDetail),f.default.gi().PopStat(1))),!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0)}}]),Send_NoviceAsk}();i.default=m,m.Open=function(){f.default.gi().PushStat(f.default.GS_SENDNOVICEASK)}},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86}],209:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),o=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),u=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),l=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function AddPoint(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,AddPoint);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(AddPoint.__proto__||Object.getPrototypeOf(AddPoint)).call(this));e.sAttName=["体质","法力","力量","耐力","敏捷"],e.sAttDetail=["提高气血上限","提高灵力","提高伤害值","提高防御","提高速度"],e.pani=t,e.pm3f=t.pm3f,e.iW=574,e.iH=504,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_ok=new r.default(o.default.xani_nui2),e.btn_ok.InitButton("按钮1_110"),e.btn_ok.sName="确 定",e.btn_cancel=new r.default(o.default.xani_nui2),e.btn_cancel.InitButton("按钮1_110"),e.btn_cancel.sName="取 消",e.btn_sub=new Array(5),e.btn_add=new Array(5);for(var i=0;i<5;i++)e.btn_sub[i]=new r.default(o.default.xani_nui2),e.btn_sub[i].InitButton("加点按钮-"),e.btn_add[i]=new r.default(o.default.xani_nui2),e.btn_add[i].InitButton("加点按钮+");return e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(AddPoint,s.default),a(AddPoint,[{key:"Draw",value:function(){var t,e;for(l.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),t=0;t<5;t++)this.pm3f.DrawTextEx(this.iX+40,this.iY+65+65*t,this.sAttName[t],4278206039,30,101,1,1,0,0,-2),this.pm3f.DrawTextEx(this.iX+350+50,this.iY+65+65*t,this.sAttDetail[t],4278206039,25,101,1,1,0,0,-2),e=AddPoint.iModifys[t]>0?AddPoint.iAtts[t]+"+"+AddPoint.iModifys[t]:""+AddPoint.iAtts[t],this.pm3f.DrawTextEx(this.iX+200,this.iY+65+65*t,e,4278206039,30,101,1,1,0,0,-2),this.btn_sub[t].Move(this.iX+124,this.iY+65+65*t-30,59,60),this.btn_sub[t].Draw(),this.btn_add[t].Move(this.iX+280+50,this.iY+65+65*t-30,59,60),this.btn_add[t].Draw();this.pm3f.DrawTextEx(this.iX+40,this.iY+65+65*t,"潜能",4278206039,30,101,1,1,0,0,-2),this.pm3f.DrawTextEx(this.iX+200,this.iY+65+65*t,""+(AddPoint.iNut-AddPoint.iModifys[0]-AddPoint.iModifys[1]-AddPoint.iModifys[2]-AddPoint.iModifys[3]-AddPoint.iModifys[4]),4278206039,30,101,1,1,0,0,-2),this.btn_ok.Move(this.iX+45,this.iY+347+15+60,110,52),this.btn_ok.Draw(),this.btn_cancel.Move(this.iX+this.iW-110-45,this.iY+347+15+60,110,52),this.btn_cancel.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<5;a++)this.btn_sub[a].ProcTouch(t,e,i)&&this.btn_sub[a].bCheck()&&AddPoint.iModifys[a]>0&&AddPoint.iModifys[a]--,this.btn_add[a].ProcTouch(t,e,i)&&this.btn_add[a].bCheck()&&AddPoint.iNut-AddPoint.iModifys[0]-AddPoint.iModifys[1]-AddPoint.iModifys[2]-AddPoint.iModifys[3]-AddPoint.iModifys[4]>0&&AddPoint.iModifys[a]++;return this.btn_ok.ProcTouch(t,e,i)&&this.btn_ok.bCheck()&&(AddPoint.bConfirm=!0,AddPoint.bFinished=!0,u.default.gi().PopStat(1)),this.btn_cancel.ProcTouch(t,e,i)&&this.btn_cancel.bCheck()&&(AddPoint.bConfirm=!1,AddPoint.bFinished=!0,u.default.gi().PopStat(1)),!1}}]),AddPoint}();i.default=f,f.ADDPOINT_USER=10,f.ADDPOINT_PET=20,f.ADDPOINT_MOUNTS=30,f.iCid,f.iModifys=new Int32Array(5),f.iAtts=new Int32Array(5),f.iNut,f.bFinished=!1,f.bConfirm,f.start=function(t,e,i,a,n,s,r){f.iCid=t,f.iAtts[0]=e,f.iAtts[1]=i,f.iAtts[2]=a,f.iAtts[3]=n,f.iAtts[4]=s,f.iModifys[0]=0,f.iModifys[1]=0,f.iModifys[2]=0,f.iModifys[3]=0,f.iModifys[4]=0,f.iNut=r,u.default.gi().PushStat(u.default.GS_ADDPOINT),f.bFinished=!1},f.end=function(t){return!(!f.bFinished||f.iCid!=t)&&(f.bFinished=!1,!0)}},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72}],210:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../mgm/newmainmenu/CreateRole")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../../engine/control/XCheckBox")),_interopRequireDefault(t("../../../../engine/control/XInput"))),l=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),c=(_interopRequireDefault(t("../../../../engtst/mgm/History/XRecordFast")),_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode"))),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function ChangeName(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ChangeName);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ChangeName.__proto__||Object.getPrototypeOf(ChangeName)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=400,e.iH=250,e.iX=(s.default.SCRW-e.iW)/2,e.iY=(s.default.SCRH-e.iH)/2,e.btn_change=new o.default(f.default.xani_button),e.btn_change.InitButton("1号按钮90_60"),e.btn_change.Move(e.iX+40,e.iY+e.iH-60-40,90,60),e.btn_change.sName="改名",e.btn_cancel=new o.default(f.default.xani_button),e.btn_cancel.InitButton("1号按钮90_60"),e.btn_cancel.Move(e.iX+e.iW-40-90,e.iY+e.iH-60-40,90,60),e.btn_cancel.sName="取消",e.in_nick=new u.default(f.default.xani_frame),e.in_nick.Move(e.iX+140,e.iY+20,e.iW-160,50),e.in_nick.sDetail="",e.in_nick.iTextSize=30,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ChangeName,r.default),a(ChangeName,[{key:"Draw",value:function(){c.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),l.default.gi().DrawTextEx(this.iX+40,this.iY+40,"输入新的昵称：",4279324257,30,101,1,1,0,0,0),this.in_nick.Move(this.iX+40,this.iY+80,this.iW-80,50),c.default.frame_type4("8号框20_20",this.in_nick.iX,this.in_nick.iY,this.in_nick.iW,50,20,20),this.pm3f.DrawTextEx(this.in_nick.iX+10,this.in_nick.iY+this.in_nick.iH/2,this.in_nick.sDetail,4279324257,20,101,1,1,0,0,-2),this.btn_change.Draw(),this.btn_cancel.Draw(),this.in_nick.onscr()}},{key:"ProcTouch",value:function(t,e,i){return this.btn_change.ProcTouch(t,e,i)?(this.btn_change.bCheck()&&(n.default.bCheckNick(this.in_nick.sDetail,4,24)?(h.default.gi().s_changenick(this.in_nick.sDetail),d.default.gi().PopStat(1)):m.default.easymsg.AddMessage("昵称填写有误")),!0):(this.in_nick.ProcTouch(t,e,i),!!this.btn_cancel.ProcTouch(t,e,i)&&(this.btn_cancel.bCheck()&&d.default.gi().PopStat(1),!0))}}]),ChangeName}();i.default=g},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/control/XCheckBox":17,"../../../../engine/control/XInput":18,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/History/XRecordFast":67,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../mgm/newmainmenu/CreateRole":307}],211:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../zero/Interface/PublicInterface")),s=_interopRequireDefault(t("../../../../config/GameData")),r=_interopRequireDefault(t("../../../../config/GmConfig")),o=_interopRequireDefault(t("../../../../config/SortAnima")),u=_interopRequireDefault(t("../../../../config/XDefine")),l=_interopRequireDefault(t("../../../../map/DrawBuffer")),f=_interopRequireDefault(t("../../../../map/MapManager")),h=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButton"))),d=_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),c=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),m=_interopRequireDefault(t("../../../../engtst/mgm/FireworksEffect")),g=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),_=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),p=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),b=_interopRequireDefault(t("../../../../engtst/mgm/History/XRecordFast")),D=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),y=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),w=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),S=(_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/Gameing"))),x=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/NearRole")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/fast/FastButton")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/fast/SystemOperate"))),P=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/fight/XFight")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/gov/MyGov"))),v=_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/JQMode")),R=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/ExtHelp/ExtHelp")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/TopIcon/FirstCharge"))),M=_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/TopIcon/FiveGift")),C=_interopRequireDefault(t("../../../../engtst/mgm/gameing/help/TopIcon/LoginGift")),k=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"))),T=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoodsFrame")),A=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mounts/Mounts")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/mounts/MyMounts"))),G=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/MyPets")),E=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/pet/PetsFrame"))),X=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/shop/MySell")),O=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/MyTeam")),I=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/team/TeamRequestList")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/trade/GoodsStoreFrame"))),F=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/trade/PetStoreFrame")),N=_interopRequireDefault(t("./_ROLEBASE"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var q=function(){function GmMe(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GmMe),this.iRace=0,this.iSex=0,this.bInited=!1,this.rbs=new N.default,this.iOldType=-1,this.bShowHpDetail=!1,this.RETEXT_CHANGETYPE=1,this.RETEXT_LOCKER=2,this.RETEXT_ANGER=4,this.bHaveLock=!1,this.bLocked,this.iUnlockTime,this.RETBASE_HP=1,this.RETBASE_MP=2,this.RETBASE_POWER=4,this.RETBASE_MONEY=8,this.RETBASE_EXP=16,this.RETBASE_LEV=32,this.RETBASE_ATT=64,this.RETBASE_OTHER=128,this.iScore,this.iComplexScore}return a(GmMe,[{key:"Init",value:function(){var t,e;for(this.iFlag=new Int32Array(64),this.iFlagExt=new Int32Array(64),this.aa_body=new d.default,this.aa_weapon=new d.default,this.aa_mounts=new d.default,this.iSpeed=8,this.iPopoDelay=0,this.iWeapTid=-1,this.bwc=!0,this.bsc=!0,this.bfc8=!1,this.bfc4=!0,this.bfc6=!1,this.sStat="站立",this.iFace8=0,this.sFace8="左",this.iRid=0,this.iMarks=new Array(GmMe.MAXMARK),t=0;t<GmMe.MAXMARK;t++)this.iMarks[t]=new Int32Array(3);for(this.iFollowPid=0,this.iFollowX=0,this.iFollowY=0,this.aa_follow=new d.default,this.aa_team=new d.default,g.default.xani_ui.InitAnimaWithName("队伍图标",this.aa_team),this.btn_reset=new h.default(g.default.xani_ui),this.btn_reset.Move(0,0,118,83),this.btn_reset.bSingleButton=!0,this.btn_reset.sName="重置",this.btn_att=new h.default(g.default.xani_ui),this.btn_att.bSingleButton=!0,this.btn_att.sName="属性",this.btn_petatt=new h.default(g.default.xani_ui),this.btn_petatt.bSingleButton=!0,this.btn_petatt.sName="宠物",this.btn_petatt.Move(r.default.SCRW-190-83,0,83,83),this.iFightPid=-1,this.iFollowPid=-1,this.iFightMid=-1,this.iMountsTid=-1,this.iMountsJjLev=-1,this.bInited=!0,this.aa_mts=new Array(6),this.aa_bds=new Array(6),this.aa_cls=new Array(6),this.iColor=new Int32Array(6),t=0;t<6;t++){for(this.aa_mts[t]=new d.default,this.aa_bds[t]=new d.default,this.aa_cls[t]=new Array(5),e=0;e<5;e++)this.aa_cls[t][e]=new d.default;this.iColor[t]=0}}},{key:"BeInvite",value:function(t){this.iInviteId=t.GetNextInt();var e=t.GetNextString();D.default.start(D.default.CONFIRM_INVITE,e+"邀请你加入队伍，是否同意？")}},{key:"start",value:function(t,e){this.iPathPoint=0,this.iSx=t[this.iPathPoint][0],this.iSy=t[this.iPathPoint][1],this.iDx=t[this.iPathPoint+1][0],this.iDy=t[this.iPathPoint+1][1],this.iTick=parseInt(u.default.llength(this.iSx,this.iSy,this.iDx,this.iDy)/this.iSpeed),this.iAt=0,0==this.iTick?(this.iX=this.iDx,this.iY=this.iDy):(this.iX=this.iSx+(this.iDx-this.iSx)*this.iAt/this.iTick,this.iY=this.iSy+(this.iDy-this.iSy)*this.iAt/this.iTick),this.FaceTo(),this.ChangeStat("跑步")}},{key:"TeamFollow",value:function(){var t;if(O.default.bTeamLeader())for(t=1;t<GmMe.MAXTEAMOLE;t++)if(0!=O.default.iTeamRid[t]){var e=S.default.gameing.findnrs(O.default.iTeamRid[t]);null!=e&&(e.iDx=this.iMarks[10*t][0],e.iDy=this.iMarks[10*t][1],e.iDFaceTo=this.iMarks[10*t][2])}}},{key:"next",value:function(t,e){var i;if(!this.IsStat("跑步"))return!0;if(this.iAt++,0==this.iTick)this.iX=this.iDx,this.iY=this.iDy;else{for(i=GmMe.MAXMARK-1;i>0;i--)this.iMarks[i][0]=this.iMarks[i-1][0],this.iMarks[i][1]=this.iMarks[i-1][1],this.iMarks[i][2]=this.iMarks[i-1][2];this.iMarks[0][0]=this.iX,this.iMarks[0][1]=this.iY,this.iMarks[0][2]=this.iFace8+10*this.iFace4,this.iX=this.iSx+(this.iDx-this.iSx)*this.iAt/this.iTick,this.iY=this.iSy+(this.iDy-this.iSy)*this.iAt/this.iTick}if(this.iAt>=this.iTick){if(this.iPathPoint++,this.iPathPoint>=e-1)return this.ChangeStat("站立"),!0;this.iSx=t[this.iPathPoint][0],this.iSy=t[this.iPathPoint][1],this.iDx=t[this.iPathPoint+1][0],this.iDy=t[this.iPathPoint+1][1],this.iTick=parseInt(u.default.llength(this.iSx,this.iSy,this.iDx,this.iDy)/this.iSpeed),this.iAt=0,0==this.iTick?(this.iX=this.iDx,this.iY=this.iDy):(this.iX=this.iSx+(this.iDx-this.iSx)*this.iAt/this.iTick,this.iY=this.iSy+(this.iDy-this.iSy)*this.iAt/this.iTick),this.FaceTo()}return!1}},{key:"FaceTo",value:function(){var t,e,i;t=360-u.default.GetAngleXY(this.iDx,this.iDy,this.iSx,this.iSy),t%=360,e=this.iFace4,this.iFace4=0<=t&&t<=90?0:90<=t&&t<=180?3:180<=t&&t<=270?2:1,e!=this.iFace4&&(this.bfc4=!0),e=this.iFace6,this.iFace6=0<=t&&t<=30?0:30<t&&t<=90?5:90<t&&t<=150?4:150<t&&t<=210?3:210<t&&t<=270?2:270<t&&t<=330?1:0,e!=this.iFace6&&(this.bfc6=!0),i=this.sFace8,22<t&&t<68?(this.iFace8=1,this.sFace8="右上"):67<t&&t<113?(this.iFace8=2,this.sFace8="上"):112<t&&t<158?(this.iFace8=3,this.sFace8="左上"):157<t&&t<203?(this.iFace8=4,this.sFace8="左"):202<t&&t<248?(this.iFace8=5,this.sFace8="左下"):247<t&&t<293?(this.iFace8=6,this.sFace8="下"):292<t&&t<338?(this.iFace8=7,this.sFace8="右下"):(this.iFace8=0,this.sFace8="右"),i!=this.sFace8&&(this.bfc8=!0)}},{key:"ChangeStat",value:function(t){this.sStat!=t&&(this.sStat=t,this.bsc=!0)}},{key:"IsStat",value:function(t){return this.sStat==t}},{key:"DrawMounts",value:function(t,e,i,a,n){var s,r=0,u=2*this.iRace+this.iSex,f=GmMe.face_sti(i),h=GmMe.stat_sti(a),d=this.iMountsTid-1,c=this.iMountsJjLev-1,m=0;n&&(this.iOffY=0);var _=0;for(2==this.iMountsTid&&(_=12),s=0;s<o.default._ANIMASORT_MOUNT[d][c][h][f].length;s++)"左翅膀"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&g.default.xani_nmounts[d][c].InitAnimaWithName(this.iMountsJjLev+"_"+a+"_"+i+"_左翅膀",this.aa_mts[2]),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_mts[2]),this.aa_mts[2].NextFrame(),m++):"右翅膀"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&g.default.xani_nmounts[d][c].InitAnimaWithName(this.iMountsJjLev+"_"+a+"_"+i+"_右翅膀",this.aa_mts[3]),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_mts[3]),this.aa_mts[3].NextFrame(),m++):"前"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&g.default.xani_nmounts[d][c].InitAnimaWithName(this.iMountsJjLev+"_"+a+"_"+i+"_前",this.aa_mts[0]),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_mts[0]),this.aa_mts[0].NextFrame(),m++):"后"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&g.default.xani_nmounts[d][c].InitAnimaWithName(this.iMountsJjLev+"_"+a+"_"+i+"_后",this.aa_mts[1]),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_mts[1]),this.aa_mts[1].NextFrame(),m++):"身体"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&g.default.xani_nmounts[d][c].InitAnimaWithName(this.iMountsJjLev+"_"+a+"_"+i+"_身体",this.aa_mts[4]),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_mts[4]),this.aa_mts[4].NextFrame(),m++):"飘带"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&g.default.xani_nmounts[d][c].InitAnimaWithName(this.iMountsJjLev+"_"+a+"_"+i+"_飘带",this.aa_mts[5]),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_mts[5]),this.aa_mts[5].NextFrame(),m++):"人前"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&(g.default.xani_newrole[u].InitAnimaWithName("骑"+a+"_"+i+"_前",this.aa_bds[0]),this.ChangeColor(u,"骑"+a+"_"+i+"_前",0),r=this.aa_bds[0].pani.iAnimaY(this.aa_bds[0])-30,this.iOffY>r&&(this.iOffY=r)),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_bds[0]),this.DrawColor(u,this.aa_bds[0].iFrame,e+m,t,e+_,0),this.aa_bds[0].NextFrame(),m++):"人后"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&(g.default.xani_newrole[u].InitAnimaWithName("骑"+a+"_"+i+"_后",this.aa_bds[1]),this.ChangeColor(u,"骑"+a+"_"+i+"_后",1),r=this.aa_bds[1].pani.iAnimaY(this.aa_bds[1])-30,this.iOffY>r&&(this.iOffY=r)),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_bds[1]),this.DrawColor(u,this.aa_bds[1].iFrame,e+m,t,e+_,1),this.aa_bds[1].NextFrame(),m++):"人左"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&(g.default.xani_newrole[u].InitAnimaWithName("骑"+a+"_"+i+"_左",this.aa_bds[2]),this.ChangeColor(u,"骑"+a+"_"+i+"_左",2),r=this.aa_bds[2].pani.iAnimaY(this.aa_bds[2])-30,this.iOffY>r&&(this.iOffY=r)),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_bds[2]),this.DrawColor(u,this.aa_bds[2].iFrame,e+m,t,e+_,2),this.aa_bds[2].NextFrame(),m++):"人右"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&(g.default.xani_newrole[u].InitAnimaWithName("骑"+a+"_"+i+"_右",this.aa_bds[3]),this.ChangeColor(u,"骑"+a+"_"+i+"_右",3),r=this.aa_bds[3].pani.iAnimaY(this.aa_bds[3])-30,this.iOffY>r&&(this.iOffY=r)),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_bds[3]),this.DrawColor(u,this.aa_bds[3].iFrame,e+m,t,e+_,3),this.aa_bds[3].NextFrame(),m++):"人"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]?(n&&(g.default.xani_newrole[u].InitAnimaWithName("骑"+a+"_"+i,this.aa_bds[4]),this.ChangeColor(u,"骑"+a+"_"+i,4),r=this.aa_bds[4].pani.iAnimaY(this.aa_bds[4])-30,this.iOffY>r&&(this.iOffY=r)),l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_bds[4]),this.DrawColor(u,this.aa_bds[4].iFrame,e+m,t,e+_,4),this.aa_bds[4].NextFrame(),m++):"武器"==o.default._ANIMASORT_MOUNT[d][c][h][f][s]&&(n&&(this.iWeapTid=k.default.gi().GetWeaponTid(),this.iWeapTid>=0&&g.default.xani_weap[u][o.default.WeapFlag(this.iWeapTid)].InitAnimaWithName("骑"+a+"_"+i,this.aa_weapon)),this.iWeapTid>=0&&(x.default.bShowWeapon&&l.default.gi().DrawAnima_aa(e+m,null,t,e+_,this.aa_weapon),this.aa_weapon.NextFrame()),m++)}},{key:"ChangeColor",value:function(t,e,i){var a;if(x.default.bShowColor)for(a=0;a<o.default._CHANGECOLOR[t].length;a++)this.iColor[a]<=0||this.iColor[a]>=6||g.default.xani_color[t][this.iColor[a]-1].InitAnimaWithName(o.default._CHANGECOLOR[t][a]+"_"+e,this.aa_cls[i][a])}},{key:"DrawColor",value:function(t,e,i,a,n,s){var r;if(x.default.bShowColor)for(r=0;r<o.default._CHANGECOLOR[t].length;r++)this.iColor[r]<=0||this.iColor[r]>=6||(this.aa_cls[s][r].iFrame=e,l.default.gi().DrawAnima_aa(i,null,a,n,this.aa_cls[s][r]))}},{key:"DrawRole",value:function(t,e,i,a,n){var s,r=2*this.iRace+this.iSex,u=GmMe.face_sti(i),f=GmMe.stat_sti(a),h=0;for(s=0;s<o.default._ANIMASORT[r][f][u].length;s++)"人物"==o.default._ANIMASORT[r][f][u][s]?(n&&(g.default.xani_newrole[r].InitAnimaWithName(a+"_"+i,this.aa_body),this.ChangeColor(r,a+"_"+i,0),this.iOffY=this.aa_body.pani.iAnimaY(this.aa_body)-30),l.default.gi().DrawAnima_aa(e+h,null,t,e,this.aa_body),this.DrawColor(r,this.aa_body.iFrame,e+h,t,e,0),this.aa_body.NextFrame(),h++):"武器"==o.default._ANIMASORT[r][f][u][s]&&(n&&(this.iWeapTid=k.default.gi().GetWeaponTid(),this.iWeapTid>=0&&g.default.xani_weap[r][o.default.WeapFlag(this.iWeapTid)].InitAnimaWithName(a+"_"+i,this.aa_weapon)),this.iWeapTid>=0&&(x.default.bShowWeapon&&l.default.gi().DrawAnima_aa(e+h,null,t,e,this.aa_weapon),this.aa_weapon.NextFrame()),h++)}},{key:"Draw",value:function(){var t,e=!1;if(this.iChangeType>0)0!=this.iOldType&&(this.iOldType=0,e=!0),e=this.bStatChanged()|e,(e=this.bFaceChanged6()|e)&&(0==this.iFace6?this.sFace6="右":1==this.iFace6?this.sFace6="右下":2==this.iFace6?this.sFace6="左下":3==this.iFace6?this.sFace6="左":4==this.iFace6?this.sFace6="左上":5==this.iFace6&&(this.sFace6="右上"),this.iChangeType>=1e4?g.default.xani_pets[this.iChangeType%1e4].InitAnimaWithName("变异_"+this.sStat+"_"+this.sFace6,this.aa_body):g.default.xani_pets[this.iChangeType%1e4].InitAnimaWithName(this.sStat+"_"+this.sFace6,this.aa_body),this.iOffY=this.aa_body.pani.iAnimaY(this.aa_body)-30);else if(this.iFightMid>0&&!X.default.gi().bSelling&&x.default.bShowMount){if(2!=this.iOldType&&(this.iOldType=2,e=!0),e=this.bWeapChanged()|e,e=this.bStatChanged()|e,e=this.bFaceChanged8()|e){var i=A.default.mm.FindMounts(this.iFightMid);if(null==i)return void(this.bsc=!0);this.iMountsTid=i.iTid,this.iMountsJjLev=i.iJjLev}}else 1!=this.iOldType&&(this.iOldType=1,e=!0),e=this.bStatChanged()|e,e=this.bFaceChanged8()|e,e=this.bWeapChanged()|e;if(this.iFollowPid>0&&x.default.bShowFollow){var a=G.default.mp.FindPet(this.iFollowPid);if(null!=a){this.iFollowX=this.iMarks[5][0],this.iFollowY=this.iMarks[5][1];var n="";n=0==(2&a.iBaobao)?"":"变异_",this.iFollowX>this.iX?n+=this.sStat+"_左":n+=this.sStat+"_右",g.default.xani_pets[a.iTid].InitAnimaWithName(n,this.aa_follow),this.aa_follow.SetFrame(g.default.iDelay),l.default.gi().DrawAnima_aa(f.default.gi().iOffy+this.iFollowY,null,f.default.gi().iOffx+this.iFollowX,f.default.gi().iOffy+this.iFollowY,this.aa_follow),m.default.DrawAura(0,f.default.gi().iOffx+this.iFollowX,f.default.gi().iOffy+this.iFollowY,l.default.gi(),f.default.gi().iOffy+this.iFollowY-1),l.default.gi().DrawText_2(f.default.gi().iOffy+this.iFollowY+1,1,f.default.gi().iOffx+this.iFollowX,f.default.gi().iOffy+this.iFollowY+30,a.sName,4294946944,20,1,4278190080)}}if(l.default.gi().BeginGroup(),m.default.DrawAura(0,f.default.gi().iOffx+this.iX,f.default.gi().iOffy+this.iY,l.default.gi(),f.default.gi().iOffy+this.iY),this.rbs.sTitle.length>0&&x.default.bShowTitle?(l.default.gi().DrawText_2(f.default.gi().iOffy+this.iY,1,f.default.gi().iOffx+this.iX,f.default.gi().iOffy+this.iY+20,this.rbs.sTitle,4286628095,20,1,4278190080),l.default.gi().DrawText_2(f.default.gi().iOffy+this.iY,1,f.default.gi().iOffx+this.iX,f.default.gi().iOffy+this.iY+20+20,this.sName,4286644096,20,1,4278190080)):l.default.gi().DrawText_2(f.default.gi().iOffy+this.iY,1,f.default.gi().iOffx+this.iX,f.default.gi().iOffy+this.iY+30,this.sName,4286644096,20,1,4278190080),this.iChangeType>0?(l.default.gi().DrawAnima_aa(f.default.gi().iOffy+this.iY,null,f.default.gi().iOffx+this.iX,f.default.gi().iOffy+this.iY,this.aa_body),this.aa_body.NextFrame()):this.iFightMid>0&&!X.default.gi().bSelling&&x.default.bShowMount?this.DrawMounts(f.default.gi().iOffx+this.iX,f.default.gi().iOffy+this.iY,this.sFace8,this.sStat,e):this.DrawRole(f.default.gi().iOffx+this.iX,f.default.gi().iOffy+this.iY,this.sFace8,this.sStat,e),X.default.gi().bSelling){var s=c.default.gi().GetTextWidth(X.default.gi().sSellName,25);(t=(s-60)/30+2)<2?t=2:t>6&&(t=6),g.default.xani_ui2.InitAnimaWithName("普通摊位",g.default.aaa),g.default.aaa.iFrame=0,l.default.gi().DrawAnimaEx(f.default.gi().iOffy+this.iY-2,f.default.gi().iOffx+this.iX-s/2-9,f.default.gi().iOffy+this.iY+this.iOffY+5,g.default.aaa,101,1,1,0,0,0),g.default.aaa.iFrame=1,l.default.gi().DrawAnimaEx(f.default.gi().iOffy+this.iY-2,f.default.gi().iOffx+this.iX-s/2,f.default.gi().iOffy+this.iY+this.iOffY+5,g.default.aaa,101,1*s/10,1,0,0,0),g.default.aaa.iFrame=2,l.default.gi().DrawAnimaEx(f.default.gi().iOffy+this.iY-2,f.default.gi().iOffx+this.iX+s/2,f.default.gi().iOffy+this.iY+this.iOffY+5,g.default.aaa,101,1,1,0,0,0),l.default.gi().DrawText(f.default.gi().iOffy+this.iY-1,1,f.default.gi().iOffx+this.iX,f.default.gi().iOffy+this.iY+this.iOffY+20,X.default.gi().sSellName,4282433791,25)}O.default.bTeamLeader()&&(l.default.gi().DrawAnima_aa(f.default.gi().iOffy+this.iY,g.default.xani_ui,f.default.gi().iOffx+this.iX,f.default.gi().iOffy+this.iY+this.iOffY,this.aa_team),g.default.xani_ui.NextFrame(this.aa_team)),this.DrawPopo(f.default.gi().iOffx+this.iX,f.default.gi().iOffy+this.iY),l.default.gi().EndGroup()}},{key:"DrawPopo",value:function(t,e){if(!(this.iPopoDelay<=0)){this.iPopoDelay--,w.default.gi().Format(this.sPopoString,151,25),t-=w.default.gi().iW/2;var i=e+this.iOffY+40-w.default.gi().iH;l.default.gi().FillRect(e,t,i,t+w.default.gi().iW,i+w.default.gi().iH,1342177280),w.default.gi().DrawToBuffer(e+1,t,i)}}},{key:"weapname",value:function(t,e){var i;for(i=0;i<g.default.de_goods.iDataCount;i++)if(2==g.default.de_goods.datas[i].intValue(16)&&g.default.de_goods.datas[i].intValue(19)==t&&g.default.de_goods.datas[i].intValue(9)==e)return g.default.de_goods.datas[i].strValue(4);return""}},{key:"DrawFightUI",value:function(){g.default.xani_ui.DrawAnima(r.default.SCRW,0,"test",0),this.btn_att.Draw(),this.btn_petatt.Draw()}},{key:"DrawHpDetail",value:function(){var t=r.default.SCRW-88-60-150;c.default.gi().FillRect_2D(t,0,t+150,60,2147483648),c.default.gi().DrawTextEx(t,0,"气血:"+GmMe.me.rbs.iHp+"/"+GmMe.me.rbs.iMaxHp,4294967295,20,101,1,1,0,0,0),c.default.gi().DrawTextEx(t,20,"魔法:"+GmMe.me.rbs.iMp+"/"+GmMe.me.rbs.iMaxMp,4294967295,20,101,1,1,0,0,0),c.default.gi().DrawTextEx(t,40,"愤怒:"+GmMe.me.rbs.iAnger+"/150",4294967295,20,101,1,1,0,0,0)}},{key:"DrawHeadEx",value:function(t,e,i,a,o,u,l,f,h,d,m,_,p){if(!(this.rbs.iMaxHp<=0||this.rbs.iMaxMp<=0||this.rbs.iLev<0)){var b=0;n.default.gi().iBx>0&&(b=r.default.SCRW-n.default.gi().iBx),g.default.xani_frame.DrawAnima(r.default.SCRW-81-b,1,"角色头像80_80",2*this.iRace+this.iSex),l<0?g.default.xani_frame.DrawAnima(r.default.SCRW-251-b,3,"默认宠物头像框68_68",0):(g.default.xani_frame.DrawAnima(r.default.SCRW-251-b,3,"默认宠物头像框68_68",1),g.default.xani_head.DrawAnimaEx(r.default.SCRW-251-b,3,g.default.de_pet.strValue(l,0,1),0,101,.92,.92,4096,0,0)),g.default.xani_frame.DrawAnima(r.default.SCRW-336-b,0,"漫游属性框336_82",0);var D=0;l>=0&&((D=79*f/h)>1&&y.default.frame_type1("气血框20_16",r.default.SCRW-336+3+79-D-b,3,D,20),(D=79*d/m)>1&&y.default.frame_type1("魔法框20_16",r.default.SCRW-336+3+79-D-b,22,D,20),(D=79*(p>s.default.iUpgradeExp[_]/3?s.default.iUpgradeExp[_]/3:p)/(s.default.iUpgradeExp[_]/3))>1&&y.default.frame_type1("经验框20_16",r.default.SCRW-336+3+79-D-b,41,D,20),c.default.gi().DrawTextEx(r.default.SCRW-336+140-b,62,""+_,4280698183,16,101,1,1,0,-2,-2)),(D=96*t/e)>1&&y.default.frame_type1("气血框20_16",r.default.SCRW-336+158+96-D-b,3,D,20),(D=96*i/a)>1&&y.default.frame_type1("魔法框20_16",r.default.SCRW-336+158+96-D-b,22,D,20),(D=96*o/150)>1&&y.default.frame_type1("愤怒框20_16",r.default.SCRW-336+158+96-D-b,41,D,20),c.default.gi().DrawTextEx(r.default.SCRW-336+320-b,71,""+u,4280698183,16,101,1,1,0,-2,-2)}}},{key:"DrawHead",value:function(){if(!(this.rbs.iMaxHp<=0||this.rbs.iMaxMp<=0||this.rbs.iLev<0)){var t=G.default.mp.GetUseingPet();null==t?this.DrawHeadEx(this.rbs.iHp,this.rbs.iMaxHp,this.rbs.iMp,this.rbs.iMaxMp,this.rbs.iAnger,this.rbs.iLev,-1,0,0,0,0,0,0):this.DrawHeadEx(this.rbs.iHp,this.rbs.iMaxHp,this.rbs.iMp,this.rbs.iMaxMp,this.rbs.iAnger,this.rbs.iLev,t.iTid,t.iHp,t.iMaxHp,t.iMp,t.iMaxMp,t.iLev,t.iExp)}}},{key:"DrawExp",value:function(){var t,e,i,a;for(a=this.rbs.iExp>s.default.iUpgradeExp[GmMe.me.rbs.iLev]?s.default.iUpgradeExp[GmMe.me.rbs.iLev]:this.rbs.iExp,e=s.default.iUpgradeExp[GmMe.me.rbs.iLev]/10,t=0;t<10;t++)a/e>t?g.default.xani_frame.DrawAnima(40+124*t,r.default.SCRH-10,"经验底框124_10",1):g.default.xani_frame.DrawAnima(40+124*t,r.default.SCRH-10,"经验底框124_10",0),a/e==t&&(i=124*(i=a%e)/e,y.default.frame_type1("经验框20_10",40+124*t,r.default.SCRH-10,i,20));g.default.xani_frame.DrawAnima(0,r.default.SCRH-10,"经验标签40_10",0),c.default.gi().DrawTextEx(20,r.default.SCRH-5,"经  验",4294967040,10,101,1,1,0,-2,-2)}},{key:"DrawUI",value:function(){if(!f.default.gi().vbk.mapdialog.bHideUI()&&!v.default.jq.bJQLock()){var t,e,i=0;if(n.default.gi().iBx>0&&(i=r.default.SCRW-n.default.gi().iBx),this.btn_att.Move(r.default.SCRW-83-i,0,83,83),this.btn_petatt.Move(r.default.SCRW-253-i,0,76,76),this.DrawHead(),O.default.bInTeam())for(t=0;t<5;t++)0!=O.default.iTmpTeamRid[t]&&(e=O.default.iTmpTeamRid[t]==this.iRid?2*this.iRace+this.iSex:O.default.iRas[t],0==O.default.iTeamRid[t]?g.default.xani_head.DrawAnimaEx(r.default.SCRW-500-83*t-i,0,"新头像"+e,0,50,1,1,0,0,0):g.default.xani_head.DrawAnima(r.default.SCRW-500-83*t-i,0,"新头像"+e,0));D.default.end(D.default.CONFIRM_INVITE)&&D.default.bConfirm&&_.default.gi().s_TeamOperate(7,this.iInviteId,0),this.bShowHpDetail&&this.DrawHpDetail()}}},{key:"ProcTouch_AttFrame",value:function(t,e,i){return!!G.default.mp.ProcTouch(t,e,i)}},{key:"ProcTouch",value:function(t,e,i){return this.bShowHpDetail=!1,this.btn_att.ProcTouch(t,e,i)?(this.btn_att.bCheck()&&p.default.gi().PushStat(p.default.GS_MYATTFRAME),!0):this.btn_petatt.ProcTouch(t,e,i)?(this.btn_petatt.bCheck()&&E.default.Open(),!0):this.btn_reset.ProcTouch(t,e,i)?(this.btn_reset.bCheck()&&p.default.gi().PushStat(p.default.GS_SMALLMAP),!0):!(2!=t&&1!=t||!u.default.bInRect(e,i,r.default.SCRW-191,0,108,80))&&(this.bShowHpDetail=!0,!0)}},{key:"getinit",value:function(t){this.iRid=t.GetNextInt(),this.sName=t.GetNextString(),g.default.m_vi.Login(""+this.iRid,this.sName),this.iSex=t.GetNextByte(),this.iRace=t.GetNextByte(),this.iFightPid=t.GetNextInt(),this.rbs.iSchoolId=t.GetNextByte(),this.rbs.iInGot=t.GetNextInt(),this.iFightMid=t.GetNextInt(),this.rbs.iLev=t.GetNextShort(),GmMe.iSecond=t.GetNextInt(),GmMe.iTime[0]=t.GetNextShort(),GmMe.iTime[1]=t.GetNextShort(),GmMe.iTime[2]=t.GetNextShort(),GmMe.iMillis=u.default.get_ms(),this.rbs.iLev<=0&&(r.default.SYSW>=1280?x.default.iScreenLS=192e3/(r.default.SYSW-800):x.default.iScreenLS=400*(r.default.SYSW-800)/480,x.default.iSameRate=0),n.default.gi().mta_record(1,this.iRid,this.sName),this.bsc=!0,p.default.gi().LastStatType(0)!=p.default.GS_GAMEING&&p.default.gi().PopStat(1),g.default.x_record.ReadPrivateChat()}},{key:"getflag",value:function(t){var e,i,a=t.GetNextByte();if(0==a){for(i=this.iFlag[53],e=0;e<64;e++)this.iFlag[e]=t.GetNextInt();this.iFlag[14]|=1,this.bDark=0==(1&this.iFlag[2]),this.bPk=0==(2&this.iFlag[2]),this.bStandIn=0!=(4&this.iFlag[2]),this.bQP=0!=(8&this.iFlag[2]),this.lt1=u.default.get_ms()/1e3,I.default.ResetStoreCount(this.iFlag[8]),F.default.ResetStoreCount(this.iFlag[8]),GmMe.me.CalcFightAtt(),C.default.lg.SetStatByFlag(),M.default.fg.SetStatByFlag(),R.default.fg.SetStatByFlag(),T.default.bSELock=!1;var n=this.iFlag[53];this.iColor[0]=7&n,this.iColor[1]=n>>3&7,this.iColor[2]=n>>6&7,this.iColor[3]=n>>9&7,this.iColor[4]=n>>12&7,i!=n&&(this.bsc=!0)}else if(1==a)for(e=0;e<64;e++)this.iFlagExt[e]=t.GetNextInt()}},{key:"GetExt",value:function(t){var e=t.GetNextInt();0!=(e&this.RETEXT_CHANGETYPE)&&(this.iOldType=-1,this.iChangeType=t.GetNextShort(),this.iChangeLast=t.GetNextInt(),this.iChangeSkill=t.GetNextInt(),this.iChangeAtt=t.GetNextInt(),this.iChangeFC=t.GetNextByte()),0!=(e&this.RETEXT_LOCKER)&&(1==t.GetNextByte()?(this.bHaveLock=!0,1==t.GetNextByte()?this.bLocked=!0:this.bLocked=!1,this.iUnlockTime=t.GetNextInt()):this.bHaveLock=!1),0!=(e&this.RETEXT_ANGER)&&(this.rbs.iAnger=t.GetNextShort()),GmMe.me.CalcFightAtt(),this.ltex=u.default.get_ms()/1e3}},{key:"GetBaseAtt",value:function(t){var e,i=t.GetNextByte();if(0!=(i&this.RETBASE_HP)&&(this.rbs.iHp=t.GetNextShort(),this.rbs.iMaxHp=t.GetNextShort()),0!=(i&this.RETBASE_MP)&&(this.rbs.iMp=t.GetNextShort(),this.rbs.iMaxMp=t.GetNextShort()),0!=(i&this.RETBASE_POWER)&&(this.rbs.iPower=t.GetNextShort()),0!=(i&this.RETBASE_MONEY)&&(this.rbs.iMoney=t.GetNextInt()),0!=(i&this.RETBASE_EXP)&&(this.rbs.iExp=t.GetNextInt()),0!=(i&this.RETBASE_LEV)&&(this.rbs.iLev=t.GetNextShort(),n.default.gi().mta_record(2,this.rbs.iLev,""+b.default.iLastSever)),0!=(i&this.RETBASE_ATT))for(e=0;e<5;e++)this.rbs.iBaseAtt[e]=t.GetNextShort();0!=(i&this.RETBASE_OTHER)&&(this.rbs.iRenQi=t.GetNextShort(),this.rbs.sTitle=t.GetNextString(),P.default.mg.iTick=t.GetNextInt(),this.rbs.iInGot=t.GetNextInt(),this.rbs.iStore=t.GetNextInt(),this.rbs.iReserve=t.GetNextInt()),this.CalcFightAtt()}},{key:"getschoolskill",value:function(t){var e;for(e=0;e<6;e++)this.rbs.iSchoolSkill[e]=t.GetNextShort();(e=t.GetNextShort())!=this.rbs.iSchoolId&&0==this.rbs.iSchoolId&&(this.rbs.iSchoolId=e),this.rbs.iHp=t.GetNextShort(),this.rbs.iMp=t.GetNextShort(),this.CalcFightAtt()}},{key:"getgovskill",value:function(t){var e;for(e=0;e<8;e++)this.rbs.iGovSkill[e]=t.GetNextShort();this.CalcFightAtt()}},{key:"getgovxiu",value:function(t){var e;for(e=0;e<10;e++)this.rbs.iGovXiu[e][0]=t.GetNextShort(),this.rbs.iGovXiu[e][1]=t.GetNextInt()}},{key:"CalcFightAtt",value:function(){var t,e,i,a,n;t=5*this.rbs.iLev,e=this.rbs.iBaseAtt[0]+this.rbs.iBaseAtt[1]+this.rbs.iBaseAtt[2]+this.rbs.iBaseAtt[3]+this.rbs.iBaseAtt[4],this.rbs.nut=t-e,this.rbs.nut+=this.iFlag[54]%1e3;var r=s.default.iBaseAttAdd[this.iRace][0]+this.rbs.iBaseAtt[0]+this.rbs.iLev,o=s.default.iBaseAttAdd[this.iRace][1]+this.rbs.iBaseAtt[1]+this.rbs.iLev,u=s.default.iBaseAttAdd[this.iRace][2]+this.rbs.iBaseAtt[2]+this.rbs.iLev,l=s.default.iBaseAttAdd[this.iRace][3]+this.rbs.iBaseAtt[3]+this.rbs.iLev,f=s.default.iBaseAttAdd[this.iRace][4]+this.rbs.iBaseAtt[4]+this.rbs.iLev;for(this.iFlag[28]>0&&(r+=this.iFlag[27]>>24&31),this.iFlag[29]>0&&(o+=this.iFlag[27]>>18&31),this.iFlag[30]>0&&(u+=this.iFlag[27]>>12&31),this.iFlag[31]>0&&(l+=this.iFlag[27]>>6&31),this.iFlag[32]>0&&(f+=31&this.iFlag[27]),t=0;t<6;t++)-1!=k.default.gi().goods[1][t].iGid&&(k.default.gi().goods[1][t].iAtts[5]%1e5<=0||((i=(n=k.default.gi().goods[1][t]).iAtts[1]/1e4)>0&&(i/1e3==0?r+=i%1e3:i/1e3==1?o+=i%1e3:i/1e3==2?u+=i%1e3:i/1e3==3?l+=i%1e3:i/1e3==4&&(f+=i%1e3)),(a=n.iAtts[1]%1e4)>0&&(a/1e3==0?r+=a%1e3:a/1e3==1?o+=a%1e3:a/1e3==2?u+=a%1e3:a/1e3==3?l+=a%1e3:a/1e3==4&&(f+=a%1e3))));switch(this.rbs.iMaxHp=50*r+1e3,this.rbs.iMaxMp=30*o,this.rbs.iSpirit=3*r+7*o+4*u+2*l,this.rbs.iSpeed=r+u+l+7*f,this.iRace){case 0:this.rbs.iAttack=25*u/3,this.rbs.iDefence=15*l;break;case 1:this.rbs.iMaxHp+=10*r,this.rbs.iMaxMp-=5*o,this.rbs.iAttack=27*u/3,this.rbs.iDefence=14*l;break;case 2:this.rbs.iMaxHp-=5*r,this.rbs.iMaxMp+=5*o,this.rbs.iAttack=23*u/3,this.rbs.iDefence=16*l}for(t=0;t<6;t++)if(-1!=k.default.gi().goods[1][t].iGid&&!(k.default.gi().goods[1][t].iAtts[5]%1e5<=0)){switch(n=k.default.gi().goods[1][t],(e=g.default.de_goods.intValue(n.iTid,-1,3))>0&&(this.rbs.iAttack+=10*e),(e=g.default.de_goods.intValue(n.iTid,-1,25))>0&&(this.rbs.iSpeed+=10*e),(e=g.default.de_goods.intValue(n.iTid,-1,24))>0&&(this.rbs.iMaxHp+=10*e),(e=g.default.de_goods.intValue(n.iTid,-1,23))>0&&(this.rbs.iSpirit+=10*e),(e=g.default.de_goods.intValue(n.iTid,-1,22))>0&&(this.rbs.iMaxMp+=10*e),(e=g.default.de_goods.intValue(n.iTid,-1,21))>0&&(this.rbs.iDefence+=10*e),i=n.iAtts[0]/1e4,a=n.iAtts[0]%1e4,t){case 0:this.rbs.iDefence+=10*i,this.rbs.iMaxMp+=10*a;break;case 1:this.rbs.iSpirit+=10*a;break;case 2:this.rbs.iAttack+=10*a;break;case 3:this.rbs.iDefence+=10*a;break;case 4:this.rbs.iDefence+=10*i,this.rbs.iMaxHp+=10*a;break;case 5:this.rbs.iDefence+=10*i,this.rbs.iSpeed+=10*a}if((i=n.iAtts[2]/1e4)>0)switch(i/1e3){case 0:this.rbs.iAttack+=i%1e3*80;break;case 1:this.rbs.iDefence+=i%1e3*120;break;case 2:this.rbs.iMaxHp+=i%1e3*400;break;case 3:this.rbs.iSpeed+=i%1e3*80;break;case 4:this.rbs.iSpirit+=i%1e3*60}if((i=n.iAtts[2]%1e4)>0)switch(i/1e3){case 0:this.rbs.iAttack+=i%1e3*80;break;case 1:this.rbs.iDefence+=i%1e3*120;break;case 2:this.rbs.iMaxHp+=i%1e3*400;break;case 3:this.rbs.iSpeed+=i%1e3*80;break;case 4:this.rbs.iSpirit+=i%1e3*60}}if(GmMe.me.rbs.iSchoolId>0&&GmMe.me.rbs.iSchoolId<=9)for(t=0;t<6;t++)(e=g.default.de_skill.intValue(s.default.iSchoolSkillId[GmMe.me.rbs.iSchoolId][t],-1,17))>0&&(this.rbs.iAttack+=this.rbs.iSchoolSkill[t]*e/10),(e=g.default.de_skill.intValue(s.default.iSchoolSkillId[GmMe.me.rbs.iSchoolId][t],-1,18))>0&&(this.rbs.iDefence+=this.rbs.iSchoolSkill[t]*e/10),(e=g.default.de_skill.intValue(s.default.iSchoolSkillId[GmMe.me.rbs.iSchoolId][t],-1,19))>0&&(this.rbs.iSpeed+=this.rbs.iSchoolSkill[t]*e/10),(e=g.default.de_skill.intValue(s.default.iSchoolSkillId[GmMe.me.rbs.iSchoolId][t],-1,20))>0&&(this.rbs.iSpirit+=this.rbs.iSchoolSkill[t]*e/10),(e=g.default.de_skill.intValue(s.default.iSchoolSkillId[GmMe.me.rbs.iSchoolId][t],-1,21))>0&&(this.rbs.iMaxHp+=this.rbs.iSchoolSkill[t]*e/10),(e=g.default.de_skill.intValue(s.default.iSchoolSkillId[GmMe.me.rbs.iSchoolId][t],-1,22))>0&&(this.rbs.iMaxMp+=this.rbs.iSchoolSkill[t]*e/10);var h=A.default.mm.FindMounts(this.iFightMid);if(null!=h&&(this.rbs.iMaxHp+=h.iMaxHp,this.rbs.iMaxMp+=h.iMaxMp,this.rbs.iAttack+=h.iAttack,this.rbs.iDefence+=h.iDefence,this.rbs.iSpirit+=h.iSpirit,this.rbs.iSpeed+=h.iSpeed),this.rbs.tz=r,this.rbs.fl=o,this.rbs.ll=u,this.rbs.nl=l,this.rbs.mj=f,this.rbs.iMaxPower=5*this.rbs.iLev+100,this.rbs.iGovSkill[0]>0&&(this.rbs.iMaxHp+=this.rbs.iMaxHp*this.rbs.iGovSkill[0]/100),this.rbs.iGovSkill[6]>0&&(this.rbs.iMaxPower+=5*this.rbs.iGovSkill[6]),this.rbs.iGovSkill[7]>0&&(this.rbs.iMaxMp+=this.rbs.iMaxMp*this.rbs.iGovSkill[7]/100),this.iChangeType>0){if(this.iChangeAtt>0)switch(t=this.iChangeAtt%1e3,this.iChangeAtt/1e3%10){case 0:this.rbs.iMaxHp=this.rbs.iMaxHp*t/100;break;case 1:this.rbs.iSpirit=this.rbs.iSpirit*t/100;break;case 2:this.rbs.iAttack=this.rbs.iAttack*t/100;break;case 3:this.rbs.iDefence=this.rbs.iDefence*t/100;break;case 4:this.rbs.iSpeed=this.rbs.iSpeed*t/100}this.iChangeSkill>0&&(212==this.iChangeSkill?this.rbs.iDefence+=18*this.rbs.iLev:211==this.iChangeSkill?this.rbs.iDefence+=12*this.rbs.iLev:210==this.iChangeSkill&&(this.rbs.iDefence+=6*this.rbs.iLev),215==this.iChangeSkill?this.rbs.iAttack+=15*this.rbs.iLev:214==this.iChangeSkill?this.rbs.iAttack+=10*this.rbs.iLev:213==this.iChangeSkill&&(this.rbs.iAttack+=5*this.rbs.iLev))}this.rbs.iMaxHp=parseInt(this.rbs.iMaxHp/10),this.rbs.iMaxMp=parseInt(this.rbs.iMaxMp/10),this.rbs.iSpirit=parseInt(this.rbs.iSpirit/10),this.rbs.iAttack=parseInt(this.rbs.iAttack/10),this.rbs.iDefence=parseInt(this.rbs.iDefence/10),this.rbs.iSpeed=parseInt(this.rbs.iSpeed/10),this.rbs.iHp>this.rbs.iMaxHp&&(this.rbs.iHp=this.rbs.iMaxHp),this.rbs.iMp>this.rbs.iMaxMp&&(this.rbs.iMp=this.rbs.iMaxMp)}},{key:"CalcUserScore",value:function(){var t,e,i,a=0,n=0,s=0,r=0,o=0;for(t=1;t<=this.rbs.iLev;t++)a+=t;if(a*=2,this.rbs.iSchoolId>0){for(e=0,t=0;t<6;t++)this.rbs.iSchoolSkill[t]>0&&(e+=this.rbs.iSchoolSkill[t]);n=3*e}for(e=0,this.rbs.iGovSkill[0]>0&&(e+=this.rbs.iGovSkill[0]),this.rbs.iGovSkill[6]>0&&(e+=this.rbs.iGovSkill[6]),this.rbs.iGovSkill[7]>0&&(e+=this.rbs.iGovSkill[7]),n+=3*e,e=0,this.rbs.iGovSkill[1]>0&&(e+=this.rbs.iGovSkill[1]),this.rbs.iGovSkill[2]>0&&(e+=this.rbs.iGovSkill[2]),this.rbs.iGovSkill[3]>0&&(e+=this.rbs.iGovSkill[3]),this.rbs.iGovSkill[4]>0&&(e+=this.rbs.iGovSkill[4]),this.rbs.iGovSkill[5]>0&&(e+=this.rbs.iGovSkill[5]),n+=2*e,t=0;t<6;t++)k.default.gi().goods[1][t].iGid>0&&(s+=k.default.gi().goods[1][t].CalcSetScore());for(e=0,t=0;t<10;t++)e+=this.rbs.iGovXiu[t][0];for(i=8;e>0;)r+=e>=10?10*i:e*i,e-=10,i+=8;for(t=1;t<10;t++)0!=(this.iFlag[14]&1<<t)&&(o+=50);return(t=parseInt(a+n+s+r+o))!=this.iScore&&(this.iScore=t),this.CalcComplexScore(),this.iScore}},{key:"CalcComplexScore",value:function(){var t,e,i=0,a=new Int32Array(8);for(t=0;t<8;t++)G.default.mp.pets[t].iPid>0?(G.default.mp.pets[t].CalcPetScore(),a[t]=G.default.mp.pets[t].iScore):a[t]=0;for(t=0;t<7;t++)for(e=t+1;e<8;e++)a[t]<a[e]&&(i=a[t],a[t]=a[e],a[e]=i);return i=a[0]+a[1]+a[2]+a[3],(i+=this.iScore)!=this.iComplexScore&&(this.iComplexScore=i),this.iComplexScore}},{key:"bWeapChanged",value:function(){return!!this.bwc&&(this.bwc=!1,!0)}},{key:"bFaceChanged4",value:function(){return!!this.bfc4&&(this.bfc4=!1,!0)}},{key:"bFaceChanged6",value:function(){return!!this.bfc6&&(this.bfc6=!1,!0)}},{key:"bFaceChanged8",value:function(){return!!this.bfc8&&(this.bfc8=!1,!0)}},{key:"bStatChanged",value:function(){return!!this.bsc&&(this.bsc=!1,!0)}}]),GmMe}();i.default=q,q.iTime=new Int32Array(3),q.iSecond,q.iMillis,q.MAXTEAMOLE=5,q.MAXMARK=60,q.iTeamZhen=0,q.iTeamMap=0,q.me,q.sSex=function(t){return 0==t?"女":"男"},q.sRace=function(t){return 0==t?"人":1==t?"魔":"仙"},q.face_sti=function(t){return"上"==t?0:"左上"==t?1:"左"==t?2:"左下"==t?3:"下"==t?4:"右下"==t?5:"右"==t?6:"右上"==t?7:0},q.stat_sti=function(t){return"站立"==t?0:"跑步"==t?1:"战斗站立"==t?2:"普通攻击"==t?3:"施法"==t?4:"防御"==t?5:"死亡过程"==t?6:"被攻击"==t?6:"死亡"==t?6:7}},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/SortAnima":6,"../../../../config/XDefine":7,"../../../../engine/PackageTools":9,"../../../../engine/control/XButton":14,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engtst/mgm/FireworksEffect":64,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/History/XRecordFast":67,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/gameing/Gameing":91,"../../../../engtst/mgm/gameing/NearRole":93,"../../../../engtst/mgm/gameing/fast/FastButton":118,"../../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../../engtst/mgm/gameing/fight/XFight":130,"../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../engtst/mgm/gameing/help/ExtHelp/ExtHelp":183,"../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../engtst/mgm/gameing/help/TopIcon/FirstCharge":193,"../../../../engtst/mgm/gameing/help/TopIcon/FiveGift":194,"../../../../engtst/mgm/gameing/help/TopIcon/LoginGift":198,"../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../engtst/mgm/gameing/me/goods/MyGoodsFrame":223,"../../../../engtst/mgm/gameing/me/mounts/Mounts":241,"../../../../engtst/mgm/gameing/me/mounts/MyMounts":243,"../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../engtst/mgm/gameing/me/pet/Pets":247,"../../../../engtst/mgm/gameing/me/pet/PetsFrame":248,"../../../../engtst/mgm/gameing/me/shop/MySell":259,"../../../../engtst/mgm/gameing/me/team/MyTeam":266,"../../../../engtst/mgm/gameing/me/team/TeamRequestList":270,"../../../../engtst/mgm/gameing/me/trade/GoodsStoreFrame":272,"../../../../engtst/mgm/gameing/me/trade/PetStoreFrame":275,"../../../../map/DrawBuffer":283,"../../../../map/MapManager":286,"../../../../zero/Interface/PublicInterface":318,"./_ROLEBASE":214}],212:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../config/SortAnima")),o=_interopRequireDefault(t("../../../../config/XDefine")),u=_interopRequireDefault(t("../../../../engine/BaseClass")),l=_interopRequireDefault(t("../../../../engine/control/XButton")),f=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),h=_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),d=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),c=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engine/xms/XmsEngine"))),m=_interopRequireDefault(t("../../../../engtst/mgm/FireworksEffect")),g=_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),_=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),p=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),b=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),D=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),y=_interopRequireDefault(t("../../../../engtst/mgm/frame/UIList")),w=_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),S=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),x=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),P=_interopRequireDefault(t("../../../../engtst/mgm/gameing/gov/MyGov")),v=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods")),R=_interopRequireDefault(t("./GmMe")),M=_interopRequireDefault(t("./AddPoint"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var C=function(t){function MyAttFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyAttFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MyAttFrame.__proto__||Object.getPrototypeOf(MyAttFrame)).call(this));for(i._SVIPT=[["特权","剩余天数<=30","剩余天数<=60","剩余天数>60"],["大表情","可使用","可使用","可使用"],["自动回合数","无限","无限","无限"],["使用三倍卡","+1次","+1次","+1次"],["活跃度","+6点","+8点","+10点"],["门派奖励","+20%","+30%","+40%"],["签到奖励","","+50%","+100%"],["体力恢复速度","","+1点","+2点"],["实时仓库","","","可使用"]],i.list_vip=null,i.pm3f=d.default.gi(),MyAttFrame.iW=916,MyAttFrame.iH=608,MyAttFrame.iX=(s.default.SCRW-MyAttFrame.iW)/2,MyAttFrame.iY=(s.default.SCRH-MyAttFrame.iH)/2,i.btn_close=new f.default(g.default.xani_button),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(MyAttFrame.iX+MyAttFrame.iW-35,MyAttFrame.iY-25,60,60),i.iPage=0,i.iPage_jn=1,i.btn_page=new Array(4),e=0;e<4;e++)i.btn_page[e]=new f.default(g.default.xani_nui2),i.btn_page[e].InitButton("右侧标签"),i.btn_page[e].Move(MyAttFrame.iX+MyAttFrame.iW-15,MyAttFrame.iY+40+125*e,50,140);for(i.btn_title=new f.default(g.default.xani_nui2),i.btn_title.InitButton("宠物改名按钮"),i.btn_upgrade=new f.default(g.default.xani_nui2),i.btn_upgrade.sName="升 级",i.btn_upgrade.InitButton("按钮1_110"),i.btn_addpoint=new f.default(g.default.xani_nui2),i.btn_addpoint.sName="加 点",i.btn_addpoint.InitButton("按钮1_110"),i.btn_vip=new f.default(g.default.xani_nui2),i.btn_vip.sName="开通/续费",i.btn_vip.InitButton("按钮3"),i.btn_vip.iNameSize=25,i.btn_vip.iNameColor=4294956800,i.btn_mpjn=new f.default(g.default.xani_nui2),i.btn_mpjn.sName="门派技能",i.btn_mpjn.InitButton("按钮2"),i.btn_mpjn.iNameSize=25,i.btn_mpjn.iNameColor=4294956800,i.btn_fzjn=new f.default(g.default.xani_nui2),i.btn_fzjn.sName="辅助技能",i.btn_fzjn.InitButton("按钮2"),i.btn_fzjn.iNameSize=25,i.btn_fzjn.iNameColor=4294956800,i.btn_jqjn=new f.default(g.default.xani_nui2),i.btn_jqjn.sName="剧情技能",i.btn_jqjn.InitButton("按钮2"),i.btn_jqjn.iNameSize=25,i.btn_jqjn.iNameColor=4294956800,i.iMainSkillPoint=0,i.btn_mainskill=new Array(6),e=0;e<6;e++)i.btn_mainskill[e]=new l.default(g.default.xani_ui),i.btn_mainskill[e].bCheckByRect=!0;for(i.iGovSkillPoint=-1,i.btn_govskill=new Array(10),e=0;e<10;e++)i.btn_govskill[e]=new l.default(g.default.xani_ui),i.btn_govskill[e].bCheckByRect=!0;i.aa_body=new h.default,i.aa_weapon=new h.default,i.iWeapTid=v.default.gi().GetWeaponTid();var a=2*R.default.me.iRace+R.default.me.iSex;for(g.default.xani_newrole[a].InitAnimaWithName("站立_下",i.aa_body),i.iWeapTid>=0&&g.default.xani_weap[2*R.default.me.iRace+R.default.me.iSex][r.default.WeapFlag(i.iWeapTid)].InitAnimaWithName("站立_下",i.aa_weapon),i.aa_cls=new Array(5),e=0;e<r.default._CHANGECOLOR[a].length;e++)R.default.me.iColor[e]<=0||R.default.me.iColor[e]>=6||(i.aa_cls[e]=new h.default,g.default.xani_color[a][R.default.me.iColor[e]-1].InitAnimaWithName(r.default._CHANGECOLOR[a][e]+"_站立_下",i.aa_cls[e]));return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MyAttFrame,u.default),a(MyAttFrame,[{key:"Draw_0",value:function(t,e){var i;D.default.new_framein(MyAttFrame.iX+28,MyAttFrame.iY+28,397,552),D.default.new_framein(MyAttFrame.iX+435,MyAttFrame.iY+28,451,552);var a=MyAttFrame.iX+28,s=MyAttFrame.iY+28;MyAttFrame.wordframe(a+198.5-100,s+30,200),d.default.gi().DrawText_2(a+198.5,s+30+16,R.default.me.sName,4294967295,22,101,1,1,0,-2,-2,3,4278190080),R.default.me.CalcUserScore(),d.default.gi().DrawText_2(a+198.5,s+30+16+40,"评分:"+R.default.me.iScore,4294967295,26,101,1,1,0,-2,-2,3,4278190080),g.default.xani_nui2.DrawAnima(a+198.5-130,s+90,"宠物背景",0),m.default.DrawAura(0,a+198.5,s+280,null,0),this.aa_body.Draw(a+198.5,s+280);var o=2*R.default.me.iRace+R.default.me.iSex;for(i=0;i<r.default._CHANGECOLOR[o].length;i++)R.default.me.iColor[i]<=0||R.default.me.iColor[i]>=6||(this.aa_cls[i].iFrame=this.aa_body.iFrame,this.aa_cls[i].Draw(a+198.5,s+280));this.aa_body.NextFrame(),this.iWeapTid>=0&&(this.aa_weapon.Draw(a+198.5,s+280),this.aa_weapon.NextFrame()),i=370,D.default.ui3_Text1_(a+20,s+i+0,67,100,"号码",""+R.default.me.iRid),D.default.ui3_Text1_(a+20,s+i+40,67,100,"等级",""+R.default.me.rbs.iLev),D.default.ui3_Text1_(a+198.5+10,s+i+0,67,100,"门派",""+n.default.sSchools[R.default.me.rbs.iSchoolId]),-1==P.default.mg.iRealGid?D.default.ui3_Text1_(a+198.5+10,s+i+40,67,100,"帮派","无帮派"):D.default.ui3_Text1_(a+198.5+10,s+i+40,67,100,"帮派",P.default.mg.sName),R.default.me.rbs.sTitle.length<=0?D.default.ui3_Text1_(a+20,s+i+80+30,67,200,"称谓","无"):D.default.ui3_Text1_(a+20,s+i+80+30,67,200,"称谓",R.default.me.rbs.sTitle),this.btn_title.Move(a+290,s+i+80+30+16-30,60,60),this.btn_title.Draw();var u=MyAttFrame.iX+470,l=MyAttFrame.iY+56;g.default.xani_nui2.DrawAnima(u,l,"提示1",0),d.default.gi().DrawText_2(u+33.5,l+16,"气血",4294967295,20,101,1,1,0,-2,-2,3,4278190080),g.default.xani_nui2.DrawAnima(u,l+38,"提示1",0),d.default.gi().DrawText_2(u+33.5,l+38+16,"魔法",4294967295,20,101,1,1,0,-2,-2,3,4278190080),g.default.xani_nui2.DrawAnima(u,l+76,"提示1",0),d.default.gi().DrawText_2(u+33.5,l+76+16,"经验",4294967295,20,101,1,1,0,-2,-2,3,4278190080),g.default.xani_nui2.DrawAnima(u,l+114,"提示1",0),d.default.gi().DrawText_2(u+33.5,l+114+16,"愤怒",4294967295,20,101,1,1,0,-2,-2,3,4278190080),g.default.xani_nui2.DrawAnima(u,l+152,"提示1",0),d.default.gi().DrawText_2(u+33.5,l+152+16,"体力",4294967295,20,101,1,1,0,-2,-2,3,4278190080);var f=67,h=38;g.default.xani_nui2.DrawAnima(u+f,l,"宠物大血条",0),g.default.xani_nui2.DrawAnima(u+f,l+h,"宠物大血条",0),g.default.xani_nui2.DrawAnima(u+f,l+76,"宠物大血条",0),g.default.xani_nui2.DrawAnima(u+f,l+114,"宠物大血条",0),g.default.xani_nui2.DrawAnima(u+f,l+152,"宠物大血条",0),d.default.gi().SetViewClip(u,l,u+f+311*R.default.me.rbs.iHp/R.default.me.rbs.iMaxHp,l+480),g.default.xani_nui2.DrawAnima(u+f+2,l+3,"宠物大血条",1),d.default.gi().NoClip(),d.default.gi().SetViewClip(u,l,u+f+311*R.default.me.rbs.iMp/R.default.me.rbs.iMaxMp,l+480),g.default.xani_nui2.DrawAnima(u+f+2,l+h+3,"宠物大血条",2),d.default.gi().NoClip();var c=311;c=c*R.default.me.rbs.iExp/n.default.iUpgradeExp[R.default.me.rbs.iLev],d.default.gi().SetViewClip(u,l,u+f+c,l+480),g.default.xani_nui2.DrawAnima(u+f+2,l+76+3,"宠物大血条",3),d.default.gi().NoClip(),d.default.gi().SetViewClip(u,l,u+f+311*R.default.me.rbs.iAnger/150,l+480),g.default.xani_nui2.DrawAnima(u+f+2,l+114+3,"宠物大血条",5),d.default.gi().NoClip(),d.default.gi().SetViewClip(u,l,u+f+311*R.default.me.rbs.iPower/R.default.me.rbs.iMaxPower,l+480),g.default.xani_nui2.DrawAnima(u+f+2,l+152+3,"宠物大血条",4),d.default.gi().NoClip(),d.default.gi().DrawTextEx(u+f+155.5,l+15,R.default.me.rbs.iHp+"/"+R.default.me.rbs.iMaxHp,4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(u+f+155.5,l+40+13,R.default.me.rbs.iMp+"/"+R.default.me.rbs.iMaxMp,4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(u+f+155.5,l+80+12,R.default.me.rbs.iExp+"/"+n.default.iUpgradeExp[R.default.me.rbs.iLev],4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(u+f+155.5,l+120+13,R.default.me.rbs.iAnger+"/150",4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(u+f+155.5,l+160+12,R.default.me.rbs.iPower+"/"+R.default.me.rbs.iMaxPower,4294967295,20,101,1,1,0,-2,-2),t=MyAttFrame.iX+472,e=MyAttFrame.iY+242+35,D.default.ui3_Text1_(t,e,67,100,"体质",""+R.default.me.rbs.tz),D.default.ui3_Text1_(t,e+40,67,100,"法力",""+R.default.me.rbs.fl),D.default.ui3_Text1_(t,e+80,67,100,"力量",""+R.default.me.rbs.ll),D.default.ui3_Text1_(t,e+120,67,100,"耐力",""+R.default.me.rbs.nl),D.default.ui3_Text1_(t,e+160,67,100,"敏捷",""+R.default.me.rbs.mj),D.default.ui3_Text1_(t+210,e,67,100,"灵力",""+R.default.me.rbs.iSpirit),D.default.ui3_Text1_(t+210,e+40,67,100,"伤害",""+R.default.me.rbs.iAttack),D.default.ui3_Text1_(t+210,e+80,67,100,"防御",""+R.default.me.rbs.iDefence),D.default.ui3_Text1_(t+210,e+120,67,100,"速度",""+R.default.me.rbs.iSpeed),D.default.ui3_Text1_(t+210,e+160,67,100,"潜能",""+R.default.me.rbs.nut),this.btn_upgrade.Move(MyAttFrame.iX+472,MyAttFrame.iY+503,110,52),this.btn_addpoint.Move(MyAttFrame.iX+733,MyAttFrame.iY+503,110,52),this.btn_upgrade.Draw(),this.btn_addpoint.Draw()}},{key:"Draw_12",value:function(t,e){var i,a,n,s;i=MyAttFrame.iX+28,a=MyAttFrame.iY+28,n=MyAttFrame.iW-28-28,s=MyAttFrame.iH-28-28,D.default.new_framein(i,a,n,s),1==this.iPage_jn?(this.btn_mpjn.iNameColor=4294956800,this.btn_fzjn.iNameColor=4289781990,this.btn_jqjn.iNameColor=4289781990,this.Draw_1(t,e)):2==this.iPage_jn?(this.btn_mpjn.iNameColor=4289781990,this.btn_fzjn.iNameColor=4294956800,this.btn_jqjn.iNameColor=4289781990,this.Draw_2(t,e)):3==this.iPage_jn&&(this.btn_mpjn.iNameColor=4289781990,this.btn_fzjn.iNameColor=4289781990,this.btn_jqjn.iNameColor=4294956800),this.btn_mpjn.Move(MyAttFrame.iX+53,MyAttFrame.iY+53,145,56),this.btn_mpjn.Draw(),this.btn_fzjn.Move(MyAttFrame.iX+209,MyAttFrame.iY+53,145,56),this.btn_fzjn.Draw()}},{key:"Draw_1",value:function(t,e){if(R.default.me.rbs.iSchoolId<=0)this.pm3f.DrawTextEx(t+150,e+150,"你还未加入门派",4294967295,20,101,1,1,0,-2,-2);else{var i,a,s,r=R.default.me.rbs.iSchoolId;for(D.default.new_frameon(MyAttFrame.iX+459,MyAttFrame.iY+115,408,109,0),D.default.new_frameon(MyAttFrame.iX+459,MyAttFrame.iY+235,408,324,0),i=0;i<6;i++){s=n.default.iSchoolSkillId[r][i];var o=0,u=0;switch(i){case 0:o=MyAttFrame.iX+200,u=MyAttFrame.iY+115+11;break;case 1:o=MyAttFrame.iX+350,u=MyAttFrame.iY+188+11;break;case 2:o=MyAttFrame.iX+350,u=MyAttFrame.iY+341+11;break;case 3:o=MyAttFrame.iX+200,u=MyAttFrame.iY+414+11;break;case 4:o=MyAttFrame.iX+50,u=MyAttFrame.iY+341+11;break;case 5:o=MyAttFrame.iX+50,u=MyAttFrame.iY+188+11}g.default.xani_nui2.DrawAnima(o,u,"技能框",0),g.default.xani_nicon.DrawAnima_aa(o,u,g.default.de_skill.strValue(s,0,5),0),g.default.xani_nui2.DrawAnimaEx(o+1,u+87,"可变长文字框",0,101,1,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(o+20+1,u+87,"可变长文字框",1,101,2,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(o+20+40+1,u+87,"可变长文字框",2,101,1,1,0,0,0),d.default.gi().DrawTextEx(o+42,u+92+12,""+R.default.me.rbs.iSchoolSkill[i],4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawText_2(o+42,u+92+40,g.default.de_skill.strValue(s,0,6),4294944e3,20,101,1,1,0,-2,-2,3,4278190080),this.btn_mainskill[i].Move(o,u,92,92)}var l=5;for(s=n.default.iSchoolSkillId[r][this.iMainSkillPoint],g.default.xani_nui2.DrawAnima(MyAttFrame.iX+466+5,MyAttFrame.iY+123+l,"技能框",0),g.default.xani_nicon.DrawAnima_aa(MyAttFrame.iX+466+5,MyAttFrame.iY+123+l,g.default.de_skill.strValue(s,0,5),0),d.default.gi().DrawText_2(MyAttFrame.iX+466+42+5,MyAttFrame.iY+123+90+l-10,g.default.de_skill.strValue(s,0,6),4294944e3,20,101,1,1,0,-2,-2,3,4278190080),w.default.gi().Format("#cffe0c0"+g.default.de_skill.strValue(s,0,3),309,20),w.default.gi().Draw(MyAttFrame.iX+560+5,MyAttFrame.iY+121+l),l=8,i=0;i<3;i++)g.default.xani_nui2.DrawAnima(MyAttFrame.iX+466+5,MyAttFrame.iY+238+109*i+l,"技能框",0);if(this.iMainSkillPoint>=0&&this.iMainSkillPoint<6)for(s=n.default.iSchoolSkillId[r][this.iMainSkillPoint],i=0;i<10&&!((a=g.default.de_skill.intValue(s,i,4))<=0);i++)g.default.xani_nicon.DrawAnima_aa(MyAttFrame.iX+466+5,MyAttFrame.iY+238+109*i+l,g.default.de_skill.strValue(a,0,5),0),d.default.gi().DrawText_2(MyAttFrame.iX+466+42+5,MyAttFrame.iY+238+109*i+90+l-10,g.default.de_skill.strValue(a,0,6),4294959296,20,101,1,1,0,-2,-2,3,4278190080),w.default.gi().Format("#cffe0c0"+g.default.de_skill.strValue(a,0,3),309,20),w.default.gi().Draw(MyAttFrame.iX+560+5,MyAttFrame.iY+238+109*i+l)}}},{key:"Draw_2",value:function(t,e){var i,a,s,r,o;for(D.default.new_frameon(MyAttFrame.iX+537,MyAttFrame.iY+118,331,269,0),D.default.new_frameon(MyAttFrame.iX+537,MyAttFrame.iY+417,331,144,0),g.default.xani_nui2.DrawAnima(MyAttFrame.iX+554,MyAttFrame.iY+127,"背景图案",0),i=0;i<12;i++)g.default.xani_nui2.DrawAnima(MyAttFrame.iX+52+i%4*120,MyAttFrame.iY+119+150*parseInt(i/4),"技能框",0);for(i=0;i<10;i++){if(s=0,r=MyAttFrame.iX+52+i%4*120,o=MyAttFrame.iY+119+i/4*150,this.btn_govskill[i].Move(-100,-100,60,60),i<8){if(R.default.me.rbs.iGovSkill[i]<=0)continue;s=n.default.iGovSkillId[i],g.default.xani_nicon.DrawAnima_aa(r,o,g.default.de_skill.strValue(s,0,5),0),g.default.xani_nui2.DrawAnimaEx(r+1,o+87,"可变长文字框",0,101,1,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(r+20+1,o+87,"可变长文字框",1,101,2,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(r+20+40+1,o+87,"可变长文字框",2,101,1,1,0,0,0),d.default.gi().DrawTextEx(r+42,o+92+12,""+R.default.me.rbs.iGovSkill[i],4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawText_2(r+42,o+92+38,g.default.de_skill.strValue(s,0,6),4294944e3,20,101,1,1,0,-2,-2,3,4278190080)}else if(8==i){if((a=R.default.me.iFlag[33]%10)<=0)continue;s=203,g.default.xani_nicon.DrawAnima_aa(r,o,g.default.de_skill.strValue(s,0,5),0),g.default.xani_nui2.DrawAnimaEx(r+1,o+87,"可变长文字框",0,101,1,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(r+20+1,o+87,"可变长文字框",1,101,2,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(r+20+40+1,o+87,"可变长文字框",2,101,1,1,0,0,0),d.default.gi().DrawTextEx(r+42,o+92+12,""+a,4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawText_2(r+42,o+92+38,g.default.de_skill.strValue(s,0,6),4294944e3,20,101,1,1,0,-2,-2,3,4278190080)}else{if(9!=i)continue;if((a=R.default.me.iFlag[33]/10%10)<=0)continue;s=204,g.default.xani_nicon.DrawAnima_aa(r,o,g.default.de_skill.strValue(s,0,5),0),g.default.xani_nui2.DrawAnimaEx(r+1,o+87,"可变长文字框",0,101,1,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(r+20+1,o+87,"可变长文字框",1,101,2,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(r+20+40+1,o+87,"可变长文字框",2,101,1,1,0,0,0),d.default.gi().DrawTextEx(r+42,o+92+12,""+a,4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawText_2(r+42,o+92+38,g.default.de_skill.strValue(s,0,6),4294944e3,20,101,1,1,0,-2,-2,3,4278190080)}this.btn_govskill[i].Move(r,o,92,92),0,this.iGovSkillPoint==i&&0!=s&&(d.default.gi().DrawTextEx(MyAttFrame.iX+542,MyAttFrame.iY+421,g.default.de_skill.strValue(s,0,6),4294967295,22,101,1,1,0,0,0),w.default.gi().Format("#cffe0c0"+g.default.de_skill.strValue(s,0,3),320,20),w.default.gi().Draw(MyAttFrame.iX+542,MyAttFrame.iY+458))}}},{key:"Draw_3",value:function(t,e){var i,a,s,r,o;for(i=MyAttFrame.iX+28,a=MyAttFrame.iY+28,s=MyAttFrame.iW-28-28,r=MyAttFrame.iH-28-28,D.default.new_framein(i,a,s,r),D.default.new_frameon(MyAttFrame.iX+55,MyAttFrame.iY+54,84,294,0),D.default.new_frameon(MyAttFrame.iX+55,MyAttFrame.iY+344,84,211,0),g.default.xani_nui2.DrawAnima(MyAttFrame.iX+81,MyAttFrame.iY+126,"人物宠物修炼",0),g.default.xani_nui2.DrawAnima(MyAttFrame.iX+81,MyAttFrame.iY+383,"人物宠物修炼",1),g.default.xani_nui2.DrawAnimaEx(MyAttFrame.iX+135,MyAttFrame.iY+56,"标题条",0,101,1,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(MyAttFrame.iX+135+20,MyAttFrame.iY+56,"标题条",1,101,34,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(MyAttFrame.iX+135+720-20,MyAttFrame.iY+56,"标题条",2,101,1,1,0,0,0),d.default.gi().DrawText_2(MyAttFrame.iX+258,MyAttFrame.iY+82,"修炼选项",4293848576,30,101,1,1,0,-2,-2,3,4291639040),d.default.gi().DrawText_2(MyAttFrame.iX+496,MyAttFrame.iY+82,"等级",4293848576,30,101,1,1,0,-2,-2,3,4291639040),d.default.gi().DrawText_2(MyAttFrame.iX+737,MyAttFrame.iY+82,"修炼经验",4293848576,30,101,1,1,0,-2,-2,3,4291639040),o=0;o<6;o++)o%2==0?D.default.new_bgbar(MyAttFrame.iX+135,MyAttFrame.iY+107+40*o,720,20,"内容条1"):D.default.new_bgbar(MyAttFrame.iX+135,MyAttFrame.iY+107+40*o,720,20,"内容条2"),d.default.gi().DrawTextEx(MyAttFrame.iX+258,MyAttFrame.iY+129+40*o,g.default.de_skill.strValue(n.default.iGovXiuId[o],0,5),4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(MyAttFrame.iX+496,MyAttFrame.iY+129+40*o,R.default.me.rbs.iGovXiu[o][0]+"/"+parseInt(R.default.me.rbs.iLev/5),4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(MyAttFrame.iX+737,MyAttFrame.iY+129+40*o,R.default.me.rbs.iGovXiu[o][1]+"/"+parseInt(P.default.iBuildingUpgrad[R.default.me.rbs.iGovXiu[o][0]]/10),4294967295,20,101,1,1,0,-2,-2);for(g.default.xani_nui2.DrawAnimaEx(MyAttFrame.iX+135,MyAttFrame.iY+346,"标题条",0,101,1,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(MyAttFrame.iX+135+20,MyAttFrame.iY+346,"标题条",1,101,34,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(MyAttFrame.iX+135+720-20,MyAttFrame.iY+346,"标题条",2,101,1,1,0,0,0),d.default.gi().DrawText_2(MyAttFrame.iX+258,MyAttFrame.iY+373,"修炼选项",4293848576,30,101,1,1,0,-2,-2,3,4291639040),d.default.gi().DrawText_2(MyAttFrame.iX+496,MyAttFrame.iY+373,"等级",4293848576,30,101,1,1,0,-2,-2,3,4291639040),d.default.gi().DrawText_2(MyAttFrame.iX+737,MyAttFrame.iY+373,"修炼经验",4293848576,30,101,1,1,0,-2,-2,3,4291639040),o=6;o<10;o++)o%2==0?D.default.new_bgbar(MyAttFrame.iX+135,MyAttFrame.iY+107+40*o+50,720,20,"内容条1"):D.default.new_bgbar(MyAttFrame.iX+135,MyAttFrame.iY+107+40*o+50,720,20,"内容条2"),d.default.gi().DrawTextEx(MyAttFrame.iX+258,MyAttFrame.iY+129+40*o+50,g.default.de_skill.strValue(n.default.iGovXiuId[o],0,5),4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(MyAttFrame.iX+496,MyAttFrame.iY+129+40*o+50,R.default.me.rbs.iGovXiu[o][0]+"/"+parseInt(R.default.me.rbs.iLev/5),4294967295,20,101,1,1,0,-2,-2),d.default.gi().DrawTextEx(MyAttFrame.iX+737,MyAttFrame.iY+129+40*o+50,R.default.me.rbs.iGovXiu[o][1]+"/"+parseInt(P.default.iBuildingUpgrad[R.default.me.rbs.iGovXiu[o][0]]/10),4294967295,20,101,1,1,0,-2,-2);g.default.xani_nui2.DrawAnima(MyAttFrame.iX+55+2,MyAttFrame.iY+344,"分隔条1",0),g.default.xani_nui2.DrawAnima(MyAttFrame.iX+376,MyAttFrame.iY+56,"分隔条1",1),g.default.xani_nui2.DrawAnima(MyAttFrame.iX+618,MyAttFrame.iY+56,"分隔条1",1),g.default.xani_nui2.DrawAnima(MyAttFrame.iX+376,MyAttFrame.iY+346,"分隔条1",1),g.default.xani_nui2.DrawAnima(MyAttFrame.iX+618,MyAttFrame.iY+346,"分隔条1",1)}},{key:"Draw_4",value:function(t,e){var i,a,n,s,r,o;for(n=MyAttFrame.iX+28,s=MyAttFrame.iY+28,r=MyAttFrame.iW-28-28,o=MyAttFrame.iH-28-28,D.default.new_framein(n,s,r,o),null==this.list_vip&&(this.list_vip=new y.default(0,4,MyAttFrame.iW-28-28-30-30,370),this.list_vip.SetTitle(0,"特权",200,!1),this.list_vip.SetTitle(1,"剩余天数<=30",200,!0),this.list_vip.SetTitle(2,"剩余天数<=60",200,!0),this.list_vip.SetTitle(3,"剩余天数>60",200,!0)),this.list_vip.BeginDraw(MyAttFrame.iX+28+30,MyAttFrame.iY+28+80),i=0;i<8;i++)for(a=0;a<4;a++)this.list_vip.DrawUnit(a,i,this._SVIPT[i+1][a]);this.list_vip.FinishDraw(),R.default.me.iFlag[20]>60?D.default.frame_type2("黄色透明框a25_25",MyAttFrame.iX+28+30+600,MyAttFrame.iY+28+80+50,200,320,25,25):R.default.me.iFlag[20]>30?D.default.frame_type2("黄色透明框a25_25",MyAttFrame.iX+28+30+400,MyAttFrame.iY+28+80+50,200,320,25,25):R.default.me.iFlag[20]>0&&D.default.frame_type2("黄色透明框a25_25",MyAttFrame.iX+28+30+200,MyAttFrame.iY+28+80+50,200,320,25,25),d.default.gi().DrawText_2(MyAttFrame.iX+MyAttFrame.iW/2,MyAttFrame.iY+28+40,"会员特权",4278206039,40,101,1,1,0,-2,-2,3,4287496191),R.default.me.iFlag[20]<=0?d.default.gi().DrawTextEx(MyAttFrame.iX+MyAttFrame.iW/2+80,MyAttFrame.iY+28+40+20,"（还未开通）",4294901760,25,101,1,1,0,0,-3):d.default.gi().DrawTextEx(MyAttFrame.iX+MyAttFrame.iW/2+80,MyAttFrame.iY+28+40+20,"（已开通：剩余"+R.default.me.iFlag[20]+"天）",4294901760,25,101,1,1,0,0,-3),this.btn_vip.Move(MyAttFrame.iX+MyAttFrame.iW-28-30-141,MyAttFrame.iY+MyAttFrame.iH-28-30-49,141,49),this.btn_vip.Draw(),b.default.end(b.default.CONFIRM_VIP)&&b.default.bConfirm&&_.default.gi().s_SeverEvent(7,0,0,0,0)}},{key:"Draw",value:function(){var t;for(D.default.new_baseframe2(MyAttFrame.iX,MyAttFrame.iY,MyAttFrame.iW,MyAttFrame.iH,"人","物"),this.btn_close.Draw(),t=0;t<4;t++)this.iPage==t&&(this.btn_page[t].bMouseIn=!0,this.btn_page[t].bMouseDown=!0),this.btn_page[t].Draw();switch(D.default.new_lableword4(MyAttFrame.iX+MyAttFrame.iW-15,MyAttFrame.iY+50+0-4,40,70,0==this.iPage,"人","物","属","性"),D.default.new_lableword4(MyAttFrame.iX+MyAttFrame.iW-15,MyAttFrame.iY+50+130-8,40,70,1==this.iPage,"人","物","技","能"),D.default.new_lableword2(MyAttFrame.iX+MyAttFrame.iW-15,MyAttFrame.iY+50+260+7,40,70,2==this.iPage,"修","炼"),D.default.new_lableword2(MyAttFrame.iX+MyAttFrame.iW-15,MyAttFrame.iY+50+390-4,40,70,3==this.iPage,"会","员"),this.iPage){case 0:this.Draw_0(MyAttFrame.iX,MyAttFrame.iY);break;case 1:this.Draw_12(MyAttFrame.iX,MyAttFrame.iY);break;case 2:this.Draw_3(MyAttFrame.iX,MyAttFrame.iY);break;case 3:this.Draw_4(MyAttFrame.iX,MyAttFrame.iY)}if(b.default.end(b.default.CONFIRM_UPGRADE)&&b.default.bConfirm&&_.default.gi().s_UpgradeMe(R.default.me.rbs.iLev),M.default.end(M.default.ADDPOINT_USER)&&M.default.bConfirm){for(t=0;t<5;t++)R.default.me.rbs.iBaseAtt[t]+=M.default.iModifys[t];R.default.me.CalcFightAtt(),_.default.gi().s_AddPoint(M.default.iModifys[0],M.default.iModifys[1],M.default.iModifys[2],M.default.iModifys[3],M.default.iModifys[4])}}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<4;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&(this.iPage=a);if(this.btn_mpjn.ProcTouch(t,e,i)&&this.btn_mpjn.bCheck()&&(this.iPage_jn=1),this.btn_fzjn.ProcTouch(t,e,i)&&this.btn_fzjn.bCheck()&&(this.iPage_jn=2),this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&p.default.gi().PopStat(1),!0;switch(this.iPage){case 0:if(this.btn_upgrade.ProcTouch(t,e,i))return this.btn_upgrade.bCheck()&&(R.default.me.rbs.iLev>=80?S.default.easymsg.AddMessage("等级已到达上限"):R.default.me.rbs.iLev>=10&&R.default.me.rbs.iSchoolId<=0?x.default.fm.Open("少侠先去找个靠谱的门派拜师后再升级吧"):R.default.me.rbs.iLev>=70&&0==(4&R.default.me.iFlag[39])?x.default.fm.Open("你的等级上限还未突破70，请先完成修仙灵丹任务"):R.default.me.rbs.iExp<n.default.iUpgradeExp[R.default.me.rbs.iLev]?S.default.easymsg.AddMessage("经验不足，先去练练吧"):R.default.me.rbs.iLev>=10&&R.default.me.rbs.iLev<=25?b.default.start(b.default.CONFIRM_UPGRADE,"10~25级之间可以拜师#e是否确认升级？"):b.default.start(b.default.CONFIRM_UPGRADE,"是否确认升级？")),!0;if(this.btn_addpoint.ProcTouch(t,e,i))return this.btn_addpoint.bCheck()&&c.default.pxe.RunXms("人物加点"),!0;if(this.btn_title.ProcTouch(t,e,i))return this.btn_title.bCheck()&&(_.default.gi().s_proctitle(100,""),p.default.gi().PushStat(p.default.GS_SETTITLE)),!1;break;case 1:switch(this.iPage_jn){case 1:for(a=0;a<6;a++)this.btn_mainskill[a].ProcTouch(t,e,i)&&this.btn_mainskill[a].bCheck()&&(this.iMainSkillPoint=a);break;case 2:for(a=0;a<10;a++)this.btn_govskill[a].ProcTouch(t,e,i)&&this.btn_govskill[a].bCheck()&&(this.iGovSkillPoint=a)}break;case 2:break;case 3:if(this.btn_vip.ProcTouch(t,e,i))return this.btn_vip.bCheck()&&b.default.start(b.default.CONFIRM_VIP,"是否确定花费300元宝增加30天会员期限？"),!0}return!!o.default.bOnRect(e,i,MyAttFrame.iX,MyAttFrame.iY,MyAttFrame.iW,MyAttFrame.iH)}}]),MyAttFrame}();i.default=C,C.iX,C.iY,C.iW,C.iH,C.Open=function(t){var e=p.default.gi().PushStat(p.default.GS_MYATTFRAME);return e.iPage=t,e},C.wordframe=function(t,e,i){g.default.xani_nui2.DrawAnimaEx(t,e,"可变长文字框",0,101,1,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(t+15,e,"可变长文字框",1,101,1*(i-30)/20,1,0,0,0),g.default.xani_nui2.DrawAnimaEx(t+i-20,e,"可变长文字框",2,101,1,1,0,0,0)},C.Skill_Detail=function(t,e,i,a){var n,s,r;s=300,w.default.gi().FormatEx(g.default.de_skill.strValue(t,0,3),270,24,0,0,28),(r=110+w.default.gi().iH+10+20)<120&&(r=120),i-=r-85,(e-=s)<0&&(e=e+s+85),D.default.new_framewatch(e,i,s,r),g.default.xani_nicon.DrawAnima_aa(e+20,i+20,g.default.de_skill.strValue(t,0,5),0),d.default.gi().DrawTextEx(e+20+80+10,i+20,g.default.de_skill.strValue(t,0,6),4294967040,30,101,1,1,0,0,0),1==(n=g.default.de_skill.intValue(t,0,7))?d.default.gi().DrawTextEx(e+20+80+10,i+20+32,"战斗中使用",4294967040,22,101,1,1,0,0,0):0==n?d.default.gi().DrawTextEx(e+20+80+10,i+20+32,"漫游中使用",4294967040,22,101,1,1,0,0,0):3==n&&d.default.gi().DrawTextEx(e+20+80+10,i+20+32,"被动技能",4294967040,22,101,1,1,0,0,0),a>=0&&d.default.gi().DrawTextEx(e+20+80+10,i+20+56,"等级"+a,4294967040,22,101,1,1,0,0,0),w.default.gi().Draw(e+20,i+20+80+10)}},{"../../../../config/GameData":4,"../../../../config/GmConfig":5,"../../../../config/SortAnima":6,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engine/xms/XmsEngine":40,"../../../../engtst/mgm/FireworksEffect":64,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/UIList":80,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/gameing/gov/MyGov":160,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"./AddPoint":209,"./GmMe":211}],213:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/UIList"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function SetTitle(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SetTitle);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SetTitle.__proto__||Object.getPrototypeOf(SetTitle)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=290,e.iH=440,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_set=new o.default(l.default.xani_button),e.btn_set.InitButton("1号按钮90_60"),e.btn_set.Move(e.iX+e.iW-90-25,e.iY+e.iH-60-25,90,60),e.btn_set.sName="设置",e.btn_shadow=new o.default(l.default.xani_button),e.btn_shadow.InitButton("1号按钮90_60"),e.btn_shadow.Move(e.iX+25,e.iY+e.iH-60-25,90,60),e.btn_shadow.sName="隐藏",e.sTitles=new Array(64),e.iCount=0,e.bNoTitile=!1,e.list_titles=new c.default(0,1,e.iW-50,e.iH-50-60-10),e.list_titles.SetTitle(0,"",e.iW-50,!1),e.list_titles.iTitleHeight=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SetTitle,r.default),a(SetTitle,[{key:"getlist",value:function(t){var e;for(t.GetNextByte(),this.iCount=t.GetNextByte(),e=0;e<this.iCount;e++)this.sTitles[e]=t.GetNextString();0==this.iCount&&(this.bNoTitile=!0)}},{key:"Draw",value:function(){var t;if(d.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),this.bNoTitile)u.default.gi().DrawTextEx(this.iX+45,this.iY+45+5,"没有可用称谓",4278190080,25,101,1,1,0,0,0);else{for(this.list_titles.BeginDraw(this.iX+25,this.iY+25),t=0;t<this.iCount;t++)this.list_titles.DrawUnit(0,t,this.sTitles[t]);this.list_titles.FinishDraw()}this.btn_set.Draw(),this.btn_shadow.Draw()}},{key:"ProcTouch",value:function(t,e,i){return this.bNoTitile||this.list_titles.ProcTouch(t,e,i),this.btn_shadow.ProcTouch(t,e,i)?(this.btn_shadow.bCheck()&&(GmMe.me.rbs.sTitle="",f.default.gi().s_proctitle(99,""),h.default.gi().PopStat(1)),!0):this.btn_set.ProcTouch(t,e,i)?(this.btn_set.bCheck()&&this.list_titles.iLockPoint>=0&&this.list_titles.iLockPoint<this.iCount&&(GmMe.me.rbs.sTitle=this.sTitles[this.list_titles.iLockPoint],f.default.gi().s_proctitle(this.list_titles.iLockPoint,this.sTitles[this.list_titles.iLockPoint]),h.default.gi().PopStat(1)),!0):(3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||h.default.gi().PopStat(1),!1)}}]),SetTitle}();i.default=m},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/PackageTools":9,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/UIList":80}],214:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=t("../../../../engtst/mgm/gameing/me/school/LearnSkill"),s=(a=n)&&a.__esModule?a:{default:a};i.default=function _ROLEBASE(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_ROLEBASE),this.sTitle="",this.iLev=0,this.iGovXiu=new Array(10);for(var t=0;t<10;t++)this.iGovXiu[t]=new Int32Array(2);this.iGovSkill=new Int32Array(8),this.iSchoolSkill=new Int32Array(s.default.MAXSKILLCOUNT),this.iBaseAtt=new Int32Array(5)}},{"../../../../engtst/mgm/gameing/me/school/LearnSkill":256}],215:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../engine/control/XInputNumber")),l=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),d=(_interopRequireDefault(t("../../../../../engtst/mgm/MyAI")),_interopRequireDefault(t("../../../../../engtst/mgm/XStat"))),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),g=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/IngotMall"))),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function ExchangeMoney(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ExchangeMoney);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ExchangeMoney.__proto__||Object.getPrototypeOf(ExchangeMoney)).call(this));return e.pm3f=l.default.gi(),e.iW=500,e.iH=350,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.in_count=new u.default(f.default.xani_nui3),e.in_count.iNumber=1,e.in_count.MinMax(1,200),e.btn_exchange=new o.default(f.default.xani_button),e.btn_exchange.InitButton("1号按钮150_60"),e.btn_exchange.sName="兑换",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ExchangeMoney,r.default),a(ExchangeMoney,[{key:"Draw",value:function(){m.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+30,"铜币兑换",4294896766,32,101,1,1,0,-2,0,3,4278261038),this.pm3f.DrawText_2(this.iX+50,this.iY+30+60+14,"兑换数目",4294896766,28,101,1,1,0,0,-2,3,4278261038),this.in_count.Move(this.iX+50+120,this.iY+30+60-11,140),this.in_count.Draw(),this.pm3f.DrawText_2(this.iX+50+120+140+8,this.iY+30+60+14,"*10万",4294896766,28,101,1,1,0,0,-2,3,4278261038),this.pm3f.DrawText_2(this.iX+50,this.iY+30+60+60+14,"需要元宝",4294896766,28,101,1,1,0,0,-2,3,4278261038),this.pm3f.DrawTextEx(this.iX+50+120,this.iY+30+60+60+14,""+10*this.in_count.iNumber,4279324257,20,101,1,1,0,0,-2),this.pm3f.DrawText_2(this.iX+50,this.iY+30+60+60+60+14,"拥有元宝",4294896766,28,101,1,1,0,0,-2,3,4278261038),this.pm3f.DrawTextEx(this.iX+50+120,this.iY+30+60+60+60+14,""+_.default.me.rbs.iInGot,4279324257,20,101,1,1,0,0,-2),this.btn_exchange.Move(this.iX+this.iW/2-75,this.iY+this.iH-30-60,150,60),this.btn_exchange.Draw(),c.default.end(c.default.CONFIRM_GOTOCHARGE)&&c.default.bConfirm&&g.default.OpenEx()}},{key:"ProcTouch",value:function(t,e,i){return!!this.in_count.ProcTouch(t,e,i)||(this.btn_exchange.ProcTouch(t,e,i)?(this.btn_exchange.bCheck()&&(10*this.in_count.iNumber<=_.default.me.rbs.iInGot?(h.default.gi().s_SeverEvent(36,0,this.in_count.iNumber,0,0),d.default.gi().PopStat(1)):c.default.start(c.default.CONFIRM_GOTOCHARGE,"当前元宝不足，是否前往充值？")),!0):3==t&&!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)&&(d.default.gi().PopStat(1),!0))}}]),ExchangeMoney}();i.default=p,p.Open=function(){d.default.gi().PushStat(d.default.GS_EXCHANGEMONEY)}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInputNumber":19,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/MyAI":68,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/fast/IngotMall":121,"../../../../../engtst/mgm/gameing/me/GmMe":211}],216:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../engine/control/XButton")),u=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),l=_interopRequireDefault(t("../../../../../engine/control/XInputNumber")),f=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function GiveGoods(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GiveGoods);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(GiveGoods.__proto__||Object.getPrototypeOf(GiveGoods)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=790,i.iH=405,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.givegoods=new Array(3),i.btn_goods=new Array(3),i.xigsub=new Int32Array(3),i.in_count=new Array(3),e=0;e<3;e++)i.btn_goods[e]=new o.default(f.default.xani_nui3),i.btn_goods[e].InitButton("物品格子"),i.givegoods[e]=null,i.xigsub[e]=1,i.in_count[e]=new l.default(f.default.xani_nui3),i.in_count[e].iNumber=1;return i.in_money=new l.default(f.default.xani_nui3),i.in_money.iNumber=0,i.in_money.MinMax(0,g.default.me.rbs.iMoney),i.btn_give=new u.default(f.default.xani_nui2),i.btn_give.GiveGoods.sName="给予",i.btn_give.InitButton("按钮1_110"),i.bLocked=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(GiveGoods,r.default),a(GiveGoods,[{key:"Draw",value:function(){var t,e,i;for(e=this.iX+30,i=this.iY+30,c.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),t=0;t<3;t++)this.xigsub[t]=this.in_count[t].iNumber;for(GoodsDraw.new_DrawGoods(this.iX+30,this.iY+30,MyGoods.gi().goods[2],this.givegoods,this.xigsub),null!=this.lockgoods&&GoodsDraw.new_DrawRect(this.iX+30,this.iY+30,MyGoods.gi().goods[2],this.lockgoods,0),e+=450,t=0;t<3;t++)this.btn_goods[t].Move(e+100*t,i,80,80),this.btn_goods[t].Draw(),null!=this.givegoods[t]&&GoodsDraw.new_DrawOneGoods_ext(this.btn_goods[t].iX,this.btn_goods[t].iY,this.givegoods[t],this.xigsub[t]);for(t=0;t<3;t++)null!=this.givegoods[t]&&f.default.de_goods.intValue(this.givegoods[t].iTid,0,28)>1&&(this.in_count[t].Move(this.btn_goods[t].iX,this.btn_goods[t].iY+80,80),this.in_count[t].Draw());i+=150,this.pm3f.DrawTextEx(e,i+25,"铜币:",4278190080,30,101,1,1,0,0,-2),c.default.DrawTextFrame1(this.in_money.iX,this.in_money.iY,this.in_money.iW),this.in_money.Move(e+100,i,150),this.in_money.Draw(),i+=70,this.pm3f.DrawTextEx(e,i+15,"现金:"+g.default.me.rbs.iMoney,4278190080,30,101,1,1,0,0,-2),i+=50,c.default.new_Text(e,i,150,GiveGoods.sName),i+=40,c.default.new_Text(e,i,150,"号码:"+GiveGoods.iRid),this.btn_give.Move(this.iX+this.iW-30-110,this.iY+this.iH-30-52-10,110,52),this.btn_give.Draw(),GoodsDraw.bShowDetail()&&GoodsDraw.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){var a,n;if(this.in_money.ProcTouch(t,e,i))return!0;for(a=0;a<3;a++)if(null!=this.givegoods[a]&&(n=f.default.de_goods.intValue(this.givegoods[a].iTid,0,28))>1&&this.in_count[a].ProcTouch(t,e,i))return!0;if(this.lockgoods=GoodsDraw.new_LockGoods(e,i,this.iX+30,this.iY+30,MyGoods.gi().goods[2],t),GoodsDraw.NoMove(),3==t&&null!=this.lockgoods&&GoodsDraw.bCanProc()){if(0!=this.lockgoods.iAtts[7]&&123!=this.lockgoods.iTid)return m.default.easymsg.AddMessage("绑定物品不可给予"),!0;if(n=f.default.de_goods.intValue(this.lockgoods.iTid,0,28),this.givegoods[0]==this.lockgoods||this.givegoods[1]==this.lockgoods||this.givegoods[2]==this.lockgoods);else for(a=0;a<3;a++)if(null==this.givegoods[a]){this.givegoods[a]=this.lockgoods,this.in_count[a].iNumber=1,n>1&&this.in_count[a].MinMax(1,this.lockgoods.iCount);break}}for(a=0;a<3;a++)this.btn_goods[a].ProcTouch(t,e,i)&&this.btn_goods[a].bCheck()&&(this.givegoods[a]=null);if(this.btn_give.ProcTouch(t,e,i)){if(this.btn_give.bCheck()){for(this.in_money.iNumber>0&&this.in_money.iNumber<=g.default.me.rbs.iMoney&&(g.default.me.rbs.iMoney-=this.in_money.iNumber,h.default.gi().s_GiveGoods(0,GiveGoods.iRid,this.in_money.iNumber,1)),a=0;a<3;a++)null!=this.givegoods[a]&&-1!=this.givegoods[a].iGid&&(h.default.gi().s_GiveGoods(1,GiveGoods.iRid,this.givegoods[a].iGid,this.in_count[a].iNumber),(n=f.default.de_goods.intValue(this.givegoods[a].iTid,0,28))<=1?this.givegoods[a].iGid=-1:(this.givegoods[a].iCount-=this.in_count[a].iNumber,this.givegoods[a].iCount<=0&&(this.givegoods[a].iGid=-1)));d.default.gi().PopStat(1)}return!0}return 3!=t||s.default.bOnRect(e,i,this.iX,this.iY,this.iW,this.iH)||d.default.gi().PopStat(1),!1}}]),GiveGoods}();i.default=_,_.iRid,_.sName,_.GiveTo=function(t,e){_.iRid=t,_.sName=e,d.default.gi().PushStat(d.default.GS_GIVEGOODS)}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInputNumber":19,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/GmMe":211}],217:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),s=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(){function Goods(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Goods),this.iGid=-1,this.iAtts=new Int32Array(8),this.aa=new n.default,t=0;t<8;t++)this.iAtts[t]=0}return a(Goods,[{key:"copyfrom",value:function(t){var e;for(this.iGid=t.iGid,this.iTid=t.iTid,this.iCount=t.iCount,e=0;e<8;e++)this.iAtts[e]=t.iAtts[e];this.aa.copyfrom(t.aa)}},{key:"SetAtt",value:function(t,e,i,a,n,r,o,u,l,f,h){this.iGid=t,this.iTid=e,this.iCount=i,this.iAtts[0]=a,this.iAtts[1]=n,this.iAtts[2]=r,this.iAtts[3]=o,this.iAtts[4]=u,this.iAtts[5]=l,this.iAtts[6]=f,this.iAtts[7]=h,s.default.xani_ngoods.InitAnimaWithName(s.default.de_goods.strValue(e,-1,10),this.aa)}},{key:"CalcSetScore",value:function(){var t=s.default.de_goods.intValue(this.iTid,0,16);if(t>=0){if(this.iAtts[1]<=0)return this.iScore=0,0;var e,i,a,n=0,r=0;switch(t){case 0:r=1.2*(s.default.de_goods.intValue(this.iTid,0,21)+this.iAtts[0]/1e4)+.5*(s.default.de_goods.intValue(this.iTid,0,22)+this.iAtts[0]%1e4);break;case 1:r=2*(s.default.de_goods.intValue(this.iTid,0,23)+this.iAtts[0]);break;case 2:r=1.5*(s.default.de_goods.intValue(this.iTid,0,3)+this.iAtts[0]);break;case 3:r=1.2*(s.default.de_goods.intValue(this.iTid,0,21)+this.iAtts[0]);break;case 4:r=1.2*(s.default.de_goods.intValue(this.iTid,0,21)+this.iAtts[0]/1e4)+1*(s.default.de_goods.intValue(this.iTid,0,24)+this.iAtts[0]%1e4);break;case 5:r=1.2*(s.default.de_goods.intValue(this.iTid,0,21)+this.iAtts[0]/1e4)+1.5*(s.default.de_goods.intValue(this.iTid,0,25)+this.iAtts[0]%1e4)}return r+=2*(this.iAtts[1]/1e4%100+this.iAtts[1]%1e4%100),i=s.default.de_goods.intValue(this.iTid,0,9),(e=this.iAtts[4]>>20&1023)>0&&(n+=s.default.de_skill.intValue(e,0,38),r*=1.05),(e=this.iAtts[4]>>10&1023)>0&&(n+=s.default.de_skill.intValue(e,0,38),r*=1.05),(e=1023&this.iAtts[4])>0&&(n+=s.default.de_skill.intValue(e,0,38),r*=1.05),a=15*(this.iAtts[2]/1e4%100+this.iAtts[2]%1e4%100),this.iScore=r+i+n+a,this.iScore}return 0}}]),Goods}();i.default=r,r.GetSetNJ=function(t){var e=100+5*t;return 1e5*e+20*e}},{"../../../../../engine/graphics/AnimaAction":25,"../../../../../engtst/mgm/GmPlay":65}],218:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=_interopRequireDefault(t("../../../../../config/GameData")),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),o=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),u=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),l=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),f=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/land/MyLand"));_interopRequireDefault(t("./TmpGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var h=function GoodsDraw(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GoodsDraw)};i.default=h,h.bLocked=!1,h.GOODSEACHLINE=5,h.lastlock=null,h.swaplock=null,h.bUse=!1,h.bSwap=!1,h.aa_block=null,h.Reset=function(){h.bLocked=!1,h.lockgoods=null,h.iTouchDelay=0,h.bDrawing=!1,h.bMoving=!1,h.lastlock=null,h.swaplock=null,h.bUse=!1,h.bSwap=!1},h.new_DrawOneGoods_ext=function(t,e,i,a){i.aa.Draw(t,e),o.default.de_goods.intValue(i.iTid,0,28)>1&&r.default.gi().DrawTextEx(t+5,e+5,""+a,4294967295,30,101,1,1,0,0,0)},h.new_DrawOneGoods=function(t,e,i,a,n){var s,u;if(h.bMoving&&h.lockgoods==i&&(t=h.iMoveX-h.iOffX,e=h.iMoveY-h.iOffY),o.default.de_goods.intValue(i.iTid,0,28)>1){if(u=i.iCount,null!=a)for(s=0;s<a.length;s++)i==a[s]&&n[s]>0&&(u-=n[s]);if(u<=0)return;i.aa.Draw(t,e),r.default.gi().DrawTextEx(t+5,e+5,""+u,4294967295,24,101,1,1,0,0,0)}else{if(null!=a)for(s=0;s<a.length;s++)if(i==a[s]&&n[s]>0)return;i.aa.Draw(t,e)}},h.new_block=null,h.FRAMEW=430,h.FRAMEH=345,h.new_DrawGoods=function(t,e,i,a,n){var s,r,l,f;null==h.new_block&&(h.new_block=o.default.xani_nui3.InitAnimaWithName("物品格子",null));var d=0,c=0;u.default.new_frameon(t,e,430,345,0),t+=5,e+=5;var m=null;for(s=0;s<h.GOODSEACHLINE;s++)for(r=0;r<4;r++)l=t+85*s,f=e+85*r,h.new_block.Draw(l,f),h.bMoving&&h.lockgoods==i[r*h.GOODSEACHLINE+s]&&(d=h.iMoveX-h.iOffX,c=h.iMoveY-h.iOffY,m=h.lockgoods),-1!=i[r*h.GOODSEACHLINE+s].iGid&&h.new_DrawOneGoods(l,f,i[r*h.GOODSEACHLINE+s],a,n);null!=m&&h.new_DrawOneGoods(d,c,m,a,n)},h.new_LockPos=function(t,e,i,a){var n,s;for(t+=5,e+=5,n=0;n<h.GOODSEACHLINE;n++)for(s=0;s<4;s++)i[s*h.GOODSEACHLINE+n]==a&&(h.iLockX=t+85*n,h.iLockY=e+85*s,h.lastlock=a,h.lockgoods=a)},h.new_LockGoods=function(t,e,i,a,n,r){var o,u,l,f;if(i+=5,a+=5,3==r&&h.bLocked){if(h.bMoving)for(h.bMoving=!1,o=0;o<h.GOODSEACHLINE;o++)for(u=0;u<4;u++)if(l=i+85*o,f=a+85*u,s.default.bInRect(t,e,l,f,80,80)&&n[u*h.GOODSEACHLINE+o]!=h.lockgoods)return h.bSwap=!0,h.swaplock=n[u*h.GOODSEACHLINE+o],h.lastlock=null,h.lockgoods;h.lastlock==h.lockgoods?(h.bUse=!0,h.lastlock=null,h.lockgoods=null,h.bLocked=!1):(h.lastlock=h.lockgoods,h.bUse=!1)}if(1==r&&(h.bLocked=!1,h.bMoving=!1),1==r&&(h.bDrawing=!1),2==r&&h.bLocked)return h.iMoveX=t,h.iMoveY=e,h.bMoving=!0,h.lockgoods;for(o=0;o<h.GOODSEACHLINE;o++)for(u=0;u<4;u++)if(l=i+85*o,f=a+85*u,s.default.bInRect(t,e,l,f,80,80))return n[u*h.GOODSEACHLINE+o].iGid<=0?(h.lastlock=null,null):(1==r&&(h.bLocked=!0,h.lockgoods=n[u*h.GOODSEACHLINE+o],h.iLockX=l,h.iLockY=f,h.iOffX=t-l,h.iOffY=e-f,h.iTouchDelay=0),n[u*h.GOODSEACHLINE+o]);return h.lastlock=null,null},h.new_DrawRect=function(t,e,i,a,n){var s,r,u,l;if(null!=a)for(t+=5,e+=5,s=0;s<h.GOODSEACHLINE;s++)for(r=0;r<4;r++)u=t+85*s,l=e+85*r,-1!=i[r*h.GOODSEACHLINE+s].iGid&&i[r*h.GOODSEACHLINE+s]==a&&(0==n?o.default.xani_nui3.DrawAnimaEx(u,l,"物品选中框",0,101,1,1,0,0,0):o.default.xani_nui3.DrawAnimaEx(u,l,"物品选中框",1,101,1,1,0,0,0))},h.NoMove=function(){h.bMoving=!1},h.Lock_Goods=function(t,e,i,a,n,r){var o,u,l,f;if(3==r&&h.bLocked){if(h.bMoving)for(h.bMoving=!1,o=0;o<h.GOODSEACHLINE;o++)for(u=0;u<4;u++)if(l=i+64*o,f=a+64*u,s.default.bInRect(t,e,l,f,60,60)&&n[u*h.GOODSEACHLINE+o]!=h.lockgoods)return h.bSwap=!0,h.swaplock=n[u*h.GOODSEACHLINE+o],h.lastlock=null,h.lockgoods;h.lastlock==h.lockgoods?(h.bUse=!0,h.lastlock=null,h.lockgoods=null,h.bLocked=!1):(h.lastlock=h.lockgoods,h.bUse=!1)}if(1==r&&(h.bLocked=!1,h.bMoving=!1),1==r&&(h.bDrawing=!1),2==r&&h.bLocked)return h.iMoveX=t,h.iMoveY=e,h.bMoving=!0,h.lockgoods;for(o=0;o<h.GOODSEACHLINE;o++)for(u=0;u<4;u++)if(l=i+64*o,f=a+64*u,s.default.bInRect(t,e,l,f,60,60))return n[u*h.GOODSEACHLINE+o].iGid<=0?(h.lastlock=null,null):(1==r&&(h.bLocked=!0,h.lockgoods=n[u*h.GOODSEACHLINE+o],h.iLockX=l,h.iLockY=f,h.iOffX=t-l,h.iOffY=e-f,h.iTouchDelay=0),n[u*h.GOODSEACHLINE+o]);return h.lastlock=null,null},h.bCanMove=function(){return!!h.bSwap&&(h.bSwap=!1,!0)},h.bCanProc=function(){return!!h.bUse&&(h.bUse=!1,!0)},h.bShowDetail=function(){return null!=h.lastlock&&(h.iTouchDelay++,!0)},h.new_DrawDetailEx1=function(t,e,i,a){h.iDetailW=320,l.default.gi().FormatEx(a,h.iDetailW-30,24,0,0,28),h.iDetailH=110+l.default.gi().iH+20,e<h.iDetailW+20?e+=80:e-=h.iDetailW,(i=i+40-h.iDetailH/2)<0&&(i=0),i+h.iDetailH>n.default.SCRH&&(i=n.default.SCRH-h.iDetailH),h.iDetailX=e,h.iDetailY=i,u.default.new_framewatch(e,i,h.iDetailW,h.iDetailH),null==h.new_block&&(h.new_block=o.default.xani_nui3.InitAnimaWithName("物品格子",null)),h.new_block.Draw(e+20,i+20),o.default.xani_ngoods.DrawAnima_aa(e+20,i+20,o.default.de_goods.strValue(t,0,10),0),r.default.gi().DrawTextEx(e+20+80+10,i+20,o.default.de_goods.strValue(t,0,4),4294967040,30,101,1,1,0,0,0),l.default.gi().Draw(e+20,i+20+80+10)},h.detail_add="",h.new_DrawDetail=function(t,e,i,s){null==t&&(t=h.lockgoods),-1==e&&(e=h.iLockX),-1==i&&(i=h.iLockY);var d,c,m,g,_,p,b="",D="",y="";if(d=o.default.de_goods.strValue(t.iTid,-1,4),-1!=(p=o.default.de_goods.intValue(t.iTid,-1,16))){var w,S;y="基本属性",D="等级："+o.default.de_goods.strValue(t.iTid,-1,9);var x=[8,12,40,8,6],P=[0,0,0,0,0];switch(w=t.iAtts[0]/1e4,S=t.iAtts[0]%1e4,(c=t.iAtts[2]/1e4)>0&&(P[c/1e3]=x[c/1e3]*(c%1e3)),(c=t.iAtts[2]%1e4)>0&&(P[c/1e3]=x[c/1e3]*(c%1e3)),p){case 0:b="类型：头盔",y+="#e# #cffff00防御 +"+(o.default.de_goods.intValue(t.iTid,-1,21)+w+P[1]),y+="#e# #cffff00魔法 +"+(o.default.de_goods.intValue(t.iTid,-1,22)+S),P[1]=0;break;case 1:b="类型：饰品",y+="#e# #cffff00灵力 +"+(o.default.de_goods.intValue(t.iTid,-1,23)+S+P[4]),P[4]=0;break;case 2:b=0==(m=o.default.de_goods.intValue(t.iTid,-1,19))?"类型：武器(剑)":1==m?"类型：武器(刀)":"类型：武器(枪)",y+="#e# #cffff00伤害 +"+(o.default.de_goods.intValue(t.iTid,-1,3)+S+P[0]),P[0]=0;break;case 3:b=0==(m=o.default.de_goods.intValue(t.iTid,-1,20))?"类型：女衣":"类型：铠甲",y+="#e# #cffff00防御 +"+(o.default.de_goods.intValue(t.iTid,-1,21)+S+P[1]),P[1]=0;break;case 4:b="类型：腰带",y+="#e# #cffff00防御 +"+(o.default.de_goods.intValue(t.iTid,-1,21)+w+P[1]),y+="#e# #cffff00气血 +"+(o.default.de_goods.intValue(t.iTid,-1,24)+S+P[2]),P[1]=0,P[2]=0;break;case 5:b="类型：鞋子",y+="#e# #cffff00防御 +"+(o.default.de_goods.intValue(t.iTid,-1,21)+w+P[1]),y+="#e# #cffff00速度 +"+(o.default.de_goods.intValue(t.iTid,-1,25)+S+P[3]),P[1]=0,P[3]=0}P[0]>0&&(y+="#e# 伤害 +"+P[0]),P[1]>0&&(y+="#e# 防御 +"+P[1]),P[2]>0&&(y+="#e# 气血 +"+P[2]),P[3]>0&&(y+="#e# 速度 +"+P[3]),P[4]>0&&(y+="#e# 灵力 +"+P[4]),(w=t.iAtts[1]/1e4)>0&&(w/1e3==0?y+="#e# #c00ff00体质 +"+w%1e3:w/1e3==1?y+="#e# #c00ff00法力 +"+w%1e3:w/1e3==2?y+="#e# #c00ff00力量 +"+w%1e3:w/1e3==3?y+="#e# #c00ff00耐力 +"+w%1e3:w/1e3==4&&(y+="#e# #c00ff00敏捷 +"+w%1e3)),(S=t.iAtts[1]%1e4)>0&&(y+=w<=0?"#e# #c00ff00":" ",S/1e3==0?y+="体质 +"+S%1e3:S/1e3==1?y+="法力 +"+S%1e3:S/1e3==2?y+="力量 +"+S%1e3:S/1e3==3?y+="耐力 +"+S%1e3:S/1e3==4&&(y+="敏捷 +"+S%1e3)),t.iAtts[4]>0&&((c=t.iAtts[4]>>20&1023)>0&&(y+="#e# #cff8020"+o.default.de_skill.strValue(c,0,6)),(c=t.iAtts[4]>>10&1023)>0&&(y+="#e# #c80c0ff特效 : "+o.default.de_skill.strValue(c,0,6)),(c=1023&t.iAtts[4])>0&&(y+="#e# #c80c0ff特技 : "+o.default.de_skill.strValue(c,0,6))),y+="#e# #cffffff耐久度"+parseInt((t.iAtts[5]%1e5+19)/20)+"/"+parseInt(t.iAtts[5]/1e5),g=t.iAtts[2]/1e4,_=t.iAtts[2]%1e4,(g>0||_>0)&&(y+="#e#cb48cc8镶嵌等级 "+(g%1e3+_%1e3),y+="#e# 已镶嵌 ",g>0&&(y+=o.default.de_goods.strValue(parseInt(g/1e3)+101,0,4)),_>0&&(y+=","+o.default.de_goods.strValue(parseInt(_/1e3)+101,0,4))),t.CalcSetScore(),t.iScore>0&&(y+="#e# #cffffff评分："+t.iScore),(c=t.iAtts[3]/1e4)>0&&(d+=" +"+c)}if((p=o.default.de_goods.intValue(t.iTid,-1,31))>0&&(b="类型：材料",1==p&&(D="等级：一级"),2==p&&(D+="等级：二级"),3==p&&(D+="等级：三级")),-1!=(p=o.default.de_goods.intValue(t.iTid,-1,27))){b="类型："+a.default.sBigNum[p]+"级草药";var v=o.default.de_goods.intValue(t.iTid,-1,1),R=o.default.de_goods.intValue(t.iTid,-1,2);if(-1!=v&&(y+="#e# #c00ff00恢复气血"+v),-1!=R&&(y+="#e# #c00ff00恢复魔法"+R),3==p)switch(t.iTid){case 85:y+="#e# #c00ff00随机增加5~20点临时愤怒(进入战斗时恢复)",y+="#e# #cb48cc8效果持续24小时";break;case 86:y+="#e# #c00ff00随机增加5~20点敏捷",y+="#e# #cb48cc8效果持续24小时";break;case 87:y+="#e# #c00ff00随机增加5%~10%治疗能力",y+="#e# #cb48cc8效果持续24小时";break;case 88:y+="#e# #c00ff00随机增加5~20点力量",y+="#e# #cb48cc8效果持续24小时";break;case 89:y+="#e# #c00ff00随机增加5~20点耐力",y+="#e# #cb48cc8效果持续24小时";break;case 90:y+="#e# #c00ff00随机增加5%~20%固定伤害",y+="#e# #cb48cc8效果持续24小时";break;case 91:y+="#e# #c00ff00随机增加5%~10%物理和法术命中",y+="#e# #cb48cc8效果持续24小时";break;case 92:y+="#e# #c00ff00随机增加5~20点魔力",y+="#e# #cb48cc8效果持续24小时";break;case 93:y+="#e# #c00ff00随机增加5~20点体质",y+="#e# #cb48cc8效果持续24小时";break;case 94:y+="#e# #c00ff00随机增加1%~5%物理和法术暴击",y+="#e# #cb48cc8效果持续24小时"}y.length>0&&(y="#cffff00功效："+y)}if(-1!=(p=o.default.de_goods.intValue(t.iTid,-1,33)))switch(1==p&&(b="一级丹药",D="品质："+t.iAtts[0]),2==p&&(b="二级丹药"),3==p&&(b="三级丹药",D=t.iAtts[0]<40?"品质：低":t.iAtts[0]<80?"品质：中":"品质：高"),4==p&&(b="四级丹药"),302!=t.iTid&&303!=t.iTid&&304!=t.iTid&&305!=t.iTid&&306!=t.iTid&&307!=t.iTid&&308!=t.iTid&&309!=t.iTid&&310!=t.iTid&&311!=t.iTid||(y+="#e#cff0000只能在擂台使用"),t.iTid){case 185:t.iAtts[0]<40?y+="#e# #c00ff00临时提高人物修炼一级":t.iAtts[0]<80?y+="#e# #c00ff00临时提高人物修炼二级":y+="#e# #c00ff00临时提高人物修炼三级",y+="#e# #cb48cc8效果持续24小时";break;case 187:t.iAtts[0]<40?y+="#e# #c00ff00临时提高伤害结果20点":t.iAtts[0]<80?y+="#e# #c00ff00临时提高伤害结果40点":y+="#e# #c00ff00临时提高伤害结果60点",y+="#e# #cb48cc8效果持续24小时";break;case 188:t.iAtts[0]<40?y+="#e# #c00ff00临时提高宠物全属性8点":t.iAtts[0]<80?y+="#e# #c00ff00临时提高宠物全属性13点":y+="#e# #c00ff00临时提高宠物全属性18点",y+="#e# #cb48cc8效果持续24小时";break;case 165:case 302:y+="#e#cffffff恢复气血"+(6*t.iAtts[0]+300),y+="#e#cffffff恢复魔法"+(2*t.iAtts[0]+100);break;case 166:case 303:y+="#e#cffffff恢复气血"+(9*t.iAtts[0]+450);break;case 167:case 311:y+="#e#cffffff恢复气血"+(12*t.iAtts[0]+600);break;case 168:case 310:y+="#e#cffffff恢复魔法"+(3*t.iAtts[0]+150);break;case 169:case 309:y+="#e#cffffff恢复魔法"+(5*t.iAtts[0]+200);break;case 170:case 308:y+="#e#cffffff恢复气血"+(9*t.iAtts[0]+450),y+="#e#cffffff恢复魔法"+(3*t.iAtts[0]+150);break;case 171:case 307:y+="#e#cffffff解封并恢复气血"+(2*t.iAtts[0]+100);break;case 172:case 306:y+="#e#cffffff解封并恢复气血"+(6*t.iAtts[0]+300);break;case 173:case 305:y+="#e#cffffff复活并恢复气血"+(2*t.iAtts[0]+100);break;case 174:case 304:y+="#e#cffffff复活并恢复气血"+(6*t.iAtts[0]+300);break;case 175:y+="#e#cffffff增加坐骑力量资质";break;case 176:y+="#e#cffffff增加坐骑敏捷资质";break;case 177:y+="#e#cffffff增加坐骑法力资质";break;case 178:y+="#e#cffffff增加坐骑耐力资质";break;case 179:y+="#e#cffffff增加坐骑体质资质";break;case 180:y+="#e#cffffff增加200点宠物寿命";break;case 181:y+="#e#cffffff恢复坐骑灵气";break;case 182:y+="#e#cffffff增加坐骑成长";break;case 183:y+="#e#cffffff使用后立即恢复50点体力，3小时内恢复体力速度翻倍";break;case 184:y+="#e#cffffff使用后立即恢复人物等级*4+50体力值";break;case 191:y+="#e#c00ff00重置人物属性点"}if(-1!=(p=o.default.de_goods.intValue(t.iTid,-1,34)))switch(b="类型：烹饪",D="品质："+t.iAtts[0],t.iTid){case 197:y+="#e#c00ff00增加宠物寿命=品质*2，有几率被噎住降低资质";break;case 198:y+="#e#c00ff00使用后增加愤怒=15，只能在漫游中使用";break;case 199:y+="#e#c00ff00恢复自身愤怒=品质*1.2，减少自身防御=品质*1，只能在战斗中使用";break;case 200:y+="#e#c00ff00增加宠物寿命=品质/2";break;case 201:y+="#e#c00ff00增加宠物寿命=品质*2，有几率被噎住降低资质";break;case 202:y+="#e#c00ff00使用后增加愤怒=15，只能在战斗中使用";break;case 203:y+="#e#c00ff00使用后增加愤怒=品质*0.5，只能在战斗中使用";break;case 204:y+="#e#c00ff00使用后增加愤怒=品质*0.8，附加中毒状态，只能在战斗中使用";break;case 205:y+="#e#c00ff00使用后增加愤怒=品质*1，附加疯狂状态3~4回合，只能在战斗中使用";break;case 206:y+="#e#c00ff00使用后增加愤怒=品质/2，只能在漫游中使用"}if(-1!=(p=o.default.de_goods.intValue(t.iTid,-1,30)))switch(b="类型：道具",t.iTid){case 116:y+="#e#c00ff00+1万血池上限";break;case 117:y+="#e#c00ff00+1万蓝池上限";break;case 377:y+="#e#c00ff00+10万血池上限";break;case 378:y+="#e#c00ff00+10万蓝池上限";break;case 240:y+="#e#c00ff00含有"+t.iAtts[0]+"储备金";break;case 96:case 230:y+="#e#c00ff00"+o.default.de_map.strValue(t.iAtts[0],0,1)+"("+t.iAtts[1]/16+","+t.iAtts[2]/16+")";break;case 97:for(y+="#e#cffff00等级 "+o.default.de_goods.intValue(t.iAtts[0],-1,9),0==(c=o.default.de_goods.intValue(t.iAtts[0],-1,16))?y+="#e种类 头盔":1==c?y+="#e种类 项链":2==c?0==(c=o.default.de_goods.intValue(t.iAtts[0],-1,19))?y+="#e种类 剑":1==c?y+="#e种类 刀":2==c&&(y+="#e种类 枪"):3==c?0==(c=o.default.de_goods.intValue(t.iAtts[0],-1,20))?y+="#e种类 女衣":1==c&&(y+="#e种类 男衣"):4==c?y+="#e种类 腰带":5==c&&(y+="#e种类 靴子"),c=1;c<6&&0!=t.iAtts[c];c++)y+="#e材料"+c+" "+o.default.de_goods.strValue(t.iAtts[c],-1,4);break;case 98:case 99:case 100:98==t.iTid?y+="#e#c00ff00制造 头盔，腰带":99==t.iTid?y+="#e#c00ff00制造 武器，项链":100==t.iTid&&(y+="#e#c00ff00制造 衣服，靴子"),y+="#e等级 "+t.iAtts[0],y+="#e熟练度 "+t.iAtts[1];break;case 101:case 102:case 103:case 104:case 105:101==t.iTid?y+="#e#cb48cc8镶嵌部位 头盔,武器#e#c00ff00伤害 +8":102==t.iTid?y+="#e#cb48cc8镶嵌部位 头盔,衣服#e#c00ff00防御 +12":103==t.iTid?y+="#e#cb48cc8镶嵌部位 衣服,腰带#e#c00ff00气血 +40":104==t.iTid?y+="#e#cb48cc8镶嵌部位 腰带,鞋子#e#c00ff00速度 +8":105==t.iTid&&(y+="#e#cb48cc8镶嵌部位 项链,鞋子#e#c00ff00灵力 +6"),y+="#e#cffff00"+t.iAtts[0]+"级";break;case 119:0==t.iAtts[0]?y+="#e#c00ff00未定目的地":(y+="#e#c00ff00剩余使用次数 "+t.iAtts[1],y+="#e#c00ff00"+o.default.de_map.strValue(t.iAtts[2],0,1)+"("+t.iAtts[3]/16+","+t.iAtts[4]/16+")");break;case 154:case 155:case 156:y+="#e#c00ff00"+o.default.de_skill.strValue(t.iAtts[0],0,5),y+="#e#cffffff"+o.default.de_skill.strValue(t.iAtts[0],0,3);break;case 162:y+="#e#c00ff00等级到达"+t.iAtts[0]+"级可开启";break;case 195:case 328:case 329:case 330:case 331:if(D="等级："+a.default.sBigNum[t.iAtts[0]]+"级",t.iAtts[2]>0)for(y+="#e#c00ff00"+o.default.de_goods.strValue(t.iAtts[1],0,4),y+="#e#cb48cc8剩余使用次数:"+t.iAtts[2],c=3;c<7&&!(t.iAtts[c]<=0);c++)y+="#e#cffff00配料"+(c-2)+":"+o.default.de_goods.strValue(t.iAtts[c],0,4);break;case 342:case 343:case 344:case 345:case 346:D="等级："+a.default.sBigNum[t.iTid-341]+"级",t.iAtts[1]>0&&(y+="#e#cb48cc8剩余使用次数："+t.iAtts[1],0==t.iAtts[2]?y+="#e#c00ff00品质：随机":y+="#e#c00ff00品质："+t.iAtts[2],y+="#e#c00ff00增加炼药成功率："+t.iAtts[3]+"%");break;case 196:y+="#e#c00ff00"+a.default.sZhenName[t.iAtts[0]];break;case 226:case 227:0==t.iAtts[0]?y+="#e#c00ff00属性：木":1==t.iAtts[0]?y+="#e#c00ff00属性：火":2==t.iAtts[0]?y+="#e#c00ff00属性：金":3==t.iAtts[0]?y+="#e#c00ff00属性：土":4==t.iAtts[0]&&(y+="#e#c00ff00属性：水");break;case 231:case 232:case 233:case 234:case 235:if(y+="#e#c00ff00卡片类型："+o.default.de_pet.strValue(t.iAtts[0],0,1),231==t.iTid?y+="#e#c00ff00技能要求：一级变身术":232==t.iTid?y+="#e#c00ff00技能要求：二级变身术":233==t.iTid?y+="#e#c00ff00技能要求：三级变身术":234==t.iTid?y+="#e#c00ff00技能要求：四级变身术":235==t.iTid&&(y+="#e#c00ff00技能要求：五级变身术"),t.iAtts[1]>0&&(y+="#e#c00ff00附加技能："+o.default.de_skill.strValue(t.iAtts[1],0,6)),t.iAtts[3]>0)switch(c=t.iAtts[3]%1e3-100,t.iAtts[3]/1e3%10){case 0:y+="#e#c00ff00属性影响："+(c>0?"+"+c:c)+"%气血";break;case 1:y+="#e#c00ff00属性影响："+(c>0?"+"+c:c)+"%灵力";break;case 2:y+="#e#c00ff00属性影响："+(c>0?"+"+c:c)+"%伤害";break;case 3:y+="#e#c00ff00属性影响："+(c>0?"+"+c:c)+"%防御";break;case 4:y+="#e#c00ff00属性影响："+(c>0?"+"+c:c)+"%速度"}y+="#e#cb48cc8剩余使用次数："+t.iAtts[2];break;case 255:case 256:case 257:case 258:case 259:y+="#e#c00ff00种类:"+o.default.de_grow.strValue(t.iAtts[0],0,1),y+="#e#c00ff00等级:"+o.default.de_grow.strValue(t.iAtts[0],0,2),y+="#e#c00ff00品质:"+t.iAtts[1],y+="#e#c00ff00五行:"+a.default.sWuXing[t.iAtts[2]];break;case 261:0==t.iAtts[0]?y+="#e#c00ff00空白地契，可将土地登记其中，便于交易":(y+="#e#c00ff00风格:"+f.default.sLandName[t.iAtts[1]/100],y+="#e#c00ff00风水:"+t.iAtts[2],y+="#e#c00ff00金灵气"+t.iAtts[3]/1e3+"#e木灵气"+t.iAtts[3]%1e3+"#e水灵气"+t.iAtts[4]/1e3+"#e火灵气"+t.iAtts[4]%1e3+"#e土灵气"+t.iAtts[5]/1e3);break;case 265:y+="#e#c00ff00可提高一，二级植物的品质";break;case 266:case 267:case 268:case 269:case 270:c=t.iTid-266,y+="#e#c00ff00可提高"+a.default._sWXS[c]+"灵石的灵气",y+="#e#c00ff00可降低"+a.default._sWXK[c]+"灵石的灵气";break;case 271:case 272:case 273:case 274:case 275:y+="#e#c00ff00"+a.default.sWeek[t.iTid-270]+"级果实",y+="#e#c00ff00种类:"+o.default.de_grow.strValue(t.iAtts[0],0,1),y+="#e#c00ff00品质:"+t.iAtts[1];break;case 276:case 277:y+="#e#c00ff00品质:"+t.iAtts[0];break;case 397:y+="#e#c00ff00打开后获得一个宠物经验丹，赠送2个二级材料";break;case 398:y+="#e#c00ff00打开后获得一个低级人物经验丹，赠送2个七国旗"}var M=o.default.de_goods.strValue(t.iTid,-1,29);if("-1"!=M&&(y+="#e#c99d9ea"+M),0!=(1&t.iAtts[7])&&(y+="#e#ca0a0a0系统绑定"),y+=h.detail_add,h.iDetailW=320,y.length>2)do{if("#e"!=y.substring(0,2))break;y=y.substring(2,y.length)}while(y.length>2);l.default.gi().FormatEx(y,h.iDetailW-30,24,0,0,28),h.iDetailH=110+l.default.gi().iH+20+s,e<h.iDetailW+20?e+=80:e-=h.iDetailW,(i=i+40-h.iDetailH/2)<0&&(i=0),i+h.iDetailH>n.default.SCRH&&(i=n.default.SCRH-h.iDetailH),h.iDetailX=e,h.iDetailY=i,u.default.new_framewatch(e,i,h.iDetailW,h.iDetailH),null==h.new_block&&(h.new_block=o.default.xani_nui3.InitAnimaWithName("物品格子",null)),h.new_block.Draw(e+20,i+20),t.aa.Draw(e+20,i+20),r.default.gi().DrawTextEx(e+20+80+10,i+20,d,4294967040,30,101,1,1,0,0,0),r.default.gi().DrawTextEx(e+20+80+10,i+20+32,b,4294967040,22,101,1,1,0,0,0),r.default.gi().DrawTextEx(e+20+80+10,i+20+56,D,4294967040,22,101,1,1,0,0,0),l.default.gi().Draw(e+20,i+20+80+10)},h.bUseGoods=function(){return h.bUse?(h.bUse=!1,h.lastlock):h.lastlock}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/gameing/me/land/MyLand":227,"./TmpGoods":225}],219:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1"))),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"))),m=_interopRequireDefault(t("./LockOpen"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function LockFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LockFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LockFrame.__proto__||Object.getPrototypeOf(LockFrame)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=290,i.iH=220,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_open=new Array(2),e=0;e<2;e++)i.btn_open[e]=new o.default(u.default.xani_button),i.btn_open[e].InitButton("1号按钮210_60");return i.btn_open[0].sName="解  锁",i.btn_open[1].sName="强制解锁",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LockFrame,r.default),a(LockFrame,[{key:"Draw",value:function(){d.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),this.btn_open[0].Move(this.iX+40,this.iY+40,210,60),this.btn_open[0].Draw(),c.default.me.iUnlockTime<100?this.btn_open[1].sName="取消强制解锁":this.btn_open[1].sName="强制解锁",this.btn_open[1].Move(this.iX+40,this.iY+40+60+20,210,60),this.btn_open[1].Draw(),h.default.end(h.default.CONFIRM_UNLOCK)&&h.default.bConfirm&&(l.default.gi().s_SetLock(2,0,"asdf"),f.default.gi().PopStat(1))}},{key:"ProcTouch",value:function(t,e,i){if(this.btn_open[0].ProcTouch(t,e,i)&&this.btn_open[0].bCheck())return f.default.gi().PopStat(1),m.default.Open(),!0;if(this.btn_open[1].ProcTouch(t,e,i)&&this.btn_open[1].bCheck()){if(c.default.me.iUnlockTime<100)return l.default.gi().s_SetLock(3,0,"asdf"),f.default.gi().PopStat(1),!0;h.default.start(h.default.CONFIRM_UNLOCK,"强制解锁需要等待3天观察期，是否确定强制解锁？")}return 3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||f.default.gi().PopStat(1),!1}}]),LockFrame}();i.default=g,g.Open=function(){f.default.gi().PushStat(f.default.GS_LOCKFRAME)}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/GmMe":211,"./LockOpen":220}],220:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../../engine/control/XInput")),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function LockOpen(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LockOpen);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LockOpen.__proto__||Object.getPrototypeOf(LockOpen)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=400,e.iH=130,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_close=new r.default(u.default.xani_button),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_send=new r.default(u.default.xani_button),e.btn_send.InitButton("1号按钮90_60"),e.btn_send.Move(e.iX+e.iW-40-90,e.iY+40-5,90,60),e.btn_send.sName="解锁",e.in_speak=new o.default(u.default.xani_button),e.in_speak.Move(e.iX+40,e.iY+40,e.iW-40-40-90-20,50),e.in_speak.bHideText=!0,e.in_speak.OpenInput(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LockOpen,s.default),a(LockOpen,[{key:"Draw",value:function(){h.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),h.default.frame_type4("8号框20_20",this.in_speak.iX,this.in_speak.iY,this.in_speak.iW,50,20,20),this.pm3f.DrawTextEx(this.in_speak.iX+10,this.in_speak.iY+this.in_speak.iH/2,this.in_speak.sDetail,4279324257,20,101,1,1,0,0,-2),this.btn_send.Draw(),this.btn_close.Draw(),this.in_speak.onscr()}},{key:"ProcTouch",value:function(t,e,i){return this.in_speak.ProcTouch(t,e,i),this.btn_send.ProcTouch(t,e,i)&&this.btn_send.bCheck()&&(this.in_speak.sDetail.length<=0?d.default.easymsg.AddMessage("请先输入密码"):this.in_speak.sDetail.length>=20?d.default.easymsg.AddMessage("密码过长"):(l.default.gi().s_SetLock(1,0,this.in_speak.sDetail),f.default.gi().PopStat(1))),!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0)}}]),LockOpen}();i.default=c,c.Open=function(){f.default.gi().PushStat(f.default.GS_LOCKOPEN)}},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86}],221:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../../engine/control/XInput")),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function LockSet(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LockSet);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LockSet.__proto__||Object.getPrototypeOf(LockSet)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=400,e.iH=130,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_close=new r.default(u.default.xani_button),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_send=new r.default(u.default.xani_button),e.btn_send.InitButton("1号按钮90_60"),e.btn_send.Move(e.iX+e.iW-40-90,e.iY+40-5,90,60),e.btn_send.sName="设置",e.in_speak=new o.default(u.default.xani_ui),e.in_speak.Move(e.iX+40,e.iY+40,e.iW-40-40-90-20,50),e.in_speak.bHideText=!0,e.in_speak.OpenInput(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LockSet,s.default),a(LockSet,[{key:"Draw",value:function(){h.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),h.default.frame_type4("8号框20_20",this.in_speak.iX,this.in_speak.iY,this.in_speak.iW,50,20,20),this.pm3f.DrawTextEx(this.in_speak.iX+10,this.in_speak.iY+this.in_speak.iH/2,this.in_speak.sDetail,4279324257,20,101,1,1,0,0,-2),this.btn_send.Draw(),this.btn_close.Draw(),this.in_speak.onscr()}},{key:"ProcTouch",value:function(t,e,i){return this.in_speak.ProcTouch(t,e,i),this.btn_send.ProcTouch(t,e,i)&&this.btn_send.bCheck()&&(this.in_speak.sDetail.length<=0?d.default.easymsg.AddMessage("请先输入密码"):this.in_speak.sDetail.length>=20?d.default.easymsg.AddMessage("密码过长"):(l.default.gi().s_SetLock(0,0,this.in_speak.sDetail),f.default.gi().PopStat(1))),!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0)}}]),LockSet}();i.default=c,c.Open=function(){f.default.gi().PushStat(f.default.GS_LOCKSET)}},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86}],222:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=(_interopRequireDefault(t("../../../../../config/XDefine")),_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/TouchManager")),_interopRequireDefault(t("../../../../../engine/control/XButton"))),r=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),o=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),u=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),l=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),f=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"))),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage")),d=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),c=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/MyAttFrame")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/PetsFrame")),g=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/WashPet")),_interopRequireDefault(t("./Goods")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(){function MyGoods(){var t,e;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyGoods),this.pm3f=r.default.xm3f,MyGoods.iW=750,MyGoods.iH=450,MyGoods.iX=(n.default.SCRW-MyGoods.iW)/2,MyGoods.iY=(n.default.SCRH-MyGoods.iH)/2,this.iW1=2*MyGoods.GW,this.iH1=3*MyGoods.GW,this.iX1=MyGoods.iX-this.iW1,this.iY1=MyGoods.iY+(this.iH-this.iH1)/2,this.bShow=!1,this.btn_close=new s.default(o.default.xani_ui),this.btn_close.InitButton("属性关闭按钮"),this.btn_close.sName="",this.btn_bag1=new s.default(o.default.xani_ui),this.btn_bag1.InitButton("亮蓝按钮"),this.btn_bag1.sName="背包",this.btn_bag2=new s.default(o.default.xani_ui),this.btn_bag2.InitButton("亮蓝按钮"),this.btn_bag2.sName="行囊",this.goods=new Array(30),this.goods[1]=new Array(6),t=0;t<6;t++)this.goods[1][t]=new g.default,this.goods[1][t].iOid=1,this.goods[1][t].iPos=t;for(this.goods[2]=new Array(20),this.goods[3]=new Array(20),t=0;t<20;t++)this.goods[2][t]=new g.default,this.goods[2][t].iOid=2,this.goods[2][t].iPos=t,this.goods[3][t]=new g.default,this.goods[3][t].iOid=3,this.goods[3][t].iPos=t;for(e=10;e<30;e++)for(this.goods[e]=new Array(20),t=0;t<20;t++)this.goods[e][t]=new g.default,this.goods[e][t].iOid=e,this.goods[e][t].iPos=t;this.swapgoods=new g.default,this.bLocked=!1,this.bDested=!1,this.bTiming=!1,this.iTouchDelay=0,this.bShowDetail=!1}return a(MyGoods,[{key:"GetGid",value:function(t){var e;for(e=0;e<20;e++)if(this.goods[2][e].iGid>0&&this.goods[2][e].iTid==t)return this.goods[2][e].iGid;return-1}},{key:"UseGoods",value:function(){var t,e;if(1==this.lockgoods.iOid)for(t=0;t<20;t++)if(-1==this.goods[2][t].iGid)return this.destgoods=this.goods[2][t],void this.MoveGoods(this.lockgoods,this.destgoods);if(2==this.lockgoods.iOid){if(-1!=(e=o.default.de_goods.intValue(this.lockgoods.iTid,-1,16)))return this.destgoods=this.goods[1][e],void this.MoveGoods(this.lockgoods,this.destgoods);if(e=o.default.de_goods.intValue(this.lockgoods.iTid,-1,33),o.default.sop(this.lockgoods.iTid+",,,"+e),-1==e)if(-1==(e=o.default.de_goods.intValue(this.lockgoods.iTid,-1,27)))if(-1==(e=o.default.de_goods.intValue(this.lockgoods.iTid,-1,30)))-1==(e=o.default.de_goods.intValue(this.lockgoods.iTid,-1,31))?f.default.easymsg.AddMessage("未知物品使用失败"):f.default.easymsg.AddMessage("不能直接使用");else if(1==e)if(160==this.lockgoods.iTid||161==this.lockgoods.iTid){var i=m.default.Open();null!=i&&(i.iPage=1)}else 122==this.lockgoods.iTid?h.default.fm.Open("请在公聊发送窗口选择喇叭频道"):(u.default.gi().s_UseGoods(this.lockgoods.iGid,1,""),119==this.lockgoods.iTid&&(this.bShow=!1),237==this.lockgoods.iTid&&(c.default.Open(3),this.bShow=!1));else 97==this.lockgoods.iTid?h.default.fm.Open("请前往乡水镇找铁匠打造装备"):f.default.easymsg.AddMessage("不能直接使用");else{t=0;for(var a=1,n=o.default.de_goods.intValue(this.lockgoods.iTid,0,1),s=o.default.de_goods.intValue(this.lockgoods.iTid,0,2);(-1!=n&&d.default.me.rbs.iHp<d.default.me.rbs.iMaxHp||-1!=s&&d.default.me.rbs.iMp<d.default.me.rbs.iMaxMp)&&!(a<=0);)-1!=n&&(d.default.me.rbs.iHp+=n),-1!=s&&(d.default.me.rbs.iMp+=s),a--,t++;t<=0?f.default.easymsg.AddMessage("您的状态很好，不需要恢复"):(u.default.gi().s_UseGoods(this.lockgoods.iGid,t,""),this.lockgoods.iCount-=t,this.lockgoods.iCount<=0&&(this.lockgoods.iGid=-1,this.bLocked=!1),d.default.me.CalcFightAtt())}else u.default.gi().s_UseGoods(this.lockgoods.iGid,1,"")}}},{key:"MoveGoods",value:function(t,e){var i,a;if((1!=e.iOid||bCheckEquipment(t,e.iPos))&&(1!=t.iOid||-1==e.iGid||bCheckEquipment(e,t.iPos)))if(318!=t.iTid&&319!=t.iTid&&320!=t.iTid&&321!=t.iTid&&322!=t.iTid&&323!=t.iTid||2!=t.iOid||2==e.iOid){if(u.default.gi().s_MoveGoods(t.iGid,t.iOid,t.iPos,e.iGid,e.iOid,e.iPos),-1==e.iGid)e.copyfrom(t),t.iGid=-1;else if(i=o.default.de_goods.intValue(t.iTid,0,28),t.iTid==e.iTid&&i>1)if(e.iCount>=i)for(var n=0;n<100;n++)o.default.sop("zzzzzzzzzzzzzzz");else t.iCount+e.iCount<=i?(e.iCount+=t.iCount,t.iGid=-1):(a=t.iCount+e.iCount,e.iCount=i,t.iCount=a-i);else this.swapgoods.copyfrom(e),e.copyfrom(t),t.copyfrom(this.swapgoods);1!=t.iOid&&1!=e.iOid||((1==t.iOid&&2==t.iPos||1==e.iOid&&2==e.iPos)&&(d.default.me.bwc=!0),d.default.me.CalcFightAtt())}else h.default.fm.Open("礼包不能移动到行囊和仓库")}},{key:"GetWeaponTid",value:function(){return this.goods[1][2].iGid<=0?-1:this.goods[1][2].iTid}},{key:"Open",value:function(){l.default.gi().PushStat(l.default.GS_MYGOODSFRAME)}},{key:"UpdateOneGoods",value:function(t){var e,i,a,n,s,r,u=t.GetNextByte(),l=null;switch(o.default.sop("rt="+u),u){case 0:i=t.GetNextInt(),n=t.GetNextByte(),s=t.GetNextByte(),1==n&&2==s&&(d.default.me.bwc=!0),i==this.goods[n][s].iGid&&(this.goods[n][s].iGid=-1);break;case 1:for(i=t.GetNextInt(),a=t.GetNextShort(),t.GetNextInt(),n=t.GetNextByte(),s=t.GetNextByte(),r=t.GetNextByte(),1==n&&2==s&&(d.default.me.bwc=!0),(l=this.goods[n][s]).iGid=i,l.iTid=a,l.iCount=r,e=0;e<8;e++)l.iAtts[e]=t.GetNextInt();o.default.xani_ngoods.InitAnimaWithName(o.default.de_goods.strValue(a,-1,10),l.aa)}}},{key:"GetGoods",value:function(t){var e,i,a,n,s=t.GetNextByte(),r=null;for(o.default.sop("get this.goods oid="+s),e=0;e<this.goods[s].length;e++)this.goods[s][e].iGid=-1;for(;-1!=(i=t.GetNextInt());){for(a=t.GetNextShort(),n=t.GetNextByte(),1==s&&2==n&&(d.default.me.bwc=!0),(r=this.goods[s][n]).iGid=i,r.iTid=a,r.iPos=n,r.iCount=t.GetNextByte(),e=0;e<8;e++)r.iAtts[e]=t.GetNextInt();o.default.xani_ngoods.InitAnimaWithName(o.default.de_goods.strValue(a,-1,10),r.aa)}l.default.gi().iXStat==l.default.GS_LOADING1&&l.default.gi().PopStat(1)}}]),MyGoods}();i.default=_,_.mg=null,_.gi=function(){return null==_.mg&&(_.mg=new _),_.mg},_.bCheckEquipment=function(t,e){var i=o.default.de_goods.intValue(t.iTid,-1,16);if(-1==i)return f.default.easymsg.AddMessage("不是装备"),!1;if(i!=e)return f.default.easymsg.AddMessage("穿戴装备种类不符"),!1;var a=o.default.de_goods.intValue(t.iTid,-1,9);if(-1!=a&&d.default.me.rbs.iLev<a){var n=t.iAtts[4]>>10&1023,s=t.iAtts[4]>>20&1023;if(266==n||265==n&&d.default.me.rbs.iLev+5>=a);else if(!(266==s||265==s&&d.default.me.rbs.iLev+5>=a))return f.default.easymsg.AddMessage("装备等级太高"),!1}var r=o.default.de_goods.intValue(t.iTid,-1,19);if(-1!=r&&r!=d.default.me.iRace)return f.default.easymsg.AddMessage("装备种族不匹配"),!1;var u=o.default.de_goods.intValue(t.iTid,-1,20);return-1==u||u==d.default.me.iSex||(f.default.easymsg.AddMessage("装备性别不匹配"),!1)},_.iHaveGoodsCount=function(){var t,e=0;for(t=0;t<20;t++)_.mg.goods[2][t].iGid>0&&e++;return e},_.bHaveGoods=function(t,e){var i;for(i=0;i<20;i++)if(_.mg.goods[2][i].iGid>0&&_.mg.goods[2][i].iTid==t&&_.mg.goods[2][i].iCount>=e)return!0;return!1},_.iX,_.iY,_.iW,_.iH,_.GW=60,_.GH=60},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/PackageTools":9,"../../../../../engine/TouchManager":10,"../../../../../engine/control/XButton":14,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../../engtst/mgm/gameing/me/pet/PetsFrame":248,"../../../../../engtst/mgm/gameing/me/pet/WashPet":249,"./Goods":217}],223:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../map/MapManager")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/SortAnima")),o=_interopRequireDefault(t("../../../../../config/XDefine")),u=_interopRequireDefault(t("../../../../../engine/BaseClass")),l=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),f=(_interopRequireDefault(t("../../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction"))),h=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/FireworksEffect"))),d=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),c=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),m=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),g=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),b=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage")),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/LianDanShu")),y=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/ang/NewActivity")),w=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),S=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/MyPets")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/PetsFrame"))),x=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/WashPet")),_interopRequireDefault(t("./MyGoods"))),P=_interopRequireDefault(t("./GoodsDraw")),v=_interopRequireDefault(t("./TmpGoods")),R=_interopRequireDefault(t("./ExchangeMoney")),M=_interopRequireDefault(t("./LockFrame")),C=_interopRequireDefault(t("./LockSet")),k=_interopRequireDefault(t("./Goods")),T=_interopRequireDefault(t("./SmallSpeaker"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var A=function(t){function MyGoodsFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyGoodsFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MyGoodsFrame.__proto__||Object.getPrototypeOf(MyGoodsFrame)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=1040,i.iH=610,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.btn_close=new l.default(d.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_setpoint=new Array(3),e=0;e<3;e++)i.btn_setpoint[e]=new l.default(d.default.xani_nui3),i.btn_setpoint[e].InitButton("装备切换按钮"),i.btn_setpoint[e].sName=""+(e+1);for(i.aa_body=new f.default,i.aa_weapon=new f.default,i.aa_cls=new Array(5),e=0;e<5;e++)i.aa_cls[e]=new f.default;return i.FreshWeapon(),i.btn_bag1=new l.default(d.default.xani_button),i.btn_bag1.InitButton("背包按钮109_61"),i.btn_bag2=new l.default(d.default.xani_button),i.btn_bag2.InitButton("行囊按钮109_61"),i.btn_bag3=new l.default(d.default.xani_button),i.btn_bag3.InitButton("仓库按钮109_61"),i.btn_locker=new l.default(d.default.xani_nui2),i.btn_locker.InitButton("按钮1_110"),i.btn_locker.sName="锁",i.btn_locker.iNameSize=25,i.iBagPoint=0,i.btn_use=new l.default(d.default.xani_nui3),i.btn_use.InitButton("内框按钮"),i.btn_use.sName="使 用",i.btn_break=new l.default(d.default.xani_nui3),i.btn_break.InitButton("内框按钮"),i.btn_break.sName="分 解",i.btn_drop=new l.default(d.default.xani_nui3),i.btn_drop.InitButton("内框按钮"),i.btn_drop.sName="丢 弃",i.btn_checkmoney=new l.default(d.default.xani_button),i.btn_checkmoney.InitButton("10号按钮40_40"),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MyGoodsFrame,u.default),a(MyGoodsFrame,[{key:"GetWeaponTid",value:function(){return x.default.gi().goods[1][2].iGid<=0?-1:x.default.gi().goods[1][2].iTid}},{key:"FreshWeapon",value:function(){var t;this.iWeapTid=this.GetWeaponTid(),this.aa_body=d.default.xani_newrole[2*w.default.me.iRace+w.default.me.iSex].InitAnimaWithName("站立_下",null),this.iWeapTid>=0&&(this.aa_weapon=d.default.xani_weap[2*w.default.me.iRace+w.default.me.iSex][r.default.WeapFlag(this.iWeapTid)].InitAnimaWithName("站立_下",null));var e=2*w.default.me.iRace+w.default.me.iSex;for(t=0;t<r.default._CHANGECOLOR[e].length;t++)w.default.me.iColor[t]<=0||w.default.me.iColor[t]>=6||d.default.xani_color[e][w.default.me.iColor[t]-1].InitAnimaWithName(r.default._CHANGECOLOR[e][t]+"_站立_下",this.aa_cls[t])}},{key:"Draw",value:function(){var t,e,i,a,n,s;for(this.bOperateGoods=!1,_.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"物","品"),this.btn_close.Draw(),_.default.new_framein(this.iX+30,this.iY+30,480,this.iH-60),n=this.iX+30+25,s=this.iY+30+20,t=0;t<3;t++)w.default.me.iFlag[51]%10==t&&(this.btn_setpoint[t].bMouseDown=!0,this.btn_setpoint[t].bMouseIn=!0),this.btn_setpoint[t].Move(n+157*t,s,117,54),this.btn_setpoint[t].Draw();for(s+=74,-1!=x.default.gi().goods[1][0].iGid?d.default.xani_nui3.DrawAnimaEx(n,s,"物品格子",0,101,1,1,0,0,0):d.default.xani_nui3.DrawAnimaEx(n,s,"装备格子",0,101,1,1,0,0,0),-1!=x.default.gi().goods[1][2].iGid?d.default.xani_nui3.DrawAnimaEx(n,s+85,"物品格子",0,101,1,1,0,0,0):d.default.xani_nui3.DrawAnimaEx(n,s+85,"装备格子",2,101,1,1,0,0,0),-1!=x.default.gi().goods[1][4].iGid?d.default.xani_nui3.DrawAnimaEx(n,s+170,"物品格子",0,101,1,1,0,0,0):d.default.xani_nui3.DrawAnimaEx(n,s+170,"装备格子",4,101,1,1,0,0,0),n=this.iX+30+480-25-80,-1!=x.default.gi().goods[1][1].iGid?d.default.xani_nui3.DrawAnimaEx(n,s,"物品格子",0,101,1,1,0,0,0):d.default.xani_nui3.DrawAnimaEx(n,s,"装备格子",1,101,1,1,0,0,0),-1!=x.default.gi().goods[1][3].iGid?d.default.xani_nui3.DrawAnimaEx(n,s+85,"物品格子",0,101,1,1,0,0,0):d.default.xani_nui3.DrawAnimaEx(n,s+85,"装备格子",3,101,1,1,0,0,0),-1!=x.default.gi().goods[1][5].iGid?d.default.xani_nui3.DrawAnimaEx(n,s+170,"物品格子",0,101,1,1,0,0,0):d.default.xani_nui3.DrawAnimaEx(n,s+170,"装备格子",5,101,1,1,0,0,0),this.iSx=this.iX+30+25,this.iSy=s,t=0;t<2;t++)for(e=0;e<3;e++)i=this.iX+30+25+350*t,a=s+85*e,-1!=x.default.gi().goods[1][2*e+t].iGid&&x.default.gi().goods[1][2*e+t].aa.Draw(i,a);d.default.xani_nui3.DrawAnima(this.iX+30+240,this.iY+30+240,"人物背景图",0),h.default.DrawAura(0,this.iX+30+240,this.iY+30+280,null,0),this.aa_body.Draw(this.iX+30+240,this.iY+30+280);var o=2*w.default.me.iRace+w.default.me.iSex;for(t=0;t<r.default._CHANGECOLOR[o].length;t++)w.default.me.iColor[t]<=0||w.default.me.iColor[t]>=6||(this.aa_cls[t].iFrame=this.aa_body.iFrame,this.aa_cls[t].Draw(this.iX+30+240,this.iY+30+280));this.aa_body.NextFrame(),this.iWeapTid>=0&&(this.aa_weapon.Draw(this.iX+30+240,this.iY+30+280),this.aa_weapon.NextFrame()),n=this.iX+30+25,s+=265,_.default.new_TagText2(n,s,363,"气血",w.default.me.rbs.iHp+"/"+w.default.me.rbs.iMaxHp),s+=47,_.default.new_TagText2(n,s,363,"魔法",w.default.me.rbs.iMp+"/"+w.default.me.rbs.iMaxMp),s+=47,_.default.new_TagText2(n,s,120,"灵力",""+w.default.me.rbs.iSpirit),_.default.new_TagText2(n+430-67-120,s,120,"防御",""+w.default.me.rbs.iDefence),s+=47,_.default.new_TagText2(n,s,120,"伤害",""+w.default.me.rbs.iAttack),_.default.new_TagText2(n+430-67-120,s,120,"速度",""+w.default.me.rbs.iSpeed),_.default.new_framein(this.iX+30+480+15,this.iY+30,480,this.iH-60),n=this.iX+30+480+15+25,s=this.iY+30+25,this.btn_bag1.Move(n,s,109,61),this.btn_bag1.Draw(),this.pm3f.DrawText_2(this.btn_bag1.iX+78,this.btn_bag1.iY+17,"背",4294962304,24,101,1,1,0,-2,-2,4,4278199373),this.pm3f.DrawText_2(this.btn_bag1.iX+78,this.btn_bag1.iY+13+30,"包",4294962304,24,101,1,1,0,-2,-2,4,4278199373),this.btn_bag2.Move(n+160.5,s,109,61),this.btn_bag2.Draw(),this.pm3f.DrawText_2(this.btn_bag2.iX+78,this.btn_bag2.iY+17,"行",4294962304,24,101,1,1,0,-2,-2,4,4278199373),this.pm3f.DrawText_2(this.btn_bag2.iX+78,this.btn_bag2.iY+13+30,"囊",4294962304,24,101,1,1,0,-2,-2,4,4278199373),this.btn_bag3.Move(n+480-50-109,s,109,61),this.btn_bag3.Draw(),this.pm3f.DrawText_2(this.btn_bag3.iX+78,this.btn_bag3.iY+17,"仓",4294962304,24,101,1,1,0,-2,-2,4,4278199373),this.pm3f.DrawText_2(this.btn_bag3.iX+78,this.btn_bag3.iY+13+30,"库",4294962304,24,101,1,1,0,-2,-2,4,4278199373),0==this.iBagPoint?d.default.xani_nui3.DrawAnima(this.btn_bag1.iX,this.btn_bag1.iY,"背包选中框",0):d.default.xani_nui3.DrawAnima(this.btn_bag2.iX,this.btn_bag2.iY,"背包选中框",0),s+=66,P.default.new_DrawGoods(n,s,x.default.gi().goods[2+this.iBagPoint],null,null),MyGoodsFrame.iGx=n,MyGoodsFrame.iGy=s,s+=365,_.default.new_TagText2(n,s,120,"现金",""+w.default.me.rbs.iMoney),this.btn_checkmoney.Move(n+67+120+5,s-4,40,40),this.btn_checkmoney.Draw(),_.default.new_TagText2(n+430-67-120,s,120,"元宝",""+w.default.me.rbs.iInGot),s+=47,_.default.new_TagText2(n,s,120,"储备",""+w.default.me.rbs.iReserve),w.default.me.bHaveLock?w.default.me.bLocked?this.btn_locker.sName="解  锁":this.btn_locker.sName="改锁密":this.btn_locker.sName="加  锁",this.btn_locker.Move(this.iX+30+480+15+480-110-25,s-15,110,52),this.btn_locker.Draw(),g.default.end(g.default.CONFIRM_DROPPET)&&g.default.bConfirm&&C.default.Open(),null!=this.lockgoods&&1==this.lockgoods.iOid?(t=this.lockgoods.iPos%2,e=parseInt(this.lockgoods.iPos/2),i=this.iSx+350*t,a=this.iSy+85*e,d.default.xani_nui3.DrawAnimaEx(i,a,"物品选中框",0,101,1,1,0,0,0),P.default.new_DrawDetail(this.lockgoods,i,a,0)):P.default.bShowDetail()&&(P.default.new_DrawRect(MyGoodsFrame.iGx,MyGoodsFrame.iGy,x.default.gi().goods[2+this.iBagPoint],this.lockgoods,0),2==P.default.lastlock.iOid?(P.default.new_DrawDetail(null,-1,-1,75),this.bOperateGoods=!0,this.btn_drop.Move(P.default.iDetailX+10,P.default.iDetailY+P.default.iDetailH-55-20,98,55),this.btn_drop.Draw(),d.default.de_goods.intValue(P.default.lastlock.iTid,0,16)>=0&&(this.btn_break.Move(P.default.iDetailX+P.default.iDetailW/2-49,P.default.iDetailY+P.default.iDetailH-55-20,98,55),this.btn_break.Draw()),this.btn_use.Move(P.default.iDetailX+P.default.iDetailW-98-10,P.default.iDetailY+P.default.iDetailH-55-20,98,55),this.btn_use.Draw()):P.default.new_DrawDetail(null,-1,-1,0)),g.default.end(g.default.CONFIRM_BREAKGOODS)&&(g.default.bConfirm&&null!=this.lockgoods&&this.lockgoods.iGid>0&&2==this.lockgoods.iOid&&(w.default.me.bHaveLock&&w.default.me.bLocked?p.default.easymsg.AddMessage("未解锁不能分解"):d.default.de_goods.intValue(this.lockgoods.iTid,0,16)<0?b.default.fm.Open("只有装备才能分解！"):(c.default.gi().s_RecoverGoods(this.lockgoods.iGid),this.lockgoods.iGid=-1)),P.default.bMoving=!1,P.default.lastlock=null),g.default.end(g.default.CONFIRM_DROPGOODS)&&(g.default.bConfirm&&null!=this.lockgoods&&this.lockgoods.iGid>0&&2==this.lockgoods.iOid&&(w.default.me.bHaveLock&&w.default.me.bLocked?p.default.easymsg.AddMessage("未解锁不能丢弃"):1==d.default.de_goods.intValue(this.lockgoods.iTid,0,35)?b.default.fm.Open("该物品不可丢弃！"):(c.default.gi().s_DropGoods(this.lockgoods.iGid),this.lockgoods.iGid=-1)),P.default.bMoving=!1,P.default.lastlock=null),v.default.Draw()}},{key:"ProcTouch",value:function(t,e,i){if(v.default.ProcTouch(t,e,i))return!0;if(this.bOperateGoods){if(this.btn_drop.ProcTouch(t,e,i))return this.btn_drop.bCheck()&&(g.default.start(g.default.CONFIRM_DROPGOODS,"是否确定丢弃？"),this.btn_drop.SetNormal()),!0;if(d.default.de_goods.intValue(P.default.lastlock.iTid,0,16)>=0&&this.btn_break.ProcTouch(t,e,i))return this.btn_break.bCheck()&&(g.default.start(g.default.CONFIRM_BREAKGOODS,"是否确定分解？"),this.btn_break.SetNormal()),!0;if(this.btn_use.ProcTouch(t,e,i))return this.btn_use.bCheck()&&(this.UseGoods(),this.lockgoods=null,P.default.lastlock=null,this.btn_use.fScale=1,this.btn_use.iAnimaStat=0),!0}if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&m.default.gi().PopStat(1),!0;if(this.btn_bag1.ProcTouch(t,e,i)&&this.btn_bag1.bCheck()&&(this.iBagPoint=0),this.btn_bag2.ProcTouch(t,e,i)&&this.btn_bag2.bCheck()&&(this.iBagPoint=1),this.btn_bag3.ProcTouch(t,e,i))return this.btn_bag3.bCheck()&&(w.default.me.iFlag[20]>60?(m.default.gi().PopStat(1),m.default.gi().PushStat(m.default.GS_GOODSSTOREFROME),m.default.gi().PushStat(m.default.GS_LOADING1),c.default.gi().s_OpenStore(0,0,0)):b.default.fm.Open("仓库管理员在西阳城(103,23)#e#e会员剩余天数>60可随时打开仓库")),!0;var a,n,s,r;for(a=0;a<3;a++)if(this.btn_setpoint[a].ProcTouch(t,e,i)&&this.btn_setpoint[a].bCheck()){if(w.default.me.iFlag[51]%10==a)continue;if(MyGoodsFrame.bSELock){p.default.easymsg.AddMessage("请勿频繁更换装备");continue}c.default.gi().s_SwapEquipment(a),x.default.gi().goods[1][0].iGid=-1,x.default.gi().goods[1][1].iGid=-1,x.default.gi().goods[1][2].iGid=-1,x.default.gi().goods[1][3].iGid=-1,x.default.gi().goods[1][4].iGid=-1,x.default.gi().goods[1][5].iGid=-1,w.default.me.iFlag[51]=w.default.me.iFlag[51]/10*10+a,MyGoodsFrame.bSELock=!0}for(this.btn_checkmoney.ProcTouch(t,e,i)&&this.btn_checkmoney.bCheck()&&R.default.Open(),this.btn_locker.ProcTouch(t,e,i)&&this.btn_locker.bCheck()&&(w.default.me.bHaveLock?w.default.me.bLocked?M.default.Open():C.default.Open():g.default.start(g.default.CONFIRM_DROPPET,"加锁后，每次登陆需要解锁才能进行（交易，摆摊，丢弃，给予，放生）等功能，是否确定加锁？")),a=0;a<2;a++)for(n=0;n<3;n++)if(s=this.iSx+345*a,r=this.iSy+85*n,o.default.bInRect(e,i,s,r,80,80)){if(3==t){if(-1==x.default.gi().goods[1][2*n+a].iGid)break;this.lockgoods==x.default.gi().goods[1][2*n+a]?(this.UseGoods(),this.lockgoods=null):this.lockgoods=x.default.gi().goods[1][2*n+a]}return!0}if(3==t&&null!=this.lockgoods&&P.default.bMoving)if(o.default.bInRect(e,i,this.btn_bag1.iX,this.btn_bag1.iY,this.btn_bag1.iW,this.btn_bag1.iH)){for(a=0;a<20;a++)if(-1==x.default.gi().goods[2][a].iGid){P.default.swaplock=x.default.gi().goods[2][a],this.MoveGoods(P.default.swaplock);break}}else if(o.default.bInRect(e,i,this.btn_bag2.iX,this.btn_bag2.iY,this.btn_bag2.iW,this.btn_bag2.iH)){for(a=0;a<20;a++)if(-1==x.default.gi().goods[3][a].iGid){P.default.swaplock=x.default.gi().goods[3][a],this.MoveGoods(P.default.swaplock);break}}else if(o.default.bInRect(e,i,this.iSx,this.iSy,425,255))0==this.iBagPoint&&this.UseGoods(),P.default.lastlock=null;else if(!o.default.bInRect(e,i,MyGoodsFrame.iGx,MyGoodsFrame.iGy,425,340))return 2!=this.lockgoods.iOid?(p.default.easymsg.AddMessage("道具栏的物品才能丢弃"),P.default.bMoving=!1):g.default.start(g.default.CONFIRM_DROPGOODS,"是否确定丢弃？"),!0;return this.lockgoods=P.default.new_LockGoods(e,i,MyGoodsFrame.iGx,MyGoodsFrame.iGy,x.default.gi().goods[2+this.iBagPoint],t),P.default.bCanProc()&&(0==this.iBagPoint&&this.UseGoods(),P.default.lastlock=null),P.default.bCanMove()&&this.MoveGoods(P.default.swaplock),!1}},{key:"MoveGoods",value:function(t){var e,i;if((1!=t.iOid||x.default.bCheckEquipment(this.lockgoods,t.iPos))&&(1!=this.lockgoods.iOid||-1==t.iGid||x.default.bCheckEquipment(t,this.lockgoods.iPos)))if(318!=this.lockgoods.iTid&&319!=this.lockgoods.iTid&&320!=this.lockgoods.iTid&&321!=this.lockgoods.iTid&&322!=this.lockgoods.iTid&&323!=this.lockgoods.iTid||2!=this.lockgoods.iOid||2==t.iOid){if(c.default.gi().s_MoveGoods(this.lockgoods.iGid,this.lockgoods.iOid,this.lockgoods.iPos,t.iGid,t.iOid,t.iPos),-1==t.iGid)t.copyfrom(this.lockgoods),this.lockgoods.iGid=-1;else if(e=d.default.de_goods.intValue(this.lockgoods.iTid,0,28),this.lockgoods.iTid==t.iTid&&e>1)t.iCount>=e||(this.lockgoods.iCount+t.iCount<=e?(t.iCount+=this.lockgoods.iCount,this.lockgoods.iGid=-1):(i=this.lockgoods.iCount+t.iCount,t.iCount=e,this.lockgoods.iCount=i-e));else{var a=new k.default;a.copyfrom(t),t.copyfrom(this.lockgoods),this.lockgoods.copyfrom(a)}1!=this.lockgoods.iOid&&1!=t.iOid||((1==this.lockgoods.iOid&&2==this.lockgoods.iPos||1==t.iOid&&2==t.iPos)&&(w.default.me.bwc=!0,this.FreshWeapon()),p.default.easymsg.snapatt(),w.default.me.CalcFightAtt(),p.default.easymsg.calcattchanged())}else b.default.fm.Open("礼包不能移动到行囊和仓库")}},{key:"UseGoods",value:function(){if(null!=this.lockgoods){var t,e;if(1==this.lockgoods.iOid)for(t=0;t<20;t++)if(-1==x.default.gi().goods[2][t].iGid)return void this.MoveGoods(x.default.gi().goods[2][t]);if(2==this.lockgoods.iOid)if(-1==(e=d.default.de_goods.intValue(this.lockgoods.iTid,-1,16))){if(-1!=(e=d.default.de_goods.intValue(this.lockgoods.iTid,-1,27))){t=0;for(var i=1,a=d.default.de_goods.intValue(this.lockgoods.iTid,0,1),s=d.default.de_goods.intValue(this.lockgoods.iTid,0,2);(-1!=a&&w.default.me.rbs.iHp<w.default.me.rbs.iMaxHp||-1!=s&&w.default.me.rbs.iMp<w.default.me.rbs.iMaxMp)&&!(i<=0);)-1!=a&&(w.default.me.rbs.iHp+=a),-1!=s&&(w.default.me.rbs.iMp+=s),i--,t++;return 3==e&&(t=1),void(t<=0&&e<3?p.default.easymsg.AddMessage("您的状态很好，不需要恢复"):(c.default.gi().s_UseGoods(this.lockgoods.iGid,t,""),this.lockgoods.iCount-=t,this.lockgoods.iCount<=0&&(this.lockgoods.iGid=-1,this.lockgoods=null),w.default.me.CalcFightAtt()))}if(-1==(e=d.default.de_goods.intValue(this.lockgoods.iTid,-1,33)))if(-1==(e=d.default.de_goods.intValue(this.lockgoods.iTid,-1,30)))if(-1==(e=d.default.de_goods.intValue(this.lockgoods.iTid,-1,31))){if(-1!=(e=d.default.de_goods.intValue(this.lockgoods.iTid,-1,34)))return 1!=e&&3!=e?void p.default.easymsg.AddMessage("不能直接使用"):void c.default.gi().s_UseGoods(this.lockgoods.iGid,1,"");p.default.easymsg.AddMessage("未知物品使用失败")}else p.default.easymsg.AddMessage("不能直接使用");else if(1==e)if(195==this.lockgoods.iTid||328==this.lockgoods.iTid||329==this.lockgoods.iTid||330==this.lockgoods.iTid||331==this.lockgoods.iTid)w.default.me.rbs.iGovSkill[1]>0?(m.default.gi().PopStat(1),D.default.Open(this.lockgoods,null)):p.default.easymsg.AddMessage("还未学习炼丹术");else if(this.lockgoods.iTid>=342&&this.lockgoods.iTid<=346)w.default.me.rbs.iGovSkill[1]>0?(m.default.gi().PopStat(1),D.default.Open(null,this.lockgoods)):p.default.easymsg.AddMessage("还未学习炼丹术");else if(160==this.lockgoods.iTid||161==this.lockgoods.iTid){var r=S.default.Open();null!=r&&(r.iPage=1)}else 122==this.lockgoods.iTid?T.default.Open(this.lockgoods):386==this.lockgoods.iTid||387==this.lockgoods.iTid||388==this.lockgoods.iTid?(c.default.gi().s_PromptActivity(0,0),y.default.iOpenFlag=1,m.default.gi().PushStat(m.default.GS_LOADING1)):(c.default.gi().s_UseGoods(this.lockgoods.iGid,1,""),119==this.lockgoods.iTid&&(m.default.gi().PopStat(1),0!=this.lockgoods.iAtts[0]&&(n.default.gi().iMapChangeing=100)));else p.default.easymsg.AddMessage("不能直接使用");else c.default.gi().s_UseGoods(this.lockgoods.iGid,1,"")}else this.MoveGoods(x.default.gi().goods[1][e])}}}]),MyGoodsFrame}();i.default=A,A.bSELock=!1,A.iGx,A.iGy},{"../../../../../config/GmConfig":5,"../../../../../config/SortAnima":6,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/FireworksEffect":64,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../engtst/mgm/gameing/fast/LianDanShu":122,"../../../../../engtst/mgm/gameing/help/ang/NewActivity":200,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../engtst/mgm/gameing/me/pet/PetsFrame":248,"../../../../../engtst/mgm/gameing/me/pet/WashPet":249,"../../../../../map/MapManager":286,"./ExchangeMoney":215,"./Goods":217,"./GoodsDraw":218,"./LockFrame":219,"./LockSet":221,"./MyGoods":222,"./SmallSpeaker":224,"./TmpGoods":225}],224:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../../engine/control/XInput")),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function SmallSpeaker(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SmallSpeaker);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SmallSpeaker.__proto__||Object.getPrototypeOf(SmallSpeaker)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=600,e.iH=100,e.iX=(n.default.SCRW-e.iW)/2,e.iY=0,e.btn_close=new r.default(l.default.xani_ui),e.btn_close.InitButton("统一关闭按钮"),e.btn_close.Move(e.iX+e.iW-60,e.iY+20,60,60),e.btn_send=new r.default(l.default.xani_ui),e.btn_send.InitButton("统一中按钮2"),e.btn_send.Move(e.iX+e.iW-70-70,e.iY+30,70,40),e.btn_send.sName="发送",e.in_speak=new o.default(l.default.xani_ui),e.in_speak.Move(e.iX+20,e.iY+20,e.iW-180,e.iH-40),e.in_speak.bHideText=!0,e.in_speak.OpenInput(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SmallSpeaker,s.default),a(SmallSpeaker,[{key:"Draw",value:function(){d.default.Frame2_MD(this.iX,this.iY,this.iW,this.iH),u.default.gi().FillRect_2D(this.iX+20,this.iY+20,this.iX+this.iW-180,this.iY+this.iH-20,4278190081),c.default.gi().Format(this.in_speak.sDetail,this.in_speak.iW-10,20),c.default.gi().Draw(this.in_speak.iX+10,this.in_speak.iY+10),this.btn_send.Draw(),this.btn_close.Draw(),this.in_speak.onscr()}},{key:"ProcTouch",value:function(t,e,i){return this.in_speak.ProcTouch(t,e,i),this.btn_send.ProcTouch(t,e,i)&&this.btn_send.bCheck()&&(this.in_speak.sDetail.length<=0?m.default.easymsg.AddMessage("请先输入内容"):this.in_speak.sDetail.length>=40?m.default.easymsg.AddMessage("内容过长"):(f.default.gi().s_UseGoods(SmallSpeaker.goods.iGid,1,this.in_speak.sDetail),h.default.gi().PopStat(1))),!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0)}}]),SmallSpeaker}();i.default=g,g.goods,g.Open=function(t){g.goods=t,122==t.iTid&&h.default.gi().PushStat(h.default.GS_SMALLSPEAKER)}},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86}],225:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=_interopRequireDefault(t("../../../../../config/GmConfig")),n=_interopRequireDefault(t("../../../../../config/XDefine")),s=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),r=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),o=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function TmpGoods(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,TmpGoods),TmpGoods.iTmpGoodsCount=0};i.default=u,u.iTmpGoodsCount=0,u.iDelay=0,u.tgs=new u,u.getgoods=function(t){u.iTmpGoodsCount=t.GetNextByte()},u.Draw=function(){var t,e;u.iTmpGoodsCount<=0||(t=a.default.SCRW/2,e=2*a.default.SCRH/3,parseInt(u.iDelay/3)%2==0&&(t+=2,e+=2),r.default.xani_ui.DrawAnima(t,e,"物品格",0),s.default.gi().DrawTextEx(t+30,e+30-15,"临时",4278190080,20,101,1,1,0,-2,-2),s.default.gi().DrawTextEx(t+30,e+30+15,"("+u.iTmpGoodsCount+")",4278190080,20,101,1,1,0,-2,-2),u.iDelay++)},u.ProcTouch=function(t,e,i){var s,r;return s=a.default.SCRW/2,r=2*a.default.SCRH/3,!(u.iTmpGoodsCount<=0)&&(!!n.default.bInRect(e,i,s,r,60,60)&&(3==t&&(u.iTmpGoodsCount=0,o.default.gi().s_SeverEvent(4,0,0,0,0)),!0))}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/PackageTools":9,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66}],226:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GameData")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton"))),l=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function LandFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LandFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LandFrame.__proto__||Object.getPrototypeOf(LandFrame)).call(this));for(i.iW=490,i.iH=410,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.btn_give=new Array(5),e=0;e<5;e++)i.btn_give[e]=new u.default(f.default.xani_ui3),i.btn_give[e].bSingleButton=!0;return i.iWx=new Int32Array(5),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LandFrame,o.default),a(LandFrame,[{key:"Draw",value:function(){var t;for(d.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),l.default.gi().DrawTextEx(this.iX+20,this.iY+20,"土地类型:"+MyLand.sLandName[this.iType],4279324257,30,101,1,1,0,0,0),l.default.gi().DrawTextEx(this.iX+20,this.iY+20+40,"风水等级:"+this.iLev,4279324257,30,101,1,1,0,0,0),l.default.gi().DrawTextEx(this.iX+20,this.iY+20+80,"风水经验:"+this.iExp,4279324257,30,101,1,1,0,0,0),l.default.gi().DrawTextEx(this.iX+20,this.iY+20+120,"五行总灵气:"+(this.iWx[0]+this.iWx[1]+this.iWx[2]+this.iWx[3]+this.iWx[4])+"/"+(100+this.iExp),4279324257,30,101,1,1,0,0,0),t=0;t<5;t++)f.default.xani_ui4.DrawAnimaEx(this.iX+40+90*t,this.iY+180,n.default.sWuXing[t]+"水晶",0,101,1,1,0,0,0),l.default.gi().DrawTextEx(this.iX+40+90*t+25,this.iY+180+160+25,this.iWx[t]+"/100",4279324257,20,101,1,1,0,-2,0),l.default.gi().DrawTextEx(this.iX+40+90*t+25,this.iY+180+160,n.default.sWuXing[t],4279324257,20,101,1,1,0,-2,0),this.btn_give[t].Move(this.iX+40+90*t-10,this.iY+180,70,160)}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<5;a++)if(this.btn_give[a].ProcTouch(t,e,i))return this.btn_give[a].bCheck()&&SelectLS.Open(n.default.sWXS[a]+"生"+n.default.sWuXing[a]+"(选择"+n.default.sWXS[a]+"灵石)",n.default.sWXK[a]+"克"+n.default.sWuXing[a]+"(选择"+n.default.sWXK[a]+"灵石)",a),!0;return 3==t&&!r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)&&(h.default.gi().PopStat(1),!0)}}]),LandFrame}();i.default=c,c.Open=function(t){var e;(e=h.default.gi().iXStat==h.default.GS_LANDFRAME?h.default.gi().LastStat(0):h.default.gi().PushStat(h.default.GS_LANDFRAME)).iLid=t.GetNextInt(),e.iType=t.GetNextInt(),e.iLev=t.GetNextInt(),e.iExp=t.GetNextInt(),e.iWx[0]=t.GetNextInt(),e.iWx[1]=t.GetNextInt(),e.iWx[2]=t.GetNextInt(),e.iWx[3]=t.GetNextInt(),e.iWx[4]=t.GetNextInt()}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72}],227:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function MyGrow(){_classCallCheck(this,MyGrow)},r=function(){function MyLand(){var t;for(_classCallCheck(this,MyLand),this.grow=new Array(6),t=0;t<6;t++)this.grow[t]=new s;MyLand.ml=this}return a(MyLand,[{key:"Init",value:function(t){var e;for(MyLand.iMaxArable=t.GetNextByte(),n.default.sop("MyLand.iMaxArable"+MyLand.iMaxArable),e=0;e<MyLand.iMaxArable;e++)MyLand.iArableOff[e][0]=t.GetNextInt(),MyLand.iArableOff[e][1]=t.GetNextInt(),n.default.sop(""+MyLand.iArableOff[e][0]);MyLand.iArableGrow=t.GetNextInt(),MyLand.bShowBlock=!1}}]),MyLand}();i.default=r,r.bShowBlock=!1,r.iMaxArable=6,r.iArableOff=new Array(12);for(var o=0;o<12;o++)r.iArableOff[o]=new Int32Array(2);r.iArableGrow=0,r.sLandName=["雪域高原","碧湖翠陵","神秘楼兰","琼玉天宫","迷幻鬼蜮"],r.ml},{"../../../../../engine/PackageTools":9,"../../../../../engtst/mgm/GmPlay":65}],228:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GameData")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),l=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function PlantFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PlantFrame);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PlantFrame.__proto__||Object.getPrototypeOf(PlantFrame)).call(this));return e.iW=400,e.iH=320,e.iX=(s.default.SCRW-e.iW)/2,e.iY=(s.default.SCRH-e.iH)/2,e.btn_op=new u.default(f.default.xani_button),e.btn_op.InitButton("1号按钮90_60"),e.btn_op.Move(e.iX+250,e.iY+20+215,90,60),e.btn_op.sName="申请",e.btn_pick=new u.default(f.default.xani_button),e.btn_pick.InitButton("1号按钮90_60"),e.btn_pick.Move(e.iX+250,e.iY+20+215,90,60),e.btn_pick.sName="采摘",e.btn_clear=new u.default(f.default.xani_button),e.btn_clear.InitButton("1号按钮90_60"),e.btn_clear.Move(e.iX+250,e.iY+20+215,90,60),e.btn_clear.sName="清理",e.sStage=["幼苗期","成长期","采摘期","枯萎","枯萎"],e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PlantFrame,o.default),a(PlantFrame,[{key:"Draw",value:function(){if(c.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),l.default.gi().DrawTextEx(this.iX+20,this.iY+20,"名称:"+f.default.de_grow.strValue(this.iGType,0,1),4279324257,30,101,1,1,0,0,0),l.default.gi().DrawTextEx(this.iX+20,this.iY+20+40,"五行:"+n.default.sWuXing[this.iWx],4279324257,30,101,1,1,0,0,0),l.default.gi().DrawTextEx(this.iX+20,this.iY+20+80,"品质:"+this.iQuality,4279324257,30,101,1,1,0,0,0),this.iTime>=3)return l.default.gi().DrawTextEx(this.iX+20,this.iY+20+120,"成长阶段:"+this.sStage[this.iTime],4279324257,30,101,1,1,0,0,0),this.btn_clear.Move(this.iX+250,this.iY+20+120-5,90,60),void this.btn_clear.Draw();switch(2==this.iTime&&(this.btn_pick.Move(this.iX+250,this.iY+20+120-5,90,60),this.btn_pick.Draw()),l.default.gi().DrawTextEx(this.iX+20,this.iY+20+120,"成长阶段:"+this.sStage[this.iTime],4279324257,30,101,1,1,0,0,0),l.default.gi().DrawTextEx(this.iX+20,this.iY+20+160,this.iNextTime+"小时后进入"+this.sStage[this.iTime+1],4279324257,30,101,1,1,0,0,0),this.iStat){case 0:default:l.default.gi().DrawTextEx(this.iX+20,this.iY+20+220,"当前状态:正常",4278255360,30,101,1,1,0,0,0);break;case 1:l.default.gi().DrawTextEx(this.iX+20,this.iY+20+220,"当前状态:干燥",4294901760,30,101,1,1,0,0,0),this.btn_op.sName="取水",this.btn_op.Draw();break;case 2:l.default.gi().DrawTextEx(this.iX+20,this.iY+20+220,"当前状态:虫害",4294901760,30,101,1,1,0,0,0),this.btn_op.sName="驱虫",this.btn_op.Draw();break;case 3:l.default.gi().DrawTextEx(this.iX+20,this.iY+20+220,"当前状态:杂草",4294901760,30,101,1,1,0,0,0),this.btn_op.sName="除草",this.btn_op.Draw();break;case 4:l.default.gi().DrawTextEx(this.iX+20,this.iY+20+220,"当前状态:已采摘",4291346407,30,101,1,1,0,0,0);break;case 5:l.default.gi().DrawTextEx(this.iX+20,this.iY+20+220,"当前状态:可采摘",4291346407,30,101,1,1,0,0,0)}}},{key:"ProcTouch",value:function(t,e,i){if(this.iStat>0&&this.btn_op.ProcTouch(t,e,i)){if(this.btn_op.bCheck()){switch(this.iStat){case 1:h.default.gi().s_LandOperate(1,0,0,0);break;case 2:h.default.gi().s_LandOperate(2,0,0,0);break;case 3:h.default.gi().s_LandOperate(3,0,0,0)}d.default.gi().PopStat(1)}return!0}return this.iTime>=3&&this.btn_clear.ProcTouch(t,e,i)?(this.btn_clear.bCheck()&&(h.default.gi().s_LandOperate(5,this.iZid,0,0),d.default.gi().PopStat(1)),!0):2==this.iTime&&this.btn_pick.ProcTouch(t,e,i)?(this.btn_pick.bCheck()&&(h.default.gi().s_LandOperate(4,this.iZid,0,0),d.default.gi().PopStat(1)),!0):3==t&&!r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)&&(d.default.gi().PopStat(1),!0)}}]),PlantFrame}();i.default=m,m.Open=function(t){var e;(e=d.default.gi().iXStat==d.default.GS_PLANTFRAME?d.default.gi().LastStat(0):d.default.gi().PushStat(d.default.GS_PLANTFRAME)).iZid=t.GetNextInt(),e.iGType=t.GetNextInt(),e.iTime=t.GetNextInt(),e.iNextTime=t.GetNextInt(),e.iQuality=t.GetNextInt(),e.iStat=t.GetNextInt(),e.iWx=t.GetNextInt()}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72}],229:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../engine/control/XButton")),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function SelectLS(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SelectLS);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SelectLS.__proto__||Object.getPrototypeOf(SelectLS)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=490,e.iH=472,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_sel=new o.default(l.default.xani_nui2),e.btn_sel.InitButton("按钮1_110"),e.btn_sel.sName="选择",e.btn_sel.Move(e.iX+e.iW-110-30,e.iY+e.iH-55-30,110,52),e.lockgoods=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SelectLS,r.default),a(SelectLS,[{key:"Draw",value:function(){d.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),c.default.new_DrawGoods(this.iX+30,this.iY+30,m.default.gi().goods[2],null,null),u.default.gi().DrawTextEx(this.iX+30,this.iY+this.iH-30-52,SelectLS.s1,4278190080,24,101,1,1,0,0,0),u.default.gi().DrawTextEx(this.iX+30,this.iY+this.iH-30-26,SelectLS.s2,4278190080,24,101,1,1,0,0,0),null!=this.lockgoods&&(c.default.new_DrawRect(this.iX+30,this.iY+30,m.default.gi().goods[2],this.lockgoods,0),this.btn_sel.Draw()),c.default.bShowDetail()&&c.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){return null!=this.lockgoods&&this.btn_sel.ProcTouch(t,e,i)?(this.btn_sel.bCheck()&&(f.default.gi().s_LandOperate(0,SelectLS.iDest,this.lockgoods.iGid,0),h.default.gi().PopStat(1)),!0):(this.lockgoods=c.default.new_LockGoods(e,i,this.iX+30,this.iY+30,m.default.gi().goods[2],t),c.default.NoMove(),3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||h.default.gi().PopStat(1),!1)}}]),SelectLS}();i.default=g,g.s1,g.s2,g.iDest,g.Open=function(t,e,i){h.default.gi().PushStat(h.default.GS_SELECTLS),g.s1=t,g.s2=e,g.iDest=i}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],230:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(){function MissionFinish(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MissionFinish),this.iProc=new Int32Array(4),t=0;t<4;t++)this.iProc[t]=-1}return a(MissionFinish,[{key:"Init",value:function(){var t;for(t=0;t<4;t++)this.iProc[t]=6-2*t}},{key:"Draw",value:function(){if(!(this.iProc[0]<0)){var t,e=0;for(t=0;t<4;t++){switch(this.iProc[t]){case 6:s.default.xani_nui3.DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"任务完成",t,20,2.2,2.2,0,0,0);break;case 7:s.default.xani_nui3.DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"任务完成",t,40,1.9,1.9,0,0,0);break;case 8:s.default.xani_nui3.DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"任务完成",t,60,1.6,1.6,0,0,0);break;case 9:s.default.xani_nui3.DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"任务完成",t,80,1.3,1.3,0,0,0);break;case 10:s.default.xani_nui3.DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"任务完成",t,101,1,1,0,0,0);break;case 11:s.default.xani_nui3.DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"任务完成",t,101,.7,.7,0,0,0);break;case 12:s.default.xani_nui3.DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"任务完成",t,101,1,1,0,0,0);break;case 16:default:s.default.xani_nui3.DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"任务完成",t,101,1,1,0,0,0)}this.iProc[t]<20?this.iProc[t]++:e++}4==e&&(this.iProc[0]=-1)}}}]),MissionFinish}();i.default=r,r.mf=new r},{"../../../../../config/GmConfig":5,"../../../../../engtst/mgm/GmPlay":65}],231:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GameData")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=_interopRequireDefault(t("../../../../../engine/control/XButton")),l=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),f=(_interopRequireDefault(t("../../../../../engine/data/E_DATA")),_interopRequireDefault(t("../../../../../engine/data/E_ITEM")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),h=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engine/xms/XmsEngine"))),d=(_interopRequireDefault(t("../../../../../engine/xms/first/X10_NUMBER")),_interopRequireDefault(t("../../../../../engine/xms/first/X30_WORD")),_interopRequireDefault(t("../../../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),c=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),m=_interopRequireDefault(t("../../../../../engtst/mgm/MyAI")),g=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),b=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),D=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage")),y=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),w=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),S=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw")),x=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/mission/missionstruct/NormalMission")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission")),_interopRequireDefault(t("./MyMission")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var P=function(t){function MissionFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MissionFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MissionFrame.__proto__||Object.getPrototypeOf(MissionFrame)).call(this));for(i.pani=t,i.pm3f=t.pm3f,MissionFrame.iW=800,MissionFrame.iH=600,MissionFrame.iX=(s.default.SCRW-MissionFrame.iW)/2,MissionFrame.iY=(s.default.SCRH-MissionFrame.iH)/2,i.iNameW=130,i.iPoint=-1,i.btn_close=new l.default(d.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(MissionFrame.iX+MissionFrame.iW-35,MissionFrame.iY-25,60,60),i.btn_missionNamelist=new Array(x.default.MAXMISSIONCOUNT),e=0;e<x.default.MAXMISSIONCOUNT;e++)i.btn_missionNamelist[e]=new l.default(d.default.xani_nui2),i.btn_missionNamelist[e].InitButton("按钮2");for(i.btn_sort=new Array(3),e=0;e<3;e++)i.btn_sort[e]=new u.default(d.default.xani_ui),i.btn_sort[e].InitButton("htab4"),i.btn_sort[e].Move(MissionFrame.iX+MissionFrame.iW-15,MissionFrame.iY+50*e+20,140,50);for(i.btn_sort[0].sName="全部",i.btn_sort[1].sName="门派任务",i.btn_sort[2].sName="剧情任务",i.btn_cancel=new l.default(d.default.xani_nui2),i.btn_cancel.InitButton("按钮1"),i.btn_cancel.sName="取消任务",i.btn_cancel.Move(MissionFrame.iX+MissionFrame.iW-25-20-110-195-195,MissionFrame.iY+MissionFrame.iH-25-20-53,161,53),i.btn_findway=new l.default(d.default.xani_nui2),i.btn_findway.InitButton("按钮1"),i.btn_findway.sName="自动寻路",i.btn_findway.Move(MissionFrame.iX+MissionFrame.iW-25-20-110-195,MissionFrame.iY+MissionFrame.iH-25-20-53,161,53),i.btn_prompt=new l.default(d.default.xani_nui2),i.btn_prompt.InitButton("按钮1_110"),i.btn_prompt.sName="提 示",i.btn_prompt.Move(MissionFrame.iX+MissionFrame.iW-25-20-110,MissionFrame.iY+MissionFrame.iH-25-20-53,110,53),i.bOpenPrompt=!1,i.bShowPrompt=!1,i.btn_page=new Array(2),e=0;e<2;e++)i.btn_page[e]=new l.default(d.default.xani_nui2),i.btn_page[e].InitButton("右侧标签"),i.btn_page[e].Move(MissionFrame.iX+MissionFrame.iW-15,MissionFrame.iY+40+125*e,50,140);for(i.btn_go=new l.default(d.default.xani_button),i.btn_go.InitButton("普通按钮140_55"),i.btn_go.sName="前往",i.iPage=0,i.iScrollY=0,i.iLockStat=0,i.pc_main=h.default.pxe.FindMain("七国"),i.pc_mission=i.pc_main.FindFirst("可接任务列表",3),i.btn_price=new Array(5),e=0;e<5;e++)i.btn_price[e]=new l.default(d.default.xani_button),i.btn_price[e].bSingleButton=!0;return i.pc_price=new Array(5),i.ishowdetail=-1,i.gd=new w.default,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MissionFrame,o.default),a(MissionFrame,[{key:"DrawNormalMission",value:function(t){var e,i,a=x.default.de_mission.fdata(t.iMPoint);for(b.default.gi().FormatEx(x.default.de_mission.strValue(t.iMPoint,0,23),this.iDw-20,24,0,0,32),b.default.gi().Draw(this.iDx1+10,this.iDy1+10),i="",this.bOpenPrompt&&(this.sPrompt="提示：#e"),e=0;e<t.iItemCount;e++){var n=a.fitem(t.ni[e].iItemId);if(null!=n)switch(n.iType){case 10:if(m.default.gi().iDestNpcId=a.intValue(5),m.default.gi().sDestDetail=a.strValue(16),this.bCanFindWay=!0,i+="#e#cffffff目标"+(e+1)+":#c00ff00"+n.strValue(16),this.bOpenPrompt)s=n.intValue(5),r=d.default.de_npc.intValue(s,0,4),o=d.default.de_npc.intValue(s,0,5),u=d.default.de_npc.intValue(s,0,6),this.sPrompt+="#cff0000"+d.default.de_npc.strValue(s,0,1)+"#cffffff在#cff0000"+d.default.de_map.strValue(r,0,1),o>0&&u>0&&(this.sPrompt+="("+o/16+","+u/16+")");break;case 14:i+="#e#cffffff目标"+(e+1)+":#c00ff00"+n.strValue(17),this.bOpenPrompt&&(this.sPrompt+="#cff0000"+n.strValue(17));break;case 15:m.default.gi().iDestNpcId=a.intValue(33),m.default.gi().sDestDetail=a.strValue(18),this.bCanFindWay=!0,i+="#e#cffffff目标"+(e+1)+":#c00ff00"+n.strValue(18),this.bOpenPrompt&&(this.sPrompt+="#cff0000"+n.strValue(17));break;case 20:var s,r,o,u;if(m.default.gi().iDestNpcId=a.intValue(15),m.default.gi().sDestDetail=a.strValue(24),this.bCanFindWay=!0,i+="#e#cffffff目标"+(e+1)+":#c00ff00"+n.strValue(24),this.bOpenPrompt)s=n.intValue(15),r=d.default.de_npc.intValue(s,0,4),o=d.default.de_npc.intValue(s,0,5),u=d.default.de_npc.intValue(s,0,6),this.sPrompt+="#cff0000"+d.default.de_npc.strValue(s,0,1)+"#cffffff在#cff0000"+d.default.de_map.strValue(r,0,1),o>0&&u>0&&(this.sPrompt+="("+o/16+","+u/16+")"),this.sPrompt+="#e#c0000ff需战斗#e建议组队前往";break;case 26:i+="#e#cffffff目标"+(e+1)+":#c00ff00"+n.strValue(32)}}if(this.bOpenPrompt&&(this.bOpenPrompt=!1,this.bShowPrompt=!0),i.length>2)do{if("#e"!=i.substring(0,2))break;i=i.substring(2,i.length)}while(i.length>2);b.default.gi().FormatEx(i,this.iDw-20,24,0,0,26),b.default.gi().Draw(this.iDx2+10,this.iDy2+10)}},{key:"DrawSpecialMission",value:function(t){var e,i,a;for(b.default.gi().FormatEx(t.sDetail,this.iDw-20,24,0,0,32),b.default.gi().Draw(this.iDx1+10,this.iDy1+10),a="",this.bCC(t.iMPoint)&&(this.bCanCancel=!0,this.iCancelMid=t.iMid),this.bOpenPrompt&&(this.sPrompt="提示：#e"),e=0;e<t.iItemCount;e++)if(0==t.si[e].iMType)if(9==t.si[e].iSType)a+="#e#cffffff目标"+(e+1)+":#c00ff00"+t.si[e].sDetail+"("+t.si[e].iProc+"/"+t.si[e].iV2+")";else if(t.si[e].iProc>=100)a+="#e#cffffff目标"+(e+1)+":#c00ff00"+t.si[e].sDetail+"(已完成)";else{switch(t.si[e].iSType){case 1:case 5:case 7:case 8:m.default.gi().iDestNpcId=t.si[e].iV1,m.default.gi().sDestDetail=t.si[e].sDetail,this.bCanFindWay=!0;break;case 12:i=(t.si[e].iV1-(d.default.iNowMillis-y.default.iMillis)/1e3-y.default.iSecond)/60,t.si[e].sDetail="剩余"+i+"分钟"}if(a+="#e#cffffff目标"+(e+1)+":#cffff00"+t.si[e].sDetail,this.bOpenPrompt)switch(t.si[e].iSType){case 0:var n;if((n=d.default.de_goods.intValue(t.si[e].iV1,0,16))>=0){switch(this.sPrompt+="#e#cffffff装备可通过图纸+材料打造获得",d.default.de_goods.intValue(t.si[e].iV1,0,9)){case 0:this.sPrompt+="#e#cffffff0级装备可在乡水镇装备商人处购买";break;case 10:this.sPrompt+="#e#cffffff10级装备可在西阳城装备商人处购买";break;case 20:this.sPrompt+="#e#cffffff20级装备可在郢城装备商人处购买";break;case 30:this.sPrompt+="#e#cffffff30级装备可在临淄城装备商人处购买";break;case 40:this.sPrompt+="#e#cffffff40级装备可在咸阳城装备商人处购买"}break}if((n=d.default.de_goods.intValue(t.si[e].iV1,0,27))>=0){if(n<=2)switch(t.si[e].iV1){case 65:this.sPrompt+="#e#cffffff竹叶可在【乡水镇】药品商购买";break;case 66:this.sPrompt+="#e#cffffff香草可在【乡水镇】或【西阳城】药品商购买";break;case 67:this.sPrompt+="#e#cffffff薄荷可在【西阳城】或【郢城】药品商购买";break;case 68:this.sPrompt+="#e#cffffff夏枯草可在【乡水镇】药品商购买";break;case 69:this.sPrompt+="#e#cffffff石蜜可在【乡水镇】或【西阳城】药品商购买";break;case 70:this.sPrompt+="#e#cffffff止血草可在【西阳城】药品商购买";break;case 71:this.sPrompt+="#e#cffffff甘草可在【乡水镇】或【郢城】药品商购买";break;case 72:this.sPrompt+="#e#cffffff勺药可在【乡水镇】或【临淄】药品商购买";break;case 73:this.sPrompt+="#e#cffffff蜂蜜可在【西阳城】或【临淄】药品商购买";break;case 74:this.sPrompt+="#e#cffffff松脂可在【西阳城】药品商购买";break;case 75:this.sPrompt+="#e#cffffff云母可在【郢城】药品商购买";break;case 76:this.sPrompt+="#e#cffffff麝香可在【临淄】药品商购买";break;case 77:this.sPrompt+="#e#cffffff赤芝可在【咸阳】药品商购买";break;case 78:this.sPrompt+="#e#cffffff人参可在【郢城】药品商购买";break;case 79:this.sPrompt+="#e#cffffff鹿茸可在【临淄】药品商购买";break;case 80:this.sPrompt+="#e#cffffff熊胆可在【临淄】或【咸阳】药品商购买";break;case 81:this.sPrompt+="#e#cffffff雄黄可在【郢城】或【咸阳】药品商购买";break;case 82:this.sPrompt+="#e#cffffff当归可在【临淄】或【咸阳】药品商购买";break;case 83:this.sPrompt+="#e#cffffff白石英可在【郢城】或【咸阳】药品商购买";break;case 84:this.sPrompt+="#e#cffffff紫石英可在【咸阳】药品商购买"}else this.sPrompt+="3级草药通过挖宝或副本获得";break}if((n=d.default.de_goods.intValue(t.si[e].iV1,0,24))>=0){this.sPrompt+=n<=2?"#e#cffffff1级和2级材料可在野外战斗中掉落，也可在挖宝时获得":"3级材料通过挖宝获得或副本掉落";break}break;case 1:case 5:case 7:case 8:var s,r,o,u;s=t.si[e].iV1,r=d.default.de_npc.intValue(s,0,4),o=d.default.de_npc.intValue(s,0,5),u=d.default.de_npc.intValue(s,0,6),this.sPrompt+="#cff0000"+d.default.de_npc.strValue(s,0,1)+"#cffffff在#cff0000"+d.default.de_map.strValue(r,0,1),o>0&&u>0&&(this.sPrompt+="("+o/16+","+u/16+")");break;case 2:case 6:case 9:this.sPrompt+="仔细查看任务描述";break;case 3:switch(this.sPrompt+="#cffffff",t.si[e].iV1){case 3:this.sPrompt+="野猪在郊外抓";break;case 1:this.sPrompt+="狼在郊外或西阳山道抓";break;case 8:this.sPrompt+="盗贼在西阳山道或渡口抓";break;case 9:this.sPrompt+="僵尸在渡口或大禹水道抓";break;case 10:this.sPrompt+="鲛人在大禹水道或平原山陵抓";break;case 11:this.sPrompt+="花魅在平原山陵或巫山抓";break;case 12:this.sPrompt+="狐狸精在巫山或太行山抓";break;case 2:this.sPrompt+="阴灵在太行山或云蒙山抓";break;case 4:this.sPrompt+="机关兽在云蒙山或烈焰峰抓";break;case 5:this.sPrompt+="火妖在烈焰峰或函谷关抓";break;case 7:this.sPrompt+="修罗在函谷关或长城抓";break;case 14:this.sPrompt+="小刑天在长城或阴山抓";break;case 15:this.sPrompt+="蛟龙在阴山抓"}break;case 4:this.sPrompt+="在任务提示地图来回走动"}}for(a+="#e",e=0;e<t.iItemCount;e++)1==t.si[e].iMType&&(a+="#e任务奖励"+(e+1)+":");if(this.bOpenPrompt&&(this.bOpenPrompt=!1,this.bShowPrompt=!0),a.length>2)do{if("#e"!=a.substring(0,2))break;a=a.substring(2,a.length)}while(a.length>2);b.default.gi().FormatEx(a,this.iDw-20,24,0,0,26),b.default.gi().Draw(this.iDx2+10,this.iDy2+10)}},{key:"Draw_0",value:function(){var t,e,i,a,n,s,r;for(t=MissionFrame.iX+25+185+20,e=MissionFrame.iY+25,i=MissionFrame.iW-185-50-20,a=MissionFrame.iH-50,this.iDw=i-40,p.default.new_framein(t,e,i,a),f.default.gi().DrawText_2(t+20,e+20,"任务描述",4294959264,28,101,1,1,0,0,0,3,4278190080),this.iDx1=t+20,this.iDy1=e+20+30,p.default.new_frameon(this.iDx1,this.iDy1,this.iDw,180,0),e+=230,f.default.gi().DrawText_2(t+20,e+20,"任务目标",4294959264,28,101,1,1,0,0,0,3,4278190080),this.iDx2=t+20,this.iDy2=e+20+30,p.default.new_frameon(this.iDx2,this.iDy2,this.iDw,180,0),t=MissionFrame.iX+25,e=MissionFrame.iY+25,i=185,a=MissionFrame.iH-50,p.default.new_framein(t,e,i,a),e+=10,p.default.frame_type1("列表标题a20_50",t+10,e,i-20,20),f.default.gi().DrawTextEx(t+i/2,e+25,"剧情任务",4294967295,30,101,1,1,0,-2,-2),e+=50,this.iCount=0,n=0;n<x.default.MAXMISSIONCOUNT;n++)x.default.m.nmlist[n].bUseing&&(s=t+10,r=e,e+=50,this.pm3f.FillRect_2D(s,r,s+i-20,r+50,this.iCount%2==0?4282151834:4285241529),this.iPoint==this.iCount&&(this.DrawNormalMission(x.default.m.nmlist[n]),p.default.frame_type2("黄色透明框a25_25",s,r,i-20,50,25,25)),this.pm3f.DrawTextEx(s+(i-20)/2,r+25,x.default.m.nmlist[n].sName,4294967295,25,101,1,1,0,-2,-2),this.btn_missionNamelist[this.iCount].Move(s,r,i-20,50),this.iCount++);for(p.default.frame_type1("列表标题a20_50",t+10,e,i-20,20),f.default.gi().DrawTextEx(t+i/2,e+25,"普通任务",4294967295,30,101,1,1,0,-2,-2),e+=50,n=0;n<x.default.MAXMISSIONCOUNT;n++)x.default.m.smlist[n].bUseing&&(x.default.m.smlist[n].iType,s=t+10,r=e,e+=50,this.pm3f.FillRect_2D(s,r,s+i-20,r+50,this.iCount%2==0?4282151834:4285241529),this.iPoint==this.iCount&&(this.DrawSpecialMission(x.default.m.smlist[n]),p.default.frame_type2("黄色透明框a25_25",s,r,i-20,50,25,25)),this.pm3f.DrawTextEx(s+(i-20)/2,r+25,x.default.m.smlist[n].sName,4294967295,25,101,1,1,0,-2,-2),this.btn_missionNamelist[this.iCount].Move(s,r,i-20,50),this.iCount++);this.bCanCancel&&this.btn_cancel.Draw(),this.bCanFindWay&&this.btn_findway.Draw(),this.btn_prompt.Draw()}},{key:"bCC",value:function(t){for(var e,i,a,n=this.pc_mission.pca.phead;null!=n;){if(null!=(e=n.FindClass("任务id列表")))for(i=e.pca.phead;null!=i;){if(t==i.iNumber)return null!=(a=n.FindWord("是否可放弃"))&&"是"==a.pword;i=i.pdown}n=n.pdown}return!1}},{key:"IsInList",value:function(t){for(var e,i=t.pca.phead;null!=i;){for(e=0;e<x.default.MAXMISSIONCOUNT;e++)if(x.default.m.smlist[e].bUseing&&x.default.m.smlist[e].iMPoint==i.iNumber)return!0;i=i.pdown}return!1}},{key:"IsFinished",value:function(t){if("门派任务"==t){if(y.default.me.iFlag[1]%1e3>=20)return!0}else if("除害任务"==t){if(0!=(64&y.default.me.iFlag[12]))return!0}else if("追捕强盗"==t){if(y.default.me.iFlag[1]/1e3%1e3>=30)return!0}else if("押镖任务"==t){if(y.default.me.iFlag[1]/1e3%1e3>=15)return!0}else if("宝图任务"==t){if((15&y.default.me.iFlag[60])>=10)return!0}else if("每日赛跑"==t){if(0!=(32&y.default.me.iFlag[15]))return!0}else if("护法任务"==t){if(y.default.me.iFlag[9]%1e3>=30)return!0}else if("帮派-玄武任务"==t){if(0!=(2&y.default.me.iFlag[15]))return!0}else if("帮派-朱雀任务"==t){if(0!=(4&y.default.me.iFlag[15]))return!0}else if("帮派-青龙任务"==t){if(0!=(1&y.default.me.iFlag[15]))return!0}else if("帮派-白虎任务"==t){if(0!=(128&y.default.me.iFlag[15]))return!0}else if("手艺任务"==t){if(0!=(16&y.default.me.iFlag[15]))return!0}else if("执法任务"==t&&y.default.me.iFlag[10]%1e3>=10)return!0;return!1}},{key:"Draw_1",value:function(){var t,e,i,a,n,s;t=MissionFrame.iX+25+185+20,e=MissionFrame.iY+25,i=MissionFrame.iW-185-50-20,a=MissionFrame.iH-50,this.iDw=i-40,p.default.new_framein(t,e,i,a),f.default.gi().DrawText_2(t+20,e+20,"任务简介",4294959264,28,101,1,1,0,0,0,3,4278190080),this.iDx1=t+20,this.iDy1=e+20+30,p.default.new_frameon(this.iDx1,this.iDy1,this.iDw,180,0),e+=230,f.default.gi().DrawText_2(t+20,e+20,"任务奖励",4294959264,28,101,1,1,0,0,0,3,4278190080),this.iDx2=t+20,this.iDy2=e+20+30,p.default.new_frameon(this.iDx2,this.iDy2,this.iDw,180,0);var r,o,u=this.pc_mission.pca.phead,l=null;for(t=MissionFrame.iX+25,e=MissionFrame.iY+25,i=185,a=MissionFrame.iH-50,p.default.new_framein(t,e,i,a),e+=10,p.default.frame_type1("列表标题a20_50",t+10,e,i-20,20),f.default.gi().DrawTextEx(t+i/2,e+25,"可接任务",4294967295,30,101,1,1,0,-2,-2),e+=50,this.CX=MissionFrame.iX+25,this.CY=MissionFrame.iY+25+10+50,this.CW=185,this.CH=MissionFrame.iH-120,f.default.gi().SetViewClip(this.CX,this.CY,this.CX+this.CW,this.CY+this.CH),this.iCount=0;null!=u;)r=u.FindNumber("出现等级"),y.default.me.rbs.iLev<r.iNumber||this.IsInList(u.FindClass("任务id列表"))||this.IsFinished(u.sName)||(n=t+10,s=e-this.iScrollY,e+=50,this.pm3f.FillRect_2D(n,s,n+i-20,s+50,this.iCount%2==0?4282151834:4285241529),this.iPoint==this.iCount&&(l=u,p.default.frame_type2("黄色透明框a25_25",n,s,i-20,50,25,25)),this.pm3f.DrawTextEx(n+(i-20)/2,s+25,u.sName,4294967295,25,101,1,1,0,-2,-2),this.btn_missionNamelist[this.iCount].Move(n,s,i-20,50),this.iCount++),u=u.pdown;if(f.default.gi().NoClip(),this.iPriceCount=0,null!=l){for(o=l.FindWord("任务简介"),b.default.gi().FormatEx(o.pword,this.iDw-20,24,0,0,32),b.default.gi().Draw(this.iDx1+10,this.iDy1+10),u=(u=l.FindClass("任务奖励")).pca.phead;null!=u;)r=u.FindNumber("物品id"),o=u.FindWord("物品介绍"),d.default.xani_nui3.DrawAnima(this.iDx2+50+120*this.iPriceCount,this.iDy2+50,"物品格子",0),d.default.xani_ngoods.DrawAnima_aa(this.iDx2+50+120*this.iPriceCount,this.iDy2+50,d.default.de_goods.strValue(r.iNumber,0,10),0),this.pc_price[this.iPriceCount]=u,this.btn_price[this.iPriceCount].Move(this.iDx2+50+120*this.iPriceCount,this.iDy2+50,80,80),this.iPriceCount++,u=u.pdown;null!=(r=l.FindNumber("前往npcid"))?(this.iGoToNpcId=r.iNumber,this.btn_go.Move(MissionFrame.iX+MissionFrame.iW-25-140-20,MissionFrame.iY+MissionFrame.iH-25-55-20,140,55),this.btn_go.Draw()):this.iGoToNpcId=-1}this.ishowdetail>=0&&(r=this.pc_price[this.ishowdetail].FindNumber("物品id"),null!=(o=this.pc_price[this.ishowdetail].FindWord("物品介绍"))?S.default.new_DrawDetailEx1(r.iNumber,this.btn_price[this.ishowdetail].MissionFrame.iX,this.btn_price[this.ishowdetail].MissionFrame.iY,o.pword):(this.gd.SetAtt(0,r.iNumber,1,0,0,0,0,0,0,0,0),S.default.new_DrawDetail(this.gd,this.btn_price[this.ishowdetail].MissionFrame.iX,this.btn_price[this.ishowdetail].MissionFrame.iY,0)))}},{key:"Draw",value:function(){var t;for(this.bCanCancel=!1,this.bCanFindWay=!1,p.default.new_baseframe2(MissionFrame.iX,MissionFrame.iY,MissionFrame.iW,MissionFrame.iH,"任","务"),this.btn_close.Draw(),t=0;t<2;t++)this.iPage==t&&(this.btn_page[t].bMouseIn=!0,this.btn_page[t].bMouseDown=!0),this.btn_page[t].Draw(),p.default.new_lableword4(MissionFrame.iX+MissionFrame.iW-15,MissionFrame.iY+50+0-4,40,70,0==this.iPage,"已","接","任","务"),p.default.new_lableword4(MissionFrame.iX+MissionFrame.iW-15,MissionFrame.iY+50+130-8,40,70,1==this.iPage,"可","接","任","务");switch(this.iPage){case 0:this.Draw_0();break;case 1:this.Draw_1()}_.default.end(_.default.CONFIRM_CANCELMISSION)&&_.default.bConfirm&&c.default.gi().s_CancelMission(this.iCancelMid),this.bShowPrompt&&(D.default.fm.Open(this.sPrompt),this.bShowPrompt=!1)}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&g.default.gi().PopStat(1),!0;for(a=0;a<2;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&(this.iPage=a,this.iPoint=0);if(0==this.iPage){if(this.bShowPrompt)return 3==t&&(this.bShowPrompt=!1),!0;for(a=0;a<this.iCount;a++)this.btn_missionNamelist[a].ProcTouch(t,e,i)&&this.btn_missionNamelist[a].bCheck()&&(this.iPoint=a);this.btn_prompt.ProcTouch(t,e,i)&&this.btn_prompt.bCheck()&&(this.bOpenPrompt=!0),this.bCanFindWay&&this.btn_findway.ProcTouch(t,e,i)&&this.btn_findway.bCheck()&&(m.default.gi().FindNpc(m.default.gi().iDestNpcId,!1,!1),g.default.gi().PopStat(1)),this.bCanCancel&&this.btn_cancel.ProcTouch(t,e,i)&&this.btn_cancel.bCheck()&&_.default.start(_.default.CONFIRM_CANCELMISSION,"是否花费10000现金放弃该任务?")}else if(1==this.iPage){if(this.ishowdetail=-1,2==this.iLockStat)return this.iScrollY+=this.iLockY-i,this.iLockY=i,this.iScrollY>50*this.iCount-this.CH+60&&(this.iScrollY=50*this.iCount-this.CH+60),this.iScrollY<0&&(this.iScrollY=0),3==t&&(this.iLockStat=0),!0;for(a=0;a<this.iCount;a++)this.btn_missionNamelist[a].ProcTouch(t,e,i)&&this.btn_missionNamelist[a].bCheck()&&(this.iPoint=a);for(this.iGoToNpcId>0&&this.btn_go.ProcTouch(t,e,i)&&this.btn_go.bCheck()&&(1e4==this.iGoToNpcId?m.default.gi().FindNpc(n.default.iMasterids[y.default.me.rbs.iSchoolId],!0,!0):m.default.gi().FindNpc(this.iGoToNpcId,!0,!0),g.default.gi().PopStat(1)),r.default.bInRect(e,i,this.CX,this.CY,this.CW,this.CH)?(1==t&&(this.iLockY=i,this.iLockStat=1),2==t&&1==this.iLockStat&&Math.abs(this.iLockY-i)>15&&(this.iLockStat=2)):this.iLockStat=0,a=0;a<this.iPriceCount;a++)this.btn_price[a].ProcTouch(t,e,i)&&this.btn_price[a].bCheck()&&(this.ishowdetail=a)}return!1}}]),MissionFrame}();i.default=P,P.Open=function(t){var e=g.default.gi().PushStat(g.default.GS_MISSIONFRAME);e.iPage=t,e.iPoint=0},P.iX,P.iY,P.iW,P.iH},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/data/E_DATA":21,"../../../../../engine/data/E_ITEM":22,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engine/xms/XmsEngine":40,"../../../../../engine/xms/first/X10_NUMBER":56,"../../../../../engine/xms/first/X30_WORD":58,"../../../../../engine/xms/first/X40_CLASS":59,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/MyAI":68,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/mission/missionstruct/NormalMission":237,"../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission":239,"./MyMission":233}],232:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../map/MapManager")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),u=(_interopRequireDefault(t("../../../../../engine/data/E_DATA")),_interopRequireDefault(t("../../../../../engine/data/E_ITEM")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),f=_interopRequireDefault(t("../../../../../engtst/mgm/MyAI")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatStringBuffer")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/privatechat/FriendList")),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/JQMode")),p=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods")),D=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/mission/missionstruct/NormalMission")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialItem")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/MyPets"))),y=_interopRequireDefault(t("./MyMission")),w=_interopRequireDefault(t("./MissionFrame"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var S=function(){function _MISSIONINDEX(){_classCallCheck(this,_MISSIONINDEX),this.fsb=new c.default,this.sDest="",this.sPrompt=""}return a(_MISSIONINDEX,[{key:"Clean",value:function(){this.bFight=!1,this.iProcType=-1,this.bPaoHuan=!1}}]),_MISSIONINDEX}(),x=function(){function MissionLead(){var t;for(_classCallCheck(this,MissionLead),this.mi=new Array(MissionLead.MAXMI),t=0;t<MissionLead.MAXMI;t++)this.mi[t]=new S;this.iW=250,this.iH=300,this.iX=s.default.SCRW-this.iW-5,this.iY=85,this.btn_oc=new o.default(l.default.xani_nui3),this.btn_oc.InitButton("关闭任务"),this.bOpen=!0,this.iMCount=0,this.mi[this.iMCount].sort=0,this.mi[this.iMCount].sName="可接任务",this.mi[this.iMCount].sDest="点击查看",this.mi[this.iMCount].Clean(),this.mi[this.iMCount].bJQ=!1,this.mi[this.iMCount].nm=null,this.mi[this.iMCount].sm=null,this.mi[this.iMCount].iProcType=10,this.iMCount++,this.iOffX=0,this.iOffY=0,this.bLock=!1,this.iLockPoint=-1,this.iLockY=-1,this.bMove=!1}return a(MissionLead,[{key:"FreshMission",value:function(){var t,e,i,a,n,s,r,o,u;for(this.iMCount=0,t=0;t<y.default.MAXMISSIONCOUNT;t++){if(y.default.m.nmlist[t].bUseing){for(s=y.default.m.nmlist[t],a=y.default.de_mission.fdata(s.iMPoint),this.mi[this.iMCount].sort=s.iMid,this.mi[this.iMCount].sName=y.default.de_mission.strValue(s.iMPoint,0,19),this.mi[this.iMCount].sDetail=y.default.de_mission.strValue(s.iMPoint,0,23),this.mi[this.iMCount].Clean(),this.mi[this.iMCount].bJQ=!0,this.mi[this.iMCount].nm=s,this.mi[this.iMCount].sm=null,e=0;e<s.iItemCount;e++)if(null!=(n=a.fitem(s.ni[e].iItemId)))switch(n.iType){case 10:this.mi[this.iMCount].sDest=a.strValue(16),this.mi[this.iMCount].iDestNpcId=a.intValue(5),this.mi[this.iMCount].iProcType=0;break;case 14:this.mi[this.iMCount].sPrompt=MissionLead.sPetFrom(n.intValue(9)),this.mi[this.iMCount].sDest=n.strValue(17),this.mi[this.iMCount].bFight=!0,this.mi[this.iMCount].iProcType=2;break;case 15:this.mi[this.iMCount].sDest=a.strValue(18),b.default.bHaveGoods(a.intValue(8),a.intValue(7))?(this.mi[this.iMCount].iDestNpcId=a.intValue(33),this.mi[this.iMCount].iProcType=0):(this.mi[this.iMCount].sPrompt=MissionLead.sGoodsFrom(a.intValue(8)),this.mi[this.iMCount].iProcType=2);break;case 20:this.mi[this.iMCount].sDest=a.strValue(24),this.mi[this.iMCount].iDestNpcId=a.intValue(15),this.mi[this.iMCount].bFight=!0,this.mi[this.iMCount].iProcType=0;break;case 26:this.mi[this.iMCount].sPrompt=MissionLead.sPetFrom(n.intValue(30)),this.mi[this.iMCount].sDest=n.strValue(32),this.mi[this.iMCount].bFight=!0,this.mi[this.iMCount].iProcType=2}"-1"!=(i=a.strValue(22))&&(this.mi[this.iMCount].sPrompt=i,this.mi[this.iMCount].iProcType=2),this.iMCount++}if(y.default.m.smlist[t].bUseing){for(r=y.default.m.smlist[t],this.mi[this.iMCount].sort=r.iMid,this.mi[this.iMCount].sName=r.sName,0!=r.iMPoint&&50!=r.iMPoint&&51!=r.iMPoint&&52!=r.iMPoint&&53!=r.iMPoint&&54!=r.iMPoint||(this.mi[this.iMCount].sName+="("+r.iCount+"/10)"),this.mi[this.iMCount].sDetail=r.sDetail,this.mi[this.iMCount].Clean(),this.mi[this.iMCount].bJQ=!1,this.mi[this.iMCount].nm=null,this.mi[this.iMCount].sm=r,e=0;e<r.iItemCount;e++)if(!(9!=(o=r.si[e]).iSType&&o.iProc>=100)&&0==o.iMType)switch(o.iSType){case 1:case 7:this.mi[this.iMCount].sDest=o.sDetail,this.mi[this.iMCount].iDestNpcId=o.iV1,this.mi[this.iMCount].iProcType=0;break;case 5:case 8:this.mi[this.iMCount].sDest=o.sDetail,this.mi[this.iMCount].iDestNpcId=o.iV1,this.mi[this.iMCount].iProcType=0,this.mi[this.iMCount].bFight=!0;break;case 0:if(10!=r.iMPoint&&(this.mi[this.iMCount].sDest=o.sDetail),l.default.sop(""+o.iV1),b.default.bHaveGoods(o.iV1,o.iV2))this.mi[this.iMCount].iDestNpcId=o.iV3,this.mi[this.iMCount].iProcType=0,10==r.iMPoint&&(this.mi[this.iMCount].sPrompt=r.sDetail+"#e#e(手动押镖不能自动寻路)",this.mi[this.iMCount].iProcType=2,this.mi[this.iMCount].sDest=o.sDetail);else{if(10==r.iMPoint)continue;this.mi[this.iMCount].sPrompt=MissionLead.sGoodsFrom(o.iV1),this.mi[this.iMCount].iProcType=2}break;case 2:this.mi[this.iMCount].bFight=!0;case 6:this.mi[this.iMCount].sDest=o.sDetail,this.mi[this.iMCount].sPrompt=r.sDetail,this.mi[this.iMCount].iProcType=2;break;case 9:this.mi[this.iMCount].sPrompt=MissionLead.sPetFrom(o.iV1),this.mi[this.iMCount].sPrompt.length<=0&&(this.mi[this.iMCount].sPrompt=r.sDetail),this.mi[this.iMCount].sDest=o.sDetail+"("+o.iProc+"/"+o.iV2+")",this.mi[this.iMCount].bFight=!0,this.mi[this.iMCount].iProcType=2,o.iProc>=o.iV2&&13==r.iMPoint&&(this.mi[this.iMCount].iDestNpcId=20,this.mi[this.iMCount].iProcType=0);break;case 3:this.mi[this.iMCount].sDest=o.sDetail,D.default.bHavePet(o.iV1,o.iV3)?(this.mi[this.iMCount].iDestNpcId=o.iV2,this.mi[this.iMCount].iProcType=0):(this.mi[this.iMCount].sPrompt=MissionLead.sPetFrom(o.iV1),this.mi[this.iMCount].iProcType=2);break;case 4:this.mi[this.iMCount].bFight=!0,this.mi[this.iMCount].sDest=o.sDetail,this.mi[this.iMCount].sPrompt=r.sDetail,this.mi[this.iMCount].iProcType=2;break;case 10:this.mi[this.iMCount].sDest=o.sDetail,b.default.bHaveGoods(o.iV1,o.iV2)?(this.mi[this.iMCount].sPrompt=r.sDetail,this.mi[this.iMCount].iProcType=2):(this.mi[this.iMCount].sPrompt=MissionLead.sGoodsFrom(o.iV1),this.mi[this.iMCount].iProcType=2);break;case 11:case 14:case 15:case 16:case 17:this.mi[this.iMCount].sDest=o.sDetail,this.mi[this.iMCount].sPrompt=r.sDetail,this.mi[this.iMCount].iProcType=2;break;case 12:this.mi[this.iMCount].bPaoHuan=!0,this.mi[this.iMCount].iPHTime=o.iV1;break;case 13:this.mi[this.iMCount].sDest=o.sDetail,this.mi[this.iMCount].sPrompt=r.sDetail,this.mi[this.iMCount].iProcType=2;break;case 18:this.mi[this.iMCount].sDest=o.sDetail+o.iProc+"/10",this.mi[this.iMCount].sPrompt=r.sDetail,this.mi[this.iMCount].iProcType=2}this.iMCount++}}for(t=0;t<this.iMCount-1;t++)for(e=t+1;e<this.iMCount;e++)this.mi[e].sort>this.mi[t].sort&&(u=this.mi[e],this.mi[e]=this.mi[t],this.mi[t]=u);for(p.default.me.rbs.iLev>=10&&(this.mi[this.iMCount].sort=0,this.mi[this.iMCount].sName="可接任务",this.mi[this.iMCount].sDest="点击查看",this.mi[this.iMCount].Clean(),this.mi[this.iMCount].bJQ=!1,this.mi[this.iMCount].nm=null,this.mi[this.iMCount].sm=null,this.mi[this.iMCount].iProcType=10,this.iMCount++),t=0;t<this.iMCount;t++)d.default.gi().FormatEx("#cfeeede"+this.mi[t].sDest,230,22,0,0,26),this.mi[t].fsb.Init(),this.mi[t].iEh=d.default.gi().iH,this.mi[t].iOh=37+this.mi[t].iEh+8}},{key:"Draw",value:function(){if(!(n.default.gi().vbk.mapdialog.bHideUI()||_.default.jq.bJQLock()||this.iMCount<=0)){var t,e;if(this.iOffH=0,this.iX>s.default.SCRW&&(this.iX=s.default.SCRW),this.btn_oc.Move(this.iX-50,this.iY,50,70),t=this.iW/4,g.default.gi().bShow&&!g.default.gi().bCloseing){if(!(this.iX<s.default.SCRW-5))return;this.iX+=t}else if(this.bOpen)this.iX>s.default.SCRW-this.iW-5+t?this.iX-=t:this.iX=s.default.SCRW-this.iW-5,this.btn_oc.Move(this.iX-50,this.iY,50,70),this.btn_oc.Draw();else{if(!(this.iX<s.default.SCRW))return void this.btn_oc.Draw();this.iX+=t,this.btn_oc.Move(this.iX-50,this.iY,50,70),this.btn_oc.Draw()}for(t=b.default.iHaveGoodsCount(),e=D.default.bHavePetCount(),MissionLead.iOldGoodsCount==t&&MissionLead.iOldPetCount==e||(MissionLead.iOldGoodsCount=t,MissionLead.iOldPetCount=e,this.FreshMission()),u.default.gi().SetViewClip(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH),t=0;t<this.iMCount;t++)this.mi[t].iOx=this.iX,this.mi[t].iOy=this.iY+this.iOffH+this.iOffY,this.bLock&&this.iLockPoint==t?h.default.new_framepc(this.mi[t].iOx,this.mi[t].iOy,this.iW,this.mi[t].iOh):u.default.gi().FillRect_2D(this.mi[t].iOx,this.mi[t].iOy,this.mi[t].iOx+this.iW,this.mi[t].iOy+this.mi[t].iOh,2147483648),u.default.gi().DrawTextEx(this.mi[t].iOx+8,this.mi[t].iOy+8,this.mi[t].sName,this.mi[t].bJQ?4294902015:4294967040,24,101,1,1,0,0,0),this.mi[t].fsb.Draw(this.mi[t].iOx+8,this.mi[t].iOy+8+24+5),this.mi[t].bFight&&l.default.xani_nui3.DrawAnima(this.mi[t].iOx+225,this.mi[t].iOy+25,"战斗标签",0),this.iOffH+=this.mi[t].iOh+2;u.default.gi().NoClip(),this.bMove||((e=this.iH-this.iOffH)>0&&(e=0),this.iOffY<e&&(this.iOffY<e-50?this.iOffY+=50:this.iOffY=e),this.iOffY>0&&(this.iOffY>50?this.iOffY-=50:this.iOffY=0))}}},{key:"ProcTouch",value:function(t,e,i){if(this.iMCount<=0)return!1;if(g.default.gi().bShow&&!g.default.gi().bCloseing)return!1;if(!this.bOpen)return!!this.btn_oc.ProcTouch(t,e,i)&&(this.btn_oc.bCheck()&&(this.bOpen=!0,this.btn_oc.InitButton("关闭任务")),!0);if(this.btn_oc.ProcTouch(t,e,i))return this.btn_oc.bCheck()&&(this.bOpen=!1,this.btn_oc.InitButton("打开任务")),!0;var a;if(this.bLock){if(2==t&&(a=i-this.iLockY,this.bMove||(a>20||a<-20)&&(this.bMove=!0),this.bMove&&(this.iOffY+=a,this.iLockY=i,this.iOffY>this.iH-5&&(this.iOffY=this.iH-5),this.iOffY<5-this.iOffH&&(this.iOffY=5-this.iOffH))),3==t)if(this.bLock=!1,this.bMove)this.bMove=!1;else{if(10==this.mi[this.iLockPoint].iProcType)return w.default.Open(1),!0;if(null!=this.mi[this.iLockPoint].nm&&(56==this.mi[this.iLockPoint].nm.iMPoint||59==this.mi[this.iLockPoint].nm.iMPoint||139==this.mi[this.iLockPoint].nm.iMPoint||140==this.mi[this.iLockPoint].nm.iMPoint||141==this.mi[this.iLockPoint].nm.iMPoint||144==this.mi[this.iLockPoint].nm.iMPoint))return f.default.gi().AutoNormalMission(this.mi[this.iLockPoint].nm),!0;if(null!=this.mi[this.iLockPoint].sm){if(50==this.mi[this.iLockPoint].sm.iMPoint||51==this.mi[this.iLockPoint].sm.iMPoint||52==this.mi[this.iLockPoint].sm.iMPoint||53==this.mi[this.iLockPoint].sm.iMPoint||54==this.mi[this.iLockPoint].sm.iMPoint)return f.default.gi().AutoSpecialMission(this.mi[this.iLockPoint].sm),!0;if(10==this.mi[this.iLockPoint].sm.iMPoint&&1==parseInt(p.default.me.iFlag[1]/1e8))return f.default.gi().AutoSpecialMission(this.mi[this.iLockPoint].sm),!0}0==this.mi[this.iLockPoint].iProcType&&f.default.gi().FindNpc(this.mi[this.iLockPoint].iDestNpcId,null!=this.mi[this.iLockPoint].nm,null!=this.mi[this.iLockPoint].nm),2==this.mi[this.iLockPoint].iProcType&&(this.mi[this.iLockPoint].bPaoHuan?m.default.fm.Open(this.mi[this.iLockPoint].sPrompt+"#e#e剩余时间："+(this.mi[this.iLockPoint].iPHTime-(l.default.iNowMillis-p.default.iMillis)/1e3-p.default.iSecond)/60+"分钟"):m.default.fm.Open(this.mi[this.iLockPoint].sPrompt))}return!0}if(1==t&&r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))for(a=0;a<this.iMCount;a++)if(this.mi[a].iOy<=i&&i<=this.mi[a].iOy+this.mi[a].iOh+2)return this.bLock=!0,this.iLockPoint=a,this.iLockY=i,!0;return!1}},{key:"special_doyb",value:function(){var t;for(t=0;t<this.iMCount;t++)null!=this.mi[t].sm&&10==this.mi[t].sm.iMPoint&&1==parseInt(p.default.me.iFlag[1]/1e8)&&f.default.gi().AutoSpecialMission(this.mi[this.iLockPoint].sm)}}]),MissionLead}();i.default=x,x.MAXMI=20,x.ml=null,x.gi=function(){return null==x.ml&&(x.ml=new x),x.ml},x.sGoodsFrom=function(t){var e,i,a=l.default.de_goods.fdata(t);if(null==a)return"";if(i=a.strValue(4)+"#e#cffffff",(e=a.intValue(9))>=0)return 0==e&&(i+="0级装备可在【乡水镇】装备商人处购买"),10==e&&(i+="10级装备可在【西阳城】装备商人处购买"),20==e&&(i+="20级装备可在【郢城】装备商人处购买#e#e通过西阳城轿夫前往"),30==e&&(i+="30级装备可在【临淄】装备商人处购买#e#e通过西阳城轿夫前往"),40==e&&(i+="40级装备可在【咸阳】装备商人处购买#e#e通过西阳城轿夫前往"),e>=50&&(i+=e+"级装备，可使用图纸和材料，在【乡水镇】铁匠处打造"),i;if((e=a.intValue(27))>0){if(1==e||2==e)switch(t){case 65:i+="竹叶可在【乡水镇】药品商购买";break;case 66:i+="香草可在【乡水镇】或【西阳城】药品商购买";break;case 67:i+="薄荷可在【西阳城】或【郢城】药品商购买";break;case 68:i+="夏枯草可在【乡水镇】药品商购买";break;case 69:i+="石蜜可在【乡水镇】或【西阳城】药品商购买";break;case 70:i+="止血草可在【西阳城】药品商购买";break;case 71:i+="甘草可在【乡水镇】或【郢城】药品商购买";break;case 72:i+="勺药可在【乡水镇】或【临淄】药品商购买";break;case 73:i+="蜂蜜可在【西阳城】或【临淄】药品商购买";break;case 74:i+="松脂可在【西阳城】药品商购买";break;case 75:i+="云母可在【郢城】药品商购买#e#e通过西阳城轿夫前往";break;case 76:i+="麝香可在【临淄】药品商购买#e#e通过西阳城轿夫前往";break;case 77:i+="赤芝可在【咸阳】药品商购买#e#e通过西阳城轿夫前往";break;case 78:i+="人参可在【郢城】药品商购买#e#e通过西阳城轿夫前往";break;case 79:i+="鹿茸可在【临淄】药品商购买#e#e通过西阳城轿夫前往";break;case 80:i+="熊胆可在【临淄】或【咸阳】药品商购买#e#e通过西阳城轿夫前往";break;case 81:i+="雄黄可在【郢城】或【咸阳】药品商购买#e#e通过西阳城轿夫前往";break;case 82:i+="当归可在【临淄】或【咸阳】药品商购买#e#e通过西阳城轿夫前往";break;case 83:i+="白石英可在【郢城】或【咸阳】药品商购买#e#e通过西阳城轿夫前往";break;case 84:i+="紫石英可在【咸阳】药品商购买#e#e通过西阳城轿夫前往"}return 3==e&&(i+="三级草药通过挖宝或副本获得，部分三级草药可在商城购买"),i}return(e=a.intValue(33))>0?(1==e&&(i+="一级丹药，使用丹方进行炼丹可获得，每完成一轮帮派朱雀任务，可获得一张丹方。在帮派中学习炼丹术，可提高炼出丹药的品质"),2==e&&(i+="二级丹药，可在商城购买"),i):(e=a.intValue(31))>0?(1==e&&(i+="一级材料，完成一轮护法任务有几率获得，护法任务在【咸阳】商鞅处领取，30级以下地图战斗也有几率掉落一级材料。#e任务获得材料种类随机，建议玩家向其他玩家购买所需材料"),2==e&&(i+="二级材料，30级以上完成一轮护法任务有几率获得，护法任务在【咸阳】商鞅处领取，30级以上地图战斗也有几率掉落二级材料。#e任务获得材料种类随机，建议玩家向其他玩家购买所需材料"),3==e&&(i+="三级材料，挖宝有几率获得，或在【咸阳】副本官处使用副本积分兑换#e建议玩家通过交易获得所需材料"),i):(e=a.intValue(34))>=0?i+="在帮派学院学习烹饪技能，即可制作烹饪，技能等级越高，制出烹饪品质越高，也可直接向其他玩家购买":154==t||155==t||156==t?i+="挖宝有几率获得#e战胜嚣张有几率获得#e打开宠物技能包可获得#e建议玩家通过交易购买所需特定宠物技能书":157==t||158==t||159==t?i+="可在商城购买获得":160==t||161==t?i+="挖宝有几率获得#e活动，副本掉落#e向其他玩家购买#e商城购买":226==t||227==t||227==t?i+="周二门派闯关活动中掉落#e或向其他玩家购买":116==t||117==t||118==t||119==t||120==t||121==t||122==t||123==t||207==t||208==t||236==t||106==t||107==t||108==t||229==t?i+="日常活动中获得#e向其他玩家购买#e商城购买":209==t?i+="在【临淄】慎到处拜师或收徒，领取师徒任务，完成师徒任务可获得修炼积分，用于兑换修炼果。也可向其他玩家购买获得":209==t||211==t||212==t?i+="活动中获得，也可向其他玩家购买获得":278==t||279==t?i+="国庆活动中获得":t>=109&&t<=115?i+="野外地图战斗有几率掉落，挖宝有几率获得，或向其他玩家购买":t>=213&&t<=224?i+="新年活动中获得":t>=101&&t<=105?i+="打败妖怪叔叔掉落#e副本，活动中掉落#e或向其他玩家购买":96==t?i+="完成除害任务获得#e副本，活动中掉落#e或向其他玩家购买":97==t?i+="【郢城】栾千盛处完成一轮强盗任务可获得#e挖宝有几率获得#e高级图纸可跑环获得，或用副本积分兑换#e也可向其他玩家购买":98==t||99==t||100==t?i+="在帮派学院学习相应技能即可制作#e也可向其他玩家购买":162==t||225==t||237==t?i+="系统赠送给新玩家的礼物，没有其他获得途径":163==t||164==t?i+="押镖任务物品，任务中自动获得":192==t||193==t||194==t?i+="帮派任务物品，领取任务自动获得":195==t?i+="每完成一轮帮派朱雀任务，可获得一张丹方。#e也可向其他玩家购买":196==t?i+="完成押镖任务有几率获得#e也可向其他玩家购买":230==t?i+="集齐一套七国旗，可在【西阳城】乞丐处兑换高级藏宝图#e也可向其他玩家购买":t>=231&&t<=235?i+="对怪物贝贝使用偷窃技能可获得，偷窃技能可在【西阳山道】狐狸精处学习#e周二门派闯关活动中掉落#e也可向其他玩家购买":238==t||239==t||240==t||241==t||242==t||243==t?i+="展示物品":312==t?i+="周三西阳保卫战中有几率掉落#e【乡水镇】新手指导员处侠义值兑换#e商城购买#e向其他玩家购买":255==t||256==t||257==t||258==t||259==t?i+="挖宝有几率获得#e打开果实有几率获得":260==t||261==t||262==t?i+="商城购买":263==t||264==t||265==t?i+="照料土地时获得的任务物品":t>=266&&t<=270?i+="挖宝获得#e也可向其他玩家购买":271==t||272==t||273==t||274==t||275==t?i+="土地上植物成熟后，采摘得到#e也可向其他玩家购买":276==t||277==t?i+="打开果实有几率获得#e也可向其他玩家购买":280==t||281==t||282==t||283==t||284==t?i+="完成战队秘境可获得#e也可向其他玩家购买":280==t||281==t||282==t||283==t||284==t?i+="打开果实有几率获得#e也可向其他玩家购买":i},x.sPetFrom=function(t){var e,i,a,n=0,s=l.default.de_pet.fdata(t);if(null==s)return"";for(a=s.strValue(1)+"出现在#c00ff00",e=0;e<l.default.de_map.iDataCount;e++)for(i=0;i<l.default.de_map.datas[e].iItemCount;i++)4==l.default.de_map.datas[e].items[i].iType&&l.default.de_map.datas[e].items[i].intValue(6)==t&&(n>0&&(a+="，"),n++,a+=l.default.de_map.datas[e].strValue(1));return a+="#o#e#e小地图/#c00ff00世界地图#o查看如何前往#e在野外地图#c00ff00走动#o，会遭遇怪物#e注！将快捷中的#c00ff00遇怪开关#o打开"},x.iOldGoodsCount=0,x.iOldPetCount=0},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/data/E_DATA":21,"../../../../../engine/data/E_ITEM":22,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/MyAI":68,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/format/FormatStringBuffer":82,"../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../engtst/mgm/gameing/chat/privatechat/FriendList":102,"../../../../../engtst/mgm/gameing/help/JQMode":187,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../engtst/mgm/gameing/me/mission/missionstruct/NormalMission":237,"../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialItem":238,"../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission":239,"../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../map/MapManager":286,"./MissionFrame":231,"./MyMission":233}],233:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../map/MapManager")),s=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/data/DataEngine")),_interopRequireDefault(t("../../../../../engine/data/E_DATA")),_interopRequireDefault(t("../../../../../engine/data/E_ITEM")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),r=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),o=_interopRequireDefault(t("../../../../../engtst/mgm/MyAI")),u=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/BeginersGuide")),l=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/ShowPath")),f=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),h=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods")),d=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/mission/missionstruct/NormalMission")),c=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission")),m=_interopRequireDefault(t("./MissionFinish"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(){function MyMission(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyMission),this.nmlist=new Array(MyMission.MAXMISSIONCOUNT),this.smlist=new Array(MyMission.MAXMISSIONCOUNT),t=0;t<MyMission.MAXMISSIONCOUNT;t++)this.nmlist[t]=new d.default,this.smlist[t]=new c.default;this.iNMCount=0,this.iSMCount=0}return a(MyMission,[{key:"bCheckInMissionMap",value:function(t){var e,i;for(e=0;e<MyMission.MAXMISSIONCOUNT;e++)if(this.smlist[e].bUseing)for(i=0;i<this.smlist[e].iItemCount;i++)if(s.default.sop(this.smlist[e].si[i].iSType+",,,"+this.smlist[e].si[i].iV2+",,,"+n.default.gi().iVisualMapId),0==this.smlist[e].si[i].iMType&&(15==this.smlist[e].si[i].iSType||16==this.smlist[e].si[i].iSType||17==this.smlist[e].si[i].iSType)&&this.smlist[e].si[i].iV1==t&&this.smlist[e].si[i].iV2==n.default.gi().iVisualMapId)return s.default.sop("true"+this.smlist[e].si[i].iV1),!0;return!1}},{key:"bCheckDoing",value:function(t){var e;for(e=0;e<MyMission.MAXMISSIONCOUNT;e++)if(this.nmlist[e].bUseing&&this.nmlist[e].iMPoint==t)return!0;return!1}},{key:"bCheckSpecialDoing",value:function(t){var e;for(e=0;e<MyMission.MAXMISSIONCOUNT;e++)if(this.smlist[e].bUseing&&this.smlist[e].iMPoint==t)return!0;return!1}},{key:"bCheckRequirement",value:function(t){var e,i,a,n=MyMission.de_mission.datas[MyMission.de_mission.iValueIndex[t]];for(e=0;e<n.iItemCount;e++)for(i=0;i<n.items[e].iValueCount;i++)switch(n.items[e].values[i].iVid){case 2:if(a=parseInt(n.items[e].values[i].sValue),f.default.me.rbs.iLev<a)return!1;break;case 3:if(a=parseInt(n.items[e].values[i].sValue),f.default.me.rbs.iSchoolId!=a)return!1;break;case 4:if(a=parseInt(n.items[e].values[i].sValue),f.default.me.iSex!=a)return!1}return!0}},{key:"bCheckCanFinish",value:function(t){return!0}},{key:"CheckMission1",value:function(t){var e,i,a;for(s.default.sop("Check Mission1 npcid="+t),e=0;e<MyMission.MAXMISSIONCOUNT;e++)if(this.smlist[e].bUseing)for(i=0;i<this.smlist[e].iItemCount;i++){if(0==this.smlist[e].si[i].iMType&&3==this.smlist[e].si[i].iSType&&this.smlist[e].si[i].iV2==t&&this.smlist[e].si[i].iProc<100){s.default.sop("完成条件，抓宠物,finish 1,0"),r.default.gi().s_FinishMission(1,this.smlist[e].iMPoint,0,0);break}if(0==this.smlist[e].si[i].iMType&&1==this.smlist[e].si[i].iSType&&this.smlist[e].si[i].iV1==t&&this.smlist[e].si[i].iProc<100){r.default.gi().s_FinishMission(1,this.smlist[e].iMPoint,0,0);break}if(0==this.smlist[e].si[i].iMType&&0==this.smlist[e].si[i].iSType&&(0==this.smlist[e].si[i].iV3||this.smlist[e].si[i].iV3==t)&&this.smlist[e].si[i].iProc<100)for(a=0;a<20;a++)if(h.default.gi().goods[2][a].iGid>0&&h.default.gi().goods[2][a].iTid==this.smlist[e].si[i].iV1){r.default.gi().s_FinishMission(1,this.smlist[e].iMPoint,0,0);break}}}},{key:"getmissionindex",value:function(t){var e,i=t.GetNextInt(),a=t.GetNextString(),s=t.GetNextByte();if(0==s){for(e=0;e<MyMission.MAXMISSIONCOUNT;e++)if(this.nmlist[e].bUseing&&this.nmlist[e].iMid==i)return this.nmlist[e].iType=s,this.nmlist[e].sName=a,this.nmlist[e].iMPoint=t.GetNextInt(),this.nmlist[e].iItemCount=0,this.nmlist[e].bDetailed=!1,r.default.gi().s_GetMissionDetail(i,s),void(59==this.nmlist[e].iMPoint&&(u.default.iEventGuide=61));for(e=0;e<MyMission.MAXMISSIONCOUNT;e++)if(!this.nmlist[e].bUseing)return this.nmlist[e].bUseing=!0,this.nmlist[e].iMid=i,this.nmlist[e].iType=s,this.nmlist[e].sName=a,this.nmlist[e].iMPoint=t.GetNextInt(),this.nmlist[e].iItemCount=0,this.nmlist[e].bDetailed=!1,r.default.gi().s_GetMissionDetail(i,s),59==this.nmlist[e].iMPoint&&(u.default.iEventGuide=61),void(56==this.nmlist[e].iMPoint&&1==n.default.gi().iCurrentMapId&&l.default.psp.InitPath(1870,1404))}else{for(e=0;e<MyMission.MAXMISSIONCOUNT;e++)if(this.smlist[e].bUseing&&this.smlist[e].iMid==i)return this.smlist[e].iType=s,this.smlist[e].sName=a,this.smlist[e].sDetail=t.GetNextString(),this.smlist[e].iItemCount=0,this.smlist[e].bDetailed=!1,void r.default.gi().s_GetMissionDetail(i,s);for(e=0;e<MyMission.MAXMISSIONCOUNT;e++)if(!this.smlist[e].bUseing)return this.smlist[e].bUseing=!0,this.smlist[e].iMid=i,this.smlist[e].iType=s,this.smlist[e].sName=a,this.smlist[e].sDetail=t.GetNextString(),this.smlist[e].iMPoint=t.GetNextInt(),this.smlist[e].iCount=t.GetNextInt(),this.smlist[e].iItemCount=0,this.smlist[e].bDetailed=!1,void r.default.gi().s_GetMissionDetail(i,s)}}},{key:"linktonpc",value:function(){var t,e,i,a,r;for(n.default.gi().vbk.ClearNpcFlag(),t=0;t<MyMission.MAXMISSIONCOUNT;t++){if(this.smlist[t].bUseing&&this.smlist[t].bDetailed)for(e=0;e<this.smlist[t].iItemCount;e++)if(0==this.smlist[t].si[e].iMType)switch(this.smlist[t].si[e].iSType){case 0:this.smlist[t].si[e].iV3>0&&(this.smlist[t].si[e].iProc>=100?n.default.gi().vbk.SetNpcFlag(this.smlist[t].si[e].iV3,0):n.default.gi().vbk.SetNpcFlag(this.smlist[t].si[e].iV3,1));break;case 1:this.smlist[t].si[e].iProc>=100?n.default.gi().vbk.SetNpcFlag(this.smlist[t].si[e].iV1,0):n.default.gi().vbk.SetNpcFlag(this.smlist[t].si[e].iV1,1)}if(this.nmlist[t].bUseing&&this.nmlist[t].bDetailed)for(a=MyMission.de_mission.fdata(this.nmlist[t].iMPoint),e=0;e<this.nmlist[t].iItemCount;e++)if(s.default.sop("---("+e+")this.nmlist[i].ni[j].iItemId="+this.nmlist[t].ni[e].iItemId),null!=(r=a.fitem(this.nmlist[t].ni[e].iItemId)))switch(r.iType){case 10:i=r.intValue(5),n.default.gi().vbk.SetNpcFlag(i,1);break;case 14:case 15:break;case 20:i=r.intValue(15),n.default.gi().vbk.SetNpcFlag(i,1)}}}},{key:"getmissiondetail",value:function(t){var e,i,a=t.GetNextInt();if(0==t.GetNextByte()){for(e=0;e<MyMission.MAXMISSIONCOUNT;e++)if(this.nmlist[e].bUseing&&this.nmlist[e].iMid==a){for(this.nmlist[e].iItemCount=t.GetNextByte(),i=0;i<this.nmlist[e].iItemCount;i++)this.nmlist[e].ni[i].iItemId=t.GetNextInt(),this.nmlist[e].ni[i].iProc=t.GetNextInt();return this.nmlist[e].bDetailed=!0,void this.linktonpc()}}else for(e=0;e<MyMission.MAXMISSIONCOUNT;e++)if(this.smlist[e].bUseing&&this.smlist[e].iMid==a){for(this.smlist[e].iItemCount=t.GetNextByte(),i=0;i<this.smlist[e].iItemCount;i++)this.smlist[e].si[i].iMType=t.GetNextInt(),this.smlist[e].si[i].iSType=t.GetNextInt(),this.smlist[e].si[i].iV1=t.GetNextInt(),this.smlist[e].si[i].iV2=t.GetNextInt(),this.smlist[e].si[i].iV3=t.GetNextInt(),this.smlist[e].si[i].iProc=t.GetNextInt(),this.smlist[e].si[i].sDetail=t.GetNextString();return this.smlist[e].bDetailed=!0,void this.linktonpc()}}},{key:"cleanclientmission",value:function(t){var e,i=t.GetNextInt();for(1==t.GetNextByte()&&m.default.mf.Init(),e=0;e<MyMission.MAXMISSIONCOUNT;e++)this.smlist[e].bUseing&&this.smlist[e].iMid==i&&(this.smlist[e].bUseing=!1),this.nmlist[e].bUseing&&this.nmlist[e].iMid==i&&(this.nmlist[e].bUseing=!1);n.default.gi().vbk.ClearNpcFlag(),this.linktonpc()}},{key:"GetAiDest",value:function(){var t,e;for(t=0;t<MyMission.MAXMISSIONCOUNT;t++){if(this.smlist[t].bUseing&&f.default.me.iFlag[20]>0)for(e=0;e<this.smlist[t].iItemCount;e++)if(0==this.smlist[t].si[e].iMType)switch(this.smlist[t].si[e].iSType){case 1:case 5:case 7:case 8:return o.default.gi().iDestNpcId=this.smlist[t].si[e].iV1,o.default.gi().sDestDetail=this.smlist[t].si[e].sDetail,!0}if(this.nmlist[t].bUseing){var i=MyMission.MyMission.de_mission.fdata(this.nmlist[t].iMPoint);if(-1!=i.intValue(5))return o.default.gi().iDestNpcId=i.intValue(5),o.default.gi().sDestDetail=i.strValue(16),!0;if(i.intValue(9),i.intValue(8),-1!=i.intValue(15))return o.default.gi().iDestNpcId=i.intValue(15),o.default.gi().sDestDetail=i.strValue(24),!0;i.intValue(30)}}return!1}}]),MyMission}();i.default=g,g.de_mission,g.MAXMISSIONCOUNT=32,g.m=new g},{"../../../../../engine/PackageTools":9,"../../../../../engine/data/DataEngine":20,"../../../../../engine/data/E_DATA":21,"../../../../../engine/data/E_ITEM":22,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/MyAI":68,"../../../../../engtst/mgm/gameing/help/BeginersGuide":181,"../../../../../engtst/mgm/gameing/help/ShowPath":192,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../engtst/mgm/gameing/me/mission/missionstruct/NormalMission":237,"../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission":239,"../../../../../map/MapManager":286,"./MissionFinish":230}],234:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),u=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),c=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw")),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods")),p=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialItem")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission")),_interopRequireDefault(t("./MyMission")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var b=function(t){function SelectGoodsForMission(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SelectGoodsForMission);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SelectGoodsForMission.__proto__||Object.getPrototypeOf(SelectGoodsForMission)).call(this));for(i.gs=new Array(20),e=0;e<20;e++)i.gs[e]=new m.default;return i.iW=490,i.iH=480,i.iX=n.default.SCRW-i.iW-20,i.iY=(n.default.SCRH-i.iH)/2,i.lockgoods=null,i.btn_close=new o.default(u.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_turn=new o.default(u.default.xani_button),i.btn_turn.InitButton("普通按钮140_55"),i.btn_turn.sName="上  交",i.btn_turn.Move(i.iX+i.iW-140-30,i.iY+i.iH-30-55,140,55),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SelectGoodsForMission,r.default),a(SelectGoodsForMission,[{key:"InitFrame",value:function(t,e,i){var a;for(this.iTurnCount=0,a=0;a<20;a++)_.default.gi().goods[2][a].iGid>0&&_.default.gi().goods[2][a].iTid==e&&_.default.gi().goods[2][a].iCount>=i&&(this.gs[this.iTurnCount].copyfrom(_.default.gi().goods[2][a]),this.iTurnCount++);this.iMPoint=t,this.lockgoods=this.gs[0],g.default.new_LockPos(this.iX+30,this.iY+30,this.gs,this.lockgoods)}}]),a(SelectGoodsForMission,[{key:"Draw",value:function(){h.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),g.default.new_DrawGoods(this.iX+30,this.iY+30,this.gs,null,null),null!=this.lockgoods&&g.default.new_DrawRect(this.iX+30,this.iY+30,this.gs,this.lockgoods,0),this.btn_turn.Draw(),g.default.bShowDetail()&&g.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){if(this.btn_turn.ProcTouch(t,e,i))return this.btn_turn.bCheck()&&(null==this.lockgoods?d.default.easymsg.AddMessage("请先选择所交物品"):(10==this.iMPoint&&163==this.lockgoods.iTid&&c.default.me.iFlag[1],l.default.gi().s_FinishMission(1,this.iMPoint,this.lockgoods.iGid,0),f.default.gi().PopStat(1))),!0;var a=g.default.new_LockGoods(e,i,this.iX+30,this.iY+30,this.gs,t);return g.default.NoMove(),3==t&&null!=a?this.lockgoods=a:null==a&&(this.lockgoods=null),this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):(3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||f.default.gi().PopStat(1),!1)}}]),SelectGoodsForMission}();i.default=b,b.psm,b.Open=function(t){var e,i,a;for(e=0;e<p.default.MAXMISSIONCOUNT;e++)if(p.default.m.smlist[e].bUseing&&(b.psm=p.default.m.smlist[e],b.psm.iMPoint==t))for(i=0;i<b.psm.iItemCount;i++){if(0==(a=b.psm.si[i]).iMType&&0==a.iSType)if(_.default.bHaveGoods(a.iV1,a.iV2))return f.default.gi().PushStat(f.default.GS_SELECTGOODSFORMISSION).InitFrame(t,a.iV1,a.iV2),!0;if(0==a.iMType&&16==a.iSType)if(_.default.bHaveGoods(a.iV3,1))return f.default.gi().PushStat(f.default.GS_SELECTGOODSFORMISSION).InitFrame(t,a.iV3,1),!0}return!1}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialItem":238,"../../../../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission":239,"./MyMission":233}],235:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),r=_interopRequireDefault(t("./MissionFinish"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var o=function(){function UpgradeEffect(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,UpgradeEffect),this.iProc=new Int32Array(4);for(var t=0;t<4;t++)this.iProc[t]=-1}return a(UpgradeEffect,[{key:"Init",value:function(){for(var t=0;t<4;t++)this.iProc[t]=6-2*t}},{key:"Draw",value:function(){if(!(r.default.mf.iProc[0]>=0||this.iProc[0]<0)){var t,e=0;for(t=0;t<4;t++){switch(this.iProc[t]){case 6:s.default.xani_skills[0].DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"升级大字",t,20,2.2,2.2,0,0,0);break;case 7:s.default.xani_skills[0].DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"升级大字",t,40,1.9,1.9,0,0,0);break;case 8:s.default.xani_skills[0].DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"升级大字",t,60,1.6,1.6,0,0,0);break;case 9:s.default.xani_skills[0].DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"升级大字",t,80,1.3,1.3,0,0,0);break;case 10:s.default.xani_skills[0].DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"升级大字",t,101,1,1,0,0,0);break;case 11:s.default.xani_skills[0].DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"升级大字",t,101,.7,.7,0,0,0);break;case 12:s.default.xani_skills[0].DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"升级大字",t,101,1,1,0,0,0);break;case 16:default:s.default.xani_skills[0].DrawAnimaEx(n.default.SCRW/2-90-45+90*t,135,"升级大字",t,101,1,1,0,0,0)}this.iProc[t]<20?this.iProc[t]++:e++}4==e&&(this.iProc[0]=-1)}}}]),UpgradeEffect}();i.default=o,o.ue=new o},{"../../../../../config/GmConfig":5,"../../../../../engtst/mgm/GmPlay":65,"./MissionFinish":230}],236:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function NormalItem(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NormalItem)}},{}],237:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=t("./NormalItem"),s=(a=n)&&a.__esModule?a:{default:a};var r=function NormalMission(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NormalMission),this.bUseing=!1,this.sName="",this.iItemCount=0,this.ni=new Array(NormalMission.MAXNORMALITEM),t=0;t<NormalMission.MAXNORMALITEM;t++)this.ni[t]=new s.default;this.bDetailed=!1};i.default=r,r.MAXNORMALITEM=10},{"./NormalItem":236}],238:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function SpecialItem(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SpecialItem),this.sDetail=""}},{}],239:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=t("./SpecialItem"),s=(a=n)&&a.__esModule?a:{default:a};var r=function SpecialMission(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SpecialMission),this.bUseing=!1,this.iItemCount=0,this.si=new Array(SpecialMission.MAXSPECIALITEM),t=0;t<SpecialMission.MAXSPECIALITEM;t++)this.si[t]=new s.default;this.sName="",this.bDetailed=!1};i.default=r,r.MAXSPECIALITEM=10},{"./SpecialItem":238}],240:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods"));_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/Pets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function FeedMounts(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FeedMounts),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FeedMounts.__proto__||Object.getPrototypeOf(FeedMounts)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FeedMounts,r.default),a(FeedMounts,[{key:"FeedMounts",value:function(t){this.pani=t,this.pm3f=t.pm3f,this.iW=490,this.iH=512,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.btn_feed=new o.default(l.default.xani_nui2),this.btn_feed.InitButton("按钮1_110"),this.btn_feed.sName="喂食",this.btn_feed.Move(this.iX+this.iW-110-30,this.iY+this.iH-52-30,110,52),this.lockgoods=null}},{key:"Draw",value:function(){d.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),u.default.gi().DrawTextEx(this.iX+30,this.iY+30,"选择丹药或烹饪",4278206039,30,101,1,1,0,0,0),c.default.new_DrawGoods(this.iX+30,this.iY+30+30+15,m.default.gi().goods[2],null,null),null!=this.lockgoods&&(c.default.new_DrawRect(this.iX+30,this.iY+30+30+15,m.default.gi().goods[2],this.lockgoods,0),this.btn_feed.Draw()),c.default.bShowDetail()&&c.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){return null!=this.lockgoods&&this.btn_feed.ProcTouch(t,e,i)?(this.btn_feed.bCheck()&&(f.default.gi().s_FeedMounts(pms.iMid,this.lockgoods.iGid,this.lockgoods.iTid),h.default.gi().PopStat(1)),!0):(this.lockgoods=c.default.new_LockGoods(e,i,this.iX+30,this.iY+30+30+15,m.default.gi().goods[2],t),c.default.NoMove(),3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||h.default.gi().PopStat(1),!1)}}]),FeedMounts}();i.default=g,g.pms,g.Open=function(t){h.default.gi().PushStat(h.default.GS_FEEDMOUNTS),g.pms=t}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../engtst/mgm/gameing/me/pet/Pets":247}],241:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("../../../../../engine/graphics/AnimaAction");(a=s)&&a.__esModule;var r=function(){function Mounts(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Mounts),this.iMid=-1,this.att=new Int32Array(5),this.zz=new Int32Array(5),this.maxzz=new Int32Array(5)}return n(Mounts,[{key:"CalcFightAtt",value:function(){var t=5*this.iLev,e=this.att[0]+this.att[1]+this.att[2]+this.att[3]+this.att[4];this.nut=t-e,this.tz=this.att[0]+10+this.iLev,this.fl=this.att[1]+10+this.iLev,this.ll=this.att[2]+10+this.iLev,this.nl=this.att[3]+10+this.iLev,this.mj=this.att[4]+10+this.iLev,this.iMaxHp=this.iLev*this.zz[0]+this.tz*this.cz*6,this.iMaxMp=this.iLev*this.zz[1]+this.fl*this.cz*6,this.iSpirit=this.iLev*(this.zz[1]+1640)*(this.cz+1e3)/7500+300*this.tz+700*this.fl+400*this.ll+200*this.nl,this.iSpeed=this.zz[4]*this.mj,this.iAttack=this.iLev*this.zz[2]*(1400+this.cz)/750+this.cz*this.ll,this.iDefence=this.iLev*this.zz[3]*(1900/3+this.cz)/750+this.cz*this.nl*4/3,this.iMaxHp=parseInt((this.iMaxHp+500)/1e3),this.iMaxMp=parseInt((this.iMaxMp+500)/1e3),this.iSpirit=parseInt((this.iSpirit+500)/1e3),this.iAttack=parseInt((this.iAttack+500)/1e3),this.iDefence=parseInt((this.iDefence+500)/1e3),this.iSpeed=parseInt((this.iSpeed+500)/1e3),1==this.iJjLev?this.iMaxLingQi=50:2==this.iJjLev?this.iMaxLingQi=100:3==this.iJjLev&&(this.iMaxLingQi=200)}}]),Mounts}();i.default=r},{"../../../../../engine/graphics/AnimaAction":25}],242:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../map/DrawBuffer")),_interopRequireDefault(t("../../../../../config/GameData"))),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/SortAnima")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=_interopRequireDefault(t("../../../../../engine/control/XButton")),l=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),f=_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),h=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/FireworksEffect"))),d=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),c=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),m=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),g=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),b=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage")),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/SystemOperate")),y=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/AddPoint")),w=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),S=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods")),x=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/MyPets")),P=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/shop/MySell")),v=_interopRequireDefault(t("./MyMounts"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var R=function(t){function MountsFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MountsFrame);var e,i,a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MountsFrame.__proto__||Object.getPrototypeOf(MountsFrame)).call(this));for(a.iW=830,a.iH=620,a.iX=(s.default.SCRW-a.iW)/2,a.iY=(s.default.SCRH-a.iH)/2,a.btn_close=new u.default(d.default.xani_button),a.btn_close.InitButton("关闭按钮"),a.btn_close.Move(a.iX+a.iW-35,a.iY-25,60,60),a.btn_mountslist=new Array(8),e=0;e<8;e++)a.btn_mountslist[e]=new u.default(d.default.xani_button),a.btn_mountslist[e].InitButton("2号按钮150_60"),a.btn_mountslist[e].Move(a.iX+50,a.iY+50+65*e,150,60);for(a.iMountsPoint=0,a.btn_joinfight=new l.default(d.default.xani_button),a.btn_joinfight.InitButton("1号按钮90_60"),a.btn_joinfight.Move(a.iX+270-70-30,a.iY+65+200,70,40),a.btn_joinfight.sName="骑乘",a.iPage=0,a.btn_page=new Array(3),e=0;e<3;e++)a.btn_page[e]=new l.default(d.default.xani_button),a.btn_page[e].InitButton("2号按钮150_60");for(a.btn_page[0].sName="属性",a.btn_page[1].sName="资质",a.btn_page[2].sName="技能",a.btn_drop=new l.default(d.default.xani_button),a.btn_drop.InitButton("1号按钮90_60"),a.btn_drop.Move(a.iX+390+10,a.iY+65+80+200,70,40),a.btn_drop.sName="放生",a.btn_addpoint=new l.default(d.default.xani_button),a.btn_addpoint.InitButton("1号按钮90_60"),a.btn_addpoint.Move(a.iX+390+145-35,a.iY+65+80+200,70,40),a.btn_addpoint.sName="加点",a.btn_train=new l.default(d.default.xani_button),a.btn_train.InitButton("1号按钮90_60"),a.btn_train.Move(a.iX+390+290-80,a.iY+65+80+200,70,40),a.btn_train.sName="驯养",a.btn_jj=new l.default(d.default.xani_button),a.btn_jj.InitButton("1号按钮90_60"),a.btn_jj.Move(a.iX+390+10,a.iY+65+80+200,70,40),a.btn_jj.sName="进阶",a.btn_feed=new l.default(d.default.xani_button),a.btn_feed.InitButton("1号按钮90_60"),a.btn_feed.Move(a.iX+390+290-80,a.iY+65+80+200,70,40),a.btn_feed.sName="喂食",a.aa_mts=new Array(6),a.aa_bds=new Array(6),a.aa_cls=new Array(6),e=0;e<6;e++)for(a.aa_mts[e]=new f.default,a.aa_bds[e]=new f.default,a.aa_cls[e]=new Array(5),i=0;i<5;i++)a.aa_cls[e][i]=new f.default;return a.aa_weapon=new f.default,a.bChanged=!0,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MountsFrame,o.default),a(MountsFrame,[{key:"ChangeColor",value:function(t,e,i){var a;if(D.default.bShowColor)for(a=0;a<r.default._CHANGECOLOR[t].length;a++)w.default.me.iColor[a]<=0||w.default.me.iColor[a]>=6||d.default.xani_color[t][w.default.me.iColor[a]-1].InitAnimaWithName(r.default._CHANGECOLOR[t][a]+"_"+e,this.aa_cls[i][a])}},{key:"DrawColor",value:function(t,e,i,a,n,s){var o;if(D.default.bShowColor)for(o=0;o<r.default._CHANGECOLOR[t].length;o++)w.default.me.iColor[o]<=0||w.default.me.iColor[o]>=6||(this.aa_cls[s][o].iFrame=e,this.aa_cls[s][o].Draw(a,n))}},{key:"DrawMounts",value:function(t,e,i,a,n){var s,o=2*w.default.me.iRace+w.default.me.iSex,u=w.default.face_sti("右下"),l=w.default.stat_sti("站立"),f=i.iTid-1,h=i.iJjLev-1,c=0,m=0;for(2==i.iTid&&(m=12),s=0;s<r.default._ANIMASORT_MOUNT[f][h][l][u].length;s++)"左翅膀"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]?(a&&d.default.xani_nmounts[f][h].InitAnimaWithName(i.iJjLev+"_站立_右下_左翅膀",this.aa_mts[2]),this.aa_mts[2].Draw(t,e+m),this.aa_mts[2].NextFrame(),c++):"右翅膀"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]?(a&&d.default.xani_nmounts[f][h].InitAnimaWithName(i.iJjLev+"_站立_右下_右翅膀",this.aa_mts[3]),this.aa_mts[3].Draw(t,e+m),this.aa_mts[3].NextFrame(),c++):"前"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]?(a&&d.default.xani_nmounts[f][h].InitAnimaWithName(i.iJjLev+"_站立_右下_前",this.aa_mts[0]),this.aa_mts[0].Draw(t,e+m),this.aa_mts[0].NextFrame(),c++):"后"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]?(a&&d.default.xani_nmounts[f][h].InitAnimaWithName(i.iJjLev+"_站立_右下_后",this.aa_mts[1]),this.aa_mts[1].Draw(t,e+m),this.aa_mts[1].NextFrame(),c++):"身体"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]?(a&&d.default.xani_nmounts[f][h].InitAnimaWithName(i.iJjLev+"_站立_右下_身体",this.aa_mts[4]),this.aa_mts[4].Draw(t,e+m),this.aa_mts[4].NextFrame(),c++):"飘带"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]?(a&&d.default.xani_nmounts[f][h].InitAnimaWithName(i.iJjLev+"_站立_右下_飘带",this.aa_mts[5]),this.aa_mts[5].Draw(t,e+m),this.aa_mts[5].NextFrame(),c++):"人前"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]&&n?(a&&(d.default.xani_newrole[o].InitAnimaWithName("骑站立_右下_前",this.aa_bds[0]),this.ChangeColor(o,"骑站立_右下_前",0)),this.aa_bds[0].Draw(t,e+m),this.DrawColor(o,this.aa_bds[0].iFrame,e+c,t,e+m,0),this.aa_bds[0].NextFrame(),c++):"人后"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]&&n?(a&&(d.default.xani_newrole[o].InitAnimaWithName("骑站立_右下_后",this.aa_bds[1]),this.ChangeColor(o,"骑站立_右下_后",1)),this.aa_bds[1].Draw(t,e+m),this.DrawColor(o,this.aa_bds[1].iFrame,e+c,t,e+m,1),this.aa_bds[1].NextFrame(),c++):"人左"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]&&n?(a&&(d.default.xani_newrole[o].InitAnimaWithName("骑站立_右下_左",this.aa_bds[2]),this.ChangeColor(o,"骑站立_右下_左",2)),this.aa_bds[2].Draw(t,e+m),this.DrawColor(o,this.aa_bds[2].iFrame,e+c,t,e+m,2),this.aa_bds[2].NextFrame(),c++):"人右"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]&&n?(a&&(d.default.xani_newrole[o].InitAnimaWithName("骑站立_右下_右",this.aa_bds[3]),this.ChangeColor(o,"骑站立_右下_右",3)),this.aa_bds[3].Draw(t,e+m),this.DrawColor(o,this.aa_bds[3].iFrame,e+c,t,e+m,3),this.aa_bds[3].NextFrame(),c++):"人"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]&&n?(a&&(d.default.xani_newrole[o].InitAnimaWithName("骑站立_右下",this.aa_bds[4]),this.ChangeColor(o,"骑站立_右下",4)),this.aa_bds[4].Draw(t,e+m),this.DrawColor(o,this.aa_bds[4].iFrame,e+c,t,e+m,4),this.aa_bds[4].NextFrame(),c++):"武器"==r.default._ANIMASORT_MOUNT[f][h][l][u][s]&&n&&(a&&(this.iWeapTid=S.default.gi().GetWeaponTid(),this.iWeapTid>=0&&d.default.xani_weap[o][r.default.WeapFlag(this.iWeapTid)].InitAnimaWithName("骑站立_右下",this.aa_weapon)),this.iWeapTid>=0&&(this.aa_weapon.Draw(t,e+m),this.aa_weapon.NextFrame()),c++)}},{key:"Draw",value:function(){if(v.default.mm.iMountsCount<=0)m.default.gi().PopStat(1);else{var t;_.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"坐","骑"),this.btn_close.Draw(),_.default.new_framein(this.iX+25,this.iY+25,190,this.iH-50),this.iMountsPoint>=v.default.mm.iMountsCount&&(this.iMountsPoint=0);var e=v.default.mm.mounts[this.iMountsPoint];for(t=0;t<v.default.mm.iMountsCount;t++)this.btn_mountslist[t].sName=v.default.mm.mounts[t].sName,this.iMountsPoint==t&&(this.btn_mountslist[t].bMouseIn=!0,this.btn_mountslist[t].bMouseDown=!0),this.btn_mountslist[t].Draw();var i=this.iX+25+190+20,a=this.iY+25;for(_.default.new_framein(i,a,190,this.iH-50),h.default.DrawAura(0,i+95,a+240,null,0),this.btn_joinfight.Move(i+190-20-90,this.iY+this.iH-50-60,90,60),w.default.me.iFightMid==e.iMid?(this.btn_joinfight.sName="下骑",this.DrawMounts(i+95,a+240,e,this.bChanged,!0)):(this.btn_joinfight.sName="骑乘",this.DrawMounts(i+95,a+240,e,this.bChanged,!1)),this.bChanged=!1,this.btn_joinfight.Draw(),_.default.ui3_Text1(i+10,a+300,70,100,"名称",e.sName),_.default.ui3_Text1(i+10,a+300+40,70,100,"等级",e.iLev+"/"+e.iMaxLev),_.default.ui3_Text1(i+10,a+300+80,70,100,"气血",""+e.iMaxHp),_.default.ui3_Text1(i+10,a+300+120,70,100,"魔法",""+e.iMaxMp),i=this.iX+25+190+20+190+20,_.default.new_framein(i,a,360,this.iH-50),this.btn_page[this.iPage].bMouseDown=!0,this.btn_page[this.iPage].bMouseIn=!0,0==this.iPage?(MountsFrame.Draw_Base2(i+20,a+20+60+20+40,e),this.btn_drop.Move(i+20,this.iY+this.iH-50-60,90,60),this.btn_addpoint.Move(i+180-45,this.iY+this.iH-50-60,90,60),this.btn_train.Move(i+360-20-90,this.iY+this.iH-50-60,90,60),this.btn_drop.Draw(),this.btn_addpoint.Draw(),this.btn_train.Draw()):1==this.iPage&&(MountsFrame.Draw_Base3(i+20,a+20+60+20,e),this.btn_jj.Move(i+20,this.iY+this.iH-50-60,90,60),this.btn_feed.Move(i+360-20-90,this.iY+this.iH-50-60,90,60),this.btn_jj.Draw(),this.btn_feed.Draw()),this.btn_page[0].Move(i+20,a+20,150,60),this.btn_page[1].Move(i+360-20-150,a+20,150,60),t=0;t<2;t++)this.btn_page[t].Draw();if(g.default.end(g.default.CONFIRM_DROPMOUNTS)&&g.default.bConfirm&&(w.default.me.bHaveLock&&w.default.me.bLocked?p.default.easymsg.AddMessage("未解锁不能放生"):(w.default.me.iFightMid==e.iMid&&(w.default.me.iFightMid=0,w.default.me.bsc=!0),c.default.gi().s_DropMounts(e.iMid),v.default.mm.RemoveMounts(e.iMid),this.iMountsPoint=0)),g.default.end(g.default.CONFIRM_JJMOUNTS)&&g.default.bConfirm&&c.default.gi().s_JJMounts(e.iMid),y.default.end(y.default.ADDPOINT_MOUNTS)&&y.default.bConfirm){for(t=0;t<5;t++)e.att[t]+=y.default.iModifys[t];e.CalcFightAtt(),c.default.gi().s_AddMountsPoint(e.iMid,y.default.iModifys[0],y.default.iModifys[1],y.default.iModifys[2],y.default.iModifys[3],y.default.iModifys[4])}}}},{key:"ProcTouch",value:function(t,e,i){var a,n=v.default.mm.mounts[this.iMountsPoint];if(0==this.iPage){if(this.btn_drop.ProcTouch(t,e,i))return this.btn_drop.bCheck()&&g.default.start(g.default.CONFIRM_DROPMOUNTS,"是否确认放生？"),!0;if(this.btn_train.ProcTouch(t,e,i)){if(this.btn_train.bCheck()){var s=4*n.iLev*10*2+100;n.iLev>=w.default.me.rbs.iLev?p.default.easymsg.AddMessage("坐骑不能超过人物等级"):n.iLev>=n.iMaxLev?p.default.easymsg.AddMessage("坐骑等级已达上限"):w.default.me.rbs.iPower<10?p.default.easymsg.AddMessage("体力不足10点"):w.default.me.rbs.iExp<s?p.default.easymsg.AddMessage("人物经验不足"):(w.default.me.rbs.iExp-=s,n.iExp+=s,w.default.me.rbs.iPower-=10,c.default.gi().s_TrainMounts(n.iMid),m.default.gi().PushStat(m.default.GS_LOADING1))}return!0}this.btn_addpoint.ProcTouch(t,e,i)&&this.btn_addpoint.bCheck()&&(n.nut<=0?p.default.easymsg.AddMessage("当前没有剩余点数可以加"):y.default.start(y.default.ADDPOINT_MOUNTS,n.tz,n.fl,n.ll,n.nl,n.mj,n.nut))}else if(1==this.iPage){if(this.btn_feed.ProcTouch(t,e,i))return this.btn_feed.bCheck()&&FeedMounts.Open(n),!0;if(this.btn_jj.ProcTouch(t,e,i))return this.btn_jj.bCheck()&&(n.iJjLev>=3?p.default.easymsg.AddMessage("坐骑已是最高阶"):n.iLev<n.iMaxLev||n.iLingQi<n.iMaxLingQi?b.default.fm.Open("坐骑灵气和等级达到上限后才能进阶"):g.default.start(g.default.CONFIRM_JJMOUNTS,"进阶后#e#c00ff00资质上限=当前资质*110%#e成长上限=当前成长*110%#e#cffffff是否确认进阶？")),!0}for(a=0;a<v.default.mm.iMountsCount;a++)this.btn_mountslist[a].ProcTouch(t,e,i)&&this.btn_mountslist[a].bCheck()&&(this.iMountsPoint=a,this.bChanged=!0);if(this.btn_joinfight.ProcTouch(t,e,i)&&this.btn_joinfight.bCheck()&&(w.default.me.iFightMid==n.iMid?(w.default.me.iFightMid=0,c.default.gi().s_ChangeFightMounts(0),this.bChanged=!0,w.default.me.CalcFightAtt()):P.default.gi().bSelling?p.default.easymsg.AddMessage("摆摊中不能骑乘"):(w.default.me.iFightMid=n.iMid,c.default.gi().s_ChangeFightMounts(n.iMid),this.bChanged=!0,w.default.me.CalcFightAtt()),w.default.me.bsc=!0),this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&m.default.gi().PopStat(1),!0;for(a=0;a<2;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&(this.iPage=a);return!1}}]),MountsFrame}();i.default=R,R.Draw_Base2=function(t,e,i){_.default.ui3_Text1(t,e,60,90,"体质",""+i.tz),_.default.ui3_Text1(t,e+40,60,90,"法力",""+i.fl),_.default.ui3_Text1(t,e+80,60,90,"力量",""+i.ll),_.default.ui3_Text1(t,e+120,60,90,"耐力",""+i.nl),_.default.ui3_Text1(t,e+160,60,90,"敏捷",""+i.mj),_.default.ui3_Text1(t+170,e,60,90,"灵力",""+i.iSpirit),_.default.ui3_Text1(t+170,e+40,60,90,"伤害",""+i.iAttack),_.default.ui3_Text1(t+170,e+80,60,90,"防御",""+i.iDefence),_.default.ui3_Text1(t+170,e+120,60,90,"速度",""+i.iSpeed),_.default.ui3_Text1(t+170,e+160,60,90,"剩余",""+i.nut),_.default.ui3_Text1(t,e+240,120,200,"当前经验",""+i.iExp),_.default.ui3_Text1(t,e+280,120,200,"升级经验",""+parseInt(n.default.iUpgradeExp[i.iLev]/3))},R.Draw_Base3=function(t,e,i){_.default.ui3_Text1(t,e+0,120,200,"体质资质",i.zz[0]+"/"+i.maxzz[0]),_.default.ui3_Text1(t,e+40,120,200,"法力资质",i.zz[1]+"/"+i.maxzz[1]),_.default.ui3_Text1(t,e+80,120,200,"力量资质",i.zz[2]+"/"+i.maxzz[2]),_.default.ui3_Text1(t,e+120,120,200,"耐力资质",i.zz[3]+"/"+i.maxzz[3]),_.default.ui3_Text1(t,e+160,120,200,"敏捷资质",i.zz[4]+"/"+i.maxzz[4]),_.default.ui3_Text1(t,e+200,120,200,"成长",x.default.swapcz(i.cz)+"/"+x.default.swapcz(i.maxcz)),1==i.iJjLev?_.default.ui3_Text1(t,e+240,120,200,"阶段","初级"):2==i.iJjLev?_.default.ui3_Text1(t,e+240,120,200,"阶段","中级"):3==i.iJjLev&&_.default.ui3_Text1(t,e+240,120,200,"阶段","高级"),_.default.ui3_Text1(t,e+280,120,200,"灵气",i.iLingQi+"/"+i.iMaxLingQi),_.default.ui3_Text1(t,e+320,120,200,"饱食度",i.iBSD/10+"/100")}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/SortAnima":6,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/FireworksEffect":64,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../../../engtst/mgm/gameing/me/AddPoint":209,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../engtst/mgm/gameing/me/shop/MySell":259,"../../../../../map/DrawBuffer":283,"./MyMounts":243}],243:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),s=(_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"))),r=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/MyPets")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("./Mounts")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var o=function(){function MyMounts(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyMounts),this.iMountsCount=0,this.mounts=new Array(8),t=0;t<8;t++)this.mounts[t]=new r.default}return a(MyMounts,[{key:"UpdateOneMounts",value:function(t){var e,i,a=t.GetNextByte(),r=t.GetNextInt();if(0==a)this.RemoveMounts(r);else{for(e=0;e<8&&this.mounts[e].iMid!=r;e++);if(e>=8)for(e=0;e<8&&!(this.mounts[e].iMid<=0);e++);if(e>=8)return;for(this.mounts[e].iMid=r,this.mounts[e].iTid=t.GetNextShort(),this.mounts[e].sName=t.GetNextString(),this.mounts[e].iJjLev=t.GetNextByte(),this.mounts[e].iLingQi=t.GetNextShort(),i=0;i<5;i++)this.mounts[e].att[i]=t.GetNextShort();for(i=0;i<5;i++)this.mounts[e].zz[i]=t.GetNextShort();for(i=0;i<5;i++)this.mounts[e].maxzz[i]=t.GetNextShort();this.mounts[e].cz=t.GetNextShort(),this.mounts[e].maxcz=t.GetNextShort(),this.mounts[e].iLev=t.GetNextShort(),this.mounts[e].iMaxLev=t.GetNextShort(),this.mounts[e].iExp=t.GetNextInt(),this.mounts[e].iBSD=t.GetNextShort(),this.mounts[e].iFlag=t.GetNextInt(),this.mounts[e].sAnimaName=n.default.de_mounts.strValue(this.mounts[e].iTid,0,2),this.mounts[e].CalcFightAtt(),this.mounts[e].iMid==s.default.me.iFightMid&&s.default.me.CalcFightAtt()}for(this.iMountsCount=0,e=0;e<8;e++)this.mounts[e].iMid>0&&this.iMountsCount++}},{key:"RemoveMounts",value:function(t){var e;for(e=0;e<8&&this.mounts[e].iMid!=t;e++);if(!(e>=8)){for(var i=this.mounts[e];e<7;e++)this.mounts[e]=this.mounts[e+1];for(this.mounts[7]=i,this.mounts[7].iMid=-1,this.iMountsCount=0,e=0;e<8;e++)this.mounts[e].iMid>0&&this.iMountsCount++}}},{key:"FindMounts",value:function(t){var e;for(e=0;e<8;e++)if(this.mounts[e].iMid>0&&t==this.mounts[e].iMid)return this.mounts[e];return null}}]),MyMounts}();i.default=o,o.mm=new o},{"../../../../../engine/PackageTools":9,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../engtst/mgm/gameing/me/pet/Pets":247,"./Mounts":241}],244:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function LearnPetSkill(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LearnPetSkill);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LearnPetSkill.__proto__||Object.getPrototypeOf(LearnPetSkill)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=490,e.iH=512,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_learn=new o.default(l.default.xani_nui2),e.btn_learn.InitButton("按钮1_110"),e.btn_learn.sName="学习",e.btn_learn.Move(e.iX+e.iW-110-30,e.iY+e.iH-52-30,110,52),e.lockgoods=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LearnPetSkill,r.default),a(LearnPetSkill,[{key:"Draw",value:function(){d.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),u.default.gi().DrawTextEx(this.iX+30,this.iY+30,"选择宠物技能书",4278206039,30,101,1,1,0,0,0),c.default.new_DrawGoods(this.iX+30,this.iY+30+30+15,m.default.gi().goods[2],null,null),null!=this.lockgoods&&(c.default.new_DrawRect(this.iX+30,this.iY+30+30+15,m.default.gi().goods[2],this.lockgoods,0),154!=this.lockgoods.iTid&&155!=this.lockgoods.iTid&&156!=this.lockgoods.iTid||(u.default.gi().DrawTextEx(this.iX+20,this.iY+this.iH-30-26,"学习:"+l.default.de_skill.strValue(this.lockgoods.iAtts[0],0,6),4278190080,30,101,1,1,0,0,-2),this.btn_learn.Draw())),c.default.bShowDetail()&&c.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){return null==this.lockgoods||154!=this.lockgoods.iTid&&155!=this.lockgoods.iTid&&156!=this.lockgoods.iTid||!this.btn_learn.ProcTouch(t,e,i)?(this.lockgoods=c.default.new_LockGoods(e,i,this.iX+30,this.iY+30+30+15,m.default.gi().goods[2],t),c.default.NoMove(),3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||h.default.gi().PopStat(1),!1):(this.btn_learn.bCheck()&&(f.default.gi().s_LearnPetSkill(this.lpet.iPid,this.lockgoods.iGid),h.default.gi().PopStat(1)),!0)}}]),LearnPetSkill}();i.default=g,g.Open=function(t){h.default.gi().PushStat(h.default.GS_LEARNPETSKILL),h.default.gi().LastStat(0).lpet=t}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],245:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../config/GameData")),_interopRequireDefault(t("../../../../../config/GmConfig")),_interopRequireDefault(t("../../../../../config/XDefine")),_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),s=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),r=(_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),_interopRequireDefault(t("../../../../../engtst/mgm/XStat"))),o=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/AddPoint")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"))),u=_interopRequireDefault(t("./Pets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(){function MyPets(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyPets),this.pm3f=n.default.xm3f,this.pets=new Array(8),t=0;t<8;t++)this.pets[t]=new u.default;this.RETPET_HPMPLIFE=1,this.RETPET_ATT=2,this.RETPET_SKILL=4,this.RETPET_ZZCZ=8,this.RETPET_EXPLEV=16,this.RETPET_OTHER=128}return a(MyPets,[{key:"FindPet",value:function(t){var e;if(t<=0)return null;for(e=0;e<8;e++)if(this.pets[e].iPid>0&&t==this.pets[e].iPid)return this.pets[e];return null}},{key:"GetUseingPet",value:function(){var t;for(t=0;t<8;t++)if(-1!=this.pets[t].iPid&&o.default.me.iFightPid==this.pets[t].iPid)return this.pets[t];return null}},{key:"RemovePet",value:function(t){var e;for(e=0;e<8&&this.pets[e].iPid!=t;e++);if(!(e>=8)){for(var i=this.pets[e];e<7;e++)this.pets[e]=this.pets[e+1];for(this.pets[7]=i,this.pets[7].iPid=-1,this.iPetCount=0,e=0;e<8;e++)this.pets[e].iPid>0&&this.iPetCount++}}},{key:"ProcTouch",value:function(t,e,i){return!1}},{key:"GetPetBaseAtt",value:function(t){var e,i,a=t.GetNextInt();for(e=0;e<8&&this.pets[e].iPid!=a;e++);if(!(e>=8)){var n=this.pets[e];if(0!=((i=t.GetNextByte())&this.RETPET_HPMPLIFE)&&(n.iHp=t.GetNextShort(),n.iMaxHp=t.GetNextShort(),n.iMp=t.GetNextShort(),n.iMaxMp=t.GetNextShort(),n.iLife=t.GetNextShort()),0!=(i&this.RETPET_ATT))for(e=0;e<5;e++)n.iBaseAtt[e]=t.GetNextShort();if(0!=(i&this.RETPET_SKILL))for(e=0;e<8;e++)n.jn[e]=t.GetNextShort();if(0!=(i&this.RETPET_ZZCZ)){for(e=0;e<5;e++)n.zz[e]=t.GetNextShort();n.cz=t.GetNextShort()}0!=(i&this.RETPET_EXPLEV)&&(n.iExp=t.GetNextInt(),n.iLev=t.GetNextShort()),MyPets.CalcFightAtt(n)}}},{key:"UpdateOnePet",value:function(t){var e,i,a,n,o=t.GetNextByte();if(0==o)n=t.GetNextInt(),this.RemovePet(n);else if(1==o){for(n=t.GetNextInt(),e=0;e<8&&!(this.pets[e].iPid>0&&this.pets[e].iPid==n);e++);if(e>=8)for(e=0;e<8&&!(this.pets[e].iPid<=0);e++);for(i=e,this.pets[i].iPid=n,this.pets[i].iTid=t.GetNextShort(),this.pets[i].sName=t.GetNextString(),this.pets[i].iLev=t.GetNextShort(),this.pets[i].iExp=t.GetNextInt(),this.pets[i].iHp=t.GetNextShort(),this.pets[i].iMp=t.GetNextShort(),this.pets[i].iLife=t.GetNextShort(),a=0;a<5;a++)this.pets[i].iBaseAtt[a]=t.GetNextShort();for(a=0;a<5;a++)this.pets[i].zz[a]=t.GetNextShort();for(this.pets[i].cz=t.GetNextShort(),a=0;a<12;a++)this.pets[i].jn[a]=t.GetNextShort();if(this.pets[i].iAddAtt=t.GetNextByte(),this.pets[i].iBaobao=t.GetNextByte(),this.pets[i].iFlag=t.GetNextShort(),0==(2&this.pets[i].iBaobao)?s.default.xani_pets[this.pets[i].iTid].InitAnimaWithName("站立_右下",this.pets[i].aa_body):s.default.xani_pets[this.pets[i].iTid].InitAnimaWithName("变异_站立_右下",this.pets[i].aa_body),MyPets.CalcFightAtt(this.pets[i]),r.default.gi().iXStat==r.default.GS_PETSFRAME)r.default.gi().LastStat(0).iPetPoint=i}for(this.iPetCount=0,e=0;e<8;e++)this.pets[e].iPid>0&&this.iPetCount++}},{key:"GetPets",value:function(t){var e,i,a,n;for(e=0;e<8;e++)this.pets[e].iPid=-1;if(2==t.GetNextByte()){for(i=0;-1!=(n=t.GetNextInt());){for(this.pets[i].iPid=n,this.pets[i].iTid=t.GetNextShort(),this.pets[i].sName=t.GetNextString(),this.pets[i].iLev=t.GetNextShort(),this.pets[i].iExp=t.GetNextInt(),this.pets[i].iHp=t.GetNextShort(),this.pets[i].iMp=t.GetNextShort(),this.pets[i].iLife=t.GetNextShort(),a=0;a<5;a++)this.pets[i].iBaseAtt[a]=t.GetNextShort();for(a=0;a<5;a++)this.pets[i].zz[a]=t.GetNextShort();for(this.pets[i].cz=t.GetNextShort(),a=0;a<12;a++)this.pets[i].jn[a]=t.GetNextShort();this.pets[i].iAddAtt=t.GetNextByte(),this.pets[i].iBaobao=t.GetNextByte(),this.pets[i].iFlag=t.GetNextShort(),0==(2&this.pets[i].iBaobao)?s.default.xani_pets[this.pets[i].iTid].InitAnimaWithName("站立_右下",this.pets[i].aa_body):s.default.xani_pets[this.pets[i].iTid].InitAnimaWithName("变异_站立_右下",this.pets[i].aa_body),MyPets.CalcFightAtt(this.pets[i]),i++}this.iPetCount=i}}},{key:"CalcAll",value:function(){var t;for(t=0;t<8;t++)-1!=this.pets[t].iPid&&MyPets.CalcFightAtt(this.pets[t])}}]),MyPets}();i.default=l,l.mp=new l,l.bHavePetCount=function(){var t,e=0;for(t=0;t<8;t++)-1!=l.mp.pets[t].iPid&&e++;return e},l.bHavePet=function(t,e){var i;for(i=0;i<8;i++)if(-1!=l.mp.pets[i].iPid&&l.mp.pets[i].iTid==t){if(0!=(1&e)&&0==(1&l.mp.pets[i].iBaobao))continue;if(0!=(2&e)&&0==(2&l.mp.pets[i].iBaobao))continue;return!0}return!1},l.swapcz=function(t){var e=parseInt(t/1e3)+".";return parseInt(t/100)%10==0?e+="0":e+=parseInt(t/100)%10,parseInt(t/10)%10==0?e+="0":e+=parseInt(t/10)%10,e+=t%10==0?"":t%10},l.CalcFightAtt=function(t){var e,i,a=0;l.mp.FindPet(t.iPid)==t&&o.default.me.iFlagExt[10]>0&&(a=o.default.me.iFlagExt[6]>>18&31),0==(4&t.iBaobao)?t.iStar=0:0==(8&t.iBaobao)?t.iStar=1:0==(16&t.iBaobao)?t.iStar=2:0==(32&t.iBaobao)?t.iStar=3:0==(64&t.iBaobao)?t.iStar=4:t.iStar=5,0==(128&t.iBaobao)?t.iSkillBlock=8:t.iSkillBlock=9,e=5*t.iLev+t.iAddAtt+25*t.iStar,i=t.iBaseAtt[0]+t.iBaseAtt[1]+t.iBaseAtt[2]+t.iBaseAtt[3]+t.iBaseAtt[4],t.nut=e-i,0!=(1&t.iBaobao)&&(t.nut+=50);var n=10+t.iBaseAtt[0]+t.iLev+5*t.iStar+a,s=10+t.iBaseAtt[1]+t.iLev+5*t.iStar+a,r=10+t.iBaseAtt[2]+t.iLev+5*t.iStar+a,u=10+t.iBaseAtt[3]+t.iLev+5*t.iStar+a,f=10+t.iBaseAtt[4]+t.iLev+5*t.iStar+a,h=t.cz;t.iMaxHp=t.iLev*t.zz[0]+n*h*6,t.iMaxMp=t.iLev*t.zz[1]+s*h*6,t.iSpirit=t.iLev*(t.zz[1]+1640)*(h+1e3)/7500+300*n+700*s+400*r+200*u,t.iSpeed=t.zz[4]*f,t.iAttack=t.iLev*t.zz[2]*(1400+t.cz)/750+t.cz*r,t.iDefence=t.iLev*t.zz[3]*(1900/3+t.cz)/750+t.cz*u*4/3,t.bHaveSkill(282)?t.iMaxHp+=3600*t.iLev:t.bHaveSkill(281)?t.iMaxHp+=2400*t.iLev:t.bHaveSkill(280)&&(t.iMaxHp+=1200*t.iLev),t.bHaveSkill(212)?t.iDefence+=1800*t.iLev:t.bHaveSkill(211)?t.iDefence+=1200*t.iLev:t.bHaveSkill(210)&&(t.iDefence+=600*t.iLev),t.bHaveSkill(215)?t.iAttack+=1500*t.iLev:t.bHaveSkill(214)?t.iAttack+=1e3*t.iLev:t.bHaveSkill(213)&&(t.iAttack+=500*t.iLev),t.tz=n,t.fl=s,t.ll=r,t.nl=u,t.mj=f,t.iMaxHp=parseInt((t.iMaxHp+500)/1e3),t.iMaxMp=parseInt((t.iMaxMp+500)/1e3),t.iSpirit=parseInt((t.iSpirit+500)/1e3),t.iAttack=parseInt((t.iAttack+500)/1e3),t.iDefence=parseInt((t.iDefence+500)/1e3),t.iSpeed=parseInt((t.iSpeed+500)/1e3),t.iHp<=0&&(t.iHp=t.iMaxHp,t.iMp=t.iMaxMp),t.iHp>t.iMaxHp&&(t.iHp=t.iMaxHp),t.iMp>t.iMaxMp&&(t.iMp=t.iMaxMp)}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/AddPoint":209,"../../../../../engtst/mgm/gameing/me/GmMe":211,"./Pets":247}],246:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function PetEat(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PetEat);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PetEat.__proto__||Object.getPrototypeOf(PetEat)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=490,e.iH=512,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_learn=new o.default(l.default.xani_nui2),e.btn_learn.InitButton("按钮1_110"),e.btn_learn.sName="食用",e.btn_learn.Move(e.iX+e.iW-110-30,e.iY+e.iH-52-30,110,52),e.lockgoods=null,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PetEat,r.default),a(PetEat,[{key:"Draw",value:function(){d.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),u.default.gi().DrawTextEx(this.iX+30,this.iY+30,"选择仙露，仙桃，丹药或烹饪",4278206039,30,101,1,1,0,0,0),c.default.new_DrawGoods(this.iX+30,this.iY+30+30+15,m.default.gi().goods[2],null,null),null!=this.lockgoods&&(c.default.new_DrawRect(this.iX+30,this.iY+30+30+15,m.default.gi().goods[2],this.lockgoods,0),this.btn_learn.Draw()),c.default.bShowDetail()&&c.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){return null!=this.lockgoods&&this.btn_learn.ProcTouch(t,e,i)?(this.btn_learn.bCheck()&&(f.default.gi().s_LearnPetSkill(this.lpet.iPid,this.lockgoods.iGid),h.default.gi().PopStat(1)),!0):(this.lockgoods=c.default.new_LockGoods(e,i,this.iX+30,this.iY+30+30+15,m.default.gi().goods[2],t),c.default.NoMove(),3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||h.default.gi().PopStat(1),!1)}}]),PetEat}();i.default=g,g.Open=function(t){h.default.gi().PushStat(h.default.GS_PETEAT),h.default.gi().LastStat(0).lpet=t}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],247:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),s=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(){function Pets(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Pets),this.iPid=-1,this.sName="",this.aa_body=new n.default,this.iBaseAtt=new Int32Array(5),this.zz=new Int32Array(5),this.jn=new Int32Array(12)}return a(Pets,[{key:"bHaveSkill",value:function(t){for(var e=0;e<12;e++)if(this.jn[e]==t)return!0;return!1}}]),a(Pets,[{key:"copyfrom",value:function(t){var e;for(this.iPid=t.iPid,this.iTid=t.iTid,this.iLife=t.iLife,this.iAddAtt=t.iAddAtt,this.iBaobao=t.iBaobao,this.iFlag=t.iFlag,this.iHp=t.iHp,this.iMp=t.iMp,this.iMaxHp=t.iMaxHp,this.iMaxMp=t.iMaxMp,this.iExp=t.iExp,this.iLev=t.iLev,e=0;e<5;e++)this.iBaseAtt[e]=t.iBaseAtt[e];for(this.nut=t.nut,this.tz=t.tz,this.fl=t.fl,this.ll=t.ll,this.nl=t.nl,this.mj=t.mj,this.iSpirit=t.iSpirit,this.iAttack=t.iAttack,this.iDefence=t.iDefence,this.iSpeed=t.iSpeed,e=0;e<5;e++)this.zz[e]=t.zz[e];for(this.cz=t.cz,e=0;e<12;e++)this.jn[e]=t.jn[e];this.sName=t.sName,this.iStar=t.iStar,this.aa_body.copyfrom(t.aa_body)}},{key:"CalcPetScore",value:function(){var t,e=s.default.de_pet.intValue(this.iTid,0,2),i=((this.zz[0]+this.zz[1])/10+(this.zz[2]+this.zz[3]+this.zz[4])/6)*this.cz/1e3,a=1e5*this.iStar/(2e3-this.cz),n=1,r=0;for(t=0;t<8;t++)this.jn[t]>0&&(n*=1.05,r+=s.default.de_skill.intValue(this.jn[t],0,37));return(t=parseInt(n*(i+r)+e+a))!=this.iScore&&(this.iScore=t),this.iScore}}]),Pets}();i.default=r},{"../../../../../engine/graphics/AnimaAction":25,"../../../../../engtst/mgm/GmPlay":65}],248:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GameData")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=_interopRequireDefault(t("../../../../../engine/control/XButton")),l=(_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),f=_interopRequireDefault(t("../../../../../engine/control/XInput")),h=(_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../../engine/graphics/M3DFast"))),d=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/FireworksEffect"))),c=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),m=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),g=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),b=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),D=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage")),y=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/AddPoint")),w=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),S=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/MyAttFrame")),x=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods"))),P=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/fuse/FusePet")),v=_interopRequireDefault(t("./MyPets")),R=_interopRequireDefault(t("./LearnPetSkill")),M=(_interopRequireDefault(t("./WashPet")),_interopRequireDefault(t("./PetEat")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var C=function(t){function PetsFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PetsFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PetsFrame.__proto__||Object.getPrototypeOf(PetsFrame)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=915,i.iH=610,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.btn_close=new l.default(c.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_skilllist=new Array(12),i.btn_page=new Array(2),e=0;e<2;e++)i.btn_page[e]=new l.default(c.default.xani_nui2),i.btn_page[e].Move(i.iX+i.iW-15,i.iY+40+130*e,50,140),i.btn_page[e].InitButton("右侧标签");for(i.btn_petlist=new Array(8),e=0;e<8;e++)i.btn_petlist[e]=new u.default(c.default.xani_ui),i.btn_petlist[e].bSingleButton=!0,i.btn_petlist[e].Move(i.iX+56+e%4*92,i.iY+391+92*parseInt(e/4),83,83),i.btn_petlist[e].iNameSize=25;return i.iPetPoint=0,i.aa_pet=null,i.btn_joinfight=new l.default(c.default.xani_nui2),i.btn_joinfight.InitButton("按钮1_110"),i.btn_joinfight.sName="参 战",i.btn_joinfight.Move(i.iX+471,i.iY+446,110,52),i.btn_fusepet=new l.default(c.default.xani_nui2),i.btn_fusepet.InitButton("按钮1_110"),i.btn_fusepet.sName="炼 妖",i.btn_fusepet.Move(i.iX+603,i.iY+446,110,52),i.btn_follow=new l.default(c.default.xani_nui2),i.btn_follow.InitButton("按钮1_110"),i.btn_follow.sName="观 看",i.btn_follow.Move(i.iX+471,i.iY+512,110,52),i.btn_changename=new l.default(c.default.xani_nui2),i.btn_changename.InitButton("宠物改名按钮"),i.btn_changename.Move(i.iX+300,i.iY+50,60,60),i.iPage=0,i.btn_drop=new l.default(c.default.xani_nui2),i.btn_drop.InitButton("按钮1_110"),i.btn_drop.sName="放 生",i.btn_drop.Move(i.iX+735,i.iY+512,110,52),i.btn_addpoint=new l.default(c.default.xani_nui2),i.btn_addpoint.InitButton("按钮1_110"),i.btn_addpoint.sName="加 点",i.btn_addpoint.Move(i.iX+735,i.iY+446,110,52),i.btn_learn=new l.default(c.default.xani_nui2),i.btn_learn.InitButton("按钮1_110"),i.btn_learn.sName="学技能",i.btn_learn.Move(i.iX+460,i.iY+260,110,52),i.btn_wash=new l.default(c.default.xani_nui2),i.btn_wash.InitButton("按钮1_110"),i.btn_wash.sName="洗 炼",i.btn_wash.Move(i.iX+460+145,i.iY+260,110,52),i.btn_eat=new l.default(c.default.xani_nui2),i.btn_eat.InitButton("按钮1_110"),i.btn_eat.sName="喂 养",i.btn_eat.Move(i.iX+460+290,i.iY+260,110,52),i.in_name=new f.default(c.default.xani_ui),i.in_name.Move(s.default.SCRW,s.default.SCRH,10,10),i.in_name.sDetail="",i.bEditingName=!1,i.iScrollY=0,i.iLockScroll=-1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PetsFrame,o.default),a(PetsFrame,[{key:"Draw",value:function(){if(v.default.mp.iPetCount<=0)g.default.gi().PopStat(1);else{var t,e,i,a,n,s,r,o;for(p.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"宠","物"),i=this.iX+28,a=this.iY+28,n=395,s=553,p.default.new_framein(i,a,n,s),0==this.iPage?(i=i+n+15,n=450,s=385,p.default.new_framein(i,a,n,s),a=a+s+15,s=153,p.default.new_framein(i,a,n,s)):(i=i+n+15,n=450,s=553,p.default.new_framein(i,a,n,s)),t=0;t<2;t++)this.iPage==t&&(this.btn_page[t].bMouseIn=!0,this.btn_page[t].bMouseDown=!0),this.btn_page[t].Draw(),0==this.iPage?(p.default.new_lableword4(this.iX+this.iW-15,this.iY+50+0,40,70,!0,"宠","物","属","性"),p.default.new_lableword4(this.iX+this.iW-15,this.iY+50+130,40,70,!1,"资","质","技","能")):(p.default.new_lableword4(this.iX+this.iW-15,this.iY+50+0,40,70,!1,"宠","物","属","性"),p.default.new_lableword4(this.iX+this.iW-15,this.iY+50+130,40,70,!0,"资","质","技","能"));for(this.btn_close.Draw(),this.iPetPoint>=v.default.mp.iPetCount&&(this.iPetPoint=0),e=v.default.mp.pets[this.iPetPoint],t=0;t<8;t++)c.default.xani_nui2.DrawAnima(this.iX+56+t%4*92,this.iY+391+92*parseInt(t/4),"宠物头像框",0),t>=v.default.mp.iPetCount||(r=this.iX+56+t%4*92,o=this.iY+391+92*parseInt(t/4),c.default.xani_head.DrawAnima_aa(r,o,c.default.de_pet.strValue(v.default.mp.pets[t].iTid,0,1),0),w.default.me.iFightPid==v.default.mp.pets[t].iPid&&c.default.xani_nui2.DrawAnima(r,o,"宠物头像框",1),v.default.mp.pets[t].iFlag/100%10!=0&&h.default.gi().DrawText_2(r-6,o+80,"绑",4285267956,26,101,1,1,0,0,-3,4,4278190080),this.iPetPoint==t&&c.default.xani_nui2.DrawAnimaEx(r,o,"头像选中框",0,101,1,1,0,0,0));for(c.default.xani_nui2.DrawAnima(this.iX+28+197.5-130,this.iY+112,"宠物背景",0),d.default.DrawAura(0,this.iX+220,this.iY+280,null,0),e.aa_body.Draw(this.iX+220,this.iY+280),e.aa_body.NextFrame(),PetsFrame.wordframe(this.iX+28+197.5-80,this.iY+63,160),h.default.gi().DrawText_2(this.iX+28+197.5,this.iY+63+16,v.default.mp.pets[this.iPetPoint].sName,4294967295,22,101,1,1,0,-2,-2,3,4278190080),this.btn_changename.Draw(),v.default.mp.pets[this.iPetPoint].CalcPetScore(),h.default.gi().DrawText_2(this.iX+28+197.5,this.iY+63+16+40,"评分:"+v.default.mp.pets[this.iPetPoint].iScore,4294967295,26,101,1,1,0,-2,-2,3,4278190080),t=0;t<5;t++)t<e.iStar?c.default.xani_nui2.DrawAnima(this.iX+54,this.iY+129+40*t,"宠物进阶星星",1):c.default.xani_nui2.DrawAnima(this.iX+54,this.iY+129+40*t,"宠物进阶星星",0);if(c.default.xani_nui2.DrawAnima(this.iX+380,this.iY+173,"宠物类型红印",3&e.iBaobao),h.default.gi().DrawText_2(this.iX+224,this.iY+340,e.iLev+"级",4294967295,22,101,1,1,0,-2,-2,3,4278190080),h.default.gi().DrawText_2(this.iX+340,this.iY+340,"仙露仙桃："+e.iFlag%100,4294967295,20,101,1,1,0,-2,-2,3,4278190080),0==this.iPage?(PetsFrame.Draw_Base1(this.iX+470,this.iY+60,e),PetsFrame.Draw_Base2(this.iX+470,this.iY+190,e),this.btn_drop.Draw(),this.btn_addpoint.Draw(),w.default.me.iFightPid==e.iPid?this.btn_joinfight.sName="休 息":this.btn_joinfight.sName="参 战",this.btn_joinfight.Draw(),this.btn_fusepet.Draw(),w.default.me.iFollowPid==e.iPid?this.btn_follow.sName="隐 藏":this.btn_follow.sName="跟 随",this.btn_follow.Draw()):1==this.iPage&&(this.btn_eat.Draw(),this.btn_learn.Draw(),this.btn_wash.Draw(),this.Draw_Base3(this.iX+460,this.iY+58,e)),this.bEditingName&&(this.in_name.onscr(),e.sName=this.in_name.sDetail,this.in_name.bFinished&&(this.bEditingName=!1,this.in_name.bFinished=!1,m.default.gi().s_ChangePetName(e.iPid,this.in_name.sDetail))),_.default.end(_.default.CONFIRM_DROPPET)&&_.default.bConfirm&&(w.default.me.bHaveLock&&w.default.me.bLocked?b.default.easymsg.AddMessage("未解锁不能放生"):(w.default.me.iFightPid==e.iPid&&(w.default.me.iFightPid=0),m.default.gi().s_DropPet(e.iPid),v.default.mp.RemovePet(e.iPid),this.iPetPoint=0)),(_.default.end(_.default.CONFIRM_WASHPET)||_.default.end(_.default.CONFIRM_WASHPETBYINGOT))&&_.default.bConfirm&&m.default.gi().s_WashPet(v.default.mp.pets[this.iPetPoint].iPid,this.iWashGid),y.default.end(y.default.ADDPOINT_PET)&&y.default.bConfirm){for(m.default.gi().s_AddPetPoint(e.iPid,y.default.iModifys[0],y.default.iModifys[1],y.default.iModifys[2],y.default.iModifys[3],y.default.iModifys[4]),t=0;t<5;t++)e.iBaseAtt[t]+=y.default.iModifys[t];v.default.CalcFightAtt(e)}}}},{key:"Draw_Base3",value:function(t,e,i){var a,n,s;p.default.ui3_Text1_4word(t+3,e,110,100,"体质资质",""+i.zz[0]),p.default.ui3_Text1_4word(t+3,e+40,110,100,"法力资质",""+i.zz[1]),p.default.ui3_Text1_4word(t+3,e+80,110,100,"力量资质",""+i.zz[2]),p.default.ui3_Text1_4word(t+3,e+120,110,100,"耐力资质",""+i.zz[3]),p.default.ui3_Text1_4word(t+3,e+160,110,100,"敏捷资质",""+i.zz[4]),p.default.ui3_Text1_(t+236,e,67,100,"成长",""+v.default.swapcz(i.cz)),i.iLife>3e4?p.default.ui3_Text1_(t+236,e+40,67,100,"寿命","永生"):p.default.ui3_Text1_(t+236,e+40,67,100,"寿命",""+i.iLife),e+=223,t+=6,e+=47,this.iScrollRectX=t,this.iScrollRectY=e,this.iScrollRectW=408,this.iScrollRectH=234;var r=-1,o=-1,u=-1;for(h.default.gi().SetViewClip(t-6,e-6,t+400,e+194+40),a=0;a<12;a++)n=t+a%4*102,s=e+97*parseInt(a/4)-this.iScrollY,null==this.btn_skilllist[a]&&(this.btn_skilllist[a]=new l.default(c.default.xani_nui2),this.btn_skilllist[a].bSingleButton=!0),this.btn_skilllist[a].Move(n,s,92,92),c.default.xani_nui2.DrawAnima(n,s,"技能框",0),a<i.iSkillBlock&&i.jn[a]>0&&(c.default.xani_nicon.DrawAnima_aa(n,s,c.default.de_skill.strValue(i.jn[a],0,5),0),this.btn_skilllist[a].bMouseDown&&(u=a,r=n,o=s)),a>=i.iSkillBlock&&c.default.xani_nui2.DrawAnima(n,s,"技能框",1);h.default.gi().NoClip(),u>=0&&S.default.Skill_Detail(i.jn[u],r,o,-1)}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<2;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&(this.iPage=a);if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&g.default.gi().PopStat(1),!0;for(a=0;a<v.default.mp.iPetCount;a++)this.btn_petlist[a].ProcTouch(t,e,i)&&this.btn_petlist[a].bCheck()&&(this.iPetPoint=a);if(this.btn_changename.ProcTouch(t,e,i)&&this.btn_changename.bCheck()&&(this.in_name.Move(this.btn_changename.iX,this.btn_changename.iY,this.btn_changename.iW,this.btn_changename.iH),this.in_name.sDetail=v.default.mp.pets[this.iPetPoint].sName,this.in_name.ProcTouch(3,s.default.SCRW+1,s.default.SCRH+1),this.bEditingName=!0),0==this.iPage){if(this.btn_fusepet.ProcTouch(t,e,i)&&this.btn_fusepet.bCheck()&&(g.default.gi().PopStat(1),P.default.Open()),this.btn_joinfight.ProcTouch(t,e,i)&&this.btn_joinfight.bCheck()&&(w.default.me.iFightPid==v.default.mp.pets[this.iPetPoint].iPid?(w.default.me.iFightPid=0,m.default.gi().s_ChangeFightPet(w.default.me.iFightPid)):v.default.mp.pets[this.iPetPoint].iLev>w.default.me.rbs.iLev+10?D.default.fm.Open("宠物超过人物10级不会出战"):w.default.me.rbs.iLev<c.default.de_pet.intValue(v.default.mp.pets[this.iPetPoint].iTid,0,2)?D.default.fm.Open("参战要求人物达到"+c.default.de_pet.intValue(v.default.mp.pets[this.iPetPoint].iTid,0,2)+"级"):(w.default.me.iFightPid=v.default.mp.pets[this.iPetPoint].iPid,m.default.gi().s_ChangeFightPet(w.default.me.iFightPid))),this.btn_follow.ProcTouch(t,e,i)&&this.btn_follow.bCheck()&&(w.default.me.iFollowPid==v.default.mp.pets[this.iPetPoint].iPid?w.default.me.iFollowPid=0:w.default.me.iFollowPid=v.default.mp.pets[this.iPetPoint].iPid,m.default.gi().s_ChangeFollowPet(w.default.me.iFollowPid)),this.btn_drop.ProcTouch(t,e,i)&&this.btn_drop.bCheck()&&_.default.start(_.default.CONFIRM_DROPPET,"是否确认把#c00ff00["+v.default.mp.pets[this.iPetPoint].sName+"]#o放生？"),this.btn_addpoint.ProcTouch(t,e,i)&&this.btn_addpoint.bCheck()){var n=v.default.mp.pets[this.iPetPoint];v.default.mp.pets[this.iPetPoint].nut<=0?b.default.easymsg.AddMessage("当前没有剩余点数可以加"):y.default.start(y.default.ADDPOINT_PET,n.tz,n.fl,n.ll,n.nl,n.mj,n.nut)}}else if(1==this.iPage)for(this.btn_learn.ProcTouch(t,e,i)&&this.btn_learn.bCheck()&&R.default.Open(v.default.mp.pets[this.iPetPoint]),this.btn_eat.ProcTouch(t,e,i)&&this.btn_eat.bCheck()&&M.default.Open(v.default.mp.pets[this.iPetPoint]),this.btn_wash.ProcTouch(t,e,i)&&this.btn_wash.bCheck()&&(v.default.mp.pets[this.iPetPoint].iPid==w.default.me.iFightPid?D.default.fm.Open("不能洗练参战宠物"):0==(2&v.default.mp.pets[this.iPetPoint].iBaobao)?x.default.bHaveGoods(160,1)?(this.iWashGid=x.default.gi().GetGid(160),_.default.start(_.default.CONFIRM_WASHPET,"是否确定消耗一个仙灵果对#c00ff00["+v.default.mp.pets[this.iPetPoint].sName+"]#o进行洗练？")):w.default.me.rbs.iInGot>=10?(this.iWashGid=0,_.default.start(_.default.CONFIRM_WASHPETBYINGOT,"背包中没有仙灵果，是否花费10元宝购买仙灵果对#c00ff00["+v.default.mp.pets[this.iPetPoint].sName+"]#o进行洗练？")):D.default.fm.Open("背包中没有仙灵果"):x.default.bHaveGoods(161,1)?(this.iWashGid=x.default.gi().GetGid(161),_.default.start(_.default.CONFIRM_WASHPET,"是否确定消耗一个高级仙灵果对#c00ff00["+v.default.mp.pets[this.iPetPoint].sName+"]#o进行洗练？")):w.default.me.rbs.iInGot>=50?(this.iWashGid=0,_.default.start(_.default.CONFIRM_WASHPETBYINGOT,"背包中没有高级仙灵果，是否花费50元宝购买高级仙灵果对#c00ff00["+v.default.mp.pets[this.iPetPoint].sName+"]#o进行洗练？")):D.default.fm.Open("背包中没有高级仙灵果")),this.iLockScroll>0&&(2==t&&(a=this.iLockScroll-i,this.iLockScroll=i,this.iScrollY+=a,this.iScrollY<0&&(this.iScrollY=0),this.iScrollY>50&&(this.iScrollY=50)),3==t&&(this.iLockScroll=-1)),r.default.bInRect(e,i,this.iScrollRectX,this.iScrollRectY,this.iScrollRectW,this.iScrollRectH)&&1==t&&(this.iLockScroll=i),a=0;a<12;a++)null!=this.btn_skilllist[a]&&this.btn_skilllist[a].ProcTouch(t,e,i);return!1}}]),PetsFrame}();i.default=C,C.Open=function(){var t=null;if(v.default.mp.iPetCount>0){t=g.default.gi().PushStat(g.default.GS_PETSFRAME);var e=v.default.mp.GetUseingPet();if(null==e){for(var i=0;i<v.default.mp.iPetCount;i++)if(v.default.mp.pets[i].iLife>50){t.iPetPoint=i;break}}else for(i=0;i<v.default.mp.iPetCount;i++)if(v.default.mp.pets[i]==e){t.iPetPoint=i;break}}else b.default.easymsg.AddMessage("你还没有宠物");return t},C.wordframe=function(t,e,i){c.default.xani_nui2.DrawAnimaEx(t,e,"可变长文字框",0,101,1,1,0,0,0),c.default.xani_nui2.DrawAnimaEx(t+15,e,"可变长文字框",1,101,1*(i-30)/20,1,0,0,0),c.default.xani_nui2.DrawAnimaEx(t+i-20,e,"可变长文字框",2,101,1,1,0,0,0)},C.Draw_Base2=function(t,e,i){e+=105,p.default.ui3_Text1_(t,e-60-45,67,100,"体质",""+i.tz),p.default.ui3_Text1_(t,e-20-45,67,100,"法力",""+i.fl),p.default.ui3_Text1_(t,e+20-45,67,100,"力量",""+i.ll),p.default.ui3_Text1_(t,e+60-45,67,100,"耐力",""+i.nl),p.default.ui3_Text1_(t,e+100-45,67,100,"敏捷",""+i.mj),p.default.ui3_Text1_(t+210,e-60-45,67,100,"灵力",""+i.iSpirit),p.default.ui3_Text1_(t+210,e-20-45,67,100,"伤害",""+i.iAttack),p.default.ui3_Text1_(t+210,e+20-45,67,100,"防御",""+i.iDefence),p.default.ui3_Text1_(t+210,e+60-45,67,100,"速度",""+i.iSpeed),p.default.ui3_Text1_(t+210,e+100-45,67,100,"潜能",""+i.nut)},C.Draw_Base1=function(t,e,i){c.default.xani_nui2.DrawAnima(t,e,"提示1",0),h.default.gi().DrawText_2(t+33.5,e+16,"气血",4294967295,20,101,1,1,0,-2,-2,3,4278190080),c.default.xani_nui2.DrawAnima(t,e+38,"提示1",0),h.default.gi().DrawText_2(t+33.5,e+38+16,"魔法",4294967295,20,101,1,1,0,-2,-2,3,4278190080),c.default.xani_nui2.DrawAnima(t,e+76,"提示1",0),h.default.gi().DrawText_2(t+33.5,e+76+16,"经验",4294967295,20,101,1,1,0,-2,-2,3,4278190080);var a=67;c.default.xani_nui2.DrawAnima(t+a,e,"宠物大血条",0),c.default.xani_nui2.DrawAnima(t+a,e+38,"宠物大血条",0),c.default.xani_nui2.DrawAnima(t+a,e+76,"宠物大血条",0),h.default.gi().SetViewClip(t,e,t+a+311*i.iHp/i.iMaxHp,e+480),c.default.xani_nui2.DrawAnima(t+a+2,e+3,"宠物大血条",1),h.default.gi().NoClip(),h.default.gi().SetViewClip(t,e,t+a+311*i.iMp/i.iMaxMp,e+480),c.default.xani_nui2.DrawAnima(t+a+2,e+38+3,"宠物大血条",2),h.default.gi().NoClip();var s=311;s=s*i.iExp/(n.default.iUpgradeExp[i.iLev]/3),h.default.gi().SetViewClip(t,e,t+a+s,e+480),c.default.xani_nui2.DrawAnima(t+a+2,e+76+3,"宠物大血条",3),h.default.gi().NoClip(),h.default.gi().DrawTextEx(t+a+155.5,e+15,i.iHp+"/"+i.iMaxHp,4294967295,20,101,1,1,0,-2,-2),h.default.gi().DrawTextEx(t+a+155.5,e+40+13,i.iMp+"/"+i.iMaxMp,4294967295,20,101,1,1,0,-2,-2),h.default.gi().DrawTextEx(t+a+155.5,e+80+12,i.iExp+"/"+parseInt(n.default.iUpgradeExp[i.iLev]/3),4294967295,20,101,1,1,0,-2,-2)}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/FireworksEffect":64,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../engtst/mgm/gameing/me/AddPoint":209,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../engtst/mgm/gameing/me/pet/fuse/FusePet":251,"./LearnPetSkill":244,"./MyPets":245,"./PetEat":246,"./WashPet":249}],249:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../engine/control/XButton")),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode"));_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function WashPet(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,WashPet);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(WashPet.__proto__||Object.getPrototypeOf(WashPet)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=200,e.iH=24*MyPets.mp.iPetCount+40+50,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_selectpet=new o.default(u.default.xani_ui),e.btn_selectpet.InitButton("统一中按钮2"),e.btn_selectpet.sName="选择",e.btn_selectpet.Move(e.iX+e.iW-70-20,e.iY+e.iH-40-20,70,40),e.iSelectPoint=-1,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(WashPet,r.default),a(WashPet,[{key:"Draw",value:function(){var t,e,i;for(h.default.Frame2_MD(this.iX,this.iY,this.iW,this.iH),t=0;t<MyPets.mp.iPetCount;t++)e=this.iX+20,i=this.iY+20+24*t,this.iSelectPoint==t?(this.pm3f.FillRect_2D(e,i,e+(this.iW-40),i+24,4278190335),this.pm3f.DrawTextEx(e,i+12,MyPets.mp.pets[t].sName,4294967295,20,101,1,1,0,0,-2)):this.pm3f.DrawTextEx(e,i+12,MyPets.mp.pets[t].sName,4278190080,20,101,1,1,0,0,-2);this.iSelectPoint>=0&&this.btn_selectpet.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<MyPets.mp.iPetCount;a++)s.default.bInRect(e,i,this.iX+20,this.iY+20+24*a,this.iW-40,24)&&(this.iSelectPoint=a);return this.iSelectPoint>=0&&this.btn_selectpet.ProcTouch(t,e,i)?(this.btn_selectpet.bCheck()&&(l.default.gi().s_WashPet(MyPets.mp.pets[this.iSelectPoint].iPid,this.lockgoods.iGid),f.default.gi().PopStat(1)),!0):(3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||f.default.gi().PopStat(1),!1)}}]),WashPet}();i.default=d,d.Open=function(t){f.default.gi().PushStat(f.default.GS_WASHPET),f.default.gi().LastStat(0).lockgoods=t}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/gameing/me/goods/Goods":217}],250:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/Confirm1")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/format/FormatString")),g=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage")),_=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/GmMe")),p=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/MyAttFrame")),b=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/pet/MyPets"));_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/pet/Pets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var D=function(t){function ApprovePet(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ApprovePet);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ApprovePet.__proto__||Object.getPrototypeOf(ApprovePet)).call(this));for(i.iW=885,i.iH=580,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new o.default(l.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_approve=new o.default(l.default.xani_nui2),i.btn_approve.InitButton("按钮1"),i.btn_approve.sName="认证",i.btn_selpet=new Array(12),i.btn_selskill=new Array(12),e=0;e<12;e++)i.btn_selpet[e]=new r.default(l.default.xani_button),i.btn_selpet[e].bSingleButton=!0,i.btn_selskill[e]=new r.default(l.default.xani_button),i.btn_selskill[e].bSingleButton=!0;return i.iPetPoint=0,i.iSkillPoint=-1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ApprovePet,s.default),a(ApprovePet,[{key:"Draw",value:function(){var t,e,i,a,n;for(c.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"认","证"),e=this.iX+30,i=this.iY+30,c.default.new_framein(e,i,392,520),u.default.gi().DrawTextEx(e+196,i+30,"请选择你要认证的宠物",4278206039,30,101,1,1,0,-2,0),t=0;t<8;t++)a=e+20+t%4*92,n=i+90+t/4*92,l.default.xani_nui2.DrawAnima(a,n,"宠物头像框",0),this.btn_selpet[t].Move(a,n,83,83),t>=b.default.mp.iPetCount||(l.default.xani_head.DrawAnima_aa(a,n,l.default.de_pet.strValue(b.default.mp.pets[t].iTid,0,1),0),b.default.mp.pets[t].iFlag/100%10!=0&&u.default.gi().DrawText_2(a-6,n+80,"绑",4285267956,26,101,1,1,0,0,-3,4,4278190080),this.iPetPoint==t&&l.default.xani_nui2.DrawAnimaEx(a,n,"头像选中框",0,101,1,1,0,0,0));for(m.default.gi().FormatEx("#c003e57技能认证条件#e1,要求宠物第9技能格为开启状态(炼妖有几率开启)#e2,技能认证花费=参战等级*1万+90万#e3,认证过的宠物不能重复认证#e4,认证的技能打书时不会被覆盖",352,25,0,0,32),m.default.gi().Draw(e+20,i+280),e+=412,c.default.new_framein(e,i,415,520),u.default.gi().DrawTextEx(e+20,i+30,"宠物名称："+b.default.mp.pets[this.iPetPoint].sName,4278206039,30,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+196,i+90,"请选择你要认证的宠物",4278206039,30,101,1,1,0,-2,0),t=0;t<12;t++)a=e+20+t%4*99,n=i+150+t/4*97,this.btn_selskill[t].Move(a,n,92,92),l.default.xani_nui2.DrawAnima(a,n,"技能框",0),this.iPetPoint>=b.default.mp.iPetCount||(t>=b.default.mp.pets[this.iPetPoint].iSkillBlock&&l.default.xani_nui2.DrawAnima(a,n,"技能框",1),b.default.mp.pets[this.iPetPoint].jn[t]>0&&l.default.xani_nicon.DrawAnima_aa(a,n,l.default.de_skill.strValue(b.default.mp.pets[this.iPetPoint].jn[t],0,5),0),this.iSkillPoint==t&&(l.default.xani_nui4.DrawAnima(a-7,n-7,"选中技能",0),p.default.Skill_Detail(b.default.mp.pets[this.iPetPoint].jn[t],a,n,-1)));this.btn_approve.Move(e+127,i+455,161,53),this.btn_approve.Draw(),this.btn_close.Draw(),d.default.end(d.default.CONFIRM_APPROVEPET)&&d.default.bConfirm&&(f.default.gi().s_SeverEvent(26,1,b.default.mp.pets[this.iPetPoint].iPid,b.default.mp.pets[this.iPetPoint].jn[this.iSkillPoint],this.iSkillPoint),h.default.gi().PopStat(1))}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<b.default.mp.iPetCount;a++)if(this.btn_selpet[a].ProcTouch(t,e,i))return this.btn_selpet[a].bCheck()&&(this.iPetPoint=a,this.iSkillPoint=-1),!0;for(a=0;a<8;a++)this.btn_selskill[a].ProcTouch(t,e,i)&&this.btn_selskill[a].bCheck()&&b.default.mp.pets[this.iPetPoint].jn[a]>0&&(this.iSkillPoint=a);return this.btn_approve.ProcTouch(t,e,i)&&this.btn_approve.bCheck()&&(a=1e4*l.default.de_pet.intValue(b.default.mp.pets[this.iPetPoint].iTid,0,2)+9e5,this.iSkillPoint<0||this.iSkillPoint>7||0==b.default.mp.pets[this.iPetPoint].jn[this.iSkillPoint]?g.default.fm.Open("请先选择要认证的技能"):0==(128&b.default.mp.pets[this.iPetPoint].iBaobao)?g.default.fm.Open("没有开启第九个技能格无法认证宠物（第九个技能格在炼妖时有几率开启）"):_.default.me.rbs.iMoney<a?g.default.fm.Open("认证资金不足"):b.default.mp.pets[this.iPetPoint].jn[8]>0?g.default.fm.Open("已有认证技能"):d.default.start(d.default.CONFIRM_APPROVEPET,"本次认证花费"+a+"铜币，技能认证后不可更改，是否确定认证？")),this.btn_close.ProcTouch(t,e,i)&&this.btn_close.bCheck()&&h.default.gi().PopStat(1),!1}}]),ApprovePet}();i.default=D,D.Open=function(){b.default.mp.iPetCount<=0?g.default.fm.Open("当前没有宠物"):h.default.gi().PushStat(h.default.GS_APPROVEPET)}},{"../../../../../../config/GmConfig":5,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButton":14,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../../engtst/mgm/gameing/me/pet/Pets":247}],251:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/control/XCheckBox")),l=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/Confirm1")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage")),_=(_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/MyAttFrame")),_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/goods/MyGoods"))),p=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/pet/MyPets")),b=(_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/pet/Pets")),_interopRequireDefault(t("./SelectMyPet")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var D=function(t){function FusePet(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FusePet);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FusePet.__proto__||Object.getPrototypeOf(FusePet)).call(this));return e.pets=new Array(2),e.pets[0]=null,e.pets[1]=null,e.btn_selpet=new Array(2),e.btn_selpet[0]=new r.default(f.default.xani_nui1),e.btn_selpet[0].bSingleButton=!0,e.btn_selpet[1]=new r.default(f.default.xani_nui1),e.btn_selpet[1].bSingleButton=!0,e.chk_uselock=new Array(2),e.chk_uselock[0]=new u.default(f.default.xani_nui3),e.chk_uselock[0].InitBox("统一勾选"),e.chk_uselock[0].bTrue=!1,e.chk_uselock[0].sDetail="使用定形符",e.chk_uselock[1]=new u.default(f.default.xani_nui3),e.chk_uselock[1].InitBox("统一勾选"),e.chk_uselock[1].bTrue=!1,e.chk_uselock[1].sDetail="使用定形符",e.iW=920,e.iH=630,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_close=new o.default(f.default.xani_nui2),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_fuse=new o.default(f.default.xani_nui2),e.btn_fuse.InitButton("按钮4"),e.btn_fuse.Move(e.iX+(e.iW-141)/2,e.iY+e.iH-30-49,141,49),e.btn_fuse.sName="炼妖",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FusePet,s.default),a(FusePet,[{key:"Draw",value:function(){var t,e;m.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"炼","妖"),t=this.iX+30,e=this.iY+30,this.DrawSide(t,e,0),this.DrawSide(t+420+20,e,1),b.default.bSelect&&(b.default.bSelect=!1,this.pets[b.default.iFlag]=b.default.selpet),this.btn_close.Draw()}},{key:"DrawSide",value:function(t,e,i){var a,n,s;for(m.default.new_framein(t,e,420,510),f.default.xani_nui2.DrawAnima(t+20,e+15,"宠物头像框",0),null!=this.pets[i]&&f.default.xani_head.DrawAnima_aa(t+20,e+15,f.default.de_pet.strValue(this.pets[i].iTid,0,1),0),this.btn_selpet[i].Move(t+20,e+15,83,83),null==this.pets[i]?l.default.gi().DrawTextEx(t+20+83+20,e+15,"宠物：",4278206039,22,101,1,1,0,0,0):l.default.gi().DrawTextEx(t+20+83+20,e+15,"宠物："+this.pets[i].sName+(0==(2&this.pets[i].iBaobao)?"":"(变异)"),4278206039,22,101,1,1,0,0,0),l.default.gi().DrawTextEx(t+20+83+20,e+15+30,"等级："+(null==this.pets[i]?"":this.pets[i].iLev),4278206039,22,101,1,1,0,0,0),this.chk_uselock[i].Move(t+20+83+20,e+15+30+30,50,50),this.chk_uselock[i].Draw(),l.default.gi().DrawTextEx(t+20,e+15+83+30,"体质资质："+(null==this.pets[i]?"":this.pets[i].zz[0]),4278206039,22,101,1,1,0,0,0),l.default.gi().DrawTextEx(t+20,e+15+83+30+30,"法力资质："+(null==this.pets[i]?"":this.pets[i].zz[1]),4278206039,22,101,1,1,0,0,0),l.default.gi().DrawTextEx(t+20,e+15+83+30+60,"力量资质："+(null==this.pets[i]?"":this.pets[i].zz[2]),4278206039,22,101,1,1,0,0,0),l.default.gi().DrawTextEx(t+20+180,e+15+83+30,"耐力资质："+(null==this.pets[i]?"":this.pets[i].zz[3]),4278206039,22,101,1,1,0,0,0),l.default.gi().DrawTextEx(t+20+180,e+15+83+30+30,"敏捷资质："+(null==this.pets[i]?"":this.pets[i].zz[4]),4278206039,22,101,1,1,0,0,0),l.default.gi().DrawTextEx(t+20+180,e+15+83+30+60,"成长："+(null==this.pets[i]?"":p.default.swapcz(this.pets[i].cz)),4278206039,22,101,1,1,0,0,0),a=0;a<12;a++)n=t+20+a%4*99,s=e+215+97*parseInt(a/4),f.default.xani_nui2.DrawAnima(n,s,"技能框",0),a>=(null==this.pets[i]?8:this.pets[i].iSkillBlock)&&f.default.xani_nui2.DrawAnima(n,s,"技能框",1),null!=this.pets[i]&&this.pets[i].jn[a]>0&&f.default.xani_nicon.DrawAnima_aa(n,s,f.default.de_skill.strValue(this.pets[i].jn[a],0,5),0);this.btn_fuse.Draw(),c.default.end(c.default.CONFIRM_FUSEPET)&&c.default.bConfirm&&null!=this.pets[0]&&null!=this.pets[1]&&(a=this.chk_uselock[0].bTrue?0:this.chk_uselock[1].bTrue?1:2,h.default.gi().s_SeverEvent(26,0,this.pets[0].iPid,this.pets[1].iPid,a),d.default.gi().PopStat(1))}},{key:"ProcTouch",value:function(t,e,i){return this.btn_selpet[0].ProcTouch(t,e,i)&&this.btn_selpet[0].bCheck()&&(null==this.pets[0]?b.default.Open(this.pets[1],0):this.pets[0]=null),this.btn_selpet[1].ProcTouch(t,e,i)&&this.btn_selpet[1].bCheck()&&(null==this.pets[1]?b.default.Open(this.pets[0],1):this.pets[1]=null),this.chk_uselock[0].ProcTouch(t,e,i)&&this.chk_uselock[0].bTrue&&(this.chk_uselock[1].bTrue=!1),this.chk_uselock[1].ProcTouch(t,e,i)&&this.chk_uselock[1].bTrue&&(this.chk_uselock[0].bTrue=!1),this.btn_close.ProcTouch(t,e,i)&&this.btn_close.bCheck()&&d.default.gi().PopStat(1),this.btn_fuse.ProcTouch(t,e,i)&&this.btn_fuse.bCheck()&&(null==this.pets[0]||null==this.pets[1]?g.default.fm.Open("请选择参与炼妖的宠物"):this.pets[0].iLev<20||this.pets[1].iLev<20?g.default.fm.Open("20级以上的宠物才能参与炼妖"):this.pets[0]==this.pets[1]?g.default.fm.Open("不能选择同一个宠物"):0!=(2&this.pets[0].iBaobao)||0!=(2&this.pets[1].iBaobao)?g.default.fm.Open("变异宠物无法炼妖"):this.chk_uselock[0].bTrue||this.chk_uselock[1].bTrue?_.default.bHaveGoods(315,1)?c.default.start(c.default.CONFIRM_FUSEPET,"本次炼妖将消耗一枚定形符，生成形象为所选形象"):g.default.fm.Open("背包中没有可消耗的定形符"):c.default.start(c.default.CONFIRM_FUSEPET,"本次炼妖没有使用定形符，炼妖形象将随机生成")),!1}}]),FusePet}();i.default=D,D.Open=function(){d.default.gi().PushStat(d.default.GS_FUSEPET)}},{"../../../../../../config/GmConfig":5,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButton":14,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/control/XCheckBox":17,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/gameing/me/MyAttFrame":212,"../../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../../engtst/mgm/gameing/me/pet/Pets":247,"./SelectMyPet":252}],252:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/pet/MyPets"));_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/pet/Pets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function SelectMyPet(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SelectMyPet);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SelectMyPet.__proto__||Object.getPrototypeOf(SelectMyPet)).call(this));for(i.iW=885,i.iH=460,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new o.default(l.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_select=new o.default(l.default.xani_nui2),i.btn_select.InitButton("按钮1"),i.btn_select.sName="确定",i.btn_petlist=new Array(8),e=0;e<8;e++)i.btn_petlist[e]=new r.default(l.default.xani_ui),i.btn_petlist[e].bSingleButton=!0;return i.iPetPoint=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SelectMyPet,s.default),a(SelectMyPet,[{key:"Draw",value:function(){var t,e,i,a,n;for(h.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),e=this.iX+30,i=this.iY+30,h.default.new_framein(e,i,392,400),t=0;t<8;t++)a=e+20+t%4*92,n=i+20+92*parseInt(t/4),l.default.xani_nui2.DrawAnima(a,n,"宠物头像框",0),this.btn_petlist[t].Move(a,n,83,83),t>=d.default.mp.iPetCount||(l.default.xani_head.DrawAnima_aa(a,n,l.default.de_pet.strValue(d.default.mp.pets[t].iTid,0,1),0),parseInt(d.default.mp.pets[t].iFlag/100)%10!=0&&u.default.gi().DrawText_2(a-6,n+80,"绑",4285267956,26,101,1,1,0,0,-3,4,4278190080),this.iPetPoint==t&&(l.default.xani_nui2.DrawAnimaEx(a,n,"头像选中框",0,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+20,i+210,"宠物名称："+d.default.mp.pets[t].sName,4278206039,22,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+20,i+210+30,"体质资质："+d.default.mp.pets[t].zz[0],4278206039,22,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+20,i+210+60,"法力资质："+d.default.mp.pets[t].zz[1],4278206039,22,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+20,i+210+90,"力量资质："+d.default.mp.pets[t].zz[2],4278206039,22,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+20,i+210+120,"耐力资质："+d.default.mp.pets[t].zz[3],4278206039,22,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+20,i+210+150,"敏捷资质："+d.default.mp.pets[t].zz[4],4278206039,22,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+20+200,i+210+30,"等级："+d.default.mp.pets[t].iLev,4278206039,22,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+20+200,i+210+60,"成长："+d.default.swapcz(d.default.mp.pets[t].cz),4278206039,22,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+20+200,i+210+90,"寿命："+d.default.mp.pets[t].iLife,4278206039,22,101,1,1,0,0,0),u.default.gi().DrawTextEx(e+20+200,i+210+120,"进阶："+d.default.mp.pets[t].iStar,4278206039,22,101,1,1,0,0,0)));for(e+=412,h.default.new_framein(e,i,415,400),t=0;t<12;t++)a=e+20+t%4*99,n=i+20+97*parseInt(t/4),l.default.xani_nui2.DrawAnima(a,n,"技能框",0),this.iPetPoint>=d.default.mp.iPetCount||(t>=d.default.mp.pets[this.iPetPoint].iSkillBlock&&l.default.xani_nui2.DrawAnima(a,n,"技能框",1),d.default.mp.pets[this.iPetPoint].jn[t]>0&&l.default.xani_nicon.DrawAnima_aa(a,n,l.default.de_skill.strValue(d.default.mp.pets[this.iPetPoint].jn[t],0,5),0));this.btn_select.Move(e+127,i+325,161,53),this.btn_select.Draw(),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;for(a=0;a<d.default.mp.iPetCount;a++)if(this.btn_petlist[a].ProcTouch(t,e,i))return this.btn_petlist[a].bCheck()&&(this.iPetPoint=a),!0;return this.btn_select.ProcTouch(t,e,i)&&this.btn_select.bCheck()&&(this.iPetPoint<d.default.mp.iPetCount&&(SelectMyPet.bSelect=!0,SelectMyPet.selpet=d.default.mp.pets[this.iPetPoint]),f.default.gi().PopStat(1)),this.btn_close.ProcTouch(t,e,i)&&this.btn_close.bCheck()&&f.default.gi().PopStat(1),!1}}]),SelectMyPet}();i.default=c,c.wo,c.selpet,c.bSelect=!1,c.iFlag=0,c.Open=function(t,e){f.default.gi().PushStat(f.default.GS_SELECTMYPET),c.wo=t,c.iFlag=e}},{"../../../../../../config/GmConfig":5,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButton":14,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../../engtst/mgm/gameing/me/pet/Pets":247}],253:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),h=(_interopRequireDefault(t("../../../../../../engtst/mgm/frame/Confirm1")),_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode"))),d=(_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/EasyMessage")),_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/fteam/MyFT")),_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/goods/MyGoods"))),c=_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/pet/MyPets"));_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/pet/Pets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function JJPet(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,JJPet);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(JJPet.__proto__||Object.getPrototypeOf(JJPet)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=600,e.iH=360,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_jj=new o.default(u.default.xani_button),e.btn_jj.Move(e.iX+e.iW-120-30,e.iY+e.iH-30-60,120,60),e.btn_jj.InitButton("1号按钮120_60"),e.btn_jj.sName="进 阶",e.btn_close=new o.default(u.default.xani_button),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_close.InitButton("关闭按钮"),e.iPetPoint=-1,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(JJPet,r.default),a(JJPet,[{key:"Draw",value:function(){var t,e,i;for(h.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+15,"宠物进阶",4294896766,40,101,1,1,0,-2,0,2,4278261038),this.pm3f.DrawTextEx(this.iX+20,this.iY+this.iH-20-15,"注：每次进阶可提升每项5点固定属性和25点可分配属性",4279324257,20,101,1,1,0,0,0),e=this.iX+20,i=this.iY+60,h.default.frame_type4("11号框20_20",e,i,200,250,20,20),t=0;t<c.default.mp.iPetCount;t++)this.iPetPoint==t&&h.default.frame_type1("12号框20_30",e+5,i+5+30*t,190,20),this.pm3f.DrawTextEx(e+5,i+5+30*t,c.default.mp.pets[t].sName,4279324257,30,101,1,1,0,0,0);if(this.iCanJJ=0,e=this.iX+240,i=this.iY+70,this.iPetPoint>=0&&this.iPetPoint<c.default.mp.iPetCount){var a=c.default.mp.pets[this.iPetPoint];if(a.iStar>=5)this.pm3f.DrawTextEx(e,i,"当前宠物已进阶至最高",4294967295,30,101,1,1,0,0,0);else{var n=20*(a.iStar+1),s=280+a.iStar,r=285+a.iStar;for(a.iLev<n?this.pm3f.DrawTextEx(e,i,"等级："+a.iLev+"(>="+n+")",4294901760,30,101,1,1,0,0,0):(this.pm3f.DrawTextEx(e,i,"等级："+a.iLev+"(>="+n+")",4278255360,30,101,1,1,0,0,0),this.iCanJJ|=1),t=0;t<20;t++)d.default.gi().goods[2][t].iGid>0&&d.default.gi().goods[2][t].iTid==s&&(this.iCanJJ|=2),d.default.gi().goods[2][t].iGid>0&&d.default.gi().goods[2][t].iTid==r&&d.default.gi().goods[2][t].iCount>=30&&(this.iCanJJ|=4);u.default.xani_nui3.DrawAnima(e,i+40,"物品格子",0),u.default.xani_ngoods.DrawAnima_aa(e,i+40,u.default.de_goods.strValue(s,0,10),0),0==(2&this.iCanJJ)?this.pm3f.DrawTextEx(e+85,i+40+25,u.default.de_goods.strValue(s,0,4)+" x 1",4294901760,30,101,1,1,0,0,0):this.pm3f.DrawTextEx(e+85,i+40+25,u.default.de_goods.strValue(s,0,4)+" x 1",4278255360,30,101,1,1,0,0,0),u.default.xani_nui3.DrawAnima(e,i+40+100,"物品格子",0),u.default.xani_ngoods.DrawAnima_aa(e,i+40+100,u.default.de_goods.strValue(r,0,10),0),0==(4&this.iCanJJ)?this.pm3f.DrawTextEx(e+85,i+40+100+25,u.default.de_goods.strValue(r,0,4)+" x 30",4294901760,30,101,1,1,0,0,0):this.pm3f.DrawTextEx(e+85,i+40+100+25,u.default.de_goods.strValue(r,0,4)+" x 30",4278255360,30,101,1,1,0,0,0)}}7==this.iCanJJ&&this.btn_jj.Draw(),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a,n;return a=this.iX+20,n=this.iY+60,7==this.iCanJJ&&this.btn_jj.ProcTouch(t,e,i)?(this.btn_jj.bCheck()&&(l.default.gi().s_PetJJ(c.default.mp.pets[this.iPetPoint].iPid,0,0),f.default.gi().PopStat(1)),!0):(s.default.bInRect(e,i,a,n,200,250)&&(this.iPetPoint=(i-n)/30),this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))}}]),JJPet}();i.default=m,m.Open=function(){f.default.gi().iXStat==f.default.GS_JJPET?f.default.gi().oCurrentView:f.default.gi().PushStat(f.default.GS_JJPET)}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/PackageTools":9,"../../../../../../engine/control/XButtonEx1":15,"../../../../../../engine/control/XButtonEx2":16,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../../engtst/mgm/gameing/fteam/MyFT":140,"../../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../../engtst/mgm/gameing/me/pet/Pets":247}],254:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../../engine/control/XButtonEx1"))),u=(_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/Confirm1")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),c=(_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/EasyMessage")),_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/FrameMessage"))),m=(_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/fteam/MyFT")),_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/goods/MyGoods")));_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/pet/MyPets")),_interopRequireDefault(t("../../../../../../engtst/mgm/gameing/me/pet/Pets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function MergeZR(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MergeZR);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MergeZR.__proto__||Object.getPrototypeOf(MergeZR)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=550,e.iH=410,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_one=new o.default(u.default.xani_button),e.btn_one.Move(e.iX+20,e.iY+e.iH-20-60,150,60),e.btn_one.InitButton("1号按钮150_60"),e.btn_one.sName="融合一次",e.btn_all=new o.default(u.default.xani_button),e.btn_all.Move(e.iX+e.iW-150-20,e.iY+e.iH-20-60,150,60),e.btn_all.InitButton("1号按钮150_60"),e.btn_all.sName="融合全部",e.btn_close=new o.default(u.default.xani_button),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_close.InitButton("关闭按钮"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MergeZR,r.default),a(MergeZR,[{key:"Draw",value:function(){var t,e;d.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+15,"融合自然之力",4294952960,40,101,1,1,0,-2,0,2,4278190080),t=this.iX+20,e=this.iY+70,u.default.xani_nui3.DrawAnima(t,e,"物品格子",0),u.default.xani_ngoods.DrawAnima_aa(t,e,u.default.de_goods.strValue(this.gp.iTid,0,10),0),this.gp.iCount<=2?this.pm3f.DrawTextEx(t+85,e+25,u.default.de_goods.strValue(this.gp.iTid,0,4)+" x "+this.gp.iCount,4294901760,30,101,1,1,0,0,0):this.pm3f.DrawTextEx(t+85,e+25,u.default.de_goods.strValue(this.gp.iTid,0,4)+" x "+this.gp.iCount,4278255360,30,101,1,1,0,0,0),e+=100,d.default.frame_type4("11号框20_20",t,e,this.iW-40,145,20,20),t+=10,e+=10,this.pm3f.DrawTextEx(t,e,"融合规则：",4279324257,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(t,e+25,"3个一级自然之力+3万现金=1个二级自然之力",4279324257,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(t,e+50,"3个二级自然之力+3万现金+10元宝=1个三级自然之力",4279324257,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(t,e+75,"3个三级自然之力+3万现金+20元宝=1个四级自然之力",4279324257,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(t,e+100,"3个四级自然之力+3万现金+30元宝=1个五级自然之力",4279324257,20,101,1,1,0,0,0),this.btn_one.Draw(),this.btn_all.Draw(),this.btn_close.Draw(),h.default.end(h.default.CONFIRM_MERGEONE)&&h.default.bConfirm&&(l.default.gi().s_FTOperate(8,1,this.gp.iGid),f.default.gi().PopStat(1)),h.default.end(h.default.CONFIRM_MERGEALL)&&h.default.bConfirm&&(l.default.gi().s_FTOperate(8,2,this.gp.iGid),f.default.gi().PopStat(1))}},{key:"ProcTouch",value:function(t,e,i){var a;return this.btn_one.ProcTouch(t,e,i)?(this.btn_one.bCheck()&&(285==this.gp.iTid?h.default.start(h.default.CONFIRM_MERGEONE,"3个一级自然之力+3万现金=1个二级自然之力#e是否确定融合？"):286==this.gp.iTid?h.default.start(h.default.CONFIRM_MERGEONE,"3个二级自然之力+3万现金+10元宝=1个三级自然之力#e是否确定融合？"):287==this.gp.iTid?h.default.start(h.default.CONFIRM_MERGEONE,"3个三级自然之力+3万现金+20元宝=1个四级自然之力#e是否确定融合？"):288==this.gp.iTid&&h.default.start(h.default.CONFIRM_MERGEONE,"3个四级自然之力+3万现金+30元宝=1个五级自然之力#e是否确定融合？")),!0):this.btn_all.ProcTouch(t,e,i)?(this.btn_all.bCheck()&&(a=this.gp.iCount/3,285==this.gp.iTid?h.default.start(h.default.CONFIRM_MERGEALL,3*a+"个一级自然之力+"+3*a+"万现金="+a+"个二级自然之力#e是否确定融合？"):286==this.gp.iTid?h.default.start(h.default.CONFIRM_MERGEALL,3*a+"个二级自然之力+"+3*a+"万现金+"+10*a+"元宝="+a+"个三级自然之力#e是否确定融合？"):287==this.gp.iTid?h.default.start(h.default.CONFIRM_MERGEALL,3*a+"个三级自然之力+"+3*a+"万现金+"+20*a+"元宝="+a+"个四级自然之力#e是否确定融合？"):288==this.gp.iTid&&h.default.start(h.default.CONFIRM_MERGEALL,3*a+"个四级自然之力+"+3*a+"万现金+"+30*a+"元宝="+a+"个五级自然之力#e是否确定融合？")),!0):this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)}}]),MergeZR}();i.default=g,g.Open=function(){m.default.gi().goods[2][0].iGid<=0||285!=m.default.gi().goods[2][0].iTid&&286!=m.default.gi().goods[2][0].iTid&&287!=m.default.gi().goods[2][0].iTid&&288!=m.default.gi().goods[2][0].iTid?c.default.fm.Open("请先将待融合的自然之力放到物品栏第一格"):(f.default.gi().iXStat==f.default.GS_MERGEZR?f.default.gi().oCurrentView:f.default.gi().PushStat(f.default.GS_MERGEZR)).gp=m.default.gi().goods[2][0]}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/PackageTools":9,"../../../../../../engine/control/XButtonEx1":15,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../../engtst/mgm/gameing/fteam/MyFT":140,"../../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../../engtst/mgm/gameing/me/pet/Pets":247}],255:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../engine/BaseClass")),s=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/MyAI"))),r=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),o=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),u=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function BackToSchool(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BackToSchool),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(BackToSchool.__proto__||Object.getPrototypeOf(BackToSchool)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(BackToSchool,n.default),a(BackToSchool,[{key:"Draw",value:function(){o.default.end(o.default.CONFIRM_BACKTOSCHOOL)&&(o.default.bConfirm&&u.default.me.rbs.iSchoolId>0&&s.default.gi().FindNpc(BackToSchool.iNpcId,!0,!0),r.default.gi().PopStat(1))}},{key:"ProcTouch",value:function(t,e,i){return!1}}]),BackToSchool}();i.default=l,l.iNpcId,l.Open=function(t){r.default.gi().PushStat(r.default.GS_BACKTOSCHOOL),l.iNpcId=t.GetNextInt(),o.default.start(o.default.CONFIRM_BACKTOSCHOOL,t.GetNextString())}},{"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/MyAI":68,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/gameing/me/GmMe":211}],256:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GameData")),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/XDefine")),o=_interopRequireDefault(t("../../../../../engine/BaseClass")),u=_interopRequireDefault(t("../../../../../engine/control/XButton")),l=(_interopRequireDefault(t("../../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),f=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),h=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),d=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),c=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),p=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var b=function(t){function LearnSkill(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,LearnSkill);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LearnSkill.__proto__||Object.getPrototypeOf(LearnSkill)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=900,i.iH=620,i.iX=(s.default.SCRW-i.iW)/2,i.iY=(s.default.SCRH-i.iH)/2,i.btn_close=new l.default(h.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.iMainSkillId=new Int32Array(LearnSkill.MAXSKILLCOUNT),i.btn_main=new Array(LearnSkill.MAXSKILLCOUNT),e=0;e<LearnSkill.MAXSKILLCOUNT;e++)i.btn_main[e]=new u.default(h.default.xani_ui),i.btn_main[e].bSingleButton=!0;for(i.iUseSkillId=new Int32Array(LearnSkill.MAXSKILLCOUNT),i.btn_use=new Array(LearnSkill.MAXSKILLCOUNT),e=0;e<LearnSkill.MAXSKILLCOUNT;e++)i.btn_use[e]=new u.default(h.default.xani_ui),i.btn_use[e].bSingleButton=!0;return i.iMainPoint=-1,i.iUsePoint=-1,i.InitSkill(),i.btn_learn=new l.default(h.default.xani_nui2),i.btn_learn.InitButton("按钮1_110"),i.btn_learn.Move(i.iX+i.iW-155,i.iY+i.iH-100,110,52),i.btn_learn.sName="学  习",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LearnSkill,o.default),a(LearnSkill,[{key:"InitSkill",value:function(){var t,e,i;for(i=1,t=0;t<h.default.de_skill.iDataCount;t++)0==(e=h.default.de_skill.intValue(h.default.de_skill.datas[t].iDid,-1,1))?(e=h.default.de_skill.intValue(h.default.de_skill.datas[t].iDid,-1,2))==p.default.me.rbs.iSchoolId&&(this.iMainSkillId[0]=h.default.de_skill.datas[t].iDid):1==e&&(e=h.default.de_skill.intValue(h.default.de_skill.datas[t].iDid,-1,2))==p.default.me.rbs.iSchoolId&&(this.iMainSkillId[i]=h.default.de_skill.datas[t].iDid,i++)}},{key:"Draw",value:function(){var t,e,i,a,s,r,o,u,l;for(m.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),m.default.new_framein(this.iX+25,this.iY+25,270,570),t=0;t<LearnSkill.MAXSKILLCOUNT;t++)a=this.iX+25+20,s=this.iY+25+20+90*t,this.btn_main[t].Move(a,s,230,80),this.iMainPoint==t?h.default.xani_nui2.DrawAnima(a,s,"选择主技能",1):h.default.xani_nui2.DrawAnima(a,s,"选择主技能",0),h.default.xani_nicon.DrawAnima_aa(a,s,h.default.de_skill.strValue(n.default.iSchoolSkillId[p.default.me.rbs.iSchoolId][t],0,5),0),this.pm3f.DrawTextEx(a+95,s+25,h.default.de_skill.strValue(n.default.iSchoolSkillId[p.default.me.rbs.iSchoolId][t],-1,6),4294967295,25,101,1,1,0,0,-2),this.pm3f.DrawTextEx(a+95,s+60,p.default.me.rbs.iSchoolSkill[t]+"级",4294967295,20,101,1,1,0,0,-2);if(u=this.iX+25+270+15+15,l=this.iY+25+270+7+15,h.default.xani_nui2.DrawAnima(u,l,"技能说明框",0),a=this.iX+25+270+15,s=this.iY+25,m.default.new_framein(a,s,565,570),f.default.gi().FillRect_2D(a+15,s+15,a+550,l-15,4284784296),this.iUseSkillCount=0,this.iMainPoint>=0){for(r=n.default.iSchoolSkillId[p.default.me.rbs.iSchoolId][this.iMainPoint],o=p.default.me.rbs.iSchoolSkill[this.iMainPoint],-1==this.iUsePoint&&(f.default.gi().DrawText_2(u+5,l+18,h.default.de_skill.strValue(r,0,6),4282245605,28,101,1,1,0,0,-2,4,4278206039),1==(i=h.default.de_skill.intValue(r,0,7))?f.default.gi().DrawTextEx(u+120,l+18,"战斗中使用",4282245605,24,101,1,1,0,0,-2):0==i?f.default.gi().DrawTextEx(u+120,l+18,"漫游中使用",4282245605,24,101,1,1,0,0,-2):3==i&&f.default.gi().DrawTextEx(u+120,l+18,"被动技能",4282245605,24,101,1,1,0,0,-2),g.default.gi().Format(h.default.de_skill.strValue(r,0,3),514,20),g.default.gi().Draw(u+5,l+38)),t=0;t<5&&-1!=(e=h.default.de_skill.intValue(r,t,4));t++)this.iUseSkillId[t]=e,a=this.iX+25+270+15+15+7,s=this.iY+25+15+7+84*t,this.iUsePoint==t?(h.default.xani_nui2.DrawAnima(a,s,"选择子技能",0),f.default.gi().DrawText_2(u+5,l+18,h.default.de_skill.strValue(e,0,6),4282245605,28,101,1,1,0,0,-2,4,4278206039),1==(i=h.default.de_skill.intValue(e,0,7))?f.default.gi().DrawTextEx(u+120,l+18,"战斗中使用",4282245605,24,101,1,1,0,0,-2):0==i?f.default.gi().DrawTextEx(u+120,l+18,"漫游中使用",4282245605,24,101,1,1,0,0,-2):3==i&&f.default.gi().DrawTextEx(u+120,l+18,"被动技能",4282245605,24,101,1,1,0,0,-2),g.default.gi().Format(h.default.de_skill.strValue(e,0,3),514,20),g.default.gi().Draw(u+5,l+38)):h.default.xani_nui2.DrawAnima(a,s,"选择子技能",1),this.btn_use[t].Move(a,s,520,84),h.default.xani_nicon.DrawAnima_aa(a+2,s+2,h.default.de_skill.strValue(e,0,5),0),this.pm3f.DrawTextEx(a+95,s+25,h.default.de_skill.strValue(e,-1,6),4294967295,25,101,1,1,0,0,-2),i=h.default.de_skill.intValue(e,-1,9),this.pm3f.DrawTextEx(a+95,s+60,"要求"+h.default.de_skill.strValue(h.default.de_skill.intValue(e,-1,8),-1,6)+">="+i+"级",o>=i?4278255360:4294901760,20,101,1,1,0,0,-2);this.iUseSkillCount=t,a=this.iX+25+270+15+15,s=this.iY+25+270+7+110+7+18,h.default.xani_nui2.DrawAnima(a,s,"提示1",2),f.default.gi().DrawTextEx(a+55,s+16,"当前经验",4294967295,24,101,1,1,0,-2,-2),h.default.xani_nui2.DrawAnima(a+110,s,"提示2",0),f.default.gi().DrawTextEx(a+110+60,s+16,""+p.default.me.rbs.iExp,4294967295,24,101,1,1,0,-2,-2),s+=40,h.default.xani_nui2.DrawAnima(a,s,"提示1",2),f.default.gi().DrawTextEx(a+55,s+16,"当前铜币",4294967295,24,101,1,1,0,-2,-2),h.default.xani_nui2.DrawAnima(a+110,s,"提示2",0),f.default.gi().DrawTextEx(a+110+60,s+16,""+p.default.me.rbs.iMoney,4294967295,24,101,1,1,0,-2,-2),s+=40,h.default.xani_nui2.DrawAnima(a,s,"提示1",2),f.default.gi().DrawTextEx(a+55,s+16,"储备金",4294967295,24,101,1,1,0,-2,-2),h.default.xani_nui2.DrawAnima(a+110,s,"提示2",0),f.default.gi().DrawTextEx(a+110+60,s+16,""+p.default.me.rbs.iReserve,4294967295,24,101,1,1,0,-2,-2),a=this.iX+25+270+15+15+304,s=this.iY+25+270+7+110+7+18,h.default.xani_nui2.DrawAnima(a,s,"提示1",2),f.default.gi().DrawTextEx(a+55,s+16,"所需经验",4294967295,24,101,1,1,0,-2,-2),h.default.xani_nui2.DrawAnima(a+110,s,"提示2",0),f.default.gi().DrawTextEx(a+110+60,s+16,""+parseInt(n.default.iUpgradeExp[o]/6),4294967295,24,101,1,1,0,-2,-2),s+=40,h.default.xani_nui2.DrawAnima(a,s,"提示1",2),f.default.gi().DrawTextEx(a+55,s+16,"所需铜币",4294967295,24,101,1,1,0,-2,-2),h.default.xani_nui2.DrawAnima(a+110,s,"提示2",0),f.default.gi().DrawTextEx(a+110+60,s+16,""+parseInt(n.default.iUpgradeMoney[o]/18),4294967295,24,101,1,1,0,-2,-2),this.btn_learn.Draw()}this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&c.default.gi().PopStat(1),!0;var a;for(a=0;a<6;a++)this.btn_main[a].ProcTouch(t,e,i)&&this.btn_main[a].bMouseDown&&(this.iMainPoint=a,this.iUsePoint=-1);for(a=0;a<this.iUseSkillCount;a++)this.btn_use[a].ProcTouch(t,e,i)&&this.btn_use[a].bMouseDown&&(this.iUsePoint=a);return this.iMainPoint>=0&&this.btn_learn.ProcTouch(t,e,i)&&this.btn_learn.bCheck()&&(p.default.me.rbs.iSchoolSkill[this.iMainPoint]>=p.default.me.rbs.iLev+10?_.default.easymsg.AddMessage("不能超过人物等级10级"):this.iMainPoint>0&&p.default.me.rbs.iSchoolSkill[this.iMainPoint]>=p.default.me.rbs.iSchoolSkill[0]?_.default.easymsg.AddMessage("不能超过主技能等级"):parseInt(n.default.iUpgradeExp[p.default.me.rbs.iSchoolSkill[this.iMainPoint]]/6)>p.default.me.rbs.iExp?_.default.easymsg.AddMessage("当前经验不足"):parseInt(n.default.iUpgradeMoney[p.default.me.rbs.iSchoolSkill[this.iMainPoint]]/18)>p.default.me.rbs.iMoney+p.default.me.rbs.iReserve?_.default.easymsg.AddMessage("当前现金不足"):(d.default.gi().s_learnschoolskill(n.default.iSchoolSkillId[p.default.me.rbs.iSchoolId][this.iMainPoint],this.iMainPoint),p.default.me.rbs.iExp-=n.default.iUpgradeExp[p.default.me.rbs.iSchoolSkill[this.iMainPoint]]/6,p.default.me.rbs.iReserve>=parseInt(n.default.iUpgradeExp[p.default.me.rbs.iSchoolSkill[this.iMainPoint]]/18)?p.default.me.rbs.iReserve-=parseInt(n.default.iUpgradeExp[p.default.me.rbs.iSchoolSkill[this.iMainPoint]]/18):(a=parseInt(n.default.iUpgradeExp[p.default.me.rbs.iSchoolSkill[this.iMainPoint]]/18)-p.default.me.rbs.iReserve,p.default.me.rbs.iReserve=0,p.default.me.rbs.iMoney-=a),p.default.me.rbs.iSchoolSkill[this.iMainPoint]++)),3!=t||r.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||c.default.gi().PopStat(1),!1}}]),LearnSkill}();i.default=b,b.MAXSKILLCOUNT=6},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx1":15,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/GmMe":211}],257:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../../engine/control/XInputNumber")),u=_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),l=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),p=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"));_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/MyPets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var b=function BuyGoods(){_classCallCheck(this,BuyGoods),this.aa=new u.default},D=function BuyPets(){_classCallCheck(this,BuyPets)},y=function(){function MyBuy(){var t;for(_classCallCheck(this,MyBuy),this.bBuying=!1,this.bg=new Array(20),this.goods=new Array(20),this.bp=new Array(8),t=0;t<20;t++)this.bg[t]=new b,this.goods[t]=new _.default;for(t=0;t<8;t++)this.bp[t]=new D;this.iW=900,this.iH=580,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.btn_close=new r.default(f.default.xani_nui2),this.btn_close.InitButton("关闭按钮"),this.btn_buy=new r.default(f.default.xani_nui2),this.btn_buy.InitButton("按钮1_110"),this.btn_buy.sName="购买",this.btn_watch=new r.default(f.default.xani_nui2),this.btn_watch.InitButton("按钮1_110"),this.btn_watch.sName="查看",this.in_count=new o.default(f.default.xani_nui3),this.in_count.iNumber=1,this.iPetPoint=-1}return a(MyBuy,[{key:"Draw",value:function(){var t,e,i,a,s;if(this.bBuying){for(this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,c.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"摊","位"),this.btn_close.Move(this.iX+this.iW-35,this.iY-25,60,60),this.btn_close.Draw(),c.default.new_framein(this.iX+30,this.iY+30,this.iW-60,this.iH-60),c.default.new_numberframe(this.iX+30+20,this.iY+30+30-5,685,this.sSellName+"   ---   ("+this.sSeller+this.iSellerId+")"),this.btn_watch.Move(this.iX+30+20+685,this.iY+30+30-5-1,110,52),this.btn_watch.Draw(),a=this.iX+30+20,s=this.iY+30+30+40+30,f.default.xani_nui3.DrawAnima(a,s,"摊位分类框",0),l.default.gi().DrawTextEx(a+52.5,s+16.5,"物品",4294967295,25,101,1,1,0,-2,-2),s+=43,this.iGx=a,this.iGy=s,p.default.new_DrawGoods(a,s,this.goods,null,null),t=0;t<20;t++)this.bg[t].iGid>0&&0==this.bg[t].iPrice&&(e=this.iGx+5+t%5*85,i=this.iGy+5+t/5*85,f.default.xani_nui3.DrawAnima(e,i,"观赏标签",0));for(a=this.iX+30+20+430+20,s=this.iY+30+30+40+30,f.default.xani_nui3.DrawAnima(a,s,"摊位分类框",0),l.default.gi().DrawTextEx(a+52.5,s+16.5,"宠物",4294967295,25,101,1,1,0,-2,-2),s+=43,this.iPx=a,this.iPy=s,c.default.new_frameon(a,s,345,175,0),t=0;t<8;t++)e=a+5+t%4*85,i=s+5+t/4*85,f.default.xani_nui3.DrawAnima(e,i,"基本头像框",0),this.bp[t].iPid<=0||(f.default.xani_head.DrawAnima_aa(e+3,i+3,f.default.de_pet.strValue(this.bp[t].iTid,0,1),0),0==this.bp[t].iPrice&&f.default.xani_nui3.DrawAnima(e,i,"观赏标签",0),this.iPetPoint==t&&(f.default.xani_nui3.DrawAnimaEx(e,i,"物品选中框",0,101,1,1,0,0,0),c.default.new_TagText2(this.iPx,this.iPy+175+10,150,"名称",f.default.de_pet.strValue(this.bp[t].iTid,0,1)),0==this.bp[t].iPrice?c.default.new_TagText2(this.iPx,this.iPy+175+10+42,150,"单价","观赏"):c.default.new_TagText2(this.iPx,this.iPy+175+10+42,150,"单价",""+this.bp[t].iPrice),c.default.new_TagText2(this.iPx,this.iPy+175+10+84,150,"总价",""+this.bp[t].iPrice),this.btn_buy.Move(this.iPx+235,this.iPy+175+10+126-20,110,52),this.btn_buy.Draw()));if(null!=this.lockgoods){for(p.default.new_DrawRect(this.iGx,this.iGy,this.goods,this.lockgoods,0),t=0;t<20;t++)this.bg[t].iGid>0&&this.bg[t].iGid==this.lockgoods.iGid&&(c.default.new_TagText2(this.iPx,this.iPy+175+10,150,"名称",f.default.de_goods.strValue(this.lockgoods.iTid,-1,4)),0==this.bg[t].iPrice?(c.default.new_TagText2(this.iPx,this.iPy+175+10+42,150,"单价","观赏"),p.default.detail_add="#e#cc8bfe7观赏"):(c.default.new_TagText2(this.iPx,this.iPy+175+10+42,150,"单价",""+this.bg[t].iPrice),c.default.new_TagText2(this.iPx,this.iPy+175+10+84,150,"总价",""+this.bg[t].iPrice*this.in_count.iNumber),p.default.detail_add="#e#cc8bfe7单价："+MyBuy.money_show(this.bg[t].iPrice),f.default.de_goods.intValue(this.lockgoods.iTid,0,28)>1&&(this.in_count.Move(this.iPx+230,this.iPy+175+10,115),this.in_count.Draw())));this.btn_buy.Move(this.iPx+235,this.iPy+175+10+126-20,110,52),this.btn_buy.Draw()}c.default.new_TagText2(this.iPx,this.iPy+175+10+126,150,"现金",""+g.default.me.rbs.iMoney),p.default.bShowDetail()&&p.default.new_DrawDetail(null,-1,-1,0),p.default.detail_add="",d.default.end(d.default.CONFIRM_MYBUY)&&d.default.bConfirm&&(null!=this.lockgoods?h.default.gi().s_MyBuy(0,this.iSellerId,this.lockgoods.iGid,this.in_count.iNumber):-1!=this.iPetPoint&&h.default.gi().s_MyBuy(1,this.iSellerId,this.bp[this.iPetPoint].iPid,1))}}},{key:"ProcTouch",value:function(t,e,i){var a,n,r;if(this.iPetPoint>=0){for(a=0;a<8;a++)if(n=this.iPx+5+a%4*85,r=this.iPy+5+a/4*85,this.bp[a].iPid>0&&s.default.bInRect(e,i,n,r,80,80)&&this.iPetPoint==a)return 1==t&&h.default.gi().s_WatchOn(2,this.bp[this.iPetPoint].iPid,0,""),!0;if(this.btn_buy.ProcTouch(t,e,i))return this.btn_buy.bCheck()&&(0==this.bp[this.iPetPoint].iPrice?m.default.easymsg.AddMessage("观赏宠物，不能购买"):g.default.me.rbs.iMoney<this.bp[this.iPetPoint].iPrice?m.default.easymsg.AddMessage("现金不足，不能购买"):d.default.start(d.default.CONFIRM_MYBUY,"是否确定#e花费"+MyBuy.money_show(this.bp[this.iPetPoint].iPrice)+"#e购买#c00ff00["+this.bp[this.iPetPoint].sName+"]#cffffff？")),!0}if(null!=this.lockgoods)for(a=0;a<20;a++)if(this.bg[a].iGid>0&&this.bg[a].iGid==this.lockgoods.iGid){if(0==this.bg[a].iPrice);else if(f.default.de_goods.intValue(this.lockgoods.iTid,0,28)>1&&this.in_count.ProcTouch(t,e,i))return this.in_count.iNumber>=this.bg[a].iCount&&(this.in_count.iNumber=this.bg[a].iCount),this.in_count.iNumber<0&&(this.in_count.iNumber=0),g.default.me.rbs.iMoney<this.bg[a].iPrice*this.in_count.iNumber&&(this.in_count.iNumber=g.default.me.rbs.iMoney/this.bg[a].iPrice),!0;if(this.btn_buy.ProcTouch(t,e,i))return this.btn_buy.bCheck()&&(0==this.bg[a].iPrice?m.default.easymsg.AddMessage("观赏物品，不能购买"):g.default.me.rbs.iMoney<this.bg[a].iPrice*this.in_count.iNumber?m.default.easymsg.AddMessage("现金不足，不能购买"):this.in_count.iNumber<=0?m.default.easymsg.AddMessage("购买数量不能为0"):d.default.start(d.default.CONFIRM_MYBUY,"是否确定#e花费"+MyBuy.money_show(this.bg[a].iPrice*this.in_count.iNumber)+"#e购买"+this.in_count.iNumber+"个#c00ff00["+f.default.de_goods.strValue(this.lockgoods.iTid,0,4)+"]#cffffff？")),!0;break}if(this.btn_watch.ProcTouch(t,e,i))return this.btn_watch.bCheck()&&h.default.gi().s_WatchOn(0,this.iSellerId,0,""),!0;for(this.lockgoods=p.default.new_LockGoods(e,i,this.iGx,this.iGy,this.goods,t),p.default.NoMove(),3==t&&null!=this.lockgoods&&p.default.bCanProc(),this.in_count.iNumber=1,this.iPetPoint=-1,a=0;a<8;a++)n=this.iPx+5+a%4*85,r=this.iPy+5+a/4*85,this.bp[a].iPid>0&&s.default.bInRect(e,i,n,r,80,80)&&(this.iPetPoint=a);return!this.btn_close.ProcTouch(t,e,i)||(this.btn_close.bCheck()&&(this.bBuying=!1),!0)}},{key:"InitBuy",value:function(t,e,i){var a;for(this.iSellerId=t,this.sSellName=e,this.sSeller=i,this.bBuying=!0,a=0;a<20;a++)this.bg[a].iGid=0,this.goods[a].iGid=-1;for(a=0;a<8;a++)this.bp[a].iPid=0}},{key:"IndexBuy",value:function(t){var e,i;if(0==(e=t.GetNextByte())){for(e=0;e<20;e++)this.bg[e].iGid=-1,this.goods[e].iGid=-1;for(e=0;e<20&&0!=(i=t.GetNextByte());e++){for(this.bg[e].iGid=t.GetNextInt(),this.bg[e].iPrice=t.GetNextInt(),this.bg[e].iTid=t.GetNextShort(),this.bg[e].iCount=t.GetNextShort(),this.goods[e].iGid=this.bg[e].iGid,this.goods[e].iTid=this.bg[e].iTid,this.goods[e].iCount=this.bg[e].iCount,i=0;i<8;i++)this.goods[e].iAtts[i]=t.GetNextInt();this.goods[e].iPos=e,f.default.xani_ngoods.InitAnimaWithName(f.default.de_goods.strValue(this.bg[e].iTid,0,10),this.goods[e].aa)}}else if(1==e){for(e=0;e<8;e++)this.bp[e].iPid=0;for(e=0;e<8&&0!=(i=t.GetNextByte());e++)this.bp[e].iPid=t.GetNextInt(),this.bp[e].iPrice=t.GetNextInt(),this.bp[e].iTid=t.GetNextInt(),i=t.GetNextShort(),this.bp[e].sName=f.default.de_pet.strValue(this.bp[e].iTid,0,1),0!=(1&i)&&(this.bp[e].sName=this.bp[e].sName+"宝宝"),0!=(2&i)&&(this.bp[e].sName="变异"+this.bp[e].sName)}}}]),MyBuy}();i.default=y,y.mb=null,y.gi=function(){return null==y.mb&&(y.mb=new y),y.mb},y.its=function(t){return t>=1e3?""+t:t>=100?"0"+t:t>=10?"00"+t:t>=0?"000"+t:"0000"},y.money_show=function(t){var e,i,a;return i=t/1e4%1e4,a=t%1e4,(e=t/1e8)>0?e+","+y.its(i)+","+y.its(a):i>0?i+","+y.its(a):""+a}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInputNumber":19,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../engtst/mgm/gameing/me/pet/MyPets":245}],258:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),c=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function MyRecover(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyRecover);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MyRecover.__proto__||Object.getPrototypeOf(MyRecover)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=710,e.iH=405,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.lockgoods=null,e.btn_close=new o.default(u.default.xani_nui2),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_recover=new o.default(u.default.xani_nui2),e.btn_recover.InitButton("按钮1_110"),e.btn_recover.sName="出售",e.btn_recover.Move(e.iX+e.iW-110-30,e.iY+e.iH-52-30,110,52),e.bCanRecover=!1,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MyRecover,r.default),a(MyRecover,[{key:"Draw",value:function(){var t,e;h.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),this.btn_close.Draw(),d.default.new_DrawGoods(this.iX+30,this.iY+30,c.default.gi().goods[2],null,null),null!=this.lockgoods&&this.lockgoods.iGid>0&&(d.default.new_DrawRect(this.iX+30,this.iY+30,c.default.gi().goods[2],this.lockgoods,0),t=u.default.de_goods.intValue(this.lockgoods.iTid,0,9),this.bCanRecover=!1,t<0||t>40?this.pm3f.DrawTextEx(this.iX+430+30+20,this.iY+35,"本店不收此物品",4278206039,30,101,1,1,0,0,0):(this.bCanRecover=!0,e=0,0==t?e=50:10==t?e=500:20==t?e=2e3:30==t?e=4500:40==t&&(e=7e3),this.pm3f.DrawTextEx(this.iX+430+30+20,this.iY+35,"回收价格 "+e,4278206039,30,101,1,1,0,0,0)),this.btn_recover.Draw()),d.default.bShowDetail()&&d.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){return this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0):null!=this.lockgoods&&this.btn_recover.ProcTouch(t,e,i)?(this.btn_recover.bCheck()&&(l.default.gi().s_RecoverGoods(this.lockgoods.iGid),this.lockgoods=null,d.default.new_LockGoods(e,i,this.iX+30,this.iY+30,c.default.gi().goods[2],t)),!0):(this.lockgoods=d.default.new_LockGoods(e,i,this.iX+30,this.iY+30,c.default.gi().goods[2],t),d.default.NoMove(),3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||f.default.gi().PopStat(1),!1)}}]),MyRecover}();i.default=m},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],259:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../../engine/control/XInput")),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/FrameMessage")),g=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods")),p=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/MyPets"));_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/Pets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var b=function SellGoods(){_classCallCheck(this,SellGoods),this.iGid=0,this.gp=null},D=function SellPets(){_classCallCheck(this,SellPets),this.iPid=0},y=function(){function MySell(){var t;if(_classCallCheck(this,MySell),this.bSelling=!1,null==MySell.sg){for(MySell.sg=new Array(20),MySell.sp=new Array(8),t=0;t<20;t++)MySell.sg[t]=new b;for(t=0;t<8;t++)MySell.sp[t]=new D}this.iW=900,this.iH=580,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.btn_close=new r.default(l.default.xani_nui2),this.btn_close.InitButton("关闭按钮"),this.btn_changename=new r.default(l.default.xani_nui2),this.btn_changename.InitButton("宠物改名按钮"),this.in_name=new o.default(l.default.xani_ui),this.in_name.Move(n.default.SCRW,n.default.SCRH,10,10),this.in_name.sDetail="",this.in_name.iLength=8,this.bEditingName=!1,this.btn_putup=new r.default(l.default.xani_nui2),this.btn_putup.InitButton("按钮1_110"),this.btn_putup.sName="上架",this.btn_record=new r.default(l.default.xani_nui2),this.btn_record.InitButton("按钮1_110"),this.btn_record.sName="记录",this.btn_exit=new r.default(l.default.xani_nui2),this.btn_exit.InitButton("按钮1_110"),this.btn_exit.sName="收摊"}return a(MySell,[{key:"Draw",value:function(){var t,e,i,a,s,r;if(this.bShow){for(this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,d.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"摆","摊"),this.btn_close.Move(this.iX+this.iW-35,this.iY-25,60,60),this.btn_close.Draw(),d.default.new_framein(this.iX+30,this.iY+30,this.iW-60,this.iH-60),d.default.new_numberframe(this.iX+30+20,this.iY+30+30-5,700,this.sSellName),this.btn_changename.Move(this.iX+30+20+700,this.iY+30+20,60,60),this.btn_changename.Draw(),this.bEditingName&&(this.in_name.onscr(),this.sSellName=this.in_name.sDetail,this.in_name.bFinished&&(this.bEditingName=!1,this.in_name.bFinished=!1,f.default.gi().s_StartSell(6,0,0,this.sSellName))),s=this.iX+30+20,r=this.iY+30+30+40+30,l.default.xani_nui3.DrawAnima(s,r,"摊位分类框",0),u.default.gi().DrawTextEx(s+52.5,r+16.5,"物品",4294967295,25,101,1,1,0,-2,-2),r+=43,this.iGx=s,this.iGy=r,g.default.new_DrawGoods(s,r,_.default.gi().goods[2],null,null),t=0;t<20;t++)MySell.sg[t].iGid>0&&g.default.new_DrawRect(s,r,_.default.gi().goods[2],MySell.sg[t].gp,1);for(s=this.iX+30+20+430+20,r=this.iY+30+30+40+30,l.default.xani_nui3.DrawAnima(s,r,"摊位分类框",0),u.default.gi().DrawTextEx(s+52.5,r+16.5,"宠物",4294967295,25,101,1,1,0,-2,-2),r+=43,this.iPx=s,this.iPy=r,d.default.new_frameon(s,r,345,175,0),t=0;t<8;t++)if(i=s+5+t%4*85,a=r+5+t/4*85,l.default.xani_nui3.DrawAnima(i,a,"基本头像框",0),!(t>=p.default.mp.iPetCount))for(l.default.xani_head.DrawAnima_aa(i+3,a+3,l.default.de_pet.strValue(p.default.mp.pets[t].iTid,0,1),0),p.default.mp.pets[t].iFlag/100%10!=0&&u.default.gi().DrawText_2(i-6+3,a+80+3,"绑",4285267956,26,101,1,1,0,0,-3,4,4278190080),this.lockpet==p.default.mp.pets[t]&&(l.default.xani_nui3.DrawAnimaEx(i,a,"物品选中框",0,101,1,1,0,0,0),d.default.new_TagText2(this.iPx,this.iPy+175+15,150,"名称",p.default.mp.pets[t].sName)),e=0;e<8;e++)MySell.sp[e].iPid>0&&p.default.mp.pets[t].iPid==MySell.sp[e].iPid&&(l.default.xani_nui3.DrawAnimaEx(i,a,"物品选中框",1,101,1,1,0,0,0),this.lockpet==p.default.mp.pets[t]&&(0==MySell.sp[e].iPrice?d.default.new_TagText2(this.iPx,this.iPy+175+15+52,150,"价格","观赏"):d.default.new_TagText2(this.iPx,this.iPy+175+15+52,150,"单价",""+MySell.sp[e].iPrice)));if(this.btn_putup.Move(this.iPx+345-110,this.iPy+175+15,110,52),this.btn_record.Move(this.iPx,this.iPy+175+15+104,110,52),this.btn_exit.Move(this.iPx+345-110,this.iPy+175+15+104,110,52),null!=this.lockgoods){for(g.default.new_DrawRect(this.iGx,this.iGy,_.default.gi().goods[2],this.lockgoods,0),d.default.new_TagText2(this.iPx,this.iPy+175+15,150,"名称",l.default.de_goods.strValue(this.lockgoods.iTid,-1,4)),this.bPutUp=!0,t=0;t<20;t++)0!=MySell.sg[t].iGid&&MySell.sg[t].iGid==this.lockgoods.iGid&&(0==MySell.sg[t].iPrice?d.default.new_TagText2(this.iPx,this.iPy+175+15+52,150,"价格","观赏"):d.default.new_TagText2(this.iPx,this.iPy+175+15+52,150,"单价",""+MySell.sg[t].iPrice),this.bPutUp=!1);this.bPutUp?this.btn_putup.sName="上架":this.btn_putup.sName="下架",this.btn_putup.Draw()}if(null!=this.lockpet){for(this.bPutUp=!0,t=0;t<p.default.mp.iPetCount;t++)0!=MySell.sp[t].iPid&&MySell.sp[t].iPid==this.lockpet.iPid&&(this.bPutUp=!1);this.bPutUp?this.btn_putup.sName="上架":this.btn_putup.sName="下架",this.btn_putup.Draw()}this.btn_exit.Draw(),this.btn_record.Draw(),g.default.bShowDetail()&&g.default.new_DrawDetail(null,-1,-1,0)}}},{key:"ProcTouch",value:function(t,e,i){var a,r,o;if(null!=this.lockgoods&&this.btn_putup.ProcTouch(t,e,i)){if(this.btn_putup.bCheck())if(this.bPutUp){if(0!=this.lockgoods.iAtts[7])return c.default.easymsg.AddMessage("绑定物品不可上架"),!0;h.default.gi().PushStat(h.default.GS_SHELVESFRAME),this.lockpet=null}else f.default.gi().s_StartSell(2,this.lockgoods.iGid,0,"");return!0}if(null!=this.lockpet&&this.btn_putup.ProcTouch(t,e,i))return this.btn_putup.bCheck()&&(this.bPutUp?this.lockpet.iFlag/100%10==0?(h.default.gi().PushStat(h.default.GS_SHELVESFRAME),this.lockgoods=null):c.default.easymsg.AddMessage("绑定宠物不能上架"):f.default.gi().s_StartSell(4,this.lockpet.iPid,0,"")),!0;for(this.lockgoods=g.default.new_LockGoods(e,i,this.iGx,this.iGy,_.default.gi().goods[2],t),g.default.NoMove(),3==t&&null!=this.lockgoods&&g.default.bCanProc(),this.lockpet=null,a=0;a<p.default.mp.iPetCount;a++)if(r=this.iPx+5+a%4*85,o=this.iPy+5+a/4*85,s.default.bInRect(e,i,r,o,80,80)){this.lockpet=p.default.mp.pets[a];break}if(this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&(this.bShow=!1),!0;if(this.btn_exit.ProcTouch(t,e,i))return this.btn_exit.bCheck()&&(this.bSelling=!1,f.default.gi().s_StartSell(5,0,0,"")),!0;if(this.btn_changename.ProcTouch(t,e,i)&&this.btn_changename.bCheck()&&(this.in_name.Move(this.btn_changename.iX,this.btn_changename.iY,this.btn_changename.iW,this.btn_changename.iH),this.in_name.sDetail=this.sSellName,this.in_name.Move(n.default.SCRW,n.default.SCRH,10,10),this.in_name.ProcTouch(3,n.default.SCRW+1,n.default.SCRH+1),this.bEditingName=!0),this.btn_record.ProcTouch(t,e,i)){if(this.btn_record.bCheck()){var u="";for(a=0;a<10;a++)u+=MySell.sSellRecord[a],a<9&&(u+="#e");m.default.fm.Open(u)}return!0}return!1}},{key:"IndexSell",value:function(t){var e,i;for(e=0;e<20;e++)MySell.sg[e].iGid=0;for(e=0;e<8;e++)MySell.sp[e].iPid=0;for(e=0;e<20&&0!=(i=t.GetNextByte());e++)for(MySell.sg[e].iGid=t.GetNextInt(),MySell.sg[e].iPrice=t.GetNextInt(),MySell.sg[e].iTid=t.GetNextInt(),MySell.sg[e].gp=null,i=0;i<20;i++)_.default.gi().goods[2][i].iGid>0&&_.default.gi().goods[2][i].iGid==MySell.sg[e].iGid&&(MySell.sg[e].gp=_.default.gi().goods[2][i]);for(e=0;e<8&&0!=(i=t.GetNextByte());e++)MySell.sp[e].iPid=t.GetNextInt(),MySell.sp[e].iPrice=t.GetNextInt(),MySell.sp[e].iTid=t.GetNextInt()}},{key:"InitSell",value:function(t){var e;for(this.sSellName=t.GetNextString(),this.bSelling=!0,e=0;e<20;e++)MySell.sg[e].iGid>0&&(null==MySell.sg[e].gp?MySell.sg[e].iGid=0:MySell.sg[e].gp.iGid!=MySell.sg[e].iGid?MySell.sg[e].iGid=0:2!=MySell.sg[e].gp.iOid?MySell.sg[e].iGid=0:MySell.sg[e].gp.iTid>=101&&MySell.sg[e].gp.iTid<=105?MySell.sg[e].iGid=0:f.default.gi().s_StartSell(1,MySell.sg[e].iGid,MySell.sg[e].iPrice,""));for(e=0;e<8;e++)MySell.sp[e].iPid>0&&(null==p.default.mp.FindPet(MySell.sp[e].iPid)?MySell.sp[e].iPid=0:f.default.gi().s_StartSell(3,MySell.sp[e].iPid,MySell.sp[e].iPrice,""));this.bShow=!0,this.lockgoods=null}},{key:"AddSellRecord",value:function(t){var e;for(e=9;e>0;e--)MySell.sSellRecord[e]=MySell.sSellRecord[e-1];MySell.sSellRecord[e]=t.GetNextString()}}]),MySell}();i.default=y,y.sSellRecord=["","","","","","","","","",""],y.ms=null,y.gi=function(){return null==y.ms&&(y.ms=new y),y.ms}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/M3DFast":28,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../engtst/mgm/gameing/me/pet/MyPets":245,"../../../../../engtst/mgm/gameing/me/pet/Pets":247}],260:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),s=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),r=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var o=function(){function NpcShop(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NpcShop),this.price=new Int32Array(20),this.goods=new Array(20),t=0;t<20;t++)this.goods[t]=new r.default}return a(NpcShop,[{key:"Open",value:function(){s.default.gi().iXStat!=s.default.GS_SHOPFRAME&&s.default.gi().PushStat(s.default.GS_SHOPFRAME)}},{key:"Draw",value:function(){}},{key:"ProcTouch",value:function(){return!1}},{key:"FreshGoods",value:function(t){var e,i,a,s;for(i=0,this.iShopId=t.GetNextInt(),this.sShopName=t.GetNextString(),e=0;e<20;e++)this.goods[e].iGid=-1;for(;-1!=(e=t.GetNextInt());)this.goods[i].iGid=10,this.goods[i].iTid=e,this.goods[i].iCount=t.GetNextInt(),this.goods[i].iPos=i,this.price[i]=t.GetNextInt(),this.goods[i].iAtts[0]=t.GetNextInt(),n.default.xani_ngoods.InitAnimaWithName(n.default.de_goods.strValue(e,0,10),this.goods[i].aa),(a=n.default.de_goods.intValue(e,0,16))>=0&&(a=n.default.de_goods.intValue(e,0,9))>=0&&a<=100&&(s=100+5*a,this.goods[i].iAtts[5]=1e5*s+20*s),i++;this.iSGCount=i,this.iUseType=t.GetNextInt(),NpcShop._USETYPE=t.GetNextString(),this.iUseType>=0&&this.iUseType<=5&&this.Open()}}]),NpcShop}();i.default=o,o._USETYPE,o.ns=new o},{"../../../../../engine/PackageTools":9,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/gameing/me/goods/Goods":217}],261:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/TouchManager")),_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../../engine/control/XInputNumber")),l=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/format/FormatString")),_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"))),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),g=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),_=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods")),_interopRequireDefault(t("./NpcShop")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function NpcShopFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NpcShopFrame);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(NpcShopFrame.__proto__||Object.getPrototypeOf(NpcShopFrame)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=710,e.iH=405,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.lockgoods=null,e.btn_close=new o.default(l.default.xani_nui2),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_buy=new o.default(l.default.xani_nui2),e.btn_buy.InitButton("按钮1_110"),e.btn_buy.sName="购买",e.btn_buy.Move(e.iX+e.iW-110-30,e.iY+e.iH-52-30,110,52),e.in_count=new u.default(l.default.xani_nui3),e.in_count.iNumber=1,e.cityshop=[3,1,4,2,5,9,6,10,7,11],e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(NpcShopFrame,r.default),a(NpcShopFrame,[{key:"Draw",value:function(){d.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),this.btn_close.Draw(),this.pm3f.DrawTextEx(this.iX+430+30+15,this.iY+35,_.default.ns.sShopName,4278206039,30,101,1,1,0,0,0),g.default.new_DrawGoods(this.iX+30,this.iY+30,_.default.ns.goods,null,null),null!=this.lockgoods&&(g.default.new_DrawRect(this.iX+30,this.iY+30,_.default.ns.goods,this.lockgoods,0),this.pm3f.DrawTextEx(this.iX+430+30+15,this.iY+90+0,"名称 "+l.default.de_goods.strValue(this.lockgoods.iTid,0,4),4278206039,25,101,1,1,0,0,0),this.pm3f.DrawTextEx(this.iX+430+30+15,this.iY+90+30,"单价 "+_.default.ns.price[this.lockgoods.iPos]+_.default._USETYPE,4278206039,25,101,1,1,0,0,0),this.pm3f.DrawTextEx(this.iX+430+30+15,this.iY+80+90,"数量 ",4278206039,25,101,1,1,0,0,0),this.in_count.Move(this.iX+430+30+15+60,this.iY+80+90+12.5-26,100),this.in_count.Draw(),this.pm3f.DrawTextEx(this.iX+430+30+15,this.iY+70+150,"总价 "+_.default.ns.price[this.lockgoods.iPos]*this.in_count.iNumber+_.default._USETYPE,4278206039,25,101,1,1,0,0,0),0==_.default.ns.iUseType?(this.pm3f.DrawTextEx(this.iX+430+30+15,this.iY+70+180,"现金 "+m.default.me.rbs.iMoney,4278206039,25,101,1,1,0,0,0),m.default.me.rbs.iLev<40&&this.bCityShop(_.default.ns.iShopId)&&this.pm3f.DrawTextEx(this.iX+430+30+15,this.iY+70+210,"储备 "+m.default.me.rbs.iReserve,4278206039,25,101,1,1,0,0,0)):1==_.default.ns.iUseType?this.pm3f.DrawTextEx(this.iX+430+30+15,this.iY+70+180,"现有 "+m.default.me.iFlag[48]/1e3+_.default._USETYPE,4278206039,25,101,1,1,0,0,0):2==_.default.ns.iUseType&&this.pm3f.DrawTextEx(this.iX+430+30+15,this.iY+70+180,"现有 "+m.default.me.rbs.iInGot+_.default._USETYPE,4278206039,25,101,1,1,0,0,0)),this.btn_buy.Draw(),g.default.bShowDetail()&&g.default.new_DrawDetail(null,-1,-1,0)}},{key:"bCityShop",value:function(t){for(var e=0;e<this.cityshop.length;e++)if(this.cityshop[e]==t)return!0;return!1}},{key:"ProcTouch",value:function(t,e,i){if(null!=this.lockgoods){if(this.in_count.ProcTouch(t,e,i))return!0;if(this.btn_buy.ProcTouch(t,e,i)){if(this.btn_buy.bCheck())if(this.in_count.iNumber<=0)c.default.easymsg.AddMessage("购买数量不能为0");else if(this.in_count.iNumber>this.lockgoods.iCount)c.default.easymsg.AddMessage("购买数量超过上限");else if(0==_.default.ns.iUseType){var a=m.default.me.rbs.iMoney;m.default.me.rbs.iLev<40&&this.bCityShop(_.default.ns.iShopId)&&(a+=m.default.me.rbs.iReserve),a<_.default.ns.price[this.lockgoods.iPos]*this.in_count.iNumber?c.default.easymsg.AddMessage("现金不足"):f.default.gi().s_NpcShopBuy(_.default.ns.iShopId,this.lockgoods.iTid,this.in_count.iNumber)}else f.default.gi().s_NpcShopBuy(_.default.ns.iShopId,this.lockgoods.iTid,this.in_count.iNumber);return!0}}var n;return n=g.default.new_LockGoods(e,i,this.iX+30,this.iY+30,_.default.ns.goods,t),g.default.NoMove(),3==t&&null!=n?this._lockgoods(n):null==n&&(this.lockgoods=null),this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&h.default.gi().PopStat(1),!0):(3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||h.default.gi().PopStat(1),!1)}},{key:"_lockgoods",value:function(t){t!=this.lockgoods&&(this.in_count.iNumber=1),this.lockgoods=t;var e=m.default.me.rbs.iMoney/_.default.ns.price[this.lockgoods.iPos];e<1&&(e=1),e>this.lockgoods.iCount&&(e=this.lockgoods.iCount),this.in_count.MinMax(1,e)}}]),NpcShopFrame}();i.default=p},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/TouchManager":10,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInputNumber":19,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"./NpcShop":260}],262:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../../engine/control/XCheckBox")),u=(_interopRequireDefault(t("../../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../../engine/control/XInputNumber"))),l=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"));_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function ShelvesFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ShelvesFrame);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ShelvesFrame.__proto__||Object.getPrototypeOf(ShelvesFrame)).call(this));return e.iW=360,e.iH=280,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_shelves=new r.default(f.default.xani_nui3),e.btn_shelves.InitButton("内框按钮"),e.btn_shelves.sName="上架",e.btn_shelves.Move(e.iX+20,e.iY+e.iH-55-20,98,55),e.btn_cancel=new r.default(f.default.xani_nui3),e.btn_cancel.InitButton("内框按钮"),e.btn_cancel.sName="取消",e.btn_cancel.Move(e.iX+e.iW-98-20,e.iY+e.iH-55-20,98,55),e.chk_watch=new o.default(f.default.xani_nui3),e.chk_watch.InitBox("统一勾选"),e.chk_watch.bTrue=!1,e.chk_watch.Move(e.iX+10,e.iY+130,50,50),e.in_number=new u.default(f.default.xani_nui3),e.in_number.MinMax(0,99999999),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ShelvesFrame,s.default),a(ShelvesFrame,[{key:"Draw",value:function(){var t;c.default.new_framewatch(this.iX,this.iY,this.iW,this.iH),t=this.iY+20,null!=MySell.gi().lockgoods?l.default.gi().DrawTextEx(this.iX+20,t,"物品："+f.default.de_goods.strValue(MySell.gi().lockgoods.iTid,-1,4),4294967295,30,100,1,1,0,0,0):null!=MySell.gi().lockpet&&l.default.gi().DrawTextEx(this.iX+20,t,"宠物："+MySell.gi().lockpet.sName,4294967295,30,100,1,1,0,0,0),t+=60,l.default.gi().DrawTextEx(this.iX+20,t,"上架价格:",4294967295,30,100,1,1,0,0,0),this.in_number.Move(this.iX+20+130,t-10,this.iW-170),this.in_number.Draw(),t+=70,l.default.gi().DrawTextEx(this.iX+80,t,"观赏",4294967295,30,100,1,1,0,0,0),this.chk_watch.Move(this.iX+20,t-10,50,50),this.chk_watch.Draw(),this.btn_shelves.Draw(),this.btn_cancel.Draw()}},{key:"ProcTouch",value:function(t,e,i){return this.btn_shelves.ProcTouch(t,e,i)?(this.btn_shelves.bCheck()&&(this.chk_watch.bTrue?(null!=MySell.gi().lockgoods&&h.default.gi().s_StartSell(1,MySell.gi().lockgoods.iGid,0,""),null!=MySell.gi().lockpet&&h.default.gi().s_StartSell(3,MySell.gi().lockpet.iPid,0,""),d.default.gi().PopStat(1)):this.in_number.iNumber>0?(null!=MySell.gi().lockgoods&&h.default.gi().s_StartSell(1,MySell.gi().lockgoods.iGid,this.in_number.iNumber,""),null!=MySell.gi().lockpet&&h.default.gi().s_StartSell(3,MySell.gi().lockpet.iPid,this.in_number.iNumber,""),d.default.gi().PopStat(1)):m.default.easymsg.AddMessage("请先输入上架价格")),!0):this.btn_cancel.ProcTouch(t,e,i)?(this.btn_cancel.bCheck()&&d.default.gi().PopStat(1),!0):(this.in_number.ProcTouch(t,e,i),this.chk_watch.ProcTouch(t,e,i),!1)}}]),ShelvesFrame}();i.default=g},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XCheckBox":17,"../../../../../engine/control/XInput":18,"../../../../../engine/control/XInputNumber":19,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/GmMe":211}],263:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../../engine/control/XButton")),u=_interopRequireDefault(t("../../../../../../engine/control/XButtonEx1")),l=_interopRequireDefault(t("../../../../../../engine/control/XInput")),f=(_interopRequireDefault(t("../../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/format/FormatString")),g=_interopRequireDefault(t("../../../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function CreateShop(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,CreateShop);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(CreateShop.__proto__||Object.getPrototypeOf(CreateShop)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=400,e.iH=400,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.in_shopname=new l.default(f.default.xani_frame),e.in_shopname.Move(e.iX+10,e.iY+100,e.iW-20,60),e.in_shopname.bHideText=!0,e.btn_pet=new o.default(f.default.xani_button),e.btn_pet.InitButton("统一大按钮3"),e.btn_pet.Move(e.iX+150,e.iY+170,110,50),e.btn_pet.sName="宠物店",e.btn_goods=new o.default(f.default.xani_button),e.btn_goods.InitButton("统一大按钮3"),e.btn_goods.Move(e.iX+150+120,e.iY+170,110,50),e.btn_goods.sName="物品店",e.btn_create=new u.default(f.default.xani_ui3),e.btn_create.Move(e.iX+e.iW-117-20,e.iY+e.iH-50-15,117,40),e.btn_create.InitButton("统一按钮1"),e.btn_create.sName="创建",e.btn_cancel=new u.default(f.default.xani_ui3),e.btn_cancel.Move(e.iX+20,e.iY+e.iH-50-15,117,40),e.btn_cancel.InitButton("统一按钮1"),e.btn_cancel.sName="取消",e.ipog=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(CreateShop,r.default),a(CreateShop,[{key:"Draw",value:function(){c.default.ui3_DefineFrame(this.iX,this.iY,this.iW,this.iH),this.pm3f.DrawText_2(this.iX+this.iW/2,this.iY+15,"创建店铺",4294952960,40,101,1,1,0,-2,0,2,4278190080),this.pm3f.DrawTextEx(this.in_shopname.iX,this.in_shopname.iY-30,"输入店铺名称：",4278190080,30,101,1,1,0,0,0),c.default.Frame1_BR(this.in_shopname.iX,this.in_shopname.iY,this.in_shopname.iW,this.in_shopname.iH),m.default.gi().Format(this.in_shopname.sDetail,this.in_shopname.iW-10,30),m.default.gi().Draw(this.in_shopname.iX+15,this.in_shopname.iY+15),this.pm3f.DrawTextEx(this.in_shopname.iX,this.iY+180,"店铺类型：",4278190080,30,101,1,1,0,0,0),0==this.ipog?(this.btn_pet.bMouseIn=!0,this.btn_pet.bMouseDown=!0):(this.btn_goods.bMouseIn=!0,this.btn_goods.bMouseDown=!0),this.btn_pet.Draw(),this.btn_goods.Draw(),m.default.gi().Format("#c000000说明：新建店铺需要缴纳150万现金#e营业状态下每个柜台每天收取5万维护费#e休息状态下每个柜台每天收取2万维护费#e交易成功，收取成交价5%的交易税",this.iW-40,20),m.default.gi().Draw(this.iX+20,this.iY+230),this.btn_create.Draw(),this.btn_cancel.Draw(),this.in_shopname.onscr()}},{key:"ProcTouch",value:function(t,e,i){if(this.in_shopname.ProcTouch(t,e,i),this.btn_pet.ProcTouch(t,e,i)&&this.btn_pet.bCheck()&&(this.ipog=0),this.btn_goods.ProcTouch(t,e,i)&&this.btn_goods.bCheck()&&(this.ipog=1),this.btn_create.ProcTouch(t,e,i)){if(this.btn_create.bCheck()){var a=this.in_shopname.sDetail.getBytes("GBK");if(a.length<4||a.length>16)return g.default.easymsg.AddMessage("店铺名称2-8个字"),!0;h.default.gi().s_CreateShop(this.in_shopname.sDetail,this.ipog),d.default.gi().PopStat(1)}return!0}return this.btn_cancel.ProcTouch(t,e,i)?(this.btn_cancel.bCheck()&&d.default.gi().PopStat(1),!0):!!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)}}]),CreateShop}();i.default=_,_.Open=function(){d.default.gi().PushStat(d.default.GS_CREATESHOP)}},{"../../../../../../config/GmConfig":5,"../../../../../../config/XDefine":7,"../../../../../../engine/BaseClass":8,"../../../../../../engine/control/XButton":14,"../../../../../../engine/control/XButtonEx1":15,"../../../../../../engine/control/XInput":18,"../../../../../../engine/graphics/M3DFast":28,"../../../../../../engine/graphics/XAnima":30,"../../../../../../engtst/mgm/GmPlay":65,"../../../../../../engtst/mgm/GmProtocol":66,"../../../../../../engtst/mgm/XStat":70,"../../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../../engtst/mgm/frame/format/FormatString":81,"../../../../../../engtst/mgm/frame/message/EasyMessage":86}],264:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../config/GameData")),_interopRequireDefault(t("../../../../../config/GmConfig"))),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),u=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/UIList")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),m=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/gov/GovFrame")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var g=function _BUYDRAWING(){_classCallCheck(this,_BUYDRAWING)},_=function(t){function shop_BuyDrawing(){return _classCallCheck(this,shop_BuyDrawing),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(shop_BuyDrawing.__proto__||Object.getPrototypeOf(shop_BuyDrawing)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(shop_BuyDrawing,s.default),a(shop_BuyDrawing,[{key:"_getpage",value:function(t){this.iPage=t.GetNextByte(),this.iCount=t.GetNextInt(),this.iCount>this.MAXBDS&&(this.iCount=this.MAXBDS);for(var e=0;e<this.iCount;e++)this.bds[e].iLev=t.GetNextByte(),this.bds[e].iType=t.GetNextByte(),this.bds[e].iPrice=t.GetNextInt()}},{key:"shop_BuyDrawing",value:function(t){this.iW=660,this.iH=660,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.bds=new Array(this.MAXBDS);for(var e=0;e<this.MAXBDS;e++)this.bds[e]=new g;this.list_drawing=new d.default(0,3,this.iW-100,410),this.list_drawing.SetTitle(0,"类型",160,!1),this.list_drawing.SetTitle(1,"等级",100,!0),this.list_drawing.SetTitle(2,"价格",260,!0),this.btn_close=new r.default(u.default.xani_nui2),this.btn_close.InitButton("关闭按钮"),this.btn_close.Move(this.iX+this.iW-35,this.iY-25,60,60),this.btn_page=new Array(8);for(e=0;e<6;e++)this.btn_page[e]=new r.default(u.default.xani_button),this.btn_page[e].InitButton("频道选择"),this.btn_page[e].sName=10*(e+3)+"";this.btn_buy=new r.default(u.default.xani_button),this.btn_buy.InitButton("普通按钮140_55"),this.btn_buy.sName="购买"}},{key:"Draw",value:function(){var t;for(h.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"图","纸","商","店"),this.btn_close.Draw(),h.default.new_framein(this.iX+30,this.iY+30,this.iW-60,this.iH-60),o.default.gi().DrawTextEx(this.iX+30+20,this.iY+30+30+20,"选择等级",4294967295,30,101,1,1,0,0,-2),t=0;t<6;t++)this.iPage==t+3&&(this.btn_page[t].bMouseDown=!0),this.btn_page[t].Move(this.iX+30+20+140+70*t,this.iY+30+20,60,60),this.btn_page[t].Draw();for(this.list_drawing.BeginDraw(this.iX+30+20,this.iY+30+20+60+20),t=0;t<this.iCount;t++)this.list_drawing.DrawUnit(0,t,shop_BuyDrawing._TYPE[t]),this.list_drawing.DrawUnit(1,t,10*this.bds[t].iLev+"级"),this.list_drawing.DrawUnit(2,t,this.bds[t].iPrice+"铜币");this.list_drawing.FinishDraw(),o.default.gi().DrawTextEx(this.iX+30+20,this.iY+this.iH-30-20-30,"现金："+m.default.me.rbs.iMoney,4294967295,30,101,1,1,0,0,-2),this.btn_buy.Move(this.iX+this.iW-30-20-140,this.iY+this.iH-30-20-55,140,55),this.btn_buy.Draw()}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.list_drawing.ProcTouch(t,e,i))return!0;for(a=0;a<6;a++)this.btn_page[a].ProcTouch(t,e,i)&&this.btn_page[a].bCheck()&&this.iPage!=a+3&&(this.iPage=a+3,this.iCount=0,shop_BuyDrawing.GetPage(a+3));return this.btn_buy.ProcTouch(t,e,i)?(this.btn_buy.bCheck()&&(this.list_drawing.iLockPoint<0?c.default.easymsg.AddMessage("请先选中行"):m.default.me.rbs.iMoney<this.bds[this.list_drawing.iLockPoint].iPrice?c.default.easymsg.AddMessage("现金不足"):l.default.gi().s_SeverEvent(34,1,this.iPage,this.bds[this.list_drawing.iLockPoint].iType,this.bds[this.list_drawing.iLockPoint].iPrice)),!0):(this.btn_close.ProcTouch(t,e,i)&&this.btn_close.bCheck()&&f.default.gi().PopStat(1),!1)}}]),shop_BuyDrawing}();i.default=_,_.GetPage=function(t){l.default.gi().s_SeverEvent(34,0,t,0,0)},_.Open=function(t){var e=f.default.gi().FindStat(f.default.GS_SHOPBUYDRAWING);null==e&&(e=f.default.gi().PushStat(f.default.GS_SHOPBUYDRAWING)),e._getpage(t)},_._TYPE=["头盔","项链","剑","刀","枪","男衣","女衣","腰带","鞋子"]},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/UIList":80,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/gov/GovFrame":156,"../../../../../engtst/mgm/gameing/me/GmMe":211}],265:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),u=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),d=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/UIList")),_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage"))),c=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function shop_PeakFight(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,shop_PeakFight);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(shop_PeakFight.__proto__||Object.getPrototypeOf(shop_PeakFight)).call(this));for(i.goods=new Array(20),i.iPrice=new Int32Array(20),e=0;e<20;e++)i.goods[e]=new m.default,i.iPrice[e]=0;return i.iW=800,i.iH=450,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new r.default(u.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_close.Move(i.iX+i.iW-35,i.iY-25,60,60),i.btn_buy=new r.default(u.default.xani_button),i.btn_buy.InitButton("普通按钮140_55"),i.btn_buy.sName="购买",i.lockgoods=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(shop_PeakFight,s.default),a(shop_PeakFight,[{key:"_open",value:function(t){this.iCount=t.GetNextInt(),this.iCount>20&&(this.iCount=20);for(var e=0;e<20;e++)e<this.iCount?(this.goods[e].iTid=t.GetNextInt(),this.goods[e].iGid=1,this.goods[e].iCount=1,this.iPrice[e]=t.GetNextInt(),u.default.xani_ngoods.InitAnimaWithName(u.default.de_goods.strValue(this.goods[e].iTid,0,10),this.goods[e].aa)):(this.goods[e].iGid=-1,this.iPrice[e]=0),this.goods[e].iPos=e}},{key:"Draw",value:function(){h.default.new_baseframe4(this.iX,this.iY,this.iW,this.iH,"积","分","商","店"),this.btn_close.Draw(),h.default.new_framein(this.iX+30,this.iY+30,this.iW-60,this.iH-60),g.default.new_DrawGoods(this.iX+50,this.iY+50,this.goods,null,null),null!=this.lockgoods&&(g.default.new_DrawRect(this.iX+50,this.iY+50,this.goods,this.lockgoods,0),o.default.gi().DrawTextEx(this.iX+430+50+15,this.iY+90+0,"名称 "+u.default.de_goods.strValue(this.lockgoods.iTid,0,4),4278206039,25,101,1,1,0,0,0),o.default.gi().DrawTextEx(this.iX+430+50+15,this.iY+90+50,"价格 "+this.iPrice[this.lockgoods.iPos]+"积分",4278206039,25,101,1,1,0,0,0)),o.default.gi().DrawTextEx(this.iX+430+50+15,this.iY+90+150,"可用积分："+c.default.me.iFlagExt[23],4294967040,25,101,1,1,0,0,-2),this.btn_buy.Move(this.iX+this.iW-30-20-140,this.iY+this.iH-30-20-55,140,55),this.btn_buy.Draw(),g.default.bShowDetail()&&g.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){return this.btn_buy.ProcTouch(t,e,i)?(this.btn_buy.bCheck()&&(null==this.lockgoods?d.default.easymsg.AddMessage("请先选中物品"):c.default.me.iFlagExt[23]<this.iPrice[this.lockgoods.iPos]?d.default.easymsg.AddMessage("积分不足"):l.default.gi().s_SeverEvent(35,1,this.lockgoods.iPos,this.lockgoods.iTid,this.iPrice[this.lockgoods.iPos])),!0):(a=g.default.new_LockGoods(e,i,this.iX+50,this.iY+50,this.goods,t),g.default.NoMove(),3==t&&null!=a?this.lockgoods=a:null==a&&(this.lockgoods=null),this.btn_close.ProcTouch(t,e,i)&&this.btn_close.bCheck()&&f.default.gi().PopStat(1),!1);var a}}]),shop_PeakFight}();i.default=_,_.Open=function(t){var e=f.default.gi().FindStat(f.default.GS_PEAKFIGHTSHOP);null==e&&(e=f.default.gi().PushStat(f.default.GS_PEAKFIGHTSHOP)),e._open(t)}},{"../../../../../config/GmConfig":5,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/UIList":80,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218}],266:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=t("../../../../../engtst/mgm/gameing/me/GmMe"),s=(a=n)&&a.__esModule?a:{default:a};var r=function MyTeam(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyTeam)};i.default=r,r.bAway=function(){var t;for(t=1;t<5;t++)if(r.iTmpTeamRid[t]==s.default.me.iRid&&r.iTeamRid[t]<=0)return!0;return!1},r.bNoTeam=function(){return r.iTmpTeamRid[0]<=0},r.bInTeam=function(){return r.iTmpTeamRid[0]>0},r.bTeamLeader=function(){return r.iTmpTeamRid[0]==s.default.me.iRid},r.bInTmpTeam=function(t){var e;if(r.iTmpTeamRid[0]<=0)return!1;for(e=0;e<5;e++)if(r.iTmpTeamRid[e]==t)return!0;return!1},r.bFullTeam=function(){var t;for(t=0;t<5;t++)if(r.iTeamRid[t]<=0)return!1;return!0},r.iTeamRid=[0,0,0,0,0],r.iTmpTeamRid=[0,0,0,0,0],r.sName=["","","","",""],r.iRas=[0,0,0,0,0],r.iSchoolId=[0,0,0,0,0],r.iLev=[0,0,0,0,0],r.iColor=new Array(5);for(var o=0;o<5;o++)r.iColor[o]=new Int32Array(10);r.iWeapTid=[0,0,0,0,0],r.sMapName=["","","","",""],r.iTeamTarget=0,r.iLev1=0,r.iLev2=100,r.bLeaderAutoTeaming=!1,r.bSingleAutoTeaming=!1},{"../../../../../engtst/mgm/gameing/me/GmMe":211}],267:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../map/MapManager")),s=_interopRequireDefault(t("../../../../../config/GameData")),r=_interopRequireDefault(t("../../../../../config/GmConfig")),o=_interopRequireDefault(t("../../../../../config/XDefine")),u=_interopRequireDefault(t("../../../../../engine/BaseClass")),l=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton"))),f=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),h=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),d=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),c=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),m=_interopRequireDefault(t("../../../../../engtst/mgm/MyAI")),g=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),_=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/FastButton")),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),y=_interopRequireDefault(t("./MyTeam"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var w=function(){function _TEAMLIST(){_classCallCheck(this,_TEAMLIST),this.btn_apply=new f.default(d.default.xani_nui2),this.btn_apply.InitButton("按钮1_110")}return a(_TEAMLIST,[{key:"swap",value:function(t){var e,i;e=t.iRid,t.iRid=this.iRid,this.iRid=e,i=t.sName,t.sName=this.sName,this.sName=i,e=t.iMapId,t.iMapId=this.iMapId,this.iMapId=e,e=t.iLev,t.iLev=this.iLev,this.iLev=e,e=t.iRaX,t.iRaX=this.iRaX,this.iRaX=e,e=t.iSchool,t.iSchool=this.iSchool,this.iSchool=e,e=t.iTarget,t.iTarget=this.iTarget,this.iTarget=e,e=t.iTargetMap,t.iTargetMap=this.iTargetMap,this.iTargetMap=e,e=t.iCount,t.iCount=this.iCount,this.iCount=e,e=t.iSort,t.iSort=this.iSort,this.iSort=e}}]),_TEAMLIST}(),S=function(t){function TeamCreate(t){_classCallCheck(this,TeamCreate);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(TeamCreate.__proto__||Object.getPrototypeOf(TeamCreate)).call(this));for(i.iW=1020,i.iH=610,i.iX=(r.default.SCRW-i.iW)/2,i.iY=(r.default.SCRH-i.iH)/2,i.btn_close=new f.default(d.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_applyall=new f.default(d.default.xani_nui2),i.btn_applyall.InitButton("按钮1"),i.btn_applyall.sName="一键申请",i.btn_autoteam=new f.default(d.default.xani_nui2),i.btn_autoteam.InitButton("按钮1"),i.btn_autoteam.sName="自动匹配",i.btn_fresh=new f.default(d.default.xani_nui2),i.btn_fresh.InitButton("按钮1"),i.btn_fresh.sName="刷新",i.btn_create=new f.default(d.default.xani_nui2),i.btn_create.InitButton("按钮1"),i.btn_create.sName="创建队伍",i.btncs=new Array(16),i.btn_dest=new Array(16),e=0;e<16;e++)i.btncs[e]=new Int32Array(5),i.btn_dest[e]=new l.default(d.default.xani_nui4);return i.iDestPoint=0,i.iOpenPoint=-1,i.iOffH=0,i.iShowH=440,i.ResetButton(!0),i.bLocked1=!1,i.bLocked2=!1,i.iTlCount=0,i.tl=new Array(64),i.iOffY=0,i.iLockY=-1,i.iTeamPoint=-1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(TeamCreate,u.default),a(TeamCreate,[{key:"ResetButton",value:function(t){var e;this.iDestCount=0,this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="附近",this.btncs[this.iDestCount][0]=0,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=0,this.btncs[this.iDestCount][4]=80,this.iDestCount++,D.default.me.rbs.iLev>=10&&(this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="为民除害",this.btncs[this.iDestCount][0]=1,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=10,this.btncs[this.iDestCount][4]=80,this.iDestCount++),D.default.me.rbs.iLev>=20&&(this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="追捕强盗",this.btncs[this.iDestCount][0]=2,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=20,this.btncs[this.iDestCount][4]=80,this.iDestCount++),D.default.me.rbs.iLev>=30&&(this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="山贼宝图",this.btncs[this.iDestCount][0]=3,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=30,this.btncs[this.iDestCount][4]=80,this.iDestCount++),D.default.me.rbs.iLev>=40&&(this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="挑战嚣张",this.btncs[this.iDestCount][0]=4,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=40,this.btncs[this.iDestCount][4]=80,this.iDestCount++),D.default.me.rbs.iLev>=20&&(this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="封印叔叔",this.btncs[this.iDestCount][0]=5,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=20,this.btncs[this.iDestCount][4]=80,this.iDestCount++),this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="定时活动",this.btncs[this.iDestCount][0]=99,this.btncs[this.iDestCount][1]=0,t&&(this.iOpenPoint=this.iDestCount),e=this.iDestCount,this.iOpenPoint==e?this.btncs[this.iDestCount][2]=1:this.btncs[this.iDestCount][2]=2,this.btncs[this.iDestCount][3]=20,this.btncs[this.iDestCount][4]=80,this.iDestCount++,this.iOpenPoint==e&&D.default.me.rbs.iLev>=30&&(this.btn_dest[this.iDestCount].InitButton("组队类型2"),this.btn_dest[this.iDestCount].sName="门派闯关",this.btncs[this.iDestCount][0]=6,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=30,this.btncs[this.iDestCount][4]=80,this.iDestCount++,this.btn_dest[this.iDestCount].InitButton("组队类型2"),this.btn_dest[this.iDestCount].sName="保卫西阳",this.btncs[this.iDestCount][0]=7,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=30,this.btncs[this.iDestCount][4]=80,this.iDestCount++),this.iDestH=85*this.iDestCount-5+40}},{key:"Draw",value:function(){var t,e,i,a,r,o;for(_.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"组","队"),this.btn_close.Move(this.iX+this.iW-35,this.iY-25,60,60),this.btn_close.Draw(),this.bLocked1||(this.iOffH>0&&(this.iOffH/=2),t=this.iDestH<this.iShowH?this.iDestH:this.iShowH,(e=this.iDestH+this.iOffH)<t&&(this.iOffH+=(t-e)/2)),this.bLocked2||(this.iOffY>0&&(this.iOffY/=2),t=83*this.iTlCount<445?83*this.iTlCount:445,(e=83*this.iTlCount+this.iOffY)<t&&(this.iOffY+=(t-e)/2)),i=this.iX+30,a=this.iY+30,r=270,o=this.iH-60,_.default.new_framein(i,a,r,o),h.default.gi().SetViewClip(i+20,a+20,i+20+230,a+20+this.iShowH),t=0;t<this.iDestCount;t++)this.btn_dest[t].Move(i+20,a+20+85*t+this.iOffH,230,80),t==this.iDestPoint&&(this.btn_dest[t].bMouseIn=!0,this.btn_dest[t].bMouseDown=!0),this.btn_dest[t].Draw(),1==this.btncs[t][2]?d.default.xani_nui4.DrawAnima(this.btn_dest[t].iX,this.btn_dest[t].iY,"组队目录开关",1):2==this.btncs[t][2]&&d.default.xani_nui4.DrawAnima(this.btn_dest[t].iX,this.btn_dest[t].iY,"组队目录开关",0);for(h.default.gi().NoClip(),this.btn_create.Move(i+r/2-80.5,a+o-20-53,161,53),this.btn_create.Draw(),i=this.iX+30+270+20,a=this.iY+30,r=this.iW-30-30-270-20,o=this.iH-60,_.default.new_framein(i,a,r,o),this.btn_applyall.Move(i+20,a+o-20-53,161,53),this.btn_applyall.Draw(),y.default.bSingleAutoTeaming?this.btn_autoteam.sName="匹配中...":this.btn_autoteam.sName="自动匹配",this.btn_autoteam.Move(i+20+161+70,a+o-20-53,161,53),this.btn_autoteam.Draw(),this.btn_fresh.Move(i+20+161+70+161+70,a+o-20-53,161,53),this.btn_fresh.Draw(),this.iTlCount<=0&&h.default.gi().DrawTextEx(i+r/2,a+o/2-40,"当前目标没有队伍",4278206039,35,101,1,1,0,-2,-2),i+=20,a+=20,h.default.gi().SetViewClip(i,a,i+630,a+415+30),a+=this.iOffY,t=0;t<this.iTlCount;t++)d.default.xani_nui4.DrawAnima(i,a,"队伍条",0),d.default.xani_nui4.DrawAnima(i,a,"队伍条",this.tl[t].iCount),d.default.xani_head.DrawAnimaEx(i+8,a+8,"新头像"+this.tl[t].iRaX,0,101,.8,.8,0,0,0),h.default.gi().DrawTextEx(i+8+80,a+20,this.tl[t].sName,4294967295,22,101,1,1,0,0,-2),h.default.gi().DrawTextEx(i+8+80,a+57,s.default.sSchools[this.tl[t].iSchool],4294967295,22,101,1,1,0,0,-2),h.default.gi().DrawTextEx(i+8+80+70,a+57,this.tl[t].iLev+"级",4294967040,22,101,1,1,0,0,-2),h.default.gi().DrawTextEx(i+375,a+27,d.default.de_map.strValue(this.tl[t].iMapId,0,1),4294967295,20,101,1,1,0,-3,-2),this.tl[t].iTarget>0&&this.tl[t].iTarget<5&&h.default.gi().DrawTextEx(i+385,a+27,TeamCreate._TARGET[this.tl[t].iTarget],4294967295,20,101,1,1,0,0,-2),h.default.gi().DrawTextEx(i+390,a+61,this.tl[t].iCount+"/5",4278190080,20,101,1,1,0,-2,-2),this.tl[t].btn_apply.Move(i+500,a+39-26,110,52),n.default.gi().iCurrentMapId==this.tl[t].iMapId?this.tl[t].btn_apply.sName="申请":this.tl[t].btn_apply.sName="前往",this.tl[t].bApplyed?h.default.gi().DrawTextEx(this.tl[t].btn_apply.iX+this.tl[t].btn_apply.iW/2,this.tl[t].btn_apply.iY+this.tl[t].btn_apply.iH/2,"已申请",4278206039,30,101,1,1,0,-2,-2):this.tl[t].btn_apply.Draw(),a+=83;h.default.gi().NoClip()}},{key:"ProcTouch",value:function(t,e,i){if(3==t){if(this.bLocked1)return this.bLocked1=!1,!0;if(this.bLocked2)return this.bLocked2=!1,!0}var a,s,r,u;if(r=this.iX+30,u=this.iY+30,o.default.bInRect(e,i,r,u,270,20+this.iShowH)){for(a=0;a<this.iDestCount;a++)this.btn_dest[a].ProcTouch(t,e,i)&&this.btn_dest[a].bCheck()&&(this.iDestPoint=a,99==this.btncs[a][0]&&(this.iOpenPoint<0?this.iOpenPoint=a:this.iOpenPoint=-1,this.ResetButton(!1)),c.default.gi().s_TeamOperate(12,this.btncs[this.iDestPoint][0],this.btncs[this.iDestPoint][1]));if(1==t&&(this.iLockY=i),2==t&&!this.bLocked1&&((a=this.iLockY-i)<-15||a>15))for(this.bLocked1=!0,a=0;a<this.iDestCount;a++)this.btn_dest[a].bMouseDown=!1}if(2==t&&this.bLocked1)return a=this.iLockY-i,this.iOffH-=a,this.iLockY=i,!0;if(r=this.iX+30+270+20+20,u=this.iY+30+20,o.default.bInRect(e,i,r,u,630,445)){for(a=0;a<this.iTlCount;a++)this.tl[a].bApplyed||this.tl[a].btn_apply.ProcTouch(t,e,i)&&this.tl[a].btn_apply.bCheck()&&(n.default.gi().iCurrentMapId==this.tl[a].iMapId?(c.default.gi().s_TeamOperate(3,this.tl[a].iRid,0),this.tl[a].bApplyed=!0):(m.default.gi().FindMap(this.tl[a].iMapId,-1,-1,!1,!0)&&(TeamCreate.iWaitingApplyMapId=this.tl[a].iMapId,TeamCreate.iWaitingApplyRid=this.tl[a].iRid),g.default.gi().PopStat(1)));1==t&&(this.iLockY=i),2==t&&(this.bLocked2||((a=this.iLockY-i)<-15||a>15)&&(this.bLocked2=!0))}if(2==t&&this.bLocked2)return a=this.iLockY-i,this.iOffY-=a,this.iLockY=i,!0;if(this.btn_create.ProcTouch(t,e,i))return this.btn_create.bCheck()&&(c.default.gi().s_TeamOperate(0,this.btncs[this.iDestPoint][0],this.btncs[this.iDestPoint][1]),g.default.gi().PopStat(1),b.default.gi().iTeamButtonDelay=30),!0;if(this.btn_fresh.ProcTouch(t,e,i))return this.btn_fresh.bCheck()&&c.default.gi().s_TeamOperate(12,this.btncs[this.iDestPoint][0],this.btncs[this.iDestPoint][1]),!0;if(this.btn_applyall.ProcTouch(t,e,i)){if(this.btn_applyall.bCheck()){for(s=0,a=0;a<this.iTlCount;a++)this.tl[a].bApplyed||n.default.gi().iCurrentMapId==this.tl[a].iMapId&&(c.default.gi().s_TeamOperate(3,this.tl[a].iRid,0),this.tl[a].bApplyed=!0,s++);0==s&&p.default.easymsg.AddMessage("附近没有队伍可申请")}return!0}return this.btn_autoteam.ProcTouch(t,e,i)?(this.btn_autoteam.bCheck()&&(this.btncs[this.iDestPoint][0]<0||this.btncs[this.iDestPoint][0]>7?p.default.easymsg.AddMessage("请先选择队伍目标"):c.default.gi().s_TeamOperate(25,this.btncs[this.iDestPoint][0],0)),!0):this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&g.default.gi().PopStat(1),!0):(o.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||g.default.gi().PopStat(1),!1)}}]),TeamCreate}();i.default=S,S.iWaitingApplyMapId=0,S.iWaitingApplyRid=0,S._LEV_MAP=[[10,14,18,19],[15,19,18,19,20],[20,24,19,20,21],[25,29,20,21,22],[30,34,21,22,23],[35,39,22,23,24],[40,44,23,24,25],[45,49,24,25,26],[50,54,25,26,27],[55,59,26,27,35],[60,64,27,35,36],[65,69,25,26,50],[70,72,36,50,51],[73,74,50,51,52],[75,76,51,52,53],[77,100,52,53]],S._TARGET=["无目标","为民除害","追捕强盗","山贼宝图","挑战嚣张","封印叔叔","门派闯关","保卫西阳"],S.Open=function(){g.default.gi().CheckStat(g.default.GS_TEAMCREATE)||(g.default.gi().PushStat(g.default.GS_TEAMCREATE),c.default.gi().s_TeamOperate(12,0,0))},S.teamlist=function(t){if(g.default.gi().CheckStat(g.default.GS_TEAMCREATE)){var e,i=g.default.gi().LastStat(0),a=0;for(i.iTlCount=0;0!=(e=t.GetNextInt())&&(i.tl[a]=new w,i.tl[a].iRid=e,i.tl[a].sName=t.GetNextString(),i.tl[a].iMapId=t.GetNextShort(),i.tl[a].iLev=t.GetNextShort(),e=t.GetNextByte(),i.tl[a].iRaX=e%10,i.tl[a].iSchool=parseInt(e/10),i.tl[a].iTarget=t.GetNextByte(),i.tl[a].iTargetMap=t.GetNextShort(),i.tl[a].iCount=t.GetNextByte(),i.tl[a].bApplyed=!1,i.tl[a].iSort=D.default.me.rbs.iLev-i.tl[a].iLev,i.tl[a].iSort<0&&(i.tl[a].iSort=-i.tl[a].iSort),!(++a>=60)););for(i.iTlCount=a,e=0;e<i.iTlCount-1;e++)for(a=e+1;a<i.iTlCount;a++)i.tl[e].iSort>i.tl[a].iSort&&i.tl[e].swap(i.tl[a])}}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/MyAI":68,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/fast/FastButton":118,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../map/MapManager":286,"./MyTeam":266}],268:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../engine/control/XButton")),u=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),l=_interopRequireDefault(t("../../../../../engine/control/XInputNumber")),f=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),h=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),d=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),c=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var _=function(t){function TeamDest(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,TeamDest);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(TeamDest.__proto__||Object.getPrototypeOf(TeamDest)).call(this));for(i.iW=630,i.iH=600,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_close=new u.default(h.default.xani_nui2),i.btn_close.InitButton("关闭按钮"),i.btn_change=new u.default(h.default.xani_nui2),i.btn_change.InitButton("按钮1"),i.btn_change.sName="确定",i.btncs=new Array(16),i.btn_dest=new Array(16),e=0;e<16;e++)i.btncs[e]=new Int32Array(5),i.btn_dest[e]=new o.default(h.default.xani_nui4);for(i.iDestPoint=0,i.iOpenPoint=-1,i.iOffH=0,i.iShowH=i.iH-30-30-20-20,i.ResetButton(!0),i.bLocked1=!1,i.in_lev1=new l.default(h.default.xani_nui3),i.in_lev1.iNumber=0,i.in_lev1.MinMax(0,100),i.in_lev2=new l.default(h.default.xani_nui3),i.in_lev2.iNumber=80,i.in_lev2.MinMax(0,100),e=0;e<i.iDestCount;e++)i.btncs[e][0]==MyTeam.iTeamTarget&&(i.iDestPoint=e,i.in_lev1.iNumber=MyTeam.iLev1,i.in_lev2.iNumber=MyTeam.iLev2);return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(TeamDest,r.default),a(TeamDest,[{key:"ResetButton",value:function(t){var e;this.iDestCount=0,this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="无目标",this.btncs[this.iDestCount][0]=0,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=0,this.btncs[this.iDestCount][4]=80,this.iDestCount++,g.default.me.rbs.iLev>=10&&(this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="为民除害",this.btncs[this.iDestCount][0]=1,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=10,this.btncs[this.iDestCount][4]=80,this.iDestCount++),g.default.me.rbs.iLev>=20&&(this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="追捕强盗",this.btncs[this.iDestCount][0]=2,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=20,this.btncs[this.iDestCount][4]=80,this.iDestCount++),g.default.me.rbs.iLev>=30&&(this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="山贼宝图",this.btncs[this.iDestCount][0]=3,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=30,this.btncs[this.iDestCount][4]=80,this.iDestCount++),g.default.me.rbs.iLev>=40&&(this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="挑战嚣张",this.btncs[this.iDestCount][0]=4,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=40,this.btncs[this.iDestCount][4]=80,this.iDestCount++),g.default.me.rbs.iLev>=20&&(this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="封印叔叔",this.btncs[this.iDestCount][0]=5,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=20,this.btncs[this.iDestCount][4]=80,this.iDestCount++),this.btn_dest[this.iDestCount].InitButton("组队类型1"),this.btn_dest[this.iDestCount].sName="定时活动",this.btncs[this.iDestCount][0]=99,this.btncs[this.iDestCount][1]=0,t&&(this.iOpenPoint=this.iDestCount),e=this.iDestCount,this.iOpenPoint==e?this.btncs[this.iDestCount][2]=1:this.btncs[this.iDestCount][2]=2,this.btncs[this.iDestCount][3]=20,this.btncs[this.iDestCount][4]=80,this.iDestCount++,this.iOpenPoint==e&&g.default.me.rbs.iLev>=30&&(this.btn_dest[this.iDestCount].InitButton("组队类型2"),this.btn_dest[this.iDestCount].sName="门派闯关",this.btncs[this.iDestCount][0]=6,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=30,this.btncs[this.iDestCount][4]=80,this.iDestCount++,this.btn_dest[this.iDestCount].InitButton("组队类型2"),this.btn_dest[this.iDestCount].sName="保卫西阳",this.btncs[this.iDestCount][0]=7,this.btncs[this.iDestCount][1]=0,this.btncs[this.iDestCount][2]=0,this.btncs[this.iDestCount][3]=30,this.btncs[this.iDestCount][4]=80,this.iDestCount++),this.iDestH=85*this.iDestCount-5+40}},{key:"Draw",value:function(){var t,e,i,a,n;for(m.default.frame_type4("中等框a52_50",this.iX,this.iY,this.iW,this.iH,52,50),this.btn_close.Move(this.iX+this.iW-35,this.iY-25,60,60),this.btn_close.Draw(),this.bLocked1||(this.iOffH>0&&(this.iOffH/=2),t=this.iDestH<this.iShowH?this.iDestH:this.iShowH,(e=this.iDestH+this.iOffH)<t&&(this.iOffH+=(t-e)/2)),i=this.iX+30,a=this.iY+30,270,n=this.iH-60,m.default.new_framein(i,a,270,n),f.default.gi().SetViewClip(i+20,a+20,i+20+230,a+20+this.iShowH),t=0;t<this.iDestCount;t++)this.btn_dest[t].Move(i+20,a+20+85*t+this.iOffH,230,80),t==this.iDestPoint&&(this.btn_dest[t].bMouseIn=!0,this.btn_dest[t].bMouseDown=!0),this.btn_dest[t].Draw(),1==this.btncs[t][2]?h.default.xani_nui4.DrawAnima(this.btn_dest[t].iX,this.btn_dest[t].iY,"组队目录开关",1):2==this.btncs[t][2]&&h.default.xani_nui4.DrawAnima(this.btn_dest[t].iX,this.btn_dest[t].iY,"组队目录开关",0);f.default.gi().NoClip(),i+=300,m.default.new_framein(i,a,270,n),this.btncs[this.iDestPoint][0]<90&&(f.default.gi().DrawTextEx(i+30,a+100,"等级下限:",4294967295,30,101,1,1,0,0,0),this.in_lev1.Move(i+90,a+100+40,150),this.in_lev1.Draw(),f.default.gi().DrawTextEx(i+30,a+100+120,"等级上限:",4294967295,30,101,1,1,0,0,0),this.in_lev2.Move(i+90,a+100+40+120,150),this.in_lev2.Draw(),this.btn_change.Move(this.iX+this.iW-30-30-161,this.iY+this.iH-30-30-53,161,53),this.btn_change.Draw())}},{key:"ProcTouch",value:function(t,e,i){if(3==t&&this.bLocked1)return this.bLocked1=!1,!0;var a,n,r;if(n=this.iX+30,r=this.iY+30,s.default.bInRect(e,i,n,r,270,20+this.iShowH)){for(a=0;a<this.iDestCount;a++)this.btn_dest[a].ProcTouch(t,e,i)&&this.btn_dest[a].bCheck()&&(this.iDestPoint=a,this.in_lev1.iNumber=this.btncs[a][3],this.in_lev2.iNumber=this.btncs[a][4],99==this.btncs[a][0]&&(this.iOpenPoint<0?this.iOpenPoint=a:this.iOpenPoint=-1,this.ResetButton(!1)));if(1==t&&(this.iLockY=i),2==t&&!this.bLocked1&&((a=this.iLockY-i)<-15||a>15))for(this.bLocked1=!0,a=0;a<this.iDestCount;a++)this.btn_dest[a].bMouseDown=!1}if(2==t&&this.bLocked1)return a=this.iLockY-i,this.iOffH-=a,this.iLockY=i,!0;if(this.btncs[this.iDestPoint][0]<90){if(this.in_lev2.bShow){if(this.in_lev2.ProcTouch(t,e,i))return this.in_lev2.bShow||this.in_lev2.iNumber<this.in_lev1.iNumber&&(this.in_lev2.iNumber=this.in_lev1.iNumber),!0}else{if(this.in_lev1.ProcTouch(t,e,i))return this.in_lev1.bShow||this.in_lev1.iNumber>this.in_lev2.iNumber&&(this.in_lev1.iNumber=this.in_lev2.iNumber),!0;if(this.in_lev2.ProcTouch(t,e,i))return!0}if(this.btn_change.ProcTouch(t,e,i))return this.btn_change.bCheck()&&(d.default.gi().s_TeamOperateEx(13,this.btncs[this.iDestPoint][0],this.btncs[this.iDestPoint][1],this.in_lev1.iNumber,this.in_lev2.iNumber),c.default.gi().PopStat(1)),!0}return this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&c.default.gi().PopStat(1),!0):(3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||c.default.gi().PopStat(1),!1)}}]),TeamDest}();i.default=_,_.Open=function(){c.default.gi().CheckStat(c.default.GS_TEAMDEST)||c.default.gi().PushStat(c.default.GS_TEAMDEST)}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInputNumber":19,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/gameing/me/GmMe":211}],269:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../map/MapManager")),_interopRequireDefault(t("../../../../../config/GameData"))),s=_interopRequireDefault(t("../../../../../config/GmConfig")),r=_interopRequireDefault(t("../../../../../config/SortAnima")),o=_interopRequireDefault(t("../../../../../config/XDefine")),u=_interopRequireDefault(t("../../../../../engine/BaseClass")),l=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton"))),f=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),h=_interopRequireDefault(t("../../../../../engine/control/XCheckBox")),d=(_interopRequireDefault(t("../../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction"))),c=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),m=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),g=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),_=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),p=(_interopRequireDefault(t("../../../../../engtst/mgm/History/XRecordFast")),_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode"))),b=(_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/Gameing")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/NearRole")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_Send"))),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/FastButton")),y=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),w=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods")),_interopRequireDefault(t("./TeamRequestList"))),S=_interopRequireDefault(t("./MyTeam")),x=_interopRequireDefault(t("./TeamCreate")),P=_interopRequireDefault(t("./TeamZhen"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var v=function(){function _NEARROLES(){_classCallCheck(this,_NEARROLES)}return a(_NEARROLES,[{key:"copy",value:function(t){this.iRid=t.iRid,this.sName=t.sName,this.iLev=t.iLev,this.iRaX=t.iRaX,this.iSchool=t.iSchool,this.bApplyed=t.bApplyed}},{key:"swap",value:function(t){var e,i,a;e=this.iRid,this.iRid=t.iRid,t.iRid=e,i=this.sName,this.sName=t.sName,t.sName=i,e=this.iLev,this.iLev=t.iLev,t.iLev=e,e=this.iRaX,this.iRaX=t.iRaX,t.iRaX=e,e=this.iSchool,this.iSchool=t.iSchool,t.iSchool=e,a=this.bApplyed,this.bApplyed=t.bApplyed,t.bApplyed=a}}]),_NEARROLES}(),R=function(t){function TeamOperate(t){_classCallCheck(this,TeamOperate);var e,i,a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(TeamOperate.__proto__||Object.getPrototypeOf(TeamOperate)).call(this));for(a.pani=t,a.pm3f=t.pm3f,a.iW=1100,a.iH=585,a.iX=(s.default.SCRW-a.iW)/2,a.iY=(s.default.SCRH-a.iH)/2,a.btn_close=new f.default(m.default.xani_nui2),a.btn_close.InitButton("关闭按钮"),a.btn_zf=new f.default(m.default.xani_nui2),a.btn_zf.InitButton("按钮2"),a.btn_zf.sName="设置阵法",a.btn_dest=new l.default(m.default.xani_nui4),a.btn_dest.InitButton("队伍目标改变"),a.btn_dest.bSingleButton=!0,a.btn_change=new f.default(m.default.xani_nui2),a.btn_change.InitButton("按钮2"),a.btn_change.sName="升为队长",a.chk_autoback=new h.default(m.default.xani_button),a.chk_autoback.InitBox("复选框50_53"),0==(2048&y.default.me.iFlag[2])?a.chk_autoback.bTrue=!0:a.chk_autoback.bTrue=!1,a.chk_autoback.sDetail="自动响应召回",a.btn_fastsend=new f.default(m.default.xani_nui2),a.btn_fastsend.InitButton("按钮2"),a.btn_fastsend.sName="发送队伍",a.btn_autoteam=new f.default(m.default.xani_nui2),a.btn_autoteam.InitButton("按钮2"),a.btn_autoteam.sName="自动匹配",a.bLock=!1,a.iNRCount=0,a.nrs=new Array(TeamOperate.MAXNEARROLE),e=0;e<TeamOperate.MAXNEARROLE;e++)a.nrs[e]=null;for(a.iOffY=0,a.iLockY=-1,a.iLockDelay=100,a.iRolePoint=-1,a.iOBCount=0,a.bResetOBC=!1,a.btn_operate=new Array(12),e=0;e<12;e++)a.btn_operate[e]=new f.default(m.default.xani_nui2);for(a.iPage=0,a.btn_page=new Array(2),e=0;e<2;e++)a.btn_page[e]=new f.default(m.default.xani_nui2),a.btn_page[e].InitButton("右侧标签"),a.btn_page[e].Move(a.iX+a.iW-15,a.iY+40+125*e,50,140);for(a.btn_refuse=new Array(TeamOperate.MAXLIST),a.btn_roles=new Array(TeamOperate.MAXLIST),a.btn_away=new Array(TeamOperate.MAXLIST),a.aa_body=new Array(TeamOperate.MAXLIST),a.aa_weapon=new Array(TeamOperate.MAXLIST),a.aa_cls=new Array(TeamOperate.MAXLIST),a.btn_watch=new Array(TeamOperate.MAXLIST),e=0;e<TeamOperate.MAXLIST;e++)for(a.aa_cls[e]=new Array(5),a.btn_watch[e]=new f.default(m.default.xani_button),a.btn_watch[e].InitButton("队伍查看50_50"),a.btn_refuse[e]=new f.default(m.default.xani_nui2),a.btn_refuse[e].sName="拒绝",a.btn_refuse[e].InitButton("按钮1_110"),a.btn_roles[e]=new l.default(t),a.btn_roles[e].bSingleButton=!0,a.btn_away[e]=new f.default(m.default.xani_button),a.btn_away[e].InitButton("队伍暂离72_42"),a.btn_away[e].sName="暂离",a.btn_away[e].iNameSize=25,a.aa_body[e]=null,a.aa_weapon[e]=null,i=0;i<5;i++)a.aa_cls[e][i]=new d.default;if(a.iScrollX=0,null==TeamOperate.trl){for(TeamOperate.trl=new Array(TeamOperate.MAXLIST),e=0;e<TeamOperate.MAXLIST;e++)TeamOperate.trl[e]=new w.default;TeamOperate.iRequestCount=0}return a.bLock=!0,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(TeamOperate,u.default),a(TeamOperate,[{key:"_rolelist",value:function(t){var e,i;for(1==t.GetNextByte()&&(this.iNRCount=0),i=this.iNRCount;0!=(e=t.GetNextInt())&&(this.nrs[i]=new v,this.nrs[i].iRid=e,this.nrs[i].sName=t.GetNextString(),this.nrs[i].iLev=t.GetNextShort(),e=t.GetNextByte(),this.nrs[i].iRaX=e%10,this.nrs[i].iSchool=parseInt(e/10),this.nrs[i].bApplyed=!1,!(++i>=TeamOperate.MAXNEARROLE)););this.iNRCount=i}},{key:"remove_from_list",value:function(t){var e;for(e=0;e<this.iNRCount;e++)if(this.nrs[e].iRid==t){for(this.iNRCount--;e<this.iNRCount;e++)this.nrs[e].copy(this.nrs[e+1]);return}}}]),a(TeamOperate,[{key:"DrawName",value:function(t,e,i,a,n,s){this.pm3f.DrawTextEx(t,e+55,i,4294967295,20,101,1,1,0,-2,-2),this.pm3f.DrawTextEx(t-50,e+55+40,a,4294967295,20,101,1,1,0,-1,-2),this.pm3f.DrawTextEx(t+50,e+55+40,""+n,4294967295,20,101,1,1,0,-3,-2),this.pm3f.DrawTextEx(t,e+55+80,s,4294967295,20,101,1,1,0,-2,-2)}},{key:"Draw",value:function(){if(S.default.bNoTeam())_.default.gi().PopStat(1);else if(S.default.bTeamLeader()?this.iW=1100:this.iW=690,this.iH=585,this.iX=(s.default.SCRW-this.iW)/2,this.iY=(s.default.SCRH-this.iH)/2,p.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"队","伍"),p.default.new_framein(this.iX+30,this.iY+30,630,this.iH-60),this.btn_close.Move(this.iX+this.iW-35,this.iY+-25,60,60),this.btn_close.Draw(),0==this.iPage?this.Draw_0():this.Draw_1(),S.default.bTeamLeader()){this.Draw_near();for(var t=0;t<2;t++)this.iPage==t&&(this.btn_page[t].bMouseIn=!0,this.btn_page[t].bMouseDown=!0),this.btn_page[t].Draw();p.default.new_lableword4(this.iX+this.iW-15,this.iY+50+0-4,40,70,0==this.iPage,"我","的","队","伍"),p.default.new_lableword4(this.iX+this.iW-15,this.iY+50+125-4,40,70,1==this.iPage,"申","请","列","表")}else 1==this.iPage&&(this.iPage=0)}},{key:"Draw_1",value:function(){var t,e,i,a,s;for(this.btn_zf.Move(this.iX+50,this.iY+50,145,56),this.btn_change.Move(this.iX+50+600-145-10,this.iY+50,145,56),this.btn_fastsend.Move(this.iX+50+280+10,this.iY+50+65,145,56),this.btn_autoteam.Move(this.iX+50+280+10+145+10,this.iY+50+65,145,56),this.btn_dest.Move(this.iX+50,this.iY+50+65,280,54),this.btn_zf.Draw(),S.default.bTeamLeader()&&(this.btn_fastsend.Draw(),S.default.bLeaderAutoTeaming?this.btn_autoteam.sName="匹配中...":this.btn_autoteam.sName="自动匹配",this.btn_autoteam.Draw()),this.Draw_Target(),c.default.gi().SetViewClip(this.iX+50,this.iY+180,this.iX+50+600,this.iY+180+300+65),t=0;t<TeamOperate.iRequestCount;t++){if(i=this.iX+50+120*t+55-this.iScrollX,a=this.iY+180+150,m.default.xani_nui2.DrawAnima(i-55,a-150,"队伍人物格子1",0),1==this.bLock&&this.iLockPoint1==t&&p.default.frame_type2("黄色透明框a25_25",i-55,a-150,110,180,25,25),this.btn_roles[t].Move(i-55,a-150,110,180),this.btn_refuse[t].Move(i-55,a+310-150,110,52),this.btn_away[t].Move(i-55+110-72,a+180-42-150,72,42),this.btn_watch[t].Move(i-55+110-50,a-150,50,50),m.default.xani_nui1.DrawAnimaEx(i,a,"选中角色底",m.default.iDelay,101,.5,.5,0,-2,-2),s=TeamOperate.trl[t].iRas,null==this.aa_body[t])for(this.aa_body[t]=m.default.xani_newrole[s].InitAnimaWithName("站立_下",null),e=0;e<r.default._CHANGECOLOR[s].length;e++)TeamOperate.trl[t].iColor[e]<=0||TeamOperate.trl[t].iColor[e]>=6||m.default.xani_color[s][TeamOperate.trl[t].iColor[e]-1].InitAnimaWithName(r.default._CHANGECOLOR[s][e]+"_站立_下",this.aa_cls[t][e]);for(TeamOperate.trl[t].iWeapTid>=0&&null==this.aa_weapon[t]&&(this.aa_weapon[t]=m.default.xani_weap[TeamOperate.trl[t].iRas][r.default.WeapFlag(TeamOperate.trl[t].iWeapTid)].InitAnimaWithName("站立_下",null)),this.aa_body[t].Draw(i,a),e=0;e<r.default._CHANGECOLOR[s].length;e++)TeamOperate.trl[t].iColor[e]<=0||TeamOperate.trl[t].iColor[e]>=6||(this.aa_cls[t][e].iFrame=this.aa_body[t].iFrame,this.aa_cls[t][e].Draw(i,a));null!=this.aa_weapon[t]&&TeamOperate.trl[t].iWeapTid>=0&&(this.aa_weapon[t].Draw(i,a),this.aa_weapon[t].NextFrame()),this.aa_body[t].NextFrame(),this.DrawName(i,a,TeamOperate.trl[t].sName,n.default.sSchools[TeamOperate.trl[t].iSchoolId],TeamOperate.trl[t].iLev,TeamOperate.trl[t].sMapName),this.btn_refuse[t].sName="同意",this.btn_refuse[t].Draw(),this.btn_away[t].sName="拒绝",this.btn_away[t].Draw(),this.btn_watch[t].Draw()}c.default.gi().NoClip(),TeamOperate.iRequestCount<=5?this.iScrollW=0:this.iScrollW=120*(TeamOperate.iRequestCount-5),this.bLockX||(this.iScrollX<0&&(this.iScrollX=0),this.iScrollX>this.iScrollW&&(this.iScrollX=this.iScrollW))}},{key:"Draw_Target",value:function(){p.default.frame_type1("队伍目标40_54",this.btn_dest.iX,this.btn_dest.iY,this.btn_dest.iW,40),S.default.iTeamTarget>=0&&S.default.iTeamTarget<8&&(TeamOperate.sZz=x.default._TARGET[S.default.iTeamTarget]+"   "+S.default.iLev1+"级~"+S.default.iLev2+"级"),c.default.gi().DrawText_2(this.btn_dest.iX+20,this.btn_dest.iY+27,TeamOperate.sZz,4278206039,24,101,1,1,0,0,-2,3,4294967295)}},{key:"Draw_0",value:function(){var t,e,i,a,s;for(this.btn_zf.Move(this.iX+50,this.iY+50,145,56),this.chk_autoback.Move(this.iX+50+350,this.iY+50,50,53),this.btn_change.Move(this.iX+50+600-145-10,this.iY+50,145,56),this.btn_dest.Move(this.iX+50,this.iY+50+65,280,54),this.btn_fastsend.Move(this.iX+50+280+10,this.iY+50+65,145,56),this.btn_autoteam.Move(this.iX+50+280+10+145+10,this.iY+50+65,145,56),this.btn_zf.Draw(),S.default.bTeamLeader()?(this.btn_fastsend.Draw(),S.default.bLeaderAutoTeaming?this.btn_autoteam.sName="匹配中...":this.btn_autoteam.sName="自动匹配",this.btn_autoteam.Draw()):this.chk_autoback.Draw(),this.Draw_Target(),t=0;t<5;t++)if(a=this.iY+180,m.default.xani_nui2.DrawAnima(this.iX+50+120*t,a,"队伍人物格子1",0),0!=S.default.iTmpTeamRid[t]){if(this.btn_roles[t].Move(this.iX+50+120*t,a,110,180),this.btn_refuse[t].Move(this.iX+50+120*t,a+310,110,52),this.btn_away[t].Move(this.iX+50+120*t+110-72,a+180-42,72,42),this.btn_watch[t].Move(this.iX+50+120*t+110-50,a,50,50),i=this.iX+50+120*t+55,a=this.iY+180+150,m.default.xani_nui1.DrawAnimaEx(i,a,"选中角色底",m.default.iDelay,101,.5,.5,0,-2,-2),S.default.iTmpTeamRid[t]==y.default.me.iRid){if(s=2*y.default.me.iRace+y.default.me.iSex,null==this.aa_body[t])for(this.aa_body[t]=m.default.xani_newrole[2*y.default.me.iRace+y.default.me.iSex].InitAnimaWithName("站立_下",null),e=0;e<r.default._CHANGECOLOR[s].length;e++)y.default.me.iColor[e]<=0||y.default.me.iColor[e]>=6||m.default.xani_color[s][y.default.me.iColor[e]-1].InitAnimaWithName(r.default._CHANGECOLOR[s][e]+"_站立_下",this.aa_cls[t][e]);for(null==this.aa_weapon[t]&&y.default.me.iWeapTid>=0&&(this.aa_weapon[t]=m.default.xani_weap[2*y.default.me.iRace+y.default.me.iSex][r.default.WeapFlag(y.default.me.iWeapTid)].InitAnimaWithName("站立_下",null)),0==S.default.iTeamRid[t]?this.aa_body[t].DrawEx(i,a,50,1,1,0,0,0):this.aa_body[t].Draw(i,a),e=0;e<r.default._CHANGECOLOR[s].length;e++)y.default.me.iColor[e]<=0||y.default.me.iColor[e]>=6||(this.aa_cls[t][e].iFrame=this.aa_body[t].iFrame,0==S.default.iTeamRid[t]?this.aa_cls[t][e].DrawEx(i,a,50,1,1,0,0,0):this.aa_cls[t][e].Draw(i,a));null!=this.aa_weapon[t]&&y.default.me.iWeapTid>=0&&(0==S.default.iTeamRid[t]?this.aa_weapon[t].DrawEx(i,a,50,1,1,0,0,0):this.aa_weapon[t].Draw(i,a),this.aa_weapon[t].NextFrame()),this.aa_body[t].NextFrame(),this.DrawName(i,a,y.default.me.sName,n.default.sSchools[y.default.me.rbs.iSchoolId],y.default.me.rbs.iLev,S.default.sMapName[t])}else{if(s=S.default.iRas[t],null==this.aa_body[t])for(this.aa_body[t]=m.default.xani_newrole[s].InitAnimaWithName("站立_下",null),e=0;e<r.default._CHANGECOLOR[s].length;e++)S.default.iColor[t][e]<=0||S.default.iColor[t][e]>=6||m.default.xani_color[s][S.default.iColor[t][e]-1].InitAnimaWithName(r.default._CHANGECOLOR[s][e]+"_站立_下",this.aa_cls[t][e]);for(null==this.aa_weapon[t]&&S.default.iWeapTid[t]>=0&&(this.aa_weapon[t]=m.default.xani_weap[S.default.iRas[t]][r.default.WeapFlag(S.default.iWeapTid[t])].InitAnimaWithName("站立_下",null)),0==S.default.iTeamRid[t]?this.aa_body[t].DrawEx(i,a,50,1,1,0,0,0):this.aa_body[t].Draw(i,a),e=0;e<r.default._CHANGECOLOR[s].length;e++)S.default.iColor[t][e]<=0||S.default.iColor[t][e]>=6||(this.aa_cls[t][e].iFrame=this.aa_body[t].iFrame,0==S.default.iTeamRid[t]?this.aa_cls[t][e].DrawEx(i,a,50,1,1,0,0,0):this.aa_cls[t][e].Draw(i,a));null!=this.aa_weapon[t]&&S.default.iWeapTid[t]>=0&&(this.aa_weapon[t].Draw(i,a),0==S.default.iTeamRid[t]?this.aa_weapon[t].DrawEx(i,a,50,1,1,0,0,0):this.aa_weapon[t].NextFrame()),this.aa_body[t].NextFrame(),this.DrawName(i,a,S.default.sName[t],n.default.sSchools[S.default.iSchoolId[t]],S.default.iLev[t],S.default.sMapName[t])}1==this.bLock&&(this.iLockPoint1==t?p.default.frame_type2("黄色透明框a25_25",this.iX+50+120*t,this.iY+180,110,180,25,25):this.iLockPoint1>=0&&this.iLockPoint1<5&&S.default.iTeamRid[this.iLockPoint1]>0&&c.default.gi().DrawTextEx(this.iX+50+120*t+55,this.iY+180+100,"点击交换",4294967040,25,101,1,1,0,-2,-2)),S.default.bTeamLeader()?(0==t?(this.btn_refuse[t].sName="解散",this.btn_refuse[t].Draw()):(this.btn_refuse[t].sName="请离",this.btn_refuse[t].Draw()),S.default.iTeamRid[t]<=0&&(this.btn_away[t].sName="召回",this.btn_away[t].Draw())):S.default.iTmpTeamRid[t]==y.default.me.iRid&&(this.btn_refuse[t].sName="离队",this.btn_refuse[t].Draw(),S.default.iTeamRid[t]<=0?this.btn_away[t].sName="归队":this.btn_away[t].sName="暂离",this.btn_away[t].Draw()),this.btn_watch[t].Draw()}if(!S.default.bTeamLeader())return this.btn_change.Move(this.iX+50+600-145-10,this.iY+50+70,145,56),this.btn_change.sName="申请带队",void this.btn_change.Draw();this.bLock&&this.iLockPoint1>0&&(this.btn_change.sName="升为队长",this.btn_change.Draw())}},{key:"Draw_near",value:function(){var t,e,i;e=this.iX+30+630+20,i=this.iY+30;for(p.default.new_framein(e,i,390,this.iH-60),c.default.gi().DrawText_2(e+195,i+30,"附 近 玩 家("+this.iNRCount+")",4278190080,30,101,1,1,0,-2,-2,3,4286644223),e+=15,i+=55,c.default.gi().SetViewClip(e,i,e+360,i+380),i-=this.iOffY,this.bResetOBC&&(this.iOBCount=0),t=0;t<this.iNRCount;t++)i<this.iY+85-95||i>this.iY+85+380?i+=95:(m.default.xani_nui2.DrawAnima(e,i,"队伍列表标签",this.iRolePoint==t?1:0),m.default.xani_head.DrawAnima(e+4,i+4,"新头像"+this.nrs[t].iRaX,0),c.default.gi().DrawTextEx(e+4+83+10,i+25,this.nrs[t].sName,4294967295,30,101,1,1,0,0,-2),c.default.gi().DrawTextEx(e+4+83+10,i+65,n.default.sSchools[this.nrs[t].iSchool]+" 等级"+this.nrs[t].iLev,4294967295,20,101,1,1,0,0,-2),this.bResetOBC&&(this.btn_operate[this.iOBCount].exts[0]=this.nrs[t].iRid,this.nrs[t].bApplyed?(this.iRolePoint==t?(this.btn_operate[this.iOBCount].InitButton("拒绝入队"),this.btn_operate[this.iOBCount].exts[1]=0):(this.btn_operate[this.iOBCount].InitButton("同意入队"),this.btn_operate[this.iOBCount].exts[1]=1),this.btn_operate[this.iOBCount].Move(e+390-130,i+17.5,90,60)):(this.btn_operate[this.iOBCount].InitButton("邀请入队"),this.btn_operate[this.iOBCount].Move(e+390-130,i+17.5,90,60),this.btn_operate[this.iOBCount].exts[1]=2),this.iOBCount++),i+=95);for(t=0;t<this.iOBCount;t++)this.btn_operate[t].Draw();c.default.gi().NoClip(),this.iLockDelay++,this.bResetOBC=!1,this.bResetOBC=!0}},{key:"ProcTouch",value:function(t,e,i){var a;if(1==this.iPage&&this.bLockX)return 2==t&&(this.iScrollX+=this.iLockX-e,this.iLockX=e),3==t&&(this.bLockX=!1),!0;if(S.default.bTeamLeader()){for(a=0;a<2;a++)if(this.btn_page[a].ProcTouch(t,e,i))return this.btn_page[a].bCheck()&&this.iPage!=a&&(this.iPage=a,TeamOperate.CleanAnima()),!0;if(this.btn_fastsend.ProcTouch(t,e,i))return this.btn_fastsend.bCheck()&&(b.default.bOpenInput=!1,b.default.Open(),b.default.in_speak.sDetail="",b.default.ClearCext(),b.default.AddTeam()),!0;if(this.btn_autoteam.ProcTouch(t,e,i))return this.btn_autoteam.bCheck()&&g.default.gi().s_TeamOperate(25,0,0),!0;if(this.bLock&&this.iLockPoint1>0&&this.btn_change.ProcTouch(t,e,i))return this.btn_change.bCheck()&&(g.default.gi().s_TeamOperate(8,this.iLockPoint1,0),this.bLock=!1),!0;if(this.btn_dest.ProcTouch(t,e,i))return this.btn_dest.bCheck()&&TeamDest.Open(),!0;var n=this.iX+30+630+20+15,s=this.iY+30+55;if(o.default.bInRect(e,i,n,s,360,380)){for(a=0;a<this.iOBCount;a++)if(this.btn_operate[a].ProcTouch(t,e,i))return this.btn_operate[a].bCheck()&&(0==this.btn_operate[a].exts[1]?(g.default.gi().s_TeamOperate(5,this.btn_operate[a].exts[0],0),this.remove_from_list(this.btn_operate[a].exts[0]),this.bResetOBC=!0):1==this.btn_operate[a].exts[1]?(g.default.gi().s_TeamOperate(4,this.btn_operate[a].exts[0],0),this.remove_from_list(this.btn_operate[a].exts[0]),this.bResetOBC=!0):(g.default.gi().s_TeamOperate(6,this.btn_operate[a].exts[0],0),this.remove_from_list(this.btn_operate[a].exts[0]),this.bResetOBC=!0)),!0;return 1==t?(this.iLockDelay=0,this.iLockY=i):2==t&&this.iLockY>0?(this.iOffY+=this.iLockY-i,this.iLockY=i,this.bResetOBC=!0):3==t&&this.iLockY>0&&(this.iOffY+=this.iLockY-i,this.iLockY=-1,this.bResetOBC=!0,this.iLockDelay<6&&(this.iRolePoint=(i-s+this.iOffY)/95,m.default.sop("iTeamPoint="+this.iRolePoint+",,,"+this.iOffY))),(a=95*(this.iNRCount-4))<0&&(a=0),this.iOffY<0&&(this.iOffY=0),this.iOffY>a&&(this.iOffY=a),!0}}else if(this.chk_autoback.ProcTouch(t,e,i)&&(this.chk_autoback.bTrue?g.default.gi().s_setflag(2,11,0):g.default.gi().s_setflag(2,11,1)),this.btn_change.ProcTouch(t,e,i))return this.btn_change.bCheck()&&g.default.gi().s_TeamOperate(23,0,0),!0;if(this.iLockY=-1,this.btn_close.ProcTouch(t,e,i))return this.btn_close.bCheck()&&_.default.gi().PopStat(1),!0;if(this.btn_zf.ProcTouch(t,e,i))return this.btn_zf.bCheck()&&P.default.Open(),!0;if(0==this.iPage){for(a=0;a<5;a++)if(0!=S.default.iTmpTeamRid[a]){if(this.btn_watch[a].ProcTouch(t,e,i))return this.btn_watch[a].bCheck()&&g.default.gi().s_WatchOn(0,S.default.iTmpTeamRid[a],0,""),!0;if(this.btn_away[a].ProcTouch(t,e,i)){this.btn_away[a].bCheck()&&(S.default.bTeamLeader()?0==S.default.iTeamRid[a]&&g.default.gi().s_TeamOperate(22,S.default.iTmpTeamRid[a],0):0==S.default.iTeamRid[a]?g.default.gi().s_TeamOperate(21,0,0):g.default.gi().s_TeamOperate(20,0,0));break}this.btn_roles[a].ProcTouch(t,e,i)&&this.btn_roles[a].bCheck()&&S.default.bTeamLeader()&&(this.bLock?(this.iLockPoint1!=a&&g.default.gi().s_TeamOperate(8,this.iLockPoint1,a),this.bLock=!1):(this.bLock=!0,this.iLockPoint1=a)),this.btn_refuse[a].ProcTouch(t,e,i)&&this.btn_refuse[a].bCheck()&&(S.default.bTeamLeader()?(0==a?(g.default.gi().s_TeamOperate(1,y.default.me.iRid,0),_.default.gi().PopStat(1)):g.default.gi().s_TeamOperate(2,S.default.iTmpTeamRid[a],0),S.default.iTeamRid[a]=0,S.default.iTmpTeamRid[a]=0):S.default.iTmpTeamRid[a]==y.default.me.iRid&&(g.default.gi().s_TeamOperate(1,y.default.me.iRid,0),_.default.gi().PopStat(1)))}}else if(1==this.iPage&&o.default.bInRect(e,i,this.iX+50,this.iY+180,600,365)){for(a=0;a<TeamOperate.iRequestCount;a++){if(this.btn_watch[a].ProcTouch(t,e,i))return this.btn_watch[a].bCheck()&&g.default.gi().s_WatchOn(0,TeamOperate.trl[a].iRid,0,""),!0;if(this.btn_away[a].ProcTouch(t,e,i))return this.btn_away[a].bCheck()&&(g.default.gi().s_TeamOperate(5,TeamOperate.trl[a].iRid,0),TeamOperate.RemoveFromRequest(TeamOperate.trl[a].iRid)),!0;if(this.btn_roles[a].ProcTouch(t,e,i)&&this.btn_roles[a].bCheck(),this.btn_refuse[a].ProcTouch(t,e,i))return this.btn_refuse[a].bCheck()&&(g.default.gi().s_TeamOperate(4,TeamOperate.trl[a].iRid,0),TeamOperate.RemoveFromRequest(TeamOperate.trl[a].iRid)),!0}1==t&&(this.bLockX=!0,this.iLockX=e)}return!1}}]),TeamOperate}();i.default=R,R.MAXNEARROLE=128,R.rolelist=function(t){_.default.gi().CheckStat(_.default.GS_TEAMOPERATE)&&_.default.gi().LastStat(0)._rolelist(t)},R.CleanAnima=function(){var t,e=_.default.gi().FindStat(_.default.GS_TEAMOPERATE);if(null!=e)for(t=0;t<R.MAXLIST;t++)e.aa_body[t]=null,e.aa_weapon[t]=null},R.ResetWeapon=function(t,e,i,a){var n=m.default.de_goods.varValue(t,0,19);return a=m.default.xani_weap[2*n+e][r.default.WeapFlag(t)].InitAnimaWithName(i,a)},R.trl,R.MAXLIST=32,R.iRequestCount=0,R.sZz="无",R.Open=function(t){_.default.gi().PushStat(_.default.GS_TEAMOPERATE).iPage=t},R.AddTeamRequest=function(t){var e,i,a=t.GetNextInt();for(R.RemoveFromRequest(a),e=R.MAXLIST-1;e>0;e--)R.trl[e].copyfrom(R.trl[e-1]);R.trl[0].iRid=a,R.trl[0].sName=t.GetNextString(),R.trl[0].iRas=t.GetNextByte(),R.trl[0].iSchoolId=t.GetNextByte(),R.trl[0].iLev=t.GetNextShort(),i=t.GetNextShort(),R.trl[0].iColor[0]=7&i,R.trl[0].iColor[1]=i>>3&7,R.trl[0].iColor[2]=i>>6&7,R.trl[0].iColor[3]=i>>9&7,R.trl[0].iColor[4]=i>>12&7,R.trl[0].iWeapTid=t.GetNextShort(),R.trl[0].sMapName=t.GetNextString(),R.iRequestCount<R.MAXLIST&&R.iRequestCount++,D.default.gi().bRequestFlash=!0},R.RemoveFromRequest=function(t){var e,i=0;for(e=0;e<R.iRequestCount;e++)R.trl[e].iRid==t&&(i=1),1==i&&e<R.iRequestCount-1&&R.trl[e].copyfrom(R.trl[e+1]);1==i&&R.iRequestCount--,R.CleanAnima()}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/SortAnima":6,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XCheckBox":17,"../../../../../engine/control/XInput":18,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/History/XRecordFast":67,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/Gameing":91,"../../../../../engtst/mgm/gameing/NearRole":93,"../../../../../engtst/mgm/gameing/chat/publicchat/PublicChat_Send":110,"../../../../../engtst/mgm/gameing/fast/FastButton":118,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../map/MapManager":286,"./MyTeam":266,"./TeamCreate":267,"./TeamRequestList":270,"./TeamZhen":271}],270:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function TeamRequestList(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,TeamRequestList),this.iRid=0,this.iColor=new Int32Array(10)}return a(TeamRequestList,[{key:"copyfrom",value:function(t){this.iRid=t.iRid,this.sName=t.sName,this.iRas=t.iRas,this.iSchoolId=t.iSchoolId,this.iLev=t.iLev;for(var e=0;e<10;e++)this.iColor[e]=t.iColor[e];this.iWeapTid=t.iWeapTid,this.sMapName=t.sMapName}}]),TeamRequestList}();i.default=n},{}],271:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../map/DrawBuffer")),s=(_interopRequireDefault(t("../../../../../map/MapManager")),_interopRequireDefault(t("../../../../../mgm/newmainmenu/StarEffect"))),r=(_interopRequireDefault(t("../../../../../config/GameData")),_interopRequireDefault(t("../../../../../config/GmConfig"))),o=_interopRequireDefault(t("../../../../../config/SortAnima")),u=_interopRequireDefault(t("../../../../../config/XDefine")),l=_interopRequireDefault(t("../../../../../engine/BaseClass")),f=(_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),h=_interopRequireDefault(t("../../../../../engine/graphics/AnimaAction")),d=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),c=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/FireworksEffect"))),m=_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay")),g=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),_=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),p=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/Gameing")),D=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/NearRole")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/help/ang/PromptActivity")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe"))),y=_interopRequireDefault(t("./MyTeam"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var w=function(t){function TeamZhen(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,TeamZhen);var e,i,a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(TeamZhen.__proto__||Object.getPrototypeOf(TeamZhen)).call(this));for(a.iW=900,a.iH=600,a.iX=(r.default.SCRW-a.iW)/2,a.iY=(r.default.SCRH-a.iH)/2,a.btn_close=new f.default(m.default.xani_nui2),a.btn_close.InitButton("关闭按钮"),a.btn_close.Move(a.iX+a.iW-35,a.iY-25,60,60),a.btn_zhen=new Array(8),e=0;e<6;e++)a.btn_zhen[e]=new f.default(m.default.xani_nui2),a.btn_zhen[e].InitButton("按钮2_121"),a.btn_zhen[e].sName=TeamZhen._ZHEN[e+1][0];for(a.se=new s.default,a.se.Init1(0,0,120,48,50),a.aa_body=new Array(5),a.aa_weapon=new Array(5),a.aa_cls=new Array(5),e=0;e<5;e++)for(a.aa_body[e]=null,a.aa_weapon[e]=null,a.aa_cls[e]=new Array(5),i=0;i<5;i++)a.aa_cls[e][i]=new h.default;for(a.aa_add=m.default.xani_nui2.InitAnimaWithName("增减提示",null),a.poslist=new Array(5),e=0;e<5;e++)a.poslist[e]=new Int32Array(2);return a.iLockPos=-1,a.btn_ts=new f.default(m.default.xani_nui2),a.btn_ts.InitButton("感叹提示"),a.btn_ts.Move(a.iX+a.iW-120,a.iY+a.iH-120,65,65),a.bShowKe=!1,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(TeamZhen,l.default),a(TeamZhen,[{key:"Draw",value:function(){var t,e,i,a;for(p.default.new_baseframe2(this.iX,this.iY,this.iW,this.iH,"阵","法"),this.btn_close.Draw(),p.default.new_framein(this.iX+25,this.iY+25,150,this.iH-50),t=0;t<6;t++)0!=(D.default.me.iFlag[14]&1<<t)&&y.default.bTeamLeader()||(this.btn_zhen[t].bDisable=!0),D.default.iTeamZhen==t&&(this.btn_zhen[t].bMouseDown=!0,this.btn_zhen[t].bMouseIn=!0),this.btn_zhen[t].Move(this.iX+25+15,this.iY+25+15+63*t,121,48),this.btn_zhen[t].Draw(),D.default.iTeamZhen==t&&(this.se.Logic(),this.se.Draw(this.iX+25+15,this.iY+25+15+63*t));for(i=this.iX+300,a=this.iY+360,p.default.new_framein(this.iX+25+150+25,this.iY+25,this.iW-150-75,this.iH-50),e=0;e<3;e++)for(t=0;t<5;t++)i=this.iX+300+80*t+80*e,a=this.iY+360-60*t+60*e,TeamZhen._ZHENSTAND[D.default.iTeamZhen][e][t]>0?(1==TeamZhen._ZHENSTAND[D.default.iTeamZhen][e][t]?m.default.xani_nui2.DrawAnima(i,a,"地上格子",1):TeamZhen._ZHENSTAND[D.default.iTeamZhen][e][t]>1&&m.default.xani_nui2.DrawAnima(i,a,"地上格子",2),this.poslist[TeamZhen._ZHENSTAND[D.default.iTeamZhen][e][t]-1][0]=i,this.poslist[TeamZhen._ZHENSTAND[D.default.iTeamZhen][e][t]-1][1]=a):m.default.xani_nui2.DrawAnima(i,a,"地上格子",0);for(this.iLockPos>0&&m.default.xani_nui2.DrawAnima(this.poslist[this.iLockPos][0],this.poslist[this.iLockPos][1],"地上格子",3),n.default.gi().ClearBuffer(),e=0;e<3;e++)for(t=0;t<5;t++)i=this.iX+300+80*t+80*e,a=this.iY+360-60*t+60*e,TeamZhen._ZHENSTAND[D.default.iTeamZhen][e][t]>0&&this.Draw_role(i,a,TeamZhen._ZHENSTAND[D.default.iTeamZhen][e][t]-1);if(n.default.gi().SortAndDraw(),y.default.bFullTeam()?d.default.gi().DrawTextEx(this.iX+25+150+25+25,this.iY+this.iH-60,"提示：队长点击格子可交换队员位置",4294901760,20,101,1,1,0,0,0):d.default.gi().DrawTextEx(this.iX+25+150+25+25,this.iY+this.iH-60,"提示：组满5人阵型才会生效",4294901760,20,101,1,1,0,0,0),this.btn_ts.Draw(),this.bShowKe)for(i=this.iX+this.iW-120-560+30,a=this.iY+this.iH-120-210+30,d.default.gi().FillRect_2D(i,a,i+560,a+210,2684354560),d.default.gi().FillRect_2D(i,a+30*D.default.iTeamZhen+30,i+560,a+30*D.default.iTeamZhen+60,2701066240),t=0;t<7;t++)for(e=0;e<7;e++)d.default.gi().DrawTextEx(i+80*t+40,a+30*e+15,TeamZhen._ZHEN[e][t],4294967295,20,101,1,1,0,-2,-2)}},{key:"Draw_role",value:function(t,e,i){var a,s,r;if(y.default.iTmpTeamRid[i]==b.default.gameing.me.iRid){if(s=2*D.default.me.iRace+D.default.me.iSex,n.default.gi().BeginGroup(),c.default.DrawAura(0,t,e,n.default.gi(),e),null==this.aa_body[i])for(this.aa_body[i]=m.default.xani_newrole[2*D.default.me.iRace+D.default.me.iSex].InitAnimaWithName("战斗站立_左上",null),a=0;a<o.default._CHANGECOLOR[s].length;a++)D.default.me.iColor[a]<=0||D.default.me.iColor[a]>=6||m.default.xani_color[s][D.default.me.iColor[a]-1].InitAnimaWithName(o.default._CHANGECOLOR[s][a]+"_战斗站立_左上",this.aa_cls[i][a]);for(null==this.aa_weapon[i]&&D.default.me.iWeapTid>=0&&(this.aa_weapon[i]=m.default.xani_weap[2*D.default.me.iRace+D.default.me.iSex][o.default.WeapFlag(D.default.me.iWeapTid)].InitAnimaWithName("战斗站立_左上",null)),n.default.gi().DrawAnima_aa(e,null,t,e,this.aa_body[i]),a=0;a<o.default._CHANGECOLOR[s].length;a++)D.default.me.iColor[a]<=0||D.default.me.iColor[a]>=6||(this.aa_cls[i][a].iFrame=this.aa_body[i].iFrame,n.default.gi().DrawAnima_aa(e,null,t,e,this.aa_cls[i][a]));null!=this.aa_weapon[i]&&D.default.me.iWeapTid>=0&&(n.default.gi().DrawAnima_aa(e,null,t,e,this.aa_weapon[i]),this.aa_weapon[i].NextFrame()),this.aa_body[i].NextFrame(),n.default.gi().DrawText_2(e,1,t,e+20,D.default.me.sName,4286644096,20,1,4278190080),n.default.gi().EndGroup()}else if(null!=(r=b.default.gameing.findnrs(y.default.iTmpTeamRid[i]))){if(s=2*r.iRace+r.iSex,n.default.gi().BeginGroup(),c.default.DrawAura(0,t,e,n.default.gi(),e),null==this.aa_body[i])for(this.aa_body[i]=m.default.xani_newrole[2*r.iRace+r.iSex].InitAnimaWithName("战斗站立_左上",null),a=0;a<o.default._CHANGECOLOR[s].length;a++)r.iColor[a]<=0||r.iColor[a]>=6||m.default.xani_color[s][r.iColor[a]-1].InitAnimaWithName(o.default._CHANGECOLOR[s][a]+"_战斗站立_左上",this.aa_cls[i][a]);for(null==this.aa_weapon[i]&&r.iWeapTid>=0&&(this.aa_weapon[i]=m.default.xani_weap[2*r.iRace+r.iSex][o.default.WeapFlag(r.iWeapTid)].InitAnimaWithName("战斗站立_左上",null)),n.default.gi().DrawAnima_aa(e,null,t,e,this.aa_body[i]),a=0;a<o.default._CHANGECOLOR[s].length;a++)r.iColor[a]<=0||r.iColor[a]>=6||(this.aa_cls[i][a].iFrame=this.aa_body[i].iFrame,n.default.gi().DrawAnima_aa(e,null,t,e,this.aa_cls[i][a]));null!=this.aa_weapon[i]&&r.iWeapTid>=0&&(n.default.gi().DrawAnima_aa(e,null,t,e,this.aa_weapon[i]),this.aa_weapon[i].NextFrame()),this.aa_body[i].NextFrame(),n.default.gi().DrawText_2(e,1,t,e+20,r.sName,4286644096,20,1,4278190080),n.default.gi().EndGroup()}var u=0;switch(TeamZhen._ZHENADD[D.default.iTeamZhen][i].length){case 1:u=25;break;case 2:u=35;break;case 3:u=45}for(a=0;a<TeamZhen._ZHENADD[D.default.iTeamZhen][i].length;a++)n.default.gi().DrawAnima_aa(e+1,null,t,e+20*a-u,this.aa_add),n.default.gi().DrawText(e+2,1,t+29,e+10.5+20*a-u,TeamZhen._ZHENADD[D.default.iTeamZhen][i][a],4294967295,16)}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.bShowKe)return 3==t&&(this.bShowKe=!1),!0;if(this.btn_ts.ProcTouch(t,e,i))return this.btn_ts.bCheck()&&(this.bShowKe=!0),!0;for(a=0;a<6;a++)this.btn_zhen[a].ProcTouch(t,e,i)&&this.btn_zhen[a].bCheck()&&(D.default.iTeamZhen=a,g.default.gi().s_ChangeZhen(a));for(a=1;a<5;a++)if(u.default.bInLX(e,i,this.poslist[a][0],this.poslist[a][1],148,112))return 1==t&&this.iLockPos>0&&this.iLockPos!=a?(g.default.gi().s_TeamOperate(8,this.iLockPos,a),this.iLockPos=-1):this.iLockPos=a,!0;return this.iLockPos=-1,this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&_.default.gi().PopStat(1),!0):3==t&&!u.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)&&(_.default.gi().PopStat(1),!0)}}]),TeamZhen}();i.default=w,w._ZHEN=[["          ","普通阵","天罡阵","八卦阵","疾风阵","飞龙阵","聚星阵"],["普通阵","0%","-5%","-5%","-5%","-5%","-5%"],["天罡阵","5%","0%","-5%","5%","10%","-10%"],["八卦阵","5%","5%","0%","10%","-10%","-5%"],["疾风阵","5%","-5%","-10%","0%","5%","10%"],["飞龙阵","5%","-10%","10%","-5%","0%","5%"],["聚星阵","5%","10%","5%","-10%","-5%","0%"]],w._ZHENADD=[[[],[],[],[],[]],[["+5%物攻","+5%法攻"],["+5%物攻","+5%法攻"],["+5%物攻","+5%法攻"],["+5%物攻","+5%法攻"],["+5%物攻","+5%法攻"]],[["+3%物防","+3%法防"],["+5%法防"],["+5%法防"],["+5%物防"],["+5%物防"]],[["+5%速度"],["+5%速度"],["+5%速度"],["+5%速度"],["+5%速度"]],[["+8%物暴"],["+5%法攻"],["+5%法攻"],["+5%速度"],["+5%速度"]],[["+8%法攻"],["+5%封中"],["+5%法防"],["+5%物防"],["+5%物防"]]],w._ZHENSTAND=[[[0,0,0,0,0],[4,2,1,3,5],[0,0,0,0,0]],[[0,0,0,0,0],[4,2,0,3,5],[0,0,1,0,0]],[[0,0,0,0,0],[4,0,0,0,5],[0,2,1,3,0]],[[0,0,0,0,0],[4,0,1,0,5],[0,2,0,3,0]],[[0,0,0,0,0],[0,2,0,3,0],[4,0,1,0,5]],[[0,0,0,0,0],[0,2,0,3,0],[0,4,1,5,0]]],w.CleanAnima=function(){var t;if(_.default.gi().CheckStat(_.default.GS_TEAMZHEN)){var e=_.default.gi().LastStat(0);for(t=0;t<5;t++)e.aa_body[t]=null,e.aa_weapon[t]=null;e.iLockPos=-1}},w.Open=function(){_.default.gi().iXStat==_.default.GS_TEAMZHEN?_.default.gi().LastStat(0):_.default.gi().PushStat(_.default.GS_TEAMZHEN)}},{"../../../../../config/GameData":4,"../../../../../config/GmConfig":5,"../../../../../config/SortAnima":6,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/AnimaAction":25,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/FireworksEffect":64,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/gameing/Gameing":91,"../../../../../engtst/mgm/gameing/NearRole":93,"../../../../../engtst/mgm/gameing/help/ang/PromptActivity":201,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../map/DrawBuffer":283,"../../../../../map/MapManager":286,"../../../../../mgm/newmainmenu/StarEffect":311,"./MyTeam":266}],272:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../engine/control/XButton")),u=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/InNumber")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),g=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function GoodsStoreFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GoodsStoreFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(GoodsStoreFrame.__proto__||Object.getPrototypeOf(GoodsStoreFrame)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=940,i.iH=555,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_switch=new Array(20),e=0;e<20;e++)i.btn_switch[e]=new o.default(u.default.xani_nui3),i.btn_switch[e].InitButton("仓库按钮");return i.btn_out=new o.default(u.default.xani_nui2),i.btn_out.InitButton("按钮1_110"),i.btn_out.sName="取出",i.btn_in=new o.default(u.default.xani_nui2),i.btn_in.InitButton("按钮1_110"),i.btn_in.sName="存入",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(GoodsStoreFrame,r.default),a(GoodsStoreFrame,[{key:"Draw",value:function(){var t,e,i;for(d.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),e=this.iX+30,i=this.iY+30,t=0;t<13;t++){if(t==this.iStorePoint&&(this.btn_switch[t].bMouseDown=!0,this.btn_switch[t].bMouseIn=!0),this.btn_switch[t].Move(e+68*t,i,60,60),this.btn_switch[t].iNameColor=4278206039,!(t<GoodsStoreFrame.iStoreCount)){this.btn_switch[t].sName="开",this.btn_switch[t].Draw();break}this.btn_switch[t].sName=""+(t+1),this.btn_switch[t].Draw()}i+=80,this.iGx1=e,this.iGy1=i,g.default.new_DrawGoods(e,i,_.default.gi().goods[this.iStorePoint+10],null,null),null!=this.lockgoods1&&g.default.new_DrawRect(e,i,_.default.gi().goods[this.iStorePoint+10],this.lockgoods1,0),this.iGx2=e+430+20,this.iGy2=i,g.default.new_DrawGoods(this.iGx2,i,_.default.gi().goods[2],null,null),null!=this.lockgoods2&&g.default.new_DrawRect(this.iGx2,i,_.default.gi().goods[2],this.lockgoods2,0),i+=365,this.btn_out.Move(e+430-110,i-1,110,52),this.btn_out.Draw(),d.default.new_TagText2(e,i+9,150,"存银",""+m.default.me.rbs.iStore),this.btn_in.Move(e+430+20+430-110,i,110,52),this.btn_in.Draw(),d.default.new_TagText2(e+430+20,i+9,150,"现金",""+m.default.me.rbs.iMoney),h.default.end(h.default.CONFIRM_BUYSTORE)&&h.default.bConfirm&&l.default.gi().s_OpenStore(10,10*(GoodsStoreFrame.iStoreCount-GoodsStoreFrame.MAXFREESTORE+1),0),c.default.end(c.default.IN_IN)&&c.default.bOk&&l.default.gi().s_OpenStore(20,c.default.iNumber,0),c.default.end(c.default.IN_OUT)&&c.default.bOk&&l.default.gi().s_OpenStore(21,c.default.iNumber,0),g.default.bShowDetail()&&g.default.new_DrawDetail(null,-1,-1,0)}},{key:"ProcTouch",value:function(t,e,i){var a;if(null==this.lockgoods1&&null==this.lockgoods2||null!=this.lockgoods1){if(this.lockgoods1=g.default.new_LockGoods(e,i,this.iGx1,this.iGy1,_.default.gi().goods[this.iStorePoint+10],t),g.default.bCanProc()&&null!=this.lockgoods1)for(a=0;a<20;a++)if(_.default.gi().goods[2][a].iGid<=0){_.default.gi().MoveGoods(this.lockgoods1,_.default.gi().goods[2][a]),this.lockgoods1=null;break}g.default.bCanMove()&&null!=this.lockgoods1&&_.default.gi().MoveGoods(this.lockgoods1,g.default.swaplock)}if(null==this.lockgoods1&&null==this.lockgoods2||null!=this.lockgoods2){if(this.lockgoods2=g.default.new_LockGoods(e,i,this.iGx2,this.iGy2,_.default.gi().goods[2],t),g.default.bCanProc()&&null!=this.lockgoods2)for(a=0;a<20;a++)if(_.default.gi().goods[this.iStorePoint+10][a].iGid<=0){_.default.gi().MoveGoods(this.lockgoods2,_.default.gi().goods[this.iStorePoint+10][a]),this.lockgoods2=null;break}g.default.bCanMove()&&null!=this.lockgoods2&&_.default.gi().MoveGoods(this.lockgoods2,g.default.swaplock)}if(this.btn_out.ProcTouch(t,e,i)&&this.btn_out.bCheck()&&c.default.start(c.default.IN_OUT,"输入要取出金额",m.default.me.rbs.iStore,m.default.me.rbs.iStore),this.btn_in.ProcTouch(t,e,i)&&this.btn_in.bCheck()&&(a=m.default.me.rbs.iStore+m.default.me.rbs.iMoney>2e7?2e7-m.default.me.rbs.iStore:m.default.me.rbs.iMoney,c.default.start(c.default.IN_IN,"输入要存入金额",a,a)),3==t&&!s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))return f.default.gi().PopStat(1),!0;for(a=0;a<13;a++)this.btn_switch[a].ProcTouch(t,e,i)&&this.btn_switch[a].bCheck()&&(a<GoodsStoreFrame.iStoreCount?a!=this.iStorePoint&&(this.iStorePoint=a,f.default.gi().PushStat(f.default.GS_LOADING1),l.default.gi().s_OpenStore(0,a,0)):a==GoodsStoreFrame.iStoreCount&&h.default.start(h.default.CONFIRM_BUYSTORE,"是否确认花费"+10*(GoodsStoreFrame.iStoreCount-GoodsStoreFrame.MAXFREESTORE+1)+"元宝开启一个仓库？"));return!1}}]),GoodsStoreFrame}();i.default=p,p.MAXFREESTORE=3,p.iStoreCount,p.ResetStoreCount=function(t){p.iStoreCount=t%100+p.MAXFREESTORE}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/InNumber":74,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222}],273:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),s=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),r=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),o=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/Pets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(){function MyTrade(){var t;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyTrade),MyTrade.bCheckTradeing=!1,this.dgs=new Array(3),this.dgcount=new Int32Array(3),this.dps=new Array(3),t=0;t<3;t++)this.dgs[t]=new r.default,this.dps[t]=new o.default;this.mgs=new Array(3),this.mps=new Array(3)}return a(MyTrade,[{key:"tradestart",value:function(t){var e;for(this.iDRid=t.GetNextInt(),this.sDName=t.GetNextString(),e=0;e<3;e++)this.dgs[e].iGid=-1,this.dgcount[e]=1,this.dps[e].iPid=-1,this.mgs[e]=null,this.mps[e]=null;this.dproc=0,this.mproc=0,s.default.gi().PushStat(s.default.GS_MYTRADEFRAME),MyTrade.bCheckTradeing=!0}},{key:"tradeready",value:function(t){for(var e,i=0,a=0;;)switch(t.GetNextByte()){case 0:return void(this.dproc=1);case 1:for(this.dgs[i].iGid=t.GetNextInt(),this.dgs[i].iTid=t.GetNextShort(),this.dgs[i].iCount=t.GetNextByte(),e=0;e<8;e++)this.dgs[i].iAtts[e]=t.GetNextInt();n.default.xani_ngoods.InitAnimaWithName(n.default.de_goods.strValue(this.dgs[i].iTid,-1,10),this.dgs[i].aa),i++;break;case 2:for(this.dps[a].iPid=t.GetNextInt(),this.dps[a].iTid=t.GetNextShort(),this.dps[a].sName=t.GetNextString(),this.dps[a].iLev=t.GetNextShort(),this.dps[a].iExp=t.GetNextInt(),this.dps[a].iHp=t.GetNextShort(),this.dps[a].iMp=t.GetNextShort(),this.dps[a].iLife=t.GetNextShort(),e=0;e<5;e++)this.dps[a].iBaseAtt[e]=t.GetNextShort();for(e=0;e<5;e++)this.dps[a].zz[e]=t.GetNextShort();for(this.dps[a].cz=t.GetNextShort(),e=0;e<8;e++)this.dps[a].jn[e]=t.GetNextShort();this.dps[a].iAddAtt=t.GetNextByte(),this.dps[a].iBaobao=t.GetNextByte(),this.dps[a].iFlag=t.GetNextShort(),this.dps[a].sName=n.default.de_pet.strValue(this.dps[a].iTid,0,1),0!=(1&this.dps[a].iBaobao)&&(this.dps[a].sName=this.dps[a].sName+"宝宝"),0!=(2&this.dps[a].iBaobao)&&(this.dps[a].sName="变异"+this.dps[a].sName),a++;break;case 3:this.dmoney=t.GetNextInt()}}}]),MyTrade}();i.default=u,u.bCheckTradeing=!1,u.mt=new u},{"../../../../../engine/PackageTools":9,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/pet/Pets":247}],274:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../../engine/control/XButton")),u=_interopRequireDefault(t("../../../../../engine/control/XButtonEx2")),l=(_interopRequireDefault(t("../../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../../engine/control/XInputNumber"))),f=(_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../engtst/mgm/frame/message/EasyMessage")),g=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/fast/WatchOn")),_=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/GmMe")),p=(_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/Goods")),_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/GoodsDraw"))),b=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/goods/MyGoods")),D=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/MyPets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function MyTradeFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MyTradeFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MyTradeFrame.__proto__||Object.getPrototypeOf(MyTradeFrame)).call(this));for(i.maxcount=[999,999,999],i.pani=t,i.pm3f=t.pm3f,i.iW=680,i.iH=475,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_dgoods=new Array(3),i.btn_dpet=new Array(3),i.btn_mgoods=new Array(3),i.btn_mpet=new Array(3),i.in_count=new Array(3),e=0;e<3;e++)i.btn_dgoods[e]=new o.default(f.default.xani_nui3),i.btn_dgoods[e].InitButton("物品格子"),i.btn_mgoods[e]=new o.default(f.default.xani_nui3),i.btn_mgoods[e].InitButton("物品格子"),i.btn_dpet[e]=new o.default(f.default.xani_nui2),i.btn_dpet[e].InitButton("宠物头像框"),i.btn_mpet[e]=new o.default(f.default.xani_nui2),i.btn_mpet[e].InitButton("宠物头像框"),i.in_count[e]=new l.default(f.default.xani_nui3),i.in_count[e].iNumber=1;for(i.btn_selgp=new Array(8),e=0;e<8;e++)i.btn_selgp[e]=new u.default(f.default.xani_button),i.btn_selgp[e].InitButton("3号按钮250_42");return i.bSelectGoods=!1,i.lockgoods=null,i.iPetPoint=0,i.iPetSelect=-1,i.iShowDGoodsPoint=-1,i.in_money=new l.default(f.default.xani_nui3),i.in_money.iNumber=0,i.in_money.MinMax(0,_.default.me.rbs.iMoney),i.btn_ready=new o.default(f.default.xani_nui3),i.btn_ready.InitButton("内框按钮"),i.btn_ready.Move(i.iX+i.iW/2+30,i.iY+i.iH-30-55,98,55),i.btn_ready.sName="准备",i.btn_trade=new o.default(f.default.xani_nui3),i.btn_trade.InitButton("内框按钮"),i.btn_trade.Move(i.iX+i.iW/2+30,i.iY+i.iH-30-55,98,55),i.btn_trade.sName="交易",i.btn_close=new o.default(f.default.xani_nui3),i.btn_close.InitButton("内框按钮"),i.btn_close.Move(i.iX+i.iW-98-30,i.iY+i.iH-30-55,98,55),i.btn_close.sName="取消",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MyTradeFrame,r.default),a(MyTradeFrame,[{key:"Draw",value:function(){var t,e,i,a,s,r;for(c.default.new_bigframe(this.iX,this.iY,this.iW/2,this.iH),c.default.new_bigframe(this.iX+this.iW/2,this.iY,this.iW/2,this.iH),i=this.iX+30,a=this.iY+30,this.pm3f.DrawTextEx(i,a,MyTrade.mt.sDName+"("+MyTrade.mt.iDRid+")",4278190080,30,101,1,1,0,0,0),a+=45,t=0;t<3;t++)this.btn_dgoods[t].Move(i+100*t,a,80,80),this.btn_dgoods[t].Draw(),MyTrade.mt.dproc>=1&&MyTrade.mt.dgs[t].iGid>0?(p.default.new_DrawOneGoods(this.btn_dgoods[t].iX,this.btn_dgoods[t].iY,MyTrade.mt.dgs[t],null,null),c.default.new_Text(this.btn_dgoods[t].iX,this.btn_dgoods[t].iY+80+10,80,""+MyTrade.mt.dgs[t].iCount)):c.default.new_Text(this.btn_dgoods[t].iX,this.btn_dgoods[t].iY+80+10,80,"");for(a+=140,this.pm3f.DrawTextEx(i+10,a+25,"铜币:",4278190080,30,101,1,1,0,0,-2),0==MyTrade.mt.dproc?c.default.new_Text(i+100,a+10,180,""):c.default.new_Text(i+100,a+10,180,""+MyTrade.mt.dmoney),a+=65,this.pm3f.DrawTextEx(i+10,a+40,"宠物:",4278190080,30,101,1,1,0,0,-2),t=0;t<2;t++)this.btn_dpet[t].Move(i+100+100*t,a,80,80),f.default.xani_nui2.DrawAnima(this.btn_dpet[t].iX,this.btn_dpet[t].iY,"宠物头像框",0),MyTrade.mt.dproc>=1&&MyTrade.mt.dps[t].iPid>0&&f.default.xani_head.DrawAnima_aa(i+100+100*t,a,f.default.de_pet.strValue(MyTrade.mt.dps[t].iTid,0,1),0);for(a+=110,0==MyTrade.mt.dproc?this.pm3f.DrawText_2(this.iX+this.iW/4,a+15,"未准备",4294901760,30,101,1,1,0,-2,0,1,4278190080):1==MyTrade.mt.dproc&&this.pm3f.DrawText_2(this.iX+this.iW/4,a+15,"已准备",4278255360,30,101,1,1,0,-2,0,1,4278190080),i=this.iX+this.iW/2+30,a=this.iY+30,a+=45,t=0;t<3;t++)this.btn_mgoods[t].Move(i+100*t,a,80,80),this.btn_mgoods[t].Draw(),null!=MyTrade.mt.mgs[t]&&p.default.new_DrawOneGoods_ext(this.btn_mgoods[t].iX,this.btn_mgoods[t].iY,MyTrade.mt.mgs[t],this.in_count[t].iNumber);for(t=0;t<3;t++)null!=MyTrade.mt.mgs[t]&&((e=f.default.de_goods.intValue(MyTrade.mt.mgs[t].iTid,0,28))>1?(this.in_count[t].Move(this.btn_mgoods[t].iX,this.btn_mgoods[t].iY+80,80),this.in_count[t].MinMax(1,MyTrade.mt.mgs[t].iCount),this.in_count[t].Draw()):this.in_count[t].iNumber=1);for(a+=140,this.pm3f.DrawTextEx(i+10,a+25,"铜币:",4278190080,30,101,1,1,0,0,-2),this.in_money.Move(i+100,a,180),this.in_money.Draw(),a+=65,this.pm3f.DrawTextEx(i+10,a+40,"宠物:",4278190080,30,101,1,1,0,0,-2),t=0;t<2;t++)this.btn_mpet[t].Move(i+100+100*t,a,80,80),f.default.xani_nui2.DrawAnima(this.btn_mpet[t].iX,this.btn_mpet[t].iY,"宠物头像框",0),null!=MyTrade.mt.mps[t]&&MyTrade.mt.mps[t].iPid>0&&f.default.xani_head.DrawAnima_aa(i+100+100*t,a,f.default.de_pet.strValue(MyTrade.mt.mps[t].iTid,0,1),0);for(a+=110,0==MyTrade.mt.mproc?(this.pm3f.DrawText_2(this.iX+this.iW/2+this.iW/4,a+15,"未准备",4294901760,30,101,1,1,0,-2,0,1,4278190080),this.btn_ready.Draw()):1==MyTrade.mt.mproc?this.pm3f.DrawText_2(this.iX+this.iW/2+this.iW/4,a+15,"已准备",4278255360,30,101,1,1,0,-2,0,1,4278190080):2==MyTrade.mt.mproc&&this.pm3f.DrawText_2(this.iX+this.iW/2+30,a+15,"等待对方交易",4278255360,30,101,1,1,0,0,0,1,4278190080),1==MyTrade.mt.mproc&&MyTrade.mt.dproc>=1&&this.btn_trade.Draw(),this.btn_close.Draw(),t=0;t<3;t++)MyTrade.mt.dproc>=1&&MyTrade.mt.dgs[t].iGid>0&&this.iShowDGoodsPoint==t&&p.default.new_DrawDetail(MyTrade.mt.dgs[t],this.btn_dgoods[t].iX,this.btn_dgoods[t].iY,0);if(this.bSelectGoods&&(s=490,r=405,i=(n.default.SCRW-s)/2,a=(n.default.SCRH-r)/2,this.iGx=i+30,this.iGy=a+30,c.default.new_bigframe(i,a,s,r),p.default.new_DrawGoods(i+30,a+30,b.default.gi().goods[2],MyTrade.mt.mgs,this.maxcount),null!=this.lockgoods&&(p.default.new_DrawRect(i+30,a+30,b.default.gi().goods[2],this.lockgoods,0),p.default.bShowDetail()&&p.default.new_DrawDetail(this.lockgoods,-1,-1,0))),this.bSelectPet)for(s=310,r=50*D.default.mp.iPetCount+50,i=(n.default.SCRW-s)/2,a=(n.default.SCRH-r)/2,c.default.frame_type4("10号框20_20",i,a,s,r,20,20),t=0;t<D.default.mp.iPetCount;t++){for(e=0;e<2&&D.default.mp.pets[t]!=MyTrade.mt.mps[e];e++);e<2||(this.btn_selgp[t].Move(i+30,a+30+50*t,250,42),this.btn_selgp[t].sName=D.default.mp.pets[t].sName,this.btn_selgp[t].Draw())}}},{key:"ProcTouch",value:function(t,e,i){var a,r,o,u,l;if(0==MyTrade.mt.mproc){if(this.bSelectPet){for(310,l=50*D.default.mp.iPetCount+50,o=(n.default.SCRW-310)/2,u=(n.default.SCRH-l)/2,a=0;a<D.default.mp.iPetCount;a++){for(r=0;r<2&&D.default.mp.pets[a]!=MyTrade.mt.mps[r];r++);r<2||this.btn_selgp[a].ProcTouch(t,e,i)&&this.btn_selgp[a].bCheck()&&(this.iPetSelect=a,D.default.mp.pets[this.iPetSelect].iFlag/100%10==0?(this.bSelectPet=!1,MyTrade.mt.mps[this.iPetPoint]=D.default.mp.pets[this.iPetSelect]):m.default.easymsg.AddMessage("绑定宠物无法交易"))}return 3!=t||s.default.bInRect(e,i,o,u,310,l)||(this.bSelectPet=!1),!0}if(this.bSelectGoods){if(this.lockgoods=p.default.new_LockGoods(e,i,this.iGx,this.iGy,b.default.gi().goods[2],t),null!=this.lockgoods){for(a=0;a<3;a++)if(MyTrade.mt.mgs[a]==this.lockgoods)return this.lockgoods=null,!0;if(p.default.bCanProc())return MyTrade.mt.mgs[this.iGoodsPoint]=this.lockgoods,this.bSelectGoods=!1,this.lockgoods=null,this.in_count[this.iGoodsPoint].iNumber=1,!0}return 3!=t||s.default.bInRect(e,i,this.iGx-30,this.iGy-30,490,405)||(this.bSelectGoods=!1),!0}if(this.in_money.ProcTouch(t,e,i))return!0;for(a=0;a<3;a++)if(null!=MyTrade.mt.mgs[a]&&(r=f.default.de_goods.intValue(MyTrade.mt.mgs[a].iTid,0,28))>1&&this.in_count[a].ProcTouch(t,e,i))return!0;for(a=0;a<3;a++)this.btn_mgoods[a].ProcTouch(t,e,i)&&this.btn_mgoods[a].bCheck()&&(null==MyTrade.mt.mgs[a]?(this.iGoodsPoint=a,this.bSelectGoods=!0,this.lockgoods=null):MyTrade.mt.mgs[a]=null);for(a=0;a<2;a++)if(this.btn_mpet[a].ProcTouch(t,e,i))return this.btn_mpet[a].bCheck()&&(null==MyTrade.mt.mps[a]?(this.iPetPoint=a,this.iPetSelect=-1,this.bSelectPet=!0):MyTrade.mt.mps[a]=null),!0;if(this.btn_ready.ProcTouch(t,e,i)){if(this.btn_ready.bCheck()){var c=new Int32Array(10);for(a=0;a<10;a++)c[a]=0;for(a=0;a<3;a++)null==MyTrade.mt.mgs[a]?c[2*a]=0:(c[2*a]=MyTrade.mt.mgs[a].iGid,c[2*a+1]=this.in_count[a].iNumber),null==MyTrade.mt.mps[a]?c[a+6]=0:c[a+6]=MyTrade.mt.mps[a].iPid;this.in_money.iNumber>0&&this.in_money.iNumber<=_.default.me.rbs.iMoney&&(c[9]=this.in_money.iNumber),h.default.gi().s_Trade(1,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9]),MyTrade.mt.mproc=1}return!0}}if(1==MyTrade.mt.dproc){for(this.iShowDGoodsPoint=-1,a=0;a<3;a++)if(this.btn_dgoods[a].ProcTouch(t,e,i))return this.btn_dgoods[a].bCheck()&&MyTrade.mt.dgs[a].iGid>0&&(this.iShowDGoodsPoint=a),!0;for(a=0;a<2;a++)if(this.btn_dpet[a].ProcTouch(t,e,i))return this.btn_dpet[a].bCheck()&&MyTrade.mt.dps[a].iPid>0&&g.default.Init_Pet(MyTrade.mt.dps[a]),!0}return 1==MyTrade.mt.mproc&&MyTrade.mt.dproc>=1&&this.btn_trade.ProcTouch(t,e,i)?(this.btn_trade.bCheck()&&(h.default.gi().s_Trade(2,0,0,0,0,0,0,0,0,0,0),MyTrade.mt.mproc=2),!0):(this.btn_close.ProcTouch(t,e,i)&&this.btn_close.bCheck()&&d.default.gi().PopStat(1),!1)}}]),MyTradeFrame}();i.default=y},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/control/XInput":18,"../../../../../engine/control/XInputNumber":19,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../../engtst/mgm/gameing/fast/WatchOn":125,"../../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../../engtst/mgm/gameing/me/goods/Goods":217,"../../../../../engtst/mgm/gameing/me/goods/GoodsDraw":218,"../../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../../engtst/mgm/gameing/me/pet/MyPets":245}],275:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../../engine/PackageTools")),_interopRequireDefault(t("../../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../../../../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../../../engtst/mgm/GmProtocol")),h=_interopRequireDefault(t("../../../../../engtst/mgm/XStat")),d=_interopRequireDefault(t("../../../../../engtst/mgm/frame/Confirm1")),c=_interopRequireDefault(t("../../../../../engtst/mgm/frame/DrawMode")),m=_interopRequireDefault(t("../../../../../engtst/mgm/gameing/me/pet/MyPets"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function PetStoreFrame(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PetStoreFrame);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(PetStoreFrame.__proto__||Object.getPrototypeOf(PetStoreFrame)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iW=510,i.iH=400,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.btn_io=new o.default(l.default.xani_button),i.btn_io.InitButton("1号按钮90_60"),i.btn_watch=new o.default(l.default.xani_button),i.btn_watch.InitButton("1号按钮90_60"),i.btn_watch.sName="查看",i.iPid=new Int32Array(16),i.sPName=new Array(16),i.iPetPoint=-1,i.btn_switch=new Array(20),e=0;e<20;e++)i.btn_switch[e]=new o.default(l.default.xani_button),i.btn_switch[e].InitButton("4号按钮60_60"),i.btn_switch[e].Move(i.iX+20+70*e,i.iY+i.iH-30-60,60,60),i.btn_switch[e].sName=""+(e+1);return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(PetStoreFrame,r.default),a(PetStoreFrame,[{key:"Draw",value:function(){var t,e,i,a,n;for(c.default.frame_type4("10号框20_20",this.iX,this.iY,this.iW,this.iH,20,20),e=this.iX+20,i=this.iY+20,a=180,n=260,c.default.frame_type4("11号框20_20",e,i,a,n,20,20),t=0;t<this.iCount;t++)this.iPetPoint>=0&&0==this.iPagePoint&&this.iPetPoint==t&&c.default.frame_type1("12号框20_30",e+10,i+10+30*t,160,20),u.default.gi().DrawTextEx(e+10,i+10+15+30*t,this.sPName[t],4279324257,20,101,1,1,0,0,-2);for(this.iPetPoint>=0&&(0==this.iPagePoint?this.btn_io.sName="取出":this.btn_io.sName="存入",this.btn_io.Move(e+a+10,i+130-30-60,90,60),this.btn_io.Draw(),this.btn_watch.Move(e+a+10,i+130+30,90,60),this.btn_watch.Draw()),e=this.iX+20+a+10+90+10,c.default.frame_type4("11号框20_20",e,i,a,n,20,20),t=0;t<m.default.mp.iPetCount;t++)this.iPetPoint>=0&&1==this.iPagePoint&&this.iPetPoint==t&&c.default.frame_type1("12号框20_30",e+10,i+10+30*t,160,20),u.default.gi().DrawTextEx(e+10,i+10+15+30*t,m.default.mp.pets[t].sName,4279324257,20,101,1,1,0,0,-2);for(t=0;t<6;t++){if(t==this.iStorePoint&&(this.btn_switch[t].bMouseDown=!0,this.btn_switch[t].bMouseIn=!0),!(t<PetStoreFrame.iStoreCount)){this.btn_switch[t].sName="开",this.btn_switch[t].Draw();break}this.btn_switch[t].sName=""+(t+1),this.btn_switch[t].Draw()}d.default.end(d.default.CONFIRM_BUYSTORE)&&d.default.bConfirm&&f.default.gi().s_OpenStore(11,10*(PetStoreFrame.iStoreCount-PetStoreFrame.MAXFREESTORE+1),0)}},{key:"ProcTouch",value:function(t,e,i){var a,n,r;if(this.iPetPoint>=0){if(this.btn_io.ProcTouch(t,e,i))return this.btn_io.bCheck()&&(0==this.iPagePoint?(f.default.gi().s_OpenStore(31,this.iStorePoint,this.iPid[this.iPetPoint]),this.btn_io.sName="取出"):(f.default.gi().s_OpenStore(30,this.iStorePoint,m.default.mp.pets[this.iPetPoint].iPid),this.btn_io.sName="存入")),!0;if(this.btn_watch.ProcTouch(t,e,i))return this.btn_watch.bCheck()&&(0==this.iPagePoint?f.default.gi().s_WatchOn(2,this.iPid[this.iPetPoint],0,""):f.default.gi().s_WatchOn(2,m.default.mp.pets[this.iPetPoint].iPid,0,"")),!0}for(this.iPetPoint=-1,n=this.iX+20,r=this.iY+20,a=0;a<this.iCount;a++)if(s.default.bInRect(e,i,n+10,r+10+30*a,160,30))return this.iPagePoint=0,this.iPetPoint=a,!0;for(n=this.iX+20+180+10+90+10,a=0;a<m.default.mp.iPetCount;a++)if(s.default.bInRect(e,i,n+10,r+10+30*a,160,30))return this.iPagePoint=1,this.iPetPoint=a,!0;for(a=0;a<6;a++)this.btn_switch[a].ProcTouch(t,e,i)&&this.btn_switch[a].bCheck()&&(a<PetStoreFrame.iStoreCount?a!=this.iStorePoint&&(this.iStorePoint=a,h.default.gi().PushStat(h.default.GS_LOADING1),f.default.gi().s_OpenStore(1,a,0)):a==PetStoreFrame.iStoreCount&&d.default.start(d.default.CONFIRM_BUYSTORE,"是否确认花费"+10*(PetStoreFrame.iStoreCount-PetStoreFrame.MAXFREESTORE+1)+"元宝开启一个宠物仓库？"));return 3!=t||s.default.bInRect(e,i,this.iX,this.iY,this.iW,this.iH)||h.default.gi().PopStat(1),!1}}]),PetStoreFrame}();i.default=g,g.MAXFREESTORE=1,g.iStoreCount,g.ResetStoreCount=function(t){g.iStoreCount=t/100+g.MAXFREESTORE},g.Open=function(t){var e;h.default.gi().LastStatType(0)==h.default.GS_LOADING1&&h.default.gi().PopStat(1),h.default.gi().LastStatType(0)!=h.default.GS_PETSTOREFRAME&&h.default.gi().PushStat(h.default.GS_PETSTOREFRAME);var i=h.default.gi().LastStat(0);for(i.iStorePoint=t.GetNextByte(),i.iCount=t.GetNextByte(),e=0;e<i.iCount;e++)i.iPid[e]=t.GetNextInt(),i.sPName[e]=t.GetNextString();i.iPetPoint=-1}},{"../../../../../config/GmConfig":5,"../../../../../config/XDefine":7,"../../../../../engine/BaseClass":8,"../../../../../engine/PackageTools":9,"../../../../../engine/control/XButton":14,"../../../../../engine/control/XButtonEx2":16,"../../../../../engine/graphics/M3DFast":28,"../../../../../engine/graphics/XAnima":30,"../../../../../engtst/mgm/GmPlay":65,"../../../../../engtst/mgm/GmProtocol":66,"../../../../../engtst/mgm/XStat":70,"../../../../../engtst/mgm/frame/Confirm1":71,"../../../../../engtst/mgm/frame/DrawMode":72,"../../../../../engtst/mgm/gameing/me/pet/MyPets":245}],276:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GameData")),s=_interopRequireDefault(t("../../../../engine/xms/RunFirst")),r=_interopRequireDefault(t("../../../../engine/xms/XmsEngine")),o=(_interopRequireDefault(t("../../../../engine/xms/control/XmsCButton")),_interopRequireDefault(t("../../../../engine/xms/control/XmsCSlider")),_interopRequireDefault(t("../../../../engine/xms/control/XmsCText")),_interopRequireDefault(t("../../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../../engine/xms/first/X_FIRST")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol"))),u=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),l=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),f=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/PromptMessage")),h=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods")),d=_interopRequireDefault(t("./GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function xms_AddPoint(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,xms_AddPoint);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(xms_AddPoint.__proto__||Object.getPrototypeOf(xms_AddPoint)).call(this));return t._RMD=["10级前自动升级加点，10级拜师后方可自己分配属性点数","#c0000ff4力量1体质# #cffffff常用加点，站得稳生存强 有输出#e#c0000ff5力量# #cffffff高物理输出，克制法系#e#c0000ff4力量1敏捷# #cffffff适用于竞技玩法，出手快输出强","#c0000ff3敏捷2耐力# #cffffff常用加点，出手快，站得稳，生存强#e#c0000ff4敏捷1体/5敏捷# #cffffff高端玩法，出手快，生存弱，适合高端玩家","#c0000ff2体力3耐力/3体力2耐力# #cffffff主流加点，站得住，生存强#e#c0000ff3灵力/1体力/1耐力# #cffffff任务加点，输出高，生存强","#c0000ff4力量1体质# #cffffff常用加点，站得稳生存强 有输出#e#c0000ff5力量# #cffffff高物理输出，克制法系#e#c0000ff4力量1敏捷# #cffffff适用于竞技玩法，出手快输出强","#c0000ff4灵力1体力/5灵力# #cffffff任务加点，输出高#e#c0000ff3灵力 2耐力# #cffffff竞技玩法，有输出，双抗高","#c0000ff\t3敏捷2体力# #cffffff常用加点，出手快，站得稳，生存强#e#c0000ff4敏捷1体/5敏捷# #cffffff高端玩法，出手快，生存弱，适合高端玩家#e#c0000ff4力量1体力# #cffffff适合任务，能输出，生存强","#c0000ff4灵力1体力/5灵力# #cffffff任务加点，输出高#e#c0000ff3灵力 2耐力# #cffffff竞技玩法，有输出，双抗高","#c0000ff2体力2耐力1法力# #cffffff任务型加点，站的住，蓝量够#e#c0000ff2体3耐# #cffffff钢板型仙人，团队中流砥柱的辅助人才","#c0000ff4力量1体力/4力量1耐力/5力量# #cffffff常用加点，物理伤害影响高#e#c0000ff3力量2灵力# #cffffff主流加点，双输出影响高，抗性高#e#c0000ff3体2耐力/2体力2耐力1敏# #cffffff高防御，生存强，辅助路线"],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(xms_AddPoint,s.default),a(xms_AddPoint,[{key:"InitBefore",value:function(){}},{key:"InitAfter",value:function(){var t;for(this.ptxt_base=new Array(7),t=0;t<7;t++)this.ptxt_base[t]=this.FindControl(this.prunclass,"显示"+t),this.ptxt_base[t].iY-=30;for(this.pbtn_sub=new Array(5),this.psli_point=new Array(5),this.pbtn_add=new Array(5),this.ptxt_value=new Array(5),t=0;t<5;t++)this.pbtn_sub[t]=this.FindControl(this.prunclass,"减按钮"+t),this.psli_point[t]=this.FindControl(this.prunclass,"滑杆"+t),this.pbtn_add[t]=this.FindControl(this.prunclass,"加按钮"+t),this.ptxt_value[t]=this.FindControl(this.prunclass,"数值"+t),this.ptxt_value[t].iY-=30,this.psli_point[t].SetRange(6*d.default.me.rbs.iLev);for(this.pbtn_confirm=this.FindControl(this.prunclass,"确认加点"),this.pbtn_wash=this.FindControl(this.prunclass,"洗点"),this.iAddAtt=new Int32Array(5),t=0;t<5;t++)this.iAddAtt[t]=0;this.pbtn_plan=this.FindControl(this.prunclass,"加点方案"),this.pbtn_recommend=this.FindControl(this.prunclass,"推荐加点"),this.iOldFlag=new Int32Array(6),this.InitValue()}},{key:"InitValue",value:function(){var t,e=d.default.me.iRace,i=n.default.iBaseAttAdd[e][0]+d.default.me.rbs.iBaseAtt[0]+d.default.me.rbs.iLev,a=n.default.iBaseAttAdd[e][1]+d.default.me.rbs.iBaseAtt[1]+d.default.me.rbs.iLev,s=n.default.iBaseAttAdd[e][2]+d.default.me.rbs.iBaseAtt[2]+d.default.me.rbs.iLev,r=n.default.iBaseAttAdd[e][3]+d.default.me.rbs.iBaseAtt[3]+d.default.me.rbs.iLev,o=n.default.iBaseAttAdd[e][4]+d.default.me.rbs.iBaseAtt[4]+d.default.me.rbs.iLev;for(this.ptxt_value[0].sText="#c003e57"+i,this.ptxt_value[1].sText="#c003e57"+a,this.ptxt_value[2].sText="#c003e57"+s,this.ptxt_value[3].sText="#c003e57"+r,this.ptxt_value[4].sText="#c003e57"+o,t=0;t<5;t++)this.psli_point[t].SetPos(d.default.me.rbs.iBaseAtt[t]+this.iAddAtt[t]),this.iAddAtt[t]>0&&(this.ptxt_value[t].sText+="#c00ff00+"+this.iAddAtt[t]);for(t=0;t<5;t++)d.default.me.rbs.iBaseAtt[t]+=this.iAddAtt[t];d.default.me.CalcFightAtt();var u=d.default.me.rbs.iMaxHp,l=d.default.me.rbs.iMaxMp,f=d.default.me.rbs.iSpirit,h=d.default.me.rbs.iAttack,c=d.default.me.rbs.iDefence,m=d.default.me.rbs.iSpeed,g=d.default.me.rbs.nut;for(t=0;t<5;t++)d.default.me.rbs.iBaseAtt[t]-=this.iAddAtt[t];d.default.me.CalcFightAtt(),this.ptxt_base[0].sText="#c003e57气  血："+d.default.me.rbs.iMaxHp,d.default.me.rbs.iMaxHp>u?this.ptxt_base[0].sText+="#c00ff00-"+(d.default.me.rbs.iMaxHp-u):d.default.me.rbs.iMaxHp<u&&(this.ptxt_base[0].sText+="#c00ff00+"+(u-d.default.me.rbs.iMaxHp)),this.ptxt_base[1].sText="#c003e57魔  法："+d.default.me.rbs.iMaxMp,d.default.me.rbs.iMaxMp>l?this.ptxt_base[1].sText+="#c00ff00-"+(d.default.me.rbs.iMaxMp-l):d.default.me.rbs.iMaxMp<l&&(this.ptxt_base[1].sText+="#c00ff00+"+(l-d.default.me.rbs.iMaxMp)),this.ptxt_base[2].sText="#c003e57灵  力："+d.default.me.rbs.iSpirit,d.default.me.rbs.iSpirit>f?this.ptxt_base[2].sText+="#c00ff00-"+(d.default.me.rbs.iSpirit-f):d.default.me.rbs.iSpirit<f&&(this.ptxt_base[2].sText+="#c00ff00+"+(f-d.default.me.rbs.iSpirit)),this.ptxt_base[3].sText="#c003e57伤  害："+d.default.me.rbs.iAttack,d.default.me.rbs.iAttack>h?this.ptxt_base[3].sText+="#c00ff00-"+(d.default.me.rbs.iAttack-h):d.default.me.rbs.iAttack<h&&(this.ptxt_base[3].sText+="#c00ff00+"+(h-d.default.me.rbs.iAttack)),this.ptxt_base[4].sText="#c003e57防  御："+d.default.me.rbs.iDefence,d.default.me.rbs.iDefence>c?this.ptxt_base[4].sText+="#c00ff00-"+(d.default.me.rbs.iDefence-c):d.default.me.rbs.iDefence<c&&(this.ptxt_base[4].sText+="#c00ff00+"+(c-d.default.me.rbs.iDefence)),this.ptxt_base[5].sText="#c003e57速  度："+d.default.me.rbs.iSpeed,d.default.me.rbs.iSpeed>m?this.ptxt_base[5].sText+="#c00ff00-"+(d.default.me.rbs.iSpeed-m):d.default.me.rbs.iSpeed<m&&(this.ptxt_base[5].sText+="#c00ff00+"+(m-d.default.me.rbs.iSpeed)),this.ptxt_base[6].sText="#c003e57潜  能："+d.default.me.rbs.nut,d.default.me.rbs.nut>g?this.ptxt_base[6].sText+="#c00ff00-"+(d.default.me.rbs.nut-g):d.default.me.rbs.nut<g&&(this.ptxt_base[6].sText+="#c00ff00+"+(g-d.default.me.rbs.nut)),0!=(2&d.default.me.iFlagExt[11])?this.pbtn_plan.sName="方案1":0!=(2&d.default.me.iFlagExt[13])?this.pbtn_plan.sName="方案2":0!=(2&d.default.me.iFlagExt[15])&&(this.pbtn_plan.sName="方案3")}},{key:"Draw",value:function(){var t,e=!1;for(t=0;t<6;t++)this.iOldFlag[t]!=d.default.me.iFlagExt[11+t]&&(this.iOldFlag[t]=d.default.me.iFlagExt[11+t],e=!0);e&&this.InitValue(),this._Draw(),u.default.end(u.default.CONFIRM_WASHROLEPOINT)&&u.default.bConfirm&&o.default.gi().s_UseGoods(h.default.gi().GetGid(191),1,"")}},{key:"setatt",value:function(t,e){var i,a=e;for(i=0;i<5;i++)t!=i&&(a+=this.iAddAtt[i]);e<0?e=0:a>d.default.me.rbs.nut&&(e-=a-d.default.me.rbs.nut),this.iAddAtt[t]=e,this.InitValue()}},{key:"ProcTouch",value:function(t,e,i){var a;for(this._ProcTouch(t,e,i),a=0;a<5;a++)this.pbtn_sub[a].IsChecked()&&this.setatt(a,this.iAddAtt[a]-1),this.psli_point[a].IsChanged()&&this.setatt(a,this.psli_point[a].iPos-d.default.me.rbs.iBaseAtt[a]),this.pbtn_add[a].IsChecked()&&this.setatt(a,this.iAddAtt[a]+1);if(this.pbtn_confirm.IsChecked()){for(a=0;a<5;a++)d.default.me.rbs.iBaseAtt[a]+=this.iAddAtt[a];for(d.default.me.CalcFightAtt(),o.default.gi().s_AddPoint(this.iAddAtt[0],this.iAddAtt[1],this.iAddAtt[2],this.iAddAtt[3],this.iAddAtt[4]),a=0;a<5;a++)this.iAddAtt[a]=0;this.InitValue()}return this.pbtn_wash.IsChecked()&&(h.default.bHaveGoods(191,1)?u.default.start(u.default.CONFIRM_WASHROLEPOINT,"是否消耗一颗涅槃丹#e重置属性点？"):l.default.fm.Open("背包中没有可消耗的涅槃丹（可在商城购买）")),this.pbtn_plan.IsChecked()&&r.default.pxe.RunXms("人物加点方案"),this.pbtn_recommend.IsChecked()&&f.default.Open("加点说明","#c0000ff体质# #cffffff影响# 气血，灵力，速度# #c0000ff已分配:"+d.default.me.rbs.iBaseAtt[0]+"点#e#c0000ff法力# #cffffff影响# 灵力，魔法# #c0000ff已分配:"+d.default.me.rbs.iBaseAtt[1]+"点#e#c0000ff力量# #cffffff影响# 灵力，伤害，速度# #c0000ff已分配:"+d.default.me.rbs.iBaseAtt[2]+"点#e#c0000ff耐力# #cffffff影响# 灵力，防御，速度# #c0000ff已分配:"+d.default.me.rbs.iBaseAtt[3]+"点#e#c0000ff敏捷# #cffffff影响# 速度# #c0000ff已分配:"+d.default.me.rbs.iBaseAtt[4]+"点#e#cffff00加点方案推荐#e"+this._RMD[d.default.me.rbs.iSchoolId]),!0}}]),xms_AddPoint}();i.default=c},{"../../../../config/GameData":4,"../../../../engine/xms/RunFirst":37,"../../../../engine/xms/XmsEngine":40,"../../../../engine/xms/control/XmsCButton":46,"../../../../engine/xms/control/XmsCSlider":50,"../../../../engine/xms/control/XmsCText":52,"../../../../engine/xms/first/X40_CLASS":59,"../../../../engine/xms/first/X_FIRST":62,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/frame/message/PromptMessage":89,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"./GmMe":211}],277:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../config/GameData")),_interopRequireDefault(t("../../../../engine/xms/RunFirst"))),s=(_interopRequireDefault(t("../../../../engine/xms/control/XmsCButton")),_interopRequireDefault(t("../../../../engine/xms/control/XmsCSlider")),_interopRequireDefault(t("../../../../engine/xms/control/XmsCText")),_interopRequireDefault(t("../../../../engine/xms/first/X40_CLASS")),_interopRequireDefault(t("../../../../engine/xms/first/X_FIRST")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay")),_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol"))),r=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),o=(_interopRequireDefault(t("../../../../engtst/mgm/frame/message/FrameMessage")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods")),_interopRequireDefault(t("./GmMe")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function xms_PointPlan(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,xms_PointPlan),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(xms_PointPlan.__proto__||Object.getPrototypeOf(xms_PointPlan)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(xms_PointPlan,n.default),a(xms_PointPlan,[{key:"InitBefore",value:function(){}},{key:"InitAfter",value:function(){var t;for(this.ptxt_atts=new Array(3),this.pbtn_proc=new Array(3),t=0;t<3;t++)this.pbtn_proc[t]=this.FindControl(this.prunclass,"方案"+t+"按钮"),this.ptxt_atts[t]=this.FindControl(this.prunclass,"方案"+t+"点数");for(this.iOldFlag=new Int32Array(6),t=0;t<6;t++)this.iOldFlag[t]=o.default.me.iFlagExt[11+t];this.InitValue()}},{key:"InitValue",value:function(){var t;for(t=0;t<3;t++)0==(1&o.default.me.iFlagExt[11+2*t])?(this.pbtn_proc[t].sName="开启",this.ptxt_atts[t].sText="未开启"):(0==(2&o.default.me.iFlagExt[11+2*t])?this.pbtn_proc[t].sName="切换":this.pbtn_proc[t].sName="使用中",this.ptxt_atts[t].sText="体质:"+(o.default.me.iFlagExt[11+2*t]>>20&1023)+"，法力:"+(o.default.me.iFlagExt[11+2*t]>>10&1023)+"，力量:"+(o.default.me.iFlagExt[12+2*t]>>20&1023)+"，耐力:"+(o.default.me.iFlagExt[12+2*t]>>10&1023)+"，敏捷:"+(1023&o.default.me.iFlagExt[12+2*t]))}},{key:"Draw",value:function(){var t,e=!1;for(t=0;t<6;t++)this.iOldFlag[t]!=o.default.me.iFlagExt[11+t]&&(this.iOldFlag[t]=o.default.me.iFlagExt[11+t],e=!0);e&&this.InitValue(),this._Draw(),r.default.end(r.default.CONFIRM_OPENPOINTPLAN)&&r.default.bConfirm&&s.default.gi().s_SeverEvent(32,0,this.iPlanPoint,0,0),r.default.end(r.default.CONFIRM_SWAPPOINTPLAN)&&r.default.bConfirm&&s.default.gi().s_SeverEvent(32,1,this.iPlanPoint,0,0)}},{key:"ProcTouch",value:function(t,e,i){var a;for(this._ProcTouch(t,e,i),a=0;a<3;a++)this.pbtn_proc[a].IsChecked()&&(0==(1&o.default.me.iFlagExt[11+2*a])?(1==a&&r.default.start(r.default.CONFIRM_OPENPOINTPLAN,"开启方案2需要消耗800元宝，是否确认开启？"),2==a&&r.default.start(r.default.CONFIRM_OPENPOINTPLAN,"开启方案3需要消耗1600元宝，是否确认开启？"),this.iPlanPoint=a):0==(2&o.default.me.iFlagExt[11+2*a])&&((o.default.me.iFlag[60]>>6)%3==0?r.default.start(r.default.CONFIRM_SWAPPOINTPLAN,"本次切换方案免费，是否确认切换？"):r.default.start(r.default.CONFIRM_SWAPPOINTPLAN,"切换方案需要消耗"+(o.default.me.iFlag[60]>>6)%3*10+"万铜币，是否确认切换？"),this.iPlanPoint=a));return!0}}]),xms_PointPlan}();i.default=u},{"../../../../config/GameData":4,"../../../../engine/xms/RunFirst":37,"../../../../engine/xms/control/XmsCButton":46,"../../../../engine/xms/control/XmsCSlider":50,"../../../../engine/xms/control/XmsCText":52,"../../../../engine/xms/first/X40_CLASS":59,"../../../../engine/xms/first/X_FIRST":62,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/message/FrameMessage":87,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"./GmMe":211}],278:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../../map/DrawBuffer")),_interopRequireDefault(t("../../../../config/GmConfig"))),s=_interopRequireDefault(t("../../../../config/SortAnima")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=_interopRequireDefault(t("../../../../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),l=_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),f=(_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),h=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),d=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),c=_interopRequireDefault(t("../../../../engtst/mgm/frame/Confirm1")),m=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),g=_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")),_=(_interopRequireDefault(t("../../../../engtst/mgm/gameing/fast/SystemOperate")),_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/GmMe"))),p=_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/MyGoods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var b=function(t){function ChangeColor(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ChangeColor);var e,i,a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(ChangeColor.__proto__||Object.getPrototypeOf(ChangeColor)).call(this));for(a.iW=900,a.iH=550,a.iX=(n.default.SCRW-a.iW)/2,a.iY=(n.default.SCRH-a.iH)/2,a.aa_cls=new Array(6),a.iColor=new Int32Array(6),a.btn_color=new Array(6),e=0;e<6;e++){for(a.btn_color[e]=new Array(6),a.aa_cls[e]=new Array(6),i=0;i<6;i++)a.aa_cls[e][i]=new u.default,a.btn_color[e][i]=new o.default(f.default.xani_nui3),a.btn_color[e][i].InitButton("仓库按钮"),a.btn_color[e][i].sName=0==i?"原":""+i;a.iColor[e]=_.default.me.iColor[e]}return a.aa_body=new u.default,a.bChange=!0,a.btn_left=new o.default(f.default.xani_nui3),a.btn_left.InitButton("打开任务"),a.btn_right=new o.default(f.default.xani_nui3),a.btn_right.InitButton("向右转"),a.btn_rs=new o.default(f.default.xani_nui2),a.btn_rs.InitButton("按钮1_110"),a.btn_rs.sName="染色",a.btn_close=new o.default(f.default.xani_nui2),a.btn_close.InitButton("关闭按钮"),a.btn_close.Move(a.iX+a.iW-35,a.iY-25,60,60),a.iRote=4,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ChangeColor,r.default),a(ChangeColor,[{key:"fx",value:function(){switch(this.iRote<0&&(this.iRote+=8),this.iRote>=8&&(this.iRote-=8),this.iRote){case 0:return"上";case 1:return"左上";case 2:return"左";case 3:return"左下";case 4:return"下";case 5:return"右下";case 6:return"右";case 7:return"右上"}return"下"}},{key:"ChangeColor1",value:function(t,e,i){var a;for(a=0;a<s.default._CHANGECOLOR[t].length;a++)this.iColor[a]<=0||this.iColor[a]>=6||(f.default.xani_color[t][this.iColor[a]-1].InitAnimaWithName(s.default._CHANGECOLOR[t][a]+"_"+e,this.aa_cls[i][a]),f.default.sop(s.default._CHANGECOLOR[t][a]+"_"+e))}},{key:"DrawColor",value:function(t,e,i,a,n,r){var o;for(o=0;o<s.default._CHANGECOLOR[t].length;o++)this.iColor[o]<=0||this.iColor[o]>=6||(this.aa_cls[r][o].iFrame=e,this.aa_cls[r][o].Draw(a,n))}},{key:"DrawRole",value:function(t,e,i,a,n){var r,o=2*_.default.me.iRace+_.default.me.iSex,u=_.default.face_sti(i),l=_.default.stat_sti(a),h=0;for(r=0;r<s.default._ANIMASORT[o][l][u].length;r++)"人物"==s.default._ANIMASORT[o][l][u][r]?(n&&(f.default.xani_newrole[o].InitAnimaWithName(a+"_"+i,this.aa_body),this.ChangeColor1(o,a+"_"+i,0)),this.aa_body.Draw(t,e),this.DrawColor(o,this.aa_body.iFrame,e+h,t,e,0),this.aa_body.NextFrame(),h++):s.default._ANIMASORT[o][l][u][r]}},{key:"Draw",value:function(){var t,e,i,a,n;m.default.new_bigframe(this.iX,this.iY,this.iW,this.iH),this.btn_close.Draw(),f.default.xani_nui2.DrawAnima(this.iX+30+140-130,this.iY+100,"宠物背景",0),this.DrawRole(this.iX+30+140,this.iY+290,this.fx(),"站立",this.bChange),this.bChange=!1,this.btn_left.Move(this.iX+30+140-100-25,this.iY+200,50,70),this.btn_left.Draw(),this.btn_right.Move(this.iX+30+140+100-25,this.iY+200,50,70),this.btn_right.Draw();var r=2*_.default.me.iRace+_.default.me.iSex;i=(360-60*(a=s.default._CHANGECOLOR[r].length))/(a+1);for(n=0,this.iNeed=0,t=0;t<s.default._CHANGECOLOR[r].length;t++){for(l.default.gi().DrawTextEx(this.iX+310,this.iY+50+t*(i+60)+i+30,"部位"+(t+1),4278206039,30,101,1,1,0,0,-2),e=0;e<6;e++)this.iColor[t]==e&&(this.btn_color[t][e].bMouseDown=!0,this.btn_color[t][e].bMouseIn=!0),this.btn_color[t][e].Move(this.iX+400+80*e,this.iY+50+t*(i+60)+i,60,60),this.btn_color[t][e].Draw();this.iColor[t]!=_.default.me.iColor[t]&&this.iColor[t]>0&&(n>0&&"+","部位"+(t+1)+"需"+s.default._CHANGECOLORCOST[r][t]+"彩果",n++,this.iNeed+=s.default._CHANGECOLORCOST[r][t])}for(l.default.gi().DrawTextEx(this.iX+50,this.iY+450,"共需"+this.iNeed+"个彩果",4278206039,30,101,1,1,0,0,0),this.btn_rs.Move(this.iX+this.iW-110-50,this.iY+450-11,110,52),this.btn_rs.Draw(),this.iCGCount=0,t=0;t<20;t++)p.default.gi().goods[2][t].iGid>0&&312==p.default.gi().goods[2][t].iTid&&(this.iCGCount+=p.default.gi().goods[2][t].iCount);l.default.gi().DrawTextEx(this.iX+50,this.iY+450+35,"背包中有"+this.iCGCount+"个彩果",4278206039,30,101,1,1,0,0,0),c.default.end(c.default.CONFIRM_CHANGECOLOR)&&c.default.bConfirm&&(h.default.gi().s_SeverEvent(23,0,this.iDestColor,0,0),d.default.gi().PopStat(1))}},{key:"ProcTouch",value:function(t,e,i){var a,n,r=2*_.default.me.iRace+_.default.me.iSex;for(a=0;a<s.default._CHANGECOLOR[r].length;a++)for(n=0;n<6;n++)this.btn_color[a][n].ProcTouch(t,e,i)&&this.btn_color[a][n].bCheck()&&(this.iColor[a]=n,this.bChange=!0);return this.btn_close.ProcTouch(t,e,i)?(this.btn_close.bCheck()&&d.default.gi().PopStat(1),!0):this.btn_rs.ProcTouch(t,e,i)?(this.btn_rs.bCheck()&&(a=(((this.iColor[4]<<3|this.iColor[3])<<3|this.iColor[2])<<3|this.iColor[1])<<3|this.iColor[0],this.iNeed>this.iCGCount?g.default.easymsg.AddMessage("拥有彩果不足"):_.default.me.iFlag[53]==a?g.default.easymsg.AddMessage("修改颜色后再染色"):(this.iDestColor=a,c.default.start(c.default.CONFIRM_CHANGECOLOR,"是否确定染成所选颜色？"))),!0):(this.btn_left.ProcTouch(t,e,i)&&this.btn_left.bCheck()&&(this.iRote--,this.bChange=!0),this.btn_right.ProcTouch(t,e,i)&&this.btn_right.bCheck()&&(this.iRote++,this.bChange=!0),!0)}}]),ChangeColor}();i.default=b,b.Open=function(){d.default.gi().PushStat(d.default.GS_CHANGECOLOR)}},{"../../../../config/GmConfig":5,"../../../../config/SortAnima":6,"../../../../engine/BaseClass":8,"../../../../engine/control/XButtonEx2":16,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/Confirm1":71,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/fast/SystemOperate":124,"../../../../engtst/mgm/gameing/me/GmMe":211,"../../../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../../../map/DrawBuffer":283}],279:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../engine/BaseClass")),r=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../../../engine/control/XInput")),u=(_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),d=(_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage")));_interopRequireDefault(t("../../../../engtst/mgm/gameing/me/goods/Goods"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function GetCodeReward(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GetCodeReward);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(GetCodeReward.__proto__||Object.getPrototypeOf(GetCodeReward)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=400,e.iH=130,e.iX=(n.default.SCRW-e.iW)/2,e.iY=80,e.btn_close=new r.default(u.default.xani_button),e.btn_close.InitButton("关闭按钮"),e.btn_close.Move(e.iX+e.iW-35,e.iY-25,60,60),e.btn_send=new r.default(u.default.xani_button),e.btn_send.InitButton("1号按钮90_60"),e.btn_send.Move(e.iX+e.iW-40-90,e.iY+40-5,90,60),e.btn_send.sName="发送",e.in_speak=new o.default(u.default.xani_ui),e.in_speak.Move(e.iX+40,e.iY+40,e.iW-40-40-90-20,50),e.in_speak.bHideText=!0,e.in_speak.OpenInput(),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(GetCodeReward,s.default),a(GetCodeReward,[{key:"Draw",value:function(){h.default.frame_type4("7号框52_52",this.iX,this.iY,this.iW,this.iH,52,52),h.default.frame_type4("8号框20_20",this.in_speak.iX,this.in_speak.iY,this.in_speak.iW,50,20,20),this.pm3f.DrawTextEx(this.in_speak.iX+10,this.in_speak.iY+this.in_speak.iH/2,this.in_speak.sDetail,4279324257,20,101,1,1,0,0,-2),this.btn_send.Draw(),this.btn_close.Draw(),this.in_speak.onscr()}},{key:"ProcTouch",value:function(t,e,i){return this.in_speak.ProcTouch(t,e,i),this.btn_send.ProcTouch(t,e,i)&&this.btn_send.bCheck()&&(this.in_speak.sDetail.length<=0?d.default.easymsg.AddMessage("请先输入内容"):this.in_speak.sDetail.length>=40?d.default.easymsg.AddMessage("内容过长"):"teris"==this.in_speak.sDetail?(f.default.gi().PopStat(1),Tetris.Open()):(l.default.gi().s_GetCodeReward(1,this.in_speak.sDetail),f.default.gi().PopStat(1))),!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&f.default.gi().PopStat(1),!0)}}]),GetCodeReward}();i.default=c,c.Open=function(){f.default.gi().PushStat(f.default.GS_GETCODEREWARD)}},{"../../../../config/GmConfig":5,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx2":16,"../../../../engine/control/XInput":18,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86,"../../../../engtst/mgm/gameing/me/goods/Goods":217}],280:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../../config/GmConfig")),s=_interopRequireDefault(t("../../../../config/XDefine")),r=_interopRequireDefault(t("../../../../engine/BaseClass")),o=(_interopRequireDefault(t("../../../../engine/control/XButton")),_interopRequireDefault(t("../../../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../../../engine/control/XInput")),_interopRequireDefault(t("../../../../engine/graphics/AnimaAction")),_interopRequireDefault(t("../../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../../engtst/mgm/GmPlay"))),u=(_interopRequireDefault(t("../../../../engtst/mgm/GmProtocol")),_interopRequireDefault(t("../../../../engtst/mgm/XStat")));_interopRequireDefault(t("../../../../engtst/mgm/frame/DrawMode")),_interopRequireDefault(t("../../../../engtst/mgm/frame/format/FormatString")),_interopRequireDefault(t("../../../../engtst/mgm/frame/message/EasyMessage"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function Tetris(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Tetris);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Tetris.__proto__||Object.getPrototypeOf(Tetris)).call(this));e.pani=t,e.pm3f=t.pm3f,e.iW=14,e.iH=14,e.matrix=new Array(e.iW),e.tmpmatrix=new Array(e.iW),e.frame=new Array(e.iW);for(var i=0;i<e.iW;i++)e.matrix[i]=new Int32Array(e.iH),e.tmpmatrix[i]=new Int32Array(e.iH),e.frame[i]=new Int32Array(e.iH);e.block=new Array(4),e.tmpblock=new Array(4);for(i=0;i<4;i++)e.block[i]=new Int32Array(4),e.tmpblock[i]=new Int32Array(4);return e.InitMatrix(),e.ResetBlock(),e.iBW=32,e.iBH=32,e.aa_frame=o.default.xani_ui.InitAnimaWithName("统一小按钮1",null),e.aa_back=o.default.xani_ui.InitAnimaWithName("统一小按钮1",null),e.aa_back.iFrame=1,e.aa_block=o.default.xani_ngoods.InitAnimaWithName("高级经验丹",null),e.aa_block2=o.default.xani_ngoods.InitAnimaWithName("普通经验丹",null),e._BLOCKS=[[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[],[],[],[]]],e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Tetris,r.default),a(Tetris,[{key:"ResetBlock",value:function(){var t,e,i;for(i=s.default.GetRand(0,0),t=0;t<4;t++)for(e=0;e<4;e++)this.block[t][e]=this._BLOCKS[i][t][e]+2;this.iX=1,this.iY=1}},{key:"InitMatrix",value:function(){var t,e;for(t=0;t<this.iW;t++)for(e=0;e<this.iH;e++)0==t||0==e||t==this.iW-1||e==this.iH-1?this.matrix[t][e]=0:this.matrix[t][e]=2,0==t||0==e||t==this.iW-1||e==this.iH-1?this.frame[t][e]=0:e>=this.iH/2&&t<=e-this.iH/2+1?this.frame[t][e]=1:t>=this.iW/2&&e<=t-this.iW/2+1?this.frame[t][e]=1:this.frame[t][e]=2;this.iDelay=0,this.iFx=0}},{key:"_boom",value:function(t,e){var i,a;for(i=0;i<4;i++)for(a=0;a<4;a++)if(2!=this.block[i][a]&&2!=this.matrix[this.iX+i+t][this.iY+a+e])return!0;return!1}},{key:"Draw",value:function(){var t,e,i=!1;if(this.iDelay++,this.iDelay%10==0&&(0==this.iFx?this._boom(0,1)?this._boom(1,0)?i=!0:(this.iX++,this.iFx=1-this.iFx):this.iY++:this._boom(1,0)?this._boom(0,1)?i=!0:(this.iY++,this.iFx=1-this.iFx):this.iX++,this.iFx=1-this.iFx,i)){for(t=0;t<4;t++)for(e=0;e<4;e++)2!=this.block[t][e]&&(this.matrix[this.iX+t][this.iY+e]=4);this.ResetBlock()}for(t=0;t<this.iW;t++)for(e=0;e<this.iH;e++)this.tmpmatrix[t][e]=this.matrix[t][e];for(t=0;t<4;t++)for(e=0;e<4;e++)2!=this.block[t][e]&&(this.tmpmatrix[this.iX+t][this.iY+e]=this.block[t][e]);for(t=0;t<this.iW;t++)for(e=0;e<this.iH;e++)0==this.frame[t][e]?this.aa_frame.Draw(100+t*this.iBW,100+e*this.iBH):1==this.frame[t][e]&&this.aa_back.Draw(100+t*this.iBW,100+e*this.iBH),3==this.tmpmatrix[t][e]?this.aa_block.Draw(100+t*this.iBW-30+this.iBW/2,100+e*this.iBH-30+this.iBW/2):4==this.tmpmatrix[t][e]&&this.aa_block2.Draw(100+t*this.iBW-30+this.iBW/2,100+e*this.iBH-30+this.iBW/2)}},{key:"rota",value:function(){var t,e;for(t=0;t<4;t++)for(e=0;e<4;e++)this.tmpblock[t][e]=this.block[e][3-t];for(t=0;t<4;t++)for(e=0;e<4;e++)if(2!=this.tmpblock[t][e]&&2!=this.matrix[this.iX+t][this.iY+e])return;for(t=0;t<4;t++)for(e=0;e<4;e++)this.block[t][e]=this.tmpblock[t][e]}},{key:"ProcTouch",value:function(t,e,i){return s.default.bInRect(e,i,100,100,this.iW*this.iBW,this.iH*this.iBH)||n.default.SCRW,!1}}]),Tetris}();i.default=l,l.Open=function(){u.default.gi().PushStat(u.default.GS_TETRIS)}},{"../../../../config/GmConfig":5,"../../../../config/XDefine":7,"../../../../engine/BaseClass":8,"../../../../engine/control/XButton":14,"../../../../engine/control/XButtonEx1":15,"../../../../engine/control/XInput":18,"../../../../engine/graphics/AnimaAction":25,"../../../../engine/graphics/M3DFast":28,"../../../../engine/graphics/XAnima":30,"../../../../engtst/mgm/GmPlay":65,"../../../../engtst/mgm/GmProtocol":66,"../../../../engtst/mgm/XStat":70,"../../../../engtst/mgm/frame/DrawMode":72,"../../../../engtst/mgm/frame/format/FormatString":81,"../../../../engtst/mgm/frame/message/EasyMessage":86}],281:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=t("../engine/graphics/AnimaAction"),s=(a=n)&&a.__esModule?a:{default:a};i.default=function ANIMALEVEL(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ANIMALEVEL),this.sName="",this.aa=new s.default}},{"../engine/graphics/AnimaAction":25}],282:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function COLLPATH(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,COLLPATH),this.iPathCount=t,this.path=new Array(t);for(var e=0;e<t;e++)this.path[e]=new Int32Array(2)}},{}],283:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../engine/graphics/AnimaAction")),s=_interopRequireDefault(t("../engine/graphics/M3DFast"));_interopRequireDefault(t("../engine/graphics/XAnima"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function ONEBUFFER(){_classCallCheck(this,ONEBUFFER),this.aa=new n.default,this.sStr="12345"},o=function(){function DrawBuffer(){var t;for(_classCallCheck(this,DrawBuffer),this.xm3f=s.default.gi(),this.bfs=new Array(DrawBuffer.MAXONEBUFFER),this.sort=new Int32Array(DrawBuffer.MAXONEBUFFER),t=0;t<DrawBuffer.MAXONEBUFFER;t++)this.bfs[t]=new r}return a(DrawBuffer,[{key:"ClearBuffer",value:function(){this.ibfp=0,this.igfp=0,this.bGroup=!1}},{key:"BeginGroup",value:function(){this.igfp++,this.bGroup=!0}},{key:"EndGroup",value:function(){this.bGroup=!1}},{key:"DrawAnima_aa",value:function(t,e,i,a,n){null!=n.pani&&(this.bfs[this.ibfp].iLockY=t,this.bfs[this.ibfp].iX=i,this.bfs[this.ibfp].iY=a,this.bfs[this.ibfp].iType=0,this.bGroup?this.bfs[this.ibfp].iGroupId=this.igfp:this.bfs[this.ibfp].iGroupId=0,this.bfs[this.ibfp].aa.copyfrom(n),this.ibfp++)}},{key:"DrawImage",value:function(t,e,i,a,n,s,r){this.bfs[this.ibfp].iLockY=e+r,this.bfs[this.ibfp].iX=t,this.bfs[this.ibfp].iY=e,this.bfs[this.ibfp].iType=1,this.bGroup?this.bfs[this.ibfp].iGroupId=this.igfp:this.bfs[this.ibfp].iGroupId=0,this.bfs[this.ibfp].iRid_dest_ra=i,this.bfs[this.ibfp].iBx_type_x2_ratx=a,this.bfs[this.ibfp].iBy_size_y2_raty=n,this.bfs[this.ibfp].iBw_color_alpha=s,this.bfs[this.ibfp].iBh_c2=r,this.ibfp++}},{key:"DrawText",value:function(t,e,i,a,n,s,r){this.bfs[this.ibfp].iLockY=t,this.bfs[this.ibfp].iX=i,this.bfs[this.ibfp].iY=a,this.bfs[this.ibfp].iType=2,this.bGroup?this.bfs[this.ibfp].iGroupId=this.igfp:this.bfs[this.ibfp].iGroupId=0,this.bfs[this.ibfp].sStr=n,this.bfs[this.ibfp].iRid_dest_ra=e,this.bfs[this.ibfp].iBw_color_alpha=s,this.bfs[this.ibfp].iBy_size_y2_raty=r,this.bfs[this.ibfp].iBx_type_x2_ratx=0,this.ibfp++}},{key:"DrawText_2",value:function(t,e,i,a,n,s,r,o,u){this.bfs[this.ibfp].iLockY=t,this.bfs[this.ibfp].iX=i,this.bfs[this.ibfp].iY=a,this.bfs[this.ibfp].iType=2,this.bGroup?this.bfs[this.ibfp].iGroupId=this.igfp:this.bfs[this.ibfp].iGroupId=0,this.bfs[this.ibfp].sStr=n,this.bfs[this.ibfp].iRid_dest_ra=e,this.bfs[this.ibfp].iBw_color_alpha=s,this.bfs[this.ibfp].iBy_size_y2_raty=r,this.bfs[this.ibfp].iBx_type_x2_ratx=o,this.bfs[this.ibfp].iBh_c2=u,this.ibfp++}},{key:"FillRect",value:function(t,e,i,a,n,s){this.bfs[this.ibfp].iLockY=t,this.bfs[this.ibfp].iX=e,this.bfs[this.ibfp].iY=i,this.bfs[this.ibfp].iType=3,this.bGroup?this.bfs[this.ibfp].iGroupId=this.igfp:this.bfs[this.ibfp].iGroupId=0,this.bfs[this.ibfp].iBx_type_x2_ratx=a,this.bfs[this.ibfp].iBy_size_y2_raty=n,this.bfs[this.ibfp].iBw_color_alpha=s,this.ibfp++}},{key:"DrawAnimaEx",value:function(t,e,i,a,n,s,r,o,u,l){null!=a.pani&&(this.bfs[this.ibfp].iLockY=t,this.bfs[this.ibfp].iX=e,this.bfs[this.ibfp].iY=i,this.bfs[this.ibfp].iType=4,this.bGroup?this.bfs[this.ibfp].iGroupId=this.igfp:this.bfs[this.ibfp].iGroupId=0,this.bfs[this.ibfp].aa.copyfrom(a),this.bfs[this.ibfp].iBw_color_alpha=n,this.bfs[this.ibfp].sw=s,this.bfs[this.ibfp].sh=r,this.bfs[this.ibfp].iRid_dest_ra=o,this.bfs[this.ibfp].iBx_type_x2_ratx=u,this.bfs[this.ibfp].iBy_size_y2_raty=l,this.ibfp++)}},{key:"SortAndDraw",value:function(){var t,e,i,a,n;for(i=0,this.bfs[this.ibfp].iGroupId=0,t=0;t<this.ibfp;t++)if(this.sort[i]=t,i++,this.bfs[t].iGroupId>0)for(e=this.bfs[t].iGroupId;this.bfs[t+1].iGroupId==e;)t++;for(t=0;t<i-1;t++)for(e=t+1;e<i;e++)this.bfs[this.sort[t]].iLockY>this.bfs[this.sort[e]].iLockY&&(a=this.sort[t],this.sort[t]=this.sort[e],this.sort[e]=a);for(t=0;t<i;t++)for(e=this.sort[t],a=this.bfs[e].iGroupId;;){switch(n=this.bfs[e],this.bfs[e].iType){case 0:this.bfs[e].aa.Draw(this.bfs[e].iX,this.bfs[e].iY);break;case 1:this.xm3f.DrawImageEx(0,this.bfs[e].iX,this.bfs[e].iY,this.bfs[e].iRid_dest_ra,this.bfs[e].iBx_type_x2_ratx,this.bfs[e].iBy_size_y2_raty,this.bfs[e].iBw_color_alpha,this.bfs[e].iBh_c2,100,1,1,0,0,0);break;case 2:0==this.bfs[e].iBx_type_x2_ratx?0==n.iRid_dest_ra?this.xm3f.DrawTextEx(this.bfs[e].iX,this.bfs[e].iY,n.sStr,n.iBw_color_alpha,n.iBy_size_y2_raty,101,1,1,0,-1,-1):1==n.iRid_dest_ra?this.xm3f.DrawTextEx(this.bfs[e].iX,this.bfs[e].iY,n.sStr,n.iBw_color_alpha,n.iBy_size_y2_raty,101,1,1,0,-2,-2):this.xm3f.DrawTextEx(this.bfs[e].iX,this.bfs[e].iY,n.sStr,n.iBw_color_alpha,n.iBy_size_y2_raty,101,1,1,0,-3,-3):0==n.iRid_dest_ra?this.xm3f.DrawText_2(this.bfs[e].iX,this.bfs[e].iY,n.sStr,n.iBw_color_alpha,n.iBy_size_y2_raty,101,1,1,0,-1,-1,n.iBx_type_x2_ratx,n.iBh_c2):1==n.iRid_dest_ra?this.xm3f.DrawText_2(this.bfs[e].iX,this.bfs[e].iY,n.sStr,n.iBw_color_alpha,n.iBy_size_y2_raty,101,1,1,0,-2,-2,n.iBx_type_x2_ratx,n.iBh_c2):this.xm3f.DrawText_2(this.bfs[e].iX,this.bfs[e].iY,n.sStr,n.iBw_color_alpha,n.iBy_size_y2_raty,101,1,1,0,-3,-3,n.iBx_type_x2_ratx,n.iBh_c2);break;case 3:this.xm3f.FillRect_2D(this.bfs[e].iX,this.bfs[e].iY,n.iBx_type_x2_ratx,n.iBy_size_y2_raty,n.iBw_color_alpha);break;case 4:n.aa.DrawEx(this.bfs[e].iX,this.bfs[e].iY,n.iBw_color_alpha,n.sw,n.sh,n.iRid_dest_ra,n.iBx_type_x2_ratx,n.iBy_size_y2_raty)}if(!(a>0&&this.bfs[e+1].iGroupId==a))break;e++}}}]),DrawBuffer}();i.default=o,o.MAXONEBUFFER=1024,o.dbf=null,o.gi=function(){return null==o.dbf&&(o.dbf=new o),o.dbf}},{"../engine/graphics/AnimaAction":25,"../engine/graphics/M3DFast":28,"../engine/graphics/XAnima":30}],284:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../config/GmConfig")),s=_interopRequireDefault(t("../config/XDefine")),r=(_interopRequireDefault(t("../engine/graphics/M3DFast")),_interopRequireDefault(t("../engtst/mgm/GmPlay")),_interopRequireDefault(t("../engtst/mgm/gameing/me/GmMe")),_interopRequireDefault(t("./MapManager"))),o=_interopRequireDefault(t("./MapData"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var u=function(){function FindWay(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FindWay),this.iDelay=0,this.iPathDeep=0,this.iPath=new Array(256),this.boom=new Array(256);for(var t=0;t<256;t++)this.iPath[t]=new Int32Array(2),this.boom[t]=new Int32Array(256);this.tmpst=new Array(4096);for(t=0;t<4096;t++)this.tmpst[t]=new Int32Array(2)}return a(FindWay,[{key:"Draw",value:function(){var t,e;for(t=0;t<o.default.MAXPATHCOUNT;t++)if(null!=this.pps[t])for(e=1;e<this.pps[t].iPathCount;e++)M2DFast.xm3f.DrawLine(r.default.gi().iOffx+this.pps[t].path[e-1][0],r.default.gi().iOffy+this.pps[t].path[e-1][1],r.default.gi().iOffx+this.pps[t].path[e][0],r.default.gi().iOffy+this.pps[t].path[e][1],4294902015);this.DrawBoom()}},{key:"DrawBoom",value:function(){var t,e,i,a;for(t=0;t<this.iMapWidth/this.iBlockWidth;t++)for(e=0;e<this.iMapHeight/this.iBlockHeight;e++)if(this.boom[e][t]>=2){if(i=r.default.gi().iOffx+32*t,a=r.default.gi().iOffy+32*e,i<0||i>n.default.SCRW||a<0||a>n.default.SCRH)continue;M2DFast.xm3f.FillRect_2D(i-3,a-3,i+3,a+3,4294901760)}}}]),a(FindWay,[{key:"bCanMove",value:function(t,e,i,a){if(i<0||a<0||i>r.default.gi().mapdata.iMapWidth||a>r.default.gi().mapdata.iMapHeight)return!1;var n,s;for(n=0;n<o.default.MAXPATHCOUNT;n++)if(null!=this.pps[n])for(s=1;s<this.pps[n].iPathCount;s++)if(!(t<this.pps[n].path[s-1][0]&&i<this.pps[n].path[s-1][0]&&t<this.pps[n].path[s][0]&&i<this.pps[n].path[s][0])&&!(t>this.pps[n].path[s-1][0]&&i>this.pps[n].path[s-1][0]&&t>this.pps[n].path[s][0]&&i>this.pps[n].path[s][0])&&!(e<this.pps[n].path[s-1][1]&&a<this.pps[n].path[s-1][1]&&e<this.pps[n].path[s][1]&&a<this.pps[n].path[s][1])&&!(e>this.pps[n].path[s-1][1]&&a>this.pps[n].path[s-1][1]&&e>this.pps[n].path[s][1]&&a>this.pps[n].path[s][1])&&o.default.llcollision_ai(t,e,i,a,this.pps[n].path[s-1][0],this.pps[n].path[s-1][1],this.pps[n].path[s][0],this.pps[n].path[s][1]))return this.iBx1=this.pps[n].path[s-1][0],this.iBy1=this.pps[n].path[s-1][1],this.iBx2=this.pps[n].path[s][0],this.iBy2=this.pps[n].path[s][1],!1;return!0}},{key:"setboom",value:function(t,e,i,a,n){return!(1!=this.boom[a][i]||!this.bCanMove(t*this.iBlockWidth,e*this.iBlockHeight,i*this.iBlockWidth,a*this.iBlockHeight))&&(this.boom[a][i]=n,!0)}},{key:"initboom",value:function(t,e,i,a,n,s){var o,u,l,f;for(t<0&&(t=0),e<0&&(e=0),this.pps=r.default.gi().mapdata.pps,this.iMapWidth=i,this.iMapHeight=a,this.iBlockWidth=n,this.iBlockHeight=s,o=0;o<i/n;o++)for(u=0;u<a/s;u++)this.boom[u][o]=1;for(this.boom[parseInt(e/this.iBlockHeight)][parseInt(t/this.iBlockWidth)]=2,l=2,f=1;f>0;){for(f=0,o=1;o<i/n;o++)for(u=1;u<a/s;u++)this.boom[u][o]==l&&(this.setboom(o,u,o-1,u,l+1)&&f++,this.setboom(o,u,o+1,u,l+1)&&f++,this.setboom(o,u,o,u-1,l+1)&&f++,this.setboom(o,u,o,u+1,l+1)&&f++);l++}for(o=0;o<i/n+1;o++)for(u=0;u<a/s+1;u++)(1==this.boom[u][o]||o>=i/n||u>=a/s)&&(this.boom[u][o]=0)}},{key:"findway",value:function(t,e,i,a){if(s.default.llength(t,e,i,a)<20)return!1;if(i<0||a<0||i>=r.default.gi().mapdata.iMapWidth||a>=r.default.gi().mapdata.iMapHeight)return!1;if(this.bCanMove(t,e,i,a))return this.iPath[0][0]=t,this.iPath[0][1]=e,this.iPath[1][0]=i,this.iPath[1][1]=a,this.iPathDeep=2,!0;var n,o,u,l,f,h;for(n=0;n<this.iMapWidth/this.iBlockWidth+2;n++)for(o=0;o<this.iMapHeight/this.iBlockHeight+2;o++)this.boom[o][n]>2&&(this.boom[o][n]=2);if(u=parseInt(t/this.iBlockWidth),l=parseInt(e/this.iBlockHeight),this.bCanMove(u*this.iBlockWidth,l*this.iBlockHeight,t,e));else if(this.bCanMove((u+1)*this.iBlockWidth,l*this.iBlockHeight,t,e))u++;else if(this.bCanMove((u-1)*this.iBlockWidth,l*this.iBlockHeight,t,e))u--;else if(this.bCanMove(u*this.iBlockWidth,(l+1)*this.iBlockHeight,t,e))l++;else{if(!this.bCanMove(u*this.iBlockWidth,(l-1)*this.iBlockHeight,t,e)){if(2==this.boom[l][u]);else if(2==this.boom[l+1][u])l+=1;else if(2==this.boom[l-1][u])l-=1;else if(2==this.boom[l][u+1])u+=1;else{if(2!=this.boom[l][u-1])return!1;u-=1}return this.iPath[0][0]=t,this.iPath[0][1]=e,this.iPath[1][0]=u*this.iBlockWidth,this.iPath[1][1]=l*this.iBlockHeight,this.iPathDeep=2,!0}l--}if(f=parseInt(i/this.iBlockWidth),h=parseInt(a/this.iBlockHeight),this.bCanMove(f*this.iBlockWidth,h*this.iBlockHeight,i,a));else if(this.bCanMove((f+1)*this.iBlockWidth,h*this.iBlockHeight,i,a))f++;else if(this.bCanMove((f-1)*this.iBlockWidth,h*this.iBlockHeight,i,a))f--;else if(this.bCanMove(f*this.iBlockWidth,(h+1)*this.iBlockHeight,i,a))h++;else{if(!this.bCanMove(f*this.iBlockWidth,(h-1)*this.iBlockHeight,i,a))return!1;h--}return!(f<0||h<0)&&(n=0,0==this.boom[h][f]&&n++,f-1>=0&&0==this.boom[h][f-1]&&n++,h-1>=0&&0==this.boom[h-1][f]&&n++,0==this.boom[h][f+1]&&n++,0==this.boom[h+1][f]&&n++,!(n>=3)&&(!!this.findway_(u*this.iBlockWidth,l*this.iBlockHeight,f*this.iBlockWidth,h*this.iBlockHeight)&&(this.iPath[0][0]=t,this.iPath[0][1]=e,this.iPath[this.iPathDeep-1][0]=i,this.iPath[this.iPathDeep-1][1]=a,this.iDelay++,this.pullline(),!0)))}},{key:"findway_",value:function(t,e,i,a){if(t<0||e<0||t>=r.default.gi().mapdata.iMapWidth||e>=r.default.gi().mapdata.iMapHeight)return!1;if(i<0||a<0||i>=r.default.gi().mapdata.iMapWidth||a>=r.default.gi().mapdata.iMapHeight)return!1;var n,s,o,u,l,f,h,d;for(this.boom[parseInt(e/this.iBlockHeight)][parseInt(t/this.iBlockWidth)]=3,this.tmpst[0][0]=parseInt(t/this.iBlockWidth),this.tmpst[0][1]=parseInt(e/this.iBlockHeight),l=0,f=1,h=1,d=1,o=3;;){for(u=l;u<f;u++)n=this.tmpst[u%4096][0],s=this.tmpst[u%4096][1],n-1>=0&&2==this.boom[s][n-1]&&this.bCanMove(n*this.iBlockWidth,s*this.iBlockHeight,(n-1)*this.iBlockWidth,s*this.iBlockHeight)&&(this.boom[s][n-1]=o+1,this.tmpst[d%4096][0]=n-1,this.tmpst[d%4096][1]=s,d++),n+1<this.iMapWidth/this.iBlockWidth&&2==this.boom[s][n+1]&&this.bCanMove(n*this.iBlockWidth,s*this.iBlockHeight,(n+1)*this.iBlockWidth,s*this.iBlockHeight)&&(this.boom[s][n+1]=o+1,this.tmpst[d%4096][0]=n+1,this.tmpst[d%4096][1]=s,d++),s-1>=0&&2==this.boom[s-1][n]&&this.bCanMove(n*this.iBlockWidth,s*this.iBlockHeight,n*this.iBlockWidth,(s-1)*this.iBlockHeight)&&(this.boom[s-1][n]=o+1,this.tmpst[d%4096][0]=n,this.tmpst[d%4096][1]=s-1,d++),s+1<this.iMapHeight/this.iBlockHeight&&2==this.boom[s+1][n]&&this.bCanMove(n*this.iBlockWidth,s*this.iBlockHeight,n*this.iBlockWidth,(s+1)*this.iBlockHeight)&&(this.boom[s+1][n]=o+1,this.tmpst[d%4096][0]=n,this.tmpst[d%4096][1]=s+1,d++);if(this.boom[parseInt(a/this.iBlockHeight)][parseInt(i/this.iBlockWidth)]>2)return this.getback(parseInt(i/this.iBlockWidth),parseInt(a/this.iBlockHeight)),!0;if(h==d)break;l=h,f=d,h=d,o++}return!1}},{key:"findway____",value:function(t,e,i,a){if(t<0||e<0||t>=r.default.gi().mapdata.iMapWidth||e>=r.default.gi().mapdata.iMapHeight)return!1;if(i<0||a<0||i>=r.default.gi().mapdata.iMapWidth||a>=r.default.gi().mapdata.iMapHeight)return!1;var n,s,o,u;for(boom[parseInt(e/this.iBlockHeight)][parseInt(t/this.iBlockWidth)]=3,o=3,u=1;u>0;){for(u=0,n=0;n<this.iMapWidth/this.iBlockWidth;n++)for(s=0;s<this.iMapHeight/this.iBlockHeight;s++)this.boom[s][n]==o&&(n-1>=0&&2==this.boom[s][n-1]&&this.bCanMove(n*this.iBlockWidth,s*this.iBlockHeight,(n-1)*this.iBlockWidth,s*this.iBlockHeight)&&(boom[s][n-1]=o+1,u++),n+1<this.iMapWidth/this.iBlockWidth&&2==this.boom[s][n+1]&&this.bCanMove(n*this.iBlockWidth,s*this.iBlockHeight,(n+1)*this.iBlockWidth,s*this.iBlockHeight)&&(this.boom[s][n+1]=o+1,u++),s-1>=0&&2==this.boom[s-1][n]&&this.bCanMove(n*this.iBlockWidth,s*this.iBlockHeight,n*this.iBlockWidth,(s-1)*this.iBlockHeight)&&(this.boom[s-1][n]=o+1,u++),s+1<this.iMapHeight/this.iBlockHeight&&2==this.boom[s+1][n]&&this.bCanMove(n*this.iBlockWidth,s*this.iBlockHeight,n*this.iBlockWidth,(s+1)*this.iBlockHeight)&&(this.boom[s+1][n]=o+1,u++));if(this.boom[parseInt(a/this.iBlockHeight)][parseInt(i/this.iBlockWidth)]>2)return this.getback(parseInt(i/this.iBlockWidth),parseInt(a/this.iBlockHeight)),!0;if(++o>=256)return!1}return!1}},{key:"getback",value:function(t,e){var i;for(this.iPathDeep=this.boom[e][t],i=this.iPathDeep-2;i>1;)this.iPath[i][0]=t*this.iBlockWidth,this.iPath[i][1]=e*this.iBlockHeight,i--,t-1>=0&&this.boom[e][t-1]==this.boom[e][t]-1&&this.bCanMove(t*this.iBlockWidth,e*this.iBlockHeight,(t-1)*this.iBlockWidth,e*this.iBlockHeight)?t--:t+1<this.iMapWidth/this.iBlockWidth&&this.boom[e][t+1]==this.boom[e][t]-1&&this.bCanMove(t*this.iBlockWidth,e*this.iBlockHeight,(t+1)*this.iBlockWidth,e*this.iBlockHeight)?t++:e-1>=0&&this.boom[e-1][t]==this.boom[e][t]-1&&this.bCanMove(t*this.iBlockWidth,e*this.iBlockHeight,t*this.iBlockWidth,(e-1)*this.iBlockHeight)?e--:e+1<this.iMapHeight/this.iBlockHeight&&this.boom[e+1][t]==this.boom[e][t]-1&&this.bCanMove(t*this.iBlockWidth,e*this.iBlockHeight,t*this.iBlockWidth,(e+1)*this.iBlockHeight)&&e++;this.iPath[i][0]=t*this.iBlockWidth,this.iPath[i][1]=e*this.iBlockHeight}},{key:"bCanMoveEx",value:function(t,e,i,a){var n,s,r,u,l,f;if(i!=t)u=-1,l=1*e-(r=1*(a-e)/(i-t))*t;else{if(a==e)return!1;u=-1*(t-i)/(e-a),l=-(1*t-(r=1)*e)}for(n=0;n<o.default.MAXPATHCOUNT;n++)if(null!=this.pps[n])for(s=0;s<this.pps[n].iPathCount;s++)if(!(this.pps[n].path[s][0]<t&&this.pps[n].path[s][0]<i||this.pps[n].path[s][0]>t&&this.pps[n].path[s][0]>i||this.pps[n].path[s][1]<e&&this.pps[n].path[s][1]<a||this.pps[n].path[s][1]>e&&this.pps[n].path[s][1]>a||((f=r*this.pps[n].path[s][0]+u*this.pps[n].path[s][1]+l)<0&&(f=-f),!((f/=Math.sqrt(r*r+u*u))<10))))return!1;return!0}},{key:"pullline",value:function(){var t,e;for(e=0,t=2;t<this.iPathDeep;t++)t!=e+1&&(this.bCanMoveEx(this.iPath[e][0],this.iPath[e][1],this.iPath[t][0],this.iPath[t][1])&&this.bCanMove(this.iPath[e][0],this.iPath[e][1],this.iPath[t][0],this.iPath[t][1])?(this.iPath[e+1][0]=this.iPath[t][0],this.iPath[e+1][1]=this.iPath[t][1]):(e++,t--));this.iPathDeep=e+2}},{key:"checkagain",value:function(){var t;for(t=1;t<this.iPathDeep;t++)if(!this.bCanMove(this.iPath[t-1][0],this.iPath[t-1][1],this.iPath[t][0],this.iPath[t][1]))return!1;return!0}},{key:"findway1",value:function(t,e,i,a){if(s.default.llength(t,e,i,a)<20)return!1;var n,u,l,f,h,d=0,c=0;if(i<0||a<0||i>r.default.gi().mapdata.iMapWidth||a>r.default.gi().mapdata.iMapHeight)return!1;for(f=999999,h=!1,FindWay.bAutoBoom=!1,n=0;n<o.default.MAXPATHCOUNT;n++)if(null!=this.pps[n])for(u=1;u<this.pps[n].iPathCount;u++)t<this.pps[n].path[u-1][0]&&i<this.pps[n].path[u-1][0]&&t<this.pps[n].path[u][0]&&i<this.pps[n].path[u][0]||t>this.pps[n].path[u-1][0]&&i>this.pps[n].path[u-1][0]&&t>this.pps[n].path[u][0]&&i>this.pps[n].path[u][0]||e<this.pps[n].path[u-1][1]&&a<this.pps[n].path[u-1][1]&&e<this.pps[n].path[u][1]&&a<this.pps[n].path[u][1]||e>this.pps[n].path[u-1][1]&&a>this.pps[n].path[u-1][1]&&e>this.pps[n].path[u][1]&&a>this.pps[n].path[u][1]||o.default.llcollision_ai(t,e,i,a,this.pps[n].path[u-1][0],this.pps[n].path[u-1][1],this.pps[n].path[u][0],this.pps[n].path[u][1])&&((l=s.default.llength(t,e,o.default.iJx,o.default.iJy))<f||!h)&&(this.iBx1=this.pps[n].path[u-1][0],this.iBy1=this.pps[n].path[u-1][1],this.iBx2=this.pps[n].path[u][0],this.iBy2=this.pps[n].path[u][1],d=o.default.iJx,c=o.default.iJy,f=l,h=!0,FindWay.bAutoBoom=!0);if(h){var m,g=0,_=0,p=0,b=0,D=0,y=0;m=s.default.GetAngleXY_ext(iBx1,iBy1,iBx2,iBy2),g=80*Math.cos(m+.15),_=80*Math.sin(m+.15),p=80*Math.cos(m-.15),b=80*Math.sin(m-.15),D=80*Math.cos(m),y=80*Math.sin(m),(n=s.default.llength(t,e,d+D,c+y))>(u=s.default.llength(t,e,d-D,c-y))||(g=-g,_=-_,p=-p,b=-b,D=-D,y=-y);var w=this.bCanMove(t,e,t+g,e+_),S=this.bCanMove(t,e,t+p,e+b);return!!this.bCanMove(t,e,t+D,e+y)&&(w&&S?(this.iPath[0][0]=t,this.iPath[0][1]=e,this.iPath[1][0]=t+5*D/8,this.iPath[1][1]=e+5*y/8,this.iPathDeep=2,!0):!w&&S?(this.iPath[0][0]=t,this.iPath[0][1]=e,this.iPath[1][0]=t+5*p/8,this.iPath[1][1]=e+5*b/8,this.iPathDeep=2,!0):!(!w||S)&&(this.iPath[0][0]=t,this.iPath[0][1]=e,this.iPath[1][0]=t+5*g/8,this.iPath[1][1]=e+5*_/8,this.iPathDeep=2,!0))}return this.iPath[0][0]=t,this.iPath[0][1]=e,this.iPath[1][0]=i,this.iPath[1][1]=a,this.iPathDeep=2,!0}}]),FindWay}();i.default=u,u.bAutoBoom=!1},{"../config/GmConfig":5,"../config/XDefine":7,"../engine/graphics/M3DFast":28,"../engtst/mgm/GmPlay":65,"../engtst/mgm/gameing/me/GmMe":211,"./MapData":285,"./MapManager":286}],285:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../engine/graphics/M3DMath")),s=(_interopRequireDefault(t("../engtst/mgm/GmPlay")),_interopRequireDefault(t("./ANIMALEVEL"))),r=_interopRequireDefault(t("./COLLPATH"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var o=function(){function MapData(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,MapData),this.pps=new r.default(MapData.MAXPATHCOUNT)}return a(MapData,[{key:"InitCutLevel",value:function(){var t,e,i;for(this.cutlevel=null,this.animalevel=null,this.cutlevel=new Array(3),this.animalevel=new Array(3),t=0;t<3;t++)for(this.cutlevel[t]=new Array(this.iBCH),this.animalevel[t]=new s.default(256),e=0;e<this.iBCH;e++)for(this.cutlevel[t][e]=new Array(this.iBCW),i=0;i<this.iBCW;i++)this.cutlevel[t][e][i]=new Int16Array(2);for(t=0;t<3;t++){for(e=0;e<this.iBCH;e++)for(i=0;i<this.iBCW;i++)this.cutlevel[t][e][i][0]=-1;for(e=0;e<256;e++)this.animalevel[t][e]=null}for(t=0;t<MapData.MAXPATHCOUNT;t++)this.pps[t]=null}},{key:"bCanMove",value:function(t,e,i,a){var n,s;for(n=0;n<MapData.MAXPATHCOUNT;n++)if(null!=this.pps[n])for(s=1;s<this.pps[n].iPathCount;s++)if(MapData.llcollision_ai(t,e,i,a,this.pps[n].path[s-1][0],this.pps[n].path[s-1][1],this.pps[n].path[s][0],this.pps[n].path[s][1]))return!1;return!0}}]),MapData}();i.default=o,o.bInNumber=function(t,e,i){if(e<i){if(e<=t&&t<=i)return!0}else if(e>=t&&t>=i)return!0;return!1},o.lJx,o.lJy,o.iJx,o.iJy,o.fJx,o.fJy,o.iD1,o.iD2,o.llcollision_ext=function(t,e,i,a,n,s,r,u){var l,f,h,d;if(f=1*e-(l=t==i?0:e==a?0:1*(a-e)/(i-t))*t,d=1*s-(h=n==r?0:s==u?0:1*(u-s)/(r-n))*n,t==i){if(n==r)return t==n&&(o.fJx=t,e>=s&&e<=u||e>=u&&e<=s?(o.fJy=e,!0):a>=s&&a<=u||a>=u&&a<=s?(o.fJy=a,!0):s>=e&&s<=a||s>=e&&s<=a?(o.fJy=s,!0):(u>=e&&u<=a||u>=e&&u<=a)&&(o.fJy=u,!0));o.fJx=t,o.fJy=h*o.fJx+d}else n==r?(o.fJx=n,o.fJy=l*o.fJx+f):(o.fJx=-(f-d)/(l-h),o.fJy=l*o.fJx+f);return!(o.fJx<t&&o.fJx<i)&&(!(o.fJx<n&&o.fJx<r)&&(!(o.fJx>t&&o.fJx>i)&&(!(o.fJx>n&&o.fJx>r)&&(!(o.fJy<e&&o.fJy<a)&&(!(o.fJy<s&&o.fJy<u)&&(!(o.fJy>e&&o.fJy>a)&&!(o.fJy>s&&o.fJy>u)))))))},o.llcollision_ai=function(t,e,i,a,s,r,u,l){if(!n.default.intersect(t,e,i,a,s,r,u,l))return!1;var f=1*((s-t)*(l-e)-(r-e)*(u-t))/((t-u)*(a-l)-(e-l)*(i-u)-((t-s)*(a-r)-(e-r)*(i-s)));return o.iJx=parseInt(f*(i-t)+t),o.iJy=parseInt(f*(a-e)+e),!0},o.llcollision_ai1=function(t,e,i,a,n,s,r,u){var l=(t-n)*(a-s)-(e-s)*(i-n),f=(t-r)*(a-u)-(e-u)*(i-r);if(l>0&&f>0||l<0&&f<0)return!1;var h=(n-t)*(u-e)-(s-e)*(r-t),d=h+l-f;if(h>0&&d>0||h<0&&d<0)return!1;var c=1*h/(f-l);return o.iJx=parseInt(c*(i-t)+t),o.iJy=parseInt(c*(a-e)+e),!0},o.llcollision=function(t,e,i,a,n,s,r,u){var l=llcollision_ext(t,e,i,a,n,s,r,u);return l&&(o.iJx=parseInt(o.fJx),o.iJy=parseInt(o.fJy)),l},o.llcollision_=function(t,e,i,a,n,s,r,u){var l,f,h;if(t==i)return n==r?!(t!=n||!bInNumber(e,s,u)&&!bInNumber(a,s,u))&&(o.lJx=t,o.lJy=e,!0):s==u?!(!o.bInNumber(t,n,r)||!o.bInNumber(s,e,a))&&(o.lJx=t,o.lJy=s,!0):!!o.bInNumber(t,n,r)&&(f=((l=t)-n)*(s-u)/(n-r)+s,!!bInNumber(f,e,a)&&(!!bInNumber(f,s,u)&&(o.lJx=t,o.lJy=f,!0)));if(n==r)return e==a?!(!o.bInNumber(n,t,i)||!o.bInNumber(e,s,u))&&(o.lJx=n,o.lJy=e,!0):!!o.bInNumber(n,t,i)&&(f=((l=n)-t)*(e-a)/(t-i)+e,!!o.bInNumber(f,e,a)&&(!!o.bInNumber(f,s,u)&&(o.lJx=n,o.lJy=f,!0)));if(e==a)return s==u?!(e!=s||(o.lJx=t,!o.bInNumber(t,n,r)&&!o.bInNumber(i,n,r)))&&(o.lJy=e,!0):!!o.bInNumber(e,s,u)&&(l=((f=e)-s)*(n-r)/(s-u)+n,!!o.bInNumber(l,t,i)&&(!!o.bInNumber(l,n,r)&&(lJx=l,lJy=e,!0)));if(s==u)return!!o.bInNumber(s,e,a)&&(l=((f=s)-e)*(t-i)/(e-a)+t,!!o.bInNumber(l,t,i)&&(!!o.bInNumber(l,n,r)&&(o.lJx=l,o.lJy=s,!0)));if(0==(h=(e-a)*(n-r)-(s-u)*(t-i)))return(e-s)*(t-i)*(n-r)+n*(s-u)*(t-i)-t*(e-a)*(n-r)==0&&(!!o.bInNumber(t,n,r)&&(o.lJx=t,o.lJy=e,!0));return!((l=-((e-s)*(t-i)*(n-r)-t*(e-a)*(n-r)+n*(s-u)*(t-i))/h)>t+20&&l>i+20||l<t-20&&l<i-20)&&(!(l>n+20&&l>r+20||l<n-20&&l<r-20)&&(!((f=((e-s)*(t-i)*(n-r)-t*(e-a)*(n-r)+n*(s-u)*(t-i)+t*h)*(a-e)/(h*(t-i))+e)>e+20&&f>a+20||f<e-20&&f<a-20)&&(!(f>s+20&&f>u+20||f<s-20&&f<u-20)&&(o.lJx=l,o.lJy=f,!0))))},o.MAXPATHCOUNT=128},{"../engine/graphics/M3DMath":29,"../engtst/mgm/GmPlay":65,"./ANIMALEVEL":281,"./COLLPATH":282}],286:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("./MapData")),s=_interopRequireDefault(t("./FindWay")),r=_interopRequireDefault(t("./VisualBlock")),o=(_interopRequireDefault(t("../mgm/mainmenu/MainMenu")),_interopRequireDefault(t("../mgm/newmainmenu/LeadPage")),_interopRequireDefault(t("../config/GameData"))),u=_interopRequireDefault(t("../config/GmConfig")),l=(_interopRequireDefault(t("../engine/graphics/AnimaAction")),_interopRequireDefault(t("../engtst/mgm/GmPlay"))),f=(_interopRequireDefault(t("../engtst/mgm/gameing/fast/SystemOperate")),_interopRequireDefault(t("../engtst/mgm/gameing/help/JQMode"))),h=_interopRequireDefault(t("../engtst/mgm/gameing/me/GmMe")),d=_interopRequireDefault(t("../engtst/mgm/gameing/me/land/MyLand")),c=_interopRequireDefault(t("../engine/PackageTools")),m=_interopRequireDefault(t("../engine/graphics/M3DFast")),g=_interopRequireDefault(t("../engine/graphics/XAnima")),_=_interopRequireDefault(t("./ANIMALEVEL")),p=_interopRequireDefault(t("./COLLPATH")),b=_interopRequireDefault(t("./TouchEffect")),D=_interopRequireDefault(t("../config/XDefine"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var y=function SourceFrom(){_classCallCheck(this,SourceFrom),this.sName=""},w=function(t){function FromAnima(t){_classCallCheck(this,FromAnima);var e=_possibleConstructorReturn(this,(FromAnima.__proto__||Object.getPrototypeOf(FromAnima)).call(this));return e.xani=new g.default(t),e}return _inherits(FromAnima,y),FromAnima}(),S=function(t){function FromCut(){_classCallCheck(this,FromCut);var t=_possibleConstructorReturn(this,(FromCut.__proto__||Object.getPrototypeOf(FromCut)).call(this));return t.sImageName="",t.iRid=-1,t}return _inherits(FromCut,y),FromCut}(),x=function(t){function FromPng(){_classCallCheck(this,FromPng);var t,e,i=_possibleConstructorReturn(this,(FromPng.__proto__||Object.getPrototypeOf(FromPng)).call(this));for(i.iRid=new Array(10),t=0;t<10;t++)for(i.iRid[t]=new Int32Array(10),e=0;e<10;e++)i.iRid[t][e]=-1;return i}return _inherits(FromPng,y),FromPng}(),P=function MAPLIST(){_classCallCheck(this,MAPLIST),this.sMapName="",this.iMapId=-1},v=function(){function MapManager(){var t;for(_classCallCheck(this,MapManager),this.iOffx=0,this.iOffy=0,this.xm3f=m.default.gi(),this.pSourceIndex=new y(MapManager.SOURCECOUNT),this.pSourceList=new y(MapManager.SOURCECOUNT),t=0;t<MapManager.SOURCECOUNT;t++)this.pSourceIndex[t]=null,this.pSourceList[t]=null;for(this.mapdata=new n.default,this.mfy=new s.default,this.vbk=new r.default(this.xm3f),this.maplist=new P(MapManager.MAXMAPCOUNT),t=0;t<MapManager.MAXMAPCOUNT;t++)this.maplist[t]=new P;this.sCurrentMapName="",this.bMapLoaded=!1,this.iMapChangeing=0,this.bOpenProjected=!1,this.bLoadSourced=!1,this.iLoadStat=0}return a(MapManager,[{key:"LoadMapList",value:function(){var t,e,i,a;for(t=0;t<l.default.de_map.iDataCount;t++)for(a=l.default.de_map.datas[t].iDid,this.maplist[a].iMapId=a,e=0;e<l.default.de_map.datas[t].iItemCount;e++)for(i=0;i<l.default.de_map.datas[t].items[e].iValueCount;i++)2==l.default.de_map.datas[t].items[e].values[i].iVid&&(this.maplist[a].sMapName=l.default.de_map.datas[t].items[e].values[i].sValue)}},{key:"IdToName",value:function(t){var e;for(e=0;e<MapManager.MAXMAPCOUNT;e++)if(this.maplist[e].iMapId==t)return this.maplist[e].sMapName;return""}},{key:"NameToId",value:function(t){var e;for(e=0;e<MapManager.MAXMAPCOUNT;e++)if(l.default.sop("------------"+this.maplist[e].sMapName+"==="+t+"------------"),this.maplist[e].sMapName==t)return this.maplist[e].iMapId;return-1}},{key:"LoadLogic",value:function(){switch(this.iLoadStat){case 0:this.sProjectPath="res/datapackage/maps",this.pls=c.default.gi(),this.OpenProject(),this.iLoadStat=1;break;case 1:this.bOpenProjected&&(this.iLoadStat=2,this.LoadSource());break;case 2:this.bLoadSourced&&(this.iLoadStat=3,this.Load2Source());break;case 3:for(var t=0;t<this.iSourceCount;t++)if(!this.pSourceList[t].bLoaded)return!1;this.iLoadStat=4,this.vbk.LoadNpcs(this.pls,this.sProjectPath+"/npcs");break;case 4:this.vbk.ani_npcs.bLoadSuccess&&(this.iLoadStat=5);break;case 5:return!0}return!1}},{key:"Load2Source",value:function(){for(var t=0;t<this.iSourceCount;t++)l.default.sop("载入:"+this.pSourceList[t].iType+","+this.pSourceList[t].sName),this.pSourceList[t].bLoaded=!1,this._Load2Source(t,D.default.BASE_URL+this.sProjectPath+"/source_"+this.pSourceList[t].sName+"/config.dat")}},{key:"_Load2Source",value:function(t,e,i){if(null!=i){var a,n,s;this.pSourceList[t].bLoaded=!0,this.pls.GetData3(i);var r="datapackage/maps";switch(this.pls.GetNextByte(),this.pls.GetNextByte(),this.pSourceList[t].iType){case 0:a=this.pSourceList[t],this.pls.GetNextString(),this.pls.GetNextString(),a.iSid=this.pls.GetNextInt(),a.xani.LoadAnima_fullpath(this.sProjectPath+"/source_"+this.pSourceList[t].sName,this.pls,!0),this.pSourceIndex[a.iSid]=a;break;case 1:n=this.pSourceList[t],this.pls.GetNextString(),this.pls.GetNextString(),n.iSid=this.pls.GetNextInt(),this.pls.GetNextString(),n.sImageName=this.pls.GetNextString(),n.iBw=this.pls.GetNextInt(),n.iBh=this.pls.GetNextInt(),l.default.sop(this.sProjectPath+"/source_"+this.pSourceList[t].sName+"/"+n.sImageName),n.sImageName=r+"/source_"+this.pSourceList[t].sName+"/"+n.sImageName,n.iRid=-1,this.pSourceIndex[n.iSid]=n;break;case 2:s=this.pSourceList[t],this.pls.GetNextString(),this.pls.GetNextString(),s.iSid=this.pls.GetNextInt(),this.pls.GetNextString(),this.pls.GetNextString(),s.ww=this.pls.GetNextInt(),s.hh=this.pls.GetNextInt(),s.w=this.pls.GetNextInt(),s.h=this.pls.GetNextInt(),s.sImagePath=r+"/source_"+this.pSourceList[t].sName+"/",this.pSourceIndex[s.iSid]=s}}else Laya.loader.load(e,Laya.Handler.create(this,this._Load2Source,[t,e]),null,Laya.Loader.BUFFER)}},{key:"OpenProject",value:function(){this._OpenProject(this,D.default.BASE_URL+this.sProjectPath+"/project.dat")}},{key:"_OpenProject",value:function(t,e,i){null!=i?(this.pls.GetData3(i),this.pls.GetNextByte(),l.default.sop("打开工程:"+this.pls.GetNextString()),this.iBlockWidth=this.pls.GetNextInt(),this.iBlockHeight=this.pls.GetNextInt(),l.default.sop("BW:"+this.iBlockWidth+",BH:"+this.iBlockHeight),this.LoadMapList(),this.bOpenProjected=!0):Laya.loader.load(e,Laya.Handler.create(this,this._OpenProject,[this,e]),null,Laya.Loader.BUFFER)}},{key:"LoadSource",value:function(){this._LoadSource(this,D.default.BASE_URL+this.sProjectPath+"/sourceconfig.dat")}},{key:"_LoadSource",value:function(t,e,i){if(null!=i){var a,n;for(this.bLoadSourced=!0,a=0,this.pls.GetData3(i),this.pls.GetNextByte(),a=0,n=this.pls.GetNextByte();n>=0;){switch(n){case 0:this.pSourceList[a]=new w(this.xm3f);break;case 1:this.pSourceList[a]=new S;break;case 2:this.pSourceList[a]=new x}this.pSourceList[a].iType=n,this.pSourceList[a].sName=this.pls.GetNextString(),l.default.sop("["+a+"]Source:"+n+","+this.pSourceList[a].sName),n=this.pls.GetNextByte(),a++}this.iSourceCount=a}else Laya.loader.load(e,Laya.Handler.create(this,this._LoadSource,[this,e]),null,Laya.Loader.BUFFER)}},{key:"LoadMap",value:function(t,e,i,a){this.iVisualMapId=e,this.iCurrentMapId!=t&&(this.sCurrentMapName=this.IdToName(t),this.iCurrentMapId=t,this._LoadMap(this,D.default.BASE_URL+this.sProjectPath+"/maps/"+this.sCurrentMapName),l.default.sop(this.sProjectPath+"/"+this.sCurrentMapName))}},{key:"_LoadMap",value:function(t,e,i){if(null!=i){var a,n,s,r,o;for(this.pls.GetData3(i),this.pls.xordata(this.pls.iLength),this.pls.GetNextByte(),this.pls.GetNextInt(),this.mapdata.sMapName=this.pls.GetNextString(),this.mapdata.sMapDetail=this.pls.GetNextString(),this.mapdata.iMapWidth=this.pls.GetNextInt(),this.mapdata.iMapHeight=this.pls.GetNextInt(),this.mapdata.iGroundSourceId=this.pls.GetNextInt(),this.mapdata.iMapFlag=0,this.mapdata.iBCW=parseInt((this.mapdata.iMapWidth+this.iBlockWidth-1)/this.iBlockWidth),this.mapdata.iBCH=parseInt((this.mapdata.iMapHeight+this.iBlockHeight-1)/this.iBlockHeight),l.default.sop("open map:"+this.mapdata.sMapName+","+this.mapdata.iMapWidth+","+this.mapdata.iMapHeight+","+this.mapdata.iBCW+","+this.mapdata.iBCH),this.mapdata.InitCutLevel(),l.default.sop("at 1="+this.pls.iOffset),r=this.pls.GetNextInt(),o=0,a=0;a<3;a++)for(n=0;n<this.mapdata.iBCH;n++)for(s=0;s<this.mapdata.iBCW;s++)o>=r&&(this.mapdata.cutlevel[a][n][s][0]=this.pls.GetNextShort(),-1==this.mapdata.cutlevel[a][n][s][0]?(r=this.pls.GetNextInt(),o=0):this.mapdata.cutlevel[a][n][s][1]=this.pls.GetNextShort()),o++;for(l.default.sop("at 2="+this.pls.iOffset),a=0;a<3;a++)for(n=0;-1!=(s=this.pls.GetNextShort());)this.mapdata.animalevel[a][n]=new _.default,this.mapdata.animalevel[a][n].sourceId=s,this.mapdata.animalevel[a][n].iX=this.pls.GetNextInt(),this.mapdata.animalevel[a][n].iY=this.pls.GetNextInt(),this.mapdata.animalevel[a][n].sName=this.pls.GetNextString(),this.pSourceIndex[this.mapdata.animalevel[a][n].sourceId].xani.InitAnimaWithName(this.mapdata.animalevel[a][n].sName,this.mapdata.animalevel[a][n].aa),n++;for(a=0,s=this.pls.GetNextByte();s>0;){for(this.mapdata.pps[a]=new p.default(s),n=0;n<s;n++)this.mapdata.pps[a].path[n][0]=this.pls.GetNextShort(),this.mapdata.pps[a].path[n][1]=this.pls.GetNextShort();a++,s=this.pls.GetNextByte()}l.default.sop("at 3="+this.pls.iOffset),this.vbk.LoadVisual(this.pls),this.mfy.initboom(this.vbk.iBoomX,this.vbk.iBoomY,this.mapdata.iMapWidth,this.mapdata.iMapHeight,this.iBlockWidth,this.iBlockHeight),l.default.sop("at 4="+this.pls.iOffset),this.bMapLoaded=!0,1==l.default.iTraverse&&this.RemoveTraverse(0)}else Laya.loader.load(e,Laya.Handler.create(t,t._LoadMap,[t,e]),null,Laya.Loader.BUFFER)}},{key:"RemoveTraverse",value:function(t){var e;if(0==t&&3==this.iCurrentMapId)for(e=0;e<n.default.MAXPATHCOUNT&&null!=this.mapdata.pps[e];e++)if(1248==this.mapdata.pps[e].path[0][0]&&713==this.mapdata.pps[e].path[0][1])return this.mapdata.pps[e].iPathCount=0,void this.mfy.initboom(this.vbk.iBoomX,this.vbk.iBoomY,this.mapdata.iMapWidth,this.mapdata.iMapHeight,this.iBlockWidth,this.iBlockHeight)}},{key:"mto",value:function(t,e){var i,a;this.vbk.CheckNow(t,e),this.vbk.bFaceToFace&&(this.vbk.bFaceToFace=!1,f.default.jq.iGoToNpc=0,h.default.me.ChangeStat("站立")),i=u.default.SCRW/2-t,a=u.default.SCRH/2-e,i>0&&(i=0),i<u.default.SCRW-this.mapdata.iMapWidth&&(i=u.default.SCRW-this.mapdata.iMapWidth),a>0&&(a=0),a<u.default.SCRH-this.mapdata.iMapHeight&&(a=u.default.SCRH-this.mapdata.iMapHeight),this.iOffx=i,this.iOffy=a,this.mapdata.iMapWidth<u.default.SCRW&&(this.iOffx=(u.default.SCRW-this.mapdata.iMapWidth)/2),this.mapdata.iMapHeight<u.default.SCRH&&(this.iOffy=(u.default.SCRH-this.mapdata.iMapHeight)/2)}},{key:"Draw",value:function(){var t,e,i,a,n,s,r,l,f;for(s=-this.iOffx/this.iBlockWidth,r=-this.iOffy/this.iBlockHeight,l=s+(u.default.SCRW+this.iBlockWidth-1)/this.iBlockWidth+1,f=r+(u.default.SCRH+this.iBlockHeight-1)/this.iBlockHeight+1,l>this.mapdata.iBCW&&(l=this.mapdata.iBCW),f>this.mapdata.iBCH&&(f=this.mapdata.iBCH),t=0;t<3;t++){for(e=r;e<f;e++)for(i=s;i<l;i++)-1!=this.mapdata.cutlevel[t][e][i][0]&&(-1==(a=this.pSourceIndex[this.mapdata.cutlevel[t][e][i][0]]).iRid&&(a.iRid=m.default.gi().LoadFromFile(a.sImageName,-1,o.default.bFromSD)),this.xm3f.DrawImageEx(0,this.iOffx+i*this.iBlockWidth,this.iOffy+e*this.iBlockHeight,a.iRid,this.mapdata.cutlevel[t][e][i][1]%a.iBw*this.iBlockWidth,this.mapdata.cutlevel[t][e][i][1]/a.iBw*this.iBlockHeight,this.iBlockWidth,this.iBlockHeight,100,1,1,0,0,0));for(e=0;e<256;e++)null!=this.mapdata.animalevel[t][e]&&((n=this.pSourceIndex[this.mapdata.animalevel[t][e].sourceId]).xani.DrawAnima_aa(this.iOffx+this.mapdata.animalevel[t][e].iX,this.iOffy+this.mapdata.animalevel[t][e].iY,this.mapdata.animalevel[t][e].aa),n.xani.NextFrame(this.mapdata.animalevel[t][e].aa))}}},{key:"DrawGround",value:function(){var t,e,i,a,n;if(this.idsx=-this.iOffx/this.iBlockWidth,this.idsy=-this.iOffy/this.iBlockHeight,this.idsw=this.idsx+(u.default.SCRW+this.iBlockWidth-1)/this.iBlockWidth+1,this.idsh=this.idsy+(u.default.SCRH+this.iBlockHeight-1)/this.iBlockHeight+1,this.idsx<0&&(this.idsx=0),this.idsy<0&&(this.idsy=0),this.idsw>this.mapdata.iBCW&&(this.idsw=this.mapdata.iBCW),this.idsh>this.mapdata.iBCH&&(this.idsh=this.mapdata.iBCH),this.mapdata.iGroundSourceId>=0){var s=this.pSourceIndex[this.mapdata.iGroundSourceId];for(t=0;t<s.ww;t++)for(e=0;e<s.hh;e++)i=this.iOffx+512*t,a=this.iOffy+512*e,-1==s.iRid[e][t]&&(s.iRid[e][t]=m.default.gi().LoadFromFile(s.sImagePath+"spirit_"+t+"_"+e+".png",-1,o.default.bFromSD)),i+512<0||i>=u.default.SCRW||a+512<0||a>=u.default.SCRH||this.xm3f.DrawImageEx(0,i,a,s.iRid[e][t],0,0,512,512,100,1,1,0,0,0)}for(t=0,e=0;e<256;e++)null!=this.mapdata.animalevel[t][e]&&((n=this.pSourceIndex[this.mapdata.animalevel[t][e].sourceId]).xani.DrawAnima_aa(this.iOffx+this.mapdata.animalevel[t][e].iX,this.iOffy+this.mapdata.animalevel[t][e].iY,this.mapdata.animalevel[t][e].aa),n.xani.NextFrame(this.mapdata.animalevel[t][e].aa));if(this.mapdata.iMapWidth<u.default.SCRW&&this.mapdata.iMapWidth%512!=0&&M2DFast.xm3f.FillRect_2D(this.iOffx+this.mapdata.iMapWidth,this.iOffy,u.default.SCRW,u.default.SCRH,4278190080),this.mapdata.iMapHeight<u.default.SCRH&&this.mapdata.iMapHeight%512!=0&&M2DFast.xm3f.FillRect_2D(this.iOffx,this.iOffy+this.mapdata.iMapHeight,u.default.SCRW,u.default.SCRH,4278190080),this.iCurrentMapId>=41&&this.iCurrentMapId<=45)for(t=0;t<d.default.iMaxArable;t++)0!=(d.default.iArableGrow&1<<t)?l.default.xani_grow.DrawAnima(this.iOffx+d.default.iArableOff[t][0],this.iOffy+d.default.iArableOff[t][1],d.default.sLandName[iCurrentMapId-41]+"地块",0):d.default.bShowBlock&&l.default.xani_grow.DrawAnima(this.iOffx+d.default.iArableOff[t][0],this.iOffy+d.default.iArableOff[t][1],"选择地块",0);1==l.default.iTraverse&&3==this.iCurrentMapId&&l.default.xani_ui4.DrawAnima(this.iOffx+1218,this.iOffy+718,"西阳补路",0),b.default.te.Draw()}},{key:"DrawMiddleDirect",value:function(){var t,e;for(1,t=0;t<256;t++)null!=this.mapdata.animalevel[1][t]&&((e=this.pSourceIndex[this.mapdata.animalevel[1][t].sourceId]).xani.DrawAnima_aa(this.iOffx+this.mapdata.animalevel[1][t].iX,this.iOffy+this.mapdata.animalevel[1][t].iY,this.mapdata.animalevel[1][t].aa),e.xani.NextFrame(this.mapdata.animalevel[1][t].aa))}},{key:"DrawMiddle",value:function(t){var e,i;for(1,e=0;e<256;e++)null!=this.mapdata.animalevel[1][e]&&(i=this.pSourceIndex[this.mapdata.animalevel[1][e].sourceId],t.DrawAnima_aa(this.iOffy+this.mapdata.animalevel[1][e].iY,i.xani,this.iOffx+this.mapdata.animalevel[1][e].iX,this.iOffy+this.mapdata.animalevel[1][e].iY,this.mapdata.animalevel[1][e].aa),i.xani.NextFrame(this.mapdata.animalevel[1][e].aa));this.vbk.DrawNpcInBuffer(t,this.iOffx,this.iOffy)}},{key:"DrawSky",value:function(){var t,e;for(2,t=0;t<256;t++)null!=this.mapdata.animalevel[2][t]&&((e=this.pSourceIndex[this.mapdata.animalevel[2][t].sourceId]).xani.DrawAnima_aa(this.iOffx+this.mapdata.animalevel[2][t].iX,this.iOffy+this.mapdata.animalevel[2][t].iY,this.mapdata.animalevel[2][t].aa),e.xani.NextFrame(this.mapdata.animalevel[2][t].aa))}}]),MapManager}();i.default=v,v.MAXMAPCOUNT=128,v.SOURCECOUNT=128,v.mm=null,v.gi=function(){return null==v.mm&&(v.mm=new v),v.mm}},{"../config/GameData":4,"../config/GmConfig":5,"../config/XDefine":7,"../engine/PackageTools":9,"../engine/graphics/AnimaAction":25,"../engine/graphics/M3DFast":28,"../engine/graphics/XAnima":30,"../engtst/mgm/GmPlay":65,"../engtst/mgm/gameing/fast/SystemOperate":124,"../engtst/mgm/gameing/help/JQMode":187,"../engtst/mgm/gameing/me/GmMe":211,"../engtst/mgm/gameing/me/land/MyLand":227,"../mgm/mainmenu/MainMenu":303,"../mgm/newmainmenu/LeadPage":308,"./ANIMALEVEL":281,"./COLLPATH":282,"./FindWay":284,"./MapData":285,"./TouchEffect":289,"./VisualBlock":290}],287:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../config/XDefine")),s=(_interopRequireDefault(t("../map/npcboomstruct/SE_EVENT")),_interopRequireDefault(t("../map/npcboomstruct/SE_REQUIREMENT")),_interopRequireDefault(t("../engtst/mgm/GmPlay"))),r=_interopRequireDefault(t("../engtst/mgm/GmProtocol")),o=_interopRequireDefault(t("../engtst/mgm/XStat")),u=_interopRequireDefault(t("../engtst/mgm/frame/InNumber")),l=_interopRequireDefault(t("../engtst/mgm/frame/message/EasyMessage")),f=_interopRequireDefault(t("../engtst/mgm/frame/message/FrameMessage")),h=_interopRequireDefault(t("../engtst/mgm/gameing/equip/RepairEquip")),d=_interopRequireDefault(t("../engtst/mgm/gameing/fteam/CreateFT")),c=_interopRequireDefault(t("../engtst/mgm/gameing/fteam/MyFT")),m=_interopRequireDefault(t("../engtst/mgm/gameing/fuben/MyFuBen")),g=_interopRequireDefault(t("../engtst/mgm/gameing/gov/ApplyGovFight")),_=_interopRequireDefault(t("../engtst/mgm/gameing/gov/MyGov")),p=_interopRequireDefault(t("../engtst/mgm/gameing/gov/ext/RemedyMerge")),b=_interopRequireDefault(t("../engtst/mgm/gameing/gov/ext/apply/GetInGov")),D=_interopRequireDefault(t("../engtst/mgm/gameing/gov/ext/manage/NewGovManage")),y=_interopRequireDefault(t("../engtst/mgm/gameing/gov/ext/mission/EntrustMission")),w=_interopRequireDefault(t("../engtst/mgm/gameing/gov/fuben/GovFBTarget")),S=_interopRequireDefault(t("../engtst/mgm/gameing/help/SelectNewPet")),x=_interopRequireDefault(t("../engtst/mgm/gameing/help/SelectSchool")),P=_interopRequireDefault(t("../engtst/mgm/gameing/me/GmMe")),v=_interopRequireDefault(t("../engtst/mgm/gameing/me/goods/MyGoods")),R=_interopRequireDefault(t("../engtst/mgm/gameing/me/mission/MyMission")),M=_interopRequireDefault(t("../engtst/mgm/gameing/me/mission/SelectGoodsForMission")),C=_interopRequireDefault(t("../engtst/mgm/gameing/me/pet/fuse/ApprovePet")),k=_interopRequireDefault(t("../engtst/mgm/gameing/me/pet/fuse/FusePet")),T=_interopRequireDefault(t("../engtst/mgm/gameing/me/pet/jj/JJPet")),A=_interopRequireDefault(t("../engtst/mgm/gameing/me/pet/jj/MergeZR")),G=_interopRequireDefault(t("../engtst/mgm/gameing/me/shop/shop_BuyDrawing")),E=(_interopRequireDefault(t("../engtst/mgm/gameing/me/shop/business/CreateShop")),_interopRequireDefault(t("../engtst/mgm/gameing/me/team/MyTeam"))),X=_interopRequireDefault(t("../engtst/mgm/gameing/system/ChangeColor")),O=_interopRequireDefault(t("../engtst/mgm/gameing/system/GetCodeReward")),I=_interopRequireDefault(t("./MapManager")),F=_interopRequireDefault(t("./VisualBlock"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var N=function(){function ProcMap(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ProcMap),this.bMapChanged=!1}return a(ProcMap,[{key:"RequirementCheck",value:function(t){var e,i,a;switch(t.iRid){case 0:if(e=parseInt(t.sValues[0]),P.default.me.rbs.iSchoolId==e)return!0;break;case 1:if(R.default.m.bCheckDoing(parseInt(t.sValues[0])))return!0;break;case 2:if(0!=parseInt(t.sValues[0]))return!!E.default.bInTeam()||(l.default.easymsg.AddMessage("请组队后再来"),!1);if(E.default.bNoTeam())return!0;break;case 3:if(P.default.me.rbs.iLev>=parseInt(t.sValues[0])&&P.default.me.rbs.iLev<=parseInt(t.sValues[1]))return!0;break;case 4:if(0==parseInt(t.sValues[0])){if(_.default.mg.iRealGid<=0)return!0}else if(_.default.mg.iRealGid>0)return!0;break;case 5:if(1==parseInt(t.sValues[0]))return s.default.sop(""+I.default.gi().mapdata.sMapDetail),s.default.sop(""+_.default.mg.sName),I.default.gi().mapdata.sMapDetail==_.default.mg.sName;if(0==parseInt(t.sValues[0]))return I.default.gi().mapdata.sMapDetail!=_.default.mg.sName;break;case 6:if(i=parseInt(t.sValues[0]),s.default.sop("check special "+i),R.default.m.bCheckSpecialDoing(i))return!0;break;case 7:if(m.default.iFbType==parseInt(t.sValues[0])){if(0!=(e=parseInt(t.sValues[1]))&&m.default.iFbProc<e)return!0;if(0!=(e=parseInt(t.sValues[2]))&&m.default.iFbProc==e)return!0;if(0!=(e=parseInt(t.sValues[3]))&&m.default.iFbProc>e)return!0}break;case 8:if(1==parseInt(t.sValues[0])&&I.default.gi().mapdata.sMapDetail==_.default.mg.sName)return!0;break;case 9:if(0==(e=parseInt(t.sValues[0]))){if(c.default.mft.iFTid<=0)return!0}else if(1==e){if(c.default.mft.iFTid>0)return!0}else if(2==e&&c.default.mft.iFTid>0&&c.default.mft.iFTJob<=1)return!0;break;case 10:for(i=parseInt(t.sValues[0]),a=parseInt(t.sValues[1]),e=0;e<20;e++)if(v.default.gi().goods[2][e].iGid>0&&v.default.gi().goods[2][e].iTid==i&&v.default.gi().goods[2][e].iCount>=a)return!0;break;case 11:return R.default.m.bCheckInMissionMap(parseInt(t.sValues[0]));case 12:if(null!=F.default.talkingnpc&&F.default.talkingnpc.bCurrentBlock&&F.default.talkingnpc.iNpcId==parseInt(t.sValues[0]))return!0;break;case 13:if(e=parseInt(t.sValues[0]),s.default.sop(w.default.iPlanId+"=================="+e),w.default.iPlanId==e)return!0;break;case 14:if(e=parseInt(t.sValues[0]),n.default.GetRand(0,100)<e)return!0;break;case 15:if(P.default.me.rbs.iLev>=30&&0==(8&P.default.me.iFlag[39]))return!0}return!1}},{key:"ProcEvent",value:function(t){var e,i,a,n,c,m;switch(t.iEid){case 0:var w=I.default.gi().NameToId(t.sValues[0]),R=parseInt(t.sValues[1]),E=parseInt(t.sValues[2]);if(1==I.default.gi().iCurrentMapId&&P.default.me.rbs.iLev<10&&v.default.gi().goods[1][2].iGid<=0){f.default.fm.Open("郊外比较危险，先带上武器再去吧（打开背包穿戴装备）");break}s.default.sop("go to "+w+","+t.sValues[0]),r.default.gi().s_ChangeMap(w,R,E);break;case 1:(e=parseInt(t.sValues[0]))>=1&&e<=9&&r.default.gi().s_GetInSchool(e);break;case 2:o.default.gi().PushStat(o.default.GS_LEARNSKILL);break;case 3:e=parseInt(t.sValues[0]),i=parseInt(t.sValues[1]),r.default.gi().s_GetMission(e,i);break;case 4:r.default.gi().s_GetSchoolMission(parseInt(t.sValues[0]));break;case 5:500==(e=parseInt(t.sValues[0]))?o.default.gi().PushStat(o.default.GS_MYRECOVER):r.default.gi().s_NpcShop(e);break;case 6:r.default.gi().s_FinishMission(0,parseInt(t.sValues[0]),0,0);break;case 7:o.default.gi().PushStat(o.default.GS_CREATEGOV);break;case 8:switch(parseInt(t.sValues[0])){case 0:r.default.gi().s_NewGovOperate(0,0,0,0,0,""),r.default.gi().s_NewGovOperate(2,0,0,0,0,"");break;case 1:r.default.gi().s_GetIntoGov(_.default.mg.iRealGid);break;case 2:r.default.gi().s_GovOperateFrame(0);break;case 3:r.default.gi().s_GovOperateFrame(1);break;case 4:r.default.gi().s_getflag(),o.default.gi().PushStat(o.default.GS_PETXIU);break;case 5:_.default.mg.iRealGid>0&&_.default.mg.iJob<=1?g.default.Open():l.default.easymsg.AddMessage("帮主/副帮主才能报名");break;case 6:o.default.gi().PushStat(o.default.GS_CHANGENAME);break;case 7:u.default.start(u.default.IN_RID,"输入人物ID",0,99999999);break;case 8:d.default.Open();break;case 9:r.default.gi().s_FTChallenge(0,1e5,0);break;case 10:l.default.easymsg.AddMessage("系统暂未开放");break;case 11:T.default.Open();break;case 12:A.default.Open();break;case 13:k.default.Open();break;case 14:X.default.Open();break;case 15:x.default.Open();break;case 16:C.default.Open();break;case 17:b.default.Open();break;case 18:y.default.Open();break;case 19:D.default.Open();break;case 20:r.default.gi().s_NewGovOperate(20,0,0,0,0,"");break;case 21:p.default.Open();break;case 22:r.default.gi().s_NewGovOperate(20,1,0,0,0,"");break;case 23:r.default.gi().s_NewGovOperate(21,0,1,0,0,"");break;case 24:r.default.gi().s_NewGovOperate(21,0,0,0,0,"");break;case 25:r.default.gi().s_NewGovOperate(23,0,0,0,0,"");break;case 26:r.default.gi().s_NewGovOperate(24,0,0,0,0,"");break;case 27:S.default.Open();break;case 28:(e=P.default.me.rbs.iLev/10)<3&&(e=3),e>8&&(e=8),G.default.GetPage(e);break;case 29:h.default.Open(-1,0)}break;case 9:r.default.gi().s_HireWorker(parseInt(t.sValues[0]),parseInt(t.sValues[1]),parseInt(t.sValues[2]));break;case 10:switch(parseInt(t.sValues[0])){case 0:o.default.gi().PushStat(o.default.GS_MAKEEQUIP);break;case 1:o.default.gi().PushStat(o.default.GS_CAMEOOPERATE);break;case 2:o.default.gi().PushStat(o.default.GS_IMPROVEEQUIP)}break;case 11:e=parseInt(t.sValues[0]),M.default.Open(e)||r.default.gi().s_FinishMission(1,e,0,0);break;case 12:switch(parseInt(t.sValues[0])){case 0:o.default.gi().PushStat(o.default.GS_GOODSSTOREFROME),o.default.gi().PushStat(o.default.GS_LOADING1),r.default.gi().s_OpenStore(0,0,0);break;case 1:r.default.gi().s_OpenStore(1,0,0)}break;case 13:r.default.gi().s_SeverEvent(parseInt(t.sValues[0]),parseInt(t.sValues[1]),parseInt(t.sValues[2]),parseInt(t.sValues[3]),parseInt(t.sValues[4]));break;case 14:if(1==I.default.gi().iCurrentMapId&&P.default.me.rbs.iLev<10&&v.default.gi().goods[1][2].iGid<=0){f.default.fm.Open("郊外比较危险，先带上武器再去吧（打开背包穿戴装备）");break}c=parseInt(t.sValues[0]),m=parseInt(t.sValues[1]),r.default.gi().s_ChangeMapNew(c,m);break;case 15:0==(c=parseInt(t.sValues[0]))?r.default.gi().s_GetCodeReward(2,""):1==c?O.default.Open():2==c&&r.default.gi().s_GetCodeReward(4,"");break;case 16:r.default.gi().s_FuBen(parseInt(t.sValues[0]),parseInt(t.sValues[1]));break;case 20:r.default.gi().s_NpcCmd(t.sValues[0],t.sValues[1],t.sValues[2],t.sValues[3],t.sValues[4],t.sValues[5],t.sValues[6],t.sValues[7]);break;case 21:r.default.gi().s_ExtendCmd(t.sValues[0],t.sValues[1],t.sValues[2],t.sValues[3],t.sValues[4],t.sValues[5],t.sValues[6],t.sValues[7]);break;case ProcMap.NPCREPLY_ANSWER:case ProcMap.NPCREPLY_QIANGDAO:case ProcMap.NPCREPLY_SHANZEI:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:if(null==F.default.talkingnpc)break;if(F.default.talkingnpc.bCurrentBlock)break;if(a=parseInt(t.sValues[0]),n=parseInt(t.sValues[1]),a!=F.default.talkingnpc.iNpcId)break;r.default.gi().s_NpcReply(a,F.default.talkingnpc.iSid,n);break;default:if(t.iEid>=100){if(null==F.default.talkingnpc)break;if(F.default.talkingnpc.bCurrentBlock)break;if(a=parseInt(t.sValues[0]),n=parseInt(t.sValues[1]),a!=F.default.talkingnpc.iNpcId)break;r.default.gi().s_NpcReply(a,F.default.talkingnpc.iSid,n)}}return!1}}]),ProcMap}();i.default=N,N.NPCREPLY_ANSWER=100,N.NPCREPLY_QIANGDAO=101,N.NPCREPLY_SHANZEI=102},{"../config/XDefine":7,"../engtst/mgm/GmPlay":65,"../engtst/mgm/GmProtocol":66,"../engtst/mgm/XStat":70,"../engtst/mgm/frame/InNumber":74,"../engtst/mgm/frame/message/EasyMessage":86,"../engtst/mgm/frame/message/FrameMessage":87,"../engtst/mgm/gameing/equip/RepairEquip":117,"../engtst/mgm/gameing/fteam/CreateFT":137,"../engtst/mgm/gameing/fteam/MyFT":140,"../engtst/mgm/gameing/fuben/MyFuBen":152,"../engtst/mgm/gameing/gov/ApplyGovFight":153,"../engtst/mgm/gameing/gov/MyGov":160,"../engtst/mgm/gameing/gov/ext/RemedyMerge":164,"../engtst/mgm/gameing/gov/ext/apply/GetInGov":166,"../engtst/mgm/gameing/gov/ext/manage/NewGovManage":177,"../engtst/mgm/gameing/gov/ext/mission/EntrustMission":178,"../engtst/mgm/gameing/gov/fuben/GovFBTarget":180,"../engtst/mgm/gameing/help/SelectNewPet":190,"../engtst/mgm/gameing/help/SelectSchool":191,"../engtst/mgm/gameing/me/GmMe":211,"../engtst/mgm/gameing/me/goods/MyGoods":222,"../engtst/mgm/gameing/me/mission/MyMission":233,"../engtst/mgm/gameing/me/mission/SelectGoodsForMission":234,"../engtst/mgm/gameing/me/pet/fuse/ApprovePet":250,"../engtst/mgm/gameing/me/pet/fuse/FusePet":251,"../engtst/mgm/gameing/me/pet/jj/JJPet":253,"../engtst/mgm/gameing/me/pet/jj/MergeZR":254,"../engtst/mgm/gameing/me/shop/business/CreateShop":263,"../engtst/mgm/gameing/me/shop/shop_BuyDrawing":264,"../engtst/mgm/gameing/me/team/MyTeam":266,"../engtst/mgm/gameing/system/ChangeColor":278,"../engtst/mgm/gameing/system/GetCodeReward":279,"../map/npcboomstruct/SE_EVENT":297,"../map/npcboomstruct/SE_REQUIREMENT":299,"./MapManager":286,"./VisualBlock":290}],288:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../config/GmConfig")),s=_interopRequireDefault(t("../config/XDefine")),r=_interopRequireDefault(t("../engine/BaseClass")),o=_interopRequireDefault(t("../engine/control/XButtonEx2")),u=_interopRequireDefault(t("../engine/graphics/M3DFast")),l=(_interopRequireDefault(t("../engine/graphics/XAnima")),_interopRequireDefault(t("../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../engtst/mgm/XStat")),h=_interopRequireDefault(t("../engtst/mgm/frame/DrawMode")),d=_interopRequireDefault(t("../engtst/mgm/frame/message/EasyMessage")),c=_interopRequireDefault(t("../engtst/mgm/gameing/fast/SteeringWheel")),m=(_interopRequireDefault(t("../engtst/mgm/gameing/fast/SystemOperate")),_interopRequireDefault(t("../engtst/mgm/gameing/me/GmMe"))),g=_interopRequireDefault(t("../engtst/mgm/gameing/me/shop/MySell")),_=_interopRequireDefault(t("../engtst/mgm/gameing/me/team/MyTeam")),p=_interopRequireDefault(t("./MapManager"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var b=function(t){function SmallMap(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SmallMap);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SmallMap.__proto__||Object.getPrototypeOf(SmallMap)).call(this));for(i.pani=t,i.pm3f=t.pm3f,i.iNpcCount=0,i.btn_npcs=new Array(64),e=0;e<64;e++)i.btn_npcs[e]=new o.default(l.default.xani_nui3),i.btn_npcs[e].bSingleButton=!0;return i.btn_worldmap=new o.default(l.default.xani_ui2),i.btn_worldmap.InitButton("世界地图按钮"),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SmallMap,r.default),a(SmallMap,[{key:"Draw_smallmap",value:function(){var t,e,i,a,n,s,r,o;if(n=p.default.gi().mapdata.iMapWidth,s=p.default.gi().mapdata.iMapHeight,p.default.gi().mapdata.iGroundSourceId>=0){var l=p.default.gi().pSourceIndex[p.default.gi().mapdata.iGroundSourceId];for(t=0;t<l.ww;t++)for(e=0;e<l.hh;e++)i=parseInt(this.iRate*t*512)+SmallMap.iMapX,a=parseInt(this.iRate*e*512)+SmallMap.iMapY,r=n<512*(t+1)?n%512:512,o=s<512*(e+1)?s%512:512,-1==l.iRid[e][t]&&(l.iRid[e][t]=u.default.gi().LoadFromFile(l.sImagePath+"spirit_"+t+"_"+e+".png",-1,!0)),u.default.gi().DrawImageEx(0,i,a,l.iRid[e][t],0,0,r,o,100,this.iRate,this.iRate,0,-1,-1)}i=parseInt(this.iRate*m.default.me.iX+SmallMap.iMapX),a=parseInt(this.iRate*m.default.me.iY+SmallMap.iMapY),u.default.gi().FillRect_2D(i-5,a-5,i+5,a+5,4294901760)}},{key:"Draw",value:function(){var t,e;t=p.default.gi().mapdata.iMapWidth,e=p.default.gi().mapdata.iMapHeight,this.iRate=t>e?700/t:700/e,SmallMap.iMapW=parseInt(t*this.iRate),SmallMap.iMapH=parseInt(e*this.iRate),SmallMap.iW=SmallMap.iMapW+20,SmallMap.iH=SmallMap.iMapH+20,SmallMap.iX=(n.default.SCRW-SmallMap.iW)/2,SmallMap.iY=(n.default.SCRH-SmallMap.iH)/2,SmallMap.iMapX=SmallMap.iX+10,SmallMap.iMapY=SmallMap.iY+10,h.default.new_bigframe(SmallMap.iX,SmallMap.iY,SmallMap.iW,SmallMap.iH),this.Draw_smallmap(),this.Draw_npc(),this.iFindWayOnce=0,this.btn_worldmap.Move(SmallMap.iX+10,SmallMap.iY+10,60,60),this.btn_worldmap.Draw()}},{key:"Draw_npc",value:function(){var t,e,i,a,n=p.default.gi().vbk;for(this.iNpcCount=0,t=0;t<n.MAXVISUALBLOCK;t++)if(null!=n.vbs[t]){if(!n.vbs[t].bCurrentBlock)continue;n.vbs[t].iX>0&&n.vbs[t].iY>0&&n.vbs[t].sNpcName.length>0&&(a=u.default.gi().GetTextWidth(n.vbs[t].sNpcName,20)+20,e=parseInt(this.iRate*n.vbs[t].iX)-a/2+SmallMap.iMapX,i=parseInt(this.iRate*n.vbs[t].iY)-16+SmallMap.iMapY,e<SmallMap.iMapX&&(e=SmallMap.iMapX),i<SmallMap.iMapY&&(i=SmallMap.iMapY),e+a>SmallMap.iMapX+SmallMap.iMapW&&(e=SmallMap.iMapX+SmallMap.iMapW-a),i+32>SmallMap.iMapY+SmallMap.iMapH&&(i=SmallMap.iMapY+SmallMap.iMapH-32),this.iNpcPoint==t&&u.default.gi().FillRect_2D(e-3,i-3,e+a+3,i+32+3,4294901760),d.default.new_Text(e,i,a),u.default.gi().DrawText_2(e+a/2,i+16,n.vbs[t].sNpcName,4294967295,20,101,1,1,0,-2,-2,3,4278190080),this.btn_npcs[this.iNpcCount].Move(e,i,a,32),this.btn_npcs[this.iNpcCount].exts[0]=n.vbs[t].iX,this.btn_npcs[this.iNpcCount].exts[1]=n.vbs[t].iY,this.btn_npcs[this.iNpcCount].exts[2]=n.vbs[t].iDownFlag,this.btn_npcs[this.iNpcCount].sName=n.vbs[t].sNpcName,"前往郊外"==n.vbs[t].sNpcName&&(SmallMap.x_x=e,SmallMap.x_y=i,SmallMap.x_w=a,SmallMap.x_h=32),this.iNpcCount++)}}},{key:"ProcTouch",value:function(t,e,i){var a,n,r;if(this.btn_worldmap.ProcTouch(t,e,i))return this.btn_worldmap.bCheck()&&f.default.gi().PushStat(f.default.GS_WORLDMAP),!0;if(s.default.bInRect(e,i,SmallMap.iX,SmallMap.iY,SmallMap.iW,SmallMap.iH)){for(a=0;a<this.iNpcCount;a++)if(s.default.bInRect(e,i,this.btn_npcs[a].iX,this.btn_npcs[a].iY,this.btn_npcs[a].iW,this.btn_npcs[a].iH)&&l.default.sop("3"),this.btn_npcs[a].ProcTouch(t,e,i)&&this.btn_npcs[a].bCheck())return g.default.gi().bSelling?d.default.easymsg.AddMessage("摆摊中不能行走"):(_.default.bNoTeam()||_.default.bTeamLeader()||_.default.bAway())&&p.default.gi().mfy.findway(m.default.me.iX,m.default.me.iY,this.btn_npcs[a].exts[0],this.btn_npcs[a].exts[1])&&(l.default.sop("check again start"),p.default.gi().mfy.checkagain()?(d.default.easymsg.AddMessage("自动寻路："+this.btn_npcs[a].sName),p.default.gi().vbk.iNpcX=this.btn_npcs[a].exts[0],p.default.gi().vbk.iNpcY=this.btn_npcs[a].exts[1],p.default.gi().vbk.iGoToNpcFlag=this.btn_npcs[a].exts[2],m.default.me.start(p.default.gi().mfy.iPath,p.default.gi().mfy.iPathDeep),this.iNpcPoint=a):l.default.sop("check again end2")),f.default.gi().PopStat(1),!0}else 3==t&&f.default.gi().PopStat(1);this.iNpcPoint=-1;var o=p.default.gi();return s.default.bInRect(e,i,SmallMap.iMapX,SmallMap.iMapY,SmallMap.iMapW,SmallMap.iMapH)&&this.iFindWayOnce<=0&&!g.default.gi().bSelling&&(_.default.bNoTeam()||_.default.bTeamLeader()||_.default.bAway())&&(n=parseInt(1*(e-SmallMap.iMapX)/this.iRate),r=parseInt(1*(i-SmallMap.iMapY)/this.iRate),c.default.sw.bAutoRun=!1,c.default.sw.bLocked=!1,o.mfy.findway(m.default.me.iX,m.default.me.iY,n,r)?(l.default.sop("check again start"),o.mfy.checkagain()?(p.default.gi().vbk.iGoToNpcFlag=-1,p.default.gi().vbk.iGoToNpcId=-1,l.default.sop("check again end1"),m.default.me.start(o.mfy.iPath,o.mfy.iPathDeep)):l.default.sop("check again end2")):(c.default.sw.bLocked=!0,c.default.sw.iLockX=n-(p.default.gi().iOffx+m.default.me.iX)+c.default.sw.iX,c.default.sw.iLockY=r-(p.default.gi().iOffy+m.default.me.iY)+c.default.sw.iY,c.default.sw.bAutoRun=!0),this.iFindWayOnce++),!1}}]),SmallMap}();i.default=b,b.iX,b.iY,b.iW,b.iH,b.iMapX,b.iMapY,b.iMapW,b.iMapH,b.x_x,b.x_y,b.x_w,b.x_h},{"../config/GmConfig":5,"../config/XDefine":7,"../engine/BaseClass":8,"../engine/control/XButtonEx2":16,"../engine/graphics/M3DFast":28,"../engine/graphics/XAnima":30,"../engtst/mgm/GmPlay":65,"../engtst/mgm/XStat":70,"../engtst/mgm/frame/DrawMode":72,"../engtst/mgm/frame/message/EasyMessage":86,"../engtst/mgm/gameing/fast/SteeringWheel":123,"../engtst/mgm/gameing/fast/SystemOperate":124,"../engtst/mgm/gameing/me/GmMe":211,"../engtst/mgm/gameing/me/shop/MySell":259,"../engtst/mgm/gameing/me/team/MyTeam":266,"./MapManager":286}],289:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../engine/graphics/AnimaAction")),_interopRequireDefault(t("./MapManager"))),s=_interopRequireDefault(t("../config/XDefine")),r=_interopRequireDefault(t("../engtst/mgm/GmPlay"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function _TEFFECT(){_classCallCheck(this,_TEFFECT)},u=function(){function TouchEffect(){_classCallCheck(this,TouchEffect),this.MAXT=32,this.t=new Array(this.MAXT);for(var t=0;t<this.MAXT;t++)this.t[t]=new o,this.t[t].bUseing=!1;this.aa_t=null}return a(TouchEffect,[{key:"Add",value:function(t,e){for(var i=0;i<this.MAXT;i++)if(this.t[i].bUseing&&s.default.llength(t,e,this.t[i].iX,this.t[i].iY)<30)return;for(i=0;i<this.MAXT;i++)if(!this.t[i].bUseing){this.t[i].bUseing=!0,this.t[i].iX=t,this.t[i].iY=e,this.t[i].iFrame=0;break}}},{key:"Draw",value:function(){var t;for(null==this.aa_t&&(this.aa_t=r.default.xani_nui3.InitAnimaWithName("点击效果",null)),t=0;t<this.MAXT;t++)this.t[t].bUseing&&(this.aa_t.iFrame=this.t[t].iFrame,this.aa_t.Draw(n.default.gi().iOffx+this.t[t].iX,n.default.gi().iOffy+this.t[t].iY),this.t[t].iFrame++,this.t[t].iFrame>=13&&(this.t[t].bUseing=!1))}}]),TouchEffect}();i.default=u,u.te=new u},{"../config/XDefine":7,"../engine/graphics/AnimaAction":25,"../engtst/mgm/GmPlay":65,"./MapManager":286}],290:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../map/npcboom/MapDialog")),s=_interopRequireDefault(t("../map/npcboom/NewMapDialog")),r=(_interopRequireDefault(t("../map/npcboomstruct/BASESEQUENCE")),_interopRequireDefault(t("../map/npcboomstruct/SE_BRANCH"))),o=_interopRequireDefault(t("../map/npcboomstruct/SE_EVENT")),u=_interopRequireDefault(t("../map/npcboomstruct/SE_HEAD")),l=_interopRequireDefault(t("../map/npcboomstruct/SE_REQUIREMENT")),f=_interopRequireDefault(t("../map/npcboomstruct/SE_SELECT")),h=_interopRequireDefault(t("../config/XDefine")),d=(_interopRequireDefault(t("../engine/PackageTools")),_interopRequireDefault(t("../engine/graphics/AnimaAction")),_interopRequireDefault(t("../engine/graphics/M3DFast")),_interopRequireDefault(t("../engine/graphics/XAnima"))),c=_interopRequireDefault(t("../engtst/mgm/FireworksEffect")),m=_interopRequireDefault(t("../engtst/mgm/GmPlay")),g=_interopRequireDefault(t("../engtst/mgm/MyAI")),_=_interopRequireDefault(t("../engtst/mgm/frame/format/FormatString")),p=_interopRequireDefault(t("../engtst/mgm/gameing/fast/SteeringWheel")),b=_interopRequireDefault(t("../engtst/mgm/gameing/me/GmMe")),D=_interopRequireDefault(t("../engtst/mgm/gameing/me/mission/MyMission")),y=_interopRequireDefault(t("../engtst/mgm/gameing/me/team/MyTeam")),w=_interopRequireDefault(t("../engtst/mgm/gameing/me/team/TeamOperate")),S=_interopRequireDefault(t("./_VISUALBLOCK")),x=_interopRequireDefault(t("./ProcMap"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var P=function(){function VisualBlock(t){var e;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,VisualBlock),this.MAXVISUALBLOCK=128,this.vbs=new Array(this.MAXVISUALBLOCK),e=0;e<this.MAXVISUALBLOCK;e++)this.vbs[e]=null;this.mapdialog=new n.default(t,this),this.newdialog=new s.default,this.procmap=new x.default,this.bNpcLoaded=!1,this.ani_npcs=new d.default(t),this.aa_flag1=null,this.aa_flag2=null,this.iLockNpcId=-1,this.iGoToNpcFlag=-1,this.iGoToNpcId=-1,VisualBlock.pvb=this,this.bFaceToFace=!1}return a(VisualBlock,[{key:"FindNpcByName",value:function(t){var e;for(e=0;e<this.MAXVISUALBLOCK;e++)if(null!=this.vbs[e]&&this.vbs[e].sNpcName.length>0&&this.vbs[e].sNpcName==t)return this.vbs[e];return null}},{key:"ClearNpcFlag",value:function(){var t;for(t=0;t<this.MAXVISUALBLOCK;t++)null!=this.vbs[t]&&(this.vbs[t].iFlag=0)}},{key:"SetNpcFlag",value:function(t,e){var i;for(i=0;i<this.MAXVISUALBLOCK;i++)if(null!=this.vbs[i]&&this.vbs[i].bCurrentBlock&&this.vbs[i].iNpcId==t)return void(this.vbs[i].iFlag=e)}},{key:"LoadNpcs",value:function(t,e){this.ani_npcs.LoadAnima_fullpath(e,t,!0,this._LoadNpcs)}},{key:"_LoadNpcs",value:function(){VisualBlock.pvb.bNpcLoaded=!0}},{key:"DrawPopo",value:function(t,e,i){if(!(t.iPopoDelay<=0)){t.iPopoDelay--,_.default.gi().Format(t.sPopoString,151,25);var a=e+t.iX-_.default.gi().iW/2,n=i+t.iY+t.aa_body.pani.iAnimaY(t.aa_body)-_.default.gi().iH;DrawBuffer.gi().FillRect(i+t.iY,a,n,a+_.default.gi().iW,n+_.default.gi().iH,1342177280),_.default.gi().DrawToBuffer(i+t.iY+1,a,n)}}},{key:"DrawNpcInBuffer",value:function(t,e,i){var a,n;if(this.bNpcLoaded){for(null==this.aa_flag1&&(this.aa_flag1=m.default.xani_ui.InitAnimaWithName("交任务感叹号",null)),null==this.aa_flag2&&(this.aa_flag2=m.default.xani_ui.InitAnimaWithName("接任务问号",null)),a=0;a<this.MAXVISUALBLOCK;a++)if(null!=this.vbs[a]&&this.vbs[a].sNpcName.length>0){if(this.vbs[a].iDx==this.vbs[a].iX&&this.vbs[a].iDy==this.vbs[a].iY||((n=h.default.llength(this.vbs[a].iX,this.vbs[a].iY,this.vbs[a].iDx,this.vbs[a].iDy))>8?(this.vbs[a].iX=8*(this.vbs[a].iDx-this.vbs[a].iX)/n+this.vbs[a].iX,this.vbs[a].iY=8*(this.vbs[a].iDy-this.vbs[a].iY)/n+this.vbs[a].iY):(this.vbs[a].iX=this.vbs[a].iDx,this.vbs[a].iY=this.vbs[a].iDy)),this.vbs[a].iX<0||this.vbs[a].iY<0)continue;if(this.DrawPopo(this.vbs[a],e,i),3==parseInt(this.vbs[a].iAnimaType/1e5)){t.DrawAnima_aa(i+this.vbs[a].iY-20,null,e+this.vbs[a].iX,i+this.vbs[a].iY-20,this.vbs[a].aa_body),t.DrawAnima_aa(i+this.vbs[a].iY,null,e+this.vbs[a].iX-40,i+this.vbs[a].iY,this.vbs[a].aa_body),t.DrawAnima_aa(i+this.vbs[a].iY,null,e+this.vbs[a].iX+40,i+this.vbs[a].iY,this.vbs[a].aa_body),t.DrawAnima_aa(i+this.vbs[a].iY+20,null,e+this.vbs[a].iX,i+this.vbs[a].iY+20,this.vbs[a].aa_body);continue}if(4==parseInt(this.vbs[a].iAnimaType/1e5)){t.DrawAnima_aa(i+this.vbs[a].iY,null,e+this.vbs[a].iX,i+this.vbs[a].iY,this.vbs[a].aa_body);continue}switch("传送点"!=this.vbs[a].sAniName&&c.default.DrawAura(0,e+this.vbs[a].iX,i+this.vbs[a].iY,t,i+this.vbs[a].iY-1),t.DrawAnima_aa(i+this.vbs[a].iY,this.ani_npcs,e+this.vbs[a].iX,i+this.vbs[a].iY,this.vbs[a].aa_body),1==parseInt(this.vbs[a].iAnimaType/1e5)&&this.vbs[a].iWeapId>0&&(t.DrawAnima_aa(i+this.vbs[a].iY+1,this.ani_npcs,e+this.vbs[a].iX,i+this.vbs[a].iY,this.vbs[a].aa_weapon),this.vbs[a].aa_weapon.NextFrame()),this.vbs[a].iDx!=this.vbs[a].iX||this.vbs[a].iDy!=this.vbs[a].iY?1==parseInt(this.vbs[a].iAnimaType/1e5)?1==this.vbs[a].iActionStat&&this.vbs[a].iFaceTo==this.vbs[a].GetFace8(this.vbs[a].iDx,this.vbs[a].iDy)||(this.vbs[a].iActionStat=1,this.vbs[a].iFaceTo=this.vbs[a].GetFace8(this.vbs[a].iDx,this.vbs[a].iDy),m.default.xani_newrole[parseInt(this.vbs[a].iAnimaType/1e4)%10].InitAnimaWithName("跑步_"+this.vbs[a].FaceTo(this.vbs[a].iFaceTo),this.vbs[a].aa_body),this.vbs[a].iWeapId>0&&w.default.ResetWeapon(this.vbs[a].iWeapId,parseInt(this.vbs[a].iAnimaType/1e4)%10%2,this.vbs[a].sAniName,this.vbs[a].aa_weapon)):2==parseInt(this.vbs[a].iAnimaType/1e5)&&(1==this.vbs[a].iActionStat&&this.vbs[a].iFaceTo==this.vbs[a].GetFace4(this.vbs[a].iDx,this.vbs[a].iDy)||(this.vbs[a].iActionStat=1,this.vbs[a].iFaceTo=this.vbs[a].GetFace8(this.vbs[a].iDx,this.vbs[a].iDy),m.default.xani_pets[this.vbs[a].iWeapId].InitAnimaWithName((parseInt(this.vbs[a].iAnimaType/1e4)%10==0?"":"变异_")+"跑步_"+this.vbs[a].FaceTo(this.vbs[a].iFaceTo),this.vbs[a].aa_body))):0!=this.vbs[a].iActionStat&&(this.vbs[a].iActionStat=0,1==parseInt(this.vbs[a].iAnimaType/1e5)?(m.default.xani_newrole[parseInt(this.vbs[a].iAnimaType/1e4)%10].InitAnimaWithName("站立_"+this.vbs[a].FaceTo(this.vbs[a].iFaceTo),this.vbs[a].aa_body),this.vbs[a].iWeapId>0&&w.default.ResetWeapon(this.vbs[a].iWeapId,parseInt(this.vbs[a].iAnimaType/1e4)%10%2,this.vbs[a].sAniName,this.vbs[a].aa_weapon)):2==parseInt(this.vbs[a].iAnimaType/1e5)&&m.default.xani_pets[this.vbs[a].iWeapId].InitAnimaWithName((parseInt(this.vbs[a].iAnimaType/1e4)%10==0?"":"变异_")+"站立_"+this.vbs[a].FaceTo(this.vbs[a].iFaceTo),this.vbs[a].aa_body)),t.DrawText_2(i+this.vbs[a].iY,1,e+this.vbs[a].iX,i+this.vbs[a].iY+20,this.vbs[a].sNpcName,4294967040,20,1,4278190080),this.vbs[a].aa_body.NextFrame(),this.vbs[a].iFlag){case 1:t.DrawAnima_aa(i+this.vbs[a].iY,m.default.xani_ui,e+this.vbs[a].iX,i+this.vbs[a].iY-100,this.aa_flag1);break;case 2:t.DrawAnima_aa(i+this.vbs[a].iY,m.default.xani_ui,e+this.vbs[a].iX,i+this.vbs[a].iY-100,this.aa_flag2)}}m.default.xani_ui.NextFrame(this.aa_flag1),m.default.xani_ui.NextFrame(this.aa_flag2)}}},{key:"npctalk",value:function(t){var e=t.GetNextByte(),i=t.GetNextInt(),a=t.GetNextString();this._npctalk(e,i,a,200)}},{key:"_npctalk",value:function(t,e,i,a){var n;for(n=0;n<this.MAXVISUALBLOCK;n++)if(null!=this.vbs[n])if(0==t){if(!this.vbs[n].bCurrentBlock)continue;if(this.vbs[n].iNpcId==e){this.vbs[n].sPopoString=i,this.vbs[n].iPopoDelay=a;break}}else if(1==t){if(this.vbs[n].bCurrentBlock)continue;if(this.vbs[n].iNpcId==e){this.vbs[n].sPopoString=i,this.vbs[n].iPopoDelay=200;break}}}},{key:"npcmove",value:function(t){var e,i=t.GetNextByte(),a=t.GetNextInt();for(e=0;e<this.MAXVISUALBLOCK;e++)if(null!=this.vbs[e]&&1==i){if(this.vbs[e].bCurrentBlock)continue;if(this.vbs[e].iNpcId==a){this.vbs[e].iDx=t.GetNextInt(),this.vbs[e].iDy=t.GetNextInt();break}}}},{key:"AddVoidNpc",value:function(){var t;for(t=0;t<this.MAXVISUALBLOCK&&null!=this.vbs[t];t++);return t>=this.MAXVISUALBLOCK?null:(this.vbs[t]=new S.default(t),this.vbs[t])}},{key:"clearnpc",value:function(t){var e,i=t.GetNextInt();for(e=0;e<this.MAXVISUALBLOCK;e++)if(null!=this.vbs[e]&&!this.vbs[e].bCurrentBlock&&this.vbs[e].iNpcId==i){VisualBlock.iLastProcBase==e&&(VisualBlock.iLastProcBase=-1),this.vbs[e]=null;break}}},{key:"getnpctalkext",value:function(t){var e,i,a,n=t.GetNextInt(),s=t.GetNextInt();for(e=0;e<this.MAXVISUALBLOCK&&(null==this.vbs[e]||this.vbs[e].bCurrentBlock||this.vbs[e].iNpcId!=n||this.vbs[e].iSid!=s);e++);if(e<this.MAXVISUALBLOCK)for(a=0;m.default.sop("off="+t.iOffset),i=t.GetNextByte(),m.default.sop(""+i),-1!=i;)this.vbs[e].pss[a]=this.LoadBase(i,t),a++;else;}},{key:"getnpc",value:function(t){var e,i,a,n=t.GetNextInt(),s=t.GetNextInt();for(e=0;e<this.MAXVISUALBLOCK&&(null==this.vbs[e]||this.vbs[e].bCurrentBlock||this.vbs[e].iNpcId!=n||this.vbs[e].iSid!=s);e++);if(!(e<this.MAXVISUALBLOCK)){for(e=0;e<this.MAXVISUALBLOCK&&null!=this.vbs[e];e++);if(!(e>=this.MAXVISUALBLOCK)){var r=e;this.vbs[e]=new S.default(e),this.vbs[e].bCurrentBlock=!1,this.vbs[e].iNpcId=n,this.vbs[e].iSid=s,this.vbs[e].iX=t.GetNextInt(),this.vbs[e].iY=t.GetNextInt(),this.vbs[e].iDx=this.vbs[e].iX,this.vbs[e].iDy=this.vbs[e].iY,this.vbs[e].sNpcName=t.GetNextString(),this.vbs[e].iAnimaType=t.GetNextInt(),this.vbs[e].sAniName=t.GetNextString(),this.vbs[e].sBaseAniName=this.vbs[e].sAniName,this.vbs[e].iActionStat=0,this.vbs[e].iR=30,i=parseInt(this.vbs[e].iAnimaType/1e5),this.vbs[e].iStandFlag=-1,0==i?this.ani_npcs.InitAnimaWithName(this.vbs[e].sAniName,this.vbs[e].aa_body):1==i?(this.vbs[e].iWeapId=this.vbs[e].iAnimaType%1e4,a=parseInt(this.vbs[e].iAnimaType/1e4)%10,m.default.xani_newrole[a].InitAnimaWithName(this.vbs[e].sAniName,this.vbs[e].aa_body),this.vbs[e].iWeapId>0&&w.default.ResetWeapon(this.vbs[e].iWeapId,a%2,this.vbs[e].sAniName,this.vbs[e].aa_weapon)):2==i?(this.vbs[e].iWeapId=this.vbs[e].iAnimaType%1e4,a=parseInt(this.vbs[e].iAnimaType/1e4)%10,m.default.xani_pets[this.vbs[e].iWeapId].InitAnimaWithName((0==a?"":"变异_")+this.vbs[e].sAniName,this.vbs[e].aa_body)):3!=i&&4!=i||m.default.xani_grow.InitAnimaWithName(this.vbs[e].sAniName,this.vbs[e].aa_body),this.vbs[e].pss[0]=new f.default;var u,l=this.vbs[e].pss[0];for(l.iType=4,l.iCount=t.GetNextShort(),l.sQuestion=t.GetNextString(),e=0;e<l.iCount;e++)l.sAnswers[e]=t.GetNextString(),l.next[e]=new o.default,(u=l.next[e]).iType=5,u.iEid=t.GetNextShort(),u.sValues[0]=""+t.GetNextInt(),u.sValues[1]=""+t.GetNextByte();1e5!=(i=t.GetNextInt())&&(e=r,a=t.GetNextInt(),m.default.de_npc.intValue(a,0,7)==i&&(this.vbs[e].iStandFlag=i,this.vbs[e].sStandName=m.default.de_npc.strValue(a,0,8),this.vbs[e].iFaceTo=t.GetNextByte(),this.vbs[e].ResetStandAnima(this.vbs[e].ToX(this.vbs[e].iFaceTo),this.vbs[e].ToY(this.vbs[e].iFaceTo))))}}}},{key:"ClearVisual",value:function(){for(var t=0;t<this.MAXVISUALBLOCK;t++)this.vbs[t]=null;VisualBlock.iLastProcBase=-1,this.ClearNpcFlag(),D.default.m.linktonpc()}},{key:"LoadVisual",value:function(t){var e,i,a;for(e=0;e<this.MAXVISUALBLOCK&&null!=this.vbs[e];e++);for(this.iBoomX=0,this.iBoomY=0;-1!=(i=t.GetNextByte());){for(this.vbs[e]=new S.default(e),this.vbs[e].bCurrentBlock=!0,this.vbs[e].iX=t.GetNextInt(),this.vbs[e].iY=t.GetNextInt(),this.vbs[e].iDx=this.vbs[e].iX,this.vbs[e].iDy=this.vbs[e].iY,this.vbs[e].iR=t.GetNextByte(),t.GetNextInt(),this.vbs[e].iNpcId=t.GetNextInt(),this.vbs[e].sNpcName=t.GetNextString(),this.vbs[e].sAniName=t.GetNextString(),this.vbs[e].sBaseAniName=this.vbs[e].sAniName,this.vbs[e].iActionStat=0,this.ani_npcs.InitAnimaWithName(this.vbs[e].sAniName,this.vbs[e].aa_body),this.vbs[e].iStandFlag=m.default.de_npc.intValue(this.vbs[e].iNpcId,0,7),this.vbs[e].iStandFlag>=0&&(this.vbs[e].sStandName=m.default.de_npc.strValue(this.vbs[e].iNpcId,0,8),this.vbs[e].iFaceTo=m.default.de_npc.intValue(this.vbs[e].iNpcId,0,11),this.vbs[e].ResetStandAnima(this.vbs[e].ToX(this.vbs[e].iFaceTo),this.vbs[e].ToY(this.vbs[e].iFaceTo))),0==this.iBoomX&&this.vbs[e].iX>0&&(this.iBoomX=this.vbs[e].iX,this.iBoomY=this.vbs[e].iY),a=0;-1!=(i=t.GetNextByte());)this.vbs[e].pss[a]=this.LoadBase(i,t),a++;e++}VisualBlock.iLastProcBase=-1,this.ClearNpcFlag(),D.default.m.linktonpc()}},{key:"LoadBase",value:function(t,e){var i,a,n,s,h,d,c,g=null;switch(t){case 0:break;case 1:(n=new u.default).sName=e.GetNextString(),-1!=(a=e.GetNextByte())&&(n.next=this.LoadBase(a,e)),g=n;break;case 2:for((s=new r.default).iCount=e.GetNextByte(),i=0;-1!=(a=e.GetNextByte());)s.next[i]=this.LoadBase(a,e),i++;g=s;break;case 3:for((h=new l.default).iRid=e.GetNextShort(),i=0;i<l.default.MAXREQUIREMENTVALUE;i++)h.sValues[i]=e.GetNextString();-1!=(a=e.GetNextByte())&&(h.next=this.LoadBase(a,e)),g=h;break;case 4:for((d=new f.default).sHead=e.GetNextString(),d.iCount=e.GetNextShort(),d.sQuestion=e.GetNextString(),m.default.sop(d.sHead+":"+d.sQuestion),i=0;i<f.default.MAXSELECTCOUNT;i++)d.sAnswers[i]=e.GetNextString();for(i=0;-1!=(a=e.GetNextByte());)d.next[i]=this.LoadBase(a,e),i++;g=d;break;case 5:for((c=new o.default).iEid=e.GetNextShort(),i=0;i<o.default.MAXEVENTVALUE;i++)c.sValues[i]=e.GetNextString();-1!=(a=e.GetNextByte())&&(c.next=this.LoadBase(a,e)),g=c}return g.iType=t,g}},{key:"ProcBase",value:function(t){var e,i,a,n,s,r;if(null==t)return!1;switch(m.default.sop("Checking"+t.iType),t.iType){case 1:if(null!=(i=t).next)return this.ProcBase(i.next);break;case 2:for(a=t,e=0;e<a.iCount;e++)if(null!=a.next[e]&&this.ProcBase(a.next[e]))return!0;break;case 3:return n=t,!(!this.procmap.RequirementCheck(n)||null==n.next)&&this.ProcBase(n.next);case 4:return s=t,VisualBlock.iLastProcBase>=0&&VisualBlock.iLastProcBase<this.MAXVISUALBLOCK&&null!=this.vbs[VisualBlock.iLastProcBase]?this.mapdialog.InitDialog(s,this.vbs[VisualBlock.iLastProcBase].sNpcName):this.mapdialog.InitDialog(s,""),b.default.me.ChangeStat("站立"),p.default.sw.bLocked=!1,!0;case 5:return r=t,this.procmap.ProcEvent(r),null==r.next||this.ProcBase(r.next)}return!1}},{key:"SetTalkingNpc",value:function(t){for(var e=0;e<this.MAXVISUALBLOCK;e++)if(null!=this.vbs[e]){if(this.vbs[e].bCurrentBlock)continue;if(this.vbs[e].iNpcId==t)return void(VisualBlock.iLastProcBase=e)}}},{key:"CheckNow",value:function(t,e){var i,a,n,s;if(-1!=VisualBlock.iLastProcBase){if(s="传送点"==this.vbs[VisualBlock.iLastProcBase].sAniName?30:60,VisualBlock.bInCircle(t,e,this.vbs[VisualBlock.iLastProcBase].iX,this.vbs[VisualBlock.iLastProcBase].iY,s))return!0;VisualBlock.iLastProcBase=-1,this.mapdialog.bDialoging=!1}for(i=0;i<this.MAXVISUALBLOCK;i++)if(null!=this.vbs[i]&&(s=this.vbs[i].bCurrentBlock||3!=parseInt(this.vbs[i].iAnimaType/1e5)&&4!=parseInt(this.vbs[i].iAnimaType/1e5)?"传送点"==this.vbs[i].sAniName?30:60:30,VisualBlock.bInCircle(t,e,this.vbs[i].iX,this.vbs[i].iY,s))){if(VisualBlock.iLastProcBase==i)continue;if(y.default.bInTeam()&&!y.default.bTeamLeader()&&!y.default.bAway())continue;if("传送点"!=this.vbs[i].sAniName){if(this.iGoToNpcFlag>=0&&this.iGoToNpcFlag!=i)continue;if(this.iGoToNpcId>=0&&this.iGoToNpcId!=this.vbs[i].iNpcId)continue}if(VisualBlock.iLastProcBase=i,VisualBlock.talkingnpc=this.vbs[i],m.default.sop(this.vbs[i].sNpcName+"============"+this.vbs[i].iNpcId),this.vbs[i].sNpcName.length>0&&(this.vbs[i].iStandFlag>=0&&(this.bFaceToFace=!0,this.vbs[i].ResetStandAnima(t,e)),2==parseInt(this.vbs[i].iAnimaType/1e5)&&(n=parseInt(this.vbs[i].iAnimaType/1e4)%10,this.vbs[i].sAniName="站立_"+this.vbs[i].FaceTo(this.vbs[i].GetFace4(t,e)),m.default.xani_pets[this.vbs[i].iWeapId].InitAnimaWithName((0==n?"":"变异_")+this.vbs[i].sAniName,this.vbs[i].aa_body),this.bFaceToFace=!0)),this.vbs[i].bCurrentBlock&&101==g.default.gi().iLogicStat&&g.default.gi().iLogic_npc1==this.vbs[i].iNpcId)continue;if(this.vbs[i].iNpcId>=0)this.newdialog.Open(this.vbs[i]);else for(a=0;a<S.default.MAXBASESEQUENCE;a++)if(null!=this.vbs[i].pss[a]&&this.ProcBase(this.vbs[i].pss[a]))return!0;return!0}return!1}},{key:"bOnNpc",value:function(t,e){var i;for(i=0;i<this.MAXVISUALBLOCK;i++)if(null!=this.vbs[i]&&this.vbs[i].sNpcName.length>0&&this.vbs[i].aa_body.bIn(this.vbs[i].iX,this.vbs[i].iY,t,e))return!0;return!1}},{key:"GoToNpc_byid",value:function(t){var e;for(e=0;e<this.MAXVISUALBLOCK;e++)if(null!=this.vbs[e]&&this.vbs[e].sNpcName.length>0&&this.vbs[e].iNpcId==t)return this.iNpcX=this.vbs[e].iX,this.iNpcY=this.vbs[e].iY,m.default.sop("go to npc"),this.iGoToNpcFlag=this.vbs[e].iDownFlag,this.iLockNpcId=this.vbs[e].iNpcId,void(VisualBlock.iLastProcBase==e&&(VisualBlock.iLastProcBase=-1))}},{key:"GoToNpc",value:function(t,e){var i;for(i=0;i<this.MAXVISUALBLOCK;i++)if(null!=this.vbs[i]&&this.vbs[i].sNpcName.length>0&&this.vbs[i].aa_body.bIn(this.vbs[i].iX,this.vbs[i].iY,t,e))return this.iNpcX=this.vbs[i].iX,this.iNpcY=this.vbs[i].iY,m.default.sop("go to npc"),this.iGoToNpcFlag=this.vbs[i].iDownFlag,this.iLockNpcId=this.vbs[i].iNpcId,VisualBlock.iLastProcBase==i&&(VisualBlock.iLastProcBase=-1),!0;return!1}}]),VisualBlock}();i.default=P,P.talkingnpc=null,P.iLastProcBase=-1,P.pvb=null,P.bInCircle=function(t,e,i,a,n){return!((i-=t)*i+(a-=e)*a>n*n)}},{"../config/XDefine":7,"../engine/PackageTools":9,"../engine/graphics/AnimaAction":25,"../engine/graphics/M3DFast":28,"../engine/graphics/XAnima":30,"../engtst/mgm/FireworksEffect":64,"../engtst/mgm/GmPlay":65,"../engtst/mgm/MyAI":68,"../engtst/mgm/frame/format/FormatString":81,"../engtst/mgm/gameing/fast/SteeringWheel":123,"../engtst/mgm/gameing/me/GmMe":211,"../engtst/mgm/gameing/me/mission/MyMission":233,"../engtst/mgm/gameing/me/team/MyTeam":266,"../engtst/mgm/gameing/me/team/TeamOperate":269,"../map/npcboom/MapDialog":293,"../map/npcboom/NewMapDialog":294,"../map/npcboomstruct/BASESEQUENCE":295,"../map/npcboomstruct/SE_BRANCH":296,"../map/npcboomstruct/SE_EVENT":297,"../map/npcboomstruct/SE_HEAD":298,"../map/npcboomstruct/SE_REQUIREMENT":299,"../map/npcboomstruct/SE_SELECT":300,"./ProcMap":287,"./_VISUALBLOCK":292}],291:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../config/GmConfig")),s=_interopRequireDefault(t("../engine/BaseClass")),r=_interopRequireDefault(t("../engine/control/XButtonEx1")),o=_interopRequireDefault(t("../engine/graphics/M3DFast")),u=(_interopRequireDefault(t("../engine/graphics/XAnima")),_interopRequireDefault(t("../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../engtst/mgm/XStat")),f=_interopRequireDefault(t("../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function WorldMap(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,WorldMap);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(WorldMap.__proto__||Object.getPrototypeOf(WorldMap)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.iW=800,e.iH=480,e.iX=(n.default.SCRW-e.iW)/2,e.iY=(n.default.SCRH-e.iH)/2,e.btn_close=new r.default(u.default.xani_ui3),e.btn_close.InitButton("统一关闭按钮"),e.btn_close.Move(e.iX+e.iW-60-5,e.iY,60,60),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(WorldMap,s.default),a(WorldMap,[{key:"Draw",value:function(){WorldMap.ipid1<0&&(WorldMap.ipid1=o.default.gi().LoadFromFile("bk/ba.xxx",-1,!1)),WorldMap.ipid2<0&&(WorldMap.ipid2=o.default.gi().LoadFromFile("bk/bb.xxx",-1,!1)),f.default.Frame2_MD(this.iX,this.iY,this.iW,this.iH),o.default.gi().DrawImageEx(0,this.iX,this.iY,WorldMap.ipid1,0,0,512,480,101,1,1,0,0,0),o.default.gi().DrawImageEx(0,this.iX+512,this.iY,WorldMap.ipid2,0,0,288,480,101,1,1,0,0,0),this.btn_close.Draw()}},{key:"ProcTouch",value:function(t,e,i){return!!this.btn_close.ProcTouch(t,e,i)&&(this.btn_close.bCheck()&&l.default.gi().PopStat(1),!0)}}]),WorldMap}();i.default=h,h.ipid1=-1,h.ipid2=-1},{"../config/GmConfig":5,"../engine/BaseClass":8,"../engine/control/XButtonEx1":15,"../engine/graphics/M3DFast":28,"../engine/graphics/XAnima":30,"../engtst/mgm/GmPlay":65,"../engtst/mgm/XStat":70,"../engtst/mgm/frame/DrawMode":72}],292:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../config/XDefine")),s=(_interopRequireDefault(t("../map/npcboomstruct/BASESEQUENCE")),_interopRequireDefault(t("../engine/graphics/AnimaAction"))),r=_interopRequireDefault(t("../engtst/mgm/GmPlay"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var o=function(){function _VISUALBLOCK(t){var e;for(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_VISUALBLOCK),this.iDownFlag=t,this.iR=30,this.sNpcName="",this.sBaseAniName="",this.sAniName="",this.pss=new Array(_VISUALBLOCK.MAXBASESEQUENCE),e=0;e<_VISUALBLOCK.MAXBASESEQUENCE;e++)this.pss[e]=null;this.aa_body=new s.default,this.aa_weapon=new s.default,this.iFlag=0,this.iAnimaType=0,this.iPopoDelay=0}return a(_VISUALBLOCK,[{key:"ResetStandAnima",value:function(t,e){var i;this.iStandFlag<0||(1==parseInt(this.iStandFlag/1e4)&&(this.iFaceTo=this.GetFace4(t,e),i=this.iStandFlag%1e4,i%=1e3,r.default.xani_pets[i].InitAnimaWithName("站立_"+this.FaceTo(this.iFaceTo),this.aa_body)),0!=this.iStandFlag&&1!=this.iStandFlag&&2!=this.iStandFlag||(this.iFaceTo=this.GetFace4(t,e),r.default.xani_stand[this.iStandFlag].InitAnimaWithName(this.sStandName+"_"+this.FaceTo(this.iFaceTo),this.aa_body)))}},{key:"GetFace4",value:function(t,e){return t<this.iX?e<this.iY?1:3:e<this.iY?7:5}},{key:"GetFace8",value:function(t,e){var i;return i=360-n.default.GetAngleXY(this.iDx,this.iDy,this.iX,this.iY),22<(i%=360)&&i<68?7:67<i&&i<113?0:112<i&&i<158?1:157<i&&i<203?2:202<i&&i<248?3:247<i&&i<293?4:292<i&&i<338?5:6}},{key:"FaceTo",value:function(t){switch(t){case 0:return"上";case 1:return"左上";case 2:return"左";case 3:return"左下";case 4:return"下";case 5:return"右下";case 6:return"右";case 7:return"右上"}return"下"}},{key:"ToFace",value:function(t){return"上"==t?0:"左上"==t?1:"左"==t?2:"左下"==t?3:"下"==t?4:"右下"==t?5:"右"==t?6:"右上"==t?7:0}},{key:"ToX",value:function(t){return 0==t||4==t?this.iX:1==t||2==t||3==t?this.iX-10:this.iX+10}},{key:"ToY",value:function(t){return 2==t||6==t?this.iY:0==t||1==t||7==t?this.iY-10:this.iY+10}}]),_VISUALBLOCK}();i.default=o,o.MAXBASESEQUENCE=16},{"../config/XDefine":7,"../engine/graphics/AnimaAction":25,"../engtst/mgm/GmPlay":65,"../map/npcboomstruct/BASESEQUENCE":295}],293:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../map/VisualBlock")),_interopRequireDefault(t("../../map/npcboomstruct/SE_SELECT")),_interopRequireDefault(t("../../config/GmConfig"))),s=_interopRequireDefault(t("../../config/XDefine")),r=_interopRequireDefault(t("../../engine/control/XButtonEx2")),o=_interopRequireDefault(t("../../engine/graphics/AnimaAction")),u=_interopRequireDefault(t("../../engine/graphics/M3DFast")),l=_interopRequireDefault(t("../../engtst/mgm/GmPlay")),f=_interopRequireDefault(t("../../engtst/mgm/frame/DrawMode")),h=_interopRequireDefault(t("../../engtst/mgm/frame/format/FormatString")),d=_interopRequireDefault(t("../../engtst/mgm/frame/message/FrameMessage")),c=_interopRequireDefault(t("../../engtst/mgm/gameing/me/GmMe"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m=function _DIALOGRECORD(){_classCallCheck(this,_DIALOGRECORD)},g=function _NEWDIALOG1(){_classCallCheck(this,_NEWDIALOG1)},_=function _NEWDIALOG2(){_classCallCheck(this,_NEWDIALOG2)},p=function(){function MapDialog(t,e){var i;for(_classCallCheck(this,MapDialog),this.xm3f=t,this.vbk=e,this.bDialoging=!1,this.iW=410,this.iH=200,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.iY=n.default.SCRH/2-10,this.drs=new Array(16),i=0;i<16;i++)this.drs[i]=new m;for(this.iDRCount=0,this.aa_head=new o.default,this.nd1=new g,this.nd2=new _,this.nd2.btn_sel=new Array(8),i=0;i<8;i++)this.nd2.btn_sel[i]=null;MapDialog.md=this,this.aa_f1=null,this.aa_f2=null,this.res_shadow=-1}return a(MapDialog,[{key:"btstring",value:function(t,e,i){for(var a="",n=0;n<i;n++)a+=t[e+n];return a}},{key:"InitDialog",value:function(t,e){var i,a,o,u;l.default.sop("head==="+t.sHead),this.iW=n.default.SCRW/2,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.pSelect=t,this.iPoint=-1,this.bDown=!1,this.iY=n.default.SCRH/2-10;var f=t.sQuestion.split("");if("@"!=f[0]||"0"!=f[1])if("@"!=f[0]||"1"!=f[1])if("@"!=f[0]||"2"!=f[1]){if("@"==f[0]&&":"==f[1]){for(this.bDialoging&&1==this.iDialogType||(this.iDRCount=0,this.iH=60),this.drs[this.iDRCount].sName="",this.drs[this.iDRCount].sHead="",this.drs[this.iDRCount].sDetail="",a=0;a<f.length;a++)if("@"==f[a]&&":"==f[a+1]){for(o=a+3,u=0;o+u<f.length&&("@"!=f[o+u]||":"!=f[o+u+1]);)u++;l.default.sop1("len="+f.length+",j="+o+",k="+u),"n"==f[a+2]?(this.drs[this.iDRCount].sName=this.btstring(f,o,u),l.default.sop1("name="+this.drs[this.iDRCount].sName)):"h"==f[a+2]?(this.drs[this.iDRCount].sHead=this.btstring(f,o,u),l.default.sop1("head="+this.drs[this.iDRCount].sHead)):"d"==f[a+2]&&(this.drs[this.iDRCount].sDetail=this.btstring(f,o,u),l.default.sop1("detail="+this.drs[this.iDRCount].sDetail),this.tmwait=200+50*this.drs[this.iDRCount].sDetail.length,this.tmwait=50)}return this.bDialoging=!0,this.iDialogType=1,this.iDRCount++,void(this.tm1=s.default.get_ms())}if("!"==f[0]&&":"==f[1]){for(this.drs[0].sName="",this.drs[0].sHead="",this.drs[0].sDetail="",a=0;a<f.length;a++)if("!"==f[a]&&":"==f[a+1]){for(o=a+3,u=0;o+u<f.length&&("!"!=f[o+u]||":"!=f[o+u+1]);)u++;l.default.sop1("len="+f.length+",j="+o+",k="+u),"n"==f[a+2]?(this.drs[0].sName=this.btstring(f,o,u),l.default.sop1("name="+this.drs[0].sName)):"h"==f[a+2]?(this.drs[0].sHead=this.btstring(f,o,u),l.default.sop1("head="+this.drs[0].sHead)):"d"==f[a+2]&&(this.drs[0].sDetail=this.btstring(f,o,u),l.default.sop1("detail="+this.drs[0].sDetail))}return this.bDialoging=!0,this.iDialogType=2,this.iX=(n.default.SCRW-this.iW)/2,void(this.iY=(n.default.SCRH-this.iH)/2)}this.iW=n.default.SCRW/2,this.iH=200,this.iX=(n.default.SCRW-this.iW)/2,this.iY=(n.default.SCRH-this.iH)/2,this.bDialoging=!0,this.iDialogType=0}else d.default.fm.Open(this.btstring(f,2,f.length-2));else{if(this.pSelect.iCount>0)for(a=0;a<this.pSelect.iCount;a++)null==this.nd2.btn_sel[a]&&(this.nd2.btn_sel[a]=new r.default(l.default.xani_nui4),this.nd2.btn_sel[a].InitButton("操作选项按钮")),this.nd2.btn_sel[a].sName=this.pSelect.sAnswers[a],this.nd2.btn_sel[a].Move(n.default.SCRW-40-30-272,n.default.SCRH-160-20-(20*(this.pSelect.iCount-1)+40+54*this.pSelect.iCount)+20+74*a,272,54);for(this.nd2.aa_shot=null,this.bDialoging=!0,this.iDialogType=3,a=0;a<f.length;a++)"n"==f[a]&&(this.nd2.iNpcId=parseInt(""+f[a+1]+f[a+2]+f[a+3]),500==this.nd2.iNpcId?(this.nd2.sName=c.default.me.sName,i=c.default.sRace(c.default.me.iRace)+"_"+c.default.sSex(c.default.me.iSex),this.nd2.aa_shot=l.default.xani_shot[0].InitAnimaWithName(i,null)):(this.nd2.sName=l.default.de_npc.strValue(this.nd2.iNpcId,0,1),null!=e&&e.length>0&&(this.nd2.sName=e),(o=l.default.de_npc.intValue(this.nd2.iNpcId,0,9))>=0&&o<=1&&(this.nd2.aa_shot=l.default.xani_shot[o].InitAnimaWithName(l.default.de_npc.strValue(this.nd2.iNpcId,0,10),null)),l.default.sop(this.nd2.iNpcId+this.nd2.sName+o)),t.sHead.length>0&&(this.nd2.sName=t.sHead),a+=3),"t"==f[a]&&(this.nd2.sDetail=this.btstring(f,a+1,f.length-a-1))}else for(this.nd1.aa_shot=null,this.bDialoging=!0,this.iDialogType=4,this.bDown=!1,a=0;a<f.length;a++)"n"==f[a]&&(this.nd1.iNpcId=parseInt(""+f[a+1]+f[a+2]+f[a+3]),501==this.nd1.iNpcId?(this.nd1.sName=c.default.me.sName+"(未来)",i=c.default.sRace(c.default.me.iRace)+"_"+c.default.sSex(c.default.me.iSex)+"未来",this.nd1.aa_shot=l.default.xani_shot[0].InitAnimaWithName(i,null)):500==this.nd1.iNpcId?(this.nd1.sName=c.default.me.sName,i=c.default.sRace(c.default.me.iRace)+"_"+c.default.sSex(c.default.me.iSex),this.nd1.aa_shot=l.default.xani_shot[0].InitAnimaWithName(i,null)):(this.nd1.sName=l.default.de_npc.strValue(this.nd1.iNpcId,0,1),null!=e&&e.length>0&&(this.nd1.sName=e),(o=l.default.de_npc.intValue(this.nd1.iNpcId,0,9))>=0&&o<=1&&(this.nd1.aa_shot=l.default.xani_shot[o].InitAnimaWithName(l.default.de_npc.strValue(this.nd1.iNpcId,0,10),null)),l.default.sop(this.nd1.iNpcId+this.nd1.sName+o)),t.sHead.length>0&&(this.nd1.sName=t.sHead),a+=3),"t"==f[a]&&(this.nd1.sDetail=this.btstring(f,a+1,f.length-a-1))}},{key:"Draw_0",value:function(){var t;for(this.fRate=1*n.default.SCRH/720,this.iTextSize=parseInt(32*this.fRate),this.iW=n.default.SCRW/2,this.iW>750&&(this.iW=750),this.iH=200,h.default.gi().FormatEx(this.pSelect.sQuestion,this.iW-20,this.iTextSize,1,4278190080,7*this.iTextSize/6),this.iH=h.default.gi().iH+20+this.pSelect.iCount*(7*this.iTextSize/6)+this.iTextSize/2,this.iH<n.default.SCRH/4&&(this.iH=n.default.SCRH/4),this.iY=n.default.SCRH/2,this.iY+this.iH+20>n.default.SCRH&&(this.iY=n.default.SCRH-this.iH-20),f.default.ui4_FrameUp(this.iX,this.iY-40,this.iW),f.default.ui4_FrameDown(this.iX,this.iY,this.iW,this.iH),h.default.gi().Draw(this.iX+15,this.iY+10),this.iOffX=this.iX+15,this.iOffY=this.iY+10+h.default.gi().iH+this.iTextSize/2,t=0;t<this.pSelect.iCount;t++)this.iPoint==t&&l.default.xani_ui4.DrawAnimaEx(this.iOffX,this.iOffY+t*this.iTextSize*7/6+this.iTextSize/2,"对话框条",0,101,1*(this.iW-30)/250,this.fRate,0,0,0),this.xm3f.DrawTextEx(this.iOffX,this.iOffY+t*this.iTextSize*7/6+this.iTextSize/2,this.pSelect.sAnswers[t],4294504568,this.iTextSize,101,1,1,0,0,-2)}},{key:"DrawChatFrame",value:function(t,e,i,a,n){1==t?(null==this.aa_f1&&(this.aa_f1=l.default.xani_nui2.InitAnimaWithName("左侧框",null)),u.default.gi().FillRect_2D(e+2,i-n/2+2,e+a-2,i+n/2-2,4282875759),this.aa_f1.iFrame=0,this.aa_f1.Draw(e,i-n/2),this.aa_f1.iFrame=1,this.aa_f1.Draw(e+a,i-n/2),this.aa_f1.iFrame=2,this.aa_f1.Draw(e+a,i+n/2),this.aa_f1.iFrame=3,this.aa_f1.Draw(e,i+n/2),this.aa_f1.iFrame=4,this.aa_f1.DrawEx(e+10,i-n/2,101,1*(a-20)/10,1,0,0,0),this.aa_f1.iFrame=7,this.aa_f1.DrawEx(e+10,i+n/2,101,1*(a-20)/10,1,0,0,0),this.aa_f1.iFrame=5,this.aa_f1.DrawEx(e,i-n/2+10,101,1,1*(n-20)/10,0,0,0),this.aa_f1.iFrame=6,this.aa_f1.DrawEx(e+a,i-n/2+10,101,1,1*(n-20)/10,0,0,0),this.aa_f1.iFrame=8,this.aa_f1.Draw(e,i)):2==t&&(null==this.aa_f2&&(this.aa_f2=l.default.xani_nui2.InitAnimaWithName("右侧框",null)),u.default.gi().FillRect_2D(e+2,i-n/2+2,e+a-2,i+n/2-2,4286216011),this.aa_f2.iFrame=0,this.aa_f2.Draw(e,i-n/2),this.aa_f2.iFrame=1,this.aa_f2.Draw(e+a,i-n/2),this.aa_f2.iFrame=2,this.aa_f2.Draw(e+a,i+n/2),this.aa_f2.iFrame=3,this.aa_f2.Draw(e,i+n/2),this.aa_f2.iFrame=4,this.aa_f2.DrawEx(e+10,i-n/2,101,1*(a-20)/10,1,0,0,0),this.aa_f2.iFrame=7,this.aa_f2.DrawEx(e+10,i+n/2,101,1*(a-20)/10,1,0,0,0),this.aa_f2.iFrame=5,this.aa_f2.DrawEx(e,i-n/2+10,101,1,1*(n-20)/10,0,0,0),this.aa_f2.iFrame=6,this.aa_f2.DrawEx(e+a,i-n/2+10,101,1,1*(n-20)/10,0,0,0),this.aa_f2.iFrame=8,this.aa_f2.Draw(e+a,i))}},{key:"DrawSpeek",value:function(t,e,i,a,n){var r,o,u,f,d=650,m=0;if(h.default.gi().FormatEx(n,d-20,30,1,4278190080,32),m<h.default.gi().iH+20+20&&(m=h.default.gi().iH+20+20),h.default.gi().iW+20<d&&(d=h.default.gi().iW+20),"我"==a){if(l.default.xani_head.InitAnimaWithName("新头像"+(2*c.default.me.iRace+c.default.me.iSex),this.aa_head),r=this.iX+this.iW-80-20,o=this.iY+t+m/2-40,this.aa_head.Draw(r-3,o),u=this.iX+this.iW-20-80-20-d,f=this.iY+t+m/2-h.default.gi().iH/2-10,this.DrawChatFrame(2,u,this.iY+t+m/2,d,h.default.gi().iH+20),h.default.gi().Draw(u+10,f+10),e){if(this.tm2=s.default.get_ms()-this.tm1,this.tm2>this.tmwait)return m;this.tm2<this.tmwait/2?(l.default.xani_head.DrawAnima(u-50,o+40,"进度红",0),l.default.xani_head.DrawAnimaEx(u-50,o+40,"进度绿",0,101,1,1,180-360*this.tm2/this.tmwait,u-50,o+40),l.default.xani_head.DrawAnimaEx(u-50,o+40,"进度红",0,101,1,1,180,u-50,o+40)):(l.default.xani_head.DrawAnimaEx(u-50,o+40,"进度红",0,101,1,1,180,u-50,o+40),l.default.xani_head.DrawAnima(u-50,o+40,"进度绿",0),l.default.xani_head.DrawAnimaEx(u-50,o+40,"进度绿",0,101,1,1,540-360*this.tm2/this.tmwait,u-50,o+40))}}else if("未来"==a?l.default.xani_head.InitAnimaWithName("新头像"+(2*c.default.me.iRace+c.default.me.iSex),this.aa_head):l.default.xani_head.InitAnimaWithName(i,this.aa_head),r=this.iX+20,o=this.iY+t+m/2-40,this.aa_head.Draw(r+3,o),u=this.iX+20+80+20,f=this.iY+t+m/2-h.default.gi().iH/2-10,this.DrawChatFrame(1,u,this.iY+t+m/2,d,h.default.gi().iH+20),h.default.gi().Draw(u+10,f+10),e){if(this.tm2=s.default.get_ms()-this.tm1,this.tm2>this.tmwait)return m;this.tm2<this.tmwait/2?(l.default.xani_head.DrawAnima(u+d+50,o+40,"进度红",0),l.default.xani_head.DrawAnimaEx(u+d+50,o+40,"进度绿",0,101,1,1,180-360*this.tm2/this.tmwait,u+d+50,o+40),l.default.xani_head.DrawAnimaEx(u+d+50,o+40,"进度红",0,101,1,1,180,u+d+50,o+40)):(l.default.xani_head.DrawAnimaEx(u+d+50,o+40,"进度红",0,101,1,1,180,u+d+50,o+40),l.default.xani_head.DrawAnima(u+d+50,o+40,"进度绿",0),l.default.xani_head.DrawAnimaEx(u+d+50,o+40,"进度绿",0,101,1,1,540-360*this.tm2/this.tmwait,u+d+50,o+40))}return m}},{key:"Draw_1",value:function(){var t,e,i,a;for(this.iW=1e3,this.iH>300?(e=this.iH-300,a=300):(e=0,a=this.iH),this.iX=(n.default.SCRW-this.iW)/2,this.iY=n.default.SCRH-a-10,u.default.gi().SetViewClip(this.iX,this.iY,this.iX+this.iW,this.iY+a),f.default.new_bigframe(this.iX,this.iY,this.iW,a),f.default.new_framein(this.iX+15,this.iY+15,this.iW-30,a-30),u.default.gi().NoClip(),u.default.gi().SetViewClip(this.iX+20,this.iY+20,this.iX+this.iW-20,this.iY+a-20),i=0,t=0;t<this.iDRCount;t++)i+=this.DrawSpeek(i+20-e,t==this.iDRCount-1,this.drs[t].sHead,this.drs[t].sName,this.drs[t].sDetail);this.iH<i+40-20?this.iH+=20:this.iH=i+40,u.default.gi().NoClip()}},{key:"Draw_2",value:function(){var t;for(this.fRate=1*n.default.SCRH/720,this.iTextSize=parseInt(32*this.fRate),this.iW=n.default.SCRW/2,this.iW>750&&(this.iW=750),this.iH=200,this.iX=(n.default.SCRW-this.iW)/2,h.default.gi().FormatEx(this.drs[0].sDetail,this.iW-20,this.iTextSize,1,4278190080,7*this.iTextSize/6),this.iH=h.default.gi().iH+20+this.pSelect.iCount*(7*this.iTextSize/6)+this.iTextSize/2,this.iH<n.default.SCRH/4&&(this.iH=n.default.SCRH/4),this.iY=n.default.SCRH/2,l.default.sop(""+this.iY),this.iY+this.iH+20>n.default.SCRH&&(this.iY=n.default.SCRH-this.iH-20),f.default.ui4_FrameUp(this.iX,this.iY-40,this.iW),f.default.ui4_FrameDown(this.iX,this.iY,this.iW,this.iH),"我"==this.drs[0].sHead?(l.default.xani_head.InitAnimaWithName("新头像"+(2*c.default.me.iRace+c.default.me.iSex),this.aa_head),this.aa_head.Draw(this.iX+this.iW-80-30,this.iY-80),this.xm3f.DrawTextEx(this.iX+this.iW-60-30-10,this.iY-20,c.default.me.sName,4294504568,32,101,1,1,0,-3,-2)):(l.default.xani_head.InitAnimaWithName(this.drs[0].sHead,this.aa_head),this.aa_head.Draw(this.iX+30,this.iY-80),this.xm3f.DrawTextEx(this.iX+30+60+10,this.iY-20,this.drs[0].sName,4294504568,32,101,1,1,0,0,-2)),h.default.gi().Draw(this.iX+15,this.iY+10),this.iOffX=this.iX+15,this.iOffY=this.iY+10+h.default.gi().iH+this.iTextSize/2,t=0;t<this.pSelect.iCount;t++)this.iPoint==t&&l.default.xani_ui4.DrawAnimaEx(this.iOffX,this.iOffY+t*this.iTextSize*7/6+this.iTextSize/2,"对话框条",0,101,1*(this.iW-30)/250,this.fRate,0,0,0),this.xm3f.DrawTextEx(this.iOffX,this.iOffY+t*this.iTextSize*7/6+this.iTextSize/2,this.pSelect.sAnswers[t],4294504568,this.iTextSize,101,1,1,0,0,-2)}},{key:"DrawBack",value:function(){if(!(this.pSelect.iCount<=0)){this.iFx=n.default.SCRW-40-30-272-30,this.iFy=n.default.SCRH-160-20-(20*(this.pSelect.iCount-1)+40+54*this.pSelect.iCount),this.iFw=332,this.iFh=20*(this.pSelect.iCount-1)+40+54*this.pSelect.iCount;var t=this.iFx+this.iFw/2,e=this.iFy+this.iFh;null==this.aa_frame&&(this.aa_frame=l.default.xani_nui3.InitAnimaWithName("键盘框",null)),this.aa_frame.iFrame=0,this.aa_frame.Draw(this.iFx,this.iFy),this.aa_frame.iFrame=1,this.aa_frame.DrawEx(this.iFx+10,this.iFy,101,1*(this.iFw-20)/20,1,0,0,0),this.aa_frame.iFrame=2,this.aa_frame.Draw(this.iFx+this.iFw,this.iFy),this.aa_frame.iFrame=3,this.aa_frame.DrawEx(this.iFx+this.iFw,this.iFy+10,101,1,1*(this.iFh-20)/20,0,0,0),this.aa_frame.iFrame=4,this.aa_frame.Draw(this.iFx+this.iFw,this.iFy+this.iFh),this.aa_frame.iFrame=5,this.aa_frame.DrawEx(this.iFx+10,this.iFy+this.iFh,101,1*(this.iFw-20)/20,1,0,0,0),this.aa_frame.iFrame=6,this.aa_frame.Draw(this.iFx,this.iFy+this.iFh),this.aa_frame.iFrame=7,this.aa_frame.DrawEx(this.iFx,this.iFy+10,101,1,1*(this.iFh-20)/20,0,0,0),this.aa_frame.iFrame=8,this.aa_frame.DrawEx(this.iFx+10,this.iFy+10,101,1*(this.iFw-20)/20,1*(this.iFh-20)/20,0,0,0),this.aa_frame.iFrame=9,this.aa_frame.Draw(t,e)}}},{key:"Draw_3",value:function(){var t;if(f.default.new_framewatch(40,n.default.SCRH-160,n.default.SCRW-80,150),l.default.xani_nui4.DrawAnima(220,n.default.SCRH-10-37,"形象台",0),u.default.gi().DrawTextEx(220,n.default.SCRH-10-15,this.nd2.sName,4278206039,26,101,1,1,0,-2,-2),l.default.xani_nui4.DrawAnima(220,n.default.SCRH-10-37,"形象背光",0),null==this.nd2.aa_shot?(this.res_shadow<0&&(this.res_shadow=u.default.gi().LoadFromFile("bk/sss.xxx",-1,!1)),u.default.gi().DrawImageEx(0,125,n.default.SCRH-10-37-251,this.res_shadow,2,0,183,251,101,1,1,0,0,0)):this.nd2.aa_shot.Draw(220,n.default.SCRH-10-37),h.default.gi().FormatEx("#cc8f3f3"+this.nd2.sDetail,800,28,0,0,32),h.default.gi().Draw(400,n.default.SCRH-160+(150-h.default.gi().iH)/2),this.DrawBack(),this.pSelect.iCount>0)for(t=0;t<this.pSelect.iCount;t++)this.nd2.btn_sel[t].Move(n.default.SCRW-40-30-272,n.default.SCRH-160-20-(20*(this.pSelect.iCount-1)+40+54*this.pSelect.iCount)+20+74*t,272,54),this.nd2.btn_sel[t].Draw()}},{key:"Draw_4",value:function(){if(l.default.xani_nui4.DrawAnimaEx(0,0,"阴影",1,101,1*n.default.SCRW/20,1,0,0,0),l.default.xani_nui4.DrawAnimaEx(0,n.default.SCRH,"阴影",0,101,1*n.default.SCRW/20,1,0,0,0),u.default.gi().DrawTextEx(n.default.SCRW-50,50,"点击屏幕继续 》",4285443272,30,101,1,1,0,-3,-3),500==this.nd1.iNpcId)return l.default.xani_nui4.DrawAnima(n.default.SCRW-220,n.default.SCRH-10-37,"名字框",0),u.default.gi().DrawTextEx(n.default.SCRW-220,n.default.SCRH-10-15,this.nd1.sName,4285443272,26,101,1,1,0,-2,-2),l.default.xani_nui4.DrawAnima(n.default.SCRW-220,n.default.SCRH-10-37,"形象背光",0),null!=this.nd1.aa_shot&&this.nd1.aa_shot.Draw(n.default.SCRW-220,n.default.SCRH-10-37),h.default.gi().FormatEx("#cc8f3f3"+this.nd1.sDetail,800,28,0,0,32),void h.default.gi().Draw(n.default.SCRW-400-h.default.gi().iW,n.default.SCRH-160+(150-h.default.gi().iH)/2);l.default.xani_nui4.DrawAnima(220,n.default.SCRH-10-37,"名字框",0),u.default.gi().DrawTextEx(220,n.default.SCRH-10-15,this.nd1.sName,4285443272,26,101,1,1,0,-2,-2),l.default.xani_nui4.DrawAnima(220,n.default.SCRH-10-37,"形象背光",0),null==this.nd1.aa_shot?(this.res_shadow<0&&(this.res_shadow=u.default.gi().LoadFromFile("bk/sss.xxx",-1,!1)),u.default.gi().DrawImageEx(0,125,n.default.SCRH-10-37-251,this.res_shadow,2,0,183,251,101,1,1,0,0,0)):this.nd1.aa_shot.Draw(220,n.default.SCRH-10-37),h.default.gi().FormatEx("#cc8f3f3"+this.nd1.sDetail,800,28,0,0,32),h.default.gi().Draw(400,n.default.SCRH-160+(150-h.default.gi().iH)/2)}},{key:"bHideUI",value:function(){return!(!this.bDialoging||4!=this.iDialogType)}},{key:"Draw",value:function(){this.bDialoging&&(0==this.iDialogType?this.Draw_0():1==this.iDialogType?this.Draw_1():2==this.iDialogType?this.Draw_2():3==this.iDialogType?this.Draw_3():4==this.iDialogType&&this.Draw_4())}},{key:"LockPoint",value:function(t,e){var i;for(this.iPoint=-1,i=0;i<this.pSelect.iCount;i++)if(this.bInRect(t,e,this.iOffX,this.iOffY+i*this.iTextSize*7/6,this.iW,7*this.iTextSize/6))return void(this.iPoint=i)}},{key:"ProcTouch",value:function(t,e,i){if(!this.bDialoging)return!1;var a;if(3==this.iDialogType){if(this.pSelect.iCount>0&&s.default.bInRect(e,i,this.iFx,this.iFy,this.iFw,this.iFh)){for(a=0;a<this.pSelect.iCount;a++)if(this.nd2.btn_sel[a].ProcTouch(t,e,i))return this.nd2.btn_sel[a].bCheck()&&(this.nd2.btn_sel[a].SetNormal(),this.bDialoging=!1,this.vbk.ProcBase(this.pSelect.next[a])),!0;return!0}return 3==t&&(this.bDialoging=!1),!0}if(4==this.iDialogType)return 1==t&&(this.bDown=!0),!this.bDown||(3==t&&(null==this.pSelect.next[0]?this.bDialoging=!1:4!=this.pSelect.next[0].iType&&(this.bDialoging=!1),this.vbk.ProcBase(this.pSelect.next[0]),this.bDown=!1),!0);if(1==this.iDialogType)return s.default.get_ms()-this.tm1<this.tmwait||(1==t&&(this.bDown=!0),!this.bDown||(3==t&&(null==this.pSelect.next[0]?this.bDialoging=!1:4!=this.pSelect.next[0].iType&&(this.bDialoging=!1),this.vbk.ProcBase(this.pSelect.next[0])),!0));if(1==t&&(this.bDown=!0),!this.bDown)return!0;if(this.bInRect(e,i,this.iX,this.iY,this.iW,this.iH))switch(t){case 1:case 2:this.LockPoint(e,i);break;case 3:-1!=this.iPoint&&(this.bDialoging=!1,this.vbk.ProcBase(this.pSelect.next[this.iPoint]))}else 3==t&&(this.bDialoging=!1);return!0}},{key:"bInRect",value:function(t,e,i,a,n,s){return!(t<=i)&&(!(e<=a)&&(!(t>=i+n)&&!(e>=a+s)))}}]),MapDialog}();i.default=p},{"../../config/GmConfig":5,"../../config/XDefine":7,"../../engine/control/XButtonEx2":16,"../../engine/graphics/AnimaAction":25,"../../engine/graphics/M3DFast":28,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/frame/DrawMode":72,"../../engtst/mgm/frame/format/FormatString":81,"../../engtst/mgm/frame/message/FrameMessage":87,"../../engtst/mgm/gameing/me/GmMe":211,"../../map/VisualBlock":290,"../../map/npcboomstruct/SE_SELECT":300}],294:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../engtst/mgm/GmPlay")),s=_interopRequireDefault(t("../../engtst/mgm/gameing/me/GmMe")),r=_interopRequireDefault(t("../../engtst/mgm/gameing/me/goods/MyGoods")),o=_interopRequireDefault(t("../../engtst/mgm/gameing/me/mission/MyMission")),u=(_interopRequireDefault(t("../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission")),_interopRequireDefault(t("../../engtst/mgm/gameing/me/pet/MyPets"))),l=_interopRequireDefault(t("../../map/MapManager")),f=_interopRequireDefault(t("../../map/VisualBlock")),h=_interopRequireDefault(t("../../map/_VISUALBLOCK")),d=_interopRequireDefault(t("../../map/npcboomstruct/BASESEQUENCE")),c=(_interopRequireDefault(t("../../map/npcboomstruct/SE_BRANCH")),_interopRequireDefault(t("../../map/npcboomstruct/SE_EVENT"))),m=(_interopRequireDefault(t("../../map/npcboomstruct/SE_HEAD")),_interopRequireDefault(t("../../map/npcboomstruct/SE_REQUIREMENT")),_interopRequireDefault(t("../../map/npcboomstruct/SE_SELECT")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var g=function(){function NewMapDialog(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,NewMapDialog),this.opendialog=new m.default,this.opendialog.iType=4,this.cdlist=new d.default(32),this.splist=new c.default(32);for(var t=0;t<32;t++)this.splist[t]=new c.default}return a(NewMapDialog,[{key:"ProcBase_CheckOutDrama",value:function(t){var e;if(null!=t&&!this.bBreakCheck)switch(n.default.sop("type="+t.iType),t.iType){case 1:this.phead=t,null!=this.phead.next&&this.ProcBase_CheckOutDrama(this.phead.next);break;case 2:for(this.pbranch=t,e=0;e<this.pbranch.iCount;e++)null!=this.pbranch.next[e]&&this.ProcBase_CheckOutDrama(this.pbranch.next[e]);break;case 3:this.prequirement=t,1==this.prequirement.iRid&&(e=parseInt(this.prequirement.sValues[0]),o.default.m.bCheckDoing(e)&&(this.opendialog.AddSelect("剧情："+o.default.de_mission.strValue(e,0,19),this.prequirement.next),138==e&&(this.bBreakCheck=!0)));break;case 5:this.pevent=t,f.default.pvb.procmap.ProcEvent(this.pevent)}}},{key:"ProcBase_CheckOutDefault",value:function(t){if(null==t)return!1;var e;switch(t.iType){case 1:if(this.phead=t,null!=this.phead.next)return this.ProcBase_CheckOutDefault(this.phead.next);break;case 2:for(this.pbranch=t,e=0;e<this.pbranch.iCount;e++)if(null!=this.pbranch.next[e]&&this.ProcBase_CheckOutDefault(this.pbranch.next[e]))return!0;break;case 3:if(this.prequirement=t,1==this.prequirement.iRid)return!1;if(f.default.pvb.procmap.RequirementCheck(this.prequirement))return this.ProcBase_CheckOutDefault(this.prequirement.next);break;case 4:if(this.pselect=t,this.opendialog.sHead=this.pselect.sHead,this.opendialog.sQuestion=this.pselect.sQuestion,this.bBreakCheck)return!0;for(e=0;e<this.pselect.iCount;e++)s.default.me.rbs.iLev>=40&&null!=this.pselect.next[e]&&5==this.pselect.next[e].iType&&(this.pevent=this.pselect.next[e],4==this.pevent.iEid)?(this.splist[this.iSpCount].iType=5,this.splist[this.iSpCount].iEid=4,this.splist[this.iSpCount].sValues[0]="22",this.opendialog.AddSelect("自动任务(得储备)",this.splist[this.iSpCount]),this.iSpCount++,this.opendialog.AddSelect("手动任务(得现金)",this.pselect.next[e])):this.opendialog.AddSelect(this.pselect.sAnswers[e],this.pselect.next[e]);return!0}return!1}},{key:"CheckOutSpecialMission",value:function(t){var e,i,a=o.default.m.smlist;for(e=0;e<o.default.MAXMISSIONCOUNT;e++)if(a[e].bUseing)for(i=0;i<a[e].iItemCount;i++){if(0==a[e].si[i].iMType&&3==a[e].si[i].iSType&&a[e].si[i].iV2==t&&a[e].si[i].iProc<100&&u.default.bHavePet(a[e].si[i].iV1,a[e].si[i].iV3)&&(this.splist[this.iSpCount].iType=5,this.splist[this.iSpCount].iEid=11,this.splist[this.iSpCount].sValues[0]=""+a[e].iMPoint,this.opendialog.AddSelect("完成："+a[e].sName,this.splist[this.iSpCount]),this.iSpCount++),0==a[e].si[i].iMType&&1==a[e].si[i].iSType&&a[e].si[i].iV1==t&&a[e].si[i].iProc<100){this.splist[this.iSpCount].iType=5,this.splist[this.iSpCount].iEid=11,this.splist[this.iSpCount].sValues[0]=""+a[e].iMPoint,this.opendialog.AddSelect("完成："+a[e].sName,this.splist[this.iSpCount]),this.iSpCount++;break}if(0==a[e].si[i].iMType&&0==a[e].si[i].iSType&&(0==a[e].si[i].iV3||a[e].si[i].iV3==t)&&a[e].si[i].iProc<100&&r.default.bHaveGoods(a[e].si[i].iV1,1)){this.splist[this.iSpCount].iType=5,this.splist[this.iSpCount].iEid=11,this.splist[this.iSpCount].sValues[0]=""+a[e].iMPoint,this.opendialog.AddSelect("完成："+a[e].sName,this.splist[this.iSpCount]),this.iSpCount++;break}if(0==a[e].si[i].iMType&&5==a[e].si[i].iSType&&a[e].si[i].iV1==t&&a[e].si[i].iProc<100){this.splist[this.iSpCount].iType=5,this.splist[this.iSpCount].iEid=11,this.splist[this.iSpCount].sValues[0]=""+a[e].iMPoint,this.opendialog.AddSelect("战斗："+a[e].sName,this.splist[this.iSpCount]),this.iSpCount++;break}if(0==a[e].si[i].iMType&&15==a[e].si[i].iSType&&a[e].si[i].iV1==t&&a[e].si[i].iV2==l.default.gi().iVisualMapId&&a[e].si[i].iProc<100){this.splist[this.iSpCount].iType=5,this.splist[this.iSpCount].iEid=11,this.splist[this.iSpCount].sValues[0]=""+a[e].iMPoint,this.opendialog.AddSelect("完成："+a[e].sName,this.splist[this.iSpCount]),this.iSpCount++;break}if(0==a[e].si[i].iMType&&16==a[e].si[i].iSType&&a[e].si[i].iV1==t&&a[e].si[i].iV2==l.default.gi().iVisualMapId&&a[e].si[i].iProc<100&&r.default.bHaveGoods(a[e].si[i].iV3,1)){this.splist[this.iSpCount].iType=5,this.splist[this.iSpCount].iEid=11,this.splist[this.iSpCount].sValues[0]=""+a[e].iMPoint,this.opendialog.AddSelect("完成："+a[e].sName,this.splist[this.iSpCount]),this.iSpCount++;break}}}},{key:"Open",value:function(t){var e;for(this.opendialog.iCount=0,this.opendialog.sQuestion="",this.defaultdialog=null,this.iCdCount=0,this.iSpCount=0,this.bBreakCheck=!1,e=0;e<h.default.MAXBASESEQUENCE&&(null==t.pss[e]||(this.ProcBase_CheckOutDrama(t.pss[e]),!this.bBreakCheck));e++);for(t.bCurrentBlock&&this.CheckOutSpecialMission(t.iNpcId),e=0;e<h.default.MAXBASESEQUENCE&&(null==t.pss[e]||(n.default.sop("ggggggggggggggggggggg"),!this.ProcBase_CheckOutDefault(t.pss[e])));e++);null!=this.defaultdialog&&this.opendialog.copyfrom(this.defaultdialog),""==!this.opendialog.sQuestion&&("@"!=this.opendialog.sQuestion.charAt(0)&&t.bCurrentBlock&&(this.opendialog.sQuestion="@1n"+parseInt(t.iNpcId/100)+parseInt(t.iNpcId/10)%10+t.iNpcId%10+"t"+this.opendialog.sQuestion),f.default.pvb.mapdialog.InitDialog(this.opendialog,t.sNpcName))}}]),NewMapDialog}();i.default=g},{"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/gameing/me/GmMe":211,"../../engtst/mgm/gameing/me/goods/MyGoods":222,"../../engtst/mgm/gameing/me/mission/MyMission":233,"../../engtst/mgm/gameing/me/mission/missionstruct/SpecialMission":239,"../../engtst/mgm/gameing/me/pet/MyPets":245,"../../map/MapManager":286,"../../map/VisualBlock":290,"../../map/_VISUALBLOCK":292,"../../map/npcboomstruct/BASESEQUENCE":295,"../../map/npcboomstruct/SE_BRANCH":296,"../../map/npcboomstruct/SE_EVENT":297,"../../map/npcboomstruct/SE_HEAD":298,"../../map/npcboomstruct/SE_REQUIREMENT":299,"../../map/npcboomstruct/SE_SELECT":300}],295:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function BASESEQUENCE(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,BASESEQUENCE),this.iType=0}},{}],296:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=t("./BASESEQUENCE"),s=(a=n)&&a.__esModule?a:{default:a};var r=function(t){function SE_BRANCH(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SE_BRANCH);var t,e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SE_BRANCH.__proto__||Object.getPrototypeOf(SE_BRANCH)).call(this));for(e.iType=0,e.iCount=0,e.next=new s.default(SE_BRANCH.MAXSELECTCOUNT),t=0;t<SE_BRANCH.MAXSELECTCOUNT;t++)e.next[t]=null;return e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SE_BRANCH,s.default),SE_BRANCH}();i.default=r,r.MAXSELECTCOUNT=6},{"./BASESEQUENCE":295}],297:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=t("./BASESEQUENCE"),s=(a=n)&&a.__esModule?a:{default:a};var r=function(t){function SE_EVENT(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SE_EVENT);var t,e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SE_EVENT.__proto__||Object.getPrototypeOf(SE_EVENT)).call(this));for(e.iEid=-1,e.next=null,e.sValues=new Array(SE_EVENT.MAXEVENTVALUE),t=0;t<SE_EVENT.MAXEVENTVALUE;t++)e.sValues[t]="";return e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SE_EVENT,s.default),SE_EVENT}();i.default=r,r.MAXEVENTVALUE=8},{"./BASESEQUENCE":295}],298:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=t("./BASESEQUENCE"),s=(a=n)&&a.__esModule?a:{default:a};var r=function(t){function SE_HEAD(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SE_HEAD);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SE_HEAD.__proto__||Object.getPrototypeOf(SE_HEAD)).call(this));return t.next=null,t.sName="",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SE_HEAD,s.default),SE_HEAD}();i.default=r},{"./BASESEQUENCE":295}],299:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=t("./BASESEQUENCE"),s=(a=n)&&a.__esModule?a:{default:a};var r=function(t){function SE_REQUIREMENT(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SE_REQUIREMENT);var t,e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SE_REQUIREMENT.__proto__||Object.getPrototypeOf(SE_REQUIREMENT)).call(this));for(e.iRid=-1,e.next=null,e.sValues=new Array(SE_REQUIREMENT.MAXREQUIREMENTVALUE),t=0;t<SE_REQUIREMENT.MAXREQUIREMENTVALUE;t++)e.sValues[t]="";return e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SE_REQUIREMENT,s.default),SE_REQUIREMENT}();i.default=r,r.MAXREQUIREMENTVALUE=8},{"./BASESEQUENCE":295}],300:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),s=t("./BASESEQUENCE"),r=(a=s)&&a.__esModule?a:{default:a};var o=function(t){function SE_SELECT(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SE_SELECT);var t,e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SE_SELECT.__proto__||Object.getPrototypeOf(SE_SELECT)).call(this));for(e.sHead="",e.iCount=0,e.sQuestion="",e.sAnswers=new Array(SE_SELECT.MAXSELECTCOUNT),e.next=new Array(SE_SELECT.MAXSELECTCOUNT),t=0;t<SE_SELECT.MAXSELECTCOUNT;t++)e.next[t]=null,e.sAnswers[t]="";return e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SE_SELECT,r.default),n(SE_SELECT,[{key:"copyfrom",value:function(t){this.iCount=t.iCount,this.sHead=t.sHead,this.sQuestion=t.sQuestion;for(var e=0;e<SE_SELECT.MAXSELECTCOUNT;e++)this.sAnswers[e]=t.sAnswers[e],this.next[e]=t.next[e]}},{key:"AddSelect",value:function(t,e){this.iCount>=SE_SELECT.MAXSELECTCOUNT||(this.sAnswers[this.iCount]=t,this.next[this.iCount]=e,this.iCount++)}}]),SE_SELECT}();i.default=o,o.MAXSELECTCOUNT=6},{"./BASESEQUENCE":295}],301:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../zero/Interface/PublicInterface")),s=_interopRequireDefault(t("../../config/GmConfig")),r=(_interopRequireDefault(t("../../config/XDefine")),_interopRequireDefault(t("../../engine/BaseClass"))),o=_interopRequireDefault(t("../../engine/control/XButton")),u=(_interopRequireDefault(t("../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay")));_interopRequireDefault(t("../../engtst/mgm/XStat"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function FastGetin_uc(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FastGetin_uc);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FastGetin_uc.__proto__||Object.getPrototypeOf(FastGetin_uc)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.btn_autogetin=new o.default(u.default.xani_ui3),e.btn_autogetin.InitButton("登录按钮"),e.bLogined=!1,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FastGetin_uc,r.default),a(FastGetin_uc,[{key:"Draw",value:function(){u.default.xani_ui3.DrawAnimaEx((s.default.SCRW-354)/2,s.default.SCRH/2-204,"登陆logo",0,101,1,1,0,0,0),this.btn_autogetin.Move((s.default.SCRW-170)/2,300,170,65),this.btn_autogetin.Draw(),this.bLogined||(this.bLogined=!0,n.default.gi().Login())}},{key:"ProcTouch",value:function(t,e,i){return this.btn_autogetin.ProcTouch(t,e,i)&&this.btn_autogetin.bCheck()&&n.default.gi().Login(),!1}}]),FastGetin_uc}();i.default=l},{"../../config/GmConfig":5,"../../config/XDefine":7,"../../engine/BaseClass":8,"../../engine/control/XButton":14,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/XStat":70,"../../zero/Interface/PublicInterface":318}],302:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../config/GameData")),s=_interopRequireDefault(t("../../config/GmConfig")),r=_interopRequireDefault(t("../../engine/BaseClass")),o=_interopRequireDefault(t("../../engine/graphics/M3DFast")),u=(_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay")),_interopRequireDefault(t("../../engtst/mgm/XStat")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function Logo(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Logo);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Logo.__proto__||Object.getPrototypeOf(Logo)).call(this));return iStatType=u.default.GS_LOGO,e.pani=t,e.pm3f=o.default.xm3f,e.iDelay=40,e.iLogoId1=o.default.gi().LoadFromFile("bk/ca.xxx",-1,!1),e.iLogoId2=o.default.gi().LoadFromFile("bk/cb.xxx",-1,!1),e.iW=480,e.iH=320,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Logo,r.default),a(Logo,[{key:"Draw",value:function(){this.pm3f.FillRect_2D(0,0,s.default.SCRW,s.default.SCRH,4278190080),this.pm3f.DrawImageEx(0,0,0,this.iLogoId1,0,0,512,480,101,1,1,0,0,0),this.pm3f.DrawImageEx(0,512,0,this.iLogoId2,0,0,288,480,101,1,1,0,0,0),this.iDelay--,this.iDelay<=0&&Logo.bInited&&(u.default.gi().PopStat(1),u.default.gi().PushStat(u.default.GS_LEADPAGE)),n.default.bAutoGetInForDebug&&(u.default.gi().PopStat(1),u.default.gi().PushStat(u.default.GS_LOGIN),u.default.gi().oCurrentView.in_user.sDetail="user",u.default.gi().oCurrentView.in_pass.sDetail="pass")}},{key:"ProcTouch",value:function(t,e,i){return!1}}]),Logo}();i.default=l,l.bInited=!1},{"../../config/GameData":4,"../../config/GmConfig":5,"../../engine/BaseClass":8,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/XStat":70}],303:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../zero/Interface/GameVersion")),s=_interopRequireDefault(t("../../zero/Interface/PublicInterface")),r=_interopRequireDefault(t("../../mgm/mainmenu/download/_DOWNFILE")),o=_interopRequireDefault(t("../../mgm/mainmenu/download/_DOWNLOAD")),u=_interopRequireDefault(t("../../config/GameData")),l=_interopRequireDefault(t("../../config/GmConfig")),f=_interopRequireDefault(t("../../config/XDefine")),h=_interopRequireDefault(t("../../engine/BaseClass")),d=_interopRequireDefault(t("../../engine/PackageTools")),c=_interopRequireDefault(t("../../engine/control/XButton")),m=_interopRequireDefault(t("../../engine/graphics/M3DFast")),g=(_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),_=_interopRequireDefault(t("../../engtst/mgm/XStat")),p=_interopRequireDefault(t("../../engtst/mgm/gameing/fast/SystemOperate"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var b=function _CHECKFILE(){_classCallCheck(this,_CHECKFILE)},D=function(t){function MainMenu(t){_classCallCheck(this,MainMenu);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(MainMenu.__proto__||Object.getPrototypeOf(MainMenu)).call(this));MainMenu.pics=new Array(3);for(var i=0;i<3;i++)MainMenu.pics[i]=new Int32Array(2);for(MainMenu.pics[0][0]=-1,MainMenu.pics[0][1]=-1,e.pm3f=m.default.xm3f,e.iStat=10,e.downlist=new Array(e.MAXTHREAD),i=0;i<e.MAXTHREAD;i++)e.downlist[i]=new o.default;return e.down_version=new r.default,e.down_version.InitData("updateversion.dat",null,0),e.down_detail=new r.default,e.down_detail.InitData("updatedetail.dat",null,0),e.down_apkversion=new r.default,e.down_apkversion.InitData("apkversion.dat",null,0),e.down_apk=new r.default,e.down_apk.InitData("7gol.apk",null,0),MainMenu.digest=MessageDigest.getInstance("MD5"),e.pls=new d.default(131072),e.fPath=new File(u.default.sSDTo),e.fPath.exists()||(e.fPath.mkdir(),e.iStat=0),e.fPath.isDirectory()||(e.fPath.delete(),e.fPath.mkdir()),g.default.bCheckRes&&(e.fPath=new File(u.default.sSDTo+"currentcheck.dat"),e.fPath.exists()&&e.fPath.delete(),e.fPath=new File(u.default.sSDTo+"updateversion.dat"),e.fPath.exists()&&e.fPath.delete(),p.default.iNearRoleCount=25),e.fPath=new File(u.default.sSDTo+"7gol.apk"),e.fPath.exists()&&e.fPath.isDirectory()&&e.fPath.delete(),MainMenu.mybuf=new Array(e.MAXBUF),e.bCheckFinish=!1,e.thread_check=new Thread(e),e.btn_update=null,e.btn_exit=null,e.bm=!0,e.iRetry=10,e.iDecPoint,e.xdown,e.sError="",e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(MainMenu,h.default),a(MainMenu,[{key:"checkfile",value:function(t){var e,i,a,n=t.getPath(),s=0,r=null;for(n=n.substring(u.default.sSDTo.length,n.length),this.sChecking=n,r=new FileInputStream(t),MainMenu.digest.reset();-1!=(a=r.read(MainMenu.mybuf));)MainMenu.digest.update(MainMenu.mybuf,0,a),s+=a;for(i=f.default.toHexString(MainMenu.digest.MainMenu.digest()),r.close(),e=0;e<this.iNewFileCount;e++)if(50!=this.newfiles[e].iFlag&&this.newfiles[e].iFileSize==s&&this.newfiles[e].sMD5.equals(i)&&this.newfiles[e].sName.equals(n))return this.newfiles[e].iFlag=50,this.iUpdateFileCount--,void(this.iUpdateLength-=this.newfiles[e].iFileSize);g.default.sop("delete "+n)}},{key:"indir",value:function(t){var e,i=t.listFiles();for(e=0;e<i.length;e++)i[e].isDirectory()?this.indir(i[e]):MainMenu.checkfile(i[e])}},{key:"savecurrentversion",value:function(){var t;for(this.pls.iOffset=0,this.pls.InsertInt(this.iOldVersion),this.pls.SaveDataToSD(u.default.sSDTo+"currentversion.dat"),this.pls.iOffset=0,this.pls.InsertInt(this.iNewFileCount),t=0;t<this.iNewFileCount;t++)this.pls.InsertString(this.newfiles[t].sName),this.pls.InsertString(this.newfiles[t].sMD5);this.pls.SaveDataToSD(u.default.sSDTo+"currentcheck.dat")}},{key:"run",value:function(){var t;for(this.iUpdateLength=0,this.iUpdateFileCount=this.iNewFileCount,this.iProcLength=0,this.iProcFileCount=0,t=0;t<this.iNewFileCount;t++)"7gol.apk"!=this.newfiles[t].sName?(this.newfiles[t].iFlag=0,this.iUpdateLength+=this.newfiles[t].iFileSize):(this.newfiles[t].iFlag=50,this.iUpdateFileCount--);this.indir(new File(u.default.sSDTo)),this.bCheckFinish=!0}},{key:"GetFreeDownload",value:function(){var t;for(t=0;t<this.MAXTHREAD;t++)if(this.downlist[t].bwaiting())return this.downlist[t];return null}},{key:"Draw",value:function(){var t,e,i,a,o,h,d,m;switch(null==this.btn_update&&(this.btn_update=new c.default(g.default.xani_back),this.btn_update.InitButton("统一中按钮4"),this.btn_exit=new c.default(g.default.xani_back),this.btn_exit.InitButton("统一中按钮4")),dMainMenu.pics(0),this.iW=l.default.SCRW/2,this.iH=l.default.SCRH/2,this.iX=(l.default.SCRW-this.iW)/2,this.iY=(l.default.SCRH-this.iH)/2,this.pm3f.FillRect_2D(this.iX,this.iY,this.iX+this.iW,this.iY+this.iH,2147483648),o=this.iX+30,h=this.iY+30,this.iStat){case 0:if(this.pls.InitDataFromResFile("datapackage/updatedetail.dat")){for(this.pls.GetNextInt(),this.pls.GetNextInt(),e=this.pls.GetNextInt(),this.iNewFileCount=this.pls.GetNextInt(),t=0;t<e;t++)this.fPath=new File(u.default.sSDTo+this.pls.GetNextString()),this.fPath.exists()?this.fPath.isDirectory()||(this.fPath.delete(),this.fPath.mkdir()):this.fPath.mkdir();for(this.newfiles=new Array(this.iNewFileCount),t=0;t<this.iNewFileCount;t++)this.newfiles[t]=new r.default,this.newfiles[t].sName=this.pls.GetNextString(),this.newfiles[t].sMD5=this.pls.GetNextString(),this.newfiles[t].iFileSize=this.pls.GetNextInt();this.iStat=1,this.iDecPoint=0,this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在解压文件...",4294967295,30,101,1,1,0,-2,-2)}else this.iStat=10;break;case 1:var p,D;for(e=0;e<10;e++){if(this.iDecPoint>=this.iNewFileCount){this.iStat=10;break}for(D=this.pls.mRes.getAssets().open("datapackage/"+this.newfiles[this.iDecPoint].sName),p=new FileOutputStream(u.default.sSDTo+this.newfiles[this.iDecPoint].sName);!((t=D.read(this.pls.databuf,0,131072))<=0);)p.write(this.pls.databuf,0,t);p.close(),D.close(),this.iDecPoint++}this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在解压文件"+100*this.iDecPoint/this.iNewFileCount+"%",4294967295,30,101,1,1,0,-2,-2);break;case 10:null!=(d=this.GetFreeDownload())&&(d.downloadstart(u.default.sUpdateSeverList[MainMenu.iSeverPoint],this.down_version),this.iStat=11,this.xdown=d),this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在检测客户端版本...",4294967295,30,101,1,1,0,-2,-2);break;case 11:if(this.down_version.bSuccress()&&(this.pls.InitDataFromSD(this.xdown.sWriteTo)?(this.iNewVersion=this.pls.GetNextInt(),this.iApkVersion=this.pls.GetNextInt(),this.iStat=12):(this.iStat=200,this.sError="E1:"+this.xdown.sWriteTo)),this.down_version.bFailed()){if(this.iRetry>0){this.iStat=10,this.iRetry--;break}this.iStat=200,this.sError="E2:校验失败"}this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在检测客户端版本...",4294967295,30,101,1,1,0,-2,-2),this.down_version.bProcing()&&this.down_version.iFileSize>0&&this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2+40,100*this.down_version.iProc/this.down_version.iFileSize+"%",4294967295,20,101,1,1,0,-2,-2);break;case 12:this.pls.InitDataFromSD(u.default.sSDTo+"currentversion.dat")?(this.iOldVersion=this.pls.GetNextInt(),this.iNewVersion!=this.iOldVersion?(null!=(d=this.GetFreeDownload())&&(d.downloadstart(u.default.sUpdateSeverList[MainMenu.iSeverPoint],this.down_detail),this.iStat=20,this.xdown=d),this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在进行数据校验...",4294967295,30,101,1,1,0,-2,-2)):this.iStat=100):(null!=(d=this.GetFreeDownload())&&(d.downloadstart(u.default.sUpdateSeverList[MainMenu.iSeverPoint],this.down_detail),this.iStat=20,this.xdown=d),this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在进行数据校验...",4294967295,30,101,1,1,0,-2,-2));break;case 20:if(this.down_detail.bSuccress())if(this.pls.InitDataFromSD(this.xdown.sWriteTo)){if(this.pls.GetNextInt(),this.pls.GetNextInt(),e=this.pls.GetNextInt(),this.iNewFileCount=this.pls.GetNextInt(),this.iNewFileCount<500){this.iStat=200,this.sError="E8";break}for(t=0;t<e;t++)this.fPath=new File(u.default.sSDTo+this.pls.GetNextString()),this.fPath.exists()?this.fPath.isDirectory()||(this.fPath.delete(),this.fPath.mkdir()):this.fPath.mkdir();for(this.newfiles=new Array(this.iNewFileCount),t=0;t<this.iNewFileCount;t++)this.newfiles[t]=new r.default,this.newfiles[t].sName=this.pls.GetNextString(),this.newfiles[t].sMD5=this.pls.GetNextString(),this.newfiles[t].iFileSize=this.pls.GetNextInt();this.sChecking="无",this.bCheckFinish=!1,this.thread_check.start(),this.iStat=21}else this.iStat=200,this.sError="E3:"+this.xdown.sWriteTo;this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在进行数据校验...",4294967295,30,101,1,1,0,-2,-2),this.down_detail.bProcing()&&this.down_detail.iFileSize>0&&this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2+40,100*this.down_detail.iProc/this.down_detail.iFileSize+"%",4294967295,20,101,1,1,0,-2,-2),this.down_detail.bFailed()&&(this.iStat=200,this.sError="E4");break;case 21:this.bCheckFinish&&(0==this.iUpdateFileCount?(this.iOldVersion=this.iNewVersion,this.savecurrentversion(),this.iStat=100):this.iStat=30),this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在进行数据校验...",4294967295,30,101,1,1,0,-2,-2),this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2+40,this.sChecking,4294967295,20,101,1,1,0,-2,-2);break;case 30:this.pm3f.DrawTextEx(o,h,"有 "+this.iUpdateFileCount+" 个文件需要更新",4294967295,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(o,h+30,"合计下载"+this.iUpdateLength/1024+"K("+this.iUpdateLength/10486*1/100+"M)",4294967295,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(o,h+60,"是否马上更新？",4294967295,20,101,1,1,0,0,0),this.btn_update.Move(this.iX+20,this.iY+this.iH-40-20,130,40),this.btn_update.sName="马上更新",this.btn_update.Draw(),this.btn_exit.Move(this.iX+this.iW-20-130,this.iY+this.iH-40-20,130,40),this.btn_exit.sName="退出游戏",this.btn_exit.Draw();break;case 31:for(e=0,t=0;t<this.iNewFileCount;t++)if(0==this.newfiles[t].iFlag){if(null==(d=this.GetFreeDownload()))break;d.downloadstart(u.default.sUpdateSeverList[MainMenu.iSeverPoint],this.newfiles[t])}for(i=0,t=0;t<this.iNewFileCount;t++)10==this.newfiles[t].iFlag?e+=this.newfiles[t].iProc:20==this.newfiles[t].iFlag?(this.iProcLength+=this.newfiles[t].iFileSize,this.iProcFileCount++,this.newfiles[t].iFlag=40):30==this.newfiles[t].iFlag&&(this.newfiles[t].iFlag=0),this.newfiles[t].iFlag<20&&i++;0==i&&(this.iOldVersion=this.iNewVersion,this.savecurrentversion(),this.iStat=100),this.pm3f.DrawTextEx(o,h+0,"总文件数："+this.iProcFileCount+"/"+this.iUpdateFileCount,4294967295,20,101,1,1,0,0,0),t=this.iProcLength+e,e=this.iUpdateLength,this.pm3f.DrawTextEx(o,h+30,"已完成："+t/1024+"K("+t/10486*1/100+"M)",4294967295,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(o,h+60,"总大小："+e/1024+"K("+e/10486*1/100+"M)",4294967295,20,101,1,1,0,0,0),e=this.iUpdateLength-t,t>0&&(this.lnow=f.default.get_ms(),this.lcalc=(this.lnow-this.lstart)/1e3,this.lcalc<=0&&(this.lcalc=1),this.pm3f.DrawTextEx(o,h+90,"平均速度："+t/this.lcalc/1024+"K/s",4294967295,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(o,h+120,"已用时间："+f.default.SecondToTime(this.lcalc),4294967295,20,101,1,1,0,0,0),this.pm3f.DrawTextEx(o,h+150,"预计还需："+f.default.SecondToTime(this.lcalc*e/t),4294967295,20,101,1,1,0,0,0));break;case 32:this.pm3f.DrawTextEx(o,h,"下载出错，检查网络连接是否正常("+this.downlist[0].iEid+")",4294967295,20,101,1,1,0,0,0),this.btn_update.Move(this.iX+20,this.iY+this.iH-40-20,130,40),this.btn_update.sName="重试",this.btn_update.Draw(),this.btn_exit.Move(this.iX+this.iW-20-130,this.iY+this.iH-40-20,130,40),this.btn_exit.sName="退出游戏",this.btn_exit.Draw();break;case 110:if(this.down_apkversion.bSuccress())if(this.pls.InitDataFromSD(u.default.sSDTo+"apkversion.dat")){for(e=this.pls.GetNextShort(),t=0;t<e;t++)if(i=this.pls.GetNextShort(),a=this.pls.GetNextShort(),this.pls.GetNextString(),i==t&&i==n.default.QUDAO){u.default.APKVersion<a?(this.iStat=111,null!=(d=this.GetFreeDownload())&&d.downloadstart(u.default.sUpdateClientList[MainMenu.iSeverPoint]+n.default.QUDAO+"/",this.down_apk)):this.iStat=102;break}}else this.iStat=200,this.sError="E5";this.down_apkversion.bFailed()&&(this.iStat=200,this.sError="E6"),this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在检测客户端版本...",4294967295,30,101,1,1,0,-2,-2),this.down_apkversion.bProcing()&&this.down_apkversion.iFileSize>0&&this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2+40,100*this.down_apkversion.iProc/this.down_apkversion.iFileSize+"%",4294967295,20,101,1,1,0,-2,-2);break;case 111:this.down_apk.bSuccress()&&((m=new Intent(Intent.ACTION_VIEW)).setDataAndType(Uri.fromFile(new File(u.default.sSDTo+"7gol.apk")),"application/vnd.android.package-archive"),s.default.mMain.startActivity(m),s.default.gi().Exit()),this.down_apk.bFailed()&&(this.iStat=200,this.sError="E7"),this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在下载最新客户端...",4294967295,30,101,1,1,0,-2,-2),this.down_apk.bProcing()&&this.down_apk.iFileSize>0&&this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2+40,100*this.down_apk.iProc/this.down_apk.iFileSize+"%",4294967295,20,101,1,1,0,-2,-2);break;case 100:if(n.default.bAutoUpdateAPK&&(g.default.sop1("版本:"+u.default.APKVersion+","+this.iApkVersion),u.default.APKVersion<this.iApkVersion)){null!=(d=this.GetFreeDownload())&&d.downloadstart(u.default.sUpdateClientList[MainMenu.iSeverPoint],this.down_apkversion),this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"正在检测客户端版本...",4294967295,30,101,1,1,0,-2,-2),this.iStat=110;break}case 102:if(this.iStat=101,this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"载入中...",4294967295,30,101,1,1,0,-2,-2),this.pls.InitDataFromSD(u.default.sSDTo+"currentcheck.dat"))for(MainMenu.iCheckCount=this.pls.GetNextInt(),MainMenu.checkfile=new Array(MainMenu.iCheckCount),t=0;t<MainMenu.iCheckCount;t++)MainMenu.checkfile[t]=new b,MainMenu.checkfile[t].sName=this.pls.GetNextString(),MainMenu.checkfile[t].sMd5=this.pls.GetNextString();else null!=(d=this.GetFreeDownload())&&(d.downloadstart(u.default.sUpdateSeverList[MainMenu.iSeverPoint],this.down_detail),this.iStat=20);break;case 101:MainMenu.bExitThread=!0,g.default.gp.InitAnimaAndData(),this.pm3f.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,"载入中...",4294967295,30,101,1,1,0,-2,-2),_.default.gi().PopStat(1),_.default.gi().PushStat(_.default.GS_FASTLOGIN);break;case 200:this.pm3f.DrawTextEx(o,h,"连接出错，检查网络连接是否正常",4294967295,20,101,1,1,0,0,0),this.sError.length>0&&this.pm3f.DrawTextEx(o,h+50,this.sError,4294967295,20,101,1,1,0,0,0),MainMenu.iSeverPoint<3&&(MainMenu.iSeverPoint++,this.iStat=10,this.iRetry=10)}}},{key:"ProcTouch",value:function(t,e,i){if(30==this.iStat||32==this.iStat){if(this.btn_update.ProcTouch(t,e,i))return this.btn_update.bCheck()&&(this.lstart=f.default.get_ms(),this.iStat=31),!0;if(this.btn_exit.ProcTouch(t,e,i))return this.btn_exit.bCheck()&&s.default.gi().Exit(),!0}return!1}}]),MainMenu}();i.default=D,D.iCheckCount,D.checkfile,D.digest,D.mybuf,D.bExitThread=!1,D.pics,D.dpics=function(t){D.pics[0][0]<0&&(D.pics[0][0]=m.default.gi().LoadFromFile("bk/aa.xxx",-1,!1)),D.pics[0][1]<0&&(D.pics[0][1]=m.default.gi().LoadFromFile("bk/ab.xxx",-1,!1)),m.default.gi().DrawImageEx(0,0,0,D.pics[0][0],0,0,512,480,101,1,1,0,0,0),m.default.gi().DrawImageEx(0,512,0,D.pics[0][1],0,0,288,480,101,1,1,0,0,0)},D.CheckFile=function(t){var e,i=getFileMD5(new File(u.default.sSDTo+t));for(e=0;e<D.iCheckCount;e++)if(t==D.checkfile[e].sName){if(i==D.checkfile[e].sMd5)return!0;break}return new File(u.default.sSDTo+"currentversion.dat").delete(),s.default.gi().Exit(),!1},D.getFileMD5=function(t){if(!t.isFile())return"false";var e,i,a=null;for(a=new FileInputStream(t),D.digest.reset();-1!=(i=a.read(D.mybuf));)D.digest.update(D.mybuf,0,i);return e=f.default.toHexString(D.digest.MainMenu.digest()),a.close(),e},D.iSeverPoint=0},{"../../config/GameData":4,"../../config/GmConfig":5,"../../config/XDefine":7,"../../engine/BaseClass":8,"../../engine/PackageTools":9,"../../engine/control/XButton":14,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/XStat":70,"../../engtst/mgm/gameing/fast/SystemOperate":124,"../../mgm/mainmenu/download/_DOWNFILE":305,"../../mgm/mainmenu/download/_DOWNLOAD":306,"../../zero/Interface/GameVersion":317,"../../zero/Interface/PublicInterface":318}],304:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=_interopRequireDefault(t("../../engine/graphics/AnimaAction"));_interopRequireDefault(t("../../engine/graphics/XAnima"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}i.default=function _ROLELIST(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_ROLELIST),this.sName="",this.aa=new a.default}},{"../../engine/graphics/AnimaAction":25,"../../engine/graphics/XAnima":30}],305:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}();var n=function(){function _DOWNFILE(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_DOWNFILE)}return a(_DOWNFILE,[{key:"InitData",value:function(t,e,i){this.sName=t,this.sMD5=e,this.iFileSize=i,this.iFlag=0}},{key:"bProcing",value:function(){return 10==iFlag}},{key:"bSuccress",value:function(){return 20==iFlag}},{key:"bFailed",value:function(){return 30==iFlag}}]),_DOWNFILE}();i.default=n},{}],306:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});_interopRequireDefault(t("../../../mgm/mainmenu/MainMenu")),_interopRequireDefault(t("../../../mgm/newmainmenu/LeadPage")),_interopRequireDefault(t("../../../config/GameData")),_interopRequireDefault(t("../../../config/XDefine")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}i.default=function _DOWNLOAD(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_DOWNLOAD)}},{"../../../config/GameData":4,"../../../config/XDefine":7,"../../../engtst/mgm/GmPlay":65,"../../../mgm/mainmenu/MainMenu":303,"../../../mgm/newmainmenu/LeadPage":308}],307:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../mgm/mainmenu/MainMenu")),_interopRequireDefault(t("../../config/GameData"))),s=_interopRequireDefault(t("../../config/GmConfig")),r=(_interopRequireDefault(t("../../config/XDefine")),_interopRequireDefault(t("../../engine/BaseClass"))),o=(_interopRequireDefault(t("../../engine/PackageTools")),_interopRequireDefault(t("../../engine/control/XButton")),_interopRequireDefault(t("../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../engine/control/XInput")),l=_interopRequireDefault(t("../../engine/graphics/AnimaAction")),f=_interopRequireDefault(t("../../engine/graphics/M3DFast")),h=(_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),d=_interopRequireDefault(t("../../engtst/mgm/GmProtocol")),c=_interopRequireDefault(t("../../engtst/mgm/XStat")),m=_interopRequireDefault(t("../../engtst/mgm/History/XRecordFast")),g=(_interopRequireDefault(t("../../engtst/mgm/frame/DrawMode")),_interopRequireDefault(t("../../engtst/mgm/frame/format/FormatString"))),_=_interopRequireDefault(t("../../engtst/mgm/frame/message/EasyMessage")),p=_interopRequireDefault(t("../../engtst/mgm/gameing/fast/SystemOperate")),b=_interopRequireDefault(t("../../engine/gbk"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var D=function(t){function CreateRole(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,CreateRole);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(CreateRole.__proto__||Object.getPrototypeOf(CreateRole)).call(this));for(i.WHEELGAP=1e3,i.WHEELMAX=6*i.WHEELGAP,i.school_special=["物理输出、点杀","高敏、封系、控制","辅助、奶妈、复活、恢复","物理输出、群攻","最高法系伤害、群秒(但目标数量较少)","封印、解封、控制","较高法系伤害、群秒(目标数量多)","固定伤害、随机群秒、辅助、持续恢复","单体高伤、复活、持续蓝恢复、封印"],i.pani=t,i.pm3f=t.pm3f,i.bDown=!1,i.iWheel=i.WHEELGAP/2,i.iSelectPoint=0,i.in_nick=new u.default(t),i.bCanRand=!0,i.iRandNameDelay=0,i.btn_randname=new o.default(h.default.xani_nui1),i.btn_randname.InitButton("随机按钮"),i.btn_randname.Move(706*s.default.SCRW/1280,634,48,48),i.btn_create=new o.default(h.default.xani_nui1),i.btn_create.InitButton("创建按钮"),i.btn_create.Move(s.default.SCRW-126-25,576,126,128),i.btn_back=new o.default(h.default.xani_nui1),i.btn_back.InitButton("返回按钮"),i.btn_back.Move(25,576,126,128),i.aa_roles=new Array(6),i.aa_weapons=new Array(6),e=0;e<6;e++)i.aa_roles[e]=new l.default,h.default.xani_newrole[e].InitAnimaWithName("站立_下",i.aa_roles[e]);return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(CreateRole,r.default),a(CreateRole,[{key:"wheeldraw",value:function(t){for(var e,i,a,n,r;t<0;)t+=this.WHEELMAX;for(t%=this.WHEELMAX,e=0;e<6;e++)if(e*this.WHEELGAP<=t&&t<=(e+1)*this.WHEELGAP){this.iSelectPoint=e;break}for(n=0;n<2;n++)for(e=0;e<6;e++){r=(i=e*this.WHEELGAP+this.WHEELGAP/2)<t?-1:1,(a=Math.abs(i-t))>this.WHEELMAX/2&&(a=Math.abs(i+this.WHEELMAX-t),r=i+this.WHEELMAX<t?-1:1),a>this.WHEELMAX/2&&(a=Math.abs(i-this.WHEELMAX-t),r=i-this.WHEELMAX<t?-1:1);var o=300*s.default.SCRW/1280;a<this.WHEELGAP?1==n&&h.default.xani_nui1.DrawAnimaEx(558*s.default.SCRW/1280+r*o*a/this.WHEELGAP,544-100*a/this.WHEELGAP,"人物原画",e,101,.65+.35*(this.WHEELGAP-a)/this.WHEELGAP,.65+.35*(this.WHEELGAP-a)/this.WHEELGAP,0,-2,-2):a<2*this.WHEELGAP&&0==n&&h.default.xani_nui1.DrawAnimaEx(558*s.default.SCRW/1280+r*o,444,"人物原画",e,100*(2*this.WHEELGAP-a)/this.WHEELGAP,.65,.65,0,-2,-2)}}},{key:"Draw",value:function(){var t,e;if(CreateRole.drawback(),this.wheeldraw(this.iWheel+(this.bDown?2*(this.iLockX-this.iMoveX):0)),!this.bDown){for(;this.iWheel<0;)this.iWheel+=this.WHEELMAX;this.iWheel%=this.WHEELMAX,t=this.iSelectPoint*this.WHEELGAP+this.WHEELGAP/2,e=100,this.iWheel<t-e?this.iWheel+=e:this.iWheel>t+e?this.iWheel-=e:this.iWheel=t}for(h.default.xani_nui1.DrawAnima(557*s.default.SCRW/1280-45,15,"种族性别",this.iSelectPoint),t=0;t<3;t++)e=3*parseInt(this.iSelectPoint/2)+t,f.default.gi().DrawTextEx(1137*s.default.SCRW/1280,47+106*t,n.default.sSchools[e+1],4294967295,p.default.WordSize(20),101,1,1,0,-2,-2),g.default.gi().Format(this.school_special[e],p.default.WordSize(120)*s.default.SCRW/1280,p.default.WordSize(20)),g.default.gi().Draw(1076*s.default.SCRW/1280,72+106*t);h.default.xani_nui1.DrawAnimaEx(1140*s.default.SCRW/1280,525,"选中角色底",h.default.iDelay,101,.5,.5,0,-2,-2),this.aa_roles[this.iSelectPoint].Draw(1140*s.default.SCRW/1280,525),this.aa_roles[this.iSelectPoint].NextFrame(),this.in_nick.Move(365*s.default.SCRW/1280,629,330*s.default.SCRW/1280,56),this.in_nick.sDetail.length<=0?f.default.gi().DrawTextEx(536*s.default.SCRW/1280,657,"角  色  昵  称",1895825407,p.default.WordSize(33),101,1,1,0,-2,-2):f.default.gi().DrawTextEx(536*s.default.SCRW/1280,657,this.in_nick.sDetail,4294967295,p.default.WordSize(30),101,1,1,0,-2,-2),this.iRandNameDelay<=0?this.bCanRand&&this.btn_randname.Draw():this.iRandNameDelay--,this.in_nick.onscr(),this.btn_create.Draw(),this.btn_back.Draw()}},{key:"ProcTouch",value:function(t,e,i){return i<570&&1==t&&(this.bDown=!0,this.iLockX=e,this.iMoveX=e),this.bDown&&(2==t&&(this.iMoveX=e),3==t&&(this.iWheel+=2*(this.iLockX-this.iMoveX),this.bDown=!1)),this.iRandNameDelay<=0&&this.bCanRand&&this.btn_randname.ProcTouch(t,e,i)?(this.btn_randname.bCheck()&&(this.iRandNameDelay=20,this.bCanRand=!1,d.default.gi().s_GetRandName(this.iSelectPoint%2)),!0):(this.in_nick.ProcTouch(t,e,i),this.btn_create.ProcTouch(t,e,i)?(this.btn_create.bCheck()&&(CreateRole.bCheckNick(this.in_nick.sDetail,4,24)?(d.default.gi().s_CreateRole(m.default.iLastSector,m.default.iLastSever,this.in_nick.sDetail,this.iSelectPoint%2,this.iSelectPoint/2),c.default.gi().PushStat(c.default.GS_LOADING1)):_.default.easymsg.AddMessage("请填写正确的昵称")),!0):!!this.btn_back.ProcTouch(t,e,i)&&(this.btn_back.bCheck()&&c.default.gi().PopStat(1),!0))}}]),CreateRole}();i.default=D,D.res_bk=-1,D.drawback=function(){D.res_bk<0&&(D.res_bk=f.default.gi().LoadFromFile("datapackage/others/createrole.png",-1,!0)),f.default.gi().DrawImageEx(0,0,0,D.res_bk,0,0,1280,720,101,p.default.BASEW/1280,1,0,0,0)},D.GetRandName=function(t){if(c.default.gi().LastStatType(0)==c.default.GS_CREATEROLE){var e=c.default.gi().LastStat(0);e.in_nick.sDetail=t.GetNextString(),e.in_nick.OpenInput(),e.bCanRand=!0}},D.bCheckNick=function(t,e,i){var a,n=b.default.utf8_to_gb2312a(t);if(n.length<e||n.length>i)return!1;for(a=0;a<n.length;a++){if(n[a]=="\\".charCodeAt(0))return!1;if(n[a]=="/".charCodeAt(0))return!1;if(n[a]=="|".charCodeAt(0))return!1}return!0}},{"../../config/GameData":4,"../../config/GmConfig":5,"../../config/XDefine":7,"../../engine/BaseClass":8,"../../engine/PackageTools":9,"../../engine/control/XButton":14,"../../engine/control/XButtonEx2":16,"../../engine/control/XInput":18,"../../engine/gbk":24,"../../engine/graphics/AnimaAction":25,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/GmProtocol":66,"../../engtst/mgm/History/XRecordFast":67,"../../engtst/mgm/XStat":70,"../../engtst/mgm/frame/DrawMode":72,"../../engtst/mgm/frame/format/FormatString":81,"../../engtst/mgm/frame/message/EasyMessage":86,"../../engtst/mgm/gameing/fast/SystemOperate":124,"../../mgm/mainmenu/MainMenu":303}],308:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../System/Interface/uc/main")),_interopRequireDefault(t("../../zero/Interface/GameVersion"))),s=_interopRequireDefault(t("../../zero/Interface/PublicInterface")),r=(_interopRequireDefault(t("../../mgm/mainmenu/MainMenu")),_interopRequireDefault(t("../../mgm/mainmenu/download/_DOWNFILE")),_interopRequireDefault(t("../../mgm/mainmenu/download/_DOWNLOAD"))),o=_interopRequireDefault(t("../../config/GameData")),u=_interopRequireDefault(t("../../config/GmConfig")),l=_interopRequireDefault(t("../../config/XDefine")),f=_interopRequireDefault(t("../../engine/BaseClass")),h=_interopRequireDefault(t("../../engine/PackageTools")),d=_interopRequireDefault(t("../../engine/control/XButtonEx2")),c=_interopRequireDefault(t("../../engine/graphics/M3DFast")),m=_interopRequireDefault(t("../../engtst/mgm/GmPlay")),g=_interopRequireDefault(t("../../engtst/mgm/XStat")),_=_interopRequireDefault(t("../../engtst/mgm/frame/DrawMode")),p=_interopRequireDefault(t("../../engtst/mgm/frame/format/FormatString")),b=_interopRequireDefault(t("../../engtst/mgm/gameing/fast/SystemOperate"));_interopRequireDefault(t("../../engine/graphics/M2DFast")),_interopRequireDefault(t("../../ui/XOLE"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var D=function(t){function LeadPage(){_classCallCheck(this,LeadPage);var t,e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(LeadPage.__proto__||Object.getPrototypeOf(LeadPage)).call(this));for(e.iStat=0,LeadPage.sLeadAddr="http://"+o.default.sDSURL+":9999/",LeadPage.sResAddr="http://"+o.default.sDSURL+":7999/7gol_test/",LeadPage.sLeadAddr=l.default.BASE_URL,e.pls=new h.default(262144),LeadPage.sResSeverList=new Array(16),e.MAXTHREAD=8,e.background=-1,e.iLocalApkVersion=o.default.APKVersion,e.iLocalResVersion=0,e.iNewApkVersion=-1,e.iNewResVersion=-1,e.downlist=new Array(e.MAXTHREAD),t=0;t<e.MAXTHREAD;t++)e.downlist[t]=new r.default;return e.bCheckFinish=!1,e.btn_ok=new d.default(m.default.xani_local),e.btn_ok.InitButton("通用按钮1"),e.btn_ok.sName="确  定",e.btn_ok.iNameSize=b.default.WordSize(30),e.btn_cancel=new d.default(m.default.xani_local),e.btn_cancel.InitButton("通用按钮1"),e.btn_cancel.sName="取  消",e.btn_cancel.iNameSize=b.default.WordSize(30),e.sDetail="",e.iProcTo=-1,e.iRetry=5,e.sError="",e.MAXBUF=65536,e.iThreadStat=0,e.iCheckProc=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(LeadPage,f.default),a(LeadPage,[{key:"GetFreeDownload",value:function(){var t;for(t=0;t<this.MAXTHREAD;t++)if(this.downlist[t].bwaiting())return this.downlist[t];return null}}]),a(LeadPage,[{key:"dpics",value:function(t){if(this.background<0){var e=l.default.grnd(0,5);this.background=c.default.gi().LoadFromFile("localres/logo/kj"+e+".xxx",-1,!0)}c.default.gi().DrawImageEx(0,0,0,this.background,0,0,1280,720,101,b.default.BASEW/1280,1,0,0,0)}},{key:"LoadProc",value:function(t){console.log("proc to : "+t)}},{key:"LoadLeadData",value:function(t,e){if(null!=e){this.bLoadFinished20=!0,this.pls.GetData3(e),this.iNewApkVersion=this.pls.GetNextInt(),this.iNewResVersion=this.pls.GetNextInt();var i=this.pls.GetNextInt();0==n.default.QUDAO&&(this.iNewResVersion=i),m.default.sLoginIp=this.pls.GetNextString(),m.default.iLoginPort=this.pls.GetNextInt(),l.default.sop(m.default.sLoginIp+"==="+m.default.iLoginPort)}else Laya.loader.load(t,Laya.Handler.create(this,this.LoadLeadData,[t]),null,Laya.Loader.BUFFER)}},{key:"Draw",value:function(){if(this.dpics(0),c.default.gi().CheckImageLoaded(),c.default.gi().DrawTextEx(12,18,"当前版本：1."+this.iLocalApkVersion+"."+this.iLocalResVersion,4294967295,28,101,1,1,0,0,0),this.iNewApkVersion>=0&&c.default.gi().DrawTextEx(12,58,"最新版本：1."+this.iNewApkVersion+"."+this.iNewResVersion,4294967295,28,101,1,1,0,0,0),c.default.gi().DrawTextEx(u.default.SCRW-168,0,"健康游戏忠告",4294967295,25,101,1,1,0,-2,0),c.default.gi().DrawTextEx(u.default.SCRW,30,"抵制不良游戏，拒绝盗版游戏。",4294967295,25,101,1,1,0,-3,0),c.default.gi().DrawTextEx(u.default.SCRW,60,"注意自我保护，谨防受骗上当。",4294967295,25,101,1,1,0,-3,0),c.default.gi().DrawTextEx(u.default.SCRW,90,"适度游戏益脑，沉迷游戏伤身。",4294967295,25,101,1,1,0,-3,0),c.default.gi().DrawTextEx(u.default.SCRW,120,"合理安排时间，享受健康生活。",4294967295,25,101,1,1,0,-3,0),!LeadPage.bInited)return c.default.gi().DrawTextEx(5,u.default.SCRH-5,"正在初始化",4294967295,28,101,1,1,0,0,-3),void(LeadPage.bInited=!0);switch(this.iStat){case 0:this.iStat=20,this.sDetail="正在打开";break;case 20:l.default.sop(LeadPage.sLeadAddr+"lead.dat"),this.LoadLeadData(LeadPage.sLeadAddr+"lead.dat"),this.bLoadFinished20=!1,this.iStat=21,this.sDetail="正在获取版本信息，请保持网络畅通";break;case 21:this.bLoadFinished20&&(this.iStat=102),this.sDetail="正在对比版本信息，请保持网络畅通";break;case 22:this.bLoadFinished22&&(this.iStat=102),this.sDetail="载入中";break;case 102:m.default.gi().InitAnimaAndData()&&(this.iStat=103),this.sDetail="正在载入数据，请保持网络畅通";break;case 103:if(0!=s.default.QUDAO)s.default.gi().iStat;else if(m.default.xntf.bConnected)return g.default.gi().PopStat(1),void g.default.gi().PushStat(g.default.GS_FASTLOGIN);this.sDetail="正在登陆";break;case 200:_.default.local_titleframe(u.default.SCRW/2-200,u.default.SCRH/2-150,400,300,!0),c.default.gi().DrawText_2(u.default.SCRW/2,u.default.SCRH/2-150+b.default.WordSize(40),"提  示",4294639564,b.default.WordSize(50),101,1,1,0,-2,-2,4,4278542448),p.default.gi().FormatEx("#cfaffcc"+this.sDetail,340,b.default.WordSize(30),0,0,b.default.WordSize(35)),p.default.gi().Draw(u.default.SCRW/2-170,u.default.SCRH/2-150+100),this.btn_ok.Move(u.default.SCRW/2-100-70.5,u.default.SCRH/2+150-49-40,141,49),this.btn_ok.Draw(),this.btn_cancel.Move(u.default.SCRW/2+100-70.5,u.default.SCRH/2+150-49-40,141,49),this.btn_cancel.Draw(),this.sDetail=this.sError}if(this.iProcTo>=0&&(this.iProcTo>100&&(this.iProcTo=100),m.default.xani_local.DrawAnima(u.default.SCRW-100,u.default.SCRH-50,"跑步载入",m.default.iDelay),c.default.gi().DrawTextEx(u.default.SCRW-100,u.default.SCRH-50+20,this.iProcTo+"%",4294967295,28,101,1,1,0,-2,-2),c.default.gi().FillRect_2D(0,u.default.SCRH-2,this.iProcTo*u.default.SCRW/100,u.default.SCRH,4294967040)),200!=this.iStat)switch(m.default.iDelay/5%3){case 0:this.sDetail+=".";break;case 1:this.sDetail+="..";break;case 2:this.sDetail+="..."}c.default.gi().DrawTextEx(5,u.default.SCRH-5,this.sDetail,4294967295,28,101,1,1,0,0,-3)}},{key:"ProcTouch",value:function(t,e,i){return 200==this.iStat&&(this.btn_ok.ProcTouch(t,e,i)&&this.btn_ok.bCheck()&&(this.iStat=0),this.btn_cancel.ProcTouch(t,e,i)&&this.btn_cancel.bCheck()&&s.default.gi().Exit()),!1}},{key:"run",value:function(){for(var t,e;LeadPage.bProcThread;){if(1==this.iThreadStat){var i,a;for(t=0;t<this.iNewFileCount;t++){for(this.iProcTo=100*t/this.iNewFileCount,a=this.pls.mRes.getAssets().open("datapackage/"+this.newfiles[t].sName),i=new FileOutputStream(o.default.sSDTo+this.newfiles[t].sName);!((e=a.read(this.pls.databuf,0,262144))<=0);)i.write(this.pls.databuf,0,e);i.close(),a.close()}this.iThreadStat=0,this.bCheckFinish=!0}if(2==this.iThreadStat){for(this.iUpdateLength=0,this.iUpdateFileCount=this.iNewFileCount,this.iProcLength=0,this.iProcFileCount=0,t=0;t<this.iNewFileCount;t++)"7gol.apk"!=this.newfiles[t].sName?(this.newfiles[t].iFlag=0,this.iUpdateLength+=this.newfiles[t].iFileSize):(this.newfiles[t].iFlag=50,this.iUpdateFileCount--);this.iCheckProc=0,this.indir(new File(o.default.sSDTo)),this.iThreadStat=0,this.bCheckFinish=!0}3==this.iThreadStat&&(m.default.gp.InitAnimaAndData(),this.iThreadStat=0,this.bCheckFinish=!0),Thread.sleep(100)}}},{key:"indir",value:function(t){var e,i=t.listFiles();for(e=0;e<i.length;e++)i[e].isDirectory()?this.indir(i[e]):LeadPage.checkfile(i[e])}},{key:"checkfile",value:function(t){var e;this.iCheckProc++,this.iProcTo=100*this.iCheckProc/this.iNewFileCount;var i,a,n=t.getPath(),s=0,r=null;for(n=n.substring(o.default.sSDTo.length,n.length),this.sChecking=n,r=new FileInputStream(t),LeadPage.digest.reset();-1!=(a=r.read(LeadPage.mybuf));)LeadPage.digest.update(LeadPage.mybuf,0,a),s+=a;for(i=l.default.toHexString(LeadPage.digest.LeadPage.digest()),r.close(),e=0;e<this.iNewFileCount;e++)if(50!=this.newfiles[e].iFlag&&this.newfiles[e].iFileSize==s&&this.newfiles[e].sMD5.equals(i)&&this.newfiles[e].sName.equals(n))return this.newfiles[e].iFlag=50,this.iUpdateFileCount--,void(this.iUpdateLength-=this.newfiles[e].iFileSize)}},{key:"savecurrentversion",value:function(){var t;for(this.pls.iOffset=0,this.pls.InsertInt(this.iLocalResVersion),this.pls.SaveDataToSD(o.default.sSDTo+"currentversion.dat"),this.pls.iOffset=0,this.pls.InsertInt(this.iNewFileCount),t=0;t<this.iNewFileCount;t++)this.pls.InsertString(this.newfiles[t].sName),this.pls.InsertString(this.newfiles[t].sMD5);this.pls.SaveDataToSD(o.default.sSDTo+"currentcheck.dat")}}]),LeadPage}();i.default=D,D.iCheckCount,D.iProcDest,D.iResSeverCount=0,D.iResSeverPoint=0,D.apk_path,D.apk_name,D.checkfile,D.CheckFile=function(t){var e,i=getFileMD5(new File(o.default.sSDTo+t));for(e=0;e<D.iCheckCount;e++)if(t==D.checkfile[e].sName){if(i==D.checkfile[e].sMd5)return!0;break}return new File(o.default.sSDTo+"currentversion.dat").delete(),s.default.gi().Exit(),!1},D.getFileMD5=function(t){if(!t.isFile())return"false";var e,i,a=null;for(a=new FileInputStream(t),D.digest.reset();-1!=(i=a.read(D.mybuf));)D.digest.update(D.mybuf,0,i);return e=l.default.toHexString(D.digest.LeadPage.digest()),a.close(),e},D.iProcDest,D.sLeadSeverList=["http://"+o.default.sDSURL+":6666/","http://115.28.16.199:9999/"],D.iResSeverCount=0,D.iResSeverPoint=0,D.sResSeverList=new Array(6),D.digest,D.bInited=!1,D.mybuf=new Int8Array(65536),D.bProcThread=!0},{"../../System/Interface/uc/main":3,"../../config/GameData":4,"../../config/GmConfig":5,"../../config/XDefine":7,"../../engine/BaseClass":8,"../../engine/PackageTools":9,"../../engine/control/XButtonEx2":16,"../../engine/graphics/M2DFast":27,"../../engine/graphics/M3DFast":28,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/XStat":70,"../../engtst/mgm/frame/DrawMode":72,"../../engtst/mgm/frame/format/FormatString":81,"../../engtst/mgm/gameing/fast/SystemOperate":124,"../../mgm/mainmenu/MainMenu":303,"../../mgm/mainmenu/download/_DOWNFILE":305,"../../mgm/mainmenu/download/_DOWNLOAD":306,"../../ui/XOLE":316,"../../zero/Interface/GameVersion":317,"../../zero/Interface/PublicInterface":318}],309:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../mgm/mainmenu/MainMenu")),_interopRequireDefault(t("../../mgm/mainmenu/_ROLELIST"))),s=_interopRequireDefault(t("../../config/GameData")),r=_interopRequireDefault(t("../../config/GmConfig")),o=_interopRequireDefault(t("../../engine/BaseClass")),u=(_interopRequireDefault(t("../../engine/PackageTools")),_interopRequireDefault(t("../../engine/control/XButton"))),l=_interopRequireDefault(t("../../engine/control/XButtonEx2")),f=_interopRequireDefault(t("../../engine/graphics/M3DFast")),h=(_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),d=_interopRequireDefault(t("../../engtst/mgm/GmProtocol")),c=_interopRequireDefault(t("../../engtst/mgm/XStat")),m=_interopRequireDefault(t("../../engtst/mgm/History/XRecordFast")),g=_interopRequireDefault(t("../../engtst/mgm/frame/DrawMode")),_=_interopRequireDefault(t("../../engtst/mgm/frame/message/EasyMessage")),p=_interopRequireDefault(t("../../engtst/mgm/gameing/fast/SystemOperate")),b=_interopRequireDefault(t("../../engtst/mgm/gameing/me/GmMe")),D=_interopRequireDefault(t("./StarEffect")),y=_interopRequireDefault(t("./StartGame"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var w=function(t){function SelectRole(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,SelectRole);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SelectRole.__proto__||Object.getPrototypeOf(SelectRole)).call(this));for(i.MAXROLECOUNT=6,i.posX=new Int32Array(5),i.posY=new Int32Array(5),i.pani=t,i.pm3f=t.pm3f,i.posX[0]=130,i.posY[0]=530,i.posX[1]=330,i.posY[1]=430,i.posX[2]=530,i.posY[2]=530,i.posX[3]=730,i.posY[3]=430,i.posX[4]=930,i.posY[4]=530,i.rlist=new Array(i.MAXROLECOUNT),e=0;e<i.MAXROLECOUNT;e++)i.rlist[e]=new n.default;for(i.btn_select=new Array(i.MAXROLECOUNT+1),e=0;e<i.MAXROLECOUNT+1;e++)i.btn_select[e]=new u.default(t),i.btn_select[e].bSingleButton=!0,i.btn_select[e].sName="";return i.iRoleCount=0,i.btn_changesever=new l.default(h.default.xani_nui1),i.btn_changesever.InitButton("选服按钮"),i.btn_changesever.sName="选择服务器",i.btn_changesever.Move(r.default.OX+919,50,183,54),i.btn_createrole=new l.default(h.default.xani_nui1),i.btn_createrole.InitButton("选服按钮"),i.btn_createrole.sName="创建角色",i.btn_createrole.Move(r.default.OX+1057,299,183,54),i.btn_startgame=new l.default(h.default.xani_nui1),i.btn_startgame.InitButton("选服按钮"),i.btn_startgame.sName="进入游戏",i.btn_startgame.Move(r.default.OX+1057,391,183,54),i.se=new D.default,i.se.Init2(0,0,80,50),i.iSelectRolePoint=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SelectRole,o.default),a(SelectRole,[{key:"Draw",value:function(){var t;for(y.default.drawback(!1),f.default.gi().FillRect_2D(0,0,r.default.SCRW,r.default.SCRH,1342177280),h.default.xani_nui1.DrawAnima(r.default.OX+186,47,"区服条",0),f.default.gi().DrawTextEx(r.default.OX+380,74,this.sSectorName,4294967295,p.default.WordSize(30),101,1,1,0,-2,-2),f.default.gi().DrawTextEx(r.default.OX+700,74,this.sSeverName,4294967295,p.default.WordSize(30),101,1,1,0,-2,-2),this.btn_changesever.Draw(),g.default.local_frame1(r.default.OX+1046,262,207,219),this.btn_createrole.Draw(),this.btn_startgame.Draw(),t=0;t<5;t++)h.default.xani_nui1.DrawAnimaEx(r.default.OX+this.posX[t],this.posY[t],"站台",0,101,1,1,0,0,0),this.iSelectRolePoint==t&&(h.default.xani_nui1.DrawAnimaEx(r.default.OX+this.posX[t],this.posY[t],"选中角色底",h.default.iDelay,101,1,1,0,0,0),this.se.Draw(r.default.OX+this.posX[t],this.posY[t])),this.btn_select[t].Move(r.default.OX+this.posX[t]-60,this.posY[t]-250,120,300),t<this.iRoleCount&&(this.rlist[t].aa.Draw(r.default.OX+this.posX[t],this.posY[t]),this.rlist[t].aa.NextFrame(),h.default.xani_nui1.DrawAnimaEx(r.default.OX+this.posX[t],this.posY[t]-250,"名字框",0,101,1,1,0,0,0),this.pm3f.DrawTextEx(r.default.OX+this.posX[t],this.posY[t]-250,this.rlist[t].sName,4294967295,p.default.WordSize(30),101,1,1,0,-2,-2)),this.iSelectRolePoint==t&&this.se.DrawFront(r.default.OX+this.posX[t],this.posY[t]);s.default.bAutoGetInForDebug&&(c.default.gi().PopStat(1),c.default.gi().PushStat(c.default.GS_LOADING1),d.default.gi().s_StartGame(this.rlist[0].iRid),b.default.me.iSex=this.rlist[0].iSex,b.default.me.iRace=this.rlist[0].iRace,b.default.me.bsc=!0)}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.btn_createrole.ProcTouch(t,e,i))return this.btn_createrole.bCheck()&&(this.iRoleCount>=5?_.default.easymsg.AddMessage("最多创建5个角色"):c.default.gi().PushStat(c.default.GS_CREATEROLE)),!0;if(this.btn_startgame.ProcTouch(t,e,i))return this.btn_startgame.bCheck()&&(this.iRoleCount<=0?_.default.easymsg.AddMessage("请先创建角色"):this.iSelectRolePoint<0||this.iSelectRolePoint>=this.iRoleCount?_.default.easymsg.AddMessage("请先选择角色"):(c.default.gi().PushStat(c.default.GS_LOADING1),d.default.gi().s_StartGame(this.rlist[this.iSelectRolePoint].iRid),b.default.me.iSex=this.rlist[this.iSelectRolePoint].iSex,b.default.me.iRace=this.rlist[this.iSelectRolePoint].iRace,b.default.me.bsc=!0)),!0;if(this.btn_changesever.ProcTouch(t,e,i))return this.btn_changesever.bCheck()&&(d.default.gi().s_GetSeverList(m.default.iLastSector),c.default.gi().PushStat(c.default.GS_LOADING1)),!0;for(a=0;a<5;a++)if(this.btn_select[a].ProcTouch(t,e,i)&&this.btn_select[a].bCheck())return a<this.iRoleCount?0==this.rlist[a].iStat?_.default.easymsg.AddMessage("服务器维护中,进入失败"):this.iSelectRolePoint==a?(c.default.gi().PushStat(c.default.GS_LOADING1),d.default.gi().s_StartGame(this.rlist[this.iSelectRolePoint].iRid),b.default.me.iSex=this.rlist[this.iSelectRolePoint].iSex,b.default.me.iRace=this.rlist[this.iSelectRolePoint].iRace,b.default.me.bsc=!0):this.iSelectRolePoint=a:a>=this.iRoleCount&&c.default.gi().PushStat(c.default.GS_CREATEROLE),!0;return!1}}]),SelectRole}();i.default=w,w.Open=function(t){for(var e,i;c.default.gi().iXStat==c.default.GS_LOADING1;)c.default.gi().PopStat(1);for(;c.default.gi().iXStat==c.default.GS_SELECTSEVER;)c.default.gi().PopStat(1);for((i=c.default.gi().iXStat==c.default.GS_SELECTROLE?c.default.gi().LastStat(0):c.default.gi().PushStat(c.default.GS_SELECTROLE)).iSectorId=t.GetNextInt(),i.sSectorName=t.GetNextString(),i.iSeverId=t.GetNextInt(),i.sSeverName=t.GetNextString(),m.default.iHaveSeverRecord=1,m.default.iLastSector=i.iSectorId,m.default.iLastSever=i.iSeverId,i.iRoleCount=t.GetNextByte(),e=0;e<i.iRoleCount;e++)i.rlist[e].iRid=t.GetNextInt(),i.rlist[e].sName=t.GetNextString(),i.rlist[e].iSex=t.GetNextByte(),i.rlist[e].iRace=t.GetNextByte(),i.rlist[e].aa=h.default.xani_nui1.InitAnimaWithName("展示"+(2*i.rlist[e].iRace+i.rlist[e].iSex),null),i.rlist[e].iStat=1,t.GetNextByte();i.iRoleCount<=0?i.iSelectRolePoint=-1:i.iSelectRolePoint=0}},{"../../config/GameData":4,"../../config/GmConfig":5,"../../engine/BaseClass":8,"../../engine/PackageTools":9,"../../engine/control/XButton":14,"../../engine/control/XButtonEx2":16,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/GmProtocol":66,"../../engtst/mgm/History/XRecordFast":67,"../../engtst/mgm/XStat":70,"../../engtst/mgm/frame/DrawMode":72,"../../engtst/mgm/frame/message/EasyMessage":86,"../../engtst/mgm/gameing/fast/SystemOperate":124,"../../engtst/mgm/gameing/me/GmMe":211,"../../mgm/mainmenu/MainMenu":303,"../../mgm/mainmenu/_ROLELIST":304,"./StarEffect":311,"./StartGame":312}],310:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../mgm/mainmenu/MainMenu")),_interopRequireDefault(t("../../config/GmConfig"))),s=_interopRequireDefault(t("../../engine/BaseClass")),r=(_interopRequireDefault(t("../../engine/PackageTools")),_interopRequireDefault(t("../../engine/control/XButton")),_interopRequireDefault(t("../../engine/control/XButtonEx1")),_interopRequireDefault(t("../../engine/control/XButtonEx2"))),o=_interopRequireDefault(t("../../engine/graphics/M3DFast")),u=(_interopRequireDefault(t("../../engine/graphics/XAnima")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),l=_interopRequireDefault(t("../../engtst/mgm/GmProtocol")),f=_interopRequireDefault(t("../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../engtst/mgm/History/XRecordFast")),d=_interopRequireDefault(t("../../engtst/mgm/frame/DrawMode")),c=_interopRequireDefault(t("../../engtst/mgm/frame/message/EasyMessage")),m=(_interopRequireDefault(t("../../engtst/mgm/gameing/fast/SystemOperate")),_interopRequireDefault(t("../../engtst/mgm/gameing/fuben/CreateFuBen")),_interopRequireDefault(t("./StarEffect"))),g=_interopRequireDefault(t("./StartGame")),_=_interopRequireDefault(t("../../config/GameData"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=function _SEVERLIST(){_classCallCheck(this,_SEVERLIST)},b=function(t){function SelectSever(t){_classCallCheck(this,SelectSever);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(SelectSever.__proto__||Object.getPrototypeOf(SelectSever)).call(this));for(i.MAXSECTORCOUNT=10,i.MAXSEVERCOUNT=10,i.iW=800,i.iH=480,i.iX=(n.default.SCRW-i.iW)/2,i.iY=(n.default.SCRH-i.iH)/2,i.pani=t,i.pm3f=t.pm3f,i.sSectorName=new Array(i.MAXSECTORCOUNT),i.iSectorId=new Int32Array(i.MAXSECTORCOUNT),i.slist=new Array(i.MAXSEVERCOUNT),i.tjlist=new Array(i.MAXSEVERCOUNT),e=0;e<i.MAXSEVERCOUNT;e++)i.slist[e]=new p,i.tjlist[e]=new p;for(i.iSeverCount=0,i.iSectorCount=0,i.iCurrentSectorId=0,i.btn_sector=new Array(i.MAXSECTORCOUNT),e=0;e<i.MAXSECTORCOUNT;e++)i.btn_sector[e]=new r.default(u.default.xani_nui1),i.btn_sector[e].InitButton("选区按钮1"),i.btn_sector[e].sName="",i.btn_sector[e].Move(n.default.OX+200,270+73*e,183,54);for(i.btn_sever=new Array(i.MAXSEVERCOUNT),i.btn_tj=new Array(i.MAXSEVERCOUNT),e=0;e<i.MAXSEVERCOUNT;e++)i.btn_sever[e]=new r.default(u.default.xani_nui1),i.btn_sever[e].InitButton("选服按钮2"),i.btn_sever[e].sName="",i.btn_sever[e].Move(n.default.OX+457+e%3*220,253+86*parseInt(e/3),178,51),i.btn_tj[e]=new r.default(u.default.xani_nui1),i.btn_tj[e].InitButton("选服按钮2"),i.btn_tj[e].sName="",i.btn_tj[e].Move(n.default.OX+457+e%3*220,112+e/3*86,178,51);return i.btn_create=new r.default(u.default.xani_nui1),i.btn_create.InitButton("确定服务器"),i.btn_create.Move(n.default.SCRW-126-25,576,126,128),i.btn_back=new r.default(u.default.xani_nui1),i.btn_back.InitButton("返回按钮"),i.btn_back.Move(25,576,126,128),i.se=new m.default,i.se.Init1(0,0,178,50,100),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(SelectSever,s.default),a(SelectSever,[{key:"InitSeverList",value:function(t){var e,i,a;for(this.iCurrentSectorId=t.GetNextInt(),this.iSectorCount=t.GetNextByte(),e=0;e<this.iSectorCount;e++)this.sSectorName[e]=t.GetNextString(),this.iSectorId[e]=t.GetNextInt(),this.btn_sector[e].bMouseIn=!1,this.btn_sector[e].bMouseDown=!1,this.btn_sector[e].sName=this.sSectorName[e];for(this.iCurrentSeverId=-1,e=0;e<100&&1==(i=t.GetNextByte());e++){switch(this.slist[e].sName=t.GetNextString(),this.slist[e].iSeverId=t.GetNextInt(),this.slist[e].iStatus=t.GetNextByte(),this.btn_sever[e].sName=this.slist[e].sName,this.slist[e].iStatus){case 0:default:this.btn_sever[e].InitButton("选服按钮a");break;case 1:this.btn_sever[e].InitButton("选服按钮b");break;case 2:this.btn_sever[e].InitButton("选服按钮c");break;case 3:case 5:this.btn_sever[e].InitButton("选服按钮d")}this.slist[e].iSeverId==h.default.iLastSever&&(this.iCurrentSeverId=h.default.iLastSever),this.slist[e].bNew=!1}for(this.iSeverCount=e,-1==this.iCurrentSeverId&&this.iSeverCount>0&&(this.iCurrentSeverId=this.slist[0].iSeverId),e=0;e<100&&2==(i=t.GetNextByte());e++){switch(this.tjlist[e].sName=t.GetNextString(),this.tjlist[e].iSectorId=t.GetNextInt(),this.tjlist[e].iSeverId=t.GetNextInt(),this.tjlist[e].iStatus=t.GetNextByte(),this.btn_tj[e].sName=this.tjlist[e].sName,this.tjlist[e].iStatus){case 0:default:this.btn_tj[e].InitButton("选服按钮a");break;case 1:this.btn_tj[e].InitButton("选服按钮b");break;case 2:this.btn_tj[e].InitButton("选服按钮c");break;case 3:case 5:this.btn_tj[e].InitButton("选服按钮d")}this.tjlist[e].iSeverId==h.default.iLastSever&&(this.iCurrentSeverId=h.default.iLastSever)}for(this.iTJCount=e,e=0;e<100&&3==(i=t.GetNextByte());e++)for(a=t.GetNextInt(),i=0;i<this.iSeverCount;i++)if(this.slist[i].iSeverId==a){this.slist[i].bNew=!0;break}}},{key:"Draw",value:function(){var t,e;for(g.default.drawback(!1),d.default.local_frame2((n.default.SCRW-950)/2,(n.default.SCRH-560)/2,950,560),u.default.xani_nui1.DrawAnimaEx(n.default.OX+640,80,"背景框2",8,101,1,1,0,0,0),u.default.xani_nui1.DrawAnimaEx(n.default.OX+300,137,"推荐区标题",0,101,1,1,0,0,0),u.default.xani_local.DrawAnimaEx(n.default.OX+140,210,"分隔条",0,101,2.5,1,0,0,0),u.default.xani_local.DrawAnimaEx(n.default.OX+420,210,"分隔条",0,101,1,1,90,n.default.OX+420,210),t=-6;t<6;t++)u.default.xani_nui1.DrawAnimaEx(n.default.OX+640+76*t,180,"底纹",0,101,1,1,0,0,0);for(u.default.xani_local.DrawAnimaEx(n.default.OX+291,239,"方向指引",0,101,1,1,0,0,0),u.default.xani_local.DrawAnimaEx(n.default.OX+291,586,"方向指引",0,101,1,1,180,-1,-1),t=0;t<this.iSectorCount;t++)this.iSectorId[t]==this.iCurrentSectorId?(u.default.xani_nui1.DrawAnimaEx(this.btn_sector[t].iX,this.btn_sector[t].iY,"选区按钮2",0,101,1,1,0,0,0),this.btn_sector[t].DrawText(0,0)):this.btn_sector[t].Draw();for(this.se.Logic(),t=0;t<this.iSeverCount;t++)this.btn_sever[t].Draw(),this.slist[t].iSeverId==this.iCurrentSeverId&&this.se.Draw(this.btn_sever[t].iX-20,this.btn_sever[t].iY),this.slist[t].bNew&&u.default.xani_nui4.DrawAnima(this.btn_sever[t].iX+160-44+15,this.btn_sever[t].iY-15,"新服提示",0);for(t=0;t<this.iTJCount;t++)this.btn_tj[t].Draw(),this.tjlist[t].iSeverId==this.iCurrentSeverId&&this.se.Draw(this.btn_tj[t].iX-20,this.btn_tj[t].iY);t=n.default.OX+560,e=580,u.default.xani_nui1.DrawAnimaEx(t,e,"状态说明",0,101,1,1,0,0,0),u.default.xani_nui1.DrawAnimaEx(t+30,596,"状态说明",1,101,1,1,0,0,0),o.default.gi().DrawTextEx(t+50,596,"维护",4294967295,20,101,1,1,0,0,-2),t+=124,u.default.xani_nui1.DrawAnimaEx(t+30,596,"状态说明",2,101,1,1,0,0,0),o.default.gi().DrawTextEx(t+50,596,"良好",4294967295,20,101,1,1,0,0,-2),t+=124,u.default.xani_nui1.DrawAnimaEx(t+30,596,"状态说明",3,101,1,1,0,0,0),o.default.gi().DrawTextEx(t+50,596,"繁忙",4294967295,20,101,1,1,0,0,-2),t+=124,u.default.xani_nui1.DrawAnimaEx(t+30,596,"状态说明",4,101,1,1,0,0,0),o.default.gi().DrawTextEx(t+50,596,"火爆",4294967295,20,101,1,1,0,0,-2),this.btn_create.Draw(),this.btn_back.Draw(),_.default.bAutoGetInForDebug&&(this.iCurrentSeverId=this.slist[1].iSeverId,l.default.gi().s_GetRoleList(this.iCurrentSectorId,this.iCurrentSeverId),f.default.gi().PushStat(f.default.GS_LOADING1))}},{key:"ProcTouch",value:function(t,e,i){var a;if(this.btn_create.ProcTouch(t,e,i)){if(this.btn_create.bCheck()){for(a=0;a<this.iSeverCount;a++)if(this.iCurrentSeverId==this.slist[a].iSeverId){if(0!=this.slist[a].iStatus)return l.default.gi().s_GetRoleList(this.iCurrentSectorId,this.iCurrentSeverId),f.default.gi().PushStat(f.default.GS_LOADING1),!0;c.default.easymsg.AddMessage("服务器维护中，不能进入")}for(a=0;a<this.iTJCount;a++)if(this.iCurrentSeverId==this.tjlist[a].iSeverId){if(0!=this.tjlist[a].iStatus)return l.default.gi().s_GetRoleList(this.tjlist[a].iSectorId,this.iCurrentSeverId),f.default.gi().PushStat(f.default.GS_LOADING1),!0;c.default.easymsg.AddMessage("服务器维护中，不能进入")}c.default.easymsg.AddMessage("请先选中服务器")}return!0}if(this.btn_back.ProcTouch(t,e,i))return this.btn_back.bCheck()&&f.default.gi().PopStat(1),!0;for(a=0;a<this.iSectorCount;a++)this.btn_sector[a].ProcTouch(t,e,i)&&this.btn_sector[a].bCheck()&&this.iSectorId[a]!=this.iCurrentSectorId&&(f.default.gi().PushStat(f.default.GS_LOADING1),l.default.gi().s_GetSeverList(this.iSectorId[a]));for(a=0;a<this.iSeverCount;a++)this.btn_sever[a].ProcTouch(t,e,i)&&this.btn_sever[a].bCheck()&&(this.iCurrentSeverId=this.slist[a].iSeverId);for(a=0;a<this.iTJCount;a++)this.btn_tj[a].ProcTouch(t,e,i)&&this.btn_tj[a].bCheck()&&(this.iCurrentSeverId=this.tjlist[a].iSeverId);return!1}}]),SelectSever}();i.default=b,b.Open=function(t){for(;f.default.gi().iXStat==f.default.GS_LOADING1;)f.default.gi().PopStat(1);f.default.gi().iXStat==f.default.GS_LEADPAGE&&f.default.gi().PopStat(1),(f.default.gi().iXStat==f.default.GS_SELECTSEVER?f.default.gi().LastStat(0):f.default.gi().PushStat(f.default.GS_SELECTSEVER)).InitSeverList(t)}},{"../../config/GameData":4,"../../config/GmConfig":5,"../../engine/BaseClass":8,"../../engine/PackageTools":9,"../../engine/control/XButton":14,"../../engine/control/XButtonEx1":15,"../../engine/control/XButtonEx2":16,"../../engine/graphics/M3DFast":28,"../../engine/graphics/XAnima":30,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/GmProtocol":66,"../../engtst/mgm/History/XRecordFast":67,"../../engtst/mgm/XStat":70,"../../engtst/mgm/frame/DrawMode":72,"../../engtst/mgm/frame/message/EasyMessage":86,"../../engtst/mgm/gameing/fast/SystemOperate":124,"../../engtst/mgm/gameing/fuben/CreateFuBen":149,"../../mgm/mainmenu/MainMenu":303,"../../zero/Interface/PublicInterface":318,"./StarEffect":311,"./StartGame":312}],311:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../config/XDefine")),s=_interopRequireDefault(t("../../engtst/mgm/GmPlay"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var r=function(){function StarEffect(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,StarEffect)}return a(StarEffect,[{key:"Init3",value:function(t,e,i,a){var n;for(this.iType=3,this.iCount=a,this.starlist=new Array(this.iCount),n=0;n<this.iCount;n++)this.starlist[n]=new Int32Array(4);for(this.iX=t,this.iY=e,this.iR=i,this.iNowX=t,this.iNowY=e,n=0;n<this.iCount;n++)this.starlist[n][0]=-1;this.iStat=0,this.fJd=0}},{key:"Init1",value:function(t,e,i,a,n){var s;for(this.iType=1,this.iCount=n,this.starlist=new Array(this.iCount),this.iX=t,this.iY=e,this.iW=i,this.iH=a,this.iNowX=t,this.iNowY=e,s=0;s<this.iCount;s++)this.starlist[s]=new Int32Array(3),this.starlist[s][0]=-1;this.iStat=0}},{key:"Init2",value:function(t,e,i,a){var n;for(this.iType=2,this.iCount=a,this.starlist=new Array(this.iCount),this.iX=t,this.iY=e,this.iR=i,n=0;n<this.iCount;n++)this.starlist[n]=new Int32Array(3),this.starlist[n][0]=-1}},{key:"Logic",value:function(){var t,e,i,a,r;if(1==this.iType){for(e=0,i=2,t=0;t<this.iCount&&!(-1==this.starlist[t][0]&&(this.starlist[t][0]=12,this.starlist[t][1]=n.default.GetRand(0,2*e)+this.iNowX-e,this.starlist[t][2]=n.default.GetRand(0,2*e)+this.iNowY-e,++i>=2));t++);for(t=0;t<this.iCount;t++)this.starlist[t][0]>=0&&(this.starlist[t][0]++,this.starlist[t][0]>=40&&(this.starlist[t][0]=-1));switch(e=10,this.iStat){case 0:this.iNowY<this.iY+this.iH?this.iNowY+=e:this.iStat=1;break;case 1:this.iNowX<this.iX+this.iW?this.iNowX+=e:this.iStat=2;break;case 2:this.iNowY>this.iY?this.iNowY-=e:this.iStat=3;break;case 3:this.iNowX>this.iX?this.iNowX-=e:this.iStat=0}}else if(2==this.iType){if(s.default.iDelay%2==0)for(t=0;t<this.iCount;t++)if(-1==this.starlist[t][0]){this.starlist[t][0]=0;do{a=n.default.GetRand(0,2*this.iR)-this.iR,r=n.default.GetRand(0,2*this.iR)-this.iR}while(a*a+r*r>this.iR*this.iR);this.starlist[t][1]=a,this.starlist[t][2]=r/2;break}}else if(3==this.iType){for(this.fJd+=.15,e=0,i=0,t=0;t<this.iCount&&!(-1==this.starlist[t][0]&&(this.starlist[t][0]=16,this.starlist[t][1]=this.iX+Math.sin(this.fJd+.1*i)*(this.iR+i)+n.default.GetRand(0,2*e)-e,this.starlist[t][2]=this.iY+Math.cos(this.fJd+.1*i)*(this.iR+i)+n.default.GetRand(0,2*e)-e,this.starlist[t][3]=n.default.GetRand(0,360),++i>=1));t++);for(t=0;t<this.iCount;t++)this.starlist[t][0]>=0&&(this.starlist[t][0]++,this.starlist[t][0]>=40&&(this.starlist[t][0]=-1))}}},{key:"Draw",value:function(t,e){var i,a,r;if(1==this.iType){for(i=0;i<this.iCount;i++)this.starlist[i][0]>=0&&s.default.xani_nui1.DrawAnimaEx(t+this.starlist[i][1],e+this.starlist[i][2],"黄金星光",this.starlist[i][0]/2,101,1,1,0,0,0);for(i=0;i<this.iCount;i++)this.starlist[i][0]>=0&&s.default.xani_nui1.DrawAnimaEx(t+this.starlist[i][1],e+this.starlist[i][2],"星星心",this.starlist[i][0]/2,101,1,1,0,0,0)}else if(2==this.iType){if(s.default.iDelay%2==0)for(i=0;i<this.iCount;i++)if(-1==this.starlist[i][0]){this.starlist[i][0]=0;do{a=n.default.GetRand(0,2*this.iR)-this.iR,r=n.default.GetRand(0,2*this.iR)-this.iR}while(a*a+r*r>this.iR*this.iR);this.starlist[i][1]=a,this.starlist[i][2]=r/2;break}for(i=0;i<this.iCount;i++)this.starlist[i][0]>=0&&this.starlist[i][2]<0&&(s.default.xani_nui1.DrawAnimaEx(t+this.starlist[i][1],e+this.starlist[i][2],"单线",this.starlist[i][0]/2,101,1,.5,0,0,0),this.starlist[i][0]++,this.starlist[i][0]>=18&&(this.starlist[i][0]=-1))}else if(3==this.iType){for(i=0;i<this.iCount;i++)this.starlist[i][0]>=0&&s.default.xani_nui1.DrawAnimaEx(t+this.starlist[i][1],e+this.starlist[i][2],"黄金星光",this.starlist[i][0]/2,101,1,1,0,0,0);for(i=0;i<this.iCount;i++)this.starlist[i][0]>=0&&s.default.xani_nui1.DrawAnimaEx(t+this.starlist[i][1],e+this.starlist[i][2],"星星心",this.starlist[i][0]/2,101,1,1,this.starlist[i][3],t+this.starlist[i][1],e+this.starlist[i][2])}}},{key:"DrawFront",value:function(t,e){var i;if(2==this.iType)for(i=0;i<this.iCount;i++)this.starlist[i][0]>=0&&this.starlist[i][2]>=0&&(s.default.xani_nui1.DrawAnimaEx(t+this.starlist[i][1],e+this.starlist[i][2],"单线",this.starlist[i][0]/2,101,1,.5,0,0,0),this.starlist[i][0]++,this.starlist[i][0]>=18&&(this.starlist[i][0]=-1))}}]),StarEffect}();i.default=r},{"../../config/XDefine":7,"../../engtst/mgm/GmPlay":65}],312:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../zero/Interface/PublicInterface")),s=_interopRequireDefault(t("../../config/GmConfig")),r=_interopRequireDefault(t("../../engine/BaseClass")),o=(_interopRequireDefault(t("../../engine/control/XButton")),_interopRequireDefault(t("../../engine/control/XButtonEx2"))),u=_interopRequireDefault(t("../../engine/graphics/M3DFast")),l=_interopRequireDefault(t("../../engtst/mgm/GmPlay"));_interopRequireDefault(t("../../engtst/mgm/frame/DrawMode"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function StartGame(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,StartGame);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(StartGame.__proto__||Object.getPrototypeOf(StartGame)).call(this));return t.btn_startgame=new o.default(l.default.xani_local),t.btn_startgame.InitButton("登陆游戏"),t.btn_startgame.Move(s.default.SCRW/2,s.default.SCRH/2+200,50,50),t.btn_startgame.SetCheckRect(s.default.SCRW/2-100,s.default.SCRH/2+200-100,200,200),t.bLogined=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(StartGame,r.default),a(StartGame,[{key:"Draw",value:function(){drawback(!0),this.btn_startgame.Draw(),this.bLogined||(this.bLogined=!0,n.default.gi().Login())}},{key:"ProcTouch",value:function(t,e,i){return this.btn_startgame.ProcTouch(t,e,i)&&this.btn_startgame.bCheck()&&n.default.gi().Login(),!1}}]),StartGame}();i.default=f,f.res_bk=-1,f.drawback=function(t){f.res_bk<0&&(f.res_bk=u.default.gi().LoadFromFile("datapackage/others/back.png",-1,!0)),u.default.gi().DrawImageEx(0,0,0,f.res_bk,0,0,1280,720,101,s.default.SCRW/1280,1,0,0,0),t&&(u.default.gi().DrawImageEx(0,0,0,f.res_bk,0,720,1280,99,101,s.default.SCRW/1280,1,0,0,0),u.default.gi().DrawImageEx(0,(s.default.SCRW-1280)/2,620,f.res_bk,0,720,1280,99,101,s.default.SCRW/1280,1,180,s.default.SCRW/2,670))}},{"../../config/GmConfig":5,"../../engine/BaseClass":8,"../../engine/control/XButton":14,"../../engine/control/XButtonEx2":16,"../../engine/graphics/M3DFast":28,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/frame/DrawMode":72,"../../zero/Interface/PublicInterface":318}],313:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../mgm/mainmenu/MainMenu")),_interopRequireDefault(t("../../../mgm/newmainmenu/StartGame"))),s=(_interopRequireDefault(t("../../../zero/Interface/PublicInterface")),_interopRequireDefault(t("../../../config/GmConfig"))),r=_interopRequireDefault(t("../../../config/XDefine")),o=_interopRequireDefault(t("../../../engine/BaseClass")),u=_interopRequireDefault(t("../../../engine/control/XButton")),l=(_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"))),f=_interopRequireDefault(t("../../../engtst/mgm/XStat")),h=_interopRequireDefault(t("../../../config/GameData"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function FastGetin_local(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,FastGetin_local);var t,e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(FastGetin_local.__proto__||Object.getPrototypeOf(FastGetin_local)).call(this));for(e.MAXDESTORYUSER=5,e.pani=l.default.xani_ui,e.pm3f=l.default.xani_ui.pm3f,e.btn_history=new Array(e.MAXDESTORYUSER),e.btn_delete=new Array(e.MAXDESTORYUSER),t=0;t<e.MAXDESTORYUSER;t++)e.btn_history[t]=new u.default(l.default.xani_ui),e.btn_history[t].InitButton("主菜单按钮2"),e.btn_delete[t]=new u.default(l.default.xani_ui),e.btn_delete[t].sName="x",e.btn_delete[t].InitButton("中按钮1");return e.InitUserBtn(),e.btn_autogetin=new u.default(l.default.xani_ui),e.btn_autogetin.sName="渠道登陆",e.btn_autogetin.InitButton("主菜单按钮2"),e.btn_regist=new u.default(l.default.xani_ui),e.btn_regist.sName="注册帐号",e.btn_regist.InitButton("主菜单按钮2"),e.btn_login=new u.default(l.default.xani_ui),e.btn_login.sName="登录",e.btn_login.InitButton("主菜单按钮2"),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(FastGetin_local,o.default),a(FastGetin_local,[{key:"InitUserBtn",value:function(){var t;for(t=0;t<l.default.x_record.iUserCount;t++)this.btn_history[t].sName=l.default.x_record.sUser[t]}},{key:"Draw",value:function(){var t,e,i;for(n.default.drawback(!0),l.default.xani_local.DrawAnimaEx(240,150,"七国标题",0,101,1,1,0,0,0),this.InitUserBtn(),e=0,i=218,t=0;t<l.default.x_record.iUserCount;t++)this.btn_history[t].Move(s.default.SCRW/2-109,s.default.SCRH/2+60*e,i,50),this.btn_history[t].Draw(),this.btn_delete[t].Move(s.default.SCRW/2+109-51,s.default.SCRH/2+60*e+6,40,40),this.btn_delete[t].Draw(),e++;this.btn_login.Move(s.default.SCRW/2-109,s.default.SCRH/2+60*e,i,50),this.btn_login.Draw(),e++,this.btn_regist.Move(s.default.SCRW/2-109,s.default.SCRH/2+60*e,i,50),this.btn_regist.Draw(),h.default.bAutoGetInForDebug&&(f.default.gi().PopStat(1),f.default.gi().PushStat(f.default.GS_LOGIN))}},{key:"ProcTouch",value:function(t,e,i){var a,n;for(a=0;a<l.default.x_record.iUserCount;a++){if(this.btn_delete[a].ProcTouch(t,e,i)&&this.btn_delete[a].bCheck()){for(l.default.x_record.iUserCount--,n=a;n<l.default.x_record.iUserCount;n++)l.default.x_record.sUser[n]=l.default.x_record.sUser[n+1],l.default.x_record.sPass[n]=l.default.x_record.sPass[n+1];return this.InitUserBtn(),l.default.x_record.SaveTo(r.default.RECORDFILENAME),!0}if(this.btn_history[a].ProcTouch(t,e,i)&&this.btn_history[a].bCheck())return f.default.gi().PushStat(f.default.GS_LOGIN),f.default.gi().oCurrentView.in_user.sDetail=l.default.x_record.sUser[a],f.default.gi().oCurrentView.in_pass.sDetail=l.default.x_record.sPass[a],f.default.gi().oCurrentView.in_user.OpenInput(),f.default.gi().oCurrentView.in_pass.OpenInput(),f.default.gi().oCurrentView.chk_saveuser.bTrue=l.default.x_record.bSaveUser,f.default.gi().oCurrentView.chk_savepass.bTrue=l.default.x_record.bSavePass,!0}return this.btn_login.ProcTouch(t,e,i)&&this.btn_login.bCheck()&&(f.default.gi().PushStat(f.default.GS_LOGIN),f.default.gi().oCurrentView.in_user.sDetail="",f.default.gi().oCurrentView.in_pass.sDetail="",f.default.gi().oCurrentView.in_user.OpenInput(),f.default.gi().oCurrentView.in_pass.OpenInput(),f.default.gi().oCurrentView.chk_saveuser.bTrue=l.default.x_record.bSaveUser,f.default.gi().oCurrentView.chk_savepass.bTrue=l.default.x_record.bSavePass),this.btn_regist.ProcTouch(t,e,i)&&this.btn_regist.bCheck()&&(f.default.gi().PushStat(f.default.GS_REGIST),f.default.gi().oCurrentView.in_user.sDetail="",f.default.gi().oCurrentView.in_pass.sDetail=""),!1}}]),FastGetin_local}();i.default=d},{"../../../config/GameData":4,"../../../config/GmConfig":5,"../../../config/XDefine":7,"../../../engine/BaseClass":8,"../../../engine/control/XButton":14,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/XStat":70,"../../../mgm/mainmenu/MainMenu":303,"../../../mgm/newmainmenu/StartGame":312,"../../../zero/Interface/PublicInterface":318}],314:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../../mgm/mainmenu/MainMenu")),_interopRequireDefault(t("../../../mgm/newmainmenu/StartGame"))),s=_interopRequireDefault(t("../../../config/GameData")),r=_interopRequireDefault(t("../../../config/GmConfig")),o=_interopRequireDefault(t("../../../config/XDefine")),u=_interopRequireDefault(t("../../../engine/BaseClass")),l=_interopRequireDefault(t("../../../engine/control/XButton")),f=_interopRequireDefault(t("../../../engine/control/XCheckBox")),h=_interopRequireDefault(t("../../../engine/control/XInput")),d=(_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/GmPlay"))),c=_interopRequireDefault(t("../../../engtst/mgm/GmProtocol")),m=_interopRequireDefault(t("../../../engtst/mgm/XStat")),g=_interopRequireDefault(t("../../../engtst/mgm/frame/message/EasyMessage")),_=_interopRequireDefault(t("./Regist_local"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function Login_local(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Login_local);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Login_local.__proto__||Object.getPrototypeOf(Login_local)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.in_user=new h.default(e.pani),e.in_user.Move(r.default.SCRW/2-100,r.default.SCRH/2-100,200,50),e.in_user.sDetail="user",e.in_user.OpenInput(),e.in_pass=new h.default(e.pani),e.in_pass.Move(r.default.SCRW/2-100,r.default.SCRH/2-20,200,50),e.in_pass.sDetail="pass",e.in_pass.OpenInput(),e.btn_login=new l.default(t),e.btn_login.sName="确定登录",e.btn_login.Move(r.default.SCRW/2-70,r.default.SCRH/2+60,140,50),e.btn_login.InitButton("主菜单按钮2"),e.chk_saveuser=new f.default(t),e.chk_saveuser.Move(r.default.SCRW/2+120,r.default.SCRH/2-100+5,40,40),e.chk_saveuser.sDetail="",e.chk_saveuser.InitBox("复选框"),e.chk_savepass=new f.default(t),e.chk_savepass.Move(r.default.SCRW/2+120,r.default.SCRH/2-20+5,40,40),e.chk_savepass.sDetail="",e.chk_savepass.InitBox("复选框"),e.iErrorDelay=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Login_local,u.default),a(Login_local,[{key:"Draw",value:function(){var t,e;n.default.drawback(!0),d.default.xani_local.DrawAnimaEx(240,150,"七国标题",0,101,1,1,0,0,0),t=r.default.SCRW/2-100,e=200,d.default.xani_ui.DrawAnimaEx(t-70,e+55,"账号密码",0,101,1,1,0,0,0),d.default.xani_ui.DrawAnimaEx(t+30,e+50,"账号密码",2,101,1,1,0,0,0),this.in_user.Move(t+30,e+50,215,47),this.in_user.DrawText(),this.chk_saveuser.Move(t+30+215+10,e+53,40,40),this.chk_saveuser.Draw(),e=300,d.default.xani_ui.DrawAnimaEx(t-70,e+55,"账号密码",1,101,1,1,0,0,0),d.default.xani_ui.DrawAnimaEx(t+30,e+50,"账号密码",2,101,1,1,0,0,0),this.in_pass.Move(t+30,e+50,215,47),this.in_pass.DrawText(),this.chk_savepass.Move(t+30+215+10,e+53,40,40),this.chk_savepass.Draw(),this.in_user.onscr(),this.in_pass.onscr(),e=450,this.btn_login.Move(r.default.SCRW/2-109,e,218,50),this.btn_login.Draw(),s.default.bAutoGetInForDebug&&(m.default.gi().PopStat(1),c.default.gi().s_Login(this.in_user.sDetail,this.in_pass.sDetail),m.default.gi().PushStat(m.default.GS_LOADING1))}},{key:"ProcTouch",value:function(t,e,i){return this.in_user.ProcTouch(t,e,i),this.in_pass.ProcTouch(t,e,i),this.chk_saveuser.ProcTouch(t,e,i),this.chk_savepass.ProcTouch(t,e,i),this.btn_login.ProcTouch(t,e,i)&&this.btn_login.bCheck()&&(_.default.bCheckString(this.in_user.sDetail,4,24)?_.default.bCheckString(this.in_pass.sDetail,4,24)?(c.default.gi().s_Login(this.in_user.sDetail,this.in_pass.sDetail),m.default.gi().PushStat(m.default.GS_LOADING1),this.chk_saveuser.bTrue&&(d.default.x_record.sUser[0]=this.in_user.sDetail,this.chk_savepass.bTrue?d.default.x_record.sPass[0]=this.in_pass.sDetail:d.default.x_record.sPass[0]="",d.default.x_record.iUserCount=1,d.default.x_record.bSaveUser=this.chk_saveuser.bTrue,d.default.x_record.bSavePass=this.chk_savepass.bTrue,d.default.x_record.SaveTo(o.default.RECORDFILENAME))):(this.iErrorDelay=30,g.default.easymsg.AddMessage("密码格式有误"),this.sErrorDetail="密码格式有误"):(this.iErrorDelay=30,g.default.easymsg.AddMessage("帐号格式有误"),this.sErrorDetail="帐号格式有误")),!1}}]),Login_local}();i.default=p},{"../../../config/GameData":4,"../../../config/GmConfig":5,"../../../config/XDefine":7,"../../../engine/BaseClass":8,"../../../engine/control/XButton":14,"../../../engine/control/XCheckBox":17,"../../../engine/control/XInput":18,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmPlay":65,"../../../engtst/mgm/GmProtocol":66,"../../../engtst/mgm/XStat":70,"../../../engtst/mgm/frame/message/EasyMessage":86,"../../../mgm/mainmenu/MainMenu":303,"../../../mgm/newmainmenu/StartGame":312,"./Regist_local":315}],315:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../../../config/GmConfig")),s=_interopRequireDefault(t("../../../engine/BaseClass")),r=_interopRequireDefault(t("../../../engine/control/XButton")),o=_interopRequireDefault(t("../../../engine/control/XInput")),u=(_interopRequireDefault(t("../../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../../engine/graphics/XAnima")),_interopRequireDefault(t("../../../engtst/mgm/GmProtocol"))),l=_interopRequireDefault(t("../../../engtst/mgm/XStat")),f=_interopRequireDefault(t("../../../engtst/mgm/frame/message/EasyMessage")),h=_interopRequireDefault(t("../../../engine/gbk"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function Regist_local(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Regist_local);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(Regist_local.__proto__||Object.getPrototypeOf(Regist_local)).call(this));return e.pani=t,e.pm3f=t.pm3f,e.in_user=new o.default(e.pani),e.in_user.Move(n.default.SCRW/2-100,n.default.SCRH/2-100,300,50),e.in_user.sDetail="user",e.in_pass=new o.default(e.pani),e.in_pass.Move(n.default.SCRW/2-100,n.default.SCRH/2-20,300,50),e.in_pass.sDetail="pass",e.btn_regist=new r.default(t),e.btn_regist.sName="确定注册",e.btn_regist.Move(n.default.SCRW/2-70,n.default.SCRH/2+80,140,50),e.btn_regist.InitButton("大按钮4"),e.iErrorDelay=0,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Regist_local,s.default),a(Regist_local,[{key:"Draw",value:function(){this.pm3f.FillRect_2D(0,0,n.default.SCRW,n.default.SCRH,4280295456),this.pm3f.DrawText(0,0,"注册帐号",4294967295),this.pm3f.DrawText(n.default.SCRW/2-200,n.default.SCRH/2-100+10,"账号:",4294967295),this.pm3f.DrawText(n.default.SCRW/2-200,n.default.SCRH/2-20+10,"密码:",4294967295),this.in_user.Draw(),this.in_pass.Draw(),this.btn_regist.Draw(),this.in_user.onscr(),this.in_pass.onscr()}},{key:"ProcTouch",value:function(t,e,i){return this.in_user.ProcTouch(t,e,i),this.in_pass.ProcTouch(t,e,i),this.btn_regist.ProcTouch(t,e,i)&&this.btn_regist.bCheck()&&(Regist_local.bCheckString(this.in_user.sDetail,4,24)?Regist_local.bCheckString(this.in_pass.sDetail,4,24)?(u.default.gi().s_Regist(this.in_user.sDetail,this.in_pass.sDetail),l.default.gi().PushStat(l.default.GS_LOADING1)):(this.iErrorDelay=30,f.default.easymsg.AddMessage("密码格式有误"),this.sErrorDetail="密码格式有误"):(this.iErrorDelay=30,f.default.easymsg.AddMessage("帐号格式有误"),this.sErrorDetail="帐号格式有误")),!1}}]),Regist_local}();i.default=d,d.bCheckString=function(t,e,i){var a,n=h.default.utf8_to_gb2312a(t);if(n.length<e||n.length>i)return!1;for(a=0;a<n.length;a++)if(!(n[a]>="a".charCodeAt(0)&&n[a]<="z".charCodeAt(0)||n[a]>="A".charCodeAt(0)&&n[a]<="Z".charCodeAt(0)||n[a]>="0".charCodeAt(0)&&n[a]<="9".charCodeAt(0)))return!1;return!0}},{"../../../config/GmConfig":5,"../../../engine/BaseClass":8,"../../../engine/control/XButton":14,"../../../engine/control/XInput":18,"../../../engine/gbk":24,"../../../engine/graphics/M3DFast":28,"../../../engine/graphics/XAnima":30,"../../../engtst/mgm/GmProtocol":66,"../../../engtst/mgm/XStat":70,"../../../engtst/mgm/frame/message/EasyMessage":86}],316:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=_interopRequireDefault(t("../engtst/mgm/GmPlay")),s=_interopRequireDefault(t("../engine/XTouchManager")),r=(_interopRequireDefault(t("../config/XDefine")),_interopRequireDefault(t("../engine/graphics/M3DFast"))),o=_interopRequireDefault(t("../config/GmConfig")),u=_interopRequireDefault(t("../engtst/mgm/gameing/fast/SystemOperate")),l=_interopRequireDefault(t("../engine/TouchManager")),f=_interopRequireDefault(t("../engine/control/XInput")),h=_interopRequireDefault(t("../engine/PackageTools")),d=_interopRequireDefault(t("../zero/Interface/PublicInterface"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var c=function(){function XOLE(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,XOLE)}return a(XOLE,[{key:"SetError",value:function(t){this.iErrorDelay=150,this.sErrorDetail=t}},{key:"Init",value:function(){f.default.make_handle(),Laya.timer.frameLoop(3,this,this.OnTimer),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,_mouse_down_func),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,_mouse_move_func),Laya.stage.on(Laya.Event.MOUSE_UP,this,_mouse_up_func),Laya.stage.on(Laya.Event.FOCUS,this,_onFocus),Laya.stage.on(Laya.Event.BLUR,this,_onBlur),s.default.gi().Init()}},{key:"OnTimer",value:function(){f.default.HandleLogic2(),d.default.gi().Logic(),XOLE.iDelay++,o.default.SYSW=Laya.stage.width,o.default.SYSH=Laya.stage.height,o.default.OX=(o.default.SYSW-1280)/2,u.default.BASEW=Laya.stage.width,u.default.BASEH=Laya.stage.height,u.default.SetScreenMode(6),r.default.gi().Clear(),n.default.gi().GmTimer(),d.default.gi().DrawBoundRect(),f.default.HandleLogic()}},{key:"get_file_string",value:function(t){var e=this.get_file_data(t);return e.byteToString(e.databuf,e.iLength)}},{key:"get_file_data",value:function(t){for(var e=0;e<XOLE.data_all.length;e+=2)if(t==XOLE.data_all[e]){var i=h.default.gi();return i.GetData2(XOLE.data_all[e+1]),i.Decode_base64(),i}return null}}]),XOLE}();function _mouse_down_func(){l.default.gi().touch_down(0,Laya.stage.mouseX,Laya.stage.mouseY)}function _mouse_move_func(){l.default.gi().touch_move(Laya.stage.mouseX,Laya.stage.mouseY)}function _mouse_up_func(){l.default.gi().touch_up(0,Laya.stage.mouseX,Laya.stage.mouseY)}function _onFocus(){}function _onBlur(){}i.default=c,c._float=function(t,e){var i=(c.iDelay+e)%(2*t);return i<t?i:2*t-i},c.data_all=null,c.iSlowRate=1,c.iSlowDelay=0,c.iDelay=0,c.pole=null,c.gi=function(){return null==c.pole&&(c.pole=new c),c.pole}},{"../config/GmConfig":5,"../config/XDefine":7,"../engine/PackageTools":9,"../engine/TouchManager":10,"../engine/XTouchManager":11,"../engine/control/XInput":18,"../engine/graphics/M3DFast":28,"../engtst/mgm/GmPlay":65,"../engtst/mgm/gameing/fast/SystemOperate":124,"../zero/Interface/PublicInterface":318}],317:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function GameVersion(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,GameVersion)};i.default=a,a.QUDAO=0,a.bDebugMode=!0,a.bAutoUpdateAPK=!0},{}],318:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,i){return e&&defineProperties(t.prototype,e),i&&defineProperties(t,i),t}}(),n=(_interopRequireDefault(t("../../config/GmConfig")),_interopRequireDefault(t("../../config/XDefine"))),s=(_interopRequireDefault(t("../../engine/PackageTools")),_interopRequireDefault(t("../../engine/graphics/M3DFast")),_interopRequireDefault(t("../../engtst/mgm/GmPlay"))),r=(_interopRequireDefault(t("../../System/Interface/uc/main")),_interopRequireDefault(t("../../engtst/mgm/GmProtocol")));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var o=function(){function PublicInterface(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PublicInterface),this.iStat=0,this.iBx=-1,this.iLHX=-1,1==PublicInterface.QUDAO){var t=wx.getMenuButtonBoundingClientRect(),e=wx.getSystemInfoSync();this.iScreenW=e.windowWidth,this.iScreenH=e.windowHeight,this.iBx=t.left*Laya.stage.width/this.iScreenW,this.iBy=t.top*Laya.stage.height/this.iScreenH,this.iBw=t.width*Laya.stage.width/this.iScreenW,this.iBh=t.height*Laya.stage.height/this.iScreenH;var i=e.safeArea;this.iLHX=i.left}}return a(PublicInterface,[{key:"bInBound",value:function(t,e,i,a){return!(this.iBx<0)&&(!(t+i<this.iBx)&&(!(this.iBx+this.iBw<t)&&(!(e+a<this.iBy)&&!(this.iBy+this.iBh<e))))}},{key:"DrawBoundRect",value:function(){}},{key:"Logic",value:function(){s.default.bConnected&&(s.default.gi().iLoadStat<7||1==PublicInterface.QUDAO&&this.Logic_wx())}},{key:"Logic_wx",value:function(){switch(this.iStat){case 0:wx.login({success:function(t){t.code?(n.default.sop("wx login success"),r.default.gi().s_Login_xyx(PublicInterface.QUDAO,t.code,"")):n.default.sop("登录失败！"+t.errMsg)}}),this.iStat=1,this.iTimeOut=0;break;case 1:this.iTimeOut++,this.iTimeOut>=90&&(this.iStat=0)}}},{key:"Init",value:function(){}},{key:"Pause",value:function(){}},{key:"_Login",value:function(){}},{key:"Pay",value:function(t){}},{key:"_Exit",value:function(){}},{key:"Exit",value:function(){}},{key:"Login",value:function(){}},{key:"OnReceive",value:function(t){}},{key:"mta_record",value:function(t,e,i){t}},{key:"InitFloatButton",value:function(){}},{key:"Draw",value:function(){}},{key:"ProcTouch",value:function(t,e,i){}},{key:"QUDAO",value:function(){return GameVersion.QUDAO}}]),PublicInterface}();i.default=o,o.pp=null,o.gi=function(){return null==o.pp&&(o.pp=new o),o.pp},o.QUDAO=0,"undefined"!=typeof wx&&(o.QUDAO=1)},{"../../System/Interface/uc/main":3,"../../config/GmConfig":5,"../../config/XDefine":7,"../../engine/PackageTools":9,"../../engine/graphics/M3DFast":28,"../../engtst/mgm/GmPlay":65,"../../engtst/mgm/GmProtocol":66}]},{},[2]);