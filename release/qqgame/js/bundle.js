var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function __(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}();!function(){return function r(e,t,i){function o(n,s){if(!t[n]){if(!e[n]){var u="function"==typeof require&&require;if(!s&&u)return u(n,!0);if(a)return a(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var f=t[n]={exports:{}};e[n][0].call(f.exports,function(t){return o(e[n][1][t]||t)},f,f.exports,r,e,t,i)}return t[n].exports}for(var a="function"==typeof require&&require,n=0;n<i.length;n++)o(i[n]);return o}}()({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=function(){function GameConfig(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GameConfig)}return a(GameConfig,null,[{key:"init",value:function(){Laya.ClassUtils.regClass}}]),GameConfig}();i.default=n,n.width=1280,n.height=720,n.scaleMode="fixedheight",n.screenMode="horizon",n.screenMode="none",n.alignV="top",n.alignH="left",n.sceneRoot="",n.debug=!1,n.stat=!1,n.physicsDebug=!1,n.exportSceneToJson=!0,n.init()},{}],2:[function(e,t,i){"use strict";var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./GameConfig")),r=_interopRequireDefault(e("./engine/XOLE"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}new(function(){function Main(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Main),window.Laya3D?Laya3D.init(n.default.width,n.default.height):Laya.init(n.default.width,n.default.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=n.default.scaleMode,Laya.stage.screenMode=n.default.screenMode,Laya.stage.alignV=n.default.alignV,Laya.stage.alignH=n.default.alignH,Laya.stage.frameRate="fast",Laya.URL.exportSceneToJson=n.default.exportSceneToJson,(n.default.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),n.default.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),n.default.stat&&Laya.Stat.show(0,50),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return a(Main,[{key:"onVersionLoaded",value:function(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}},{key:"onConfigLoaded",value:function(){r.default.gi().Init()}}]),Main}())},{"./GameConfig":1,"./engine/XOLE":9}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./XDefine")),r=_interopRequireDefault(e("./XOLE"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s=function(){function PackageTools(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PackageTools),null==e&&(e=4194304),this.MAXDATALENGTH=e,this.databuf=new ArrayBuffer(this.MAXDATALENGTH),this.pdataview=new DataView(this.databuf),this.iLength=0;var t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/","="];this._BASE64CODE=new ArrayBuffer(65),this._BASE64DECODE=new ArrayBuffer(256);for(var i=0;i<65;i++)this._BASE64CODE[i]=t[i].charCodeAt(0),this._BASE64DECODE[this._BASE64CODE[i]]=i;this.obd=new ArrayBuffer(65536)}return a(PackageTools,[{key:"SetData",value:function(e,t){for(var i=0;i<t;i++)this.databuf[i]=e[i];this.iLength=t,this.iOffset=0}},{key:"GetData2",value:function(e){this.iLength=e.length;for(var t=0;t<this.iLength;t++)this.databuf[t]=e.charCodeAt(t),this.databuf[t]=255&this.databuf[t];this.iOffset=0,this.bLoadSuccess=!0,null!=this._plsbackcallfunc&&this._plsbackcallfunc()}},{key:"GetData",value:function(e){if(null==e)return n.default.sop("load failed "+this.load_fn),r.default.gi().SetError(this.load_fn),void this.InitDataFromFile(this.load_fn,this._plsbackcallfunc);n.default.sop("load success "+this.load_fn),n.default.sop("len : "+e.length+","+e.substr(0,10)),this.iLength=e.length;for(var t=0;t<this.iLength;t++)this.databuf[t]=e.charCodeAt(t),this.databuf[t]=255&this.databuf[t];this.iOffset=0,this.bLoadSuccess=!0,null!=this._plsbackcallfunc&&this._plsbackcallfunc()}},{key:"GetProc",value:function(e){n.default.sop("Loading Proc : "+e)}},{key:"InitDataFromFile",value:function(e,t){this._plsbackcallfunc=t,this.bLoadSuccess=!1,this.load_fn=e,n.default.sop("InitDataFromFile "+e),Laya.loader.load(n.default.BASE_URL+e,Laya.Handler.create(this,this.GetData),Laya.Handler.create(this,this.GetProc),Laya.Loader.TEXT)}},{key:"Encode_base64",value:function(){var e,t,i=(this.iLength-this.iLength%3)/3;this.iLength%3!=0&&i++,i*=4,t=0;var a=this.obd;for(e=0;e<a.length;e++)a[e]=0;for(e=0;e<this.iLength;e++)switch(e%3){case 0:a[t]=this.databuf[e]>>2,a[++t]=(3&this.databuf[e])<<4;break;case 1:a[t]=a[t]|this.databuf[e]>>4,a[++t]=(15&this.databuf[e])<<2;break;case 2:a[t]=a[t]|this.databuf[e]>>6,a[++t]=63&this.databuf[e],t++}for(e=0;e<i;e++)e>t?this.databuf[e]=61:a[e]<64?this.databuf[e]=this._BASE64CODE[a[e]]:printf("error");this.iLength=i}},{key:"Decode_base64",value:function(){if(this.iLength%4==0){var e,t=0,i=0;for(e=0;e<this.iLength;e++){if(this.databuf[e]===this._BASE64CODE[64])return void(this.iLength=t);switch(i=this._BASE64DECODE[this.databuf[e]],e%4){case 0:this.databuf[t]=i<<2;break;case 1:this.databuf[t]|=i>>4,t++,this.databuf[t]=(15&i)<<4;break;case 2:this.databuf[t]|=i>>2,t++,this.databuf[t]=(3&i)<<6;break;case 3:this.databuf[t]|=i,t++}}for(this.iLength=t,e=0;e<t;e++)this.databuf[e]=255&this.databuf[e]}}},{key:"_GetNextString",value:function(){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress&&this.databuf[this.iOffset++]!==PackageTools.PTDT_STRING)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;if(this.obi=this.databuf[this.iOffset++],(this.obi<0||this.obi>256)&&(this.obi=0),this.obi>0){for(var e=new Int8Array(this.obi),t=0;t<this.obi;t++)e[t]=this.databuf[this.iOffset+t];this.obs=this.byteToString(e)}else this.obs="";return this.iOffset+=this.obi,this.obi}},{key:"str2UTF8",value:function(e){var t,i,a=new Array;t=e.length;for(var n=0;n<t;n++)(i=e.charCodeAt(n))>=65536&&i<=1114111?(a.push(i>>18&7|240),a.push(i>>12&63|128),a.push(i>>6&63|128),a.push(63&i|128)):i>=2048&&i<=65535?(a.push(i>>12&15|224),a.push(i>>6&63|128),a.push(63&i|128)):i>=128&&i<=2047?(a.push(i>>6&31|192),a.push(63&i|128)):a.push(255&i);return a}},{key:"unicode_to_utf8",value:function(e,t){e<0&&(e=256+e),t<0&&(t=256+t);var i=e<<8|t,a="";return a+=i<128?String.fromCharCode(i):i<2048?String.fromCharCode(192+(i>>6),128+(63&i)):i<65536?String.fromCharCode(224+(i>>12),128+(i>>6&63),128+(63&i)):String.fromCharCode(240+(i>>18),128+(i>>12&63),128+(i>>6&63),128+(63&i))}},{key:"StringToBuffer",value:function(e,t){for(var i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return i}},{key:"BufferToString",value:function(e,t){for(var i=new Int8Array(t),a=0;a<t;a++)i[a]=e[a];return this.byteToString(i)}},{key:"byteToString",value:function(e){var t,i,a,n,r,s;for(t="",a=e.length,i=0;i<a;)switch((n=e[i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(n);break;case 12:case 13:r=e[i++],t+=String.fromCharCode((31&n)<<6|63&r);break;case 14:r=e[i++],s=e[i++],t+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&s)<<0)}return t}},{key:"InsertString",value:function(e){var t=this.str2UTF8(e);if(this.iOffset<0||this.iOffset+t.length+2>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var i=this.iOffset;this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_STRING),this.databuf[this.iOffset++]=t.length;for(var a=0;a<t.length;a++)this.databuf[this.iOffset++]=t[a];return this.iOffset-i}},{key:"GetNextString",value:function(){return this._GetNextString(),this.obs}},{key:"InsertInt",value:function(e){if(this.iOffset<0||this.iOffset+5>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var t=this.iOffset;return this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_INT),this.databuf[this.iOffset++]=e>>24&255,this.databuf[this.iOffset++]=e>>16&255,this.databuf[this.iOffset++]=e>>8&255,this.databuf[this.iOffset++]=255&e,this.iOffset-t}},{key:"GetNextInt",value:function(){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress){if(this.databuf[this.iOffset]!=PackageTools.PTDT_INT)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;this.iOffset++}return this.obi=this.databuf[this.iOffset]<<24|this.databuf[this.iOffset+1]<<16|this.databuf[this.iOffset+2]<<8|this.databuf[this.iOffset+3],this.iOffset+=4,this.obi}},{key:"InsertByte",value:function(e){if(this.iOffset<0||this.iOffset+2>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var t=this.iOffset;return this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_BYTE),this.databuf[this.iOffset++]=255&e,this.iOffset-t}},{key:"GetNextByte",value:function(){if(this.iOffset<0||this.iOffset+2>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress){if(this.databuf[this.iOffset]!=PackageTools.PTDT_BYTE)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;this.iOffset++}return this.obi=this.databuf[this.iOffset],this.iOffset++,this.obi}},{key:"InsertShort",value:function(e){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var t=this.iOffset;return this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_SHORT),this.databuf[this.iOffset++]=e>>8&255,this.databuf[this.iOffset++]=255&e,this.iOffset-t}},{key:"GetNextShort",value:function(){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress){if(this.databuf[this.iOffset]!=PackageTools.PTDT_SHORT)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;this.iOffset++}return this.obi=this.databuf[this.iOffset]<<8|this.databuf[this.iOffset+1],this.iOffset+=2,this.obi}},{key:"InsertData",value:function(e,t){if(this.iOffset<0||this.iOffset+t+2>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var i=this.iOffset;this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_DATA),this.databuf[this.iOffset++]=t>>8&255,this.databuf[this.iOffset++]=255&t;for(var a=0;a<t;a++)this.databuf[this.iOffset++]=e[a];return this.iOffset-i}},{key:"GetNextData",value:function(){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress&&this.databuf[this.iOffset++]!=PackageTools.PTDT_DATA)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;this.obi=this.databuf[this.iOffset]<<8|this.databuf[this.iOffset+1],this.iOffset+=2;for(var e=new Uint8Array(this.obi),t=0;t<this.obi;t++)this.obd[t]=this.databuf[this.iOffset+t],e[t]=this.databuf[this.iOffset+t];return this.obs=this.byteToString(e),this.iOffset+=this.obi,this.obi}},{key:"InsertFloat",value:function(e){if(this.iOffset<0||this.iOffset+5>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var t=this.iOffset;this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_FLOAT),this.pdataview.setFloat32(0,e,!0);for(var i=0;i<4;i++)this.databuf[this.iOffset++]=this.pdataview.getInt8(i);return this.iOffset-t}},{key:"GetNextFloat",value:function(){if(this.iOffset<0||this.iOffset+5>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress&&this.databuf[this.iOffset++]!=PackageTools.PTDT_FLOAT)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;for(var e=0;e<4;e++)this.pdataview.setInt8(e,this.databuf[this.iOffset+e]);return this.obf=this.pdataview.getFloat32(0,!0),this.iOffset+=4,this.obf}},{key:"InsertLong",value:function(e){if(this.iOffset<0||this.iOffset+5>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;var t,i=this.iOffset;this.bCompress||(this.databuf[this.iOffset++]=PackageTools.PTDT_LONG);for(var a=0;a<8;a++)t=e%256,this.databuf[this.iOffset+7-a]=t,e-=t,e/=256;return this.iOffset+=8,this.iOffset-i}},{key:"GetNextLong",value:function(){if(this.iOffset<0||this.iOffset+3>this.MAXDATALENGTH)return this.iErrorID=PackageTools.PTEID_OUTOFMEMORY,0;if(!this.bCompress){if(this.databuf[this.iOffset]!=PackageTools.PTDT_LONG)return this.iErrorID=PackageTools.PTEID_TYPEMISMATCH,0;this.iOffset++}this.obi=0;var e,t=1;for(e=0;e<8;e++)this.obi+=this.databuf[this.iOffset+7-e]*t,t*=256;return this.iOffset+=8,this.obi}}]),PackageTools}();i.default=s,s.PTEID_NON=0,s.PTEID_OUTOFMEMORY=1,s.PTEID_TYPEMISMATCH=2,s.PTDT_BYTE=1,s.PTDT_SHORT=2,s.PTDT_INT=3,s.PTDT_STRING=4,s.PTDT_DATA=5,s.PTDT_FLOAT=6,s.PTDT_LONG=7,s.pls=null,s.gi=function(){return null==s.pls&&(s.pls=new s),s.pls}},{"./XDefine":4,"./XOLE":9}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();_interopRequireDefault(e("./graphic/M2DFast")),_interopRequireDefault(e("./XMD5")),_interopRequireDefault(e("./interface/BridgeInterface"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function TIME_STAMP(){_classCallCheck(this,TIME_STAMP)}return a(TIME_STAMP,[{key:"Init",value:function(e){return null==e&&(e=new Date),this.iHour=e.getHours(),this.iMinute=e.getMinutes(),this.iSecond=e.getSeconds(),this}},{key:"Second1",value:function(){return 60*(60*this.iHour+this.iMinute)+this.iSecond}}]),TIME_STAMP}(),r=function XDefine(){_classCallCheck(this,XDefine)};i.default=r,n.pp=null,r.tm=function(){return null==n.pp&&(n.pp=new n),n.pp},r._debuglist=null,r.sop=function(e){null==r._debuglist&&(r._debuglist=new Array(20));for(var t=20;t>0;t--)r._debuglist[t]=r._debuglist[t-1];r._debuglist[0]=e,console.log(e)},r.showdebug=function(){},r.distance=function(e,t,i,a){return Math.sqrt((e-i)*(e-i)+(t-a)*(t-a))},r.grnd=function(e,t){return e>=t?e:Math.floor(Math.random()*(t-e+1))+e},r.bInRect=function(e,t,i,a,n,r){return!(e<i)&&(!(e>i+n)&&(!(t<a)&&!(t>a+r)))},r.color=function(e,t,i){return e<<16|t<<8|i},r.iSecond=0,r.date=null,r.iOldDay=-1,r.bDayChanged=!1,r.InitSecond=function(){return r.date=new Date,r.tm().Init(r.date),r.iSecond=Math.round(r.date.getTime()/1e3),r.iDay=r.date.getDate(),-1==r.iOldDay?r.iOldDay=r.iDay:r.iOldDay!=r.iDay&&(r.bDayChanged=!0,r.iOldDay=r.iDay),r.iSecond},r.GetSecond=function(){return r.iSecond},r.FormatSecond=function(e){var t=e%60,i=parseInt(e/60)%60,a=parseInt(i/60),n="";return a>0&&(n+=0==a?"00":a<10?"0"+a:a,n+=":"),n+=0==i?"00":i<10?"0"+i:i,n+=":",n+=0==t?"00":t<10?"0"+t:t},r.KeepDot=function(e,t){var i=Math.pow(10,t);return 0==i&&(i=1e-7),Math.round(e*i)/i},r.BASE_URL="",r.BASE_LOGIN="wss://login-jsbxs.oclkj.com:12345",r.VER=1,r.FormatData=function(e){return new Date(1e3*parseInt(e)).toLocaleString().replace(/:\d{1,2}$/," ")}},{"./XMD5":6,"./graphic/M2DFast":27,"./interface/BridgeInterface":29}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=e("./XDefine"),s=(a=r)&&a.__esModule?a:{default:a};var o=function(){function XDrawOrder(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XDrawOrder),this.iCount=0,this.pobj=new Array,this.power=new Array,this.iTotalPower=0}return n(XDrawOrder,[{key:"Clear",value:function(){this.iCount=0,this.iTotalPower=0}},{key:"Push",value:function(e,t){null==t&&(t=1),this.pobj[this.iCount]=e,this.power[this.iCount]=t,this.iTotalPower+=t,this.iCount++}},{key:"RandPower",value:function(e,t){for(var i=s.default.grnd(0,this.iTotalPower-1),a=0,n=0;n<this.iCount;n++)if((a+=this.power[n])>i)return this.pobj[n]==e||this.pobj[n]==t?this.RandPower(e,t):this.pobj[n];return this.pobj[0]}},{key:"Rand",value:function(e,t,i){for(var a;;)if((a=this.pobj[s.default.grnd(0,this.iCount-1)])!=e&&a!=t&&a!=i)return a}},{key:"Order",value:function(){var e,t,i;for(e=0;e<this.iCount-1;e++)for(t=e+1;t<this.iCount;t++)this.pobj[e].iY>this.pobj[t].iY&&(i=this.pobj[e],this.pobj[e]=this.pobj[t],this.pobj[t]=i)}},{key:"Draw",value:function(){var e;for(e=0;e<this.iCount;e++)this.pobj[e].Draw()}}]),XDrawOrder}();i.default=o,o.pdo=new Array,o.gi=function(e){return null==e&&(e=0),null==o.pdo[e]&&(o.pdo[e]=new o),o.pdo[e]}},{"./XDefine":4}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function MD5(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MD5)};i.default=a,a.md5=function(e){var t,i,n,r,s,o,u,l,f,h=Array();for(e=a.uTF8Encode(e),h=a.convertToWordArray(e),o=1732584193,u=4023233417,l=2562383102,f=271733878,t=0;t<h.length;t+=16)i=o,n=u,r=l,s=f,o=a.FF(o,u,l,f,h[t+0],7,3614090360),f=a.FF(f,o,u,l,h[t+1],12,3905402710),l=a.FF(l,f,o,u,h[t+2],17,606105819),u=a.FF(u,l,f,o,h[t+3],22,3250441966),o=a.FF(o,u,l,f,h[t+4],7,4118548399),f=a.FF(f,o,u,l,h[t+5],12,1200080426),l=a.FF(l,f,o,u,h[t+6],17,2821735955),u=a.FF(u,l,f,o,h[t+7],22,4249261313),o=a.FF(o,u,l,f,h[t+8],7,1770035416),f=a.FF(f,o,u,l,h[t+9],12,2336552879),l=a.FF(l,f,o,u,h[t+10],17,4294925233),u=a.FF(u,l,f,o,h[t+11],22,2304563134),o=a.FF(o,u,l,f,h[t+12],7,1804603682),f=a.FF(f,o,u,l,h[t+13],12,4254626195),l=a.FF(l,f,o,u,h[t+14],17,2792965006),u=a.FF(u,l,f,o,h[t+15],22,1236535329),o=a.GG(o,u,l,f,h[t+1],5,4129170786),f=a.GG(f,o,u,l,h[t+6],9,3225465664),l=a.GG(l,f,o,u,h[t+11],14,643717713),u=a.GG(u,l,f,o,h[t+0],20,3921069994),o=a.GG(o,u,l,f,h[t+5],5,3593408605),f=a.GG(f,o,u,l,h[t+10],9,38016083),l=a.GG(l,f,o,u,h[t+15],14,3634488961),u=a.GG(u,l,f,o,h[t+4],20,3889429448),o=a.GG(o,u,l,f,h[t+9],5,568446438),f=a.GG(f,o,u,l,h[t+14],9,3275163606),l=a.GG(l,f,o,u,h[t+3],14,4107603335),u=a.GG(u,l,f,o,h[t+8],20,1163531501),o=a.GG(o,u,l,f,h[t+13],5,2850285829),f=a.GG(f,o,u,l,h[t+2],9,4243563512),l=a.GG(l,f,o,u,h[t+7],14,1735328473),u=a.GG(u,l,f,o,h[t+12],20,2368359562),o=a.HH(o,u,l,f,h[t+5],4,4294588738),f=a.HH(f,o,u,l,h[t+8],11,2272392833),l=a.HH(l,f,o,u,h[t+11],16,1839030562),u=a.HH(u,l,f,o,h[t+14],23,4259657740),o=a.HH(o,u,l,f,h[t+1],4,2763975236),f=a.HH(f,o,u,l,h[t+4],11,1272893353),l=a.HH(l,f,o,u,h[t+7],16,4139469664),u=a.HH(u,l,f,o,h[t+10],23,3200236656),o=a.HH(o,u,l,f,h[t+13],4,681279174),f=a.HH(f,o,u,l,h[t+0],11,3936430074),l=a.HH(l,f,o,u,h[t+3],16,3572445317),u=a.HH(u,l,f,o,h[t+6],23,76029189),o=a.HH(o,u,l,f,h[t+9],4,3654602809),f=a.HH(f,o,u,l,h[t+12],11,3873151461),l=a.HH(l,f,o,u,h[t+15],16,530742520),u=a.HH(u,l,f,o,h[t+2],23,3299628645),o=a.II(o,u,l,f,h[t+0],6,4096336452),f=a.II(f,o,u,l,h[t+7],10,1126891415),l=a.II(l,f,o,u,h[t+14],15,2878612391),u=a.II(u,l,f,o,h[t+5],21,4237533241),o=a.II(o,u,l,f,h[t+12],6,1700485571),f=a.II(f,o,u,l,h[t+3],10,2399980690),l=a.II(l,f,o,u,h[t+10],15,4293915773),u=a.II(u,l,f,o,h[t+1],21,2240044497),o=a.II(o,u,l,f,h[t+8],6,1873313359),f=a.II(f,o,u,l,h[t+15],10,4264355552),l=a.II(l,f,o,u,h[t+6],15,2734768916),u=a.II(u,l,f,o,h[t+13],21,1309151649),o=a.II(o,u,l,f,h[t+4],6,4149444226),f=a.II(f,o,u,l,h[t+11],10,3174756917),l=a.II(l,f,o,u,h[t+2],15,718787259),u=a.II(u,l,f,o,h[t+9],21,3951481745),o=a.addUnsigned(o,i),u=a.addUnsigned(u,n),l=a.addUnsigned(l,r),f=a.addUnsigned(f,s);return(a.wordToHex(o)+a.wordToHex(u)+a.wordToHex(l)+a.wordToHex(f)).toLowerCase()},a.uTF8Encode=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},a.convertToWordArray=function(e){for(var t,i=e.length,a=i+8,n=16*((a-a%64)/64+1),r=Array(n-1),s=0,o=0;o<i;)s=o%4*8,r[t=(o-o%4)/4]=r[t]|e.charCodeAt(o)<<s,o++;return s=o%4*8,r[t=(o-o%4)/4]=r[t]|128<<s,r[n-2]=i<<3,r[n-1]=i>>>29,r},a.rotateLeft=function(e,t){return e<<t|e>>>32-t},a.addUnsigned=function(e,t){var i,a,n,r,s;return n=2147483648&e,r=2147483648&t,s=(1073741823&e)+(1073741823&t),(i=1073741824&e)&(a=1073741824&t)?2147483648^s^n^r:i|a?1073741824&s?3221225472^s^n^r:1073741824^s^n^r:s^n^r},a.F=function(e,t,i){return e&t|~e&i},a.G=function(e,t,i){return e&i|t&~i},a.H=function(e,t,i){return e^t^i},a.I=function(e,t,i){return t^(e|~i)},a.FF=function(e,t,i,n,r,s,o){return e=a.addUnsigned(e,a.addUnsigned(a.addUnsigned(a.F(t,i,n),r),o)),a.addUnsigned(a.rotateLeft(e,s),t)},a.GG=function(e,t,i,n,r,s,o){return e=a.addUnsigned(e,a.addUnsigned(a.addUnsigned(a.G(t,i,n),r),o)),a.addUnsigned(a.rotateLeft(e,s),t)},a.HH=function(e,t,i,n,r,s,o){return e=a.addUnsigned(e,a.addUnsigned(a.addUnsigned(a.H(t,i,n),r),o)),a.addUnsigned(a.rotateLeft(e,s),t)},a.II=function(e,t,i,n,r,s,o){return e=a.addUnsigned(e,a.addUnsigned(a.addUnsigned(a.I(t,i,n),r),o)),a.addUnsigned(a.rotateLeft(e,s),t)},a.wordToHex=function(e){var t,i="",a="";for(t=0;t<=3;t++)i+=(a="0"+(e>>>8*t&255).toString(16)).substr(a.length-2,2);return i}},{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./XDefine")),r=_interopRequireDefault(e("./PackageTools")),s=_interopRequireDefault(e("./interface/PublicInterface")),o=_interopRequireDefault(e("./interface/BridgeInterface")),u=_interopRequireDefault(e("../game/GmConfig"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=function(){function XNetFast(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XNetFast),this.iStat=0,this.socket=new Laya.Socket,this.socket.on(Laya.Event.OPEN,this,this.onConnect),this.socket.on(Laya.Event.MESSAGE,this,this.onReceive),this.socket.on(Laya.Event.CLOSE,this,this.onClose),this.socket.on(Laya.Event.ERROR,this,this.onError),this.bConnected=!1,this.tmp_uint8array=new Uint8Array(65536),this.byte=new Laya.Byte,this.s_iid=0,this.s_data=new Uint8Array(65536),this.s_len=0,this.iTimeGapWithServer=4294967295,this.sConnectUrl=n.default.BASE_LOGIN,this.iSecond=-1,this.iDay=-1,this.right_time=!0,this.bNoNetwork=!1}return a(XNetFast,[{key:"GetServerTime",value:function(){if(this.right_time=!1,0==this.iStat){var e=r.default.gi();e.iOffset=0,this.Send(2006,e.databuf,e.iOffset)}}},{key:"bRightTime",value:function(){return!!(this.right_time&&Math.abs(this.iTimeGapWithServer)<60)}},{key:"onConnect",value:function(){this.bConnected=!0,n.default.sop("onConnect")}},{key:"onReceive",value:function(e){s.default.gi().iPlatform,this._receive(e)}},{key:"_receive",value:function(e){var t;this.byte.clear(),this.byte.writeArrayBuffer(e),this.byte.pos=0;var i,a,l=this.tmp_uint8array;for(t=0;t<this.byte.length;t++)l[t]=this.byte.getByte();for(var f,h=0,c=e.byteLength,d=r.default.gi();h<c;){for(a=3+(l[h+0]<<8|l[h+1]),i=0,t=3;t<a;t++)i^=l[h+t];if(i!=l[h+2])return void n.default.sop("error message");for(f=l[h+3]<<8|l[h+4],t=5;t<a;t++)d.databuf[t-5]=l[h+t];switch(d.iLength=a-5,d.iOffset=0,f+",",f){case 2001:var p=d.GetNextByte();s.default.gi().iAid=d.GetNextLong(),s.default.gi().sToken=d.GetNextString(),n.default.sop(s.default.gi().iAid),n.default.sop(s.default.gi().sToken),this.iTimeGapWithServer=d.GetNextInt()-n.default.InitSecond(),this.sNewUrl=d.GetNextString(),this.iNewPort=d.GetNextInt(),this._flag=d.GetNextInt(),1==p?(s.default.gi().iStat=10,this.sConnectUrl="wss://"+this.sNewUrl+":"+this.iNewPort,this.socket.close(),this.bConnected=!1,o.default.gi().CheckQudao(this._flag)):s.default.gi().iStat=-1;break;case 2003:GmSave.gi().SaveResult(d);break;case 2005:GmSave.gi().LoadResult(d);break;case 2007:this.iSecond=d.GetNextInt(),this.iDay=d.GetNextByte(),this.iTimeGapWithServer=this.iSecond-n.default.InitSecond(),this.right_time=!0;break;case 2009:s.default.gi().sToken=d.GetNextString();d.GetNextByte();n.default.sop(s.default.gi().sToken);break;case 2101:this._setstat(999),GmEffect.gi().AddEffect12("已清档，请重新启动游戏");break;case 2103:u.default.MJ=!0}h+=a}102==this.iStat&&(this.bNoNetwork=!1,this._setstat(0))}},{key:"onClose",value:function(){this.bConnected=!1,n.default.sop("onClose")}},{key:"onError",value:function(){n.default.sop("onError"),this.socket.close(),this.bConnected=!1}},{key:"_setstat",value:function(e){this.iStat=e,this.iTimeOut=60}},{key:"Logic",value:function(){}},{key:"Send",value:function(e,t,i){}},{key:"Close",value:function(){this.socket.close()}},{key:"MakePackage",value:function(e,t,i){var a=this.tmp_uint8array;a[0]=i+2>>8&255,a[1]=i+2&255,a[2]=0,a[3]=e>>8&255,a[4]=255&e,a[2]=a[2]^a[3],a[2]=a[2]^a[4];for(var n=0;n<i;n++)a[5+n]=t[n],a[2]=a[2]^a[5+n];this.byte.clear();for(n=0;n<5+i;n++){this.socket.output.writeByte(a[n]),this.byte.writeByte(a[n])}}}]),XNetFast}();i.default=l,l.pnf=null,l.gi=function(){return null==l.pnf&&(l.pnf=new l),l.pnf}},{"../game/GmConfig":57,"./PackageTools":3,"./XDefine":4,"./interface/BridgeInterface":29,"./interface/PublicInterface":30}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=function(){function XNumber(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XNumber),this.f=0,this.e=0,null!=e&&this.Set(e),this.sign=1}return a(XNumber,[{key:"Clear",value:function(){return this.f=0,this.e=0,this}},{key:"BiggerThenZero",value:function(){return(this.e<0||0==this.e&&this.f<1)&&(this.f=1,this.e=0),this}},{key:"Set",value:function(e){var t,i,a=""+e,n=a.length,r=!1,s=!1,o=10;for(this.f=0,this.e=0,t=0;t<n;t++)if(i=a.charCodeAt(t),XNumber.IsNumber(i))s?this.e=10*this.e+i-XNumber.ASC_0:r?(this.f=this.f+(i-XNumber.ASC_0)/o,o*=10):this.f=10*this.f+i-XNumber.ASC_0;else if(i==XNumber.ASC_dot)r=!0;else if(i==XNumber.ASC_e||i==XNumber.ASC_E)s=!0;else if(i==XNumber.ASC_PLUS);else{if(i!=XNumber.ASC_SUB)return null;s?this.e=-this.e:this.sign=-1}return this.normalize(),this}},{key:"GetNum",value:function(){return this.f*Math.pow(10,this.e)}},{key:"GetScientific",value:function(){return this.f+"e+"+this.e}},{key:"GetRecordNum",value:function(){return this.normalize(),this.e>=16?"9999999999999999":parseInt(this.GetNum())}},{key:"Get",value:function(){if(this.e<3)return""+Math.round(this.f*Math.pow(10,this.e));if(this.e<6)return Math.round(this.f*Math.pow(10,this.e-3+2))/100+"k";if(this.e<9)return Math.round(this.f*Math.pow(10,this.e-6+2))/100+"m";if(this.e<12)return Math.round(this.f*Math.pow(10,this.e-9+2))/100+"g";if(this.e<15)return Math.round(this.f*Math.pow(10,this.e-12+2))/100+"t";if(this.e>170)return Math.round(100*this.f)/100+"e+"+this.e;var e=this.e-this.e%3,t=e/3-5,i=XNumber.BIGLETTER[t%26];return Math.round(this.f*Math.pow(10,this.e-e+2))/100+i+i+(t>=26?i:"")}},{key:"copyfrom",value:function(e){return this.f=e.f,this.e=e.e,this}},{key:"normalize",value:function(){if(this.f<=0)return this.f=0,void(this.e=0);for(;this.f>=10;)this.f/=10,this.e++;for(;this.f<1;)this.f*=10,this.e--}},{key:"CompareX",value:function(e){return this.e>e.e?1:this.e<e.e?-1:this.f>e.f?1:this.f<e.f?-1:0}},{key:"Zero",value:function(){return this.e<=-3||0==this.f}},{key:"Pow",value:function(e){if(0==e)this.f=1,this.e=0;else if(1==e);else for(var t=XNumber.gi(10).copyfrom(this),i=1;i<e;i++)this.MultX(t);return this}},{key:"RateX",value:function(e){var t=XNumber.gi(0).copyfrom(this);return t.DivX(e),t.GetNum()}},{key:"DivX",value:function(e){return this.f/=e.f,this.e-=e.e,this.normalize(),this}},{key:"MultX",value:function(e){return this.f*=e.f,this.e+=e.e,this.normalize(),this}},{key:"Mult",value:function(e){return this.f*=e,this.normalize(),this}},{key:"Add",value:function(e){return this.e<=10&&(this.f=this.f*Math.pow(10,this.e)+e,this.e=0,this.normalize()),this}},{key:"AddX",value:function(e){if(this.e==e.e)return this.f+=e.f,this.normalize(),this;if(Math.abs(this.e-e.e)<=10){for(;this.e!=e.e;)this.e<e.e?(this.e++,this.f/=10):(this.e--,this.f*=10);return this.f+=e.f,this.normalize(),this}return this.e>e.e?this:(this.copyfrom(e),this)}},{key:"SubX",value:function(e){if(this.e==e.e)return this.f-=e.f,this.normalize(),this;if(Math.abs(this.e-e.e)<=10){for(;this.e!=e.e;)this.e<e.e?(this.e++,this.f/=10):(this.e--,this.f*=10);return this.f-=e.f,this.normalize(),this}return this.e>e.e?this:(this.f=0,this.e=0,this)}}]),XNumber}();i.default=n,n.IsNumber=function(e){return!(e<n.ASC_0)&&!(e>n.ASC_9)},n.New=function(e){return new n(e)},n.pxn=new Array,n.gi=function(e){return null==n.pxn[e]&&(n.pxn[e]=new n),n.pxn[e]},n.BIGLETTER=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.ASC_e=101,n.ASC_E=69,n.ASC_dot=46,n.ASC_PLUS=43,n.ASC_SUB=45,n.ASC_UNDERLINE=95,n.ASC_0=48,n.ASC_9=57,n.ASC_a=97,n.ASC_z=122,n.ASC_A=65,n.ASC_Z=90,n.IsS=function(e){return e>=n.ASC_0&&e<=n.ASC_9||(e>=n.ASC_a&&e<=n.ASC_z||(e>=n.ASC_A&&e<=n.ASC_Z||e==n.ASC_UNDERLINE))}},{}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../engine/XStat")),r=_interopRequireDefault(e("../engine/XTouchManager")),s=_interopRequireDefault(e("../engine/graphic/M2DFast")),o=_interopRequireDefault(e("./XDefine")),u=(_interopRequireDefault(e("../game/GmConfig")),_interopRequireDefault(e("../game/GmRes"))),l=_interopRequireDefault(e("./XNetFast")),f=(_interopRequireDefault(e("./PackageTools")),_interopRequireDefault(e("./interface/PublicInterface"))),h=(_interopRequireDefault(e("./XWavFast")),_interopRequireDefault(e("../game/play/GmSet"))),c=_interopRequireDefault(e("../game/play/GmSave"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var d=function(){function XOLE(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XOLE),Laya.SoundManager.autoReleaseSound=!1,this.pntf=l.default.gi(),this.ppi=f.default.gi(),o.default.sop("start"),this.iErrorDelay=0,this.sErrorDetail="",u.default.rid_loading=s.default.gi().LoadImage("res/pic/logo.jpg",!0),h.default.gi().Init()}return a(XOLE,[{key:"SetError",value:function(e){this.iErrorDelay=150,this.sErrorDetail=e}},{key:"Init",value:function(){Laya.timer.frameLoop(2,this,this.OnTimer),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,_mouse_down_func),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,_mouse_move_func),Laya.stage.on(Laya.Event.MOUSE_UP,this,_mouse_up_func),Laya.stage.on(Laya.Event.FOCUS,this,_onFocus),Laya.stage.on(Laya.Event.BLUR,this,_onBlur),n.default.gi().PushStat(n.default.STAT_LOADING),r.default.gi().Init()}},{key:"OnTimer",value:function(){for(XOLE.iDelay++,o.default.InitSecond(),s.default.gi().Clear(),n.default.gi().Draw();;){var e=r.default.gi().PopTouch();if(null==e)break;n.default.gi().ProcTouch(e.type,e.x,e.y)}this.pntf.Logic(),this.ppi.Logic(),c.default.gi().LoadLogic(),c.default.gi().SaveLogic(),this.iErrorDelay>0&&(this.iErrorDelay--,s.default.gi().DrawTextEx(322,402,this.sErrorDetail,16777215,45,100,1,1,0,-2,-2),s.default.gi().DrawTextEx(320,400,this.sErrorDetail,16711680,45,100,1,1,0,-2,-2))}}]),XOLE}();function _mouse_down_func(){r.default.gi().TouchDown(0,Laya.stage.mouseX,Laya.stage.mouseY)}function _mouse_move_func(){r.default.gi().TouchMove(0,Laya.stage.mouseX,Laya.stage.mouseY)}function _mouse_up_func(){r.default.gi().TouchUp(0,Laya.stage.mouseX,Laya.stage.mouseY)}function _onFocus(){}function _onBlur(){}i.default=d,d._float=function(e,t){var i=(d.iDelay+t)%(2*e);return i<e?i:2*e-i},d.iSlowRate=1,d.iSlowDelay=0,d.iDelay=0,d.pole=null,d.gi=function(){return null==d.pole&&(d.pole=new d),d.pole}},{"../engine/XStat":10,"../engine/XTouchManager":11,"../engine/graphic/M2DFast":27,"../game/GmConfig":57,"../game/GmRes":59,"../game/play/GmSave":67,"../game/play/GmSet":68,"./PackageTools":3,"./XDefine":4,"./XNetFast":7,"./XWavFast":12,"./interface/PublicInterface":30}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../game/MainMenu/GmLoading")),r=_interopRequireDefault(e("../game/play/GmPlay"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s=function(){function XStat(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XStat),this.Init()}return a(XStat,[{key:"Init",value:function(){this.m_StatStack=new Array(XStat.MAXSTATDEEP),this.iStatPoint=-1}},{key:"PushStat",value:function(e){switch(e){case XStat.STAT_LOADING:this.m_StatStack[++this.iStatPoint]=new n.default;break;case XStat.STAT_GMPLAY:this.m_StatStack[++this.iStatPoint]=new r.default}}},{key:"Draw",value:function(){this.iStatPoint>=0&&this.m_StatStack[this.iStatPoint].Draw()}},{key:"ProcTouch",value:function(e,t,i){this.iStatPoint>=0&&this.m_StatStack[this.iStatPoint].ProcTouch(e,t,i)}},{key:"PopStat",value:function(){this.iStatPoint>=0&&(this.m_StatStack[this.iStatPoint--]=null)}}]),XStat}();i.default=s,s.MAXSTATDEEP=32,s.pstat=null,s.gi=function(){return null==s.pstat&&(s.pstat=new s),s.pstat},s.STAT_LOADING=0,s.STAT_GMPLAY=1},{"../game/MainMenu/GmLoading":60,"../game/play/GmPlay":66}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=e("./XDefine");(a=r)&&a.__esModule;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function _OneFinger(){_classCallCheck(this,_OneFinger),this.iFingerId=_OneFinger.FREEFINGER,this.m_TouchStack=new Array(_OneFinger.MAXTOUCHSTACK);for(var e=0;e<_OneFinger.MAXTOUCHSTACK;e++)this.m_TouchStack[e]=new Object;this.iStackPoint=-1,this.iProcPoint=-1}return n(_OneFinger,[{key:"Push",value:function(e,t,i){this.iStackPoint++;var a=this.iStackPoint%_OneFinger.MAXTOUCHSTACK;this.m_TouchStack[a].type=e,this.m_TouchStack[a].x=t,this.m_TouchStack[a].y=i}},{key:"Pop",value:function(){if(this.iProcPoint>=this.iStackPoint)return null;this.iProcPoint++;var e=this.iProcPoint%_OneFinger.MAXTOUCHSTACK;return this.m_TouchStack[e].type==o.TYPE_UP&&(this.iFingerId=_OneFinger.FREEFINGER),this.m_TouchStack[e]}},{key:"TouchDown",value:function(e,t,i){this.iFingerId=e,this.Push(o.TYPE_DOWN,t,i)}},{key:"TouchMove",value:function(e,t){this.Push(o.TYPE_MOVE,e,t)}},{key:"TouchUp",value:function(e,t){this.Push(o.TYPE_UP,e,t)}}]),_OneFinger}();s.FREEFINGER=-1,s.MAXTOUCHSTACK=16;var o=function(){function XTouchManager(){_classCallCheck(this,XTouchManager)}return n(XTouchManager,[{key:"Init",value:function(){this.fingers=new Array(XTouchManager.MAXFINGERCOUNT);for(var e=0;e<XTouchManager.MAXFINGERCOUNT;e++)this.fingers[e]=new s}},{key:"FindSinger",value:function(e){for(var t=0;t<XTouchManager.MAXFINGERCOUNT;t++)if(this.fingers[t].iFingerId==e)return this.fingers[t];return null}},{key:"_test",value:function(){for(var e=0,t=0;t<XTouchManager.MAXFINGERCOUNT;t++)this.fingers[t].iFingerId==s.FREEFINGER&&e++;return e+","+this.fingers[0].iProcPoint+","+this.fingers[0].iStackPoint}},{key:"TouchDown",value:function(e,t,i){var a=this.FindSinger(s.FREEFINGER);null!=a&&a.TouchDown(e,t,i),XTouchManager.TOUCH_STAT=1}},{key:"TouchMove",value:function(e,t,i){var a=this.FindSinger(e);null!=a&&a.TouchMove(t,i),3!=XTouchManager.TOUCH_STAT&&(XTouchManager.TOUCH_STAT=2)}},{key:"TouchUp",value:function(e,t,i){var a=this.FindSinger(e);null!=a&&a.TouchUp(t,i),XTouchManager.TOUCH_STAT=3}},{key:"PopTouch",value:function(){var e;for(e=0;e<XTouchManager.MAXFINGERCOUNT;e++){var t=this.fingers[e].Pop();if(null!=t)return t}return null}}]),XTouchManager}();i.default=o,o.TOUCH_STAT=3,o.MAXFINGERCOUNT=8,o.TYPE_DOWN=1,o.TYPE_MOVE=2,o.TYPE_UP=3,o.TOUCH_DOWN=1,o.TOUCH_MOVE=2,o.TOUCH_UP=3,o.ptouch=null,o.gi=function(){return null==o.ptouch&&(o.ptouch=new o),o.ptouch}},{"./XDefine":4}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./XDefine")),r=_interopRequireDefault(e("../game/play/GmSet"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function PlayingList(){_classCallCheck(this,PlayingList),this.plist=new Array,this.iPoint=0}return a(PlayingList,[{key:"Finished",value:function(){o.iPlayingCount--}},{key:"play",value:function(e){o.iPlayingCount++,Laya.SoundManager.playSound(e,1,Laya.Handler.create(this,this.Finished))}}]),PlayingList}();s.COUNT=1024,s.pl=null,s.gi=function(){return null==s.pl&&(s.pl=new s),s.pl};var o=function XWavFast(){_classCallCheck(this,XWavFast)};i.default=o,o._wav_names=["gun_fire","gun_hit","select_item","btn_click","change_weapon"],o.PlaySound=function(e){r.default.bSound&&(e<0||Laya.SoundManager.playSound(n.default.BASE_URL+"res/sound/"+o._wav_names[e]+".wav"))},o.iPlayingCount=0,o.PlaySoundEx=function(e){r.default.bSound&&"none"!=e&&(o.iPlayingCount>=3||s.gi().play(n.default.BASE_URL+"res/sound/"+e+".wav"))},o._mp3_names=["lobby","fight_bgm_1"],o._music_channel=null,o.PlayMusic=function(e){r.default.bMusic&&(o._music_channel=Laya.SoundManager.playMusic(n.default.BASE_URL+"res/sound/"+o._mp3_names[e]+".mp3"))},o.StopMusic=function(){Laya.SoundManager.stopMusic()},o.MusicContinue=function(){null!=o._music_channel&&o._music_channel.play()}},{"../game/play/GmSet":68,"./XDefine":4}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function XWithOut(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XWithOut)};i.default=a,a.wo_m=new Array,a.mp=0,a.bheroin=!1,a.clear=function(){a.mp=0,a.bheroin=!1},a.putmonster=function(e){a.wo_m[a.mp++]=e},a.puthero=function(){a.bheroin=!0},a.bin=function(e){for(var t=0;t<a.mp;t++)if(a.wo_m[t]==e)return!0;return!1}},{}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../graphic/AnimaAction")),r=_interopRequireDefault(e("../graphic/M2DFast")),s=_interopRequireDefault(e("../XTouchManager")),o=_interopRequireDefault(e("../XWavFast"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=function(){function XButton(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XButton),this.bDisable=!1,this.bSingleButton=!0,this.iFontSize=20,this.iTextColor=16777215,this.iOffX=0,this.iOffY=0,this.iBtnType=-1,this.iSoundId=3,this.iDownTick=0,this._bChecked=!1,this._bDisableChecked=!1}return a(XButton,[{key:"SetAnima",value:function(e,t){this.aa_normal=new n.default(e.InitAnimaWithName(t)),this.aa_down=new n.default(e.InitAnimaWithName(t)),this.aa_disable=new n.default(e.InitAnimaWithName(t)),this.aa_down.iFrame=1,this.aa_disable.iFrame=2,this.aa=new n.default,this.bSingleButton=!1,this.iBtnType=0}},{key:"Move",value:function(e,t,i,a){this.iX=e,this.iY=t,this.iW=i,this.iH=a}},{key:"SetType1",value:function(e,t,i){this.iBtnType=1,this.iT1_namex=e,this.iT1_namey=t,this.bT1_locked=!1,this.iFontSize=i}},{key:"Draw_Single",value:function(){var e=r.default.gi();this._bMouseIn?(this._bMouseDown,e.FillRect(this.iX,this.iY,this.iW,this.iH,16777215)):e.DrawRect(this.iX,this.iY,this.iW,this.iH,16777215),null!=this.sName&&e.DrawTextEx(this.iX+this.iW/2,this.iY+this.iH/2,this.sName,16777215,this.iFontSize,101,1,1,0,-2,-2)}},{key:"DrawText",value:function(){r.default.pm2f.DrawTextEx(this.iX+this.iW/2+this.iOffX,this.iY+this.iH/2+this.iOffY,this.sName,16777215,this.iFontSize,101,1,1,0,-2,-2)}},{key:"Draw",value:function(){if(!this.bDisable&&this._bMouseDown?this.iDownTick++:this.iDownTick=0,this.bSingleButton)this.Draw_Single();else{var e,t,i=r.default.gi();this.bDisable?this.aa.copyfrom(this.aa_disable):this._bMouseIn&&this._bMouseDown?this.aa.copyfrom(this.aa_down):this.aa.copyfrom(this.aa_normal),e=this.iX,t=this.iY,1==this.iBtnType&&(this.bT1_locked?(this.aa.iFrame=2,t-=5):this._bMouseDown&&(t+=5)),this.aa.Draw(e,t),null!=this.sName&&(this.bSingleButton?i.DrawTextEx(this.iX+this.iW/2+this.iOffX,this.iY+this.iH/2+this.iOffY,this.sName,4294967295,this.iFontSize,101,1,1,0,-2,-2):(e=this.iX+this.iW/2,t=this.iY+this.iH/2,1==this.iBtnType&&(e+=this.iT1_namex,t+=this.iT1_namey,this.bT1_locked?t-=5:this._bMouseDown&&(t+=5)),i.DrawTextEx(e+2,t+2,this.sName,0,this.iFontSize,70,1,1,0,-2,-2),i.DrawTextEx(e,t,this.sName,this.iTextColor,this.iFontSize,101,1,1,0,-2,-2)))}}},{key:"ProcTouch",value:function(e,t,i){if(!XButton.bEnableEvent)return!1;if(!this.bMoveIn(t,i))return this._bMouseDown=!1,!1;switch(e){case s.default.TOUCH_DOWN:this._bMouseDown=!0;break;case s.default.TOUCH_MOVE:break;case s.default.TOUCH_UP:this._bMouseDown&&(this._bMouseDown=!1,this.bDisable?this._bDisableChecked=!0:(this._bChecked=!0,o.default.PlaySoundEx("click"))),this._bMouseIn=!1}return!0}},{key:"bCheck",value:function(){return!!this._bChecked&&(this._bChecked=!1,!0)}},{key:"bDisableCheck",value:function(){return!!this._bDisableChecked&&(this._bDisableChecked=!1,!0)}},{key:"bMoveIn",value:function(e,t){return this._bMouseIn=!1,this.bSingleButton,e>=this.iX&&e<=this.iX+this.iW&&t>=this.iY&&t<=this.iY+this.iH?this._bMouseIn=!0:this._bMouseIn=!1,this._bMouseIn}},{key:"SetOff",value:function(e,t){this.iOffX=e,this.iOffY=t}},{key:"SetNormal",value:function(){this.bMouseDown=!1,this.iScaleStat=0,this.fScale=1}},{key:"DoScale",value:function(){switch(this.iScaleStat){case 0:break;case 1:this.fScale+=.05,this.fScale>1.1&&(this.iScaleStat=2);break;case 2:this.fScale=1.1,this.iScaleStat=0;break;case 11:this.fScale-=.05,this.fScale<1&&(this.iScaleStat=12);break;case 12:this.fScale=1,this.iScaleStat=0}}},{key:"cx",value:function(){return this.iX+this.iW/2}},{key:"cy",value:function(){return this.iY+this.iH/2}}]),XButton}();i.default=u,u.bEnableEvent=!0},{"../XTouchManager":11,"../XWavFast":12,"../graphic/AnimaAction":26,"../graphic/M2DFast":27}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=function(){function XScroll(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XScroll),this.iLockX=0,this.bLocked=!1,this.iScrollOffX=0,this.bScrolling=!1,this.iScrolling=0,this.iScrollDelay=0,this.iStartScrollX=0}return a(XScroll,[{key:"SetScrollRect",value:function(e,t,i,a,n,r){this.offx1=e,this.offx2=t,this.offy1=i,this.offy2=a,this.iSize=n,this.sType=r}},{key:"Logic",value:function(){if(this.bLocked);else if(!this.bScrolling){var e;e="x"==this.sType?this.iSize-this.offx2+this.offx1:this.iSize-this.offy2+this.offy1,0!=this.iScrolling?(this.iScrolling>5?this.iScrolling-=5:this.iScrolling<-5?this.iScrolling+=5:this.iScrolling=0,this.iScrollOffX<0&&(this.iScrolling=0),this.iScrollOffX>e&&(this.iScrolling=0),Math.abs(this.iScrolling)<1&&(this.iScrolling=0),this.iScrollOffX+=this.iScrolling):(this.iScrollOffX<0&&(this.iScrollOffX/=2),e<0&&(e=0),this.iScrollOffX>e&&(this.iScrollOffX-=(this.iScrollOffX-e)/2))}this.iScrollDelay>0&&this.iScrollDelay--}},{key:"ProcTouch",value:function(e,t,i){var a;return a="x"==this.sType?t:i,1==e&&t>=this.offx1&&t<=this.offx2&&i>this.offy1&&i<this.offy2&&(this.bLocked=!0,this.iLockX=a,this.iStartScrollX=a,this.iScrollDelay=6),this.bLocked&&(3==e?(this.iScrollDelay>0&&this.bScrolling&&(this.iScrolling=(this.iStartScrollX-a)/3),this.bLocked=!1,this.bScrolling=!1):(this.bScrolling&&(this.iScrollOffX+=this.iLockX-a,this.iLockX=a),Math.abs(this.iLockX-a)>10&&(this.bScrolling=!0,e=3,i=-1))),!!this.bScrolling}}]),XScroll}();i.default=n},{}],16:[function(e,t,i){"use strict";function X10_NUMBER(){this.init_X10_NUMBER()}Object.defineProperty(i,"__esModule",{value:!0}),i.X10_NUMBER=X10_NUMBER,X10_NUMBER.prototype={iType:0,iX:0,iY:0,sName:"",iLen:0,iXID:0,pup:null,pback:null,pfront:null,pdown:null,iNumber:0,SetPos:function(e,t){this.iX=e,this.iY=t},init_X10_NUMBER:function(){this.iType=10,this.iLen=4,this.sName="",this.iNumber=0},Set:function(e){this.iNumber=e},Get:function(){return this.iNumber},copyfrom:function(e){this.iX=e.iX,this.iY=e.iY,this.sName=e.sName,this.iNumber=e.iNumber}}},{}],17:[function(e,t,i){"use strict";function X20_FLOAT(){this.init_X20_FLOAT()}Object.defineProperty(i,"__esModule",{value:!0}),i.X20_FLOAT=X20_FLOAT,X20_FLOAT.prototype={iType:0,iX:0,iY:0,sName:"",iLen:0,iXID:0,pup:null,pback:null,pfront:null,pdown:null,fFloat:0,SetPos:function(e,t){this.iX=e,this.iY=t},init_X20_FLOAT:function(){this.iType=20,this.iLen=4,this.sName="",this.fFloat=0},Set:function(e){this.fFloat=e},Get:function(){return this.fFloat},copyfrom:function(e){this.iX=e.iX,this.iY=e.iY,this.sName=e.sName,this.fFloat=e.fFloat}}},{}],18:[function(e,t,i){"use strict";function X30_WORD(){this.init_X30_WORD()}Object.defineProperty(i,"__esModule",{value:!0}),i.X30_WORD=X30_WORD,X30_WORD.prototype={iType:0,iX:0,iY:0,sName:"",iLen:0,iXID:0,pup:null,pback:null,pfront:null,pdown:null,pword:"",init_X30_WORD:function(){this.iType=30,this.iLen=8,this.sName="",this.pword=""},SetPos:function(e,t){this.iX=e,this.iY=t},Set:function(e){this.pword=e},Get:function(){return this.pword},copyfrom:function(e){this.iX=e.iX,this.iY=e.iY,this.sName=e.sName,this.pword=e.pword}}},{}],19:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.X40_CLASS=X40_CLASS;var a=e("./_CLASSARRAY");function X40_CLASS(){this.init_X40_CLASS()}X40_CLASS.prototype={iType:0,iX:0,iY:0,sName:"",iLen:0,iXID:0,pup:null,pback:null,pfront:null,pdown:null,bOpenTree:!1,iArray:1,pca:null,pobj:null,SetPos:function(e,t){this.iX=e,this.iY=t},init_X40_CLASS:function(){this.iType=40,this.iLen=8,this.sName="",this.iArray=1,this.pobj=null,this.pca=new a._CLASSARRAY(this),this.bOpenTree=!1},copyfrom:function(e){this.iX=e.iX,this.iY=e.iY,this.sName=e.sName,this.iArray=e.iArray,this.pca.copyfrom(e.pca)},_NEW_x40:function(){var e,t,i,n;for(i=this.pca,e=1;e<this.iArray;e++){for(n=new a._CLASSARRAY(this),t=this.pca.phead;null!==t;)n.LinkFirst(t.GetCopy()),t=t.pdown;i.pnext=n,i=n}for(e=0;e<iArray;e++)for(t=pca.phead;null!=t;)40==t.iType&&t._NEW_x40(),t=t.pdown},MoveUpFirst:function(e){pca.MoveUpFirst(e)},MoveDownFirst:function(e){},UnLinkFirst:function(e){return this.pca.UnLinkFirst(e)},LinkFirst:function(e){this.pca.LinkFirst(e)},AddClass:function(e){return this.pca.AddClass(e)},FindFirst:function(e,t){return null==t&&(t=0),this.pca.FindFirst(e,t)},FindFirstByPath:function(e){var t,i=0,a=0,n=this;for(t=0;i<e.length;i++)if("/"===e[i]){if((void 0)[t]=0,0===a){if(void 0!==n.sName)return null}else if(null===(n=n.FindFirst(void 0)))return null;a++,t=0}else(void 0)[t++]=e[i];return(void 0)[t]=0,n.FindFirst(void 0)},FindNumber:function(e){return this.pca.FindNumber(e,0)},FindFloat:function(e){return this.pca.FindFloat(e,0)},FindWord:function(e){return this.pca.FindWord(e,0)},FindCode:function(e){return this.pca.FindCode(e,0)},FindClass:function(e){return this.pca.FindClass(e,0)},FindPoint:function(e){return this.pca.FindPoint(e,0)},FindMark:function(e){return this.pca.FindMark(e)},DeleteObj:function(){}}},{"./_CLASSARRAY":25}],20:[function(e,t,i){"use strict";function X50_CODE(){this.init_X50_CODE()}Object.defineProperty(i,"__esModule",{value:!0}),i.X50_CODE=X50_CODE,X50_CODE.prototype={iType:0,iX:0,iY:0,sName:"",iLen:0,iXID:0,pup:null,pback:null,pfront:null,pdown:null,pcode:"",init_X50_CODE:function(){this.iType=50,this.iLen=8,this.sName="",this.pcode=""},SetPos:function(e,t){this.iX=e,this.iY=t},Set:function(e){this.pcode=e},Get:function(){return this.pcode},copyfrom:function(e){this.iX=e.iX,this.iY=e.iY,this.sName=e.sName,this.pcode=e.pcode}}},{}],21:[function(e,t,i){"use strict";function X60_DATA(){this.init_X60_DATA()}Object.defineProperty(i,"__esModule",{value:!0}),i.X60_DATA=X60_DATA,X60_DATA.prototype={iType:0,iX:0,iY:0,sName:"",iLen:0,iXID:0,pup:null,pback:null,pfront:null,pdown:null,pdata:"",init_X60_DATA:function(){this.iType=30,this.iLen=8,this.sName="",this.pdata=""},SetPos:function(e,t){this.iX=e,this.iY=t},Set:function(e){this.pdata=e},Get:function(){return this.pdata},copyfrom:function(e){this.iX=e.iX,this.iY=e.iY,this.sName=e.sName,this.pdata=e.pdata}}},{}],22:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.X70_POINT=X70_POINT;var a,n=e("./XFirstOle"),r=(a=n)&&a.__esModule?a:{default:a};function X70_POINT(){this.init_X70_POINT()}X70_POINT.prototype={iType:0,iX:0,iY:0,sName:"",iLen:0,iXID:0,pup:null,pback:null,pfront:null,pdown:null,iDestXid:0,SetPos:function(e,t){this.iX=e,this.iY=t},init_X70_POINT:function(){this.iType=70,this.iLen=4,this.sName="",this.iDestXid=0},Set:function(e){this.iDestXid=e},Get:function(){return this.iDestXid},GetFirst:function(){return r.default.pxms[this.iDestXid]},copyfrom:function(e){this.iX=e.iX,this.iY=e.iY,this.sName=e.sName,this.iDestXid=e.iDestXid}}},{"./XFirstOle":23}],23:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=(e("./X_FIRST"),e("./X10_NUMBER")),s=e("./X20_FLOAT"),o=e("./X30_WORD"),u=e("./X40_CLASS"),l=e("./X50_CODE"),f=e("./X60_DATA"),h=e("./X70_POINT"),c=e("../XDefine"),d=(a=c)&&a.__esModule?a:{default:a};var p=256,_=function(){function XFirstOle(){var e;for(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XFirstOle),this.pmains=new Array(p),e=0;e<p;e++)this.pmains[e]=null}return n(XFirstOle,[{key:"LoadFile",value:function(e){var t,i,a,n;if("xf"==(n=e.GetNextString())){for(e.GetNextInt(),t=0;t<p;t++)if(null==this.pmains[t]){i=e.GetNextInt(),a=e.GetNextInt(),this.pmains[t]=this.LoadFirst(e),this.pmains[t].SetPos(i,a);break}}else{if("xal"!=n)return!1;for(e.GetNextInt(),XFirstOle.MAXXID=0;!(e.GetNextInt()<0);)for(t=0;t<p;t++)if(null==this.pmains[t]){i=e.GetNextInt(),a=e.GetNextInt(),this.pmains[t]=this.LoadFirst(e),d.default.sop("main "+t+":"+this.pmains[t].sName),this.pmains[t].SetPos(i,a);break}d.default.sop("MAXXID:"+XFirstOle.MAXXID)}return!0}},{key:"LoadFirst",value:function(e){var t=null,i=null,a=e.GetNextInt();switch(a){case 10:(t=new r.X10_NUMBER).iType=a,t.sName=e.GetNextString(),t.iLen=e.GetNextInt(),t.iXID=e.GetNextInt()+0,t.iNumber=e.GetNextInt(),"x_link_xid"==t.sName&&(t.iNumber+=0);break;case 20:(t=new s.X20_FLOAT).iType=a,t.sName=e.GetNextString(),t.iLen=e.GetNextInt(),t.iXID=e.GetNextInt()+0,t.fFloat=e.GetNextFloat();break;case 30:(t=new o.X30_WORD).iType=a,t.sName=e.GetNextString(),e.GetNextInt(),t.iXID=e.GetNextInt()+0,e.GetNextData(),t.Set(e.obs);break;case 40:for((t=new u.X40_CLASS).iType=a,t.sName=e.GetNextString(),t.iLen=e.GetNextInt(),t.iXID=e.GetNextInt()+0,t.iArray=e.GetNextInt();null!=(i=this.LoadFirst(e));)t.LinkFirst(i);break;case 50:(t=new l.X50_CODE).iType=a,t.sName=e.GetNextString(),e.GetNextInt(),t.iXID=e.GetNextInt()+0,e.GetNextData(),t.Set(e.obs);break;case 60:(t=new f.X60_DATA).iType=a,t.sName=e.GetNextString(),e.GetNextInt(),t.iXID=e.GetNextInt()+0,e.GetNextData(),t.Set(e.obs);break;case 70:(t=new h.X70_POINT).iType=a,t.sName=e.GetNextString(),e.GetNextInt(),t.iXID=e.GetNextInt()+0,t.iDestXid=e.GetNextInt();break;default:t=null}return null!=t&&(XFirstOle.pxms[t.iXID]=t,XFirstOle.MAXXID<t.iXID&&(XFirstOle.MAXXID=t.iXID)),t}},{key:"LockMain",value:function(e){for(var t=0;t<p;t++)if(null!=this.pmains[t]&&this.pmains[t].sName==e)return this.pmains[t];return null}}]),XFirstOle}();i.default=_,_.pxms=new Array,_.MAXXID=0},{"../XDefine":4,"./X10_NUMBER":16,"./X20_FLOAT":17,"./X30_WORD":18,"./X40_CLASS":19,"./X50_CODE":20,"./X60_DATA":21,"./X70_POINT":22,"./X_FIRST":24}],24:[function(e,t,i){"use strict";function X_FIRST(){this.Init()}Object.defineProperty(i,"__esModule",{value:!0}),i.X_FIRST=X_FIRST,X_FIRST.prototype={iType:0,iX:0,iY:0,sName:"",iLen:0,iXID:0,pup:null,pback:null,pfront:null,pdown:null,Init:function(){this.iType=0},SetName:function(e){this.sName=e},SetPos:function(e,t){this.iX=e,this.iY=t},GetBase:function(e){function GetBase(t){return e.apply(this,arguments)}return GetBase.toString=function(){return e.toString()},GetBase}(function(e){return null==e.pback?e:GetBase(e.pback)}),copyfrom:function(e){this.iX=e.iX,this.iY=e.iY,this.sName=e.sName},GetCopy:function(e){}}},{}],25:[function(e,t,i){"use strict";function _CLASSARRAY(e){this.init_CLASSARRAY(e)}Object.defineProperty(i,"__esModule",{value:!0}),i._CLASSARRAY=_CLASSARRAY,_CLASSARRAY.prototype={iType:0,iX:0,iY:0,sName:"",iLen:0,iXID:0,pup:null,pback:null,pfront:null,pdown:null,phead:null,pend:null,pnext:null,init_CLASSARRAY:function(e){this.phead=null,this.pend=null,this.pnext=null,this.pback=e},copyfrom:function(e){for(var t=e.phead;null!==t;)LinkFirst(GetCopy(t)),t=t.pdown;null!==e.pnext&&new _CLASSARRAY(pback).copyfrom(e.pnext)},UnLinkFirst:function(e){if(null===this.phead)return null;if(this.phead===e)this.pend===e?(this.phead=null,this.pend=null,this.pfront=null):(this.phead=phead.pdown,this.pfront=this.phead,this.phead.pup=null);else{for(var t=this.phead.pdown;t!==e&&t!==this.pend;)t=t.pdown;t===e&&(t===this.pend&&(this.pend=t.pup),t.pup.pdown=t.pdown,null!==t.pdown&&(t.pdown.pup=t.pup))}return e.pup=null,e.pdown=null,e.pback=null,e},LinkFirst:function(e){null!==e&&(e.pback=this.pback,null===this.phead?(this.phead=e,this.pend=e,this.pfront=e,e.pup=null,e.pdown=null):(this.pend.pdown=e,e.pup=this.pend,e.pdown=null,this.pend=e))},AddClass:function(e){var t=null;switch(e){case 10:t=new X10_NUMBER;break;case 20:t=new X20_FLOAT;break;case 30:t=new X30_WORD;break;case 40:t=new X40_CLASS;break;case 50:t=new X50_CODE;break;case 60:t=new X60_DATA}return null!==t&&(SetXid(t),t.pback=this.pback,null===this.phead?(this.phead=t,this.pend=t,this.pfront=t,t.pup=null,t.pdown=null):(this.pend.pdown=t,t.pup=this.pend,t.pdown=null,this.pend=t)),t},FindFirst:function(e,t){for(var i=this.phead;null!==i;){if(i.sName===e)return i;if(t>0&&40===i.iType){var a=i.pca.FindFirst(e,t-1);if(null!==a)return a}i=i.pdown}return null},FindNumber:function(e,t){for(var i=this.phead;null!==i;){if(10===i.iType&&i.sName===e)return i;if(t>0&&40===i.iType){var a=i.pca.FindNumber(e,t-1);if(null!==a)return a}i=i.pdown}return null},FindFloat:function(e,t){for(var i=this.phead;null!==i;){if(20===i.iType&&i.sName===e)return i;if(t>0&&40===i.iType){var a=i.pca.FindFloat(e,t-1);if(null!==a)return a}i=i.pdown}return null},FindWord:function(e,t){for(var i=this.phead;null!==i;){if(30===i.iType&&i.sName===e)return i;if(t>0&&40===i.iType){var a=i.pca.FindWord(e,t-1);if(null!==a)return a}i=i.pdown}return null},FindClass:function(e,t){for(var i=this.phead;null!==i;){if(40===i.iType&&i.sName===e)return i;if(t>0&&40===i.iType){var a=i.pca.FindClass(e,t-1);if(null!==a)return a}i=i.pdown}return null},FindCode:function(e,t){for(var i=this.phead;null!==i;){if(50===i.iType&&i.sName===e)return i;if(t>0&&40===i.iType){var a=i.pca.FindCode(e,t-1);if(null!==a)return a}i=i.pdown}return null},FindData:function(e,t){for(var i=this.phead;null!==i;){if(60===i.iType&&i.sName===e)return i;if(t>0&&40===i.iType){var a=i.pca.FindData(e,t-1);if(null!==a)return a}i=i.pdown}return null},FindPoint:function(e,t){for(var i=this.phead;null!==i;){if(70===i.iType&&i.sName===e)return i;if(t>0&&40===i.iType){var a=i.pca.FindPoint(e,t-1);if(null!==a)return a}i=i.pdown}return null},FindMark:function(e){for(var t=this.phead;null!==t;){if(40===t.iType){var i=t;if(null===i.pca.phead)return null;if("唯一处理标识"===i.pca.phead.sName)if(10===i.pca.phead.iType)if(i.pca.phead.iNumber===e)return i;if(null!==(i=i.FindMark(e)))return i}t=t.pdown}return null},DeleteObj:function(){}}},{}],26:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=function(){function AnimaAction(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AnimaAction),this.iAnimaPoint=-1,this.iDelay=-1,this.iFrame=-1,this.pani=null,this.iRect=[0,0,0,0],null!=e&&this.copyfrom(e)}return a(AnimaAction,[{key:"copyfrom",value:function(e){this.iAnimaPoint=e.iAnimaPoint,this.iDelay=e.iDelay,this.iFrame=e.iFrame,this.pani=e.pani,this.iRect[0]=e.iRect[0],this.iRect[1]=e.iRect[1],this.iRect[2]=e.iRect[2],this.iRect[3]=e.iRect[3]}},{key:"Reset",value:function(){this.iFrame=0,this.iDelay=0}},{key:"Draw",value:function(e,t){this.pani.DrawAnimaEx_ByOffset(e,t,this.iAnimaPoint,this.iFrame,101,1,1,0,0,0)}},{key:"Draw",value:function(e,t,i){null==i&&(i=this.iFrame),this.pani.DrawAnimaEx_ByOffset(e,t,this.iAnimaPoint,i,101,1,1,0,0,0)}},{key:"DrawEx1",value:function(e,t,i,a,n,r,s,o,u,l){this.pani.DrawAnimaEx_ByOffset(e,t,this.iAnimaPoint,i,a,n,r,s,o,u,l)}},{key:"DrawEx",value:function(e,t,i,a,n,r,s,o,u){this.pani.DrawAnimaEx_ByOffset(e,t,this.iAnimaPoint,this.iFrame,i,a,n,r,s,o,u)}},{key:"NextFrame",value:function(){return null!=this.pani&&this.pani.NextFrame(this)}}]),AnimaAction}();i.default=n},{}],27:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../XDefine")),r=_interopRequireDefault(e("../XOLE"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function _ImageList(e){_classCallCheck(this,_ImageList),this.bUseing=!1,this.bLoaded=!1,this.iImageId=e,this.blocks=new Array,this.iBlockCount=0}return a(_ImageList,[{key:"GetBlock",value:function(e,t,i,a){var n;for(n=0;n<this.iBlockCount;n++)if(this.blocks[n].x==e&&this.blocks[n].y==t&&this.blocks[n].w==i&&this.blocks[n].h==a)return this.blocks[n].image;return this.CreateBlock(e,t,i,a).image}},{key:"CreateBlock",value:function(e,t,i,a){return this.blocks[this.iBlockCount]=new Object,this.blocks[this.iBlockCount].x=e,this.blocks[this.iBlockCount].y=t,this.blocks[this.iBlockCount].w=i,this.blocks[this.iBlockCount].h=a,this.blocks[this.iBlockCount].image=Laya.Texture.createFromTexture(this.image,e,t,i,a),this.iBlockCount++,this.blocks[this.iBlockCount-1]}}]),_ImageList}(),o=function(){function _TextBuffer(){_classCallCheck(this,_TextBuffer),this._txts=new Array(_TextBuffer.SIZE);for(var e=0;e<_TextBuffer.SIZE;e++)this._txts[e]=new Object,this._txts[e].bUseing=!1,this._txts[e].bUsed=!1,this._txts[e].txt=new Laya.Text,this._txts[e].iTimeOut=0,this._txts[e].s="",this._txts[e].c=0,this._txts[e].size=0,this._txts[e].ab=0,this._txts[e].sw=0,this._txts[e].sh=0,this._txts[e].ra=0,this._txts[e].ratx=0,this._txts[e].raty=0,this._txts[e].x=0,this._txts[e].y=0;this.iMaxPoint=0}return a(_TextBuffer,[{key:"Find",value:function(e,t,i,a,n,r,s,o,u){for(var l=0;l<this.iMaxPoint;l++)if(this._txts[l].bUseing&&!this._txts[l].bUsed&&this._txts[l].s==e&&this._txts[l].c==t&&this._txts[l].size==i&&this._txts[l].ab==a&&this._txts[l].sw==n&&this._txts[l].sh==r&&this._txts[l].ra==s&&this._txts[l].ratx==o&&this._txts[l].raty==u)return this._txts[l].iTimeOut=_TextBuffer.iTick+30,this._txts[l].bUsed=!0,this._txts[l];return null}},{key:"Get",value:function(e,t,i,a,n,r,s,o,u){for(var l=0;l<_TextBuffer.SIZE;l++)if(!this._txts[l].bUseing)return this._txts[l].bUseing=!0,this._txts[l].s=e,this._txts[l].c=t,this._txts[l].size=i,this._txts[l].ab=a,this._txts[l].sw=n,this._txts[l].sh=r,this._txts[l].ra=s,this._txts[l].ratx=o,this._txts[l].raty=u,this._txts[l].iTimeOut=_TextBuffer.iTick+30,this._txts[l].bUsed=!0,this._txts[l];return null}},{key:"Clear",value:function(){this.iCount=0,this.iMaxPoint=0;for(var e=0;e<_TextBuffer.SIZE;e++)this._txts[e].bUseing&&(this._txts[e].iTimeOut<_TextBuffer.iTick?this._txts[e].bUseing=!1:(this._txts[e].bUsed=!1,this.iCount++,this.iMaxPoint=e));this.iMaxPoint++}}]),_TextBuffer}();o.SIZE=1024,o.iTick=0;var u=function(){function M2DFast(){_classCallCheck(this,M2DFast),this.tb=new o,this.m_ImageList=new Array(M2DFast.MAXIMAGECOUNT);for(var e=0;e<M2DFast.MAXIMAGECOUNT;e++)this.m_ImageList[e]=new s(e);this.view_sprite=new Laya.Sprite,Laya.stage.addChild(this.view_sprite),this.view_sprite.graphics.clear(),this.Clear(),this.block_sprites=new Array,this.iSpritePoint=0,this.iSpriteCount=0,this.block_texts=new Array,this.iTextPoint=0,this.iTextCount=0,this.iClipSpriteCount=0,this.clip_sprites=new Array,this.bClip=!1,this.iFlashDelay=0,this.iTextWidth=-1,this.txt_w=new Laya.Text}return a(M2DFast,[{key:"FindFreeText",value:function(){return this.iTextPoint>=this.iTextCount&&(this.block_texts[this.iTextCount]=new Laya.Text,this.iTextCount++),this.iTextPoint++,this.block_texts[this.iTextPoint-1]}},{key:"FindFreeSprite",value:function(){return this.iSpritePoint>=this.iSpriteCount&&(this.block_sprites[this.iSpriteCount]=new Laya.Sprite,this.iSpriteCount++),this.iSpritePoint++,this.block_sprites[this.iSpritePoint-1]}},{key:"Clear",value:function(){var e;for(this.view_sprite.removeChildren(),this.iSpritePoint=0,this.iTextPoint=0,e=0;e<this.iClipSpriteCount;e++)this.clip_sprites[e].scrollRect=null,this.clip_sprites[e].removeChildren();this.iClipSpriteCount=0,this.iFlashDelay>0?(this.iFlashDelay--,this.view_sprite.pos(n.default.grnd(-5,5),n.default.grnd(-5,5))):this.view_sprite.pos(0,0),o.iTick++,this.tb.Clear()}},{key:"FindFreeImage",value:function(){for(var e=0;e<M2DFast.MAXIMAGECOUNT;e++)if(!this.m_ImageList[e].bUseing)return this.m_ImageList[e];return null}},{key:"FindImage",value:function(e){return this.m_ImageList[e].bUseing&&this.m_ImageList[e].bLoaded?this.m_ImageList[e]:null}},{key:"LoadedImage",value:function(e,t,i){if(null==i)return null!=r.default.pole&&r.default.pole.SetError(e),void Laya.loader.load(n.default.BASE_URL+e,Laya.Handler.create(this,this.LoadedImage,[e,t]));t.image=i,t.bLoaded=!0,t.fn=e}},{key:"LoadImage",value:function(e,t){null==t&&(t=!1);var i=this.FindFreeImage();return null==i?-1:(i.bUseing=!0,Laya.loader.load((t?"":n.default.BASE_URL)+e,Laya.Handler.create(this,this.LoadedImage,[e,i])),i.iImageId)}},{key:"SetViewClip",value:function(e,t,i,a){this.bClip=!0,this.iClipX=e,this.iClipY=t,this.iClipW=i,this.iClipH=a}},{key:"NoClip",value:function(){this.bClip=!1}},{key:"DrawImageEx",value:function(e,t,i,a,n,r,s,o,u,l,f,h,c,d){d=d||!1;var p=this.FindImage(i);if(null!=p){if(-1==r&&(r=p.image.width),-1==s&&(s=p.image.height),this.bClip){if(e>this.iClipX+this.iClipW)return;if(t>this.iClipY+this.iClipH)return;if(e+r*u<this.iClipX)return;if(t+s*l<this.iClipY)return}var _=this.FindFreeSprite();if(this.bClip){var g=this.FindFreeSprite();g.graphics.clear(),g.pos(this.iClipX,this.iClipY),g.rotation=0,g.alpha=1,g.scale(1,1),g.scrollRect=new Laya.Rectangle(this.iClipX,this.iClipY,this.iClipW,this.iClipH),this.view_sprite.addChild(g),g.addChild(_),this.clip_sprites[this.iClipSpriteCount++]=g}else this.view_sprite.addChild(_);_.graphics.clear(),-1==h?h=e:-2==h?h=e+r/2:-3==h&&(h=e+r),-1==c?c=t:-2==c?c=t+s/2:-3==c&&(c=t+s);var m=p.GetBlock(a,n,r,s);_.graphics.drawImage(m,e-h,t-c,r,s),_.pos(h,c),_.alpha=o/100,_.rotation=f,_.scale(d?-u:u,l)}}},{key:"c_to_c",value:function(e){for(var t=e.toString(16);t.length<6;)t="0"+t;return"#"+t}},{key:"TextWidth",value:function(e,t){return this.txt_w.text=e,this.txt_w.fontSize=t,this.txt_w.textWidth}},{key:"DrawTextEx",value:function(e,t,i,a,n,r,s,o,u,l,f){if(null!=i&&!(t>Laya.stage.height)){var h,c,d,p=this.tb.Find(i,a,n,r,s,o,u,l,f);if(null==p){if(null==(p=this.tb.Get(i,a,n,r,s,o,u,l,f)))return;(h=p.txt).text=i,h.color=this.c_to_c(a),h.fontSize=n,h.width=h.textWidth,h.height=h.textHeight,this.iTextWidth>0?(h.wordWrap=!0,h.width=this.iTextWidth):h.wordWrap=!1,h.alpha=r/100,h.rotation=u,h.scale(s,o),p.x=-1,p.y=-1}else h=p.txt;if(p.x!=e||p.y!=t)c=-1==l?0:-2==l?h.textWidth/2:-3==l?h.textWidth:l-e,d=-1==f?0:-2==f?h.textHeight/2:-3==f?h.textHeight:f-t,h.pivot(c,d),h.x=e,h.y=t,p.x=e,p.y=t;if(this.bClip){var _=this.FindFreeSprite();_.graphics.clear(),_.pos(this.iClipX,this.iClipY),_.rotation=0,_.alpha=1,_.scale(1,1),_.scrollRect=new Laya.Rectangle(this.iClipX,this.iClipY,this.iClipW,this.iClipH),this.view_sprite.addChild(_),_.addChild(h),this.clip_sprites[this.iClipSpriteCount++]=_}else this.view_sprite.addChild(h);return h.textWidth}}},{key:"DrawTextEx22",value:function(e,t,i,a,n,r,s,o,u,l,f){if(null!=i&&!(e>640||t>Laya.stage.height)){var h,c,d=this.FindFreeText();if(this.bClip){var p=this.FindFreeSprite();p.graphics.clear(),p.pos(this.iClipX,this.iClipY),p.rotation=0,p.alpha=1,p.scale(1,1),p.scrollRect=new Laya.Rectangle(this.iClipX,this.iClipY,this.iClipW,this.iClipH),this.view_sprite.addChild(p),p.addChild(d),this.clip_sprites[this.iClipSpriteCount++]=p}else this.view_sprite.addChild(d);d.text=i,d.color=this.c_to_c(a),d.fontSize=n,d.width=d.textWidth,d.height=d.textHeight,this.iTextWidth>0?(d.wordWrap=!0,d.width=this.iTextWidth):d.wordWrap=!1,h=-1==l?0:-2==l?d.textWidth/2:-3==l?d.textWidth:l-e,c=-1==f?0:-2==f?d.textHeight/2:-3==f?d.textHeight:f-t,d.pivot(h,c),d.alpha=r/100,d.rotation=u,d.scale(s,o),d.x=e,d.y=t}}},{key:"DrawCircle",value:function(e,t,i,a,n){null==n&&(n=1);var r=this.FindFreeSprite();this.view_sprite.addChild(r),r.graphics.clear(),r.graphics.drawCircle(e,t,i,null,this.c_to_c(a),n),r.pivot(0,0),r.rotation=0,r.alpha=100,r.scale(1,1),r.pos(0,0)}},{key:"FillCircle",value:function(e,t,i,a,n){if(!(e-i>640||t-i>Laya.stage.height||e+i<0||t+i<0)){if(this.bClip){if(e-i>this.iClipX+this.iClipW)return;if(t-i>this.iClipY+this.iClipH)return;if(e+i<this.iClipX)return;if(t+i<this.iClipY)return}null==n&&(n=1);var r=this.FindFreeSprite();this.view_sprite.addChild(r),r.graphics.clear(),r.graphics.drawCircle(e,t,i,this.c_to_c(a),null,n),r.pivot(0,0),r.rotation=0,r.alpha=100,r.scale(1,1),r.pos(0,0)}}},{key:"DrawRect",value:function(e,t,i,a,n,r){null==r&&(r=1);var s=this.FindFreeSprite();if(this.bClip){var o=this.FindFreeSprite();o.graphics.clear(),o.pos(this.iClipX,this.iClipY),o.rotation=0,o.alpha=1,o.scale(1,1),o.scrollRect=new Laya.Rectangle(this.iClipX,this.iClipY,this.iClipW,this.iClipH),this.view_sprite.addChild(o),o.addChild(s),this.clip_sprites[this.iClipSpriteCount++]=o}else this.view_sprite.addChild(s);s.graphics.clear(),s.graphics.drawRect(e,t,i,a,null,this.c_to_c(n),r),s.pivot(0,0),s.rotation=0,s.alpha=100,s.scale(1,1),s.pos(0,0)}},{key:"FillRect",value:function(e,t,i,a,n,r,s){if(!(i<=0||a<=0)){null==r&&(r=1),null==s&&(s=100);var o=this.FindFreeSprite();if(this.bClip){var u=this.FindFreeSprite();u.graphics.clear(),u.pos(this.iClipX,this.iClipY),u.rotation=0,u.alpha=1,u.scale(1,1),u.scrollRect=new Laya.Rectangle(this.iClipX,this.iClipY,this.iClipW,this.iClipH),this.view_sprite.addChild(u),u.addChild(o),this.clip_sprites[this.iClipSpriteCount++]=u}else this.view_sprite.addChild(o);o.graphics.clear(),o.graphics.drawRect(e,t,i,a,this.c_to_c(n),this.c_to_c(n),r),o.pivot(0,0),o.rotation=0,o.alpha=s/100,o.scale(1,1),o.pos(0,0)}}},{key:"DrawLine",value:function(e,t,i,a,n,r){null==r&&(r=1);var s=this.FindFreeSprite();this.view_sprite.addChild(s),s.graphics.clear(),s.graphics.drawLine(e,t,i,a,n,r),s.pivot(0,0),s.rotation=0,s.alpha=1,s.scale(1,1),s.pos(0,0)}}]),M2DFast}();i.default=u,u.pm2f=null,u.gi=function(){return null==u.pm2f&&(u.pm2f=new u),u.pm2f},u.MAXIMAGECOUNT=128},{"../XDefine":4,"../XOLE":9}],28:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./M2DFast")),r=_interopRequireDefault(e("./AnimaAction"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function _RESLIST(){_classCallCheck(this,_RESLIST),this.iRid=-1,this.sResName=""},o=function _BLOCKLIST(){_classCallCheck(this,_BLOCKLIST),this.iCp=0,this.iMx=0,this.iMy=0,this.iSw=0,this.iSh=0,this.iRa=0,this.bFlip=!1},u=function _FRAMELIST(){_classCallCheck(this,_FRAMELIST),this.iFid=0,this.iDelay=0,this.iBlockCount=0,this.blocklist=null},l=function _ANIMALIST(){_classCallCheck(this,_ANIMALIST),this.iAnimaId=0,this.sAnimaName="",this.iOx=0,this.iOy=0,this.iFrameCount=0,this.rect=[0,0,0,0],this.framelist=null},f=function _CUTLIST(){_classCallCheck(this,_CUTLIST),this.iRp=0,this.iX=0,this.iY=0,this.iW=0,this.iH=0},h=function(){function XAnima(){_classCallCheck(this,XAnima),this.iResCount=0,this.reslist=null,this.iAnimaCount=0,this.animalist=null,this.iCutCount=0,this.cutlist=null,this.pathname="",this.bLocal=null}return a(XAnima,[{key:"LoadRes",value:function(){var e;for(e=0;e<this.iResCount;e++)-1==this.reslist[e].iRid&&(this.reslist[e].iRid=n.default.gi().LoadImage(this.pathname+"/"+this.reslist[e].sResName,this.bLocal))}},{key:"GetResLoadedCount",value:function(){var e,t=0;for(e=0;e<this.iResCount;e++)null!=n.default.gi().FindImage(this.reslist[e].iRid)&&t++;return t}},{key:"LoadAnima",value:function(e,t,i){var a,n,r;this.bLocal=i,this.pathname=e;var h,c,d,p,_,g;t.GetNextByte();for(t.GetNextByte(),this.iResCount=t.GetNextShort(),this.reslist=new Array(this.iResCount),a=0;a<this.iResCount;a++)this.reslist[a]=new s,this.reslist[a].iRid=t.GetNextShort(),this.reslist[a].sResName=t.GetNextString(),this.reslist[a].iRid=-1;for(this.iAnimaCount=t.GetNextShort(),this.animalist=new Array(this.iAnimaCount),a=0;a<this.iAnimaCount;a++)for(this.animalist[a]=new l,this.animalist[a].iAnimaId=t.GetNextShort(),this.animalist[a].sAnimaName=t.GetNextString(),t.GetNextString(),this.animalist[a].iOx=t.GetNextShort(),this.animalist[a].iOy=t.GetNextShort(),t.GetNextShort(),t.GetNextShort(),this.animalist[a].iFrameCount=t.GetNextShort(),this.animalist[a].framelist=new Array(this.animalist[a].iFrameCount),n=0;n<this.animalist[a].iFrameCount;n++)for(this.animalist[a].framelist[n]=new u,this.animalist[a].framelist[n].iFid=t.GetNextShort(),this.animalist[a].framelist[n].iDelay=t.GetNextShort(),this.animalist[a].framelist[n].iBlockCount=t.GetNextShort(),this.animalist[a].framelist[n].blocklist=new Array(this.animalist[a].framelist[n].iBlockCount),r=0;r<this.animalist[a].framelist[n].iBlockCount;r++)this.animalist[a].framelist[n].blocklist[r]=new o,this.animalist[a].framelist[n].blocklist[r].iCp=t.GetNextShort(),this.animalist[a].framelist[n].blocklist[r].iMx=t.GetNextFloat(),this.animalist[a].framelist[n].blocklist[r].iMy=t.GetNextFloat(),this.animalist[a].framelist[n].blocklist[r].iSw=t.GetNextFloat(),this.animalist[a].framelist[n].blocklist[r].iSh=t.GetNextFloat(),this.animalist[a].framelist[n].blocklist[r].iRa=t.GetNextFloat(),t.GetNextShort(),1==t.GetNextByte()&&(this.animalist[a].framelist[n].blocklist[r].bFlip=!0);for(this.iCutCount=t.GetNextShort(),this.cutlist=new Array(this.iCutCount),a=0;a<this.iCutCount;a++)this.cutlist[a]=new f,this.cutlist[a].iRp=t.GetNextShort(),this.cutlist[a].iX=t.GetNextShort(),this.cutlist[a].iY=t.GetNextShort(),this.cutlist[a].iW=t.GetNextShort(),this.cutlist[a].iH=t.GetNextShort();for(h=0;h<this.iAnimaCount;h++)for(this.animalist[h].rect[0]=99999999,this.animalist[h].rect[1]=99999999,this.animalist[h].rect[2]=-99999999,this.animalist[h].rect[3]=-99999999,a=0;a<this.animalist[h].iFrameCount;a++)for(n=0;n<this.animalist[h].framelist[a].iBlockCount;n++)c=this.animalist[h].framelist[a].blocklist[n].iCp,d=this.animalist[h].framelist[a].blocklist[n].iMx,p=this.animalist[h].framelist[a].blocklist[n].iMy,_=.01*this.animalist[h].framelist[a].blocklist[n].iSw*this.cutlist[c].iW,g=.01*this.animalist[h].framelist[a].blocklist[n].iSh*this.cutlist[c].iH,0==a&&0==n?this.animalist[h].rect[0]=d:d<this.animalist[h].rect[0]&&(this.animalist[h].rect[0]=d),0==a&&0==n?this.animalist[h].rect[2]=d+_:d+_>this.animalist[h].rect[2]&&(this.animalist[h].rect[2]=d+_),0==a&&0==n?this.animalist[h].rect[1]=p:p<this.animalist[h].rect[1]&&(this.animalist[h].rect[1]=p),0==a&&0==n?this.animalist[h].rect[3]=p+g:p+g>this.animalist[h].rect[3]&&(this.animalist[h].rect[3]=p+g);this.LoadRes()}},{key:"InitAnimaWithName",value:function(e){var t;for(null==this.aaa&&(this.aaa=new r.default),this.aaa.iAnimaPoint=-1,this.aaa.pani=this,t=0;t<this.iAnimaCount;t++)if(this.animalist[t].sAnimaName==e)return this.aaa.iAnimaPoint=t,this.aaa.iFrame=0,this.aaa.iDelay=0,this.aaa.iRect[0]=this.animalist[t].rect[0],this.aaa.iRect[1]=this.animalist[t].rect[1],this.aaa.iRect[2]=this.animalist[t].rect[2],this.aaa.iRect[3]=this.animalist[t].rect[3],this.aaa;return this.aaa.iDelay=-1,this.aaa}},{key:"DrawAnimaEx_ByName",value:function(e,t,i,a,n,s,o,u,l,f,h){null==this.aaa&&(this.aaa=new r.default),this.InitAnimaWithName(i),this.DrawAnimaEx_ByOffset(e,t,this.aaa.iAnimaPoint,a,n,s,o,u,l,f,h)}},{key:"DrawAnimaEx_ByOffset",value:function(e,t,i,a,r,s,o,u,l,f,h){var c,d,p,_;if(h=h||!1,-2==l&&(l=e),-2==f&&(f=t),!(i<0||i>this.iAnimaCount||a<0||this.animalist[i].iFrameCount<=0))for(a%=this.animalist[i].iFrameCount,c=0;c<this.animalist[i].framelist[a].iBlockCount;c++)d=this.animalist[i].framelist[a].blocklist[c].iCp,_=h,this.animalist[i].framelist[a].blocklist[c].bFlip&&(_=!_),p=e+this.animalist[i].framelist[a].blocklist[c].iMx,n.default.gi().DrawImageEx(p,t+this.animalist[i].framelist[a].blocklist[c].iMy,this.reslist[this.cutlist[d].iRp].iRid,this.cutlist[d].iX,this.cutlist[d].iY,this.cutlist[d].iW,this.cutlist[d].iH,r,.01*this.animalist[i].framelist[a].blocklist[c].iSw*s,.01*this.animalist[i].framelist[a].blocklist[c].iSh*o,this.animalist[i].framelist[a].blocklist[c].iRa+u,l,f,_)}},{key:"RotationVertex_2D2",value:function(e,t,i,a,n){var r,s,o,u;o=t-a,0==(s=e-i)&&(s=1e-7),u=Math.atan(o/s),s<0&&(u+=Math.PI),u+=Math.PI*n/180,r=Math.sqrt(s*s+o*o),this.rdx=Math.cos(u)*r+i,this.rdy=Math.sin(u)*r+a}},{key:"NextFrame",value:function(e){return e.iDelay++,!(e.iAnimaPoint<0||e.iAnimaPoint>=this.iAnimaCount)&&((e.iFrame<0||e.iFrame>=this.animalist[e.iAnimaPoint].iFrameCount)&&(e.iFrame=0,e.iDelay=0),0!=this.animalist[e.iAnimaPoint].iFrameCount&&(e.iDelay>this.animalist[e.iAnimaPoint].framelist[e.iFrame].iDelay&&(e.iDelay=0,e.iFrame++,e.iFrame>=this.animalist[e.iAnimaPoint].iFrameCount)&&(e.iFrame=0,!0)))}}]),XAnima}();i.default=h},{"./AnimaAction":26,"./M2DFast":27}],29:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./PublicInterface")),r=_interopRequireDefault(e("./SDK_XiYou_Android")),s=_interopRequireDefault(e("../XDefine")),o=(_interopRequireDefault(e("../XOLE")),_interopRequireDefault(e("./SDK_XiYou")),_interopRequireDefault(e("../../game/play/GmPlay"))),u=_interopRequireDefault(e("../../game/play/GmSave"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=function(){function BridgeInterface(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BridgeInterface),this.iPlatform=n.default.gi().iPlatform,window.conch){window.BridgeInterface=BridgeInterface,this.bApp=!0,this.conch=window.conch,this.conchConfig=window.conch.config;var e=conchConfig.getOS();"Conch-ios"==e?(this.iOsType=1,this.bridge=PlatformClass.createClass("JSBridge")):"Conch-android"==e?(this.iOsType=2,this.bridge=PlatformClass.createClass("demo.JSBridge")):this.iOsType=0}else this.bApp=!1}return a(BridgeInterface,[{key:"SendMessage",value:function(e,t,i,a,n){if(this.bApp)switch(null==t&&(t=""),null==i&&(i=""),null==a&&(a=""),null==n&&(n=""),s.default.sop("SendMessage : "+e+","+this.iOsType),this.iOsType){case 1:var r='{"cmd":"'+e+'","cs0":"'+t+'","cs1":"'+i+'","cs2":"'+a+'","cs3":"'+n+'"}';this.bridge.call("RecvMessage:",r);break;case 2:this.bridge.call("RecvMessage",e,t,i,a,n)}}},{key:"RecvMessage",value:function(e,t,i,a,n){if("saveresult"==e&&u.default.gi().SaveResult(parseInt(t),1==parseInt(i)),"loadresult"==e&&u.default.gi().LoadResult(parseInt(t),1==parseInt(i),a),"login"==e&&r.default.gi().SendLogin(t),"transform_value"==e&&MakeRecord.gi().SetValue(t,i),"closead"==e)switch(parseInt(t)){case 1:GmMap.gi().ClosedAD1();break;case 2:GmMap.gi().ClosedAD2();break;case 3:o.default.gi().ClosedAD3()}if("getadreward"==e)switch(parseInt(t)){case 1:GmMap.gi().WatchedAD1();break;case 2:GmMap.gi().WatchedAD2();break;case 3:o.default.gi().WatchedAD3();break;case 4:o.default.gi().WatchedAD4()}}},{key:"CheckQudao",value:function(e){n.default.USE_SDK<10?0==n.default.gi().iPlatform?BridgeInterface.QUDAO=0:1==n.default.gi().iPlatform?BridgeInterface.QUDAO=1:2==n.default.gi().iPlatform&&(BridgeInterface.QUDAO=2):11==n.default.USE_SDK?BridgeInterface.QUDAO=3:12==n.default.USE_SDK?BridgeInterface.QUDAO=4:10==n.default.USE_SDK&&(BridgeInterface.QUDAO=5),0!=(e&1<<BridgeInterface.QUDAO)&&(BridgeInterface.bADActive=!0),s.default.sop("PublicInterface.USE_SDK="+n.default.USE_SDK+","+e+","+BridgeInterface.bADActive)}}]),BridgeInterface}();i.default=l,l.pp=null,l.gi=function(){return null==l.pp&&(l.pp=new l),l.pp},l.QUDAO=0,l.bADActive=!1},{"../../game/play/GmPlay":66,"../../game/play/GmSave":67,"../XDefine":4,"../XOLE":9,"./PublicInterface":30,"./SDK_XiYou":31,"./SDK_XiYou_Android":32}],30:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../XDefine")),r=_interopRequireDefault(e("../PackageTools")),s=_interopRequireDefault(e("../XNetFast")),o=_interopRequireDefault(e("../XWavFast")),u=(_interopRequireDefault(e("./SDK_XiYou")),_interopRequireDefault(e("./SDK_XiYou_Android")),_interopRequireDefault(e("./BridgeInterface")),_interopRequireDefault(e("./XAD"))),l=_interopRequireDefault(e("../../game/play/GmPlay"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var f=function(){function PublicInterface(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PublicInterface),this.iStat=0,this.iTimeOut=0,this.iAid=0,this.bADShowing=!1,0==PublicInterface.USE_SDK?(this.iPlatform=0,Laya.Browser.onMiniGame&&(this.wx_wx=Laya.Browser.window.wx,this.iPlatform=1)):2==PublicInterface.USE_SDK?(this.iPlatform=0,Laya.Browser.onMiniGame&&(this.wx_wx=Laya.Browser.window.wx,this.iPlatform=2,u.default.gi().Init(this.iPlatform))):10==PublicInterface.USE_SDK?(this.iPlatform=0,Laya.Browser.onQQMiniGame&&(this.wx_wx=Laya.Browser.window.wx,this.iPlatform=10,u.default.gi().Init(3),MakeRecord.gi().channel_id="131",MakeRecord.gi().app_id="101682222066",this.wx_wx.onShareAppMessage(function(){return{title:"一起来消灭僵尸吧",imageUrl:"https://res-jsbxs.oclkj.com/share_img.png"}}),this.wx_wx.showShareMenu({showShareItems:["qq","qzone","wechatFriends","wechatMoment"]}),this.MenuButtonRect())):this.iPlatform=PublicInterface.USE_SDK,this.pntf=s.default.gi(),n.default.sop("渠道"+this.iPlatform)}return a(PublicInterface,[{key:"MenuButtonRect",value:function(){var e=this.wx_wx.getMenuButtonBoundingClientRect();if(null!=e){var t=Laya.stage.width/Laya.Browser.clientWidth;l.default.MBX=e.left*t,l.default.MBY=e.top*t,l.default.MBW=e.width*t,l.default.MBH=e.height*t}}},{key:"VibrateShort",value:function(){2!=this.iPlatform&&10!=this.iPlatform||this.wx_wx.vibrateShort()}},{key:"VibrateLong",value:function(){2!=this.iPlatform&&10!=this.iPlatform||this.wx_wx.vibrateLong()}},{key:"PlayAD",value:function(e){u.default.gi().PlayAD(e)}},{key:"Logic",value:function(){}},{key:"Perform0Login",value:function(e,t){var i=r.default.gi();i.iOffset=0,i.InsertInt(this.iPlatform),i.InsertString(e+","+t),this.pntf.Send(2e3,i.databuf,i.iOffset),this.iStat=1,this.iTimeOut=0}},{key:"Logic_self",value:function(){switch(this.iStat){case 0:break;case 1:this.iTimeOut++,this.iTimeOut>=90&&(this.iStat=0)}}},{key:"Logic_wx",value:function(e){switch(this.iStat){case 0:e.onShow(function(){o.default.MusicContinue()}),e.login({success:function(e){if(e.code){var t=r.default.gi();t.iOffset=0,t.InsertInt(PublicInterface.gi().iPlatform),t.InsertString(e.code),s.default.gi().Send(2e3,t.databuf,t.iOffset)}else n.default.sop("登录失败！"+e.errMsg)}}),this.iStat=1,this.iTimeOut=0;break;case 1:this.iTimeOut++,this.iTimeOut>=90&&(this.iStat=0)}}}]),PublicInterface}();i.default=f,f.ppi=null,f.gi=function(){return null==f.ppi&&(f.ppi=new f),f.ppi},f.USE_SDK=10},{"../../game/play/GmPlay":66,"../PackageTools":3,"../XDefine":4,"../XNetFast":7,"../XWavFast":12,"./BridgeInterface":29,"./SDK_XiYou":31,"./SDK_XiYou_Android":32,"./XAD":33}],31:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=(_interopRequireDefault(e("../XDefine")),_interopRequireDefault(e("../PackageTools"))),r=_interopRequireDefault(e("../XNetFast")),s=(_interopRequireDefault(e("../XWavFast")),_interopRequireDefault(e("./PublicInterface"))),o=_interopRequireDefault(e("./xiyougamesdk/xiyougamesdk")),u=_interopRequireDefault(e("./xiyougamesdk/utils/common")),l=_interopRequireDefault(e("./xiyougamesdk/utils/event")),f=_interopRequireDefault(e("./xiyougamesdk/config")),h=_interopRequireDefault(e("./XAD"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var c=function(){function SDK_XiYou(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SDK_XiYou)}return a(SDK_XiYou,[{key:"addSdkListener",value:function(){l.default.getInstance().on("onInitResult",function(e){e.status===u.default.Status().Success&&(SDK_XiYou.bSdkInited=!0)});l.default.getInstance().on("onLoginResult",function(e){u.default.xylog("onLoginResult--\x3e",e),e,e.status===u.default.Status().Success&&(SDK_XiYou._userid=e.userId,SDK_XiYou._token=e.token,SDK_XiYou.bLogin=!0,MakeRecord.gi().user_id=e.userId)}),l.default.getInstance().on("onServerListResult",function(e){u.default.xylog("onServerListResult--\x3e",e)}),l.default.getInstance().on("onPayResult",function(e){if(u.default.xylog("onPayResult--\x3e",e),e.status===u.default.Status().Pay_Qrcode)e.qrcode;else e.status===u.default.Status().Pay_To_Android||e.status===u.default.Status().Success||e.status===u.default.Status().Pay_Fail||e.status===u.default.Status().Pay_Wait||(e.status,u.default.Status().Pay_Cancel)})}},{key:"sdkInit",value:function(){var e=new f.default;e.debugState=!0,e.appId="101682222066",e.appKey="f51e72e4154e524075ebeea8e3e26b6c",e.masterId="131",e.channelId="3167",e.packageId="54870",e.packageName="com.qldmini.bsjs",e.appVersion=""+MakeRecord.RECORD_VERSION,o.default.getInstance().init(e,l.default.getInstance)}},{key:"SendLogin",value:function(e){var t=n.default.gi();t.iOffset=0,t.InsertInt(s.default.gi().iPlatform),t.InsertString(e),r.default.gi().Send(2e3,t.databuf,t.iOffset)}},{key:"AdSubmit",value:function(e){var t={};t.action_type=e,t.ad_id=h.default.gi().GetADID(),t.show_id=h.default.gi().sShowID,t.server_sid="1",t.user_id=SDK_XiYou._userid,o.default.getInstance().adSubmit(t)}},{key:"dataReport",value:function(e){if(10==s.default.gi().iPlatform){var t={};t.dataType=e,t.serverId="1",t.serverName="1",t.roleId=SDK_XiYou._userid,t.roleName=SDK_XiYou._userid,t.roleLevel=GmTechnologe.iTechnologeLev,t.roleCTime=Date.parse(new Date)/1e3,t.roleLevelIMTime=Date.parse(new Date)/1e3,t.moneyNum="9999999",t.vip="0",t.power="0",o.default.getInstance().submitExtraData(t)}}},{key:"Logic",value:function(e){switch(e.iStat){case 0:this.addSdkListener(),e.iStat=1;break;case 1:this.sdkInit(),e.iStat=2,e.iTimeOut=0;break;case 2:e.iTimeOut++,SDK_XiYou.bSdkInited?(o.default.getInstance().login(),SDK_XiYou.bLogin=!1,e.iStat=3,e.iTimeOut=0):e.iTimeOut>=90&&(e.iStat=1);break;case 3:e.iTimeOut++,SDK_XiYou.bLogin?(this.SendLogin(SDK_XiYou._token),e.iStat=4,e.iTimeOut=0):e.iTimeOut>=90&&(e.iStat=2);break;case 4:e.iTimeOut++,e.iTimeOut>=90&&(e.iStat=3)}}}]),SDK_XiYou}();i.default=c,c.pp=null,c.gi=function(){return null==c.pp&&(c.pp=new c),c.pp},c.bSdkInited=!1,c.bLogin=!1,c._userid="",c._token=""},{"../PackageTools":3,"../XDefine":4,"../XNetFast":7,"../XWavFast":12,"./PublicInterface":30,"./XAD":33,"./xiyougamesdk/config":34,"./xiyougamesdk/utils/common":42,"./xiyougamesdk/utils/event":44,"./xiyougamesdk/xiyougamesdk":53}],32:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./BridgeInterface")),r=(_interopRequireDefault(e("../XDefine")),_interopRequireDefault(e("../PackageTools"))),s=_interopRequireDefault(e("../XNetFast")),o=(_interopRequireDefault(e("../XWavFast")),_interopRequireDefault(e("./PublicInterface")));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=function(){function SDK_XiYou_Android(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SDK_XiYou_Android),this.token=null}return a(SDK_XiYou_Android,[{key:"SendLogin",value:function(e){this.token=e;var t=r.default.gi();t.iOffset=0,t.InsertInt(o.default.gi().iPlatform),t.InsertString(e),s.default.gi().Send(2e3,t.databuf,t.iOffset)}},{key:"Logic",value:function(e){switch(e.iStat){case 0:n.default.gi().SendMessage("login"),e.iStat=1,e.iTimeOut=0;break;case 1:e.iTimeOut++,e.iTimeOut>=60&&(null==this.token?e.iStat=0:this.SendLogin(this.token),e.iTimeOut=0)}}}]),SDK_XiYou_Android}();i.default=u,u.pp=null,u.gi=function(){return null==u.pp&&(u.pp=new u),u.pp}},{"../PackageTools":3,"../XDefine":4,"../XNetFast":7,"../XWavFast":12,"./BridgeInterface":29,"./PublicInterface":30}],33:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./BridgeInterface")),r=_interopRequireDefault(e("../XDefine")),s=_interopRequireDefault(e("./PublicInterface")),o=_interopRequireDefault(e("./SDK_XiYou"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=function(){function XAD(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XAD),this.bADShowing=!1,this.iUseADPos=0,this.sShowID=""}return a(XAD,[{key:"GetADID",value:function(){return XAD.ADID[this.iUseADPos][0]}},{key:"Init",value:function(e){var t=this;r.default.sop("==========================开始加载广告"+XAD.ADID[e][0]),this.iUseADPos=e,this.rewardedVideoAd=wx.createRewardedVideoAd({adUnitId:XAD.ADID[e][0]}),this.rewardedVideoAd.onClose(function(e){o.default.gi().AdSubmit(4),(e&&e.isEnded||void 0===e)&&n.default.gi().RecvMessage("getadreward",t.ret_cs0,"","",""),t.bADShowing=!1}),this.rewardedVideoAd.onLoad(function(){r.default.sop("==========================广告加载成功")}),this.rewardedVideoAd.onError(function(e){r.default.sop("==========================广告加载失败"+e)})}},{key:"PlayAD",value:function(e){var t=this;r.default.sop("==========================播放广告"+e),this.ret_cs0=e,this.sShowID=s.default.gi().iAid+"_"+r.default.GetSecond(),this.rewardedVideoAd.show().then(function(){t.bADShowing=!0,console.log("激励视频 广告显示"),o.default.gi().AdSubmit(2)}).catch(function(){videoAd.load().then(function(){return videoAd.show().then(function(){t.bADShowing=!0,console.log("激励视频 广告显示")})}).catch(function(e){console.log("激励视频 广告显示失败")})})}}]),XAD}();i.default=u,u.pp=null,u.gi=function(){return null==u.pp&&(u.pp=new u),u.pp},u.ADID=[["",""],["",""],["57d1e9e0bee650f470300e39a3e2b886",""],["502df806130ad8e795b280799dc9a83a",""]]},{"../XDefine":4,"./BridgeInterface":29,"./PublicInterface":30,"./SDK_XiYou":31}],34:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=void 0,r=function(){function Config(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Config),n)return n;n=this,this.parameter={debug:!1,appid:"",appkey:"",master_id:"",channel_id:"",package_id:"",package_name:"",app_version:"",sandbox:!0}}return a(Config,[{key:"debugState",set:function(e){this.parameter.debug=!!e},get:function(){return this.parameter.debug}},{key:"appId",set:function(e){this.parameter.appid=e},get:function(){return this.parameter.appid}},{key:"appKey",set:function(e){if(""===e)throw new Error("appkey 不能为空");this.parameter.appkey=e},get:function(){return this.parameter.appkey}},{key:"masterId",set:function(e){this.parameter.master_id=e},get:function(){return this.parameter.master_id}},{key:"channelId",set:function(e){this.parameter.channel_id=e},get:function(){return this.parameter.channel_id}},{key:"packageId",set:function(e){this.parameter.package_id=e},get:function(){return this.parameter.package_id}},{key:"packageName",set:function(e){this.parameter.package_name=e},get:function(){return this.parameter.package_name}},{key:"appVersion",set:function(e){this.parameter.app_version=e},get:function(){return this.parameter.app_version}},{key:"sandbox",set:function(e){this.parameter.sandbox=!!e},get:function(){return this.parameter.sandbox}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new Config),this.instance}}]),Config}();i.default=r},{}],35:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../utils/baseparameter")),r=_interopRequireDefault(e("../utils/gameserver")),s=_interopRequireDefault(e("../utils/gamedatas")),o=_interopRequireDefault(e("../utils/reportanalytics")),u=_interopRequireDefault(e("../config")),l=_interopRequireDefault(e("../plat/qq/base")),f=_interopRequireDefault(e("../plat/qq/user")),h=_interopRequireDefault(e("../plat/qq/pay")),c=_interopRequireDefault(e("../utils/common")),d=_interopRequireDefault(e("../utils/constant")),p=_interopRequireDefault(e("../utils/event")),_=_interopRequireDefault(e("../utils/userinfo")),g=_interopRequireDefault(e("../utils/base64"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var m=["action_type","ad_id","show_id","server_sid","user_id"],y=[1,2,3,4],v=void 0,b=function(){function Quleduo(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Quleduo),v)return v;v=this,this.base=new l.default,this.user=new f.default,this.pay=new h.default,this.baseParams=new n.default,this.gameServer=new r.default,this.gameDatas=new s.default,this.analytics=new o.default,this.userInfo=new _.default,this.base64=new g.default}return a(Quleduo,[{key:"init",value:function(e){c.default.xylog("init config",u.default.getInstance()),this.base.init(e,function(){setTimeout(function(){v.analyticsLaunch()},1e3),p.default.getInstance().emit("onInitResult",{msg:"SDK初始化成功",status:c.default.Status().Success})}),v.analyticsSystemLaunch()}},{key:"authorize",value:function(){this.user.authorize()}},{key:"login",value:function(){this.user.login(function(e,t){switch(e){case d.default.Login().__LoginSuccess__:v.token(t);break;case d.default.Login().__LoginFail__:v.loginResponse(t);break;case d.default.Login().__LoginReRun__:v.login()}})}},{key:"token",value:function(e){var t=this.baseParams.getQueryParam();t.sid=this.base64.encode(e.sid),t.device_id=this.baseParams.UUID,c.default.xylog("登录API请求参数：",t),c.default.post("oauth/token","post",t,function(t){if(c.default.xylog("success",t.data),200===t.data.status){var i=t.data.data;v.userInfo.uid=i.sdkUserID,v.userInfo.openid=i.openid,v.userInfo.token=i.token,v.userInfo.whiteip=i.isWhiteIP,v.loginResponse({token:i.token,userId:i.openid,msg:"登录成功",status:c.default.Status().Success}),e.callback()}else v.loginResponse({msg:"登录失败",status:c.default.Status().Fail})},function(e){v.loginResponse(e)})}},{key:"loginResponse",value:function(e){c.default.xylog("loginResponse",e),p.default.getInstance().emit("onLoginResult",e)}},{key:"doPay",value:function(e){this.pay.pay(e)}},{key:"adSubmit",value:function(e){var t=Object.keys(e);for(var i in m){var a=m[i];if(!t.includes(a))throw new Error("广告上报缺少参数："+a)}var n=e.action_type;if(!y.includes(n))throw new Error("广告上报action_type值错误，取值范围为："+y+", 当前值为："+n);this.analyticsAD(e)}},{key:"requestAvailableServer",value:function(){this.gameServer.getServerList()}},{key:"submitExtraData",value:function(e){this.gameDatas.report(e)}},{key:"onShareAppMessage",value:function(e){this.base.onShareAppMessage(e,function(e){v.analyticsShare(e)})}},{key:"shareAppMessage",value:function(e){this.base.shareAppMessage(e,function(e){v.analyticsShare(e)})}},{key:"analyticsSystemLaunch",value:function(){var e=this.baseParams.getLaunchOptions();e.apid=u.default.getInstance().appId,e.gc=this.baseParams.getGameInfo(),Object.assign(e,{ic:"TrackEvent",cat:"MiniGame",act:"LaunchOptions"}),this.analytics.send(e)}},{key:"analyticsLaunch",value:function(){var e=this.baseParams.getAnalyticsLaunch();Object.assign(e,{ic:"TrackEvent",cat:"MiniGame",act:"Start"}),c.default.xylog("analyticsLaunch",e),this.analytics.send(e)}},{key:"analyticsAD",value:function(e){var t=this.baseParams.getAnalyticsAD();Object.assign(e,t,{ic:"TrackEvent",cat:"GuangGao",act:"Data"}),c.default.xylog("analyticsAD",e),this.analytics.send(e)}},{key:"analyticsShare",value:function(e){var t=this.baseParams.getAnalyticsShare();Object.assign(t,{ic:"TrackEvent",cat:"User",act:"Share",share_id:e.share_id,share_result:1,share_content:e.title,user_id:this.userInfo.openid}),c.default.xylog("analyticsShare",t),this.analytics.send(t)}},{key:"getCurrFlag",value:function(){if(!this.baseParams)throw new Error("请在初始化成功后调用");return this.baseParams.getSdkInfo().package_id}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new Quleduo),this.instance}}]),Quleduo}();i.default=b},{"../config":34,"../plat/qq/base":36,"../plat/qq/pay":38,"../plat/qq/user":39,"../utils/base64":40,"../utils/baseparameter":41,"../utils/common":42,"../utils/constant":43,"../utils/event":44,"../utils/gamedatas":46,"../utils/gameserver":47,"../utils/reportanalytics":51,"../utils/userinfo":52}],36:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../../utils/common")),r=_interopRequireDefault(e("../../utils/baseparameter")),s=_interopRequireDefault(e("../../utils/reportanalytics")),o=_interopRequireDefault(e("./forward"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=void 0,l=function(){function Base(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Base),u)return u;u=this,this.sdk_version="1.0.1",this.api_version="1.4"}return a(Base,[{key:"init",value:function(e,t){this.config=e,(new n.default).debugStatus=this.config.debugState,n.default.xylog("qq init",this.config),this.baseParams=new r.default,this.analytics=new s.default,this.baseParams.sdkVersion=this.sdk_version,this.baseParams.apiVersion=this.config.debugStatus?"1.3.0":this.api_version,this.bParams=this.baseParams.getQueryParam(),this.baseParams.getQueryParam().appKey=this.config.appKey,t(),qq.onShow(function(e){var t=e;n.default.xylog("onShow",t),Object.assign(t,{ic:"TrackEvent",cat:"MiniGame",act:"onShow"}),u.analytics.send(t)})}},{key:"onShareAppMessage",value:function(e,t){o.default.setForward(!0),n.default.xylog("share",e),e.share_id=n.default.getDeviceId(),o.default.onForward(e,function(){t(e)})}},{key:"shareAppMessage",value:function(e,t){n.default.xylog("share",e),e.share_id=n.default.getDeviceId(),t(e),o.default.forward(e)}}]),Base}();i.default=l},{"../../utils/baseparameter":41,"../../utils/common":42,"../../utils/reportanalytics":51,"./forward":37}],37:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=e("../../utils/common"),s=(a=r)&&a.__esModule?a:{default:a};var o=function(){function Forward(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Forward)}return n(Forward,null,[{key:"setForward",value:function(e){e?qq.showShareMenu({withShareTicket:!0}):qq.hideShareMenu()}},{key:"onForward",value:function(e,t){qq.onShareAppMessage(function(){return t(),s.default.xylog("onShareAppMessage",e),{title:e.title||"",imageUrl:e.imageUrl||"",query:Forward.formatQuery(e)}})}},{key:"forward",value:function(e){var t=Forward.formatQuery(e);s.default.xylog("shareAppMessage",t),qq.shareAppMessage({title:e.title||"",imageUrl:e.imageUrl||"",query:t})}},{key:"formatQuery",value:function(e){var t=e.query;return""===t||void 0===t?"share_id="+e.share_id:"&"===t.substring(t.length-1,t.length)?t+"share_id="+e.share_id:t+"&share_id="+e.share_id}}]),Forward}();i.default=o},{"../../utils/common":42}],38:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../../utils/common")),r=_interopRequireDefault(e("../../utils/event")),s=_interopRequireDefault(e("../../utils/baseparameter")),o=_interopRequireDefault(e("../../utils/userinfo")),u=_interopRequireDefault(e("../../config"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=void 0,f=function(){function Pay(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Pay),l)return l;l=this,this.baseParams=new s.default,this.userInfo=new o.default,this.config=u.default.getInstance()}return a(Pay,[{key:"pay",value:function(e){n.default.xylog("payParams",e);var t=e.extension;"ios"===l.baseParams.getSystemInfo().osn?l.qrCodePay(t):l.recharge(null,e,t)}},{key:"qrCodePay",value:function(e){e&&"1"===e.pm&&""!==e.qrcode?r.default.getInstance().emit("onPayResult",{msg:"二维码待支付",status:n.default.Status().Pay_Qrcode,qrcode:e.qrcode}):r.default.getInstance().emit("onPayResult",{msg:"请前往安卓端充值",status:n.default.Status().Pay_To_Android})}},{key:"deduct",value:function(e){n.default.get("pay/wx/charge","post",e,function(e){qq.setStorage({key:"paykey",data:e.data}),r.default.getInstance().emit("onPayResult",e.data),n.default.xylog(e.data)},function(e){n.default.xylog("扣款失败",e),l.response({msg:"扣款失败",status:n.default.Status().Pay_Fail})})}},{key:"recharge",value:function(e,t,i){qq.requestMidasPayment({mode:"game",prepayId:i.cpOrderId,starCurrency:i.starCurrency,setEnv:"1",success:function(e){n.default.xylog("recharge success",e),l.response({msg:"米大师支付调用成功",status:n.default.Status().Pay_Success})},fail:function(e){l.response({msg:"米大师支付调用失败",status:n.default.Status().Pay_Fail}),n.default.xylog("米大师支付调用失败：",e)}})}},{key:"response",value:function(e){r.default.getInstance().emit("onPayResult",e)}}]),Pay}();i.default=f},{"../../config":34,"../../utils/baseparameter":41,"../../utils/common":42,"../../utils/event":44,"../../utils/userinfo":52}],39:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../../utils/common")),r=_interopRequireDefault(e("../../utils/baseparameter")),s=_interopRequireDefault(e("../../utils/userinfo")),o=_interopRequireDefault(e("../../utils/base64")),u=(_interopRequireDefault(e("../../utils/event")),_interopRequireDefault(e("../../utils/constant")));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=void 0,f=function(){function User(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,User),l)return l;l=this,this.baseParams=new r.default,this.userInfo=new s.default,this.base64=new o.default,this.timeTm=0,this.loginCB=null}return a(User,[{key:"login",value:function(e){this.loginCB=e,qq.login({success:function(e){n.default.xylog("qq.login result",e),e.code?(e.sid=l.getSID(e),e.callback=function(){l.checkSession()},l.loginCB(u.default.Login().__LoginSuccess__,e)):l.loginCB(u.default.Login().__LoginFail__,{msg:"登录失败#"+e,status:n.default.Status().Fail})}.bind(this),fail:function(e){l.loginCB(u.default.Login().__LoginFail__,{msg:"登录失败#"+e,status:n.default.Status().Fail})}})}},{key:"checkSession",value:function(){0===this.timeTm?(setInterval(function(){qq.checkSession({success:function(){},fail:function(){n.default.xylog("session_key status:","session_key过期!重新登录中..."),l.loginCB(u.default.Login().__LoginReRun__)}.bind(l)})},1e4),n.default.xylog("新增 timer"),this.timeTm=1):n.default.xylog("已有 timer")}},{key:"getSID",value:function(e){return JSON.stringify({code:e.code,scene_id:this.baseParams.getLaunchOptions().scene,share_id:this.baseParams.shareId||"",referrer_appid:this.baseParams.getLaunchOptions().referrer_info.app_id||""})}}]),User}();i.default=f},{"../../utils/base64":40,"../../utils/baseparameter":41,"../../utils/common":42,"../../utils/constant":43,"../../utils/event":44,"../../utils/userinfo":52}],40:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=void 0,r=function(){function Base64(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Base64),n)return n;n=this,this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return a(Base64,[{key:"_utf8_encode",value:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}},{key:"_utf8_decode",value:function(e){for(var t="",i=0,a=c1=c2=0;i<e.length;)(a=e.charCodeAt(i))<128?(t+=String.fromCharCode(a),i++):a>191&&a<224?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&a)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),t+=String.fromCharCode((15&a)<<12|(63&c2)<<6|63&c3),i+=3);return t}},{key:"encode",value:function(e){var t,i,a,n,r,s,o,u="",l=0;for(e=this._utf8_encode(e);l<e.length;)n=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(i=e.charCodeAt(l++))>>4,s=(15&i)<<2|(a=e.charCodeAt(l++))>>6,o=63&a,isNaN(i)?s=o=64:isNaN(a)&&(o=64),u=u+this._keyStr.charAt(n)+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(o);return u}},{key:"decode",value:function(e){var t,i,a,n,r,s,o="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)t=this._keyStr.indexOf(e.charAt(u++))<<2|(n=this._keyStr.indexOf(e.charAt(u++)))>>4,i=(15&n)<<4|(r=this._keyStr.indexOf(e.charAt(u++)))>>2,a=(3&r)<<6|(s=this._keyStr.indexOf(e.charAt(u++))),o+=String.fromCharCode(t),64!=r&&(o+=String.fromCharCode(i)),64!=s&&(o+=String.fromCharCode(a));return o=this._utf8_decode(o)}}]),Base64}();i.default=r},{}],41:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./common.js")),r=_interopRequireDefault(e("../config")),s=_interopRequireDefault(e("./localbuffer"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o=void 0,u=function(){function BaseParameter(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseParameter),o)return o;o=this,this.parameter={api_version:"1.0.0",sdk_version:"1.0.0",network_type:"",share_id:"",uuid:""},this.offsetTime=!1,this._getOffsetTime(),this._getNetworkType(),this.getUUID()}return a(BaseParameter,[{key:"getUUID",value:function(){var e=qq.getStorageSync("xiyou:uuid");if(e)return this.UUID=e,e;var t=n.default.getDeviceId();return n.default.xylog("xiyou:uuid",t),qq.setStorage({key:"xiyou:uuid",data:t}),this.UUID=t,t}},{key:"getQueryParam",value:function(){var e={time:this.getTime()},t=this.getSystemInfo(),i={deb:t.deb,det:t.det,osn:t.osn,osv:t.osv,iemio:t.iemio,udid:t.udid,mac:t.mac},a=this.getSdkInfo(),r={app_id:a.app_id,channel:a.channel,package_id:a.package_id,api_version:a.api_version,sdk_version:a.sdk_version,package_name:a.package_name,version_code:a.version_code,version_name:a.version_name,idfao:""};return Object.assign(e,i,r),n.default.xylog("getQueryParam()",e),e}},{key:"getAnalyticsLaunch",value:function(){var e={ts:this.getTime()},t=r.default.getInstance(),i=this.getSystemInfo(),a=i.wxv,n=i.sr,s=i.udid,o=i.blevel,u=i.deb,l=i.det,f={weixin_version:a,sr:n,openudido:s,benchmark_level:o,osn:i.osn,osv:i.osv,device_brand:u,device_type:l},h=this.getSdkInfo(),c={apid:h.app_id,chid:h.master_id,gcid:h.channel,paid:h.package_id,pn:h.package_name,sdk_version:h.sdk_version};return Object.assign(e,f,c,{network_type:this.networkType,scene_value:this.getLaunchOptions().scene,share_id:this.shareId,share_ticket:this.getLaunchOptions().share_ticket,referrer_appid:this.getLaunchOptions().referrer_info.app_id||"",latitude:"0.0",longitude:"0.0",app_version:t.appVersion}),e}},{key:"getAnalyticsShare",value:function(){var e={ts:this.getTime()},t=this.getSdkInfo(),i={apid:t.app_id,chid:t.master_id,gcid:t.channel,paid:t.package_id,pn:t.package_name};return Object.assign(e,i),e}},{key:"getAnalyticsAD",value:function(){var e={ts:this.getTime()},t=this.getSdkInfo(),i={apid:t.app_id,chid:t.master_id,gcid:t.channel,paid:t.package_id,pn:t.package_name};return Object.assign(e,i,{iemio:"",maco:"",aid:"",mid:"",tid:""},{sv:this.parameter.sdk_version,vn:r.default.getInstance().appVersion,vc:"1",openudido:this.getUUID()}),e}},{key:"getSdkInfo",value:function(){if(this.parameter.sdk_info)return this.parameter.sdk_info;var e=r.default.getInstance(),t=this.getLaunchOptions().query;return this.shareId=t.share_id,this.parameter.sdk_info={app_id:e.appId,master_id:e.masterId,version_name:"1.0.0",version_code:"",api_version:this.parameter.api_version||"1.4",sdk_version:this.parameter.sdk_version||"1.0.0"},Object.assign(this.parameter.sdk_info,this.getGameInfo()),s.default.setStorage(s.default.KEY().ChannelId,this.parameter.sdk_info.channel),s.default.setStorage(s.default.KEY().PackageId,this.parameter.sdk_info.package_id),s.default.setStorage(s.default.KEY().PackageName,this.parameter.sdk_info.package_name),n.default.xylog("getSdkInfo() :",this.parameter.sdk_info),this.parameter.sdk_info}},{key:"getGameInfo",value:function(){var e={channel:"",package_id:"",package_name:""},t=this.getLaunchOptions().query,i=this.getLaunchOptions().referrer_info.extra_data;if(this.queryParamValid(i))return e.channel=i.gcid,e.package_id=i.paid,e.package_name=i.pn,n.default.xylog("getGameInfo--\x3ereferrer_info:",e),e;if(this.queryParamValid(t)?(e.channel=t.gcid,e.package_id=t.paid,e.package_name=t.pn):(e.channel=s.default.getChannelId(),e.package_id=s.default.getPackageId(),e.package_name=s.default.getPackageName()),this.isNull(e)){var a=r.default.getInstance();e.channel=a.channelId,e.package_id=a.packageId,e.package_name=a.packageName}return n.default.xylog("getGameInfo():",e),e}},{key:"isNull",value:function(e){for(var t=!1,i=Object.keys(e),a=0;a<i.length;a++){var r=i[a];if(""===e[r]||void 0===e[r]){n.default.xylog(r,"value is"+e[r]),t=!0;break}}return t}},{key:"queryParamValid",value:function(e){return!!(e&&e.gcid&&e.paid&&e.pn)&&(""!==e.gcid&&""!==e.paid&&""!==e.pn)}},{key:"getLaunchOptions",value:function(){if(this.parameter.launch_options)return this.parameter.launch_options;var e=qq.getLaunchOptionsSync(),t={};return e.referrerInfo&&e.referrerInfo.appId&&(t={app_id:e.referrerInfo.appId,extra_data:e.referrerInfo.extraData||""}),this.parameter.launch_options={scene:e.scene,is_sticky:!!e.isSticky,share_ticket:e.shareTicket||"",referrer_info:t,query:e.query},n.default.xylog("getLaunchOptions()",this.parameter.launch_options),this.parameter.launch_options}},{key:"getSystemInfo",value:function(){if(this.parameter.system_info)return this.parameter.system_info;var e=qq.getSystemInfoSync();return this.parameter.system_info={deb:e.brand,det:e.model,osn:e.platform,osv:e.system,iemio:"",udid:this.getUUID(),mac:"",sr:e.screenWidth+"x"+e.screenHeight,wxv:e.version,blevel:e.benchmarkLevel||"-1"},this.parameter.system_info}},{key:"_getNetworkType",value:function(){qq.getNetworkType({success:function(e){n.default.xylog("getNetworkType",e),o.networkType=e.networkType}.bind(this),fail:function(){}.bind(this)})}},{key:"getTime",value:function(){var e=0;Object.is(this.offsetTime,!1)?this._getOffsetTime():e=this.offsetTime;var t=Date.parse(new Date);return(t/=1e3)-e}},{key:"_getOffsetTime",value:function(){qq.request({url:"https://analytics.52xiyou.com/tools/timestamp",success:function(e){var t=Date.parse(new Date);t/=1e3,this.offsetTime=e.data-t},fail:function(e){n.default.xylog("获取时间偏移量失败，不设置偏移量")}})}},{key:"apiVersion",set:function(e){this.parameter.api_version=e},get:function(){return this.parameter.api_version}},{key:"sdkVersion",set:function(e){this.parameter.sdk_version=e},get:function(){return this.parameter.sdk_version}},{key:"networkType",set:function(e){this.parameter.network_type=e},get:function(){return this.parameter.network_type}},{key:"shareId",set:function(e){this.parameter.share_id=e||""},get:function(){return this.parameter.share_id}},{key:"UUID",set:function(e){this.parameter.uuid=e},get:function(){return this.parameter.uuid}}]),BaseParameter}();i.default=u},{"../config":34,"./common.js":42,"./localbuffer":48}],42:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../config")),r=_interopRequireDefault(e("./constant"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s=e("./md5"),o=!0,u=function(){function Common(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Common)}return a(Common,[{key:"debugStatus",set:function(e){o=!!e},get:function(){return o}}],[{key:"currentTime",value:function(){var e=new Date;return"["+(e.getFullYear()+"年"+(e.getMonth()+1)+"月"+e.getDate()+"日 "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds())+"]"}},{key:"xylog",value:function(){var e=Common.currentTime(),t=[].slice.call(arguments,0,arguments.length).slice(0,arguments.length);t.unshift(e),Object.assign(arguments,t),arguments.length=t.length,o&&console.log&&("function"==typeof console.log.apply?console.log.apply(console,arguments):console.log(arguments[0]))}},{key:"getDeviceId",value:function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),t=new RegExp("-","g");return e=e.replace(t,"")}},{key:"request",value:function(e){var t=Common.buildSortMD5Sign(e.data),i=void 0;i=-1!==e.url.indexOf("http://")||-1!==e.url.indexOf("https://")?e.url:r.default.getHostMain()+e.url,Common.xylog("url",i,"method",e.method,"data",t),qq.request({header:{"content-type":"application/x-www-form-urlencoded"},method:e.method,url:i,data:t,success:e.success,fail:e.fail})}},{key:"get",value:function(e,t,i,a,n){Common.request({method:"GET",url:e,data:i,success:a,fail:n})}},{key:"post",value:function(e,t,i,a,n){Common.request({method:"POST",url:e,data:i,success:a,fail:n})}},{key:"buildSortMD5Sign",value:function(e){for(var t=Object.keys(e).sort(),i={},a=0;a<t.length;a++)i[t[a]]=e[t[a]];var r=Object.keys(i).sort(),o="";for(a=0;a<r.length;a++)o+=r[a]+"="+i[r[a]]+"&";return o=o.substring(0,o.length-1),o+=n.default.getInstance().appKey,i.sign=s.hex_md5(o),i.sign_type="MD5",i}},{key:"respJson",value:function(e,t,i){return{msg:e,status:t?Common.Status().Success:Common.Status().Fail,data:i}}},{key:"compare",value:function(e){return function(t,i){var a=t[e],n=i[e];return a<n?1:a>n?-1:0}}},{key:"Status",value:function(){return{Success:1,Fail:0,Pay_Success:9,Pay_Fail:10,Pay_Wait:11,Pay_Cancel:12,Pay_Qrcode:13,Pay_To_Android:14}}},{key:"isRealNum",value:function(e){return""!==e&&null!=e&&!isNaN(e)}},{key:"isStrEmpty",value:function(e){return void 0===e||null==e||""==e}}]),Common}();i.default=u},{"../config":34,"./constant":43,"./md5":49}],43:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=function(){function Constant(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Constant)}return a(Constant,null,[{key:"debug",value:function(){return!1}},{key:"getHostData",value:function(){return"https://api.xiyousdk.com/"}},{key:"getHostMain",value:function(){return"https://api.xiyousdk.com/"}},{key:"getHostStatic",value:function(){return"https://apistatic.xiyousdk.com/"}},{key:"Actions",value:function(){return{extra_data:"report/extraData",get_services:"server/all",get_order_id:"pay/getOrderID"}}},{key:"API",value:function(){return{DataReport:Constant.getHostData()+Constant.Actions().extra_data,DataAnalytics:"https://analytics.52xiyou.com/mo.json",GetServices:Constant.getHostStatic()+Constant.Actions().get_services,GetOrderId:Constant.getHostMain()+Constant.Actions().get_order_id,Login:"",Pay:""}}},{key:"Login",value:function(){return{__LoginSuccess__:1,__LoginFail__:-1,__LoginReRun__:0}}}]),Constant}();i.default=n},{}],44:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=function(){function Event(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Event);this.eventsCache={}}return a(Event,[{key:"isType",value:function(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}},{key:"isString",value:function(){return this.isType("String")}},{key:"on",value:function(e,t){return t?((this.eventsCache[e]||(this.eventsCache[e]=[])).push(t),this.eventsCache):this.eventsCache}},{key:"off",value:function(e,t){if(!e&&!t)return this.eventsCache.events=this.eventsCache={},this.eventsCache;var i=this.eventsCache[e];if(i)if(t)for(var a=i.length-1;a>=0;a--)i[a]===t&&i.splice(a,1);else delete this.eventsCache[e];return this.eventsCache}},{key:"emit",value:function(e,t,i){var a,n=this.eventsCache[e];if(n)for(n=n.slice(),t&&!this.isString(t)&&t.length||(t=[t]);a=n.shift();)a.apply(i||this,t);return this.eventsCache}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new Event),this.instance}}]),Event}();i.default=n},{}],45:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./baseparameter")),r=_interopRequireDefault(e("./common")),s=_interopRequireDefault(e("./constant")),o=_interopRequireDefault(e("./userinfo"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var u=void 0,l=function(){function GameDataEntity(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GameDataEntity),u=this,this.baseParams=new n.default,this.userInfo=new o.default,this.parameter={url:"",type:"",sid:"",sname:"",rid:"",rname:"",rlevel:"",money:"",rctime:"",rltime:"",pfid:"0",pfname:"无",gender:"无",power:"",partyid:"0",partyname:"无",partyrid:"0",partyrname:"无",openid:"",ts:"",pn:"",openudido:"",version_name:"1.0.0",version_code:"1"},this.parameter.url=s.default.API().DataReport;var e=this.baseParams.getSdkInfo();this.parameter.pn=e.package_name,this.parameter.ts=this.baseParams.getTime(),this.parameter.openudido=this.baseParams.getUUID(),this.parameter.openid=this.userInfo.openid?this.userInfo.openid:""}return a(GameDataEntity,[{key:"validString",value:function(e,t){if(r.default.isStrEmpty(e))throw new Error(t+" 不能为空");return!0}},{key:"validInt",value:function(e,t){if(!r.default.isRealNum(e))throw new Error(t+" 必须是整型");return!0}},{key:"validLong",value:function(e,t){if(10!=String(e).length)throw new Error(t+" 必须是10位数字");return!0}},{key:"dataType",set:function(e){if("1"!=e&&"2"!=e&&"3"!=e&&"4"!=e)throw new Error("上报类型仅支持[1：登录，2，创建角色，3：升级，4退出]");this.parameter.type=e},get:function(){return this.parameter.type}},{key:"serverId",set:function(e){if(!r.default.isRealNum(e)||parseInt(e)<1)throw new Error("区服ID必须是整型且大于1");this.parameter.sid=e},get:function(){return this.parameter.sid}},{key:"serverName",set:function(e){u.validString(e,"区服名")&&(this.parameter.sname=e)},get:function(){return this.parameter.sname}},{key:"roleId",set:function(e){u.validInt(e,"'角色ID")&&(this.parameter.rid=e)},get:function(){return this.parameter.rid}},{key:"roleName",set:function(e){u.validString(e,"角色名")&&(this.parameter.rname=e)},get:function(){return this.parameter.rname}},{key:"roleLevel",set:function(e){u.validInt(e,"'角色等级")&&(this.parameter.rlevel=e)},get:function(){return this.parameter.rlevel}},{key:"moneyNum",set:function(e){u.validString(e,"游戏币数量")&&(this.parameter.money=e)},get:function(){return this.parameter.money}},{key:"roleCTime",set:function(e){u.validLong(e,"角色创建时间")&&(this.parameter.rctime=e)},get:function(){return this.parameter.rctime}},{key:"roleLevelIMTime",set:function(e){u.validLong(e,"角色等级变化时间")&&(this.parameter.rltime=e)},get:function(){return this.parameter.rltime}},{key:"professionID",set:function(e){this.parameter.pfid=e},get:function(){return this.parameter.pfid}},{key:"profession",set:function(e){this.parameter.pfname=e},get:function(){return this.parameter.pfname}},{key:"gender",set:function(e){this.parameter.gender=e},get:function(){return this.parameter.gender}},{key:"power",set:function(e){this.parameter.power=e},get:function(){return this.parameter.power}},{key:"vip",set:function(e){this.parameter.vip=e},get:function(){return this.parameter.vip}},{key:"partyID",set:function(e){this.parameter.partyid=e},get:function(){return this.parameter.partyid}},{key:"partyName",set:function(e){this.parameter.partyname=e},get:function(){return this.parameter.partyname}},{key:"partyRoleID",set:function(e){this.parameter.partyrid=e},get:function(){return this.parameter.partyrid}},{key:"partyRoleName",set:function(e){this.parameter.partyrname=e},get:function(){return this.parameter.partyrname}}]),GameDataEntity}();i.default=l},{"./baseparameter":41,"./common":42,"./constant":43,"./userinfo":52}],46:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./gamedataentity")),r=_interopRequireDefault(e("./queue")),s=_interopRequireDefault(e("./localbuffer")),o=_interopRequireDefault(e("./common")),u=_interopRequireDefault(e("./constant")),l=_interopRequireDefault(e("./baseparameter"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var f=6e4,h=void 0,c=function(){function GameDatas(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GameDatas),h)return h;h=this,this.queue=new r.default,this.baseParams=new l.default,setInterval(function(){h.autoCheckQueue()},f)}return a(GameDatas,[{key:"report",value:function(e){for(var t in this.gameDatas=new n.default,e)this.gameDatas[t]=e[t];var i=this.gameDatas.parameter;this.setLocalStorage(i)}},{key:"setLocalStorage",value:function(e){"3"===e.type?(o.default.xylog("role upgrade ignore"),s.default.setStorage(s.default.KEY().RoleUpgrade,e)):this.submitToServer(e)}},{key:"submitToServer",value:function(e){Object.assign(e,this.baseParams.getQueryParam()),o.default.xylog("data report",e);var t=e.url?e.url:u.default.API().DataAnalytics;qq.request({url:t,header:{"content-type":"application/x-www-form-urlencoded"},method:"post",data:e,success:function(e){o.default.xylog("data report success"),h.queue.dequeue()},fail:function(t){o.default.xylog("data report fail#",t),h.queue.enqueue(e)}})}},{key:"autoCheckQueue",value:function(){if(!(h.queue.size()<1)){o.default.xylog("find queue data , size:"+h.queue.size());var e=h.queue.front();h.submitToServer(e),o.default.xylog("submit a queue data to server")}}}]),GameDatas}();i.default=c},{"./baseparameter":41,"./common":42,"./constant":43,"./gamedataentity":45,"./localbuffer":48,"./queue":50}],47:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./common")),r=_interopRequireDefault(e("./userinfo")),s=_interopRequireDefault(e("./baseparameter")),o=_interopRequireDefault(e("./event")),u=_interopRequireDefault(e("./constant"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var l=void 0,f=function(){function GameServer(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GameServer),l)return l;l=this,this.baseParams=new s.default,this.userInfo=new r.default,this.whiteip=this.userInfo.whiteip}return a(GameServer,[{key:"getServerList",value:function(e){console.log("enter");var t=qq.getStorageSync("xiyou:servers:entity");if(t){var i=Date.parse(new Date)/1e3,a=qq.getStorageSync("xiyou:servers:time");if(t&&i<a)return n.default.xylog("Read local server buffer"),void o.default.getInstance().emit("onServerListResult",n.default.respJson("获取区服列表成功",!0,t))}var r=this.baseParams.getSdkInfo(),s=this.baseParams.getQueryParam();s.app_id=r.app_id,s.package_id=r.package_id,n.default.get(u.default.API().GetServices,"post",s,function(e){var t=e.data;if(200===t.status){var i=l.parseServer(t.data.servers),a=Date.parse(new Date)/1e3+300;qq.setStorage({key:"xiyou:servers:time",data:a}),qq.setStorage({key:"xiyou:servers:entity",data:i}),o.default.getInstance().emit("onServerListResult",n.default.respJson("获取区服列表成功",!0,i))}else o.default.getInstance().emit("onServerListResult",n.default.respJson("获取区服列表失败#"+e,!1,null)),n.default.xylog("获取区服列表失败：",e)},function(e){o.default.getInstance().emit("onServerListResult",n.default.respJson("获取区服列表失败#"+e,!1,null)),n.default.xylog(e)})}},{key:"parseServer",value:function(e){var t=[];e.forEach(function(e,i,a){var r=parseInt(e.pagesize),s=e.customnames,o=e.list;if(null!=o&&0!==o.length){o.forEach(function(e,t,i){0!==e.type||l.whiteip||o.splice(t,1)});var u=[],f=parseInt(o.length/r);e.list.length%r!=0&&(f+=1);for(var h=0;h<f;h++){var c={},d=h*r,p=(h+1)*r;p>=o.length&&(p=o.length);var _=l.subArrayRangAndSort(d,p,o);c.list=_,c.page=u.length+1,c.name=d+1+"—"+p+"服",_<=1&&(c.name=d+1+"服"),u.length<s.length&&(c.name=s[u.length]),u[u.length]=c}var g={};g.categoryname=e.categoryname,g.groups=u,g.pagesize=r,g.platform=e.platform,t[t.length]=g}else n.default.xylog(e.categoryname,"server list is empty")});var i={};return i.servers=t,JSON.stringify(i)}},{key:"subArrayRangAndSort",value:function(e,t,i){for(var a=[],r=0,s=e;s<t;s++)a[r]=i[s],r++;return a.sort(n.default.compare("serverid")),a}}]),GameServer}();i.default=f},{"./baseparameter":41,"./common":42,"./constant":43,"./event":44,"./userinfo":52}],48:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=function(){function LocalBuffer(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LocalBuffer)}return a(LocalBuffer,null,[{key:"setStorage",value:function(e,t){qq.setStorage({key:e,data:t})}},{key:"getStorage",value:function(e){return qq.getStorageSync(e)}},{key:"getChannelId",value:function(){return qq.getStorageSync(LocalBuffer.KEY().ChannelId)}},{key:"getPackageId",value:function(){return qq.getStorageSync(LocalBuffer.KEY().PackageId)}},{key:"getPackageName",value:function(){return qq.getStorageSync(LocalBuffer.KEY().PackageName)}},{key:"clear",value:function(){try{qq.clearStorageSync()}catch(e){}}},{key:"KEY",value:function(){return{UUID:"xiyou:uuid",ServerTime:"xiyou:servers:time",ServerEntity:"xiyou:servers:entity",RoleUpgrade:"xiyou:role:upgrade",AppId:"xiyou:app:id",MasterId:"xiyou:master:id",ChannelId:"xiyou:channel:id",PackageId:"xiyou:package:id",PackageName:"xiyou:package:name"}}}]),LocalBuffer}();i.default=n},{}],49:[function(e,t,i){"use strict";function RotateLeft(e,t){return e<<t|e>>>32-t}function AddUnsigned(e,t){var i,a,n,r,s;return n=2147483648&e,r=2147483648&t,s=(1073741823&e)+(1073741823&t),(i=1073741824&e)&(a=1073741824&t)?2147483648^s^n^r:i|a?1073741824&s?3221225472^s^n^r:1073741824^s^n^r:s^n^r}function FF(e,t,i,a,n,r,s){return e=AddUnsigned(e,AddUnsigned(AddUnsigned(function(e,t,i){return e&t|~e&i}(t,i,a),n),s)),AddUnsigned(RotateLeft(e,r),t)}function GG(e,t,i,a,n,r,s){return e=AddUnsigned(e,AddUnsigned(AddUnsigned(function(e,t,i){return e&i|t&~i}(t,i,a),n),s)),AddUnsigned(RotateLeft(e,r),t)}function HH(e,t,i,a,n,r,s){return e=AddUnsigned(e,AddUnsigned(AddUnsigned(function(e,t,i){return e^t^i}(t,i,a),n),s)),AddUnsigned(RotateLeft(e,r),t)}function II(e,t,i,a,n,r,s){return e=AddUnsigned(e,AddUnsigned(AddUnsigned(function(e,t,i){return t^(e|~i)}(t,i,a),n),s)),AddUnsigned(RotateLeft(e,r),t)}function WordToHex(e){var t,i="",a="";for(t=0;t<=3;t++)i+=(a="0"+(e>>>8*t&255).toString(16)).substr(a.length-2,2);return i}t.exports={hex_md5:function(e){var t,i,a,n,r,s,o,u,l,f=Array();for(f=function(e){for(var t,i=e.length,a=i+8,n=16*((a-a%64)/64+1),r=Array(n-1),s=0,o=0;o<i;)s=o%4*8,r[t=(o-o%4)/4]=r[t]|e.charCodeAt(o)<<s,o++;return s=o%4*8,r[t=(o-o%4)/4]=r[t]|128<<s,r[n-2]=i<<3,r[n-1]=i>>>29,r}(e=function(e){for(var t="",i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}(e)),s=1732584193,o=4023233417,u=2562383102,l=271733878,t=0;t<f.length;t+=16)i=s,a=o,n=u,r=l,s=FF(s,o,u,l,f[t+0],7,3614090360),l=FF(l,s,o,u,f[t+1],12,3905402710),u=FF(u,l,s,o,f[t+2],17,606105819),o=FF(o,u,l,s,f[t+3],22,3250441966),s=FF(s,o,u,l,f[t+4],7,4118548399),l=FF(l,s,o,u,f[t+5],12,1200080426),u=FF(u,l,s,o,f[t+6],17,2821735955),o=FF(o,u,l,s,f[t+7],22,4249261313),s=FF(s,o,u,l,f[t+8],7,1770035416),l=FF(l,s,o,u,f[t+9],12,2336552879),u=FF(u,l,s,o,f[t+10],17,4294925233),o=FF(o,u,l,s,f[t+11],22,2304563134),s=FF(s,o,u,l,f[t+12],7,1804603682),l=FF(l,s,o,u,f[t+13],12,4254626195),u=FF(u,l,s,o,f[t+14],17,2792965006),s=GG(s,o=FF(o,u,l,s,f[t+15],22,1236535329),u,l,f[t+1],5,4129170786),l=GG(l,s,o,u,f[t+6],9,3225465664),u=GG(u,l,s,o,f[t+11],14,643717713),o=GG(o,u,l,s,f[t+0],20,3921069994),s=GG(s,o,u,l,f[t+5],5,3593408605),l=GG(l,s,o,u,f[t+10],9,38016083),u=GG(u,l,s,o,f[t+15],14,3634488961),o=GG(o,u,l,s,f[t+4],20,3889429448),s=GG(s,o,u,l,f[t+9],5,568446438),l=GG(l,s,o,u,f[t+14],9,3275163606),u=GG(u,l,s,o,f[t+3],14,4107603335),o=GG(o,u,l,s,f[t+8],20,1163531501),s=GG(s,o,u,l,f[t+13],5,2850285829),l=GG(l,s,o,u,f[t+2],9,4243563512),u=GG(u,l,s,o,f[t+7],14,1735328473),s=HH(s,o=GG(o,u,l,s,f[t+12],20,2368359562),u,l,f[t+5],4,4294588738),l=HH(l,s,o,u,f[t+8],11,2272392833),u=HH(u,l,s,o,f[t+11],16,1839030562),o=HH(o,u,l,s,f[t+14],23,4259657740),s=HH(s,o,u,l,f[t+1],4,2763975236),l=HH(l,s,o,u,f[t+4],11,1272893353),u=HH(u,l,s,o,f[t+7],16,4139469664),o=HH(o,u,l,s,f[t+10],23,3200236656),s=HH(s,o,u,l,f[t+13],4,681279174),l=HH(l,s,o,u,f[t+0],11,3936430074),u=HH(u,l,s,o,f[t+3],16,3572445317),o=HH(o,u,l,s,f[t+6],23,76029189),s=HH(s,o,u,l,f[t+9],4,3654602809),l=HH(l,s,o,u,f[t+12],11,3873151461),u=HH(u,l,s,o,f[t+15],16,530742520),s=II(s,o=HH(o,u,l,s,f[t+2],23,3299628645),u,l,f[t+0],6,4096336452),l=II(l,s,o,u,f[t+7],10,1126891415),u=II(u,l,s,o,f[t+14],15,2878612391),o=II(o,u,l,s,f[t+5],21,4237533241),s=II(s,o,u,l,f[t+12],6,1700485571),l=II(l,s,o,u,f[t+3],10,2399980690),u=II(u,l,s,o,f[t+10],15,4293915773),o=II(o,u,l,s,f[t+1],21,2240044497),s=II(s,o,u,l,f[t+8],6,1873313359),l=II(l,s,o,u,f[t+15],10,4264355552),u=II(u,l,s,o,f[t+6],15,2734768916),o=II(o,u,l,s,f[t+13],21,1309151649),s=II(s,o,u,l,f[t+4],6,4149444226),l=II(l,s,o,u,f[t+11],10,3174756917),u=II(u,l,s,o,f[t+2],15,718787259),o=II(o,u,l,s,f[t+9],21,3951481745),s=AddUnsigned(s,i),o=AddUnsigned(o,a),u=AddUnsigned(u,n),l=AddUnsigned(l,r);return(WordToHex(s)+WordToHex(o)+WordToHex(u)+WordToHex(l)).toUpperCase()}}},{}],50:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=new WeakMap,r=function(){function Queue(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Queue),n.set(this,[])}return a(Queue,[{key:"enqueue",value:function(){var e=n.get(this);e.push.apply(e,arguments)}},{key:"dequeue",value:function(){return n.get(this).shift()}},{key:"front",value:function(){return n.get(this)[0]}},{key:"isEmpty",value:function(){return 0==n.get(this).length}},{key:"size",value:function(){return n.get(this).length}},{key:"clear",value:function(){n.set(this,[])}},{key:"print",value:function(){console.log(this.toString())}},{key:"toString",value:function(){return n.get(this).toString()}}]),Queue}();i.default=r},{}],51:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("./common")),r=_interopRequireDefault(e("./baseparameter"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var s=function(){function ReportAnalytics(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ReportAnalytics),this.baseParams=new r.default}return a(ReportAnalytics,[{key:"sendEvent",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e.length>=255||t.length>=255||i.length>=255)return!1;var a={ic:"TrackEvent",cat:e,act:t};this.send(a)}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/mo.json";if(!(e=e||{}).ic||""===e.ic)return"";e._t=e._t||Date.now(),n.default.post("https://analytics.52xiyou.com"+i,t,e,function(e){n.default.xylog("RequestSuccess",e)},function(e){n.default.xylog("RequestFail",e)})}},{key:"parseQueryString",value:function(e){var t={};if(e.length>0){var i="?"===e.charAt(0)?e.substring(1):e;if(i.length>0)for(var a=i.split("&"),n=0;n<a.length;n++)if(a[n].length>0){var r=a[n].split("=");try{var s=decodeURIComponent(r[0]),o=r.length>1?decodeURIComponent(r[1]):"";r.length>1&&(t[s]=o)}catch(e){}}}return t}},{key:"unParseQueryString",value:function(e){var t=[],i=void 0,a=void 0;for(i in e)e.hasOwnProperty&&!e.hasOwnProperty(i)||(a=e[i],t.push(encodeURIComponent(i)+"="+encodeURIComponent(a.slice(0,200))));var n=t.join("&");return n.length>0?"?"+n:"?"}},{key:"getQueryString",value:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?unescape(i[2]):null}},{key:"parseUrl",value:function(e){var t=document.createElement("a");return t.href=e,""===t.host&&(t.href=t.href),{hash:t.hash,host:t.host,hostname:t.hostname,pathname:t.pathname,protocol:t.protocol,query:this.parseQueryString(t.search)}}},{key:"unParseUrl",value:function(e){return(e.protocol||"")+"//"+(e.host||"")+(e.pathname||"")+this.unParseQueryString(e.query)+(e.hash||"")}},{key:"isString",value:function(e){return"[object String]"===Object.prototype.toString.call(e)}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"parseString",value:function(e){return e.replace(/(^\s*)|(\s*$)/g,"").toLowerCase()}},{key:"parseArray",value:function(e,t){for(var i=[],a=0;_val=e[a];a++)i.push(this.parseString(_val+""));return i.join(t||"&")}}]),ReportAnalytics}();i.default=s},{"./baseparameter":41,"./common":42}],52:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=void 0,r=function(){function UserInfo(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserInfo),n)return n;n=this,this.parameter={uid:"",openid:"",token:"",whiteip:!0}}return a(UserInfo,[{key:"uid",set:function(e){this.parameter.uid=e},get:function(){return this.parameter.uid}},{key:"openid",set:function(e){this.parameter.openid=e},get:function(){return this.parameter.openid}},{key:"token",set:function(e){this.parameter.token=e},get:function(){return this.parameter.token}},{key:"whiteip",set:function(e){this.parameter.whiteip="1"==e},get:function(){return this.parameter.whiteip}}]),UserInfo}();i.default=r},{}],53:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=e("./core/quleduo"),s=(a=r)&&a.__esModule?a:{default:a};var o=void 0,u=function(){function XiYouGameSDK(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XiYouGameSDK),o)return o;o=this,this.quleduo=s.default.getInstance()}return n(XiYouGameSDK,[{key:"init",value:function(e){this.quleduo.init(e)}},{key:"login",value:function(){this.quleduo.login()}},{key:"authorize",value:function(){this.quleduo.authorize()}},{key:"pay",value:function(e){this.quleduo.doPay(e)}},{key:"adSubmit",value:function(e){this.quleduo.adSubmit(e)}},{key:"requestAvailableServer",value:function(){this.quleduo.requestAvailableServer()}},{key:"submitExtraData",value:function(e){this.quleduo.submitExtraData(e)}},{key:"onShareAppMessage",value:function(e){this.quleduo.onShareAppMessage(e)}},{key:"shareAppMessage",value:function(e){this.quleduo.shareAppMessage(e)}},{key:"getCurrFlag",value:function(){return this.quleduo.getCurrFlag()}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new XiYouGameSDK),this.instance}}]),XiYouGameSDK}();i.default=u},{"./core/quleduo":35}],54:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=function(){function M_POINT(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M_POINT),this.Set(e,t)}return a(M_POINT,[{key:"Set",value:function(e,t){this.x=e,this.y=t}}]),M_POINT}();i.default=n,n.pp=new Array,n.gi=function(e){return null==n.pp[e]&&(n.pp[e]=new n),n.pp[e]}},{}],55:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}();var n=function(){function M_SEGMENT(e,t,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M_SEGMENT),this.Set(e,t,i,a)}return a(M_SEGMENT,[{key:"Set",value:function(e,t,i,a){this.x1=e,this.y1=t,this.x2=i,this.y2=a,this.Calc()}},{key:"Calc",value:function(){this.x1==this.x2?this.k=99999999:this.k=(this.y2-this.y1)/(this.x2-this.x1),this.b=this.y1-this.k*this.x1}}]),M_SEGMENT}();i.default=n,n.pp=new Array,n.gi=function(e){return null==n.pp[e]&&(n.pp[e]=new n),n.pp[e]}},{}],56:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=_interopRequireDefault(e("./M_SEGMENT")),n=_interopRequireDefault(e("./M_POINT"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var r=function XMath(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,XMath)};i.default=r,r.vector_devide=function(e,t,i,a){if(Math.abs(i)<1e-7&&Math.abs(a)<1e-7)r.v1x=i,r.v1y=a;else{var n=(e-i)*i+(t-a)*a;r.v1x=i+(n/=i*i+a*a)*i,r.v1y=a+n*a}r.v2x=e-r.v1x,r.v2y=t-r.v1y},r.v1x=0,r.v1y=0,r.v2x=0,r.v2y=0,r.angle_aox=function(e,t){var i;return-1e-7<e&&e<1e-7?t>0?Math.PI/2:3*Math.PI/2:(i=Math.atan(t/e),e<0&&(i+=Math.PI),i<0&&(i+=2*Math.PI),i)},r.angle_aob=function(e,t,i,a,n,r){0!=i&&(e-=i,n-=i),0!=a&&(t-=a,r-=a);var s=Math.sqrt(e*e+t*t),o=Math.sqrt(n*n+r*r),u=Math.sqrt((n-e)*(n-e)+(r-t)*(r-t)),l=2*s*o;return l<1e-7&&(l=1e-7),Math.acos((s*s+o*o-u*u)/(2*s*o))},r.angle_90=function(e,t,i,a,n,r){var s=Math.sqrt(e*e+t*t),o=Math.sqrt(n*n+r*r),u=Math.sqrt((n-e)*(n-e)+(r-t)*(r-t));return!(s*s+o*o>u*u)},r.angle_redress=function(e,t,i){return e>360&&(e-=360),e<0&&(e+=360),t>360&&(t-=360),t<0&&(t+=360),e-t>180?Math.abs(e-t-360)>i?e+=i:e=t:e-t>0?e-t>i?e-=i:e=t:e-t>-180?Math.abs(e-t)>i?e+=i:e=t:Math.abs(e-t+360)>i?e-=i:e=t,t>360&&(t-=360),t<0&&(t+=360),e},r.segment_node=function(e,t,i){return e.k!=t.k&&(i.x=-(e.b-t.b)/(e.k-t.k),i.y=i.x*e.k+e.b,!(i.x<e.x1&&i.x<e.x2)&&(!(i.x>e.x1&&i.x>e.x2)&&(!(i.x<t.x1&&i.x<t.x2)&&!(i.x>t.x1&&i.x>t.x2))))},r.foot_drop=function(e,t,i){var n=a.default.gi(20);return 0==t.k?n.k=99999999:n.k=-1/t.k,n.b=e.y-n.k*e.x,i.x=-(t.b-n.b)/(t.k-n.k),i.y=i.x*t.k+t.b,!(i.x<t.x1&&i.x<t.x2)&&!(i.x>t.x1&&i.x>t.x2)},r.ps_distance=function(e,t){var i=n.default.gi(20);return r.foot_drop(e,t,i)?Math.sqrt((e.x-i.x)*(e.x-i.x)+(e.y-i.y)*(e.y-i.y)):99999999},r.ps_distance_less=function(e,t,i){if(e.x<t.x1-i&&e.x<t.x2-i)return!1;if(e.x>t.x1+i&&e.x>t.x2+i)return!1;if(e.y<t.y1-i&&e.x<t.y2-i)return!1;if(e.y>t.y1+i&&e.x>t.y2+i)return!1;var a=n.default.gi(20);return!!r.foot_drop(e,t,a)&&Math.sqrt((e.x-a.x)*(e.x-a.x)+(e.y-a.y)*(e.y-a.y))<i}},{"./M_POINT":54,"./M_SEGMENT":55}],57:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=(_interopRequireDefault(e("../engine/graphic/XAnima")),_interopRequireDefault(e("../engine/PackageTools"))),r=_interopRequireDefault(e("../engine/graphic/M2DFast")),s=_interopRequireDefault(e("../engine/first/XFirstOle")),o=_interopRequireDefault(e("../engine/XDefine")),u=(_interopRequireDefault(e("./MainMenu/GmLoading")),_interopRequireDefault(e("../engine/XNumber")),_interopRequireDefault(e("../engine/XOLE"))),l=_interopRequireDefault(e("../engine/XDrawOrder")),f=_interopRequireDefault(e("./GmData"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var h=function(){function GmConfig(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GmConfig),this.iLoadingStat=0,this.pfirstole=new s.default}return a(GmConfig,[{key:"GetConfigData",value:function(e,t){if(null==t)return u.default.gi().SetError(o.default.BASE_URL+e),void Laya.loader.load(o.default.BASE_URL+e,Laya.Handler.create(this,this.GetConfigData,[e]),null,Laya.Loader.TEXT);var i=n.default.gi();i.GetData2(t),i.Decode_base64(),this.pfirstole.LoadFile(i),this.pgame=this.pfirstole.LockMain("game"),this.iLoadingStat=2}},{key:"LoadConfig",value:function(){switch(this.iLoadingStat){case 0:Laya.loader.load(o.default.BASE_URL+"res/data.json",Laya.Handler.create(this,this.GetConfigData,["res/data.json"]),null,Laya.Loader.TEXT),this.iLoadingStat=1;break;case 1:break;case 2:return this.InitAttribute(),this.iLoadingStat=3,!0}return!1}},{key:"_load_funcs",value:function(e){for(var t=new Array;null!=e;){var i=new Object;i.id=e.FindNumber("id").Get(),i.x=e.FindNumber("x").Get(),i.y=e.FindNumber("y").Get(),i.pfunc=this.GetFuncById(i.id),t[t.length]=i,e=e.pdown}return t}},{key:"_load_blade_tip",value:function(e){for(var t=new Array;null!=e;){var i=new Object;i.x=e.FindNumber("x").Get(),i.y=e.FindNumber("y").Get(),t[t.length]=i,e=e.pdown}return t}},{key:"GetFuncById",value:function(e){for(var t=0;t<this.patt_funcs.length;t++)if(this.patt_funcs[t].id==e)return this.patt_funcs[t];return null}},{key:"GetMapById",value:function(e){for(var t=0;t<this.patt_maps.length;t++)if(this.patt_maps[t].id==e)return this.patt_maps[t];return null}},{key:"GetRandHero",value:function(){return this.patt_heros[o.default.grnd(0,this.patt_heros.length-1)]}},{key:"GetHeroById",value:function(e){for(var t=0;t<this.patt_heros.length;t++)if(this.patt_heros[t].id==e)return this.patt_heros[t];return null}},{key:"GetBladeById",value:function(e){for(var t=0;t<this.patt_blades.length;t++)if(this.patt_blades[t].id==e)return this.patt_blades[t];return null}},{key:"InitAttribute",value:function(){var e,t;for(this.patt_funcs=new Array,e=this.pgame.FindClass("func_block").pca.phead;null!=e;){(i=new Object).id=e.FindNumber("id").Get(),i.collide_radius=e.FindNumber("collide_radius").Get(),i.man_pass=e.FindWord("man_pass").Get(),i.blade_pass=e.FindWord("blade_pass").Get(),i.destory=e.FindWord("destory").Get(),i.anima_name=e.FindWord("anima_name").Get(),i.type=e.FindNumber("type").Get(),this.patt_funcs[this.patt_funcs.length]=i,e=e.pdown}for(this.patt_maps=new Array,e=this.pgame.FindClass("map").pca.phead;null!=e;){(i=new Object).id=e.FindNumber("id").Get(),i.width=e.FindNumber("width").Get(),i.height=e.FindNumber("height").Get(),i.bg_path=e.FindWord("bg_path").Get(),i.res_id=r.default.gi().LoadImage(i.bg_path),i.funcs=this._load_funcs(e.FindClass("funcs").pca.phead),this.patt_maps[this.patt_maps.length]=i,e=e.pdown}for(this.patt_blades=new Array,e=this.pgame.FindClass("blade").pca.phead;null!=e;){(i=new Object).id=e.FindNumber("id").Get(),i.anima_name=e.FindWord("anima_name").Get(),i.name=e.FindWord("name").Get(),i.width=e.FindNumber("width").Get(),t=e.FindClass("turn_speed"),i.turn_angle_speed=t.FindNumber("angle_speed").Get()*Math.PI/180,i.turn_acc_angle=t.FindNumber("acc_angle").Get()*Math.PI/180,i.turn_slow_angle=t.FindNumber("slow_angle").Get()*Math.PI/180,t=e.FindClass("grow_value"),i.grow_unit_value=t.FindNumber("unit_value").Get(),i.grow_min_unit=t.FindNumber("min_unit").Get(),i.grow_max_unit=t.FindNumber("max_unit").Get(),i.grow_start_unit=t.FindNumber("start_unit").Get(),i.blade_tip=this._load_blade_tip(e.FindClass("blade_tip").pca.phead),i.handle_length=e.FindNumber("handle_length").Get(),this.patt_blades[this.patt_blades.length]=i,e=e.pdown}for(this.att_hero_collide_radius=this.pgame.FindClass("hero").FindNumber("collide_radius").Get(),this.patt_heros=new Array,e=this.pgame.FindClass("hero").FindClass("skin").pca.phead;null!=e;){var i;(i=new Object).id=e.FindNumber("id").Get(),i.anima_name=e.FindWord("anima_name").Get(),i.name=e.FindWord("name").Get(),i.centerx=e.FindNumber("centerx").Get(),i.centery=e.FindNumber("centery").Get(),i.move_speed=e.FindNumber("move_speed").Get(),i.heart_count=e.FindNumber("heart_count").Get(),i.blade_id=e.FindPoint("blade").GetFirst().FindNumber("id").Get(),i.arm_length=e.FindNumber("arm_length").Get(),t=e.FindClass("unlock"),i.unlock_type=t.FindWord("type").Get(),i.unlock_value=t.FindNumber("value").Get(),this.patt_heros[this.patt_heros.length]=i,e=e.pdown}for(this.patt_exp=new Array,e=this.pgame.FindClass("config").FindClass("exp").pca.phead;null!=e;)this.patt_exp[e.FindNumber("level").Get()-1]=e.FindNumber("exp_value").Get(),e=e.pdown;this.patt_sum_exp=new Array;for(var a=0;a<this.patt_exp.length;a++)this.patt_sum_exp[a]=0==a?this.patt_exp[a]:this.patt_sum_exp[a-1]+this.patt_exp[a];for(e=this.pgame.FindClass("config").FindClass("map_config"),GmConfig.grass_1_max=e.FindNumber("grass_1_max").Get(),GmConfig.grass_1_grow_frame=e.FindNumber("grass_1_grow_frame").Get(),GmConfig.grass_2_max=e.FindNumber("grass_2_max").Get(),GmConfig.grass_2_grow_frame=e.FindNumber("grass_2_grow_frame").Get(),GmConfig.stone_max=e.FindNumber("stone_max").Get(),GmConfig.root_vanish_frame=e.FindNumber("root_vanish_frame").Get(),GmConfig.exp_grass_1=e.FindNumber("exp_grass_1").Get(),GmConfig.exp_grass_2=e.FindNumber("exp_grass_2").Get(),GmConfig.count_grass_1=e.FindNumber("count_grass_1").Get(),GmConfig.count_grass_2=e.FindNumber("count_grass_2").Get(),GmConfig.dead_exp_rate=e.FindFloat("dead_exp_rate").Get(),GmConfig.item_max=e.FindNumber("item_max").Get(),GmConfig.item_last_frame=new Array,GmConfig.item_last_frame[0]=e.FindNumber("item_speed_frame").Get(),GmConfig.item_last_frame[1]=e.FindNumber("item_exp_frame").Get(),GmConfig.item_last_frame[2]=e.FindNumber("item_shield_frame").Get(),GmConfig.item_speed_rate=e.FindFloat("item_speed_rate").Get(),GmConfig.item_exp_rate=e.FindFloat("item_exp_rate").Get(),GmConfig.try_rate=e.FindFloat("try_rate").Get(),GmConfig.names=f.default._names.split(","),this.patt_reward=new Array,e=this.pgame.FindClass("config").FindClass("rank_reward").pca.phead;null!=e;)this.patt_reward[e.FindNumber("rank").Get()-1]=e.FindNumber("coin").Get(),e=e.pdown}},{key:"GetRandFuncByType",value:function(e){var t=l.default.gi(1);t.Clear();for(var i=0;i<this.patt_funcs.length;i++)this.patt_funcs[i].type==e&&t.Push(this.patt_funcs[i]);return t.Rand()}}]),GmConfig}();i.default=h,h.NOSHOOT=!1,h.MJ=!1,h.iTestMonster=-1,h.pconfig=null,h.gi=function(){return null==h.pconfig&&(h.pconfig=new h),h.pconfig},h.HH=480,h.SHOW_COLLIDE=!1},{"../engine/PackageTools":3,"../engine/XDefine":4,"../engine/XDrawOrder":5,"../engine/XNumber":8,"../engine/XOLE":9,"../engine/first/XFirstOle":23,"../engine/graphic/M2DFast":27,"../engine/graphic/XAnima":28,"./GmData":58,"./MainMenu/GmLoading":60}],58:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function GmData(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GmData)};i.default=a,a._names="Abe,Abram,Abraham,Abbie,Abby,Abigail,Tabitha,Alec,Alex,Alexander,Addie,Addy,Adelaide,Adeline,Arch,Archie,Archibald,Allie,Alice,Augie,Augustus,Bab,Babbie,Barbara,Bart,Bat,Bartholomew,Becca,Becky,Rebecca,Bige,Abijah,Bede,Obedience,Cager,Micajah,Bella,Arabella,Isabella,Mehitabel,Chan,Chauncey,Bess,Bessie,Betsey,Elizabeth,Con,Cornelius,Beth,Elizabeth,Cuddy,Cuthbert,Betty,Bethia,Elizabeth,Cy,Cyrus,Biah,Abiah,Dick,Richard,Biddy,Biddie,Bridget,Brigid,Obedience,Dirch,Derrick,Briney,Sabrina,Dob,Dobbin,Robert,Caddie,Callie,Carrie,Caroline,Dyer,Obediah,Cassie,Cassandra,Eppa,Epaphroditus,Cindy,Lucinda,Luciana,Cynthia,Fanny,Nathaniel,Clara,Clarissa,Clarinda,Fate,Lafayette,Cleda,Cleophas,Finney,Phineas,Clemmie,Clementine,Fred,Frederick,Winifred,Con,Connie,Constance,Gene,Eugene,Crece,Crese,Crecy,Lucretia,Gus,August,Delia,Adelia,Bedelia,Cordelia,Fidelia,Hal,Harold,Henry,Delphia,Philadelphia,Ham,Hamilton,Dimmis,Damaris,Hank,Henry,Dolly,Dot,Dorothy,Harry,Henry,Donia,Fredonia,Hiley,Hiram,Dosia,Theodosia,Hy,Hiram,Edie,Edith,Ike,Isaac,Ellen,Eleanor,Elinanifia,Jack,Jackson,John,Elly,Eleanor,Ellen,Helen,Jake,Jacob,Elsie,Alice,Jed,Jeduthan,Essie,Esther,Hester,Jeremy,Jeremiah,Etta,Henrietta,Louetta,Marietta,Jerry,Gerald,Jeremiah,Fally,Elipha,Jude,Judy,Judah,Fanny,Frankie,Frances,Kiah,Hezekiah,Flora,Flossie,Florence,Kit,Christopher,Frankie,Francie,Lazar,Eleazer,Fronie,Sophronia,Larry,Lawrence,Gen,Genevieve,Virginia,Lig,Lige,Lije,Elijah,Gerty,Gerturde,Mal,Malachi,Malcolm,Ginny,Virginia,Nat,Nate,Nathaniel,Gussie,Augusta,Ned,Edwin,Edward,Hatty,Harriet,Newt,Newton,Hepsy,Hepsibah,Ollie,Oliver,Hermie,Hermione,Paddy,Patrick,Hetty,Henrietta,Mehetable,Pleas,Pleasant,Hitty,Mehetable,Quill,Aquilla,Jenny,Jane,Janet,Genevieve,Virgina,Riah,Rias,Rye,Zachariah,Judy,Judith,Sandy,Alexander,Julie,Julia,Si,Josiah,Cyrus,Kate,Kay,C/Katherine,C/Kathleen,Tad,Thaddeus,Kersty,Christina,Tiah,Azariah,Kitty,C/Katherine,Theo,Theophilus,Kizzie,Kesiah,Virg,Virgil,Leafy,Relief,Willie,Wiley,William,Lena,Angeline,Caroline,Helen,Madeleine,Magdalen,Lecta,Electa,Letty,Letitia,Libbie,Elizabeth,Lisa,Melissa,Livy,Olive,Olivia,Liza,Adeliza,Elizabeth,Liz.Lizzie,Elizabeth,Lollie,Lottie,Charlotte,Lou,Louetta,Louisa,Louise,Lucy,Lucinda,Luciana,Lynne,Belinda,Melinda,Mabel,Mehetable,Madge,Margaret,Margery,Maida,Madaleine,Magdelena,Mallie,Malvina,Mamie,Mary,Manda,Mandy,Amanda,Margie,Margaret,Mate,Mary,Mattie,Martha,Mellie,Amelia,Emelia,Mellicent,Mildred,Meg,Maggie,Margaret,Mena,Almena,Mima,Jemima,Mimi,Mary,Mina,Mindwell,Wilhelmina,Minnie,Mary,Wilhelmina,Myra,Elmira,Mitty,Mehetable,Submit,Mollie,Martha,Mary,Nabby,Abigail,Nan,Ann,Anna,Ellen,Nancy,Ann,Anna,Agnes,Nannie,Nancy,Anna,Nell,Helen,Nellie,Cornelia,Eleanor,Ellen,Helen,Nettie,Antoinette,Henrietta,Neva,Genevieve,Nonie,Joan,Nora,Eleanor,Honora,Leonora,Orolia,Caroline,Patsy,Martha,Patty,Martha,Parthenia,Patience,Peggy,Margaret,Peddie,Peddy,Experience,Penny,Penelope,Phil,Philadelphia,Philomena,Phoenie,Phosey,Pheney,Tryphena,Phosy,Tryphosia,Polly,Mary,Pru,Prue,Prudence,Puss,Prudence,Philadelphia,Rana,Lorraine,Reenie,Irene,Maureen,Sabrina,Serena,Rena,Alexandria,Irene,Sabrina,Retta,Loretta,Rilla,Gabrilla,Rita,Marguerite,Sadie,Sally,Sarah,Sene,Asenath,Silla,Priscilla,Sissie,Cecily,Cecelia,Sophie,Sophia,Sophronia,Sukey,Sarah,Susan,Susannah,Tabby,Tabitha,Tallie,Natalie,Tempy,Temperane,Tennie,Tennessee,Tenty,Content,Thea,Althea,Thenie,Parthenia,Thirza,Theresa,Tilly,Matilda,Tina,ChristinaTorie,Victoria,Trudy,Gertrude,Viney,Viny,Lavinia,Lavina,Melvina,Waity,Waitstill,Winnet,Winifred,Winnie,Winifred,Edwina,Zubia,Zubie,Azubah"},{}],59:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../engine/graphic/XAnima")),r=_interopRequireDefault(e("../engine/PackageTools")),s=_interopRequireDefault(e("../engine/graphic/M2DFast")),o=_interopRequireDefault(e("./GmConfig")),u=_interopRequireDefault(e("../engine/graphic/AnimaAction")),l=_interopRequireDefault(e("./MainMenu/GmLoading")),f=_interopRequireDefault(e("../engine/XDefine")),h=(_interopRequireDefault(e("../engine/XNumber")),_interopRequireDefault(e("../engine/XOLE")));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var c=function(){function GmRes(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GmRes),this.iLoadingStat=0,this.pani_ui=new n.default,this.pani_hero=new n.default,this.pani_gun=new n.default,this.pani_monster=new n.default,this.pani_bullet=new n.default,this.pani_effect=new n.default,this.pani_icon=new n.default,this.pani_mercenary=new n.default,this.pani_number=new n.default,this.iAnimaCount=0,this.pani_list=new Array}return a(GmRes,[{key:"GetResLoadedCount",value:function(){var e,t=0;for(e=0;e<this.iAnimaCount;e++)t+=this.pani_list[e].GetResLoadedCount();return t}},{key:"GetAnimaData",value:function(e,t,i){if(null==i)return h.default.gi().SetError(t),void Laya.loader.load(f.default.BASE_URL+t+"/xa.b64",Laya.Handler.create(this,this.GetAnimaData,[e,t]),null,Laya.Loader.TEXT);var a=r.default.gi();a.GetData2(i),a.Decode_base64(),e.LoadAnima(t,a),l.default.iMaxResCount+=e.iResCount,this.pani_list[this.iAnimaCount]=e,this.iAnimaCount++,l.default.iProc++}},{key:"LoadAnima",value:function(){r.default.gi(),o.default.gi();switch(this.iLoadingStat){case 0:for(var e=0;e<o.default.gi().iMapCount;e++)o.default.gi().patt_map[e].resid=s.default.gi().LoadImage(o.default.gi().patt_map[e].file_name);this.iLoadingStat=1,l.default.iProc=0,l.default.iMaxProc=0;break;case 1:this.pani_func=new n.default,Laya.loader.load(f.default.BASE_URL+"res/anima/func/xa.b64",Laya.Handler.create(this,this.GetAnimaData,[this.pani_func,"res/anima/func"]),null,Laya.Loader.TEXT),l.default.iMaxProc++,this.pani_hero=new n.default,Laya.loader.load(f.default.BASE_URL+"res/anima/hero/xa.b64",Laya.Handler.create(this,this.GetAnimaData,[this.pani_hero,"res/anima/hero"]),null,Laya.Loader.TEXT),l.default.iMaxProc++,this.pani_ui=new n.default,Laya.loader.load(f.default.BASE_URL+"res/anima/ui/xa.b64",Laya.Handler.create(this,this.GetAnimaData,[this.pani_ui,"res/anima/ui"]),null,Laya.Loader.TEXT),l.default.iMaxProc++,this.pani_blade=new n.default,Laya.loader.load(f.default.BASE_URL+"res/anima/blade/xa.b64",Laya.Handler.create(this,this.GetAnimaData,[this.pani_blade,"res/anima/blade"]),null,Laya.Loader.TEXT),l.default.iMaxProc++,this.pani_effect=new n.default,Laya.loader.load(f.default.BASE_URL+"res/anima/effect/xa.b64",Laya.Handler.create(this,this.GetAnimaData,[this.pani_effect,"res/anima/effect"]),null,Laya.Loader.TEXT),l.default.iMaxProc++,this.iLoadingStat=2;break;case 2:l.default.iProc>=l.default.iMaxProc&&(this.iLoadingStat=3);break;case 3:this.LoadDefaultRes(),this.iLoadingStat=999;break;case 999:return!0}return!1}},{key:"LoadDefaultRes",value:function(){for(var e=o.default.pconfig,t=0;t<e.patt_funcs.length;t++)e.patt_funcs[t].aa_normal=new u.default(this.pani_func.InitAnimaWithName(e.patt_funcs[t].anima_name+"_normal")),1!=e.patt_funcs[t].type&&2!=e.patt_funcs[t]||(e.patt_funcs[t].aa_boom=new Array,e.patt_funcs[t].aa_boom[0]=new u.default(this.pani_func.InitAnimaWithName(e.patt_funcs[t].anima_name+"_boom_1")),e.patt_funcs[t].aa_boom[1]=new u.default(this.pani_func.InitAnimaWithName(e.patt_funcs[t].anima_name+"_boom_2")),e.patt_funcs[t].aa_boom[2]=new u.default(this.pani_func.InitAnimaWithName(e.patt_funcs[t].anima_name+"_boom_3")),e.patt_funcs[t].aa_break=new u.default(this.pani_func.InitAnimaWithName(e.patt_funcs[t].anima_name+"_break")),e.patt_funcs[t].aa_young=new u.default(this.pani_func.InitAnimaWithName(e.patt_funcs[t].anima_name+"_young"))),4!=e.patt_funcs[t].type&&5!=e.patt_funcs[t]||(e.patt_funcs[t].aa_young=new u.default(this.pani_func.InitAnimaWithName(e.patt_funcs[t].anima_name+"_young")));for(t=0;t<e.patt_heros.length;t++)e.patt_heros[t].aa_stand=new u.default(this.pani_hero.InitAnimaWithName(e.patt_heros[t].anima_name+"_stand")),e.patt_heros[t].aa_run=new u.default(this.pani_hero.InitAnimaWithName(e.patt_heros[t].anima_name+"_run"));for(t=0;t<e.patt_blades.length;t++)e.patt_blades[t].aa_blade=new u.default(this.pani_blade.InitAnimaWithName(e.patt_blades[t].anima_name));GmRes.aa_joy_stick=new u.default(this.pani_ui.InitAnimaWithName("joy_stick")),GmRes.aa_btn_slash=new u.default(this.pani_ui.InitAnimaWithName("btn_slash")),GmRes.aa_panel_blue=new u.default(this.pani_ui.InitAnimaWithName("panel_blue")),GmRes.aa_panel_black=new u.default(this.pani_ui.InitAnimaWithName("panel_black")),GmRes.aa_count_down=new u.default(this.pani_ui.InitAnimaWithName("count_down")),GmRes.aa_coin=new u.default(this.pani_ui.InitAnimaWithName("coin")),GmRes.aa_light_hit=new u.default(this.pani_effect.InitAnimaWithName("light_hit")),GmRes.aa_light_stone=new u.default(this.pani_effect.InitAnimaWithName("light_stone")),GmRes.aa_light_eat_exp=new u.default(this.pani_effect.InitAnimaWithName("light_eat_exp")),GmRes.aa_light_reborn=new u.default(this.pani_effect.InitAnimaWithName("light_reborn")),GmRes.aa_item_show=new u.default(this.pani_ui.InitAnimaWithName("item_show")),GmRes.aa_item_count_down=new u.default(this.pani_ui.InitAnimaWithName("item_count_down")),GmRes.aa_shield=new u.default(this.pani_hero.InitAnimaWithName("shield")),GmRes.aa_logo=new u.default(this.pani_ui.InitAnimaWithName("logo")),GmRes.aa_rank_top=new u.default(this.pani_ui.InitAnimaWithName("rank_top")),GmRes.aa_white_panel=new u.default(this.pani_ui.InitAnimaWithName("white_panel")),GmRes.aa_sound=new u.default(this.pani_ui.InitAnimaWithName("sound")),GmRes.aa_check=new u.default(this.pani_ui.InitAnimaWithName("check")),GmRes.aa_lock=new u.default(this.pani_ui.InitAnimaWithName("lock")),GmRes.aa_panel_light_green=new u.default(this.pani_ui.InitAnimaWithName("panel_light_green")),GmRes.aa_frame_white=new u.default(this.pani_ui.InitAnimaWithName("frame_white")),GmRes.aa_wheel=new u.default(this.pani_ui.InitAnimaWithName("wheel")),GmRes.aa_title_of_wheel=new u.default(this.pani_ui.InitAnimaWithName("title_of_wheel"))}}]),GmRes}();i.default=c,c.pres=null,c.gi=function(){return null==c.pres&&(c.pres=new c),c.pres},c.rid_cover=-1,c.rid_cover_red=-1,c.rid_loading=-1},{"../engine/PackageTools":3,"../engine/XDefine":4,"../engine/XNumber":8,"../engine/XOLE":9,"../engine/graphic/AnimaAction":26,"../engine/graphic/M2DFast":27,"../engine/graphic/XAnima":28,"./GmConfig":57,"./MainMenu/GmLoading":60}],60:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../GmRes")),r=_interopRequireDefault(e("../GmConfig")),s=_interopRequireDefault(e("../../engine/XOLE")),o=_interopRequireDefault(e("../../engine/XDefine")),u=_interopRequireDefault(e("../../engine/XStat")),l=_interopRequireDefault(e("../../engine/graphic/M2DFast")),f=_interopRequireDefault(e("../../engine/interface/PublicInterface")),h=(_interopRequireDefault(e("../../engine/XNetFast")),_interopRequireDefault(e("../../engine/XWavFast")),_interopRequireDefault(e("../../engine/graphic/XAnima"))),c=_interopRequireDefault(e("../../engine/PackageTools")),d=_interopRequireDefault(e("../../engine/graphic/AnimaAction")),p=_interopRequireDefault(e("../../engine/control/XButton")),_=_interopRequireDefault(e("../../engine/interface/BridgeInterface"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var g=function(){function GmLoading(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GmLoading),this.iLoadingStat=100,GmLoading.pani_local=new h.default}return a(GmLoading,[{key:"GetAnimaData",value:function(e,t,i){if(null==i)return s.default.gi().SetError(t),void Laya.loader.load(t+"/xa.json",Laya.Handler.create(this,this.GetAnimaData,[e,t]),null,Laya.Loader.TEXT);var a=c.default.gi();a.GetData2(i),a.Decode_base64(),e.LoadAnima(t,a,!0),this.iLoadingStat=102,this.iLoadingProcTo=0}},{key:"Draw",value:function(){if(this.iLoadingStat<100){l.default.gi().DrawImageEx(Laya.stage.width/2-343.5,150,n.default.rid_loading,0,0,-1,-1,100,1,1,0,-1,-1);var e=(Laya.stage.width-468)/2,t=428*this.iLoadingProcTo/100,i=Laya.stage.height-96;this.aa_bg_bar.Draw(e,i,0),this.aa_bg_bar.DrawEx1(e+16,i,1,100,27.25,1,0,-1,-1),this.aa_bg_bar.Draw(e+468-16,i,2),e+=4,i+=4,this.aa_loading_bar.Draw(e,i,0),this.aa_loading_bar.DrawEx1(e+16,i,1,100,t/16,1,0,-1,-1),this.aa_loading_bar.Draw(e+16+t,i,2),i+=20,l.default.gi().DrawTextEx(Laya.stage.width/2,i,parseInt(this.iLoadingProcTo)+"%",16777215,28,100,1,1,0,-2,-2)}switch(o.default.sop(""+this.iLoadingStat),this.iLoadingStat){case 100:Laya.loader.load("res/0local/xa.json",Laya.Handler.create(this,this.GetAnimaData,[GmLoading.pani_local,"res/0local"]),null,Laya.Loader.TEXT),this.iLoadingStat=101;break;case 102:GmLoading.pani_local.iResCount==GmLoading.pani_local.GetResLoadedCount()&&(this.iLoadingStat=0,this.aa_bg_bar=new d.default(GmLoading.pani_local.InitAnimaWithName("bg_bar")),this.aa_loading_bar=new d.default(GmLoading.pani_local.InitAnimaWithName("loading_bar")),this.iLoadingProcTo=0,o.default.sop("cxunmz loading..."));break;case 0:r.default.gi().LoadConfig()&&(this.iLoadingStat=1);break;case 1:n.default.gi().LoadAnima()&&(this.iLoadingStat=2);break;case 2:GmLoading.iLoadedResCount=n.default.gi().GetResLoadedCount(),GmLoading.iLoadedResCount>=GmLoading.iMaxResCount&&(this.iLoadingStat=3);break;case 3:this.iLoadingStat=50;break;case 10:l.default.pm2f.DrawTextEx(300,700,"账号：",16777215,30,100,1,1,0,-3,-2),l.default.pm2f.DrawTextEx(300,750,"密码：",16777215,30,100,1,1,0,-3,-2),this.btn_ok.Move(300,800,120,40),this.btn_ok.Draw(),-1==f.default.gi().iStat?f.default.gi().iStat=0:0==f.default.gi().iStat?f.default.gi().Perform0Login("cxunmz","123456"):1==f.default.gi().iStat||10==f.default.gi().iStat&&(Laya.LocalStorage.setItem("idle_user",this.input_user.text),Laya.LocalStorage.setItem("idle_pass",this.input_pass.text),Laya.stage.removeChild(this.input_user),Laya.stage.removeChild(this.input_pass),this.iLoadingStat=3);break;case 50:u.default.gi().PopStat(),u.default.gi().PushStat(u.default.STAT_GMPLAY),GmLoading.bLoadFinished=!0,_.default.gi().SendMessage("report","login")}this.iLoadingStat>=100||(0==GmLoading.iMaxProc?this.iLoadingProcTo=0:GmLoading.iProc<GmLoading.iMaxProc?this.iLoadingProcTo=GmLoading.iProc/GmLoading.iMaxProc*45:GmLoading.iLoadedResCount<GmLoading.iMaxResCount?this.iLoadingProcTo=GmLoading.iLoadedResCount/GmLoading.iMaxResCount*45+45:this.iLoadingProcTo=100,this.iLoadingStat>=2&&f.default.gi().iStat)}},{key:"CheckStr",value:function(e){if(null==e)return"账号/密码不能为空";if(e.length<3||e.length>16)return"账号/密码长度3~16";for(var t=0;t<e.length;t++){var i=e.charCodeAt(t);if(!XNumber.IsS(i))return"账号/密码只能包含：数字，大小写字母，下划线"}return"ok"}},{key:"ProcTouch",value:function(e,t,i){if(10==this.iLoadingStat&&0==f.default.gi().iStat&&this.btn_ok.ProcTouch(e,t,i)){if(this.btn_ok.bCheck()){var a=this.CheckStr(this.input_user.text);"ok"==a&&"ok"==(a=this.CheckStr(this.input_pass.text))&&f.default.gi().Perform0Login(this.input_user.text,this.input_pass.text)}return!0}}},{key:"InitImputUI",value:function(){this.input_user=this.AddInputUI(300,685,200,30),this.input_pass=this.AddInputUI(300,735,200,30);var e=Laya.LocalStorage.getItem("idle_user"),t=Laya.LocalStorage.getItem("idle_pass");null!=e&&(this.input_user.text=e),null!=t&&(this.input_pass.text=t),this.btn_ok=new p.default,this.btn_ok.SetAnima(n.default.gi().pani_ui,"btn_green_flat"),this.btn_ok.sName="确定"}},{key:"AddInputUI",value:function(e,t,i,a){var n=new Laya.TextInput("");return n.maxChars=16,n.width=i,n.height=a,n.pos(e,t),n.color="#ffffff",n.bgColor="#303030",n.fontSize=22,Laya.stage.addChild(n),n}}]),GmLoading}();i.default=g,g.pani_local=null,g.iProc=0,g.iMaxProc=0,g.iMaxResCount=0,g.iLoadedResCount=0,g.bLoadFinished=!1},{"../../engine/PackageTools":3,"../../engine/XDefine":4,"../../engine/XNetFast":7,"../../engine/XOLE":9,"../../engine/XStat":10,"../../engine/XWavFast":12,"../../engine/control/XButton":14,"../../engine/graphic/AnimaAction":26,"../../engine/graphic/M2DFast":27,"../../engine/graphic/XAnima":28,"../../engine/interface/BridgeInterface":29,"../../engine/interface/PublicInterface":30,"../GmConfig":57,"../GmRes":59}],61:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=(_interopRequireDefault(e("../GmRes")),_interopRequireDefault(e("../../engine/XOLE")),_interopRequireDefault(e("../../engine/XDefine")),_interopRequireDefault(e("../../engine/graphic/M2DFast"))),r=_interopRequireDefault(e("../../engine/graphic/AnimaAction")),s=_interopRequireDefault(e("./GmMap"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function _ONEEFFECT(){_classCallCheck(this,_ONEEFFECT),this.bUseing=!1,this.iType=0,this.fX=0,this.fY=0,this.fAngle=0,this.aa=new r.default,this.sNumber="",this.iDelay=0,this.bTurn=!1,this.fScaleW=1,this.fScaleH=1,this.bUseMapOff=!1}return a(_ONEEFFECT,[{key:"Draw",value:function(){switch(this.iType){case 0:this.bUseMapOff?this.aa.DrawEx(this.fX*s.default.fMapScale+s.default.iMapOffX,this.fY*s.default.fMapScale+s.default.iMapOffY,100,this.fScaleW*s.default.fMapScale,this.fScaleH*s.default.fMapScale,this.fAngle,-2,-2,this.bTurn):this.aa.DrawEx(this.fX,this.fY,100,this.fScaleW,this.fScaleH,this.fAngle,-2,-2,this.bTurn),this.aa.NextFrame()&&(this.bUseing=!1);break;case 5:n.default.pm2f.DrawTextEx(this.fX,this.fY-this.iDelay,this.sStr,16636704,30,100-this.iDelay,1,1,0,-2,-2),this.iDelay+=1,3*this.iDelay>100&&(this.bUseing=!1)}}}]),_ONEEFFECT}(),u=function(){function GmEffect(){_classCallCheck(this,GmEffect),this.effects=new Array}return a(GmEffect,[{key:"_getfreeeffect",value:function(){for(var e=0;e<this.effects.length;e++)if(!this.effects[e].bUseing)return this.effects[e];return this.effects[e]=new o,this.effects[e].fScaleW=1,this.effects[e].fScaleH=1,this.effects[e].fDx=0,this.effects[e].fDy=0,this.effects[e].bUseMapOff=!1,this.effects[e]}},{key:"AddEffect0",value:function(e,t,i){var a=this._getfreeeffect();if(null!=a)return a.iType=0,a.fX=e,a.fY=t,a.fAngle=0,a.aa.copyfrom(i),a.bTurn=!1,a.bUseing=!0,a.fScaleW=1,a.fScaleH=1,a.bUseMapOff=!0,a}},{key:"AddEffect5",value:function(e,t,i){var a=this._getfreeeffect();null!=a&&(a.iType=5,a.fX=e,a.fY=t,a.sStr=i,a.iDelay=0,a.bUseing=!0)}},{key:"DrawEffect",value:function(){var e;for(e=0;e<this.effects.length;e++)this.effects[e].bUseing&&this.effects[e].Draw()}}]),GmEffect}();i.default=u,u.pp=null,u.gi=function(){return null==u.pp&&(u.pp=new u),u.pp}},{"../../engine/XDefine":4,"../../engine/XOLE":9,"../../engine/graphic/AnimaAction":26,"../../engine/graphic/M2DFast":27,"../GmRes":59,"./GmMap":65}],62:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../../engine/graphic/AnimaAction")),r=_interopRequireDefault(e("./GmMap")),s=_interopRequireDefault(e("../../engine/graphic/M2DFast")),o=_interopRequireDefault(e("../../engine/math/M_POINT")),u=_interopRequireDefault(e("../../engine/XDefine")),l=_interopRequireDefault(e("./GmGrow")),f=_interopRequireDefault(e("../GmConfig")),h=_interopRequireDefault(e("./GmHeros"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var c=function(){function GmFuncs(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GmFuncs),this.bUseing=!1,this.aa_body=new n.default,this.bAlive=!0,this.iWeight=1,this.b_point=new o.default(0,0)}return a(GmFuncs,[{key:"Clear",value:function(){this.bUseing=!1}},{key:"Init",value:function(e,t,i){for(this.patt=e,this.collide_radius=e.collide_radius;this.iX=t+u.default.grnd(0,l.default.BW),this.iY=i+u.default.grnd(0,l.default.BH),l.default.gi().IsBoomWithOthers(this););this.b_point.Set(this.iX,this.iY),1!=this.patt.type&&2!=this.patt.type||(this.aa_body.copyfrom(this.patt.aa_young),this.iStat=0,1==this.patt.type&&(this.iDelay=f.default.grass_1_grow_frame),2==this.patt.type&&(this.iDelay=f.default.grass_2_grow_frame)),3!=this.patt.type&&6!=this.patt.type||(this.aa_body.copyfrom(this.patt.aa_normal),this.iStat=10),this.bUseing=!0}},{key:"Init_Star",value:function(e,t,i){var a,n;this.patt=e,this.collide_radius=e.collide_radius;for(var s=0;++s>1e3&&(s=0),a=u.default.grnd(0,359)*Math.PI/180,n=u.default.grnd(this.collide_radius+35,this.collide_radius+35+100),this.iX=t+Math.cos(a)*n,this.iY=i+Math.sin(a)*n,this.iX<30||this.iY<30||this.iX>r.default.gi().iWidth-30||this.iY>r.default.gi().iHeight-30||l.default.gi().IsBoomWithOthers(this););this.b_point.Set(this.iX,this.iY),4!=this.patt.type&&5!=this.patt.type||(this.aa_body.copyfrom(this.patt.aa_young),this.iStat=0,this.iDelay=0,this.fSx=t,this.fSy=i,this.fDx=this.iX,this.fDy=this.iY,this.iX=t,this.iY=i),this.bUseing=!0}},{key:"Draw",value:function(){var e=this.iX*r.default.fMapScale+r.default.iMapOffX,t=this.iY*r.default.fMapScale+r.default.iMapOffY;f.default.SHOW_COLLIDE&&s.default.pm2f.DrawCircle(e,t,this.collide_radius*r.default.fMapScale,16777215,2),e>-100&&e<Laya.stage.width+100&&t>-100&&t<Laya.stage.height+100&&this.aa_body.DrawEx(e,t,30==this.iStat?this.iDelay/f.default.root_vanish_frame*100:100,r.default.fMapScale,r.default.fMapScale,0,-2,-2),this.aa_body.NextFrame()&&(1!=this.patt.type&&2!=this.patt.type||20==this.iStat&&(this.iStat=30,this.aa_body.copyfrom(this.patt.aa_break),this.iDelay=f.default.root_vanish_frame))}},{key:"Logic",value:function(){if(4==this.patt.type||5==this.patt.type){if(0==this.iStat){var e=(i=u.default.distance(this.fSx,this.fSy,this.fDx,this.fDy))/(a=8);this.iX=this.fSx+(this.fDx-this.fSx)*this.iDelay/e;var t=(1-(this.iDelay/e*2-1)*(this.iDelay/e*2-1))*i;this.iY=this.fSy+(this.fDy-this.fSy)*this.iDelay/e-t,this.iDelay++,this.iDelay>=e&&(this.iStat=10,this.aa_body.copyfrom(this.patt.aa_normal),this.iX=this.fDx,this.iY=this.fDy)}var i,a;if(20==this.iStat)(i=u.default.distance(this.iX,this.iY,this.pdest.iX,this.pdest.iY))<=(a=2*this.pdest.phero.move_speed)?this.pdest.RealEatStar(this):(this.iX+=(this.pdest.iX-this.iX)*a/i,this.iY+=(this.pdest.iY-this.iY)*a/i)}1!=this.patt.type&&2!=this.patt.type||(0==this.iStat&&(this.iDelay--,this.iDelay<=0&&(this.iStat=10,this.aa_body.copyfrom(this.patt.aa_normal))),30==this.iStat&&(this.iDelay--,this.iDelay<=0&&(this.bUseing=!1)))}},{key:"SubHp",value:function(){if(10==this.iStat){this.iStat=20,this.aa_body.copyfrom(this.patt.aa_boom[u.default.grnd(0,2)]),l.default.gi().FreshStar(this);for(var e=0;e<r.default.pp.iHeroCount;e++)h.default.pp[e].grass_unlock_ai(this)}}},{key:"LockHero",value:function(e){if(10==this.iStat){this.iStat=20,this.pdest=e;for(var t=0;t<r.default.pp.iHeroCount;t++)h.default.pp[t].star_unlock_ai(this)}}}]),GmFuncs}();i.default=c,c.pp=new Array,c.gi=function(e){return null==c.pp[e]&&(c.pp[e]=new c),c.pp[e]},c.count=function(){return c.pp.length},c.get_free=function(){for(var e=0;e<c.pp.length;e++)if(!c.pp[e].bUseing)return c.pp[e];return c.gi(e)}},{"../../engine/XDefine":4,"../../engine/graphic/AnimaAction":26,"../../engine/graphic/M2DFast":27,"../../engine/math/M_POINT":54,"../GmConfig":57,"./GmGrow":63,"./GmHeros":64,"./GmMap":65}],63:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=(_interopRequireDefault(e("../../engine/XDefine")),_interopRequireDefault(e("./GmFuncs"))),r=_interopRequireDefault(e("./GmMap")),s=_interopRequireDefault(e("../GmConfig"));_interopRequireDefault(e("../../engine/graphic/M2DFast"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o=function(){function GmGrow(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GmGrow),this.calc_count=new Array;for(var e=0;e<10;e++){this.calc_count[e]=new Array;for(var t=0;t<10;t++)this.calc_count[e][t]=0}this.iFreshDelay=0}return a(GmGrow,[{key:"IsBoomWithOthers",value:function(e){for(var t=0;t<n.default.pp.length;t++)if(n.default.pp[t].bUseing&&n.default.pp[t]!=e&&4!=n.default.pp[t].patt.type&&5!=n.default.pp[t].patt.type&&r.default.calc_boom(n.default.pp[t],0,0,e))return!0;return!1}},{key:"Reset",value:function(){r.default.gi().iWidth%GmGrow.BW==0&&r.default.gi().iHeight%GmGrow.BH==0||asdf(),this.iW=r.default.gi().iWidth/GmGrow.BW,this.iH=r.default.gi().iHeight/GmGrow.BH;for(var e=0;e<n.default.pp.length;e++)n.default.gi(e).Clear();for(e=0;e<this.iW;e++)for(var t=0;t<this.iH;t++)for(var i=0;i<s.default.stone_max;i++){n.default.get_free().Init(s.default.gi().GetRandFuncByType(3),e*GmGrow.BW,t*GmGrow.BH)}this.FreshGrass(),this.FreshItem(),this.iFreshDelay=0}},{key:"Draw",value:function(){}},{key:"FreshByType",value:function(e,t){var i,a;for(i=0;i<this.iW;i++)for(a=0;a<this.iH;a++)this.calc_count[a][i]=0;for(i=0;i<n.default.pp.length;i++)n.default.pp[i].bUseing&&n.default.pp[i].patt.type==e&&this.calc_count[parseInt(n.default.pp[i].iY/GmGrow.BH)][parseInt(n.default.pp[i].iX/GmGrow.BW)]++;for(i=0;i<this.iW;i++)for(a=0;a<this.iH;a++)if(this.calc_count[a][i]<t)for(var r=0;r<t-this.calc_count[a][i];r++){n.default.get_free().Init(s.default.gi().GetRandFuncByType(e),i*GmGrow.BW,a*GmGrow.BH)}}},{key:"FreshGrass",value:function(){this.FreshByType(1,s.default.grass_1_max)}},{key:"FreshItem",value:function(){this.FreshByType(6,s.default.item_max)}},{key:"FreshStar",value:function(e){1==e.patt.type?this.FreshStar2(e.iX,e.iY,4,s.default.count_grass_1):2==e.patt.type&&this.FreshStar2(e.iX,e.iY,5,s.default.count_grass_2)}},{key:"FreshStar2",value:function(e,t,i,a){for(var r=0;r<a;r++){n.default.get_free().Init_Star(s.default.gi().GetRandFuncByType(i),e,t)}}},{key:"Logic",value:function(){this.iFreshDelay++,this.iFreshDelay%300==0&&this.FreshGrass(),this.iFreshDelay%600==0&&this.FreshItem()}}]),GmGrow}();i.default=o,o.BW=1280,o.BH=720,o.pp=null,o.gi=function(){return null==o.pp&&(o.pp=new o),o.pp}},{"../../engine/XDefine":4,"../../engine/graphic/M2DFast":27,"../GmConfig":57,"./GmFuncs":62,"./GmMap":65}],64:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../GmConfig")),r=_interopRequireDefault(e("../../engine/XDefine")),s=_interopRequireDefault(e("../../engine/graphic/AnimaAction")),o=_interopRequireDefault(e("./GmMap")),u=_interopRequireDefault(e("../../engine/graphic/M2DFast")),l=_interopRequireDefault(e("../../engine/math/M_SEGMENT")),f=_interopRequireDefault(e("../../engine/math/XMath")),h=_interopRequireDefault(e("../../engine/math/M_POINT")),c=_interopRequireDefault(e("./GmFuncs")),d=_interopRequireDefault(e("./GmGrow")),p=(_interopRequireDefault(e("../../engine/XOLE")),_interopRequireDefault(e("./GmEffect"))),_=_interopRequireDefault(e("../GmRes")),g=_interopRequireDefault(e("../../engine/XWavFast")),m=_interopRequireDefault(e("./GmPlay")),y=_interopRequireDefault(e("./GmSet"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var v=function(){function _BOOM_LINES(){_classCallCheck(this,_BOOM_LINES),this.lines=new Array,this.iCount=0}return a(_BOOM_LINES,[{key:"Clear",value:function(){this.iCount=0}},{key:"_set_line",value:function(e,t,i,a,n){null==this.lines[e]&&(this.lines[e]=new l.default),this.lines[e].Set(t,i,a,n),this.iCount<e+1&&(this.iCount=e+1)}}]),_BOOM_LINES}(),b=function(){function _BOOM_POINTS(){_classCallCheck(this,_BOOM_POINTS),this.points=new Array,this.iCount=0}return a(_BOOM_POINTS,[{key:"Clear",value:function(){this.iCount=0}},{key:"_set_point",value:function(e,t,i){null==this.points[e]&&(this.points[e]=new Object),this.points[e].x=t,this.points[e].y=i,this.iCount<e+1&&(this.iCount=e+1)}}]),_BOOM_POINTS}(),S=function(){function GmHeros(){_classCallCheck(this,GmHeros),this.bRuning=!1,this.fRunAngle=0,this.aa_body=new s.default,this.blade_points=new b,this.boom_points=new b,this.boom_lines=new v,this.draw_tip_offx=0,this.draw_tip_offy=0,this.collide_radius=n.default.pconfig.att_hero_collide_radius,this.bAlive=!0,this.iWeight=1,this.b_point=new h.default(0,0),this.d_point=new h.default(0,0),this.iRotateStat=1,this.iNowExp=0,this.iNowLevel=0,this.buf_last=new Array;for(var e=0;e<3;e++)this.buf_last[e]=0;this.aa_reborn=new s.default,this.aa_eat_exp=new s.default}return a(GmHeros,[{key:"ResetBlade",value:function(e){this.iUnitCount=e;var t=0;this.iBladeLength=e*this.pblade.grow_unit_value,this.blade_points._set_point(t++,this.iBladeLength,this.pblade.width/2),this.blade_points._set_point(t++,0,this.pblade.width/2),this.blade_points._set_point(t++,0,-this.pblade.width/2);for(var i=0;i<this.pblade.blade_tip.length;i++)this.blade_points._set_point(t++,this.iBladeLength+this.pblade.blade_tip[i].x,this.pblade.blade_tip[i].y);this.CalcBladePL(),this.iNowExp=0,this.iNowLevel=this.iUnitCount-1}},{key:"Init",value:function(e,t){this.iPos=t,this.bme=e,this.iKillCount=0,this.iX=r.default.grnd(100,o.default.gi().iWidth-100),this.iY=r.default.grnd(100,o.default.gi().iHeight-100),this.bReborn=!1,this.bEatedExp=!1,this.Revive()}},{key:"Revive",value:function(){0==this.iPos?(null!=m.default.gi().pTrySkin?this.phero=m.default.gi().pTrySkin:this.phero=n.default.pconfig.GetHeroById(y.default.iUseingSkinId),o.default.gi().bLockMove=!1,o.default.gi().bMoving=!1):this.phero=n.default.pconfig.GetRandHero(),this.pblade=n.default.pconfig.GetBladeById(this.phero.blade_id),this.iPos>0&&(this.iX=r.default.grnd(100,o.default.gi().iWidth-100),this.iY=r.default.grnd(100,o.default.gi().iHeight-100)),this.b_point.Set(this.iX,this.iY),this.aa_body.copyfrom(this.phero.aa_stand),this.bMoving=!1,this.fMoveAngle=0,this.bFaceToLeft=!1,this.blade_cx=this.phero.centerx,this.blade_cy=this.phero.centery,this.d_point.Set(this.iX+this.phero.centerx,this.iY+this.phero.centery),this.blade_distance=this.phero.arm_length+this.pblade.handle_length,this.fBladeAngle=0,this.fBladeAngleSpeed=0,this.iNowExp=0,this.iNowLevel=0,this.ResetBlade(this.iPos>this.pblade.grow_start_unit?this.iPos:this.pblade.grow_start_unit),this.iWuDiDelay=0,this.iWuDi2Delay=0,this.iHeartCount=this.phero.heart_count,this.iBePushDelay=0,this.iPushDx=0,this.iPushDy=0,this.iRotateStat=r.default.grnd(1,2),this.bRuning=!1,this.iAiDelay=999999,this.iai_target=0,this.bAlive=!0,this.bReborn=!0,this.aa_reborn.copyfrom(_.default.aa_light_reborn),this.iWuDiDelay=30}},{key:"Draw",value:function(){if(this.bAlive){var e=u.default.pm2f,t=this.iX*o.default.fMapScale+o.default.iMapOffX,i=this.iY*o.default.fMapScale+o.default.iMapOffY;n.default.SHOW_COLLIDE&&e.DrawCircle(t,i,this.collide_radius*o.default.fMapScale,16777215,2),e.DrawTextEx(t,i+15,this.sName,16777215,30*o.default.fMapScale,100,1,1,0,-2,-2);var a=!0;this.iWuDiDelay>0&&(this.iWuDiDelay--,parseInt(this.iWuDiDelay/3)%2==0&&(a=!1)),this.iWuDi2Delay>0&&this.iWuDi2Delay--,a&&this.aa_body.DrawEx(t,i,100,o.default.fMapScale,o.default.fMapScale,0,-2,-2,this.bFaceToLeft),this.aa_body.NextFrame(),this.DrawBlade(e,t,i,o.default.fMapScale),this.bReborn&&(this.aa_reborn.DrawEx(t,i,100,o.default.fMapScale,o.default.fMapScale,0,-2,-2),this.aa_reborn.NextFrame()&&(this.bReborn=!1)),this.bEatedExp&&(this.aa_eat_exp.DrawEx(t,i,100,o.default.fMapScale,o.default.fMapScale,0,-2,-2),this.aa_eat_exp.NextFrame()&&(this.bEatedExp=!1)),this.buf_last[2]>0&&_.default.aa_shield.DrawEx(t,i,100,o.default.fMapScale,o.default.fMapScale,0,-2,-2);var r=!1,s=0,l=0;this.bRuning&&(s=Math.cos(this.fRunAngle)*this.phero.move_speed*(this.buf_last[0]>0?n.default.item_speed_rate:1),l=Math.sin(this.fRunAngle)*this.phero.move_speed*(this.buf_last[0]>0?n.default.item_speed_rate:1),this.bFaceToLeft=!(s>0)),this.iBePushDelay>0&&(s+=this.iPushDx,l+=this.iPushDy,this.iBePushDelay--),0==s&&0==l||(o.default.move_once(this,s,l,0),this.b_point.Set(this.iX,this.iY),this.d_point.Set(this.iX+this.phero.centerx,this.iY+this.phero.centery),r=!0),2==this.iRotateStat?this.fBladeAngleSpeed+this.pblade.turn_acc_angle<this.pblade.turn_angle_speed?this.fBladeAngleSpeed+=this.pblade.turn_acc_angle:this.fBladeAngleSpeed=this.pblade.turn_angle_speed:1==this.iRotateStat&&(this.fBladeAngleSpeed-this.pblade.turn_acc_angle>-this.pblade.turn_angle_speed?this.fBladeAngleSpeed-=this.pblade.turn_acc_angle:this.fBladeAngleSpeed=-this.pblade.turn_angle_speed),0!=this.fBladeAngleSpeed&&(this.fBladeAngle+=this.fBladeAngleSpeed,this.fBladeAngleSpeed>this.pblade.turn_slow_angle?this.fBladeAngleSpeed-=this.pblade.turn_slow_angle:this.fBladeAngleSpeed<-this.pblade.turn_slow_angle?this.fBladeAngleSpeed+=this.pblade.turn_slow_angle:this.fBladeAngleSpeed=0,r=!0),r&&(this.CalcBladePL(),this.CalcBladeBoomMap()),this.CalcBladeBoomEnemy(),this.iPos>0&&this.ai_calc()}}},{key:"DrawCountDown",value:function(e,t,i,a){if(!this.bShooting){var n=i/a;n>.5?(_.default.aa_item_count_down.DrawEx1(e,t,1,100,1,1,180,-2,-2),_.default.aa_item_count_down.DrawEx1(e,t,0,100,1,1,180*n/.5,-2,-2),_.default.aa_item_count_down.DrawEx1(e,t,1,100,1,1,0,-2,-2)):(_.default.aa_item_count_down.DrawEx1(e,t,0,100,1,1,180,-2,-2),_.default.aa_item_count_down.DrawEx1(e,t,1,100,1,1,0,-2,-2),_.default.aa_item_count_down.DrawEx1(e,t,0,100,1,1,180*n/.5,-2,-2))}}},{key:"DrawItem",value:function(){for(var e=0,t=0;t<3;t++)this.buf_last[t]<=0||e++;if(!(e<=0)){var i=60*e+16*(e-1),a=Laya.stage.width/2-i/2;for(t=0;t<3;t++)this.buf_last[t]<=0||(this.buf_last[t]--,_.default.aa_item_show.Draw(a+30,46,t),this.DrawCountDown(a+30,46,this.buf_last[t],n.default.item_last_frame[t]),a+=76)}}},{key:"EatItem",value:function(e){15==e.patt.id&&(this.buf_last[0]=n.default.item_last_frame[0]),16==e.patt.id&&(this.buf_last[1]=n.default.item_last_frame[1]),17==e.patt.id&&(this.buf_last[2]=n.default.item_last_frame[2]),e.bUseing=!1}},{key:"star_unlock_ai",value:function(e){this.iPos<=0||1==this.iai_target&&this.pai_dest==e&&(this.iai_target=0,this.iAiDelay=99999999)}},{key:"enemy_unlock_ai",value:function(e){this.iPos<=0||2==this.iai_target&&this.pai_dest==e&&(this.iai_target=0,this.iAiDelay=99999999)}},{key:"grass_unlock_ai",value:function(e){this.iPos<=0||3==this.iai_target&&this.pai_dest==e&&(this.iai_target=0,this.iAiDelay=99999999)}},{key:"_draw_line",value:function(e,t,i,a){}},{key:"ai_calc",value:function(){var e;switch(this.iai_target){case 1:this.MyMove(!0,f.default.angle_aox(this.pai_dest.iX-this.iX,this.pai_dest.iY-this.iY)),this._draw_line(this.pai_dest.iX,this.pai_dest.iY,this.iX,this.iY);break;case 2:(e=r.default.distance(this.iX,this.iY,this.pai_dest.iX,this.pai_dest.iY))>120?this.MyMove(!0,f.default.angle_aox(this.pai_dest.iX-this.iX,this.pai_dest.iY-this.iY)):e<80?this.MyMove(!0,-f.default.angle_aox(this.pai_dest.iX-this.iX,this.pai_dest.iY-this.iY)):this.MyMove(!1,0),this._draw_line(this.pai_dest.iX,this.pai_dest.iY,this.iX,this.iY);break;case 3:(e=r.default.distance(this.iX,this.iY,this.pai_dest.iX,this.pai_dest.iY))>160?this.MyMove(!0,f.default.angle_aox(this.pai_dest.iX-this.iX,this.pai_dest.iY-this.iY)):e<120?this.MyMove(!0,-f.default.angle_aox(this.pai_dest.iX-this.iX,this.pai_dest.iY-this.iY)):this.MyMove(!1,0),this._draw_line(this.pai_dest.iX,this.pai_dest.iY,this.iX,this.iY);break;case 4:(e=r.default.distance(this.iai_dx,this.iai_dy,this.iX,this.iY))>120?this.MyMove(!0,f.default.angle_aox(this.iai_dx-this.iX,this.iai_dy-this.iY)):this.iAiDelay=999999,this._draw_line(this.iai_dx,this.iai_dy,this.iX,this.iY)}if(this.iAiDelay<300)this.iAiDelay++;else{this.iAiDelay=0,1==this.iRotateStat?this.iRotateStat=2:this.iRotateStat=1,e=300;for(var t=null,i=0;i<c.default.pp.length;i++){if(c.default.pp[i].bUseing)if(10==c.default.pp[i].iStat)if(4==c.default.pp[i].patt.type||5==c.default.pp[i].patt.type)(s=r.default.distance(c.default.pp[i].iX,c.default.pp[i].iY,this.iX,this.iY))<e&&(t=c.default.pp[i],e=s)}if(null!=t)return this.iai_target=1,void(this.pai_dest=t);e=300;var a=null;for(i=0;i<o.default.pp.iHeroCount;i++){if(GmHeros.pp[i]!=this)if(!GmHeros.pp[i].bAlive)(s=r.default.distance(GmHeros.pp[i].iX,GmHeros.pp[i].iY,this.iX,this.iY))<e&&(a=GmHeros.pp[i],e=s)}if(null!=a)return this.iai_target=2,void(this.pai_dest=a);e=300;var n=null;for(i=0;i<c.default.pp.length;i++){var s;if(c.default.pp[i].bUseing)if(10==c.default.pp[i].iStat)if(1==c.default.pp[i].patt.type||2==c.default.pp[i].patt.type)(s=r.default.distance(c.default.pp[i].iX,c.default.pp[i].iY,this.iX,this.iY))<e&&(n=c.default.pp[i],e=s)}if(null!=n)return this.iai_target=3,void(this.pai_dest=n);this.iai_target=4,this.iai_dx=r.default.grnd(0,o.default.gi().iWidth),this.iai_dy=r.default.grnd(0,o.default.gi().iHeight)}}},{key:"DrawBlade",value:function(e,t,i,a){var r=t+this.blade_cx*a,s=i+this.blade_cy*a;if(n.default.SHOW_COLLIDE&&e.DrawCircle(r,s,45*a,16711680,2),r+=Math.cos(this.fBladeAngle)*this.blade_distance*a,s+=Math.sin(this.fBladeAngle)*this.blade_distance*a,this.pblade.aa_blade.DrawEx(r,s,100,a,a,180*this.fBladeAngle/Math.PI,-2,-2),this.pblade.aa_blade.DrawEx1(r,s,1,100,a*this.iBladeLength/10,a,180*this.fBladeAngle/Math.PI,-2,-2),this.pblade.aa_blade.DrawEx1(r+this.draw_tip_offx*a,s+this.draw_tip_offy*a,2,100,a,a,180*this.fBladeAngle/Math.PI,-2,-2),n.default.SHOW_COLLIDE)for(var o=0;o<this.boom_points.iCount-1;o++)e.DrawLine(r+this.boom_points.points[o].x*a,s+this.boom_points.points[o].y*a,r+this.boom_points.points[o+1].x*a,s+this.boom_points.points[o+1].y*a,16711680,3)}},{key:"MyMove",value:function(e,t){this.bRuning!=e&&(this.bRuning=e,e?this.aa_body.copyfrom(this.phero.aa_run):this.aa_body.copyfrom(this.phero.aa_stand)),this.fRunAngle=t}},{key:"MyMoveBlade",value:function(e){1!=e&&2!=e||(this.iRotateStat=e)}},{key:"CalcBladePL",value:function(){this.boom_points.Clear();for(var e=0;e<this.blade_points.iCount;e++)this.boom_points._set_point(e,this.blade_points.points[e].x*Math.cos(this.fBladeAngle)-Math.sin(this.fBladeAngle)*this.blade_points.points[e].y,this.blade_points.points[e].x*Math.sin(this.fBladeAngle)+Math.cos(this.fBladeAngle)*this.blade_points.points[e].y);this.draw_tip_offx=this.iBladeLength*Math.cos(this.fBladeAngle),this.draw_tip_offy=this.iBladeLength*Math.sin(this.fBladeAngle);var t=this.iX+this.blade_cx+Math.cos(this.fBladeAngle)*this.blade_distance,i=this.iY+this.blade_cy+Math.sin(this.fBladeAngle)*this.blade_distance;this.boom_lines.Clear();for(e=0;e<this.boom_points.iCount-1;e++)this.boom_lines._set_line(e,t+this.boom_points.points[e].x,i+this.boom_points.points[e].y,t+this.boom_points.points[e+1].x,i+this.boom_points.points[e+1].y)}},{key:"CalcBladeBoomEnemy",value:function(){for(var e,t=0;t<o.default.pp.iHeroCount;t++)if((e=GmHeros.pp[t]).bAlive&&e!=this&&!(e.iWuDiDelay>0||e.iWuDi2Delay>0))for(var i=this.boom_lines.iCount-1;i>=0;i--)if(f.default.ps_distance_less(e.d_point,this.boom_lines.lines[i],45)){p.default.gi().AddEffect0(h.default.gi(20).x,h.default.gi(20).y,_.default.aa_light_hit),0==e.iPos&&(e.iPos=0),e.buf_last[2]>0?(i>=3?this._zhentui(e.iX+e.blade_cx,e.iY+e.blade_cy):this._fantan(e.iX+e.blade_cx,e.iY+e.blade_cy),e.buf_last[2]=0,e.iWuDi2Delay=15):(this.iKillCount++,e.SubHp(),0!=this.iPos&&0!=e.iPos||g.default.PlaySoundEx("dead"));break}}},{key:"_fantan",value:function(e,t){var i=this.iX+this.blade_cx,a=this.iY+this.blade_cy,n=i+this.draw_tip_offx,r=a+this.draw_tip_offy,s=f.default.angle_aob(e,t,i,a,n,r);n=i+Math.cos(s)*this.draw_tip_offx-Math.sin(s)*this.draw_tip_offy,r=a+Math.sin(s)*this.draw_tip_offx+Math.cos(s)*this.draw_tip_offy,f.default.angle_aob(e,t,i,a,n,r)>s?(this.fBladeAngleSpeed=Math.PI/18,this.iRotateStat=2):(this.fBladeAngleSpeed=-Math.PI/18,this.iRotateStat=1)}},{key:"_zhentui",value:function(e,t){this.iBePushDelay=5;var i=f.default.angle_aox(this.iX-e,this.iY-t);this.iPushDx=20*Math.cos(i),this.iPushDy=20*Math.sin(i)}},{key:"CalcBladeBoomMap",value:function(){for(var e,t,i=0;i<c.default.pp.length;i++)if(c.default.pp[i]&&10==(e=c.default.pp[i]).iStat){t=!1;for(var a=3;a<this.boom_lines.iCount;a++)if(f.default.ps_distance_less(e.b_point,this.boom_lines.lines[a],e.collide_radius)){"no"==e.patt.blade_pass&&(this._zhentui(e.iX,e.iY),this.ChangeBlade(-1),0==this.iPos&&g.default.PlaySoundEx("hit_stone"),p.default.gi().AddEffect0(h.default.gi(20).x,h.default.gi(20).y,_.default.aa_light_stone)),t=!0;break}if(!t)for(a=0;a<3;a++)if(f.default.ps_distance_less(e.b_point,this.boom_lines.lines[a],e.collide_radius)){"no"==e.patt.blade_pass&&(this._fantan(e.iX,e.iY),this.ChangeBlade(-1),0==this.iPos&&g.default.PlaySoundEx("hit_stone"),p.default.gi().AddEffect0(h.default.gi(20).x,h.default.gi(20).y,_.default.aa_light_stone)),t=!0;break}t&&"yes"==e.patt.destory&&(e.SubHp(),0!=this.iPos||1!=e.patt.type&&2!=e.patt.type||g.default.PlaySoundEx("slash_grass"))}}},{key:"RealEatStar",value:function(e){0==this.iPos&&g.default.PlaySoundEx("eat_exp"),4==e.patt.type?this.iNowExp+=n.default.exp_grass_1*(this.buf_last[1]>0?n.default.item_exp_rate:1):5==e.patt.type&&(this.iNowExp+=n.default.exp_grass_1*(this.buf_last[1]>0?n.default.item_exp_rate:1)),this.iNowExp=Math.ceil(this.iNowExp),this.iNowLevel<n.default.gi().patt_exp.length&&this.iNowExp>=n.default.gi().patt_exp[this.iNowLevel]&&(this.iNowExp-=n.default.gi().patt_exp[this.iNowLevel],this.ChangeBlade(1)),e.bUseing=!1,this.bEatedExp=!0,this.aa_eat_exp.copyfrom(_.default.aa_light_eat_exp)}},{key:"ChangeBlade",value:function(e){e>0?(this.iUnitCount<this.pblade.grow_max_unit&&(this.iUnitCount+=e,this.iUnitCount>this.pblade.grow_max_unit&&(this.iUnitCount=this.pblade.grow_max_unit),this.ResetBlade(this.iUnitCount),this.bReborn=!0,this.aa_reborn.copyfrom(_.default.aa_light_reborn)),this.iNowLevel=this.iUnitCount-1):e<0&&(this.iUnitCount>this.pblade.grow_min_unit&&(this.iUnitCount+=e,this.iUnitCount<this.pblade.grow_min_unit&&(this.iUnitCount=this.pblade.grow_min_unit),this.ResetBlade(this.iUnitCount)),this.iNowExp=0,this.iNowLevel=this.iUnitCount-1)}},{key:"SubHp",value:function(){if(this.iHeartCount>1)this.iHeartCount--;else{for(var e=0,t=0;t<this.iNowLevel;t++)e+=n.default.gi().patt_exp[t];e+=this.iNowExp,e=parseInt(e*n.default.dead_exp_rate);var i=parseInt(e/n.default.exp_grass_2),a=e%n.default.exp_grass_2;d.default.gi().FreshStar2(this.iX,this.iY,4,a),d.default.gi().FreshStar2(this.iX,this.iY,4,i);for(t=0;t<c.default.pp.length;t++)c.default.pp[t].bUseing&&20==c.default.pp[t].iStat&&c.default.pp[t].pdest==this&&(c.default.pp[t].iStat=10);for(t=0;t<o.default.pp.iHeroCount;t++)GmHeros.pp[t].enemy_unlock_ai(this);this.bAlive=!1,0==this.iPos?(this.fBladeAngle=0,this.CalcBladePL(),o.default.iWatchForRevive=90):this.Revive()}this.iWuDiDelay=30}}]),GmHeros}();i.default=S,S.pp=new Array,S.gi=function(e){return null==S.pp[e]&&(S.pp[e]=new S),S.pp[e]}},{"../../engine/XDefine":4,"../../engine/XOLE":9,"../../engine/XWavFast":12,"../../engine/graphic/AnimaAction":26,"../../engine/graphic/M2DFast":27,"../../engine/math/M_POINT":54,"../../engine/math/M_SEGMENT":55,"../../engine/math/XMath":56,"../GmConfig":57,"../GmRes":59,"./GmEffect":61,"./GmFuncs":62,"./GmGrow":63,"./GmMap":65,"./GmPlay":66,"./GmSet":68}],65:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../../engine/graphic/M2DFast")),r=_interopRequireDefault(e("../GmConfig")),s=_interopRequireDefault(e("../../engine/XDrawOrder")),o=_interopRequireDefault(e("./GmFuncs")),u=_interopRequireDefault(e("./GmHeros")),l=_interopRequireDefault(e("../GmRes")),f=_interopRequireDefault(e("../../engine/math/XMath")),h=_interopRequireDefault(e("../../engine/XDefine")),c=_interopRequireDefault(e("../../engine/XWithOut")),d=_interopRequireDefault(e("./GmGrow")),p=_interopRequireDefault(e("../../engine/control/XButton")),_=_interopRequireDefault(e("./GmPlay")),g=_interopRequireDefault(e("./GmSet")),m=_interopRequireDefault(e("../../engine/interface/BridgeInterface")),y=_interopRequireDefault(e("./GmSave"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var v=function(){function GmMap(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GmMap),this.bLockMove=!1,this.iLockMoveX=0,this.iLockMoveY=0,this.bMoving=!1,this.iMovingX=0,this.iMovingY=0,this.fMoveAngle=0,this.iBladeMoveStat=0,this.bLockBlade=!1,this.phero_sort=new Array(64),this.end_list=new Array(6);for(var e=0;e<6;e++)this.end_list[e]=new Object;this.btn_close=new p.default,this.btn_close.SetAnima(l.default.pres.pani_ui,"btn_close"),this.btn_revive=new p.default,this.btn_revive.SetAnima(l.default.pres.pani_ui,"btn_green_ad"),this.btn_revive.SetType1(40,0,48),this.btn_revive.sName="Revive",this.btn_x3=new p.default,this.btn_x3.SetAnima(l.default.pres.pani_ui,"btn_green_ad"),this.btn_x3.SetType1(24,0,48),this.btn_x3.sName="3X",this.btn_thanks=new p.default,this.btn_thanks.SetAnima(l.default.pres.pani_ui,"btn_thanks")}return a(GmMap,[{key:"SetMap",value:function(e){this.pmap=r.default.pconfig.GetMapById(e);var t=n.default.pm2f.FindImage(this.pmap.res_id);this.iWidth=this.pmap.width,this.iHeight=this.pmap.height,this.res_w=t.image.width,this.res_h=t.image.height,this.base_scale_w=this.pmap.width/this.res_w,this.base_scale_h=this.pmap.height/this.res_h,GmMap.iMapOffX=0,GmMap.iMapOffY=0,d.default.gi().Reset(),this.iHeroCount=9;for(var i=0;i<this.iHeroCount;i++)u.default.gi(i).Init(0==i,i),u.default.gi(i).sName=i>0?r.default.names[h.default.grnd(0,r.default.names.length-1)]:g.default.sMyName;this.pme=u.default.gi(0),GmMap.scr_left=0,GmMap.scr_right=this.iWidth,GmMap.scr_top=0,GmMap.scr_bottom=this.iHeight,GmMap.iStartSecond=h.default.iSecond,this.iSurviveTime=0}},{key:"Draw",value:function(){var e=n.default.pm2f,t=_.default.gi();GmMap.iMapOffX=-(this.pme.iX-Laya.stage.width/GmMap.fMapScale/2),GmMap.iMapOffY=-(this.pme.iY-Laya.stage.height/GmMap.fMapScale/2),GmMap.iMapOffX>0&&(GmMap.iMapOffX=0),GmMap.iMapOffY>0&&(GmMap.iMapOffY=0),GmMap.iMapOffX<Laya.stage.width/GmMap.fMapScale-this.iWidth&&(GmMap.iMapOffX=Laya.stage.width/GmMap.fMapScale-this.iWidth),GmMap.iMapOffY<Laya.stage.height/GmMap.fMapScale-this.iHeight&&(GmMap.iMapOffY=Laya.stage.height/GmMap.fMapScale-this.iHeight),GmMap.iMapOffX*=GmMap.fMapScale,GmMap.iMapOffY*=GmMap.fMapScale,e.DrawImageEx(GmMap.iMapOffX,GmMap.iMapOffY,this.pmap.res_id,0,0,-1,-1,100,this.base_scale_w*GmMap.fMapScale,this.base_scale_h*GmMap.fMapScale,0,-1,-1),d.default.gi().Logic(),d.default.gi().Draw();for(var i=0;i<o.default.pp.length;i++)o.default.pp[i].bUseing&&o.default.pp[i].Logic();var a=s.default.gi();a.Clear();for(i=0;i<o.default.pp.length;i++)o.default.pp[i].bUseing&&(o.default.pp[i].iStat>=10&&o.default.pp[i].iStat<30?a.Push(o.default.pp[i]):o.default.pp[i].Draw());for(i=0;i<this.iHeroCount;i++)a.Push(u.default.pp[i]);a.Order(),a.Draw();var r=!1;GmMap.iDefaultStickX=128,GmMap.iDefaultStickY=Laya.stage.height-128,this.bLockMove?(10==t.iGameStat&&l.default.aa_joy_stick.Draw(this.iLockMoveX,this.iLockMoveY,1),this.bMoving&&(this.fMoveAngle=f.default.angle_aox(this.iMovingX-this.iLockMoveX,this.iMovingY-this.iLockMoveY),10==t.iGameStat&&l.default.aa_joy_stick.DrawEx1(this.iLockMoveX,this.iLockMoveY,0,100,1,1,180*this.fMoveAngle/Math.PI,-2,-2),r=!0)):10==t.iGameStat&&l.default.aa_joy_stick.Draw(GmMap.iDefaultStickX,GmMap.iDefaultStickY,1),this.pme.MyMove(r,this.fMoveAngle),this.pme.MyMoveBlade(this.iBladeMoveStat),10==t.iGameStat&&l.default.aa_btn_slash.Draw(Laya.stage.width-190,Laya.stage.height-128,this.iBladeMoveStat),10==t.iGameStat&&this.DrawLeaderBoard();var h=u.default.pp[0].iBladeLength/(.35*Laya.stage.height);(h=1/h)>.8&&(h=.8),GmMap.fMapScale<h-.01?GmMap.fMapScale+=.01:GmMap.fMapScale>h+.01?GmMap.fMapScale-=.01:GmMap.fMapScale=h,u.default.pp[0].DrawItem(),GmMap.iWatchForRevive>0&&this.WatchADForRevive(),GmMap.iWatchForMoreGold>0&&this.WatchADForMoreGold()}},{key:"DrawSmallMap",value:function(e,t,i,a){var r=n.default.pm2f,s=i/this.iWidth,o=a/this.iHeight;r.FillRect(e,t,i,a,16777215,1,40);for(var l=0;l<this.iHeroCount;l++)u.default.pp[l].bme?r.FillRect(e+u.default.pp[l].iX*s,t+u.default.pp[l].iY*o,2,2,65280,1,100):r.FillRect(e+u.default.pp[l].iX*s,t+u.default.pp[l].iY*o,2,2,16711680,1,100);s/=GmMap.fMapScale,o/=GmMap.fMapScale,r.DrawRect(e-GmMap.iMapOffX*s,t-GmMap.iMapOffY*o,Laya.stage.width*s,Laya.stage.height*o,16777215,1)}},{key:"DrawLeaderBoard",value:function(){var e,t,i=n.default.pm2f,a=Laya.stage.width-16-272,s=16;this.DrawFrame(l.default.aa_panel_blue,a,s,272,203,30);var o=this.iHeroCount,f=this.phero_sort;for(e=0;e<o;e++)f[e]=u.default.pp[e];for(e=0;e<o-1;e++)for(t=e+1;t<o;t++)if(f[t].iNowLevel>f[e].iNowLevel||f[t].iNowLevel==f[e].iNowLevel&&f[t].iNowExp>f[e].iNowExp){var c=f[e];f[e]=f[t],f[t]=c}for(e=0;e<o;e++)f[e].iNum=e+1;for(e=0;e<6&&0!=f[e].iPos;e++);for(e>=6&&(f[5]=u.default.pp[0]),e=0;e<6;e++)o=0==f[e].iPos?16711680:16777215,i.DrawTextEx(a+32,53+22*e,""+f[e].iNum,o,18,100,1,1,0,-1,-3),i.DrawTextEx(a+64,53+22*e,f[e].sName,o,18,100,1,1,0,-1,-3),i.DrawTextEx(a+180,53+22*e,""+(r.default.pconfig.patt_sum_exp[f[e].iNowLevel]+f[e].iNowExp),o,18,100,1,1,0,-1,-3);i.DrawTextEx(a+32,186,"kills "+u.default.pp[0].iKillCount,16777215,18,100,1,1,0,-1,-3),i.DrawTextEx(a+32,203,"survival time "+h.default.FormatSecond(h.default.iSecond-GmMap.iStartSecond),16777215,18,100,1,1,0,-1,-3)}},{key:"WatchADForRevive",value:function(){var e=n.default.pm2f;e.FillRect(0,0,Laya.stage.width,Laya.stage.height,0,1,75);var t=636,i=(Laya.stage.width-t)/2,a=(Laya.stage.height-628)/2;this.DrawFrame(l.default.aa_panel_black,i,a,t,628,30),e.DrawTextEx(i+318,a+80,"Watch Video To Get",16777215,60,100,1,1,0,-2,-3),e.DrawTextEx(i+318,a+151,"Revive?",9627904,60,100,1,1,0,-2,-3),this.DrawCountDown(i+318,a+195,GmMap.iWatchForRevive,90),u.default.pp[0].phero.aa_run.Draw(i+318,a+364),u.default.pp[0].phero.aa_run.NextFrame(),u.default.pp[0].DrawBlade(e,i+318,a+364,1),e.DrawTextEx(i+318,a+430,"Kill:"+u.default.pp[0].iKillCount,16777215,36,100,1,1,0,-2,-3),e.DrawTextEx(i+318,a+466,"Score:"+u.default.pp[0].iKillCount,16777215,36,100,1,1,0,-2,-3),this.btn_close.Move(i+127,a+496,96,96),this.btn_close.Draw(),this.btn_revive.Move(i+253,a+496,256,96),this.btn_revive.Draw(),GmMap.bPauseDelay||GmMap.iWatchForRevive--,GmMap.iWatchForRevive<=0&&this.FinishGame()}},{key:"FinishGame",value:function(){GmMap.iWatchForMoreGold=90;for(var e=0;e<6;e++)this.end_list[e].p=this.phero_sort[e],this.end_list[e].total_exp=r.default.pconfig.patt_sum_exp[this.phero_sort[e].iNowLevel]+this.phero_sort[e].iNowExp,this.end_list[e].num=this.phero_sort[e].iNum;this.iGetMoney=10*u.default.pp[0].iKillCount+r.default.gi().patt_reward[u.default.pp[0].iNum-1];u.default.pp[0];g.default.iTotalKill+=u.default.pp[0].iKillCount,g.default.iLastKill=u.default.pp[0].iKillCount,g.default.iLastScore=r.default.pconfig.patt_sum_exp[u.default.pp[0].iNowLevel]+u.default.pp[0].iNowExp,g.default.iLastSurviveTime=h.default.iSecond-GmMap.iStartSecond,g.default.iLastKill>g.default.iBestKill&&(g.default.iBestKill=g.default.iLastKill),g.default.iLastScore>g.default.iBestScore&&(g.default.iBestScore=g.default.iLastScore),g.default.iLastSurviveTime>g.default.iBestSurviveTime&&(g.default.iBestSurviveTime=g.default.iLastSurviveTime),_.default.gi().pTrySkin=null,y.default.gi().SaveInfo()}},{key:"WatchADForMoreGold",value:function(){var e=n.default.pm2f;e.FillRect(0,0,Laya.stage.width,Laya.stage.height,0,1,75);var t,i=636,a=(Laya.stage.width-i)/2,r=(Laya.stage.height-628)/2;this.DrawFrame(l.default.aa_panel_black,a,r,i,628,30),e.DrawTextEx(a+318,r+80,"Watch Video for",16777215,60,100,1,1,0,-2,-3),e.DrawTextEx(a+318,r+151,"More Gold?",16438272,60,100,1,1,0,-2,-3);for(var s=this.end_list,o=0;o<6;o++)t=0==s[o].p.iPos?16711680:16777215,e.DrawTextEx(a+143,r+195+32*o,""+s[o].num,t,30,100,1,1,0,-1,-3),e.DrawTextEx(a+201,r+195+32*o,s[o].p.sName,t,30,100,1,1,0,-1,-3),e.DrawTextEx(a+493,r+195+32*o,""+s[o].total_exp,t,30,100,1,1,0,-3,-3);var u=80+e.TextWidth(""+this.iGetMoney,36);l.default.aa_coin.Draw(a+318-u/2,r+369),e.DrawTextEx(a+318-u/2+64+16,r+369+32,""+this.iGetMoney,16438272,36,100,1,1,0,-1,-2),this.btn_x3.Move(a+192,r+446,256,96),this.btn_x3.Draw(),this.btn_thanks.Move(a+250,r+562,136,30),this.btn_thanks.Draw()}},{key:"DrawCountDown",value:function(e,t,i,a){if(!this.bShooting){var r=parseInt(i/30),s=i/a;s>.5?(l.default.aa_count_down.DrawEx1(e,t,1,100,1,1,180,-2,-2),l.default.aa_count_down.DrawEx1(e,t,0,100,1,1,180*s/.5,-2,-2),l.default.aa_count_down.DrawEx1(e,t,1,100,1,1,0,-2,-2)):(l.default.aa_count_down.DrawEx1(e,t,0,100,1,1,180,-2,-2),l.default.aa_count_down.DrawEx1(e,t,1,100,1,1,0,-2,-2),l.default.aa_count_down.DrawEx1(e,t,0,100,1,1,180*s/.5,-2,-2)),n.default.pm2f.DrawTextEx(e,t,r,16777215,30,100,1,1,0,-2,-2)}}},{key:"DrawFrame",value:function(e,t,i,a,n,r,s){e.Draw(t,i,0),e.DrawEx1(t+r,i,1,100,(a-2*r)/r,1,0,-2,-2),e.Draw(t+a-r,i,2),e.DrawEx1(t+a-r,i+r,3,100,1,(n-2*r)/r,0,-2,-2),e.Draw(t+a-r,i+n-r,4),e.DrawEx1(t+r,i+n-r,5,100,(a-2*r)/r,1,0,-2,-2),e.Draw(t,i+n-r,6),e.DrawEx1(t,i+r,7,100,1,(n-2*r)/r,0,-2,-2),null==s&&e.DrawEx1(t+r,i+r,8,100,(a-2*r)/r,(n-2*r)/r,0,-2,-2)}},{key:"WatchedAD1",value:function(){u.default.pp[0].Revive(),GmMap.iWatchForRevive=0,GmMap.bPauseDelay=!1}},{key:"ClosedAD1",value:function(){GmMap.bPauseDelay=!1}},{key:"WatchedAD2",value:function(){g.default.iOwnMoney+=3*GmMap.iWatchForMoreGold,GmMap.iWatchForMoreGold=0,_.default.gi().iGameStat=0,GmMap.bPauseDelay=!1,y.default.gi().SaveInfo()}},{key:"ClosedAD2",value:function(){GmMap.bPauseDelay=!1}},{key:"ProcTouch",value:function(e,t,i){return GmMap.iWatchForRevive>0?(this.btn_revive.ProcTouch(e,t,i)&&this.btn_revive.bCheck()&&(GmMap.bPauseDelay=!0,m.default.bADActive?m.default.gi().SendMessage("playad","1"):this.WatchedAD1()),this.btn_close.ProcTouch(e,t,i)&&this.btn_close.bCheck()&&(GmMap.iWatchForRevive=1),!0):GmMap.iWatchForMoreGold>0?(this.btn_x3.ProcTouch(e,t,i)&&this.btn_x3.bCheck()&&(GmMap.bPauseDelay=!0,m.default.bADActive?m.default.gi().SendMessage("playad","2"):this.WatchedAD2()),this.btn_thanks.ProcTouch(e,t,i)&&this.btn_thanks.bCheck()&&(g.default.iOwnMoney+=GmMap.iWatchForMoreGold,GmMap.iWatchForMoreGold=0,_.default.gi().iGameStat=0,y.default.gi().SaveInfo()),!0):(t<Laya.stage.width/2?(1==e&&(this.bLockMove||(this.bLockMove=!0,this.iLockMoveX=t,this.iLockMoveY=i,this.iMovingX=t,this.iMovingY=i)),2==e&&this.bLockMove&&(h.default.distance(this.iLockMoveX,this.iLockMoveY,t,i)>20&&(this.bMoving=!0),this.bMoving&&(this.iMovingX=t,this.iMovingY=i)),3==e&&(this.bLockMove=!1,this.bMoving=!1)):(1==e&&(this.bLockBlade=!0),3==e&&(this.bLockBlade=!1),1!=e&&2!=e||!this.bLockBlade?this.iBladeMoveStat=0:t<Laya.stage.width-190?this.iBladeMoveStat=1:this.iBladeMoveStat=2),!1)}}]),GmMap}();i.default=v,v.calc_boom=function(e,t,i,a){var n=e.collide_radius+a.collide_radius;return!(e.iX+t+n<a.iX)&&(!(e.iX+t-n>a.iX)&&(!(e.iY+i+n<a.iY)&&(!(e.iY+i-n>a.iY)&&h.default.distance(e.iX+t,e.iY+i,a.iX,a.iY)<n)))},v.move_once=function(e,t,i,a){if(isNaN(t)||isNaN(i))return v.tdx=0,void(v.tdy=0);if(a>=2)return v.tdx=0,void(v.tdy=0);e.iX+t-e.collide_radius<v.scr_left&&(t=v.scr_left-e.iX+e.collide_radius),e.iX+t+e.collide_radius>v.scr_right&&(t=v.scr_right-e.iX-e.collide_radius),e.iY+i-e.collide_radius<v.scr_top&&(i=v.scr_top-e.iY+e.collide_radius),e.iY+i+e.collide_radius>v.scr_bottom&&(i=v.scr_bottom-e.iY-e.collide_radius);var n,r,s,l,h,d,p,_=0;for(0==a&&c.default.clear(),c.default.putmonster(e),n=0;n<v.pp.iHeroCount+o.default.pp.length;n++){if(n<v.pp.iHeroCount){if(!(p=u.default.pp[n]).bAlive)continue}else{if(!(p=o.default.pp[n-v.pp.iHeroCount]).bUseing)continue;if("yes"==p.patt.man_pass)continue;if(10!=p.iStat)continue}if(!c.default.bin(p)&&v.calc_boom(e,t,i,p)){if(n>=v.pp.iHeroCount){if(4==p.patt.type||5==p.patt.type){p.LockHero(e);continue}if(6==p.patt.type){e.EatItem(p);continue}}if(!f.default.angle_90(t,i,0,0,p.iX-e.iX,p.iY-e.iY)&&(f.default.vector_devide(t,i,p.iX-e.iX,p.iY-e.iY),r=f.default.v1x*e.iWeight/(e.iWeight+p.iWeight),s=f.default.v1y*e.iWeight/(e.iWeight+p.iWeight),l=f.default.v2x,h=f.default.v2y,n>=v.pp.iHeroCount?d=0:0==r&&0==s?d=0:(v.move_once(p,r,s,a+1),d=Math.sqrt(v.tdx*v.tdx+v.tdy*v.tdy)/Math.sqrt(r*r+s*s)),t=r*d+l,i=s*d+h,_++,(Math.abs(t)<.5&&Math.abs(i)<.5||_>=3)&&(t=0,i=0),0==t&&0==i))break}}v.tdx=t,v.tdy=i,e.iX+=t,e.iY+=i,c.default.mp--},v.iWatchForRevive=0,v.iWatchForMoreGold=0,v.bPauseDelay=!1,v.pp=null,v.gi=function(){return null==v.pp&&(v.pp=new v),v.pp},v.iMapOffX=0,v.iMapOffY=0,v.fMapScale=.5,v.iStartSecond=0},{"../../engine/XDefine":4,"../../engine/XDrawOrder":5,"../../engine/XWithOut":13,"../../engine/control/XButton":14,"../../engine/graphic/M2DFast":27,"../../engine/interface/BridgeInterface":29,"../../engine/math/XMath":56,"../GmConfig":57,"../GmRes":59,"./GmFuncs":62,"./GmGrow":63,"./GmHeros":64,"./GmPlay":66,"./GmSave":67,"./GmSet":68}],66:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../../engine/graphic/M2DFast")),r=(_interopRequireDefault(e("../../engine/math/M_SEGMENT")),_interopRequireDefault(e("../../engine/math/M_POINT")),_interopRequireDefault(e("../../engine/math/XMath")),_interopRequireDefault(e("./GmMap"))),s=_interopRequireDefault(e("../GmConfig")),o=_interopRequireDefault(e("./GmEffect")),u=_interopRequireDefault(e("./GmHeros")),l=_interopRequireDefault(e("../GmRes")),f=_interopRequireDefault(e("../../engine/control/XButton")),h=_interopRequireDefault(e("./GmSet")),c=_interopRequireDefault(e("../../engine/control/XScroll")),d=_interopRequireDefault(e("../../engine/XDefine")),p=_interopRequireDefault(e("../../engine/interface/BridgeInterface")),_=_interopRequireDefault(e("./GmSave"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var g=function(){function GmPlay(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GmPlay),GmPlay.pgm=this,this.iGameStat=0,r.default.gi().SetMap(0),this.btn_play=new f.default,this.btn_play.SetAnima(l.default.pres.pani_ui,"btn_play"),this.btn_play.SetType1(29,0,48),this.btn_play.sName="PLAY",this.btn_skin=new f.default,this.btn_skin.SetAnima(l.default.pres.pani_ui,"btn_skin"),this.btn_skin.SetType1(35,0,48),this.btn_skin.sName="SKIN",this.btn_sound=new f.default,this.btn_close=new f.default,this.btn_close.SetAnima(l.default.pres.pani_ui,"btn_close"),this.scroll_skin=new c.default,this.scroll_skin.SetScrollRect(55,Laya.stage.width-55,128,590,288*s.default.gi().patt_heros.length-20,"x"),this.btn1_equip=new Array,this.btn1_money=new Array,this.btn1_ad=new Array,this.btn1_try=new Array;for(var e=0;e<s.default.gi().patt_heros.length;e++)this.btn1_equip[e]=new f.default,this.btn1_equip[e].SetAnima(l.default.pres.pani_ui,"btn_green_small"),this.btn1_equip[e].SetType1(0,0,36),this.btn1_equip[e].sName="EQUIP",this.btn1_money[e]=new f.default,this.btn1_money[e].SetAnima(l.default.pres.pani_ui,"btn_money"),this.btn1_money[e].SetType1(21,4,30),this.btn1_try[e]=new f.default,this.btn1_try[e].SetAnima(l.default.pres.pani_ui,"btn_ad_small"),this.btn1_try[e].SetType1(17,0,36),this.btn1_try[e].sName="Try",this.btn1_ad[e]=new f.default,this.btn1_ad[e].SetAnima(l.default.pres.pani_ui,"btn_ad_small"),this.btn1_ad[e].SetType1(17,0,36),this.btn1_ad[e].sName="Get";this.pTrySkin=null}return a(GmPlay,[{key:"_draw0",value:function(e){e.FillRect(0,0,Laya.stage.width,Laya.stage.height,0,1,60),l.default.aa_logo.Draw(Laya.stage.width/2,49);var t=Laya.stage.width-213,i=50;l.default.aa_rank_top.Draw(t,i),e.DrawTextEx(t+22,i+62,"kill:"+h.default.iLastKill,16777215,18,100,1,1,0,-1,-3),e.DrawTextEx(t+22,i+81,"Score:"+h.default.iLastScore,16777215,18,100,1,1,0,-1,-3),e.DrawTextEx(t+22,i+99,"Survive Time:"+h.default.iLastSurviveTime,16777215,18,100,1,1,0,-1,-3),e.DrawTextEx(t+22,i+62+103,"kill:"+h.default.iBestKill,16777215,18,100,1,1,0,-1,-3),e.DrawTextEx(t+22,i+81+103,"Score:"+h.default.iBestScore,16777215,18,100,1,1,0,-1,-3),e.DrawTextEx(t+22,i+99+103,"Survive Time:"+h.default.iBestSurviveTime,16777215,18,100,1,1,0,-1,-3),this.btn_play.Move(Laya.stage.width/2-128,509,256,96),this.btn_play.Draw(),this.btn_skin.Move(Laya.stage.width-288,Laya.stage.height-128,256,96),this.btn_skin.Draw(),s.default.pconfig.GetHeroById(h.default.iUseingSkinId).aa_stand.Draw(this.btn_skin.iX+48,this.btn_skin.iY+48),this.btn_sound.Move(32,Laya.stage.height-116,109,82),l.default.aa_sound.Draw(this.btn_sound.iX,this.btn_sound.iY,h.default.bSound?0:1),t=(Laya.stage.width-408)/2,i=367,r.default.gi().DrawFrame(l.default.aa_white_panel,t,i,408,108,30),e.DrawTextEx(t+204,i+54,h.default.sMyName,16777215,48,100,1,1,0,-2,-2)}},{key:"_draw1_card",value:function(e,t,i,a){r.default.gi().DrawFrame(l.default.aa_panel_black,t,i,268,462,30),a.id==h.default.iUseingSkinId&&r.default.gi().DrawFrame(l.default.aa_panel_light_green,t,i,268,462,30,!1),e.DrawTextEx(t+134,i+48,a.name,16777215,30,100,1,1,0,-2,-3);var n=s.default.pconfig.GetBladeById(a.blade_id),o=t+134,u=i+150;a.id==h.default.iUseingSkinId?(a.aa_run.DrawEx(t+134,i+329,100,.8,.8,0,-2,-2),a.aa_run.NextFrame()):(a.aa_stand.DrawEx(t+134,i+329,100,.8,.8,0,-2,-2),a.aa_stand.NextFrame()),n.aa_blade.DrawEx(o,u,100,.8,.8,270,-2,-2),n.aa_blade.DrawEx1(o,u,1,100,4,.8,270,-2,-2),n.aa_blade.DrawEx1(o,u-40,2,100,.8,.8,270,-2,-2);var f=a.id;"default"==a.unlock_type||h.default.iUnlockFlag[a.id]>0?a.id==h.default.iUseingSkinId?(l.default.aa_check.Draw(t+52,i+393),e.DrawTextEx(t+91,i+422,"Equiped",3211008,36,100,1,1,0,-1,-3)):(this.btn1_equip[f].Move(t+54,i+372,161,64),this.btn1_equip[f].Draw()):("coin"==a.unlock_type?(this.btn1_money[f].Move(t+54,i+372,161,64),this.btn1_money[f].sName=""+a.unlock_value,this.btn1_money[f].Draw()):"ad"==a.unlock_type?(this.btn1_ad[f].Move(t+54,i+372,161,64),this.btn1_ad[f].Draw()):"totalkill"==a.unlock_type?(l.default.aa_lock.Draw(t+24,i+358),e.DrawTextEx(t+134,i+374,"Get a total of",16777215,18,100,1,1,0,-2,-3),e.DrawTextEx(t+134,i+392,a.unlock_value+" kills to unlock!",16777215,18,100,1,1,0,-2,-3),e.DrawTextEx(t+134,i+437,h.default.iTotalKill+"/"+a.unlock_value,16777215,36,100,1,1,0,-2,-3),h.default.iTotalKill>=a.unlock_value&&(h.default.iUnlockFlag[a.id]=1,_.default.gi().SaveSkin())):"singlekill"==a.unlock_type&&(l.default.aa_lock.Draw(t+24,i+358),e.DrawTextEx(t+134,i+364,"Make "+a.unlock_value+" kills",16777215,18,100,1,1,0,-2,-3),e.DrawTextEx(t+134,i+381,"in a single game",16777215,18,100,1,1,0,-2,-3),e.DrawTextEx(t+134,i+400,"to unlock!",16777215,18,100,1,1,0,-2,-3),e.DrawTextEx(t+134,i+437,h.default.iBestKill+"/"+a.unlock_value,16777215,36,100,1,1,0,-2,-3),h.default.iBestKill>=a.unlock_value&&(h.default.iUnlockFlag[a.id]=1,_.default.gi().SaveSkin())),this.btn1_try[f].Move(t+54,i+482,161,64),this.btn1_try[f].Draw())}},{key:"_draw1",value:function(e){var t;e.FillRect(0,0,Laya.stage.width,Laya.stage.height,0,1,60),l.default.aa_coin.Draw(16,32),e.DrawTextEx(96,64,""+h.default.iOwnMoney,16777215,36,100,1,1,0,-1,-2),this.btn_close.Move(Laya.stage.width-112,16,96,96),this.btn_close.Draw();var i=s.default.gi().patt_heros,a=55-this.scroll_skin.iScrollOffX;for(t=0;t<i.length;t++)this._draw1_card(e,a,128,i[t]),a+=288;this.scroll_skin.Logic()}},{key:"_draw2",value:function(e){e.FillRect(0,0,Laya.stage.width,Laya.stage.height,0,1,60);var t=652,i=552,a=(Laya.stage.width-t)/2,n=(Laya.stage.height-i)/2;e.FillRect(a+6,n+6,640,540,0,1,60),e.SetViewClip(a+6,n+6,326,540),l.default.aa_wheel.DrawEx(a+326-480,n+276,100,2,2,-this.iRotateAngle,-2,-2),e.NoClip(),r.default.gi().DrawFrame(l.default.aa_frame_white,a,n,t,i,30,!1),l.default.aa_title_of_wheel.Draw(a+147,n);var o=s.default.pconfig.GetHeroById(h.default.iUseingSkinId),u=a+532,f=n+326;o.aa_stand.DrawEx(u,f,100,1,1,0,-2,-2,!0);var c=s.default.pconfig.GetBladeById(o.blade_id),d=180,_=parseInt(this.iRotateAngle+8)%20;_<10&&(d+=_);var g=o.arm_length+c.handle_length;switch(u=u+o.centerx+Math.cos(d*Math.PI/180)*g,f=f+o.centery+Math.sin(d*Math.PI/180)*g,c.aa_blade.DrawEx(u,f,100,1,1,d,-2,-2),c.aa_blade.DrawEx1(u,f,1,100,9,1,d,-2,-2),u+=90*Math.cos(d*Math.PI/180),f+=90*Math.sin(d*Math.PI/180),c.aa_blade.DrawEx1(u,f,2,100,1,1,d,-2,-2),this.iRotateAngle+=this.iRotateSpeed,this.iRotateStat){case 0:this.iRotateSpeed+.1<10?this.iRotateSpeed+=.1:(this.iRotateSpeed=10,this.iRotateStat=1,this.iRotateDelay=0);break;case 1:this.iRotateDelay++,this.iRotateDelay>=102+this.iRotateResultDelay&&(this.iRotateStat=2,this.iRotateDelay=0);break;case 2:this.iRotateSpeed>=.1?this.iRotateSpeed-=.1:(this.iRotateSpeed=0,this.iRotateStat=3,this.iRotateDelay=0);break;case 3:this.iRotateDelay++,this.iRotateDelay>=30&&(this.iRotateStat=4,this.bFreeToTry?this.StartGame():p.default.bADActive?p.default.gi().SendMessage("playad","3"):this.WatchedAD3())}}},{key:"Draw",value:function(){var e=n.default.pm2f;0==this.iGameStat&&(u.default.pp[0].bAlive=!1,u.default.pp[0].iX=r.default.gi().iWidth/2,u.default.pp[0].iY=r.default.gi().iHeight/2),r.default.gi().Draw(),o.default.gi().DrawEffect(),0==this.iGameStat&&this._draw0(e),1==this.iGameStat&&this._draw1(e),2==this.iGameStat&&(this._draw1(e),this._draw2(e))}},{key:"draw_point",value:function(e,t,i){n.default.pm2f.FillRect(e-3,t-3,6,6,i,1,100)}},{key:"StartGame",value:function(){this.iGameStat=10,r.default.gi().SetMap(0)}},{key:"WatchedAD3",value:function(){this.StartGame()}},{key:"ClosedAD3",value:function(){this.iGameStat=1}},{key:"WatchedAD4",value:function(){h.default.iUnlockFlag[this.pUnlockingSkin.id]=1,_.default.gi().SaveSkin()}},{key:"ProcTouch",value:function(e,t,i){switch(this.iGameStat){case 0:this.btn_play.ProcTouch(e,t,i)&&this.btn_play.bCheck()&&this.StartGame(),this.btn_skin.ProcTouch(e,t,i)&&this.btn_skin.bCheck()&&(this.iGameStat=1),this.btn_sound.ProcTouch(e,t,i)&&this.btn_sound.bCheck()&&(h.default.bSound=!h.default.bSound,_.default.gi().SaveInfo());break;case 1:this.btn_close.ProcTouch(e,t,i)&&this.btn_close.bCheck()&&(this.iGameStat=0);for(var a=0;a<s.default.gi().patt_heros.length;a++){var n=s.default.gi().patt_heros[a];if("default"==n.unlock_type||h.default.iUnlockFlag[n.id]>0){if(n.id==h.default.iUseingSkinId);else if(this.btn1_equip[a].ProcTouch(e,t,i))return this.btn1_equip[a].bCheck()&&(h.default.iUseingSkinId=n.id,_.default.gi().SaveSkin()),!0}else{if("coin"==n.unlock_type){if(this.btn1_money[a].ProcTouch(e,t,i))return this.btn1_money[a].bCheck()&&(h.default.iOwnMoney>=n.unlock_value?(h.default.iOwnMoney-=n.unlock_value,h.default.iUnlockFlag[n.id]=1,_.default.gi().SaveInfo(),_.default.gi().SaveSkin()):o.default.gi().AddEffect5(Laya.stage.width/2,Laya.stage.height/2,"not enough money")),!0}else if("ad"==n.unlock_type){if(this.btn1_ad[a].ProcTouch(e,t,i))return this.btn1_ad[a].bCheck()&&(this.pUnlockingSkin=n,p.default.bADActive?p.default.gi().SendMessage("playad","4"):this.WatchedAD4()),!0}else"totalkill"==n.unlock_type||n.unlock_type;if(this.btn1_try[a].ProcTouch(e,t,i))return this.btn1_try[a].bCheck()&&(this.pTrySkin=n,this.iGameStat=2,this.iRotateStat=0,this.iRotateDelay=0,this.iRotateSpeed=0,this.iRotateAngle=0,d.default.grnd(0,1e4)<1e4*s.default.try_rate?(this.bFreeToTry=!0,this.iRotateResultDelay=0):(this.iRotateResultDelay=2*d.default.grnd(0,4),this.bFreeToTry=!1)),!0}}if(this.scroll_skin.ProcTouch(e,t,i))return;case 10:r.default.gi().ProcTouch(e,t,i)}return o.default.gi().DrawEffect(),!0}}]),GmPlay}();i.default=g,g.pgm=null,g.gi=function(){return g.pgm},g.MBX=0,g.MBY=0,g.MBW=0,g.MBH=0},{"../../engine/XDefine":4,"../../engine/control/XButton":14,"../../engine/control/XScroll":15,"../../engine/graphic/M2DFast":27,"../../engine/interface/BridgeInterface":29,"../../engine/math/M_POINT":54,"../../engine/math/M_SEGMENT":55,"../../engine/math/XMath":56,"../GmConfig":57,"../GmRes":59,"./GmEffect":61,"./GmHeros":64,"./GmMap":65,"./GmSave":67,"./GmSet":68}],67:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),n=_interopRequireDefault(e("../../engine/PackageTools")),r=_interopRequireDefault(e("../../engine/interface/BridgeInterface")),s=_interopRequireDefault(e("./GmSet"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function _SAVEBUFFER(){_classCallCheck(this,_SAVEBUFFER),this.iStat=0,this.iType=0},u=function(){function GmSave(){_classCallCheck(this,GmSave),this.sbs=new Array,this.pls_data=new n.default(10240),this.iLoadStat=new Array;for(var e=0;e<GmSave.LOAD_IDS.length;e++)this.iLoadStat[e]=0;this.bLoaded=!1,this.iSaveTimeOut=0,this.iLoadTimeOut=0}return a(GmSave,[{key:"Load",value:function(e,t){for(var i=this.pls_data,a=0;a<t.length;a++)i.databuf[a]=t.charCodeAt(a);i.iLength=t.length,i.Decode_base64(),i.iOffset=0;var n=i.GetNextInt();switch(e){case GmSave.INFO:s.default.gi().LoadInfo(i,n);break;case GmSave.SKIN:s.default.gi().LoadSkin(i,n)}}},{key:"LoadResult",value:function(e,t,i){for(var a=0;a<GmSave.LOAD_IDS.length;a++)if(e==GmSave.LOAD_IDS[a])return t&&this.Load(GmSave.LOAD_IDS[a],i),void(1==this.iLoadStat[a]&&(this.iLoadStat[a]=2))}},{key:"LoadLogic",value:function(){if(!this.bLoaded){for(var e=0;e<GmSave.LOAD_IDS.length;e++)switch(this.iLoadStat[e]){case 0:return r.default.gi().SendMessage("load",""+GmSave.LOAD_IDS[e]),this.iLoadStat[e]=1,!1;case 1:return!1}return this.bLoaded=!0,!0}}},{key:"SaveResult",value:function(e,t){t&&1==this.pSaveing.iStat&&this.pSaveing.iType==e&&(this.pSaveing.iStat=10)}},{key:"SaveInfo",value:function(){this.Save(GmSave.INFO)}},{key:"SaveSkin",value:function(){this.Save(GmSave.SKIN)}},{key:"Save",value:function(e){for(var t=null,i=0;i<this.sbs.length;i++){if(0==this.sbs[i].iStat&&this.sbs[i].iType==e)return;null==t&&10==this.sbs[i].iType&&(t=this.sbs[i])}null==t&&(this.sbs[i]=new o,t=this.sbs[i]),t.iStat=0,t.iType=e}},{key:"send_save",value:function(e){var t=this.pls_data;switch(t.iOffset=0,t.InsertInt(GmSave.VER),e.iType){case GmSave.INFO:s.default.gi().SaveInfo(t);break;case GmSave.SKIN:s.default.gi().SaveSkin(t);break;default:return}t.iLength=t.iOffset,t.Encode_base64();for(var i="",a=0;a<t.iLength;a++)i+=String.fromCharCode(t.databuf[a]);r.default.gi().SendMessage("save",""+e.iType,i),this.Load(e.iType,i),e.iStat=1,this.pSaveing=e,this.iSaveTimeOut=0}},{key:"SaveLogic",value:function(){var e;for(e=0;e<this.sbs.length;e++)switch(this.sbs[e].iStat){case 0:return void this.send_save(this.sbs[e]);case 1:return this.iSaveTimeOut++,void(this.iSaveTimeOut>=30&&(this.sbs[e].iStat=0))}}}]),GmSave}();i.default=u,u.pp=null,u.gi=function(){return null==u.pp&&(u.pp=new u),u.pp},u.INFO=300,u.SKIN=301,u.VER=1,u.LOAD_IDS=[u.INFO,u.SKIN]},{"../../engine/PackageTools":3,"../../engine/interface/BridgeInterface":29,"./GmSet":68}],68:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,n=function(){function defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&defineProperties(e.prototype,t),i&&defineProperties(e,i),e}}(),r=e("../GmConfig");(a=r)&&a.__esModule;var s=function(){function GmSet(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GmSet)}return n(GmSet,[{key:"Init",value:function(){for(var e=0;e<100;e++)GmSet.iUnlockFlag[e]=0}},{key:"SaveInfo",value:function(e){e.InsertByte(GmSet.bSound?1:0),e.InsertString(GmSet.sMyName),e.InsertInt(GmSet.iLastKill),e.InsertInt(GmSet.iLastScore),e.InsertInt(GmSet.iLastSurviveTime),e.InsertInt(GmSet.iBestKill),e.InsertInt(GmSet.iBestScore),e.InsertInt(GmSet.iBestSurviveTime),e.InsertInt(GmSet.iTotalKill),e.InsertInt(GmSet.iOwnMoney)}},{key:"LoadInfo",value:function(e,t){1==e.GetNextByte()&&(GmSet.bSound=!0),GmSet.sMyName=e.GetNextString(),GmSet.iLastKill=e.GetNextInt(),GmSet.iLastScore=e.GetNextInt(),GmSet.iLastSurviveTime=e.GetNextInt(),GmSet.iBestKill=e.GetNextInt(),GmSet.iBestScore=e.GetNextInt(),GmSet.iBestSurviveTime=e.GetNextInt(),GmSet.iTotalKill=e.GetNextInt(),GmSet.iOwnMoney=e.GetNextInt()}},{key:"SaveSkin",value:function(e){e.InsertInt(GmSet.iUseingSkinId),e.InsertShort(GmSet.iUnlockFlag.length);for(var t=0;t<GmSet.iUnlockFlag.length;t++)null==GmSet.iUnlockFlag[t]?e.InsertInt(0):e.InsertInt(GmSet.iUnlockFlag[t])}},{key:"LoadSkin",value:function(e,t){GmSet.iUseingSkinId=e.GetNextInt();for(var i=e.GetNextShort(),a=0;a<i;a++)GmSet.iUnlockFlag[a]=e.GetNextInt()}}]),GmSet}();i.default=s,s.pp=null,s.gi=function(){return null==s.pp&&(s.pp=new s),s.pp},s.bSound=!0,s.bMusic=!1,s.sMyName="battle.io",s.iLastKill=0,s.iLastScore=0,s.iLastSurviveTime=0,s.iBestKill=0,s.iBestScore=0,s.iBestSurviveTime=0,s.iTotalKill=0,s.iOwnMoney=0,s.iUnlockFlag=new Array,s.iUseingSkinId=0},{"../GmConfig":57}]},{},[2]);